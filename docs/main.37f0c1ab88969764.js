"use strict";(self.webpackChunktt_service=self.webpackChunktt_service||[]).push([[179],{223:(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__}),module=__webpack_require__.hmd(module),function(){var p,aa=[];function ba(e){return function(){return aa[e].apply(this,arguments)}}function ca(e,n){return aa[e]=n}function da(e){var n=0;return function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}}}function ea(e){var n=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];return n?n.call(e):{next:da(e)}}function fa(e){for(var n,r=[];!(n=e.next()).done;)r.push(n.value);return r}var ia="function"==typeof Object.defineProperties?Object.defineProperty:function(e,n,r){e!=Array.prototype&&e!=Object.prototype&&(e[n]=r.value)},ja=typeof window<"u"&&window===this?this:typeof global<"u"&&null!=global?global:this;function ka(e,n){if(n){var r=ja;e=e.split(".");for(var d=0;d<e.length-1;d++){var m=e[d];m in r||(r[m]={}),r=r[m]}(n=n(d=r[e=e[e.length-1]]))!=d&&null!=n&&ia(r,e,{configurable:!0,writable:!0,value:n})}}function la(){la=function(){},ja.Symbol||(ja.Symbol=ma)}function na(e,n){this.a=e,ia(this,"description",{configurable:!0,writable:!0,value:n})}ka("Array.prototype.find",function(e){return e||function(n,r){t:{var d=this;d instanceof String&&(d=String(d));for(var m=d.length,g=0;g<m;g++){var v=d[g];if(n.call(r,v,g,d)){n=v;break t}}n=void 0}return n}}),na.prototype.toString=function(){return this.a};var ma=(n=0,function e(r){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new na("jscomp_symbol_"+(r||"")+"_"+n++,r)}),n,ra;function oa(){la();var e=ja.Symbol.iterator;e||(e=ja.Symbol.iterator=ja.Symbol("Symbol.iterator")),"function"!=typeof Array.prototype[e]&&ia(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return pa(da(this))}}),oa=function(){}}function pa(e){return oa(),(e={next:e})[ja.Symbol.iterator]=function(){return this},e}function qa(e,n){oa(),e instanceof String&&(e+="");var r=0,d={next:function(){if(r<e.length){var m=r++;return{value:n(m,e[m]),done:!1}}return d.next=function(){return{done:!0,value:void 0}},d.next()}};return d[Symbol.iterator]=function(){return d},d}if(ka("Array.prototype.keys",function(e){return e||function(){return qa(this,function(n){return n})}}),"function"==typeof Object.setPrototypeOf)ra=Object.setPrototypeOf;else{var sa;t:{var ta={Fg:!0},ua={};try{ua.__proto__=ta,sa=ua.Fg;break t}catch{}sa=!1}ra=sa?function(e,n){if(e.__proto__=n,e.__proto__!==n)throw new TypeError(e+" is not extensible");return e}:null}var va=ra;ka("Object.setPrototypeOf",function(e){return e||va}),ka("Object.values",function(e){return e||function(n){var d,r=[];for(d in n)Object.prototype.hasOwnProperty.call(n,d)&&r.push(n[d]);return r}}),ka("Object.is",function(e){return e||function(n,r){return n===r?0!==n||1/n==1/r:n!=n&&r!=r}}),ka("Array.prototype.includes",function(e){return e||function(n,r){var d=this;d instanceof String&&(d=String(d));var m=d.length;for(0>(r=r||0)&&(r=Math.max(r+m,0));r<m;r++){var g=d[r];if(g===n||Object.is(g,n))return!0}return!1}}),ka("Promise",function(e){function n(v){this.C=0,this.b=void 0,this.a=[];var w=this.c();try{v(w.resolve,w.reject)}catch(k){w.reject(k)}}function r(){this.a=null}function d(v){return v instanceof n?v:new n(function(w){w(v)})}if(e)return e;r.prototype.b=function(v){if(null==this.a){this.a=[];var w=this;this.c(function(){w.g()})}this.a.push(v)};var m=ja.setTimeout;r.prototype.c=function(v){m(v,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var v=this.a;this.a=[];for(var w=0;w<v.length;++w){var k=v[w];v[w]=null;try{k()}catch(j){this.f(j)}}}this.a=null},r.prototype.f=function(v){this.c(function(){throw v})},n.prototype.c=function(){function v(j){return function(G){k||(k=!0,j.call(w,G))}}var w=this,k=!1;return{resolve:v(this.m),reject:v(this.f)}},n.prototype.m=function(v){if(v===this)this.f(new TypeError("A Promise cannot resolve to itself"));else if(v instanceof n)this.U(v);else{t:switch(typeof v){case"object":var w=null!=v;break t;case"function":w=!0;break t;default:w=!1}w?this.s(v):this.g(v)}},n.prototype.s=function(v){var w=void 0;try{w=v.then}catch(k){return void this.f(k)}"function"==typeof w?this.u(w,v):this.g(v)},n.prototype.f=function(v){this.i(2,v)},n.prototype.g=function(v){this.i(1,v)},n.prototype.i=function(v,w){if(0!=this.C)throw Error("Cannot settle("+v+", "+w+"): Promise already settled in state"+this.C);this.C=v,this.b=w,this.l()},n.prototype.l=function(){if(null!=this.a){for(var v=0;v<this.a.length;++v)g.b(this.a[v]);this.a=null}};var g=new r;return n.prototype.U=function(v){var w=this.c();v.sf(w.resolve,w.reject)},n.prototype.u=function(v,w){var k=this.c();try{v.call(w,k.resolve,k.reject)}catch(j){k.reject(j)}},n.prototype.then=function(v,w){function k(_t,_r){return"function"==typeof _t?function(_s){try{j(_t(_s))}catch(ga){G(ga)}}:_r}var j,G,q=new n(function(_t,_r){j=_t,G=_r});return this.sf(k(v,j),k(w,G)),q},n.prototype.catch=function(v){return this.then(void 0,v)},n.prototype.sf=function(v,w){function k(){switch(j.C){case 1:v(j.b);break;case 2:w(j.b);break;default:throw Error("Unexpected state: "+j.C)}}var j=this;null==this.a?g.b(k):this.a.push(k)},n.resolve=d,n.reject=function(v){return new n(function(w,k){k(v)})},n.race=function(v){return new n(function(w,k){for(var j=ea(v),G=j.next();!G.done;G=j.next())d(G.value).sf(w,k)})},n.all=function(v){var w=ea(v),k=w.next();return k.done?d([]):new n(function(j,G){function q(_s){return function(ga){_t[_s]=ga,0==--_r&&j(_t)}}var _t=[],_r=0;do{_t.push(void 0),_r++,d(k.value).sf(q(_t.length-1),G),k=w.next()}while(!k.done)})},n}),ka("Object.entries",function(e){return e||function(n){var d,r=[];for(d in n)Object.prototype.hasOwnProperty.call(n,d)&&r.push([d,n[d]]);return r}});var wa="function"==typeof Object.assign?Object.assign:function(e,n){for(var r=1;r<arguments.length;r++){var d=arguments[r];if(d)for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(e[m]=d[m])}return e};ka("Object.assign",function(e){return e||wa}),ka("Math.log2",function(e){return e||function(n){return Math.log(n)/Math.LN2}});var xa=this||self;function ya(e,n,r){(e=e.split("."))[0]in(r=r||xa)||typeof r.execScript>"u"||r.execScript("var "+e[0]);for(var d;e.length&&(d=e.shift());)e.length||void 0===n?r=r[d]&&r[d]!==Object.prototype[d]?r[d]:r[d]={}:r[d]=n}function za(){}function Aa(e){var n=typeof e;if("object"==n){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return n;var r=Object.prototype.toString.call(e);if("[object Window]"==r)return"object";if("[object Array]"==r||"number"==typeof e.length&&typeof e.splice<"u"&&typeof e.propertyIsEnumerable<"u"&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==r||typeof e.call<"u"&&typeof e.propertyIsEnumerable<"u"&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==n&&typeof e.call>"u")return"object";return n}function Ca(e){var n=Aa(e);return"array"==n||"object"==n&&"number"==typeof e.length}function Da(e){return"function"==Aa(e)}function Ea(e){var n=typeof e;return"object"==n&&null!=e||"function"==n}var Ga="closure_uid_"+(1e9*Math.random()>>>0),Ha=0;function Ia(e,n,r){return e.call.apply(e.bind,arguments)}function Ja(e,n,r){if(!e)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var m=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(m,d),e.apply(n,m)}}return function(){return e.apply(n,arguments)}}function Ka(e,n,r){return(Ka=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ia:Ja).apply(null,arguments)}function La(e,n){var r=Array.prototype.slice.call(arguments,1);return function(){var d=r.slice();return d.push.apply(d,arguments),e.apply(this,d)}}function t(e,n){ya(e,n,void 0)}function u(e,n){function r(){}r.prototype=n.prototype,e.j=n.prototype,e.prototype=new r,e.prototype.constructor=e,e.ap=function(d,m,g){for(var v=Array(arguments.length-2),w=2;w<arguments.length;w++)v[w-2]=arguments[w];return n.prototype[m].apply(d,v)}}function Ma(e){if(Error.captureStackTrace)Error.captureStackTrace(this,Ma);else{var n=Error().stack;n&&(this.stack=n)}e&&(this.message=String(e))}function Na(e,n){this.c=e,this.f=n,this.b=0,this.a=null}function Oa(){this.b=this.a=null}u(Ma,Error),Ma.prototype.name="CustomError",Na.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e},Na.prototype.put=function(e){this.f(e),100>this.b&&(this.b++,e.next=this.a,this.a=e)};var Qa=new Na(function(){return new Pa},function(e){e.reset()});function Pa(){this.next=this.b=this.a=null}Oa.prototype.add=function(e,n){var r=Qa.get();r.set(e,n),this.b?this.b.next=r:this.a=r,this.b=r},Oa.prototype.remove=function(){var e=null;return this.a&&(e=this.a,this.a=this.a.next,this.a||(this.b=null),e.next=null),e},Pa.prototype.set=function(e,n){this.a=e,this.b=n,this.next=null},Pa.prototype.reset=function(){this.next=this.b=this.a=null};var Ra=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Sa(e,n){return-1!=e.indexOf(n)}function Ta(e,n){return e<n?-1:e>n?1:0}function Ua(e,n){for(var r in e)if(n.call(void 0,e[r],r,e))return!0;return!1}function Va(e){for(var n in e)return!1;return!0}function Wa(e){var r,n={};for(r in e)n[r]=e[r];return n}var Xa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),Za;function Ya(e,n){for(var r,d,m=1;m<arguments.length;m++){for(r in d=arguments[m])e[r]=d[r];for(var g=0;g<Xa.length;g++)r=Xa[g],Object.prototype.hasOwnProperty.call(d,r)&&(e[r]=d[r])}}t:{var $a=xa.navigator;if($a){var ab=$a.userAgent;if(ab){Za=ab;break t}}Za=""}function bb(e){return Sa(Za,e)}var cb=Array.prototype.indexOf?function(e,n){return Array.prototype.indexOf.call(e,n,void 0)}:function(e,n){if("string"==typeof e)return"string"!=typeof n||1!=n.length?-1:e.indexOf(n,0);for(var r=0;r<e.length;r++)if(r in e&&e[r]===n)return r;return-1};function db(e,n){this.b=e===eb&&n||"",this.a=fb}var fb={},eb={},gb=new db(eb,"");function hb(e,n){this.b=e===ib&&n||"",this.a=jb}hb.prototype.rc=function(){return 1};var jb={},ib={};function kb(){this.b="",this.c=lb,this.a=null}function mb(){return nb instanceof kb&&nb.constructor===kb&&nb.c===lb?nb.b:(Aa(nb),"type_error:SafeHtml")}kb.prototype.rc=function(){return this.a};var lb={};function ob(e){var n=new kb;return n.b=e,n.a=0,n}ob("<!DOCTYPE html>");var nb=ob("");function pb(e){var n=new hb(ib,gb instanceof db&&gb.constructor===db&&gb.a===fb?gb.b:"type_error:Const");n instanceof hb&&n.constructor===hb&&n.a===jb?n=n.b:(Aa(n),n="type_error:TrustedResourceUrl"),e.src=n.toString()}function qb(e){return qb[" "](e),e}function sb(e,n){var r=tb;return Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=n(e)}ob("<br>"),qb[" "]=za;var ub=bb("Opera"),vb=bb("Trident")||bb("MSIE"),wb=bb("Edge"),xb=bb("Gecko")&&!(Sa(Za.toLowerCase(),"webkit")&&!bb("Edge"))&&!(bb("Trident")||bb("MSIE"))&&!bb("Edge"),yb=Sa(Za.toLowerCase(),"webkit")&&!bb("Edge"),Ab,e;function zb(){var e=xa.document;return e?e.documentMode:void 0}t:{var Bb="",Cb=(e=Za,xb?/rv:([^\);]+)(\)|;)/.exec(e):wb?/Edge\/([\d\.]+)/.exec(e):vb?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):yb?/WebKit\/(\S+)/.exec(e):ub?/(?:Version)[ \/]?(\S+)/.exec(e):void 0);if(Cb&&(Bb=Cb?Cb[1]:""),vb){var Db=zb();if(null!=Db&&Db>parseFloat(Bb)){Ab=String(Db);break t}}Ab=Bb}var tb={},Fb,Ib,Mb;function Eb(e){return sb(e,function(){for(var n=0,r=Ra(String(Ab)).split("."),d=Ra(String(e)).split("."),m=Math.max(r.length,d.length),g=0;0==n&&g<m;g++){var v=r[g]||"",w=d[g]||"";do{if(v=/(\d*)(\D*)(.*)/.exec(v)||["","","",""],w=/(\d*)(\D*)(.*)/.exec(w)||["","","",""],0==v[0].length&&0==w[0].length)break;n=Ta(n=0==v[1].length?0:parseInt(v[1],10),0==w[1].length?0:parseInt(w[1],10))||Ta(0==v[2].length,0==w[2].length)||Ta(v[2],w[2]),v=v[3],w=w[3]}while(0==n)}return 0<=n})}function Gb(e){var n=document;return e=String(e),"application/xhtml+xml"===n.contentType&&(e=e.toLowerCase()),n.createElement(e)}function Hb(e){xa.setTimeout(function(){throw e},0)}function Kb(){var e=xa.MessageChannel;if(typeof e>"u"&&typeof window<"u"&&window.postMessage&&window.addEventListener&&!bb("Presto")&&(e=function(){var m=Gb("IFRAME");m.style.display="none",pb(m),document.documentElement.appendChild(m);var g=m.contentWindow;(m=g.document).open(),m.write(mb()),m.close();var v="callImmediate"+Math.random(),w="file:"==g.location.protocol?"*":g.location.protocol+"//"+g.location.host;m=Ka(function(k){("*"==w||k.origin==w)&&k.data==v&&this.port1.onmessage()},this),g.addEventListener("message",m,!1),this.port1={},this.port2={postMessage:function(){g.postMessage(v,w)}}}),typeof e<"u"&&!bb("Trident")&&!bb("MSIE")){var n=new e,r={},d=r;return n.port1.onmessage=function(){if(void 0!==r.next){var m=(r=r.next).bj;r.bj=null,m()}},function(m){d.next={bj:m},d=d.next,n.port2.postMessage(0)}}return typeof document<"u"&&"onreadystatechange"in Gb("SCRIPT")?function(m){var g=Gb("SCRIPT");g.onreadystatechange=function(){g.onreadystatechange=null,g.parentNode.removeChild(g),g=null,m(),m=null},document.documentElement.appendChild(g)}:function(m){xa.setTimeout(m,0)}}function Lb(e,n){Mb||Nb(),Ob||(Mb(),Ob=!0),Pb.add(e,n)}function Nb(){if(xa.Promise&&xa.Promise.resolve){var e=xa.Promise.resolve(void 0);Mb=function(){e.then(Qb)}}else Mb=function(){var n=Qb;!Da(xa.setImmediate)||xa.Window&&xa.Window.prototype&&!bb("Edge")&&xa.Window.prototype.setImmediate==xa.setImmediate?(Ib||(Ib=Kb()),Ib(n)):xa.setImmediate(n)}}Fb=xa.document&&vb?zb():void 0,!xb&&!vb||vb&&9<=Number(Fb)||xb&&Eb("1.9.1"),vb&&Eb("9");var Ob=!1,Pb=new Oa;function Qb(){for(var e;e=Pb.remove();){try{e.a.call(e.b)}catch(n){Hb(n)}Qa.put(e)}Ob=!1}function Rb(e){if(this.C=Sb,this.i=void 0,this.c=this.a=this.b=null,this.f=this.g=!1,e!=za)try{var n=this;e.call(void 0,function(r){Tb(n,Ub,r)},function(r){Tb(n,Vb,r)})}catch(r){Tb(this,Vb,r)}}var Sb=0,Ub=2,Vb=3;function Wb(){this.next=this.c=this.b=this.f=this.a=null,this.g=!1}Wb.prototype.reset=function(){this.c=this.b=this.f=this.a=null,this.g=!1};var Xb=new Na(function(){return new Wb},function(e){e.reset()});function Yb(e,n,r){var d=Xb.get();return d.f=e,d.b=n,d.c=r,d}function Zb(e){if(e instanceof Rb)return e;var n=new Rb(za);return Tb(n,Ub,e),n}function $b(e){return new Rb(function(n,r){r(e)})}function ac(){var e,n;return new cc(new Rb(function(d,m){e=d,n=m}),e,n)}function fc(e,n){if(e.C==Sb)if(e.b){var r=e.b;if(r.a){for(var d=0,m=null,g=null,v=r.a;v&&(v.g||(d++,v.a==e&&(m=v),!(m&&1<d)));v=v.next)m||(g=v);m&&(r.C==Sb&&1==d?fc(r,n):(g?((d=g).next==r.c&&(r.c=d),d.next=d.next.next):gc(r),hc(r,m,Vb,n)))}e.b=null}else Tb(e,Vb,n)}function ic(e,n){e.a||e.C!=Ub&&e.C!=Vb||jc(e),e.c?e.c.next=n:e.a=n,e.c=n}function dc(e,n,r,d){var m=Yb(null,null,null);return m.a=new Rb(function(g,v){m.f=n?function(w){try{var k=n.call(d,w);g(k)}catch(j){v(j)}}:g,m.b=r?function(w){try{var k=r.call(d,w);void 0===k&&w instanceof ec?v(w):g(k)}catch(j){v(j)}}:v}),m.a.b=e,ic(e,m),m.a}function Tb(e,n,r){if(e.C==Sb){e===r&&(n=Vb,r=new TypeError("Promise cannot resolve to itself")),e.C=1;t:{var d=r,m=e.s,g=e.m;if(d instanceof Rb){ic(d,Yb(m||za,g||null,e));var v=!0}else{if(d)try{var w=!!d.$goog_Thenable}catch{w=!1}else w=!1;if(w)d.then(m,g,e),v=!0;else{if(Ea(d))try{var k=d.then;if(Da(k)){kc(d,k,m,g,e),v=!0;break t}}catch(j){g.call(e,j),v=!0;break t}v=!1}}}v||(e.i=r,e.C=n,e.b=null,jc(e),n!=Vb||r instanceof ec||lc(e,r))}}function kc(e,n,r,d,m){function g(k){w||(w=!0,d.call(m,k))}var w=!1;try{n.call(e,function v(k){w||(w=!0,r.call(m,k))},g)}catch(k){g(k)}}function jc(e){e.g||(e.g=!0,Lb(e.l,e))}function gc(e){var n=null;return e.a&&(e.a=(n=e.a).next,n.next=null),e.a||(e.c=null),n}function hc(e,n,r,d){if(r==Vb&&n.b&&!n.g)for(;e&&e.f;e=e.b)e.f=!1;if(n.a)n.a.b=null,mc(n,r,d);else try{n.g?n.f.call(n.c):mc(n,r,d)}catch(m){nc.call(null,m)}Xb.put(n)}function mc(e,n,r){n==Ub?e.f.call(e.c,r):e.b&&e.b.call(e.c,r)}function lc(e,n){e.f=!0,Lb(function(){e.f&&nc.call(null,n)})}Rb.prototype.then=function(e,n,r){return dc(this,Da(e)?e:null,Da(n)?n:null,r)},Rb.prototype.$goog_Thenable=!0,Rb.prototype.cancel=function(e){if(this.C==Sb){var n=new ec(e);Lb(function(){fc(this,n)},this)}},Rb.prototype.s=function(e){this.C=Sb,Tb(this,Ub,e)},Rb.prototype.m=function(e){this.C=Sb,Tb(this,Vb,e)},Rb.prototype.l=function(){for(var e;e=gc(this);)hc(this,e,this.C,this.i);this.g=!1};var nc=Hb;function ec(e){Ma.call(this,e)}function cc(e,n,r){this.Ak=e,this.resolve=n,this.reject=r}u(ec,Ma),ec.prototype.name="cancel";var x=this;function oc(){return Object.create(z,void 0)}var A=Ka,pc=String,qc=x.Object.freeze||function(e){return e};function rc(e){for(var d,n=Object.keys(e),r=n.length;r--;)Ea(d=e[n[r]])&&rc(d);return qc(e)}function sc(e){var n=Aa(e);if("object"==n||"array"==n){if(Da(e.clone))return e.clone();for(var r in n="array"==n?[]:{},e)e.hasOwnProperty(r)&&(n[r]=sc(e[r]));return n}return e}var B=[].pop(),z=/x/.exec("");function tc(e,n){return pc(e).split(n!==B?n:" ")}var uc="prototype constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(e,n,r,d,m){if(!(n=e instanceof n)&&r)throw new D(r,d,vc(m)?m:e);return n}function xc(e,n){if(!0===(C(e,n)&&e.constructor===n))throw new TypeError("Illegal constructor "+yc(n))}function zc(e,n,r,d,m){if(!(n=Ac(e)===n)&&r)throw new D(r,d,vc(m)?m:e);return n}function Bc(e,n,r,d){return zc(e,"Array",n,r,d)}function vc(e){return e!==B}function Cc(e){return"string"==typeof e}t("H.lang.isArray",Bc),t("H.lang.isString",Cc);var Dc=parseInt,Ec=parseFloat,E=isNaN;function Fc(e){return e===+e}function Gc(e){return!E(+e)}function Ac(e){var n=Object[uc[0]][uc[6]].call(e).match(/^\[object (\w+)\]$/);return n?n[1]:typeof e}t("H.lang.isNumber",Fc),t("H.lang.isInteger",Number.isInteger?Number.isInteger:function(e){return"number"==typeof e&&e%1==0});var Hc=[];function Ic(e){0>Hc.indexOf(e)&&Hc.push(e)}function yc(e,n,r,d){var v,m="",g=2>arguments.length;return g&&(n={H:x.H},r="",d=Hc.slice()),Jc(n,!0,function(w,k){try{if(k=Kc(w,v=w[k]),!(Ea(v)&&v.window===v&&v.self===v||Ea(v)&&0<v.nodeType&&Da(v.cloneNode))&&Ea(v)){if(v===e)return m=r+"."+k,!0;if(0>d.indexOf(v)&&(d.push(v),m=yc(e,v,r+"."+k,d)))return!0}}catch{}}),g&&(m=m?m.substr(1).replace("."+uc[0]+".","#"):"~"+(Da(e)?Lc(e)+"()":Ac(e))),m}function Kc(e,n){var r=[];return Jc(e,!1,function(d,m){d[m]===n&&r.push(m)}),r.sort(Mc)[0]}function Mc(e,n){return n.length-e.length}Ic(Hc);var Nc=Object[uc[0]][uc[2]];function Jc(e,n,r){var d;if(e){for(m in e)if((!n||Nc.call(e,m))&&r(e,m,!0))return;for(d=uc.length;d--;){var m=uc[d];if((!n||Nc.call(e,m))&&r(e,m,!1))break}}}function Lc(e){return(e=/^\s*function ([^\( ]+)/.exec(e))?e[1]:"anonymous"}function Oc(e,n,r){r[n]="#"+n}var Pc=!!x.__karma__;function Qc(){throw Error("unimplemented method")}function Rc(e,n){"status"in(n=n||{})&&(this.status=+n.status),"statusText"in n&&(this.statusText=n.statusText),this.ok=200<=this.status&&300>this.status,this.f=!1,e?"string"==typeof e?this.c=e:(n=x.ArrayBuffer)&&n.prototype.isPrototypeOf(e)?this.a=e:n&&e.buffer?this.a=e.buffer:x.Blob.prototype.isPrototypeOf(e)&&(this.b=e):this.c=""}function Sc(e){if(e.f)return $b(new TypeError("Already read"));e.f=!0}function Tc(e){var n=new FileReader;return n.readAsText(e),new Rb(function(r,d){n.onload=function(){r(n.result)},n.onerror=function(){d(n.error)}})}function D(e,n,r){var d=arguments.length;if((n=n!==B?+n:n)!==B){var m=(m=/^.*?\(([^\)]+)/.exec((""+e).replace(/(\/\*([\s\S]*?)\*\/)|(\/\/(.*)$)/gm,"")))?tc(m[1].replace(/\s+/g,""),","):[];m.forEach(Oc),m=m[n]||"#"+n}var g=e?yc(e):"";return d=2<d?pc(r):"",(m||d)&&(g+=" (Argument "+(m||"")+(d?" "+d:"")+")"),d=Error(g),Object.setPrototypeOf(d,D.prototype),d}function Uc(e,n,r){var m,g,v,w=r&&r.headers||{},k={},j=this;if(!Da(n))throw new D(Uc,1,"function required");Ya(w,Xc.headers,w),Ya(k,Xc,r||{}),k.headers=w,this.c=n,this.a=m=new XMLHttpRequest,n=k.method;try{for(g in m.open(n,e,!0),w)w.hasOwnProperty(g)&&(v=w[g])&&m.setRequestHeader(g,v);m.withCredentials=!!k.withCredentials,function d(){var G=A(j.b,j),q=+k.timeout||0;Vc?(Wc(j,"timeout",G),m.timeout=q):q&&(j.f=setTimeout(function(){m.abort(),j.b({type:"timeout"})},q)),Wc(j,"error",G),Wc(j,"load",G),m.send(k.data)}()}catch{this.b({type:"cors"})}}t("H.net.Response",Rc),Rc.prototype.type="default",Rc.prototype.type=Rc.prototype.type,Rc.prototype.status=200,Rc.prototype.status=Rc.prototype.status,Rc.prototype.statusText="OK",Rc.prototype.statusText=Rc.prototype.statusText,Rc.error=function(){return Rc.a||(Rc.a=new Rc(null,{status:0,statusText:""}),Rc.a.type="error"),Rc.a},Rc.error=Rc.error,Rc.prototype.text=function(){var e=Sc(this);if(!e)if(this.c)e=Zb(this.c);else if(this.a){var d,n=(e=new Uint8Array(this.a)).length,r=Array(n);for(d=0;d<n;d++)r[d]=String.fromCharCode(e[d]);e=Zb(r.join(""))}else e=this.b?Tc(this.b):$b("Unsupported response body");return e},Rc.prototype.json=function(){return this.text().then(x.JSON.parse)},Rc.prototype.blob=function(){var e,n=Sc(this);return n||(this.b?e=this.b:this.a&&(e=new Blob([this.a],{type:"application/octet-stream"}))),n||Zb(e)},Rc.prototype.arrayBuffer=function(){return this.a?Sc(this)||Zb(this.a.slice(0)):this.blob().then(Rc.b)},Rc.b=function(e){var n=new FileReader;return n.readAsArrayBuffer(e),new Rb(function(r,d){n.onload=function(){r(n.result)},n.onerror=function(){d(n.error)}})},!Pc&&x.Response&&x.Response.error&&(Rc=x.Response,Ic(Rc.prototype)),u(D,Error),t("H.lang.InvalidArgumentError",D),D.prototype.name="InvalidArgumentError",t("H.net.Xhr",Uc);var Xc={method:"GET",headers:{},data:null},Yc="withCredentials"in new XMLHttpRequest,Vc="timeout"in new XMLHttpRequest,bd,cd,dd,gd,hd;function Wc(e,n,r){Yc?e.a.addEventListener(n,r):e.a["on"+n]=r}function Zc(e,n,r){Yc?e.a.removeEventListener(n,r):e.a["on"+n]=null}function $c(e,n){var r=[];return e&&r.push(yc(e)),1<arguments.length&&r.push(""+n),r=Error(r.join(" ")),Object.setPrototypeOf(r,$c.prototype),r}function ed(){if(this.constructor=this.constructor,!Cc("STATIC_DB"))throw new D(this.constructor,0);if(this.g=fd(),!this.g)throw new $c(this.constructor,"This browser does not support IndexedDB");this.a=[],this.c=[],this.Zh=A(this.Zh,this)}function md(e,n,r){if(e.b)e.a?(e.a.push(n),r&&e.c.push(r)):e.f?r&&r(e.f):n(e.b.result);else{e.b=e.g.open("H_STATIC_DB",1),e.b.onupgradeneeded=e.Zh;var d=e.b.onerror=function(){clearTimeout(e.i),e.f=this.error,e.c.forEach(function(m){m(e.f)}),delete e.a,delete e.c};e.i=setTimeout(function(){d.call({error:Error("DbOpenTimeoutError")})},500),e.b.onsuccess=function(){clearTimeout(e.i),e.a?(e.a.forEach(function(m){m(this.result)},this),delete e.a,delete e.c):(delete e.b,delete e.f,e.a=[],e.c=[])},e.a.push(n),r&&e.c.push(r)}}function jd(e,n,r){md(e,function(d){d=d.transaction(["data"],"readwrite"),n(d.objectStore("data"))},r)}function kd(e,n,r){n&&(e.onsuccess=function(){n(this.result)}),r&&(e.onerror=function(){r(this.error)})}function id(e){var n=Object.prototype.toString.call(e);return"[object Blob]"===n||"[object ArrayBuffer]"===n||Cc(e)||Ea(e)}function nd(){return gd||(gd=new ed),gd}function fd(){return x.indexedDB||x.webkitIndexedDB||x.mozIndexedDB||x.msIndexedDB}function od(){var e="";if(!vc(hd))if("file:"===window.location.protocol&&-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&128<=window.location.href.length)hd=!1;else{try{var n=fd();e="H_TEST_DB";var r=n&&n.open(e,1)}catch{}hd=!!r&&null===r.onupgradeneeded,r&&n.deleteDatabase&&n.deleteDatabase(e)}return hd}function qd(){0!=rd&&(sd[this[Ga]||(this[Ga]=++Ha)]=this),this.zd=this.zd,this.mb=this.mb}Uc.prototype.abort=function(){this.a&&(this.a.abort(),this.a&&this.b({type:"abort"}))},Uc.prototype.abort=Uc.prototype.abort,Uc.prototype.b=function(e){var r,n=e.type;e=this.a,this.f&&clearTimeout(this.f),"load"===n?e instanceof XMLHttpRequest&&200!==e.status&&(r="network"):r=4===e.readyState&&0===e.status&&"error"==n?"cors":"error"!=n?n:"network",Zc(this,"timeout",n=this.b),Zc(this,"error",n),Zc(this,"load",n),e=0===e.status||r&&"network"!==r?Rc.error():new Rc(e.responseText||null,e),r=this.c,delete this.b,delete this.c,delete this.a,r(e)},u($c,Error),t("H.lang.IllegalOperationError",$c),$c.prototype.name="IllegalOperationError",p=ed.prototype,p.put=function(e,n,r,d){if(!Cc(e)&&!Fc(e))throw new D(this.put,0);if(!id(n))throw new D(this.put,1);jd(this,function(m){kd(m.put(n,e),r,d)},d)},p.get=function(e,n,r){var d;if(!Cc(e)&&!Fc(e))throw new D(this.get,0);if(!Da(n))throw new D(this.get,1);return jd(this,function(m){kd(d=m.get(e),n,r)},r),{cancel:function(){d&&(d.onsuccess=ld)}}},p.remove=function(e,n,r){if(!Cc(e)&&!Fc(e))throw new D(this.remove,0);jd(this,function(d){kd(d.delete(e),n,r)},r)},p.clear=function(e,n){jd(this,function(r){kd(r.clear(),e,n)},n)},p.Zh=function(){var e=this.b.result;e.objectStoreNames.contains("data")||e.createObjectStore("data")},t("H.util.IndexedDBStorage.getInstance",nd),t("H.util.IndexedDBStorage.isSupported",od);var rd=0,sd={};function td(e){e&&"function"==typeof e.F&&e.F()}function ud(e,n){this.type=e,this.currentTarget=this.target=n,this.c=this.a=!1,this.Ik=!0}function vd(e,n,r){vd.j.constructor.call(this,e,r),this.data=n}function wd(e,n,r){wd.j.constructor.call(this,e,r),this.message=n}qd.prototype.zd=!1,qd.prototype.F=function(){if(!this.zd&&(this.zd=!0,this.o(),0!=rd)){var e=this[Ga]||(this[Ga]=++Ha);if(0!=rd&&this.mb&&0<this.mb.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete sd[e]}},qd.prototype.tb=function(e,n){this.zd?void 0!==n?e.call(n):e():(this.mb||(this.mb=[]),this.mb.push(void 0!==n?Ka(e,n):e))},qd.prototype.o=function(){if(this.mb)for(;this.mb.length;)this.mb.shift()()},ud.prototype.stopPropagation=function(){this.a=!0},ud.prototype.preventDefault=function(){this.c=!0,this.Ik=!1},t("H.util.Event",ud),ud.prototype.stopPropagation=ud.prototype.stopPropagation,ud.prototype.stopPropagation=ud.prototype.stopPropagation,ud.prototype.CAPTURING_PHASE=1,ud.prototype.CAPTURING_PHASE=ud.prototype.CAPTURING_PHASE,ud.prototype.AT_TARGET=2,ud.prototype.AT_TARGET=ud.prototype.AT_TARGET,ud.prototype.BUBBLING_PHASE=3,ud.prototype.BUBBLING_PHASE=ud.prototype.BUBBLING_PHASE,ud.prototype.eventPhase=0,ud.prototype.eventPhase=ud.prototype.eventPhase,u(vd,ud),t("H.util.DataEvent",vd),u(wd,ud),t("H.util.ErrorEvent",wd);var xd=Math,yd=xd.min,zd=xd.max,Ad=xd.round,Bd=xd.floor,Cd=xd.ceil,Dd=xd.abs,Ed=xd.log,Fd=xd.sqrt,Gd=xd.pow,Hd=xd.exp,Id=xd.sin,Jd=xd.asin,Kd=xd.cos,Ld=xd.tan,Md=xd.atan,Nd=xd.atan2,Od=xd.LN2,Pd=xd.PI,Qd=Pd/2,Rd=Pd/4,Sd=2*Pd,Td=3*Pd,Ud=Pd/180,Vd=180/Pd,Wd=1/0,Xd=Gd(-2,53),Yd=Yd||function(e){return Ed(e)/Od};function Zd(e,n){var r;return 0>(r=e%n)==0>n?r:r+n}function $d(e,n,r){return n-=r=r||0,(e-=r)-Bd(e/n)*n+r}function ae(e,n,r){return e>r?r:e<n?n:e}function be(e,n,r,d){return d||(d=0),n<r?e>=n-d&&e<=r+d:e>=r-d&&e<=n+d}function ce(e,n,r,d,m,g){return Fd(Gd((e-m)*(d-g)-(n-g)*(r-m),2)/(Gd(r-m,2)+Gd(d-g,2)))}t("H.math.normalize",$d),t("H.math.clamp",ae);var de={NONE:0,VERTEX:1,EDGE:2,SURFACE:3};function ee(e,n,r,d,m,g){var v=r.length,w=v,k=r[0],j=0,G=0,q=0;d=d/2||0;var _t=g||2;g=_t*(m?0:1)+1;for(var _r=_t-2;1!=j&&w>g;){w-=_r;var _s=r[--w];_t=r[--w];var ga=r[w?w-_r-1:(v+(w-_r-1))%v],_c=r[w?w-_r-2:(v+(w-_r-2))%v];_t>=e-d&&_t<=e+d&&_s>=n-d&&_s<=n+d||_c>=e-d&&_c<=e+d&&ga>=n-d&&ga<=n+d?j=1:j||_t!==e?!j&&be(e,_t,_c,d)&&((_t<e&&_c>e||_t>e&&_c<e)&&(G+=(k=_s+(e-_t)/(_c-_t)*(ga-_s))>n,q+=k<n),j=be(n,_s,ga,d)&&ce(e,n,_t,_s,_c,ga)<=d?2:0):(_c===e&&(_s<n&&ga>n||_s>n&&ga<n)||(k<=e&&_c>e||k>=e&&_c<e)&&(_s>=n?++G:++q),j=be(n,_s,ga,d)&&ce(e,n,_t,_s,_c,ga)<=d?2:0),k=_t}return!j&&m&&0!==q&&G%2!=0&&(j=3),j}function fe(e,n){return ee(e.x,e.y,n,0,!0)!==de.NONE}function ge(e){for(var n=e.length,r=new Float64Array(2*n),d=n&&vc(e[0].x);n--;){var m=e[n],g=n<<1;r[g]=d?m.x:m[0],r[g+1]=d?m.y:m[1]}return r}function he(){}function ie(e,n,r){this.type=e,this.data=n,this.c=ac(),this.resolve=A(this.resolve,this),this.reject=A(this.reject,this),this.priority=je,r!==B&&(this.priority=r),this.fh().add(this)}t("H.math.CoverType",de),t("H.math.isPointInsidePolygon",fe),t("H.math.flatten",ge),t("H.util.ICancelable",he),he.prototype.cancel=function(){},he.prototype.cancel=he.prototype.cancel;var je=1,ke={Vo:0,Yo:je,To:2};function le(e){var n;for(n in this.a={},ke)this.a[ke[n]]=[];this.Ze=e,this.Ze.addEventListener("allocatable",A(this.b,this))}p=ie.prototype,p.then=function(e,n,r){return this.c.Ak.then(e,n,r)},p.resolve=function(e){this.Yd=3,this.c.resolve(e)},p.reject=function(e){this.Yd=5,this.c.reject(e)},p.Yd=0,p.cancel=function(){3>this.Yd&&(this.oe(),this.fh().remove(this),this.Yd=4)},ie.prototype.cancel=ie.prototype.cancel,t("H.util.JobManager",le);var me=Object.keys(ke).map(function(e){return ke[e]}).sort().reverse();function ne(e,n,r){var d=[],m=arguments.length;return e&&d.push(yc(e)),1<m&&(m=2<m&&Bc(r)?" out of ["+r[0]+"..."+r[1]+"]":"",d.push("("+n+m+")")),d=Error(d.join(" ")),Object.setPrototypeOf(d,ne.prototype),d}le.prototype.add=function(e){C(e,ie,this.add,0),this.a[e.priority].push(e),this.b()},le.prototype.contains=function(e){return-1<this.a[e.priority].indexOf(e)},le.prototype.remove=function(e){var n=e.priority,r=this.a[n].indexOf(e);return-1<r?(this.a[n].splice(r,1),!0):(e.Li&&this.Ze.yf(e.Li),!1)},le.prototype.b=function(){me.forEach(function(e){this.a[e]=this.a[e].filter(function(n){var r;if((r=this.Ze.Jg(n))===z)return!0;var d=A(this.Ze.yf,this.Ze,r,n);n.Li=r,n.then(d,d),n.Yd=n.qj(r)?1:5},this)},this)},u(ne,Error),t("H.lang.OutOfRangeError",ne),ne.prototype.name="OutOfRangeError";var oe="closure_listenable_"+(1e6*Math.random()|0);function pe(e){return!(!e||!e[oe])}var qe=0;function re(e,n,r,d,m){this.listener=e,this.proxy=null,this.src=n,this.type=r,this.capture=!!d,this.Mf=m,this.key=++qe,this.be=this.rf=!1}function se(e){e.be=!0,e.listener=null,e.proxy=null,e.src=null,e.Mf=null}function te(e){this.src=e,this.a={},this.b=0}function ve(e,n){var r=n.type;if(!(r in e.a))return!1;var g,d=e.a[r],m=cb(d,n);return(g=0<=m)&&Array.prototype.splice.call(d,m,1),g&&(se(n),0==e.a[r].length&&(delete e.a[r],e.b--)),g}function ue(e,n,r,d){for(var m=0;m<e.length;++m){var g=e[m];if(!g.be&&g.listener==n&&g.capture==!!r&&g.Mf==d)return m}return-1}te.prototype.add=function(e,n,r,d,m){var g=e.toString();(e=this.a[g])||(e=this.a[g]=[],this.b++);var v=ue(e,n,d,m);return-1<v?(n=e[v],r||(n.rf=!1)):((n=new re(n,this.src,g,!!d,m)).rf=r,e.push(n)),n},te.prototype.remove=function(e,n,r,d){if(!((e=e.toString())in this.a))return!1;var m=this.a[e];return-1<(n=ue(m,n,r,d))&&(se(m[n]),Array.prototype.splice.call(m,n,1),0==m.length&&(delete this.a[e],this.b--),!0)},te.prototype.na=function(e){e=e&&e.toString();var r,n=0;for(r in this.a)if(!e||r==e){for(var d=this.a[r],m=0;m<d.length;m++)++n,se(d[m]);delete this.a[r],this.b--}return n},te.prototype.sh=function(e,n){var r=void 0!==e,d=r?e.toString():"",m=void 0!==n;return Ua(this.a,function(g){for(var v=0;v<g.length;++v)if(!(r&&g[v].type!=d||m&&g[v].capture!=n))return!0;return!1})};var we=!vb||9<=Number(Fb),xe=vb&&!Eb("9");!yb||Eb("528"),xb&&Eb("1.9b")||vb&&Eb("8")||ub&&Eb("9.5")||yb&&Eb("528"),xb&&!Eb("8")||vb&&Eb("9");var ye=function(){if(!xa.addEventListener||!Object.defineProperty)return!1;var e=!1,n=Object.defineProperty({},"passive",{get:function(){e=!0}});try{xa.addEventListener("test",za,n),xa.removeEventListener("test",za,n)}catch{}return e}();function ze(e,n){if(ud.call(this,e?e.type:""),this.relatedTarget=this.currentTarget=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.b=null,e){var r=this.type=e.type,d=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.currentTarget=n,n=e.relatedTarget){if(xb){t:{try{qb(n.nodeName);var m=!0;break t}catch{}m=!1}m||(n=null)}}else"mouseover"==r?n=e.fromElement:"mouseout"==r&&(n=e.toElement);this.relatedTarget=n,d?(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:Ae[e.pointerType]||"",this.b=e,e.defaultPrevented&&this.preventDefault()}}u(ze,ud);var Ae={2:"touch",3:"pen",4:"mouse"};ze.prototype.stopPropagation=function(){ze.j.stopPropagation.call(this),this.b.stopPropagation?this.b.stopPropagation():this.b.cancelBubble=!0},ze.prototype.preventDefault=function(){ze.j.preventDefault.call(this);var e=this.b;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,xe)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch{}};var Be="closure_lm_"+(1e6*Math.random()|0),Ce={},De=0;function Ee(e,n,r,d,m){if(d&&d.once)return Fe(e,n,r,d,m);if("array"==Aa(n)){for(var g=0;g<n.length;g++)Ee(e,n[g],r,d,m);return null}return r=Ge(r),pe(e)?e.U.add(String(n),r,!1,Ea(d)?!!d.capture:!!d,m):He(e,n,r,!1,d,m)}function He(e,n,r,d,m,g){if(!n)throw Error("Invalid event type");var v=Ea(m)?!!m.capture:!!m,w=Ie(e);if(w||(e[Be]=w=new te(e)),(r=w.add(n,r,d,v,g)).proxy)return r;if(d=Je(),r.proxy=d,d.src=e,d.listener=r,e.addEventListener)ye||(m=v),void 0===m&&(m=!1),e.addEventListener(n.toString(),d,m);else if(e.attachEvent)e.attachEvent(Ke(n.toString()),d);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(d)}return De++,r}function Je(){var e=Le,n=we?function(r){return e.call(n.src,n.listener,r)}:function(r){if(!(r=e.call(n.src,n.listener,r)))return r};return n}function Fe(e,n,r,d,m){if("array"==Aa(n)){for(var g=0;g<n.length;g++)Fe(e,n[g],r,d,m);return null}return r=Ge(r),pe(e)?e.U.add(String(n),r,!0,Ea(d)?!!d.capture:!!d,m):He(e,n,r,!0,d,m)}function Me(e,n,r,d,m){if("array"==Aa(n)){for(var g=0;g<n.length;g++)Me(e,n[g],r,d,m);return null}return d=Ea(d)?!!d.capture:!!d,r=Ge(r),pe(e)?e.U.remove(String(n),r,d,m):!!(e&&(e=Ie(e))&&(n=e.a[n.toString()],e=-1,n&&(e=ue(n,r,d,m)),r=-1<e?n[e]:null))&&Ne(r)}function Ne(e){if("number"==typeof e||!e||e.be)return!1;var n=e.src;if(pe(n))return ve(n.U,e);var r=e.type,d=e.proxy;return n.removeEventListener?n.removeEventListener(r,d,e.capture):n.detachEvent?n.detachEvent(Ke(r),d):n.addListener&&n.removeListener&&n.removeListener(d),De--,(r=Ie(n))?(ve(r,e),0==r.b&&(r.src=null,n[Be]=null)):se(e),!0}function Ke(e){return e in Ce?Ce[e]:Ce[e]="on"+e}function Oe(e,n,r,d){var m=!0;if((e=Ie(e))&&(n=e.a[n.toString()]))for(n=n.concat(),e=0;e<n.length;e++){var g=n[e];g&&g.capture==r&&!g.be&&(g=Pe(g,d),m=m&&!1!==g)}return m}function Pe(e,n){var r=e.listener,d=e.Mf||e.src;return e.rf&&Ne(e),r.call(d,n)}function Le(e,n){if(e.be)return!0;if(!we){if(!n)t:{n=["window","event"];for(var r=xa,d=0;d<n.length;d++)if(null==(r=r[n[d]])){n=null;break t}n=r}if(n=new ze(d=n,this),r=!0,!(0>d.keyCode||null!=d.returnValue)){t:{var m=!1;if(0==d.keyCode)try{d.keyCode=-1;break t}catch{m=!0}(m||null==d.returnValue)&&(d.returnValue=!0)}for(d=[],m=n.currentTarget;m;m=m.parentNode)d.push(m);for(e=e.type,m=d.length-1;!n.a&&0<=m;m--){n.currentTarget=d[m];var g=Oe(d[m],e,!0,n);r=r&&g}for(m=0;!n.a&&m<d.length;m++)n.currentTarget=d[m],g=Oe(d[m],e,!1,n),r=r&&g}return r}return Pe(e,new ze(n,this))}function Ie(e){return(e=e[Be])instanceof te?e:null}var Qe="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ge(e){return Da(e)?e:(e[Qe]||(e[Qe]=function(n){return e.handleEvent(n)}),e[Qe])}function F(){qd.call(this),this.U=new te(this),this.wn=this,this.Mg=null}function Re(e){var n=(e=e||{}).callback;this.b=e.label,Da(n)&&(this.callback=n),this.a=!!e.disabled,Re.j.constructor.call(this)}u(F,qd),F.prototype[oe]=!0,p=F.prototype,p.Mb=function(){return this.Mg},p.ka=function(e){this.Mg=e},p.addEventListener=function(e,n,r,d){Ee(this,e,n,r,d)},p.removeEventListener=function(e,n,r,d){Me(this,e,n,r,d)},p.dispatchEvent=function(e){var n,r=this.Mb();if(r)for(n=[];r;r=r.Mb())n.push(r);r=this.wn;var d=e.type||e;if("string"==typeof e)e=new ud(e,r);else if(e instanceof ud)e.target=e.target||r;else{var m=e;Ya(e=new ud(d,r),m)}if(m=!0,n)for(var g=n.length-1;!e.a&&0<=g;g--){var v=e.currentTarget=n[g];m=v.jd(d,!0,e)&&m}if(e.a||(m=(v=e.currentTarget=r).jd(d,!0,e)&&m,e.a||(m=v.jd(d,!1,e)&&m)),n)for(g=0;!e.a&&g<n.length;g++)m=(v=e.currentTarget=n[g]).jd(d,!1,e)&&m;return m},p.o=function(){F.j.o.call(this),this.U&&this.U.na(void 0),this.Mg=null},p.jd=function(e,n,r){if(!(e=this.U.a[String(e)]))return!0;e=e.concat();for(var d=!0,m=0;m<e.length;++m){var g=e[m];if(g&&!g.be&&g.capture==n){var v=g.listener,w=g.Mf||g.src;g.rf&&ve(this.U,g),d=!1!==v.call(w,r)&&d}}return d&&0!=r.Ik},p.sh=function(e,n){return this.U.sh(void 0!==e?String(e):void 0,n)},t("H.util.EventTarget",F),F.prototype.ka=F.prototype.ka,F.prototype.setParentEventTarget=F.prototype.ka,F.prototype.Mb=F.prototype.Mb,F.prototype.getParentEventTarget=F.prototype.Mb,F.prototype.addEventListener=F.prototype.addEventListener,F.prototype.addEventListener=F.prototype.addEventListener,F.prototype.removeEventListener=F.prototype.removeEventListener,F.prototype.removeEventListener=F.prototype.removeEventListener,F.prototype.dispatchEvent=F.prototype.dispatchEvent,F.prototype.dispatchEvent=F.prototype.dispatchEvent,F.prototype.F=F.prototype.F,F.prototype.dispose=F.prototype.F,F.prototype.tb=F.prototype.tb,F.prototype.addOnDisposeCallback=F.prototype.tb,F.prototype.xn=F.prototype.jd,F.prototype.jd=function(e,n,r){var d,m,g=!0,v=r[r.currentTarget===r.target?"AT_TARGET":n?"CAPTURING_PHASE":(d=!0,"BUBBLING_PHASE")];return(!d||"pointerenter"!==(m=r.type)&&"pointerleave"!==m)&&(r.eventPhase=v,g=F.prototype.xn.apply(this,arguments),d&&this.Mb&&null===this.Mb()&&delete r.eventPhase),g},F.prototype.Tk=function(e){for(var n,r=this;r&&(n=r.Mb())&&n!==e;)r=n;n||r.ka(e)},F.prototype.setRootParentEventTarget=F.prototype.Tk,u(Re,F),t("H.util.ContextItem",Re),Re.prototype.Ge=function(){return this.b},Re.prototype.getLabel=Re.prototype.Ge,Re.prototype.Jc=function(e){return this.b!==e&&(this.b=e,this.dispatchEvent("update")),this},Re.prototype.setLabel=Re.prototype.Jc,Re.prototype.dc=function(){return this.a},Re.prototype.isDisabled=Re.prototype.dc,Re.prototype.va=function(e){return e!==this.a&&(this.a=e,this.dispatchEvent("update")),this},Re.prototype.setDisabled=Re.prototype.va;var Se=new Re;function Te(e){if(x.document){var n=document.createElement("canvas");return n.width=n.height=1,n.getContext("2d",{fp:e})}return null}function Ue(){return window.devicePixelRatio||1}Re.SEPARATOR=Se,t("H.util.getPixelRatio",Ue);var Ve=/^rgba\(([^,]+),([^,]+),([^,]+),([^)]+)\)$/;function We(e){var n=Xe[e],r=x.RegExp;return n||(x.Uint8ClampedArray||(x.Uint8ClampedArray=function(d){return d instanceof Number?Array(d):d.map(function(m){return ae(Ad(m),0,255)})}),"none"===e?n=new Uint8ClampedArray([0,0,0,0]):(Ye.fillStyle="black",Ye.fillStyle=e,Ve.test(Ye.fillStyle)?n=new Uint8ClampedArray([r.$1,r.$2,r.$3,255*r.$4]):(Ye.clearRect(0,0,1,1),Ye.fillRect(0,0,1,1),n=Ye.getImageData(0,0,1,1).data)),Xe[e]=n),n}function Ze(e){return"none"!==e&&0<We(e)[3]}var Xe=oc(),$e=!!x.VBArray;function af(e,n){return e!==B?e:n}function bf(e){return/^<svg/.test(e)?"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(e):e}function cf(e){this.fc=0<+e?xd.round(e):0}t("H.util.eval",function(a){return eval(a)}),t("H.util.provide",function(e){var n=xa.$jscomp;if(n&&"function"==typeof n.Vl&&n.Vl())throw Error("goog.provide cannot be used within a module.");ya(e,void 0)}),cf.prototype.next=function(e){if(9007199254740992===this.fc)throw new ne(e,this.fc,[0,9007199254740991]);return this.fc++};var df=new cf,ef=A(df.next,df);function ff(){return!0}function gf(){return!1}function ld(){}var hf=qc([]),jf=qc({});function kf(e){return"CANVAS"===e.tagName?[e]:e.getElementsByTagName("CANVAS")}function lf(e,n,r){var d;if(n=e.ownerDocument===n?e.cloneNode(!0):n.importNode(e,!0),r)for(e=kf(e),d=(r=kf(n)).length;d--;)r[d].getContext("2d").drawImage(e[d],0,0);return n}var Ye=Te(!0),mf=Te(!1);function nf(e){var n=e.complete,r=0<e.naturalWidth;if(n&&!r&&$e)try{mf.drawImage(e,0,0),r=!0}catch{}return n&&r}var of=x.BlobBuilder||x.WebKitBlobBuilder||x.MozBlobBuilder;function pf(e,n){if(n=n||"",of){var r=new of;r.append(e),e=r.getBlob(n)}else e=new Blob([e],{type:n});return e}var qf=x.navigator;function rf(){var e=rf.a;return e||(rf.a=e=this,Ic(rf.a),F.call(e),sf(this)),e}function sf(e){e.g=10,e.i=6,e.a=oc(),e.b=oc(),e.c=0}function tf(e,n,r,d){if(!uf[e])throw new D(tf,0,"Mime type is not supported");this.f=e,"crossOrigin"in(e=d?Wa(d):{})||(e.crossOrigin="anonymous"),this.a=e,vf.href=n.toString(),ie.call(this,vf.protocol+"//"+vf.hostname,n,r)}cd=/Edge\/\d+/.test(qf.appVersion),dd=/(A|a)ndroid/.test(qf.appVersion),u(rf,F),rf.prototype.o=function(){rf.j.o.call(this),sf(this)},rf.prototype.Jg=function(e){var n=this.a[e=e.type]||0;if(this.c<this.g&&n<this.i){var r=++this.f;return this.c++,this.a[e]=n+1,this.b[r+""]=e,r}return z},rf.prototype.yf=function(e){var n=this.b[e];if(!vc(n)||!this.a[n])throw new $c(this.yf,"Unknown requestId");this.c--,this.a[n]--,this.a[n]||delete this.a[n],delete this.b[e],this.dispatchEvent("allocatable")},rf.prototype.f=-1,u(tf,ie),tf.prototype.qj=function(){return this.b=uf[this.f].call(this),!0},tf.prototype.oe=function(){this.b&&(this.b.abort(),delete this.b)};var uf={"application/json":function(){var e=this,n=wf(this.a),r=n.headers;return n.headers=r=r?Wa(r):{},r.Accept="application/json",new Uc(this.data,function(d){200<=d.status&&300>d.status?e.resolve(d.json()):e.reject(d)},n)},"text/plain":function(){var e=this;return new Uc(this.data,function(n){200<=n.status&&300>n.status?e.resolve(n.text()):e.reject(n)},wf(this.a))},image:function(){var e=x.document.createElement("img"),n=this,r=this.data;return e.onload=A(this.resolve,this,e),e.onerror=function(){n.reject(Rc.error())},e.crossOrigin=this.a.crossOrigin,e.src=r,{abort:function(){e.onerror=e.onload=null,$e&&nf(e)||e.removeAttribute("src")}}}};!function(){try{var e=new XMLHttpRequest;e.open("get","/",!0)}catch{e={}}"response"in e&&(uf.arraybuffer=function(){var g,n=new XMLHttpRequest,r=this,d=this.a,m=d.headers;if(n.open("GET",this.data),xf(n,d),n.responseType="arraybuffer",m)for(g in m)n.setRequestHeader(g,m[g]);return n.onerror=n.ontimeout=function(){r.reject(Rc.error())},n.onload=function(){r.resolve(new Rc(n.response))},n.send(),n})}();var yf=new le(new rf);tf.prototype.fh=function(){return yf};var vf=x.document.createElement("a");function wf(e){var n=Wa(e);return delete n.crossOrigin,xf(n,e),n}function xf(e,n){e.withCredentials="use-credentials"===n.crossOrigin}function J(e,n){this.x=+e,this.y=+n}function zf(e){if(!e)throw Error("invalid argument");return e instanceof J?e:new J(e.x,e.y)}function Af(e){var n=Bf[e];if(!n)if(e in Cf)n=Bf[e]=e;else{n=Df.length;var r="",d=e.charAt(0).toUpperCase()+e.substr(1),m="",g=!1;for((Ef&&(g=(m=Ef+d)in Cf));n--&&!g;)g=(m=(r=Df[n])+d)in Cf;if(g&&(Ef=r),!(n=g?m:null))throw Error("Could not find any variant of CSS property ["+e+"]");Bf[e]=n}return n}t("H.math.Point",J),J.prototype.set=J,J.prototype.set=J.prototype.set,J.prototype.clone=function(e){return e?(e.x=this.x,e.y=this.y):e=new J(this.x,this.y),e},J.prototype.clone=J.prototype.clone,J.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},J.prototype.add=J.prototype.add,J.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},J.prototype.sub=J.prototype.sub,J.prototype.scale=function(e,n){return this.x*=e,this.y*=void 0===n?e:n,this},J.prototype.scale=J.prototype.scale,J.prototype.round=function(){return this.x=Ad(this.x),this.y=Ad(this.y),this},J.prototype.round=J.prototype.round,J.prototype.floor=function(){return this.x=Bd(this.x),this.y=Bd(this.y),this},J.prototype.floor=J.prototype.floor,J.prototype.ceil=function(){return this.x=Cd(this.x),this.y=Cd(this.y),this},J.prototype.ceil=J.prototype.ceil,J.prototype.ia=function(e){return!(!e||this.x!==e.x||this.y!==e.y)},J.prototype.equals=J.prototype.ia,J.prototype.Cj=function(e,n){var r=n.x-e.x,d=n.y-e.y,m=e;if(r||d){var g=((this.x-e.x)*r+(this.y-e.y)*d)/(r*r+d*d);m=0>=g?e:1<=g?n:new J(e.x+g*r,e.y+g*d)}return m},J.prototype.getNearest=J.prototype.Cj,J.prototype.Wa=function(e){return Fd(Gd(this.x-e.x,2)+Gd(this.y-e.y,2))},J.prototype.distance=J.prototype.Wa,J.fromIPoint=zf,t("H.dom.cssPrefixer.prefix",Af);var Df=["O","Ms","ms","Moz","Webkit"],Bf={},Ef="",Cf=document.createElement("span").style;function Ff(e,n,r,d){if(!e||!n||!r)throw new D(Ff,B,"Must specify name, version and revision parameter");this.name=e,this.version=n,this.revision=r,d&&Ya(this,d)}t("H.util.BuildInfo",Ff),Ff.prototype.toString=function(){var e,n=[];for(e in this)Cc(this[e])&&n.push(this[e]);return n.join(";")};var Gf={};function Hf(e,n,r,d){if(!e)throw new D(Hf,1,"Must specify a name parameter");return Gf[e]||(Gf[e]=new Ff(e,n,r,d))}function If(){If.j.constructor.call(this),this.a=Jf(this),this.f=oc(),this.c=A(this.c,this),this.a.addEventListener("message",this.c),this.b={}}Ff.get=Hf,u(If,F),If.prototype.o=function(){this.a.terminate()},If.prototype.g=function(e){var n=e.type,d=e.data,m=Kf++,g=d&&d.Mo?d.Mo:B,v=!0;return this.f[n]?(this.b[m]=e,Lf(this,n,m,d&&d.message,g)):(e.reject(new D(this.g,0,"processor_not_found")),v=!1),v},If.prototype.c=function(e){var n=this.b[(e=e.data).taskId],r=e.taskId,d=e.data,m=this;if(2===e.type)new tf("arraybuffer",d).then(function(g){return g.arrayBuffer()}).then(function(g){m.a.postMessage(["3",r,[g]],[g])},function(){m.a.postMessage(["3",r,[null,"ERROR"]])});else{if(n){switch(e.type){case 1:n.resolve(d);break;case 0:n.reject(d)}delete this.b[r]}this.dispatchEvent(new ud(this.A.IDLE))}};var Kf=0,Qf,Tf;function Mf(e,n,r){var m,d=Kf++;return e.b[d]=m=ac(),Lf(e,n,d,r),m.Ak}function Lf(e,n,r,d,m){d===B||Ca(d)||(d=[d]);try{e.a.postMessage([n,r,d],m)}catch(g){(e=e.b[r]).reject(g.message)}}function Jf(a){var b=x.H.__bootstrap__;if(b=Da(b)?(""+b).replace(/^[^{]+{((.|[\r\n])+?)}\s*$/,"$1"):""+b,x.Worker&&x.URL)try{var c=new x.Worker(x.URL.createObjectURL(pf(b,"application/javascript")))}catch{}return c||(a=new Nf(a),function(){eval("var self = arguments[0];"+b)}(a),c=new Of(a)),c}function Of(e){F.call(this),this.a=e}function Nf(e){F.call(this),this.a=e,this.addEventListener=A(this.addEventListener,this),this.removeEventListener=A(this.removeEventListener,this),this.postMessage=A(this.postMessage,this),this.eval=A(eval,this)}function Pf(){var e=Qf;return e||(e=Qf=this,F.call(e),Rf(this)),e}function Rf(e){var r,n=e.b;if(n)for(r=n.length;r--;)n[r].F();e.b=[],Ic(e.b),e.c={},e.f=oc()}function Sf(e,n,r){ie.call(this,e,n,r)}function Uf(e,n,r,d,m,g){var v,w,j,G,k=e.length;if(k)for(v=[];k--;){var q=e[k],_t=q.length,_r=0;for(j=1;j<_t;j++)if(G=Vf(q[j-1],q[j],r,n,d,m)){var ga=G[1];_r&&_r.ia(G[0])?w.push(ga):v.push(w=G),_r=ga,g&&(j=_t,k=0)}}else v=e;return v}function Vf(e,n,r,d,m,g){var v=e.x;e=-e.y;var w=n.x;if(n=-n.y,r=-r,g=-g,v>w){if(w>m||v<d)return;var k=v,j=e;v=w,e=n,w=k,n=j,k=1}else if(v>m||w<d)return;if(e>n){if(n>r||e<g)return;var G=1;e=-e,n=-n,j=g,g=-r,r=-j}else if(e>r||n<g)return;if(v<d){if((e+=(d-v)*(n-e)/(w-v))>r)return;v=d}if(e<g){if((v+=(g-e)*(w-v)/(n-e))>m)return;e=g}return w>m&&(n=e+(m-v)*(n-e)/(w-v),w=m),n>r&&(w=v+(r-e)*(w-v)/(n-e),n=r),G&&(e=-e,n=-n),k?[new J(w,-n),new J(v,-e)]:[new J(v,-e),new J(w,-n)]}function Wf(e,n,r){e=Xf(e,!0),n=Xf(n,!1);var d,m,g={},v=d=1;switch(~~(r||0)){case 1:v=d=0;break;case 2:d=0,v=1;break;case 3:d=1,v=0}r=d;var w=v;if(n&&e){for(n.se=new Yf(n.x,n.y,null,Zf(n)),e.se=new Yf(e.x,e.y,null,Zf(e)),v=n;v.next;v=v.next)if(!v.Za)for(d=e;d.next;d=d.next)if(!d.Za){var k=$f(v.next),j=$f(d.next);if(m=ag(v,k,d,j,g)){var G=g.ql,q=g.Po,_t=g.Qo;bg(m=new Yf(q,_t,null,null,null,null,!0,0,0,m=g.pl),v,k),bg(k=new Yf(q,_t,null,null,null,null,!0,0,0,G),d,j),m.Th=k,k.Th=m}}for(g=fe(n,cg(e)),r&&(g=!g),v=n;v;v=v.next)v.Za&&(v.vh=g,g=!g);for(g=fe(e,cg(n)),w&&(g=!g),d=e;d.next;d=d.next)d.Za&&(d.vh=g,g=!g);for(dg(n),dg(e);(e=eg(n))!=n;){for(r=null;!e.yg;e=e.Th){for(g=e.vh;(r=new Yf(e.x,e.y,r)).artificial=e.Za||e.Sj,e.yg=1,e=g?e.next:e.gc;)if(e.Za){e.yg=1;break}if(!e)break}r.Uh=_r||null;var _r=r}return _r}}function Yf(e,n,r,d,m,g,v,w,k,j){this.x=e,this.y=n,this.next=r||null,this.gc=d||null,this.Uh=m||null,this.Th=g||null,this.Za=!!v,this.vh=!!w,this.yg=k||0,this.alpha=j||0,d&&(d.next=this),r&&(r.gc=this),this.Sj=!1,this.se=null}function $f(e){for(;e&&e.Za;)e=e.next;return e}function Zf(e){if(e)for(;e.next;)e=e.next;return e}function eg(e){var n=e;if(n)do{n=n.next}while(n!=e&&(!n.Za||n.Za&&n.yg));return n}function dg(e){var n=Zf(e);n.gc.next=e,e.gc=n.gc}function ag(e,n,r,d,m,g){var v,w=n.x-e.x,k=n.y-e.y,j=d.x-r.x,G=d.y-r.y,q=w*G-k*j;return!q||(j=((r.x-e.x)*G-(r.y-e.y)*j)/q,q=(k*(r.x-e.x)-w*(r.y-e.y))/q,0>j||1<j||0>q||1<q)?0:(0===j?v=e:1===j?v=n:0===q?v=r:1===q&&(v=d),v&&!g?(v.x+=2480549651603763e-20,v.y+=7321997314118067e-20,v.se&&(v.se.x=v.x,v.se.y=v.y),ag(e,n,r,d,m)):(m.Po=e.x+j*w,m.Qo=e.y+j*k,m.pl=j,m.ql=q,1))}function cg(e){for(var n=[];e;)n.push(e.x,e.y),e=e.next;return n}function bg(e,n,r){for(n=n.next;n!==r&&n.alpha<=e.alpha;)n=n.next;e.next=n,e.gc=n.gc,e.next.gc=e,e.gc.next=e}function Xf(e,n){for(var r,d=null,m=0,g=e.length;m<g;m++)(r=new Yf(e[m].x,e[m].y,d)).Sj=n,(r.next=d)&&(d.gc=r),d=r;return d}function fg(e,n,r){var d=ae(+e,-90,90);if(n&&E(d))throw new D(n,r,e);return d}function gg(e,n,r){var d=+e;if((-180>d||180<d)&&(d=Zd(d+180,360)-180),n&&E(d))throw new D(n,r,e);return d}function hg(e,n,r){var d;if(e!==B&&E(d=+e)&&n)throw new D(n,r,e);return d}function ig(e,n){return 0>e!=0>n&&180<Dd(n-e)}function jg(){xc(this,jg)}function kg(e,n,r){this.lat=fg(e,kg,0),this.lng=gg(n,kg,1),r!==B&&(this.alt=hg(r,kg,2))}function lg(e,n,r){var d=Ea(e)&&!(E(e.lat=fg(e.lat))||E(e.lng=gg(e.lng))||e.alt!==B&&E(e.alt=hg(e.alt)));if(!d&&n)throw new D(n,r,e);return d}function ng(e){if(!e)throw new D(ng,0,e);return new kg(e.lat,e.lng,e.alt)}function K(e,n,r,d){og(this,fg(e,K,0),gg(n,K,1),fg(r,K,2),gg(d,K,3))}function og(e,n,r,d,m){return e.a=r,e.b=m,n<d&&(r=n,n=d,d=r),e.c=n,e.f=d,e.l=e.g=e.i=null,e}function qg(e,n){return(e=n-e)+(0>e?360:0)}function pg(e,n){return(e+=n/2)-(180<e?360:0)}function rg(e,n,r,d,m,g,v,w,k){r=yd(r,v),e=zd(e,m);var j=pg(n,m=qg(n,d)),G=pg(g,v=qg(g,w))-j;if(180>(G+=0>G-1e-6?360:0)-1e-6){j=n;var q=w}else G=360-G,j=g,q=d;return 360<=(G=G+m/2+v/2)+5e-7?(j=-180,q=180):G-5e-7<m?(j=n,q=d):G-5e-7<v&&(j=g,q=w),k?og(k,e,j,r,q):new K(e,j,r,q)}function sg(e,n,r){return r||(lg(e,sg,0),lg(n,sg,1)),new K(e.lat,e.lng,n.lat,n.lng)}function tg(e,n){var r=1,d=e.length,m=null;if(!Ca(e))throw new D(tg,0,e);if(0<d){var g=e[0];for(m=sg(g,g,n);r<d;r++)m.Xc((g=e[r]).lat,g.lng,n,m)}return m}function ug(e,n){var m,r=3,d=e.length;if(!(n||e&&null!=e.length))throw new D(ug,0,e);if(0<d)for(m=new K(e[0],e[1],e[0],e[1]);r<d;r+=3)m.Xc(e[r],e[r+1],n,m);return m}function vg(e,n){var m,r=1,d=e.length;if(n&&(!e||null==e.length))throw new D(vg,0,e);if(0<d)for(m=new K(e[0].c,e[0].a,e[0].f,e[0].b);r<d;r++)m.ec(e[r],n,m);return m}function wg(e,n,r,d,m,g){xc(this,wg),this.c=e||10,this.b=null,this.f=d||0,this.g=m||0,this.i=n||1,this.l=r||1,this.m=!!g,this.flush()}function xg(e){var n=e.b;if(e.m&&!n){var r=e.head;(r.entries||r[0]||r[1]||r[2]||r[3])&&(n=yg([n=[r],n,n,n],[r[6],r[7],r[4],r[5]]),e.b=n)}return n}function yg(e,n){var r,d,m,g,v=0;for(r=3;0<=r;r--){var w=r+4,k=0<r%3,j=[],G=n[r],q=e[r];for(d=q.length;d--;){var _t=q[d];if(m=_t.entries)for(g=m.length;g--;){var _r=m[g].a(r);(k?_r>G:_r<G)&&(G=_r)}for(g=4;g--;)(m=_t[g])&&(k?m[w]>G:m[w]<G)&&j.push(m)}v+=j.length,n[r]=G,e[r]=j}return v&&(n=yg(e,n)),n}function zg(e,n,r){var d,m;if(e.m&&(d=e.b))for(m=3;0<=m;m--){var g=n.a(m);if(m%3?g>=d[m]:g<=d[m]){if(!r){e.b=null;break}d[m]=g}}}function Bg(e,n){var d,r=e.head;if(n){var m=n;if(m!==r)for(r=m;m=m.parent;)(m.entries||1<m.a)&&(r=m)}else for(;!r.entries&&2>(d=r.a)&&d;)r=m;e.head=r}function Cg(e,n,r,d,m,g,v,w,k){var _c,j=n.entries,G=n[7],q=n[4],_t=n[5],_r=n[6],_s=n[8],ga=n[9];if(j){var _u=j.length;if(m>q||d>G||v<_r||g<_t)for(;_u--;)q=(G=j[_u]).a(3),_t=G.a(0),_r=G.a(1),G.a(2)>=m&&_r>=d&&(_t<v||w&&_t==v)&&(q<g||k&&q==g)&&r.push(G);else for(;_u--;)r.push(j[_u])}(g>_s||k&&g==_s)&&(m<ga&&(_c=n[1])&&Cg(e,_c,r,d,m,g,v,w,k),(v>ga||w&&v==ga)&&(_c=n[3])&&Cg(e,_c,r,d,m,g,v,w,k)),d<_s&&(m<ga&&(_c=n[0])&&Cg(e,_c,r,d,m,g,v,w,k),(v>ga||w&&v==ga)&&(_c=n[2])&&Cg(e,_c,r,d,m,g,v,w,k))}If.prototype.A={IDLE:"idle",Ni:"error"},If.prototype.i=function(e,n){var r=this.l||(this.l=new ud(this.A.Ni));r.data=n,delete this.f[e],this.dispatchEvent(r)},u(Of,F),Of.prototype.postMessage=function(e){x.setTimeout(A(this.b,this,e),0)},Of.prototype.b=function(e){var n=new ud("message");n.data=e,this.a.dispatchEvent(n)},Of.prototype.terminate=function(){this.a.F(),this.F()},u(Nf,F),Nf.prototype.postMessage=function(e){var n=new ud("message");n.data=e,x.setTimeout(A(this.a.c,this.a,n),0)},u(Pf,F),Pf.prototype.o=function(){Pf.j.o.call(this),Rf(this)},Pf.prototype.Jg=function(e){var n;if(!(n=this.f[e=e.type]))throw new $c(this.Jg,'Unknown type "'+e+'"');var r=this.b,d=r[0];return d||(d=r[0]=new If,this.tb(La(td,d)),Va(this.c)||Mf(d,"0",r=x.Object.keys(this.c))),(r=d).f[e]||(r.f[e]=n,Mf(r,"1",[e,Da(n)?n+"":n]).then(ld,A(r.i,r,e))),d},Pf.prototype.yf=function(){},Pf.prototype.a=function(e,n){var r=this.f,d=r[e];if(d){if(n!==d)throw new $c(this.a,'Type "'+e+'" is already registered')}else r[e]=n},u(Sf,ie),Sf.prototype.fh=function(){return Tf||(Tf=new le(new Pf)),Tf},Sf.prototype.oe=function(){},Sf.prototype.qj=function(e){return e.g(this)},t("H.math.clipping.clipStrips",Uf),t("H.math.clipping.clipPolygon",Wf),t("H.geo.isDBC",ig),t("H.geo.AbstractGeometry",jg),jg.prototype.getBoundingBox=jg.prototype.K,jg.prototype.equals=jg.prototype.ia,jg.prototype.rb="",jg.prototype.Hb="",jg.prototype.toString=function(){return this.cd([this.rb.toUpperCase()," "]).join("")},jg.prototype.toString=jg.prototype.toString,jg.prototype.Kc=function(){return{type:this.Hb,coordinates:this.bd()}},jg.prototype.toGeoJSON=jg.prototype.Kc,jg.prototype.Y=function(){return{type:this.rb,coordinates:this.pc(),boundingBox:this.K().Y()}},jg.prototype.forWorkerMessage=jg.prototype.Y,u(kg,jg),t("H.geo.Point",kg),kg.prototype.ia=function(e){return this===e||!!e&&this.lat===e.lat&&this.lng===e.lng&&(this.alt||0)===(e.alt||0)},kg.prototype.equals=kg.prototype.ia,kg.prototype.Wa=function(e){if(this===e||this.lat===e.lat&&this.lng===e.lng)e=0;else{var n=this.lat*Ud,r=e.lat*Ud;e=12742001.58*Jd(yd(1,Fd(Gd(Id((n-r)/2),2)+Kd(n)*Kd(r)*Gd(Id((this.lng*Ud-e.lng*Ud)/2),2))))}return e},kg.prototype.distance=kg.prototype.Wa,kg.prototype.zg=function(e,n,r){var d;if(r){if(d=n/6371000.79){n=e*Ud;var m=Id(e=Ud*this.lat);r=Id(d);var g=Kd(d);d=Ud*this.lng;var v=Kd(e);e=Jd(v*Kd(n)*r+m*g),n=(d+(n=Nd(Id(n)*v*r,g-m*Id(e)))+Pd)%(2*Pd)-Pd,m=new kg(e*Vd,(540+(n*=Vd))%360-180)}return m||this}return(90+(e=(e%360+360)%360))%180==0?(e=this.lng+n/(6371000.79*Sd*Kd(this.lat*Ud))*(270===e?-360:360),new kg(this.lat,(e+540)%360-180)):((n/=6371000.79)&&(r=this.lng*Ud,g=(d=(m=this.lat*Ud)+n*Kd(e*=Ud))-m,v=Ed(Ld(d/2+Rd)/Ld(m/2+Rd)),v=E(g/v)?Kd(m):g/v,e=n*Id(e)/v,Dd(d)>Qd&&(d=0<d?Pd-d:-(Pd+d)),d=new kg(d*Vd,((r+e+Td+(Dd(m+g)>Qd?Pd:0))%Sd-Pd)*Vd)),d||this)},kg.prototype.walk=kg.prototype.zg,kg.prototype.K=function(){return new K(this.lat,this.lng,this.lat,this.lng)},kg.prototype.getBoundingBox=kg.prototype.K,kg.validate=lg,kg.fromIPoint=ng,p=kg.prototype,p.rb="Point",p.cd=function(e){return e.push("(",this.lng," ",this.lat,")"),e},p.Hb="Point",p.bd=function(){return[this.lng,this.lat,this.alt||0]},p.pc=function(){return[this.lat,this.lng,this.alt||0]},u(K,jg),t("H.geo.Rect",K),K.prototype.rb="Polygon",K.prototype.cd=function(e){var n=this.c,r=this.a,d=this.f,m=this.b;return e.push("(","(",r," ",n,",",m," ",n,",",m," ",d,",",r," ",d,",",r," ",n,")",")"),e},K.prototype.ia=function(e){var n=this===e;return!n&&C(e,K)&&(n=this.c===e.c&&this.a===e.a&&this.f===e.f&&this.b===e.b),n},K.prototype.equals=K.prototype.ia,K.prototype.clone=function(){return new K(this.c,this.a,this.f,this.b)},K.prototype.clone=K.prototype.clone,K.prototype.Nb=function(){return this.l||(this.l=new kg(this.c,this.a)),this.l},K.prototype.getTopLeft=K.prototype.Nb,K.prototype.Jb=function(){return this.g||(this.g=new kg(this.f,this.b)),this.g},K.prototype.getBottomRight=K.prototype.Jb,K.prototype.bn=function(){return this.c},K.prototype.getTop=K.prototype.bn,K.prototype.Pl=function(){return this.f},K.prototype.getBottom=K.prototype.Pl,K.prototype.xm=function(){return this.a},K.prototype.getLeft=K.prototype.xm,K.prototype.Sm=function(){return this.b},K.prototype.getRight=K.prototype.Sm,K.prototype.bb=function(){return this.i||(this.i=new kg(this.f+(this.c-this.f)/2,pg(this.a,this.Ab()))),this.i},K.prototype.getCenter=K.prototype.bb,K.prototype.Ab=function(){return qg(this.a,this.b)},K.prototype.getWidth=K.prototype.Ab,K.prototype.Ld=function(){return this.c-this.f},K.prototype.getHeight=K.prototype.Ld,K.prototype.Bb=function(){return this.a>this.b},K.prototype.isCDB=K.prototype.Bb,K.prototype.Rf=function(){return!this.Ab()&&!this.Ld()},K.prototype.isEmpty=K.prototype.Rf,K.prototype.K=function(){return new K(this.c,this.a,this.f,this.b)},K.prototype.getBoundingBox=K.prototype.K,K.prototype.uf=function(e,n,r){var d=this.bb();return r||(e=fg(e,this.uf,0),n=gg(n,this.uf,1)),(e=(n=this.Xc(e,n,r)).bb()).lat===d.lat&&e.lng===d.lng&&this.Ld()===n.Ld()&&this.Ab()===n.Ab()},K.prototype.containsLatLng=K.prototype.uf,K.prototype.gd=function(e,n){return n||lg(e,this.gd,0),this.uf(e.lat,e.lng,n)},K.prototype.containsPoint=K.prototype.gd,K.prototype.Qg=function(e,n){var r=this.bb();if(!n&&!C(e,K))throw new D(this.Qg,0,e);return(e=(n=this.ec(e,n)).bb()).lat===r.lat&&e.lng===r.lng&&this.Ld()===n.Ld()&&this.Ab()===n.Ab()},K.prototype.containsRect=K.prototype.Qg,K.prototype.Xc=function(e,n,r,d){if(!r){if(E(e=fg(e)))throw new D(this.Xc,0,e);if(E(n=gg(n)))throw new D(this.Xc,1,n)}return rg(this.c,this.a,this.f,this.b,e,n,e,n,d)},K.prototype.mergeLatLng=K.prototype.Xc,K.prototype.jk=function(e,n,r){return n||lg(e,this.jk,0),this.Xc(e.lat,e.lng,n,r)},K.prototype.mergePoint=K.prototype.jk,K.prototype.ec=function(e,n,r){if(!n&&!C(e,K))throw new D(this.ec,0,e);return rg(this.c,this.a,this.f,this.b,e.c,e.a,e.f,e.b,r)},K.prototype.mergeRect=K.prototype.ec,K.prototype.Bc=function(e,n,r,d,m,g){return m||(e=fg(e,this.Bc,0),n=gg(n,this.Bc,1),r=fg(r,this.Bc,2),d=gg(d,this.Bc,3)),rg(this.c,this.a,this.f,this.b,e,n,r,d,g)},K.prototype.mergeTopLeftBottomRight=K.prototype.Bc,K.prototype.nd=function(e,n){var r=this.a<=this.b,d=e.a<=e.b,m=this.a<e.b,g=e.a<this.b;if(!n&&!C(e,K))throw new D(this.nd,0,e);return this.f<=e.c&&e.f<=this.c&&(!r&&(!d||m||g)||!d&&(m||g)||m&&g)},K.prototype.intersects=K.prototype.nd,K.merge=rg,K.fromPoints=sg,K.coverPoints=tg,K.coverLatLngAlts=ug,K.coverRects=vg,K.prototype.Hk=function(e,n){var r=this.a,d=this.c,m=this.b,g=this.f,v=this.bb().lng;lg(e,this.Hk,0);var w=e.lat-g-(d-g)/2,k=e.lng-v;return e=-180>(e=r+(0>(k=180<k||-180>k?-(v+e.lng):k)?2*k:0))?360+e:e,m=180<(m+=0<k?2*k:0)?m-360:m,90<=(d=0<w?d+2*w:d)&&(d=90),-90>=(g=0>w?g+2*w:g)&&(g=-90),n?og(n,d,e,g,m):new K(d,e,g,m)},K.prototype.resizeToCenter=K.prototype.Hk,K.prototype.Hb="Polygon",K.prototype.bd=function(){return[[this.a,this.c,0],[this.b,this.c,0],[this.b,this.f,0],[this.a,this.f,0],[this.a,this.c,0]]},K.prototype.Y=function(){return this.pc()},K.prototype.pc=function(){return[this.c,this.a,this.f,this.b]},wg.prototype.remove=function(e){var n,r,d,m=!1;return e&&(n=e.node)&&n.b===this&&(r=n.entries)&&0<=(d=r.indexOf(e))&&(r.splice(d,1),this.s(n),zg(this,e,!1),m=!0),m},wg.prototype.flush=function(){var e=new Ag(B,NaN,this.f-this.i,this.g-this.l,this.f+this.i,this.g+this.l);e.b=this,this.head=this.a=e,this.b=null},wg.prototype.Za=function(e,n,r,d,m,g){var v=[],w=this.head,k=this.a;return e<=w[5]&&n<=w[6]&&(m?r>=w[7]:r>w[7])&&(g?d>=w[4]:d>w[4])&&Cg(this,w,v,e,n,r,d,g||d>=k[6],m||r>=k[5]),v},wg.prototype.Lc=ba(1);var Dg=0;function Ag(e,n,r,d,m,g){this.c=n,e&&(this.parent=e,this.b=e.b,1&n?(r=e[8],m=e[5]):(r=e[7],m=e[8]),2&n?(d=e[9],g=e[6]):(d=e[4],g=e[9])),this[7]=r,this[5]=m,this[8]=(r+m)/2,this[4]=d,this[6]=g,this[9]=(d+g)/2}function Eg(e,n){return e[n]||(++e.a,e[n]=new Ag(e,n))}function Fg(e,n){(e.entries||(e.entries=[])).push(n),n.node=e}function Gg(e,n,r,d,m){var g=e[5],v=e[6];return e[7]<=n&&e[4]<=r&&(g>d||g===d&&g===e.b.a[5])&&(v>m||v===m&&v===e.b.a[6])}function Hg(e,n,r,d,m,g){Hg.j.constructor.apply(this,arguments)}function Ig(e,n,r,d,m){if(Gg(e.a,n,r,d,m))return Jg(e,e.a,n,r,d,m,e.c);throw Error("Coordinates out of bounds")}function Jg(e,n,r,d,m,g,v){var w=n[8],k=n[9],j=0,G=0;return v&&(m<w||(j=+(r>=w)))&&(g<k||(G=+(d>=k)))?r=Jg(e,Eg(n,j|G<<1),r,d,m,g,v-1):(Fg(n,r=new Kg(r,d,m,g)),zg(e,r,!0),Bg(e,n)),r}function Kg(e,n,r,d){this.id=Dg++,this[0]=n,this[1]=r,this[2]=d,this[3]=e}function Lg(e){this.g=new Hg(+e||10,180,90,0,0,!0),this.f=[],this.i=!1,this.a=this.b=this.c=null}function Mg(e,n,r,d,m,g){return g?(g=new Kg(m,-n,r+360,-d),e.f.push(g),e.i=!0,e.a&&e.a.Bc(n,r,d,m,!0,e.a)):(g=Ig(e.g,r,-n,m,-d),e.b&&e.b.Bc(n,r,d,m,!0,e.b)),++e.Eh,e.c=null,g}function Ng(e,n,r,d,m,g,v){var j,w=(e=e.f).length,k=[];if(w){var G=r+360;for(j=m+360;w--;){var q=e[w];(Og(q,n,r,d,m,g,v)||Og(q,n,G,d,j,g,v))&&k.push(q)}}return k}function Og(e,n,r,d,m,g,v){var w=e[3],k=e[0],j=e[1];return e=e[2],(g?k<=d:k<d)&&(v?w<=m:w<m)&&e>=n&&j>=r}function Pg(e,n){var r,d,m;if(r=n.length){var g=e.length;for(d={};g--;)d[e[g].id]=1;for(;r--;)(m=n[r]).id in d||e.push(m)}}Ag.prototype.a=0,Ag.prototype.removeChild=function(e){var n=e.c;this[n]===e&&(delete this[n],delete e.parent,--this.a)},Ag.prototype.Lc=ba(0),u(Hg,wg),Hg.prototype.s=function(e){for(var n,r,d=this.head;e&&!((n=e.entries)&&n.length||(n&&delete e.entries,e.a||!(r=e.parent)));)r.removeChild(e),d===e&&(d=r),e=r;this.head!==d&&(this.head=d,Bg(this))},Hg.prototype.yc=function(e,n){return Ig(this,e,n,e,n)},Kg.prototype.a=function(e){return this[e]},t("H.geo.QuadTree",Lg),p=Lg.prototype,p.Eh=0,p.Rc=function(){return this.Eh},p.Bb=function(){return this.i},p.K=function(){var e,n;if(!this.c){var d,m,g,r=[];if(!this.b&&(e=xg(this.g))&&(this.b=new K(-e[0],e[3],-e[2],e[1])),(n=this.b)&&r.push(n),!this.a&&(g=(m=this.f).length)){e=90;var v=360,w=-90;for(d=0;g--;){var k=m[g];e=yd(e,k[0]),v=yd(v,k[3]),w=zd(w,k[2]),d=zd(d,k[1])}this.a=new K(-e,v,-w,d-360)}(n=this.a)&&r.push(n),(n=r[0])&&(r[1]&&(n=n.ec(r[1],!0)),this.c=n)}return this.c},p.yc=function(e){var n=e.lng;return Mg(this,e=e.lat,n,e,n,!1)},p.Pj=function(e){var n=e.Nb(),r=e.Jb();return(e=e.Bb())?Mg(this,n.lat,r.lng,r.lat,n.lng,e):Mg(this,n.lat,n.lng,r.lat,r.lng,e)},Lg.prototype.insertBoundingBox=Lg.prototype.Pj,Lg.prototype.remove=function(e){var n;if(e.node){var r=this.g.remove(e);this.b=null}else(r=0<=(e=(n=this.f).indexOf(e)))&&(n.splice(e,1),this.i=0<n.length,this.a=null);return r&&(--this.Eh,this.c=null),r},Lg.prototype.remove=Lg.prototype.remove,Lg.prototype.Pf=function(e,n,r){var d=this.g,m=e.Nb(),g=e.Jb(),v=-m.lat;m=m.lng;var w=-g.lat;return g=g.lng,!n&&v===w||!r&&m===g?e=[]:e.Bb()?(Pg(e=d.Za(-180,v,g,w,r,n),d.Za(m,v,180,w,!1,n)),Pg(e,Ng(this,v,g,w,m+360,n,r))):Pg(e=d.Za(m,v,g,w,r,n),Ng(this,v,m,w,g,n,r)),e},Lg.prototype.intersectBoundingBox=Lg.prototype.Pf;var Qg=[62,-1,-1,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,63,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],Rg=typeof BigInt<"u"?BigInt:Number;function Sg(e){var n=Rg(0),r=Rg(0),d=[];if(e.split("").forEach(function(m){m=Rg(Qg[m.charCodeAt(0)-45]),n|=(m&Rg(31))<<r,(m&Rg(32))===Rg(0)?(d.push(n),n=Rg(0),r=Rg(0)):r+=Rg(5)}),0<r)throw Error("Invalid encoding");return d}function Tg(e){return e&Rg(1)&&(e=~e),+(e>>=Rg(1)).toString()}function Ug(e){var n=void 0===e.precision?5:e.precision,r=void 0===e.hf?0:e.hf,d=void 0===e.jf?0:e.jf;e=e.ci;var m=Math.pow(10,n),g=Math.pow(10,d);n=Vg(n,r,d);var v=[],w=Rg(0),k=Rg(0),j=Rg(0);return e.forEach(function(G){var q=Rg(Math.round(G[0]*m));v.push(Wg(q-w)),w=q,q=Rg(Math.round(G[1]*m)),v.push(Wg(q-k)),k=q,r&&(G=Rg(Math.round(G[2]*g)),v.push(Wg(G-j)),j=G)}),(n instanceof Array?n:fa(ea(n))).concat(v instanceof Array?v:fa(ea(v))).join("")}function Vg(e,n,r){if(0>e||15<e)throw Error("precision out of range. Should be between 0 and 15");if(0>r||15<r)throw Error("thirdDimPrecision out of range. Should be between 0 and 15");if(0>n||7<n||4===n||5===n)throw Error("thirdDim should be between 0, 1, 2, 3, 6 or 7");return e|=r<<7|n<<4,Xg(1)+Xg(e)}function Xg(e){var n="";for(e=Rg(e);31<e;)n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[e&Rg(31)|Rg(32)],e>>=Rg(5);return n+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[e]}function Wg(e){var n=0>(e=Rg(e));return e<<=Rg(1),n&&(e=~e),Xg(e)}function Yg(e){return Ug({ci:e.polyline,precision:e.precision,hf:e.thirdDim,jf:e.thirdDimPrecision})}function Zg(e){if(1!=+(e=Sg(e))[0].toString())throw Error("Invalid format version");var n=+e[1].toString();n={precision:15&n,hf:n>>4&7,jf:n>>7&15};for(var r=Math.pow(10,n.precision),d=Math.pow(10,n.jf),m=n.hf,g=0,v=0,w=0,k=[],j=2;j<e.length;){var G=Tg(e[j])/r;g+=G,v+=Tg(e[j+1])/r,m?(G=Tg(e[j+2])/d,k.push([g,v,w+=G]),j+=3):(k.push([g,v]),j+=2)}if(j!==e.length)throw Error("Invalid encoding. Premature ending reached");return{polyline:(e=Object.assign({},n,{ci:k})).ci,precision:e.precision,thirdDim:e.hf,thirdDimPrecision:e.jf}}function L(e){L.j.constructor.call(this),e&&$g(e,L,0),this.$=e||[],this.a=ah(this,0,this.$.length)}function ah(e,n,r){e=e.$;var d=0;for(n=zd(n,0),r=yd(r,e.length),r-=2,n+=1;n<r;)d+=ig(e[n],e[n+=3]);return d}function bh(e,n,r,d,m){var g=e.$.length;n=fg(n,m),r=gg(r,m),e.$.push(fg(n,m),gg(r,m),d===B?0:hg(d,m)),g&&(e.a+=ig(e.$[g-2],r)),delete e.b,delete e.c}function $g(e,n,r){for(var g,d=e.length,m=!(d%3);m&&d;)m=!(E(e[--d]=hg((g=e[d])===B?0:g))||E(e[--d]=gg(e[d]))||E(e[--d]=fg(e[d])));if(!m&&n)throw new D(n,r,e)}function ch(e){var n=new L,r=0,d=e.length;if(d%2)throw new D(ch,0,e);for(;r<d;)bh(n,e[r++],e[r++],0,ch);return n}function dh(e,n){return e.b-n.b}function eh(e,n){var g,r=e.$,d=-2,m=[],v=e.c;if(!v){v=e.c=new Lg;var w=0,k=e.$,j=k.length;for(g=0;g<j;g+=3){var G=k[g],q=k[g+1];if(g){if(_r<q)var _t=_r,_r=q;else _t=q;if(ga<G)var _s=G;else{_s=ga;var ga=G}(_t=Mg(v,_s,_t,ga,_r,180<_r-_t)).b=w++}ga=G,_r=q}}for(k=(v=v.Pf(n).sort(dh)).length,n=0;n<k;n++){if(j=3*(w=(w=v[n]).b),w>d+1){var _c=[r[j],r[j+1]];m.push(_c)}d=w,_c.push(r[j+3],r[j+4])}if(e.a){for(r=[],d=m.length,n=0;n<d;n++)if(v=(_c=m[n]).length){for(k=[],e=0;e<v;e+=2)k.push(w=_c[e],j=_c[e+1]),g=_c[e-1],e&&ig(j,g)&&(r.push(k),(k=[]).push(_c[e-2],g+=0>g?360:-360,w,j));r.push(k)}m=r}return m}function fh(e){var n=Zg(e);e=n.polyline;var r=n.thirdDim;if(n=2===r||3===r,r=0===r,!e)throw new D(fh,0,"data");if(n||r){r=e.length;for(var d=Array(3*r),m=0,g=0;m<r;m++){var v=e[m];d[g++]=v[0],d[g++]=v[1],d[g++]=n?v[2]:0}}if(!d)throw new D(fh,0,"only ABSENT, ALTITUDE or ELEVATION are supported as type of the 3rd dimension");return new L(d)}function gh(e){xc(this,gh),gh.j.constructor.call(this),this.la=hh(this,e,this.constructor,0)}function hh(e,n,r,d){var m,g=[];if(!Bc(n))throw new D(r,d);for(m=0;m<n.length;m++){if(!e.b(n[m]))throw new D(r,d);g.push(e.c(n[m]))}return g}function ih(e){ih.j.constructor.call(this,e)}function jh(){}t("H.util.flexiblePolyline.encode",Yg),t("H.util.flexiblePolyline.decode",Zg),u(L,jg),t("H.geo.LineString",L),L.prototype.gi=function(e,n,r){bh(this,e,n,r,this.gi)},L.prototype.pushLatLngAlt=L.prototype.gi,L.prototype.ff=function(e,n,r){r&&$g(r,this.ff,2),void 0===n&&(n=this.$.length),n&&(this.a-=ah(this,e-3,e+n+3));var d=r?this.$.splice.apply(this.$,[e,n].concat(r)):this.$.splice(e,n);return r&&(this.a+=ah(this,e-3,e+r.length+3)),n&&!r&&(this.a+=ah(this,e-3,e-3)),delete this.b,delete this.c,d},L.prototype.spliceLatLngAlts=L.prototype.ff,L.prototype.Qj=function(e,n,r,d){this.ff(e,0,[n,r,d])},L.prototype.insertLatLngAlt=L.prototype.Qj,L.prototype.Dk=function(e){this.ff(e,3)},L.prototype.removeLatLngAlt=L.prototype.Dk,L.prototype.qd=function(e){bh(this,e.lat,e.lng,e.alt,this.qd)},L.prototype.pushPoint=L.prototype.qd,L.prototype.yc=function(e,n){this.Qj(3*e,n.lat,n.lng,n.alt)},L.prototype.insertPoint=L.prototype.yc,L.prototype.Xe=function(e){this.Dk(3*e)},L.prototype.removePoint=L.prototype.Xe,L.prototype.ye=function(e,n){var r=this.$,d=3*e;e=r[d];var m=r[d+1];return r=r[d+2],n&&(n.lat=e,n.lng=m,n.alt=r),n||new kg(e,m,r)},L.prototype.extractPoint=L.prototype.ye,L.prototype.El=function(e,n,r){var d=this.$;n=n||0,r=af(r,d.length/3);for(var m=3*n;n<r;)e(d[m++],d[m++],d[m++],n++)},L.prototype.eachLatLngAlt=L.prototype.El,L.isDBC=ig,L.prototype.eh=function(e){var n=this.a;return e&&(n+=ig((e=this.$)[e.length-2],e[1])),n},L.prototype.getDBCs=L.prototype.eh,L.prototype.Ie=function(){return this.$.length/3},L.prototype.getPointCount=L.prototype.Ie,L.prototype.um=function(){return this.$},L.prototype.getLatLngAltArray=L.prototype.um,L.prototype.b=z,L.prototype.K=function(){var e;if(!(e=this.b)){var d,m,n=(e=this.$).length,r=3,g=z;if(3<=n){var v=d=e[0],w=m=e[1];for(g=new K(v,w,d,m);r<n;r+=3){if(v=e[r-3],d=e[r],(w=e[r-2])>(m=e[r+1])&&180<m-w||w<m&&-180>w-m||m<w&&180>Dd(m-w)){var k=w;w=m,m=k}v<d&&(k=v,v=d,d=k),rg(g.c,g.a,g.f,g.b,v,w,d,m,g)}}e=this.b=g}return e},L.prototype.getBoundingBox=L.prototype.K,L.prototype.nn=function(){return this.b!==z},L.prototype.hasBoundingBox=L.prototype.nn,L.fromLatLngArray=ch,L.prototype.ia=function(e){var r,n=this===e;if(!n&&(n=C(e,L))){var d=this.$;for(n=(r=d.length)===(e=e.$).length;n&&r--;)n=d[r]==e[r]}return n},L.prototype.equals=L.prototype.ia,p=L.prototype,p.rb="LineString",p.cd=function(e,n){var m,r=this.$,d=r.length;if(d){for(e.push("("),m=0;m<d;m+=3)m&&e.push(","),e.push(r[m+1]," ",r[m]);n&&(r[0]!==r[d-3]||r[1]!==r[d-2])&&e.push(",",r[1]," ",r[0]),e.push(")")}else e.push("EMPTY");return e},p.Hb="LineString",p.bd=function(){var d,e=[],n=this.$,r=n.length;for(d=0;d<r;d+=3)e.push([n[d+1],n[d],n[d+2]]);return e},p.pc=function(){var n,e=this.$;if(this.K().Bb()){var r=1;for(n=(e=e.slice()).length;r<n;r+=3)0>e[r]&&(e[r]+=360)}return e},p.Ko=function(e){e=void 0===e?5:e;for(var n=this.$,r=n.length,d=[],m=0;m<r;m+=3)d.push([n[m],n[m+1],n[m+2]]);return Yg({polyline:d,precision:e,thirdDim:2,thirdDimPrecision:e})},L.prototype.toFlexiblePolyline=L.prototype.Ko,L.fromFlexiblePolyline=fh,u(gh,jg),t("H.geo.MultiGeometry",gh),gh.prototype.splice=function(e,n,r){return e=[e],n!==B&&e.push(n),r&&(n=hh(this,r,this.splice,2),e=e.concat(n)),this.a=z,this.la.splice.apply(this.la,e)},gh.prototype.splice=gh.prototype.splice,gh.prototype.hc=function(e){var n=this.la.length;if(!(0<=e&&e<n))throw new ne(this.hc,e,[0,n-1]);return this.a=z,this.la.splice(e,1)[0]},gh.prototype.removeAt=gh.prototype.hc,gh.prototype.remove=function(e){if(0<=(e=this.la.indexOf(e))){var n=this.la.splice(e,1)[0];this.a=z}return n||z},gh.prototype.remove=gh.prototype.remove,gh.prototype.mm=function(){return this.la},gh.prototype.getGeometries=gh.prototype.mm,gh.prototype.push=function(e){var n=hh(this,[e],this.push,0)[0];this.a&&(this.a=this.a.ec(e.K())),this.la.push(n)},gh.prototype.push=gh.prototype.push,gh.prototype.K=function(){var e,n,r;if(!(e=this.a)&&(e=z,this.la.length))for(e=this.la[0].K(),r=1;r<this.la.length;r++)(n=this.la[r].K())&&(e=e?e.ec(n):n);return this.a=e},gh.prototype.getBoundingBox=gh.prototype.K,gh.prototype.a=z,gh.prototype.c=function(e){return e},gh.prototype.ia=function(e){var r,n=this===e;if(!n&&(n=C(e,this.constructor))){var d=this.la;for(n=(r=d.length)===(e=e.la).length;n&&r--;)n=d[r].ia(e[r])}return n},gh.prototype.equals=gh.prototype.ia,gh.prototype.cd=function(e){var d,m,n=this.la,r=n.length,g=!1;if(r){for(e.push("("),d=0;d<r;d++)(m=0<d&&g)&&e.push(","),n[d].cd(e),"EMPTY"===e[e.length-1]?e.splice(-1-+m,+m+1):g=!0;g?e.push(")"):e.splice(-1,1,"EMPTY")}else e.push("EMPTY");return e},gh.prototype.pc=function(){for(var e=[],n=this.la,r=n.length;r--;)e[r]=n[r].pc();return e},gh.prototype.Y=function(){var e=gh.j.Y.call(this);return e.type=this.rb,e},gh.prototype.bd=function(){for(var e=[],n=this.la,r=n.length;r--;)e[r]=n[r].bd();return e},u(ih,gh),t("H.geo.MultiLineString",ih),ih.prototype.b=function(e){return C(e,L)},ih.prototype.rb="Multi"+L.prototype.rb,ih.prototype.Hb="Multi"+L.prototype.Hb,t("H.map.provider.Invalidations",jh),jh.MARK_INITIAL=Xd,jh.prototype.update=function(e,n){n!==kh.NONE&&(this.a=e,n&kh.SPATIAL&&(this.f=e),n&kh.VISUAL&&(this.g=e),n&kh.ADD&&(this.b=e),n&kh.REMOVE&&(this.c=e),n&kh.Z_ORDER&&(this.l=e),n&kh.VOLATILITY&&(this.i=e))},jh.prototype.update=jh.prototype.update,jh.prototype.Bm=function(){return this.a},jh.prototype.getMark=jh.prototype.Bm,jh.prototype.a=Xd,jh.prototype.rn=function(e){return this.a>e},jh.prototype.isAny=jh.prototype.rn,jh.prototype.g=Xd,jh.prototype.Vd=function(e){return this.g>e},jh.prototype.isVisual=jh.prototype.Vd,jh.prototype.f=Xd,jh.prototype.yh=function(e){return this.f>e},jh.prototype.isSpatial=jh.prototype.yh,jh.prototype.b=Xd,jh.prototype.Rj=function(e){return this.b>e},jh.prototype.isAdd=jh.prototype.Rj,jh.prototype.c=Xd,jh.prototype.Sf=function(e){return this.c>e},jh.prototype.isRemove=jh.prototype.Sf,jh.prototype.l=Xd,jh.prototype.zh=function(e){return this.l>e},jh.prototype.isZOrder=jh.prototype.zh,jh.prototype.i=Xd,jh.prototype.vn=function(e){return this.i>e},jh.prototype.isVolatility=jh.prototype.vn;var kh={NONE:0,VISUAL:1,SPATIAL:2,ADD:4,REMOVE:8,Z_ORDER:16,VOLATILITY:32};function lh(e){lh.j.constructor.call(this),void 0!==e&&(this.data=e)}function M(e){if(xc(this,M),M.j.constructor.call(this,e?e.data:B),this.ea=mh.next(),e){var n="min";Fc(e[n])&&(this.m=e[n]),Fc(e[n="max"])&&(this.s=e[n]),(n="visibility")in e&&(this.u=!!e[n]),(n="volatility")in e&&(this.P=!!e[n]),(n="zIndex")in e&&(this.l=+e[n]||0),(n="provider")in e&&!C(e[n],N)&&(this.ma=e[n],this.ra(kh.ADD))}}jh.Flag=kh,u(lh,F),t("H.map.Feature",lh),lh.prototype.getData=function(){return this.data},lh.prototype.getData=lh.prototype.getData,lh.prototype.o=function(){lh.j.o.call(this),delete this.data},u(M,lh),t("H.map.Object",M);var mh=new cf(1),nh={ANY:31,OVERLAY:1,SPATIAL:2,MARKER:4,DOM_MARKER:8,GROUP:16};function oh(e,n,r){var d,m;if(!r||e[0]|n[0]){var g=e.length,v=n.length,w=yd(g,v),k=1;for(m=+r+1;k<w;k+=m)if(d=e[k]-n[k])return d}return r?0:g-v}function ph(e,n){return e.cj(n)}function qh(e,n,r){if(null===n||n===B)return null;if(0<=Object.keys(n).length&&"[object Object]"!==Object.prototype.toString.call(n))throw Error(vh(e,r));try{return JSON.stringify(n),n}catch{throw Error(vh(e,r))}}function vh(e,n){return"Object Remote-Id: "+e.i+" - "+(n?"The value returned by the callback is not a valid JSON object and cannot be set as Feature properties.":"The given object data is not a valid JSON object and cannot be set as Feature properties.")}function wh(e){var n;if(e){var r=xh;for(n=C(e,wh);r--;){var d=yh[r];if(e.hasOwnProperty(d)){var m=e[d];if(n)this[d]=m;else{if((m=zh[r](m))===Ah)throw new D(wh,0,d+": "+e[d]);m!==this[d]&&m!==B&&(this[d]=m)}}}(r=n?e.b:this.lineWidth&&Ze(this.strokeColor))||(this.b=r),(r=n?e.Ob:Ze(this.fillColor))||(this.Ob=r),(r=n?e.a:"none"!==this.strokeColor&&this.lineWidth)||(this.a=r)}qc(this)}M.Type=nh,M.prototype.cb=function(){return this.ea},M.prototype.getId=M.prototype.cb,M.prototype.Ai=function(e){if(!Fc(e)&&!Cc(e))throw new D(this.Ai,0,"id must be a number or a string");return this.i=e,this},M.prototype.setRemoteId=M.prototype.Ai,M.prototype.Rm=function(){return this.i},M.prototype.getRemoteId=M.prototype.Rm,M.prototype.m=-1/0,M.prototype.s=1/0,M.prototype.zj=function(e){var n=this.s;if(e)for(e=this;e=e.Fa;)n=yd(n,e.s);return n},M.prototype.getMax=M.prototype.zj,M.prototype.Bj=function(e){var n=this.m;if(e)for(e=this;e=e.Fa;)n=zd(n,e.m);return n},M.prototype.getMin=M.prototype.Bj,M.prototype.u=!0,M.prototype.qb=function(e){return(e=!!e)!==this.u&&(this.u=e,this.invalidate(kh.VISUAL)),this},M.prototype.setVisibility=M.prototype.qb,M.prototype.wc=function(e){for(var r,n=this;(r=n.u)&&e&&(n=n.Fa););return r},M.prototype.getVisibility=M.prototype.wc,M.prototype.P=!1,M.prototype.Lf=function(e){for(var r,n=this;!(r=n.P)&&e&&(n=n.Fa););return r},M.prototype.getVolatility=M.prototype.Lf,M.prototype.Vk=function(e){var n=this.P;return n!==!!e&&(this.P=!n,this.invalidate(kh.VOLATILITY)),this},M.prototype.setVolatility=M.prototype.Vk,M.prototype.l=B,M.prototype.Ij=function(){return this.l},M.prototype.getZIndex=M.prototype.Ij,M.prototype.fe=function(e){return e!==this.l&&(this.Ye(),this.l=e,this.invalidate(kh.Z_ORDER)),this},M.prototype.setZIndex=M.prototype.fe,M.prototype.L=B,M.prototype.Uc=function(){var n,r,e=this.L;if(!e){var d=+((n=this.l)!==B);(e=this.Fa)?(e=e.Uc().slice())[0]|=d:e=[d],e.push(n||0,0>(r=this.Di)?this.ea:r),this.L=e}return e},M.prototype.getZInfo=M.prototype.Uc,M.prototype.Ye=function(){this.L=B},M.compareZInfo=oh,M.compareZOrder=ph,M.prototype.cj=function(e){return this.T-e.T||oh(this.Uc(),e.Uc(),!1)},M.prototype.compareZOrder=M.prototype.cj,p=M.prototype,p.previousSibling=z,p.nextSibling=z,p.Di=-1,p.Fa=z,p.Fm=function(){return this.Fa},M.prototype.getParentGroup=M.prototype.Fm,M.prototype.bc=function(){for(var n,e=this;n=e.Fa;)e=n;return e},M.prototype.getRootGroup=M.prototype.bc,M.prototype.contains=function(e){return this===e},M.prototype.contains=M.prototype.contains,M.prototype.ka=function(e){if(this.Fa)throw new $c(this.ka,"Not allowed for a child of a group");M.j.ka.call(this,e)},M.prototype.setParentEventTarget=M.prototype.ka,M.prototype.draggable=!1,M.prototype.ma=z,M.prototype.ca=function(){return this.ma},M.prototype.getProvider=M.prototype.ca,M.prototype.ee=function(e,n){var d,r=this.ma;if(d=r!==e){if(n&&(r&&!C(r,N)||e&&!C(e,N)))throw new $c(n,"Only LocalObjectProvider allows an object transfers");n=this.type!==nh.GROUP,r&&(this.invalidate(kh.REMOVE),n&&r.Ga(this)),(this.ma=e)&&(n&&e.fa(this),this.ta=z,this.invalidate(kh.ADD))}return d},M.prototype.ta=z,M.prototype.Kb=function(){return this.ta||(this.ta=new jh)},M.prototype.getInvalidations=M.prototype.Kb,M.prototype.ra=function(e){var r,n=this.ca();return(r=!!n)&&n.invalidateObject(this,e),r},M.prototype.invalidate=M.prototype.ra,M.prototype.o=function(){this.Fa&&this.Fa.Ga(this),M.j.o.call(this)},M.prototype.setData=function(e){return this.data=e,this},M.prototype.setData=M.prototype.setData,M.prototype.Kc=function(e){var n;if(e&&!Da(e))throw new D(M.prototype.Kc,0,"opt_callback must be a function");return e=qh(this,e?e(this.data):this.data,!!e),n=this instanceof rh||this instanceof sh||this instanceof th||this instanceof uh?{type:"Feature",properties:e,geometry:this.ga().Kc()}:{type:"FeatureCollection",features:hf},this.i&&(n.id=this.i),n},M.prototype.toGeoJSON=M.prototype.Kc,M.prototype.Y=function(){return{id:this.ea,properties:{min:this.Bj(),max:this.zj(),zIdx:this.l,sIdx:this.Di,parent:this.Fa?this.Fa.cb():0,visible:this.wc(),volatile:this.Lf()},type:"Feature"}},M.prototype.forWorkerMessage=M.prototype.Y,t("H.map.SpatialStyle",wh),wh.prototype.Ob=!0,wh.prototype.b=!0,wh.prototype.a=!0;var yh="strokeColor fillColor lineWidth lineCap lineJoin miterLimit lineDash lineDashOffset lineDashImage lineHeadCap lineTailCap".split(" ");wh.prototype.strokeColor="rgba(0,85,170,.6)",wh.prototype.strokeColor=wh.prototype.strokeColor,wh.prototype.fillColor="rgba(0,85,170,.4)",wh.prototype.fillColor=wh.prototype.fillColor,wh.prototype.lineWidth=2,wh.prototype.lineWidth=wh.prototype.lineWidth,wh.prototype.lineCap="round",wh.prototype.lineCap=wh.prototype.lineCap,wh.prototype.lineJoin="miter",wh.prototype.lineJoin=wh.prototype.lineJoin,wh.prototype.miterLimit=1,wh.prototype.miterLimit=wh.prototype.miterLimit,wh.prototype.Bn=hf,wh.prototype.lineDash=wh.prototype.Bn,wh.prototype.lineDashOffset=0,wh.prototype.lineDashOffset=wh.prototype.lineDashOffset,wh.prototype.Cn=B,wh.prototype.lineDashImage=wh.prototype.Cn,wh.prototype.Dn=B,wh.prototype.lineHeadCap=wh.prototype.Dn,wh.prototype.En=B,wh.prototype.lineTailCap=wh.prototype.En;var xh=yh.length;wh.prototype.ia=function(e){var n=this===e;if(!n&&e){for(n=0;n<xh;n++){var r=yh[n];if(this[r]!==e[r])break}n=n===xh}return n},wh.prototype.equals=wh.prototype.ia,wh.prototype.vj=function(e){if(e){var n={};Ya(n,this,e)}else n=this;return new wh(n)},wh.prototype.getCopy=wh.prototype.vj;var Ah=qc({}),zh=[function(e){return e?pc(e):Ah},function(e){return e?pc(e):Ah},function(e){return 0<=e&&100>=e?+e:Ah},function(e){return"butt"===(e=pc(e))||"square"===e||"round"===e||"arrow-head"===e||"arrow-tail"===e?e:Ah},function(e){return"round"===e||"bevel"===e||"miter"===e?e:Ah},function(e){return 0<e&&100>=e?+e:Ah},function(e){return e&&e.every&&e.every(Gc)?e:Ah},function(e){return E(+e)?Ah:+e},function(e){return e===B||e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||Object.values(Bh).includes(e)?e:Ah},function(e){return vc(e)?zh[3](e):B},function(e){return vc(e)?zh[3](e):B}],Ch=(new Image).src="data:image/svg+xml;base64,"+btoa('<svg width="128" height="128" viewBox="0 0 128 128" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><g id="arrow"><path style="fill:#ff0000" d="M 0,0 32,64 2,128 128,64 Z"/></g></svg> '),Dh=(new Image).src="data:image/svg+xml;base64,"+btoa('<svg width="128" height="128" viewBox="0 0 128 128" xmlns="http://www.w3.org/2000/svg"><circle style="fill:#ffffff" cx="64" cy="64" r="64" /></svg>'),Bh={ARROW:Ch,CIRCLE:Dh};wh.DashImage=Bh,wh.MAX_LINE_WIDTH=100;var Eh=new wh;wh.DEFAULT_STYLE=Eh;var Fh="fillColor strokeColor lineWidth lineCap lineJoin miterLimit lineDashOffset lineDash lineTailCap lineHeadCap".split(" ");function Gh(e){var n;if(e){var r=C(e,Gh);for(n in e)if(n in this){var d=e[n];d!==this[n]&&("fillColor"===n||0<(d=+d))&&(this[n]=d)}(e=r?e.Ob:!!(Ze(this.fillColor)&&this.width&&this.width))||(this.Ob=e)}qc(this)}function Hh(e,n){var r;Hh.j.constructor.call(this,n),n&&this.gb(n.style),e&&(this.g=!0),n&&(r=n.arrows)&&this.Mk(r)}function Ih(e,n){var m,r=!1,d=!1;if(n.length){for(r=0;r<n.length;r++)if(n[r]!==Jh){d=!0;break}n=e.style,r=d?n.b||n.Ob&&e.g||(m=e.c||!1)&&n.a&&m.Ob:n.Ob}return r&&e.wc(!0)}function Kh(e,n){Kh.j.constructor.call(this,e,n)}function Lh(e,n,r,d){var v,m=[],g=n.length;for(v=0;v<g;v++){var w=n[v];w.length&&m.push(Mh(e,w,r,d))}return m}function Mh(e,n,r,d){var m,g=[],v=n.length,w=0;for(e.xa=0,m=m||0;w<v;)g.push(Nh(e,n[w++],n[w++],m,d));return r&&g.push(Nh(e,n[0],n[1],m,d)),g}function Nh(e,n,r,d,m){var g=e.xa;return g&&180<Dd(g-r)&&(r+=0>g?-360:360),e.xa=r,m.Ah(n,r+d)}function Oh(e,n,r){for(var m,v,w,d=n,g=e.length+n;d--;){for(v=(n=e[d]).length,m=Array(v);v--;)m[v]=new J((w=n[v]).x+r,w.y);e[--g]=m}}function Ph(e,n,r){this.paths=this.a=e,n!==B&&(this.interiorsIndex=this.b=n),r!==B&&(this.outlinesIndex=this.c=r)}wh.prototype.Y=function(){for(var r,e={},n=Fh.length;n--;)e[r=Fh[n]]=this[r];return e},wh.prototype.forWorkerMessage=wh.prototype.Y,t("H.map.ArrowStyle",Gh),Gh.prototype.Ob=!0,Gh.prototype.fillColor="rgba(255,255,255,.75)",Gh.prototype.width=1.2,Gh.prototype.length=1.6,Gh.prototype.frequency=5,Gh.prototype.uj=function(){return new Gh(this)},Gh.prototype.ia=function(e){var n=this===e;return!n&&e&&(n=e.width===this.width&&e.fillColor===this.fillColor&&e.length===this.length&&e.frequency===this.frequency),n},Gh.prototype.equals=Gh.prototype.ia,u(Hh,M),t("H.map.Spatial",Hh),Hh.prototype.type=nh.SPATIAL,Hh.prototype.T=0,Hh.prototype.style=Eh,Hh.prototype.V=function(){return this.style},Hh.prototype.getStyle=Hh.prototype.V,Hh.prototype.gb=function(e){var n=!0;return e?this.style=C(e,wh)?e:new wh(e):this.style?delete this.style:n=!1,n&&this.invalidate(kh.VISUAL),this},Hh.prototype.setStyle=Hh.prototype.gb,Hh.prototype.Ml=function(){return this.c},Hh.prototype.getArrows=Hh.prototype.Ml,Hh.prototype.Mk=function(e){var n=this.c,r=!1;return!e&&n?(delete this.c,r=!0):!e||n&&n.ia(e)||(this.c=new Gh(e),r=!0),r&&"none"!==this.style.strokeColor&&this.ra(1),this},Hh.prototype.setArrows=Hh.prototype.Mk,Hh.prototype.g=!1,Hh.prototype.sn=function(){return this.g},Hh.prototype.isClosed=Hh.prototype.sn,Hh.prototype.getGeometriesForTile=Hh.prototype.Kd,Hh.prototype.gh=function(){return B},Hh.prototype.getLabels=Hh.prototype.gh,u(Kh,Hh),t("H.map.GeoShape",Kh),Kh.prototype.getBoundingBox=Kh.prototype.K,Ph.prototype.b=Wd,Ph.prototype.interiorsIndex=Ph.prototype.b,Ph.prototype.c=Wd,Ph.prototype.outlinesIndex=Ph.prototype.c;var Jh=rc(new Ph([])),Qh=qc([]),Th;function th(e,n){th.j.constructor.call(this,!1,n),this.da(e)}function Rh(e,n){if(!C(e,L)||2>e.Ie())throw new D(n,0)}function Sh(e,n,r,d){var m=eh(n,r.Hf());if(m.length&&(m=(e=Lh(e,m,!1,n=r.Jf())).length)){var g=r.Le();n=n.w,r.x||Oh(e,m,-n),r.x===(1<<r.z)-1&&Oh(e,m,n),(r=Uf(e,g.left,g.top,g.right,g.bottom,!1)).length&&d.push(new Ph(r))}}function Uh(e,n){if(x.URL)return new x.URL(e,n).toString();if(!e||!Vh(e))return e;if(!n||Vh(n))throw new TypeError("Failed to construct 'URL': Invalid base URL");Th||Ic(Th=document.createElement("a"));var r=Th;return r.href=n,"/"!==e[0]?e=r.href.replace(/\/[^\/]*$/,"/")+e:((n=r.origin)||(n=r.protocol+"//"+r.host),e=n+e),e}function Vh(e){var n=!1;return"string"==typeof e&&(n=!(-1<e.search(/^(http|https|data|blob):/)||"//"===e.substr(0,2))),n}function Wh(e,n){if(Wh.j.constructor.call(this),n&&Vh(n))throw new D(Wh,1,"Base URL must be absolute");this.C=Xh.INIT,this.Ca=null,this.Yb=n}u(th,Kh),t("H.map.Polyline",th),th.prototype.K=function(){return this.a.K()},th.prototype.getBoundingBox=th.prototype.K,th.prototype.da=function(e){var r,d,n=this.da;if(C(e,ih)){var m=e.la;if(!(r=m.length))throw new D(n,0);for(d=0;d<r;d++)Rh(m[d],n)}else Rh(e,n);return this.b=!!m,this.a=e,this.ra(kh.SPATIAL),this},th.prototype.setGeometry=th.prototype.da,th.prototype.ga=function(){return this.a},th.prototype.getGeometry=th.prototype.ga,th.prototype.clip=function(e){var n=this.a;return eh(this.b?n.la[0]:n,e)},th.prototype.clip=th.prototype.clip,th.prototype.Kd=function(e){var r,n=this.a,d=[];if(this.b)for(r=(n=n.la).length;r--;)Sh(this,n[r],e,d);else Sh(this,n,e,d);return d.length?d:B},th.prototype.getGeometriesForTile=th.prototype.Kd,th.prototype.Y=function(){var e=th.j.Y.call(this),n=e.properties;return e.geometry=this.ga().Y(),n.style=this.V().Y(),n.height=0,e},th.prototype.forWorkerMessage=th.prototype.Y,u(Wh,F),t("H.map.render.Style",Wh),Wh.prototype.load=Wh.prototype.load,Wh.prototype.getState=function(){return this.C},Wh.prototype.getState=Wh.prototype.getState,Wh.prototype.O=function(e){this.C=e},Wh.prototype.setState=Wh.prototype.O,Wh.prototype.Ib=function(){return this.Yb},Wh.prototype.getBaseUrl=Wh.prototype.Ib,Wh.prototype.qc=function(){return sc(this.Ca)},Wh.prototype.getConfig=Wh.prototype.qc,Wh.prototype.Tl=function(){return this.Ca},Wh.prototype.getConfigReference=Wh.prototype.Tl,Wh.prototype.vd=function(e){this.Ca=e},Wh.prototype.setConfig=Wh.prototype.vd,Wh.prototype.Gb=function(e){this.Ca=null,this.O(Xh.ERROR),this.sh(Yh)?this.dispatchEvent(new wd(Yh,e,this)):console.error(e)},Wh.prototype.dispatchError=Wh.prototype.Gb,Wh.prototype.o=function(){Wh.j.o.call(this),this.Ca=null};var Yh="error",Zh={ed:"change",Ni:Yh},Xh={ERROR:-1,INIT:0,LOADING:1,READY:2};function $h(e,n){var r,m,g,d=arguments.length;for(r=1;r<d;r++)if((m=arguments[r])&&m!==e&&m!==v){var v=m;for(g in m){var w=m[g];e[g]!==w&&(ai(w)?e[g]=ai(e[g])?$h(e[g],w):sc(w):void 0!==w&&(e[g]=sc(w)))}}return e}Wh.State=Xh,t("H.util.webgl.mergeObjects",$h);var bi=oc();function ci(e,n,r){var d=r[e];return n&&d in n&&0>uc.indexOf(d)?(n=n[d],++e<r.length?ci(e,n,r):n):bi}var di=ci.bind(null,0),ei={polygons:1,lines:1,"pattern-lines":1,points:1,text:1,raster:1,custom_icons:1,overlays:1},fi={data:1,draw:1,enabled:1,filter:1,properties:1},gi=Object.keys(fi);function hi(e,n,r,d,m,g){var v=d[e],w=r[v];if(++e<d.length){var k=n[v]||{};for(r=gi.length;r--;){var j=gi[r];if("draw"!==j||!g){var G=w[j];G!==B&&(k[j]=sc(G))}}hi(e,k,w,d,m,g)}else m?k=sc(w):(k=w,delete r[v]);n[v]=n[v]?$h(n[v],k):k}var ii=hi.bind(null,0);function ji(e,n){e in ei&&(n[e]=1)}function ki(e,n,r){var d,m,g;for(d in e)if(fi[d]){if("draw"===d){var v=e[d];for(m in v){var w=v[m];(g=w.style)?(w.style=n+g,ji(g,r)):(delete v[m],v[n+m]=w,ji(m,r))}}}else ki(e[d],n,r)}function li(e,n){var d,m,g,v,r={};if(n+="_",d=(e=$h({},e)).styles)for(m in d){var w=d[m];if(delete d[m],d[n+m]=w,g=w.mix)for(Cc(g)&&(g=[g]),v=g.length;v--;)ji(g[v],r),g[v]=n+g[v];(v=w.base)&&(g||(g=w.mix=[]),g.unshift(n+v),delete w.base,ji(v,r)),ji(m,r)}else d=e.styles={};if(w=e.layers)for(m in w)g=w[m],delete w[m],(v=g.data)&&!v.layer&&(v.layer=m),w[n+m]=g,ki(g,n,r);for(m in r)d[n+m]={base:m};return e}function mi(e,n){var g,r=e.sources,d=Object.keys(r)[0],m=$h(r[d],{uid:n});for(g in r=e.layers,e.sources={},e.sources[n]=m,r)(e=r[g]).data?e.data.source===d&&(e.data.source=n):e.data={source:n}}function ni(e,n){var r,d=e.textures;for(r in e=e.fonts,d){var m=d[r];m.url&&(m.url=Uh(m.url,n))}for(r in e)if(Bc(m=e[r]))for(d=0;d<m.length;d++){var g=m[d];g.url=g.url&&Uh(g.url,n)}else(g=m).url=g.url&&Uh(g.url,n)}function oi(e,n){return"function(){return feature."+e+(n||"")+";}"}function pi(e){return oi("style."+e,void 0)}function qi(e,n,r,d){return e={base:e,blend:n,blend_order:r},d&&(e.clean_depth=!!d),e}function ri(e){var n={};return n["translucent-"+(e?"extruded-":"")+"polygons"]={color:pi("fillColor"),order:1,interactive:!0,extrude:e},n}function si(e,n,r,d){return e={data:{source:e,layer:n}},r&&(e.draw=r),d&&(e.filter=d),e}function ai(e){return Ea(e)&&!Bc(e)}function ti(e,n){if(ti.j.constructor.call(this,e,n),Cc(e))ui.test(e)&&-1===e.indexOf("import:")?(this.b=e,n||(this.g=Vh(this.b)?B:this.b)):this.c=e;else{if(!Ea(e))throw new D(ti,0,"invalid style configuration");this.vd(sc(e))}}function Ai(e){var r,n=e.Ca;if(Ea(n)){var d;if(d=e.f){for(var m in d=!1,n=n&&n.sources)if(n[m].type===e.f){d=!0;break}d=!(!n||d)}d&&(r="invalid source, the only valid type is "+e.f)}else r="invalid style configuration";return r&&e.Gb(r),!r}function yi(e){e.dispatchEvent(new ud("change",e))}function wi(e){if(e.getState()!==Xh.READY)throw new $c(e.Oe,"style is not ready yet")}function xi(e,n,r,d){var v,w,m=[],g=Bc(n)?n:[n];for(void 0===d&&(d=!0),g=g.sort().reverse();v=g.pop();){n=String(v).split(".");for(var k=e.Ca,j=n.length;j--&&!fi[n[j]];);if(k&&0>j&&ai(k=di(k.layers,n))||(k=bi),k===bi)throw new D(r,0,'Unresolvable layer ID "'+v+'"');if(m.push({id:n,eb:k}),d)for(w in k)!fi[w]&&ai(k[w])&&g.push(v+"."+w)}return m}function zi(e,n){var d,r=0;for(d=n.length;r!==d;){var m=n[r++],g=e;if(!(e=g[m]))break}return r===d?{node:e,parent:g,fg:m}:void 0}u(ti,Wh),t("H.map.render.webgl.Style",ti),ti.prototype.load=function(){var e=this,n=this.Ib();this.b?(this.O(Xh.LOADING),new tf("text/plain",this.b).then(function(r){var d={};return vi(r,n,!1,(d[n]=!0,d))}).then(function(r){return e.vd(r)},function(r){return e.Gb(r.message)}),delete this.b):this.c&&(this.O(Xh.LOADING),vi(this.c,n).then(function(r){return e.vd(r)},function(r){return e.Gb(r.message)}),delete this.c)},ti.prototype.load=ti.prototype.load,ti.prototype.Rk=function(e,n,r){var d;for(wi(this),e=xi(this,e,this.Rk,r),r=0;r<e.length;r++){var m=e[r].eb.draw;for(d in m){var g=m[d];ai(g)&&(g.interactive=!!n)}}yi(this)},ti.prototype.setInteractive=ti.prototype.Rk,ti.prototype.setProperty=function(e,n,r){var d,m=e.split("."),g=0,v=m.length;if(wi(this),!vc(n))throw new D(this.setProperty,1,"value");if(d=zi(this.Ca,m)){if(!(d.parent instanceof Object)||d.parent instanceof Array){if(!r)throw new D(this.setProperty,0,e+" property is not primitive type");m.pop(),m=zi(this.Ca,m),d.parent=m.parent[m.fg]={}}d.parent[d.fg]=n}else{for(d=this.Ca;g!==v-1;)d[m[g]]={},d=d[m[g++]];d[m[g]]=n}Ai(this)&&yi(this)},ti.prototype.setProperty=ti.prototype.setProperty,ti.prototype.kh=function(e){return wi(this),(e=zi(this.Ca,e.split(".")))?sc(e.node):void 0},ti.prototype.getProperty=ti.prototype.kh,ti.prototype.removeProperty=function(e){wi(this),(e=zi(this.Ca,e.split(".")))&&e.parent&&e.parent.hasOwnProperty(e.fg)&&(delete e.parent[e.fg],Ai(this)&&yi(this))},ti.prototype.removeProperty=ti.prototype.removeProperty,ti.prototype.xe=function(e,n,r){var d;wi(this);var m=this.Ca,g=m.layers,v=xi(this,e,this.xe,!1);for(e=v.length,d={};e--;)ii(d,g,v[e].id,!!n,!!r);for(r={},e=(v=Object.keys(m)).length;e--;){var w=v[e],k=m[w];r[w]=k===g?d:sc(k)}return n||yi(this),r},ti.prototype.extractConfig=ti.prototype.xe,ti.prototype.Oe=function(e){if(wi(this),!Ea(e))throw new D(this.Oe,0,"config");this.vd($h(this.Ca,e))},ti.prototype.mergeConfig=ti.prototype.Oe,ti.prototype.a=ba(2),ti.prototype.toString=function(){return this.getState()===Xh.READY?x.H.gl.yaml.safeDump(this.Ca,{lineWidth:120}):""},ti.prototype.o=function(){ti.j.o.call(this),delete this.c,delete this.b};var ui=/^(http[s]?)?.*\.ya?ml/i;function vi(e,n,r,d){r=void 0!==r&&r,d=void 0===d?{}:d;try{var m=x.H.gl.yaml.safeLoad(e,{json:!0})}catch(g){return Promise.reject(g)}return m&&(Cc(e=m.import)&&(e=[e]),r&&n&&Bi(m,n),delete m.import,Bc(e)&&e.length)?(r=e.reduce(function(g,v){var w=n?Uh(v,n):v;return d[w]||(d[w]=!0,g.push(new tf("text/plain",w).then(function(k){return vi(k,w,!0,d)}))),g},[]),Promise.all(r).then(function(g){var v={};return g.forEach(function(w){return w&&$h(v,w)}),$h(v,m),v})):Promise.resolve(m)}function Bi(e,n){function r(v){v.url&&(v.url=Uh(v.url,n))}var d=e&&e.fonts;if(d)for(var m in d)Bc(d[m])?d[m].forEach(r):r(d[m]);if(e=e&&e.textures)for(var g in e)r(e[g])}function O(e,n){var r;if(O.j.constructor.call(this),C(e,L,O,0),n!==B&&Bc(n,O,1)){for(r=0;r<n.length;r++)C(n[r],L,O,1,"index "+r);this.a=n}else this.a=[];this.b=e,this.c=[]}function Ci(e){var n=O,r=L,d=e.c,m=e.a,g=e.f,v=e.b;return m=[d,m,B,d,v,B,g,v,B,g,m,B],180<=e.Ab()&&(m.splice(9,0,g,e=e.bb().lng,B),m.splice(3,0,d,e,B)),new n(new r(m))}ti.normalize=Bi,ti.prototype.vd=function(e){ti.j.vd.call(this,e),Ai(this)&&(this.O(Xh.READY),yi(this))},ti.prototype.qc=function(){return ti.j.qc.call(this)},ti.prototype.getConfig=ti.prototype.qc,ti.prototype.Ib=function(){return this.g||ti.j.Ib.call(this)},ti.prototype.getBaseUrl=ti.prototype.Ib,t("H.map.Style",ti),ti.State=Xh,u(O,jg),t("H.geo.Polygon",O),O.fromRect=Ci;var Di={NORTH:90,SOUTH:-90};function Ei(e,n){var r,d,m;return(m=e.K())&&((r=e.eh(!0))&&(d=e.Ie())&&(m=m.ec(tg([e.ye(0),e.ye(d-1)],!0),!0)),360===m.Ab()&&r%2==1&&(m=m.Xc(n,0))),m}function Fi(e,n,r,d){d=void 0===d||d;var m=e.a,g=Gi.bind(null,n,r);return!(ee(n,r,e.b.$,0,!0,3)===de.NONE||d&&m.some(g))}function Gi(e,n,r){return ee(e,n,r.$,0,!0,3)===de.SURFACE}function Hi(e,n){var r,d,m=(n=n.$).length-3,g=(e=e.b.$).length-3,v={};for(r=0;r<m;r+=3){var w=n[r],k=n[r+1],j=n[r+3],G=n[r+4];for(d=0;d<g;d+=3){var q=e[d],_t=e[d+1],_r=e[d+3],_s=e[d+4];if(ag(new Yf(k,w),new Yf(G,j),new Yf(_t,q),new Yf(_s,_r),v,!0))return!0}}return!1}function Ii(e,n){var r=n.b,d=n.a,m=d.length,g=r.$,v=g.length,w=e.b.$,k=w.length;if(Hi(e,r))return!0;for(r=0;r<v;r+=3)if(Fi(e,g[r],g[r+1]))return!0;for(r=0;r<k;r+=3)if(Fi(n,w[r],w[r+1]))return!0;for(r=0;r<m;r++)if(Hi(e,d[r]))return!0;return!1}function Ji(e){Ji.j.constructor.call(this,e)}function uh(e,n){var r=n&&(+n.extrusion||+n.extrude)||0,d=n&&+n.elevation||0,m=0;if(uh.j.constructor.call(this,!0,n),0<d&&(m+=d,this.b=d),0<r&&(m+=r,this.f=r),2047<m)throw new ne(uh,m,[0,2047]);C(e,L)?this.da(new O(e)):this.da(e)}O.Direction=Di,O.prototype.pd=Di.NORTH,O.prototype.Sk=function(e){return this.pd!==e&&(this.f=z,this.c.length=0,this.pd=e),this},O.prototype.setPoleCovering=O.prototype.Sk,O.prototype.Km=function(){return this.pd},O.prototype.getPoleCovering=O.prototype.Km,O.prototype.fm=function(){return this.b},O.prototype.getExterior=O.prototype.fm,O.prototype.Pk=function(e){if(!C(e,L))throw new D(this.Pk,0,e);this.b=e,this.f=z},O.prototype.setExterior=O.prototype.Pk,O.prototype.rm=function(){return this.a},O.prototype.getInteriors=O.prototype.rm,O.prototype.xg=function(e,n,r){var m,d=arguments.length;for(m=2;m<d;m++)C(arguments[m],L,this.xg,m);var g=this.a.splice.apply(this.a,arguments);for(m=2;m<d;m++)arguments[m]=B;return this.c.splice.apply(this.c,arguments),g},O.prototype.spliceInteriors=O.prototype.xg,O.prototype.no=function(e){return this.xg(e,1)[0]},O.prototype.removeInteriorAt=O.prototype.no,O.prototype.mo=function(e){return 0>(e=this.a.indexOf(e))?B:this.xg(e,1)[0]},O.prototype.removeInterior=O.prototype.mo,O.prototype.Bk=function(e){if(!C(e,L))throw new D(this.Bk,0,e);this.a.push(e)},O.prototype.pushInterior=O.prototype.Bk,O.prototype.K=function(){var e=this.f;return e||(this.f=e=Ei(this.b,this.pd)),e},O.prototype.getBoundingBox=O.prototype.K,p=O.prototype,p.tj=function(e){var n=this.a.length;if(0>e||e>=n)throw new ne(this.tj,e,[0,n-1]);return(n=this.c[e])||(this.c[e]=n=Ei(this.a[e],this.pd)),n},p.rb="Polygon",p.cd=function(e){var d,n=this.a,r=n.length;if(this.b.Ie()){for(e.push("("),this.b.cd(e,!0),d=0;d<r;d++)n[d].Ie()&&(e.push(","),n[d].cd(e,!0));e.push(")")}else e.push("EMPTY");return e},p.Hb="Polygon",p.bd=function(){var e,n=[],r=this.a,d=this.b.bd();for(d[0].toString()!==d[d.length-1].toString()&&d.push(d[0]),n.push(d),e=0;e<r.length;e++)(d=r[e].bd())[0].toString()!==d[d.length-1].toString()&&d.push(d[0]),n.push(d);return n},p.Y=function(){var e=O.j.Y.call(this);return this.K().Bb()&&(e.type="Multi"+e.type),e},p.pc=function(){var e=[],n=this.a,r=n.length;for(e.push(this.b.pc());r--;)e[r+1]=n[r].pc();return this.K().Bb()?[e]:e},p.ia=function(e){var n=!1;if(C(e,O)){var r=e.a,d=this.a.length;n=r.length;var m=0;for(n=this.b.ia(e.b)&&d===n;n&&m<d;)n=n&&this.a[m].ia(r[m]),m++}return n},O.prototype.equals=O.prototype.ia,u(Ji,gh),t("H.geo.MultiPolygon",Ji),Ji.prototype.b=function(e){return C(e,O)},Ji.prototype.rb="Multi"+O.prototype.rb,Ji.prototype.Hb="Multi"+O.prototype.Hb,u(uh,Kh),t("H.map.Polygon",uh);var Ki=new O(new L([0,0,0,0,0,0,0,0,0]));function Li(e,n,r,d){var m,g,v=0,w=!0;if(m=Mi(e,n.b,r,d,n.K())){var k=new Ph(m),j=n.a;if(g=j.length)for(k.b=k.a.length;v<g;v++)(m=Mi(e,j[v],r,d,n.tj(v)))&&(k.a=k.a.concat(m));for(g=k.a.length,v=0;v<g;v++)if(k.a[v]!==Qh){w=!1;break}w&&(k=v%2?Jh:B)}return k}function Mi(e,n,r,d,m){var _t,g=r.Le(),v=m,w=v.Ab(),k=[[]],j=n.$,G=[],q=j.length,_r=!1;for(_t=0;_t<q;_t+=3){var _s=j[_t],ga=j[_t+1];_r||180!=Dd(ga)||(G.push(_s),G.push(ga),G.push(_s),G.push(-ga),_r=!0),G.push(_s),G.push(ga)}if(j=G,360>w&&-180==v.a&&(v=new K(v.c,180,v.f,v.b)),360>w&&180==v.b&&(v=new K(v.c,v.a,v.f,-180)),v.Bb()){for(_s=(w=j).length,j=-1,G=0;G<_s-2;G+=2)if(ig(w[G+1],w[G+3])){j=G+2;break}-1===j&&ig(w[_s-1],w[1])&&(j=_s),-1!==j&&(G=w[j-1],_t=w[j%_s],_r=w[(j+1)%_s],180!==Dd(q=w[j-2])&&180!==Dd(_t)&&(ga=Dd(_t-q),_s=Dd(_r-G),_s+=180<_s?-360:0,_r=Dd(180-_r),_r+=180<_r?-360:0,_s&&_r&&(ga/=Dd(_s)/Dd(_r),w.splice(j,0,q=_t+(_t>q?-ga:ga),G=0<G?180:-180,q,-G)))),j=w}if(k[0]=Ni(j.concat(),v.a),360>v.Ab()&&v.gd(new kg(v.c,180))&&(j=Ni(j.concat(),v.b),k.push(j)),e=Lh(e,k,!0,v=r.Jf()),360===m.Ab()&&n.eh(!0)%2==1){for(n=e,e=r.Le(),n[0][1].x>n[0][n[0].length-1].x&&(n[0]=n[0].reverse()),j=[],w=n[0].length-1,k=0;k<w;k++)j[k]=new J((G=n[0][k]).x-2*v.w,G.y),j[k+w]=new J(G.x-v.w,G.y),j[k+2*w]=new J(G.x,G.y),j[k+3*w]=new J(G.x+v.w,G.y),j[k+4*w]=new J(G.x+2*v.w,G.y);n[0]=j,(k=v.Ah(d,0)).y=2*e[d===Di.NORTH?"top":"bottom"],d=k.clone(),k.x=n[0][n[0].length-1].x+1,d.x=n[0][0].x-1,n[0].push(k,d),e=n}if(Uf(e,d=g.left,n=g.top,k=g.right,g=g.bottom,!0).length){if(!r.Hf().Qg(m)){for(r=e,m=[new J(d,n),new J(k,n),new J(k,g),new J(d,g)],g=[],e=r.length;e--;)if(d=Wf(m,r[e]))for(n=Oi(d),g.push(n);d.Uh;)n=Oi(d=d.Uh),g.push(n);e=g}}else r=Pi(d,n,e[0]),e[1]&&(r=r!==Pi(d,n,e[1])),e=r?[Qh]:B;return e}function Pi(e,n,r){var d,m,g,v=d=r[0].x,w=m=r[0].y,k=1;for(g=r.length;k<g;k++){var j=r[k].x,G=r[k].y;j>d?d=j:j<v&&(v=j),G>m?m=G:G<w&&(w=G)}return v<=e&&e<=d&&w<=n&&n<=m&&fe({x:e,y:n},ge(r.concat(r[0])))}function Oi(e){var n=[],r=e;do{var d=Ad(100*(r.eo?r.eo:r.x))/100,m=Ad(100*(r.fo?r.fo:r.y))/100;if(!g||.01<Fd(Gd(g.x-d,2)+Gd(g.y-m,2))){var g=new J(d,m);n.push(g)}r=r.next}while(r&&r!==e);return n}function Ni(e,n){var r,d=Number.POSITIVE_INFINITY,m=-1,g=e.length;for(r=0;r<g;r+=2){var v=Dd(e[r+1]-n);(v+=180<v?360-v:v)<d&&(d=v,m=r)}return 0<r?(n=e.splice(m,e.length-m)).concat(e):e}function Qi(e,n,r){Qi.j.constructor.call(this,Ki,r),this.tg(e),this.zi(n),r&&"precision"in r&&this.yi(r.precision)}function Ri(e){e.a!==z&&Qi.j.da.call(e,Si(e))}function Si(e){var n=e.R,r=n.lat,d=e.wa,m=0,g=new L;if(90===Dd(r))for(r=n.zg(0,d,!0).lat;360>m;m+=120)g.gi(r,m-180,B);else for(e=360/(e=e.D);360>m;m+=e)g.qd(n.zg(m,d,!0));return n=new O(g),0>r&&n.Sk(Di.SOUTH),n}function Ti(e,n){if(!C(e,Element)){if(Ui.innerHTML=e,!(e=Ui.firstElementChild))throw new D(Ti,0,"No element data");Ui.removeChild(e);var r=!0;Ui.innerHTML=""}this.a=0!==kf(e).length,this.f=r?e:lf(e,x.document,this.a),n&&((r="onAttach")in n&&zc(e=n[r],"Function",Ti,1,r)&&(this.Vh=e),(r="onDetach")in n&&zc(e=n[r],"Function",Ti,1,r)&&(this.b=e))}uh.prototype.f=0,uh.prototype.b=0,uh.prototype.a=Ki,uh.MAX_EXTRUDE_HEIGHT=2047,uh.prototype.pi=function(e){var n=+e;if(n!==e)throw new D(this.pi,0,e);if(0>n||2047<this.b+n)throw new ne(this.pi,this.b+n,[0,2047]);this.f=n,this.ra(kh.SPATIAL)},uh.prototype.setExtrusion=uh.prototype.pi,uh.prototype.gm=function(){return this.f},uh.prototype.getExtrusion=uh.prototype.gm,uh.prototype.oi=function(e){var n=+e;if(n!==e)throw new D(this.oi,0,e);if(0>n||2047<this.f+n)throw new ne(this.oi,this.f+n,[0,2047]);this.b=n,this.ra(kh.SPATIAL)},uh.prototype.setElevation=uh.prototype.oi,uh.prototype.bm=function(){return this.b},uh.prototype.getElevation=uh.prototype.bm,uh.prototype.ga=function(){return this.a},uh.prototype.getGeometry=uh.prototype.ga,uh.prototype.da=function(e){if(C(e,O))var n=!1;else C(e,Ji,this.da,0),n=!0;return this.J=n,n=this.a,this.a=e,n!==Ki&&this.ra(kh.SPATIAL),this},uh.prototype.setGeometry=uh.prototype.da,uh.prototype.K=function(){return this.ga().K()},uh.prototype.getBoundingBox=uh.prototype.K,uh.prototype.Kd=function(e){var n,d,m,r=this.ga();if(this.J){var g=0;for(m=(r=r.la).length;g<m;g++)(d=Li(this,r[g],e,r[g].pd))&&(n||(n=[]),n.push(d))}else(d=this.ab)===B&&(d=this.J?Di.NORTH:this.ga().pd),(d=Li(this,r,e,d))&&(n=[d]);return n},uh.prototype.getGeometriesForTile=uh.prototype.Kd,uh.prototype.aa=z,uh.prototype.Y=function(){var d,e=uh.j.Y.call(this),n=this.ga(),r=this.J?n.la:[n],m=e.properties,g=e.geometry=n.Y();if(m.style=this.V().Y(),m.height=this.f+this.b,m.min_height=this.b,this.K().Bb()&&(g.type="MultiPolygon",this.J)){var v=[];r.forEach(function(w,k){d=g.coordinates[k],w.K().Bb()?v=v.concat(d):v.push(d)}),g.coordinates=v}return e},uh.prototype.forWorkerMessage=uh.prototype.Y,u(Qi,uh),t("H.map.Circle",Qi),Qi.prototype.tg=function(e){(e=ng(e)).ia(this.R)||(this.R=e,Ri(this))},Qi.prototype.setCenter=Qi.prototype.tg,Qi.prototype.bb=function(){return this.R},Qi.prototype.getCenter=Qi.prototype.bb,Qi.prototype.zi=function(e){if(E(e=ae(e,0,6371000.79*Pd/2)))throw new D(this.zi,0,e);this.wa!==e&&(this.wa=e,Ri(this))},Qi.prototype.setRadius=Qi.prototype.zi,Qi.prototype.Qm=function(){return this.wa},Qi.prototype.getRadius=Qi.prototype.Qm,Qi.prototype.D=60,Qi.prototype.yi=function(e){if(!Fc(e))throw new D(this.yi,0,e);this.D!==(e=ae(Ad(e),4,360))&&(this.D=e,Ri(this))},Qi.prototype.setPrecision=Qi.prototype.yi,Qi.prototype.Nm=function(){return this.D},Qi.prototype.getPrecision=Qi.prototype.Nm,Qi.prototype.da=function(){return this},Qi.prototype.setGeometry=Qi.prototype.da,Qi.prototype.ga=function(){return this.a===Ki&&Qi.j.da.call(this,Si(this)),this.a},Qi.prototype.getGeometry=Qi.prototype.ga,t("H.map.DomIcon",Ti);var Ui=document.createElement("DIV");function Vi(e){Vi.j.constructor.call(this,e)}function Wi(e,n){this.w=+e,this.h=+n}function Xi(e,n){var r,d=e,m=n||[];if(e!==Yi.NONE){if(n=r=m.length,-1===Zi.indexOf(d))throw new D(Xi,0,e);if(!m)throw new D(Xi,1,m);for(;r--;)if(E(m[r]))throw new D(Xi,1,m);if(d===Yi.RECT&&3<n&&(m=[m[0],m[1],m[2],m[1],m[2],m[3],m[0],m[3]],d=Yi.POLYGON),d===Yi.CIRCLE&&2<n&&0<(e=m[2])){d=m[0];var g=m[1],v=360/(r=yd(2*Cd(e),40));for(m=[];r--;){var w=v*r*Ud;m.push(d+Id(w)*e,g+Kd(w)*e)}d=Yi.POLYGON}if(d!==Yi.POLYGON||!n||m.length%2)throw new D(Xi,1,m);this.a=m}}Ti.prototype.Vh=null,Ti.prototype.b=null,Ti.prototype.uj=function(e){return lf(this.f,e,this.a)},Ti.prototype.a=!1,u(Vi,gh),t("H.geo.MultiPoint",Vi),Vi.prototype.b=function(e){return lg(e)},Vi.prototype.c=function(e){return C(e,kg)?e:ng(e)},Vi.prototype.rb="Multi"+kg.prototype.rb,Vi.prototype.Hb="Multi"+kg.prototype.Hb,t("H.math.Size",Wi),t("H.map.HitArea",Xi);var Yi={NONE:0,RECT:1,CIRCLE:2,POLYGON:3};Xi.ShapeType=Yi;var Zi=[Yi.RECT,Yi.CIRCLE,Yi.POLYGON];function rh(e,n){var r;xc(this,rh),rh.j.constructor.call(this,n),this.da(e),n&&"icon"in n&&(r=n.icon),this.Ic(r||$i(this))}function $i(e){var n=e.c;return n||(n=e.constructor.prototype.c=e.b(aj)),n}Xi.prototype.Of=function(e,n,r){return this.a?ee(e,n,this.a,r,!0):de.NONE},Xi.prototype.hitTest=Xi.prototype.Of,u(rh,M),t("H.map.AbstractMarker",rh),rh.prototype.ga=function(){return this.a},rh.prototype.getGeometry=rh.prototype.ga,rh.prototype.da=function(e){var n=this.a;return C(e,kg)||C(e,Vi)?this.a=e:(lg(e,this.da,0),this.a=ng(e)),n&&this.ra(kh.SPATIAL),this},rh.prototype.setGeometry=rh.prototype.da,rh.prototype.K=function(){return this.a.K()},rh.prototype.xb=function(){return this.icon},rh.prototype.getIcon=rh.prototype.xb,rh.prototype.Ic=function(e){var n=this.icon,r=!n;if(n!==e){if(!this.Uj(e))throw r?new D(this.constructor,1,e):new D(this.Ic,0,e);this.icon=e,r||this.ra(kh.VISUAL)}return this},rh.prototype.setIcon=rh.prototype.Ic;var aj={svg:'<svg xmlns="http://www.w3.org/2000/svg" width="38" height="47" viewBox="0 0 38 47"><g fill="none"><path fill="#0F1621" fill-opacity=".4" d="M15 46c0 .317 1.79.574 4 .574s4-.257 4-.574c0-.317-1.79-.574-4-.574s-4 .257-4 .574z"></path><path fill="#01b6b2" d="M33.25 31.652A19.015 19.015 0 0 0 38 19.06C38 8.549 29.478 0 19 0S0 8.55 0 19.059c0 4.823 1.795 9.233 4.75 12.593L18.975 46 33.25 31.652z"></path><path fill="#6A6D74" fill-opacity=".5" d="M26.862 37.5l4.714-4.77c3.822-3.576 5.924-8.411 5.924-13.62C37.5 8.847 29.2.5 19 .5S.5 8.848.5 19.11c0 5.209 2.102 10.044 5.919 13.614l4.719 4.776h15.724zM19 0c10.493 0 19 8.525 19 19.041 0 5.507-2.348 10.454-6.079 13.932L19 46 6.079 32.973C2.348 29.495 0 24.548 0 19.04 0 8.525 8.507 0 19 0z"></path></g></svg>',size:new Wi(38,47),anchor:new J(19,45),hitArea:new Xi(Yi.POLYGON,[19,46,2,27,0,18,5,6,19,0,32,5,38,15,36,27,19,47])};function bj(e,n){bj.j.constructor.call(this,e,n)}function cj(e,n,r){cj.j.constructor.call(this,e),this.oldValue=r,this.newValue=n}function dj(e,n,r,d){dj.j.constructor.call(this,e,n,r),this.modifiers=d}rh.prototype.Y=function(){var e=rh.j.Y.call(this),n=this.xb(),r=n.yb(),d=n.kd();return e.geometry=this.ga().Y(),r&&((n=e.properties.icon={id:n.uid}).size={w:r.w,h:r.h},n.offset=[r.w/2-(d?d.x:0),r.h/2-(d?d.y:0)]),e},rh.prototype.forWorkerMessage=rh.prototype.Y,u(bj,rh),t("H.map.DomMarker",bj),bj.prototype.type=nh.DOM_MARKER,bj.prototype.T=2,bj.prototype.b=function(e){var n=new Ti(e.svg,e);return n.f.style.margin=-(e=e.anchor).y+"px 0 0 -"+e.x+"px",n},bj.prototype.Uj=function(e){return C(e,Ti)},u(cj,ud),t("H.util.ChangeEvent",cj),u(dj,cj),t("H.map.ChangeEvent",dj);var ej={SIZE:1,POSITION:2,HEADING:4,TILT:8,INCLINE:16,ZOOM:32,BOUNDS:64};function fj(){this.a=[],fj.j.constructor.call(this)}function gj(e,n,r){if(e=e.a.length,r)var d=e;else if(E(d=0>(d=+n)?zd(0,e+d):yd(e,d)))throw new ne(fj,n,[0,e-1]);return d}function ij(e,n){var r=e.a.splice(n,1)[0];return e.dispatchEvent(new hj(e,e.A.je,n,null,r,null)),r}function hj(e,n,r,d,m,g){hj.j.constructor.call(this,n,e),this.idx=r,this.added=d,this.removed=m,this.moved=g}function jj(){}function kj(e){return yd(1,zd(0,.5-Ed(Ld(Rd+Qd*e/180))/Pd/2))}function lj(e){return 0>=e?90:1<=e?-90:Vd*(2*Md(Hd(Pd*(1-2*e)))-Qd)}dj.Type=ej,dj.prototype.ll=ej.SIZE,dj.prototype.SIZE=dj.prototype.ll,dj.prototype.Ui=ej.POSITION,dj.prototype.POSITION=dj.prototype.Ui,dj.prototype.Oi=ej.HEADING,dj.prototype.HEADING=dj.prototype.Oi,dj.prototype.Wi=ej.TILT,dj.prototype.TILT=dj.prototype.Wi,dj.prototype.Pi=ej.INCLINE,dj.prototype.INCLINE=dj.prototype.Pi,dj.prototype.Xi=ej.ZOOM,dj.prototype.ZOOM=dj.prototype.Xi,dj.prototype.Mi=ej.BOUNDS,dj.prototype.BOUNDS=dj.prototype.Mi,u(fj,F),t("H.util.OList",fj),fj.prototype.add=function(e,n){n=gj(this,n,E(n)),this.a.splice(n,0,e),this.dispatchEvent(new hj(this,this.A.he,n,e,null,null))},fj.prototype.add=fj.prototype.add,fj.prototype.hc=function(e){return this.get(e),ij(this,e)},fj.prototype.removeAt=fj.prototype.hc,fj.prototype.remove=function(e){return 0<=(e=this.indexOf(e))&&(ij(this,e),!0)},fj.prototype.remove=fj.prototype.remove,fj.prototype.set=function(e,n){if(0!==this.a.length||0!==e){this.get(e),e=gj(this,e,!1);var r=this.a[e]}return this.a[e]=n,this.dispatchEvent(new hj(this,this.A.ke,e,n,r,null)),r},fj.prototype.set=fj.prototype.set,fj.prototype.indexOf=function(e){return this.a.indexOf(e)},fj.prototype.indexOf=fj.prototype.indexOf,fj.prototype.get=function(e){var n=gj(this,e,!1),r=this.a;if(n>=r.length)throw new ne(this.get,e,[0,r.length-1]);return r[n]},fj.prototype.get=fj.prototype.get,fj.prototype.ym=function(){return this.a.length},fj.prototype.getLength=fj.prototype.ym,fj.prototype.La=function(){return this.a.concat()},fj.prototype.asArray=fj.prototype.La,fj.prototype.flush=function(){for(var e=this.a.length;e--;)ij(this,e)},fj.prototype.flush=fj.prototype.flush,fj.prototype.o=function(){this.flush(),fj.j.o.call(this)},fj.prototype.A={he:"add",je:"remove",ke:"set",Xo:"move"},u(hj,ud),fj.Event=hj,jj.prototype.Tf=function(e,n,r){return r?(r.x=n/360+.5,r.y=kj(e)):r=new J(n/360+.5,kj(e)),r},jj.prototype.latLngToPoint=jj.prototype.Tf,jj.prototype.Pc=function(e,n){return this.Tf(e.lat,e.lng,n)},jj.prototype.geoToPoint=jj.prototype.Pc,jj.prototype.Ra=function(e,n,r){return r?(r.lat=lj(n),r.lng=360*(1===e?1:Zd(e,1))-180):r=new kg(lj(n),360*(1===e?1:Zd(e,1))-180),r},jj.prototype.xyToGeo=jj.prototype.Ra,jj.prototype.dg=function(e,n){return this.Ra(e.x,e.y,n)},jj.prototype.pointToGeo=jj.prototype.dg;var mj=new jj;function nj(e,n){this.projection=e||mj,this.b=0,this.a=this.exp=Ed(n||256)/Od,oj(this),this.y=this.x=0}t("H.geo.mercator",mj),t("H.util.constants.DEFAULT_MIN_ZOOM_LEVEL",0),t("H.util.constants.DEFAULT_MAX_ZOOM_LEVEL",22),t("H.geo.PixelProjection",nj);var pj=Dd(24)+Dd(-8);function oj(e){e.a>pj&&(e.a=pj),e.w=Gd(2,e.a),e.h=Gd(2,e.a)}function qj(e){e=e||{},qj.j.constructor.call(this),this.min=0,this.max=22,this.yl=this.dark=!!e.dark,e.min&&this.ui(e.min),e.max&&this.si(e.max),this.pixelProjection=new nj(e.projection,e.minWorldSize),e.provider&&(this.ma=e.provider,this.Va=A(this.Va,this),this.ma.addEventListener(P.prototype.A.za,this.Va,!1,this),this.hb=A(this.hb,this),this.ma.addEventListener(P.prototype.A.ie,this.hb,!1,this))}function rj(e,n,r){var d=e[n],m="min"===n;if(r!==d){if(!(m?r<=e.max:r>=e.min))throw new D(m?e.ui:e.si,0,"Invalid condition min <= max");e[n]=r,e.Va(),e.hb(),e.dispatchEvent(new cj(m?e.A.Ti:e.A.Si,r,d))}return e}function sj(e){var n;if(sj.j.constructor.call(this),this.dispatchEvent=A(this.dispatchEvent,this),e){var r=e.length;for(n=0;n<r;n++)this.add(e[n])}}function tj(e,n){var r=n.getProvider&&n.getProvider();r&&(uj[r.uid]=r),n.ka(e)}function vj(e){var n=e.getProvider&&e.getProvider();n&&delete uj[n.uid],e.ka(null)}nj.prototype.eg=mj,nj.prototype.projection=nj.prototype.eg,nj.prototype.x=0,nj.prototype.x=nj.prototype.x,nj.prototype.y=0,nj.prototype.y=nj.prototype.y,nj.prototype.Oo=Gd(2,pj),nj.prototype.w=nj.prototype.Oo,nj.prototype.ln=Gd(2,pj),nj.prototype.h=nj.prototype.ln,nj.prototype.Oa=function(e){if(E(e))throw new D(this.Oa,0,e);var n=this.x/this.w,r=this.y/this.h;this.b=e,this.a=this.exp+e,oj(this),this.x=n*this.w,this.y=r*this.h},nj.prototype.rescale=nj.prototype.Oa,nj.prototype.Jj=function(){return this.b||0},nj.prototype.getZoomScale=nj.prototype.Jj,nj.prototype.ib=function(e,n){return(e=this.projection.Tf(e.lat,e.lng,n)).x=e.x*this.w-this.x,e.y=e.y*this.h-this.y,e},nj.prototype.geoToPixel=nj.prototype.ib,nj.prototype.Re=function(e,n){return this.projection.Ra((e.x+this.x)/this.w,(e.y+this.y)/this.h,n)},nj.prototype.pixelToGeo=nj.prototype.Re,nj.prototype.Ra=function(e,n,r){return this.projection.Ra((e+this.x)/this.w,(n+this.y)/this.h,r)},nj.prototype.xyToGeo=nj.prototype.Ra,nj.prototype.Ah=function(e,n,r){return(e=this.projection.Tf(e,n,r)).x=e.x*this.w-this.x,e.y=e.y*this.h-this.y,e},nj.prototype.latLngToPixel=nj.prototype.Ah,nj.prototype.Zd=function(e){return new J(e.x*this.w-this.x,e.y*this.h-this.y)},nj.prototype.pointToPixel=nj.prototype.Zd,u(qj,F),t("H.map.layer.Layer",qj),qj.prototype.min=0,qj.prototype.min=qj.prototype.min,qj.prototype.max=22,qj.prototype.max=qj.prototype.max,qj.prototype.A={za:"update",ie:"configchange",Ti:"minchange",Si:"maxchange"},qj.prototype.ca=function(){return this.ma},qj.prototype.getProvider=qj.prototype.ca,qj.prototype.un=function(e){return this.min<=e&&e<=this.max},qj.prototype.isValid=qj.prototype.un,qj.prototype.ui=function(e){return rj(this,"min",+e)},qj.prototype.setMin=qj.prototype.ui,qj.prototype.si=function(e){return rj(this,"max",+e)},qj.prototype.setMax=qj.prototype.si,qj.prototype.Va=function(){this.dispatchEvent(this.A.za)},qj.prototype.hb=function(e){e=new cj(this.A.ie,e&&e.newValue,e&&e.oldValue),this.dispatchEvent(e)},qj.prototype.o=function(){qj.j.o.call(this)},qj.prototype.ba=function(){return null},qj.prototype.getCopyrights=qj.prototype.ba,u(sj,fj),t("H.map.DataModel",sj),sj.prototype.add=function(e,n){C(e,qj,this.add,0),tj(this,e),sj.j.add.call(this,e,n)},sj.prototype.add=sj.prototype.add,sj.prototype.set=function(e,n){return C(n,qj,this.set,0),tj(this,n),(e=sj.j.set.call(this,e,n))&&vj(e),e},sj.prototype.set=sj.prototype.set,sj.prototype.hc=function(e){var n;return(n=sj.j.hc.call(this,e))&&vj(n),n},sj.prototype.removeAt=sj.prototype.hc,sj.prototype.remove=function(e){var n;return(n=sj.j.remove.call(this,e))&&vj(e),n},sj.prototype.remove=sj.prototype.remove,sj.prototype.flush=function(){for(var e=this.a.length;e--;)this.hc(e);sj.j.flush.call(this)},sj.prototype.flush=sj.prototype.flush;var uj={};function wj(e,n,r){if(e=uj[e])return C(e[n],Function,wj,1,"invalid method"),e[n].apply(e,r)}function xj(e,n){Da(e)&&(this.i=e),Fc(n)&&(this.a=n)}Ic(uj),sj.invoke=wj,t("H.util.Request",xj),xj.State={PENDING:0,PROCESSING:1,COMPLETE:2,CANCELLED:3,ERROR:4};var yj=[0,1,2,3,4],Ej;function zj(e,n){e.b<e.a&&(vc(n)||(n=2),0===n||1===n||0!==e.C&&1!==e.C||(e.b++,2!==n&&e.g++,e.O(e.b<e.a?1:2)))}function Aj(){}function Bj(e,n){var r=e.N(),d=r.ownerDocument;Bj.j.constructor.call(this),this.a=e,this.S=r=r.appendChild(Cj(d,"DIV","position:absolute;bottom:0;right:0;left:0px;z-index:1;direction:ltr;pointer-events:none;height:40px-webkit-touch-callout: none;-webkit-user-select:none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select:none;",null,"H_imprint")),this.qf=Cj(d,"DIV","margin: 0 0 16px 16px;display:inline-block;",'<svg height="40" viewBox="0 0 47 40" width="47" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="m45.2054149 8.82876345.6003191.40637037-.2240425.6914074-.4490426 1.38570368c-.1024468.3148889-.6998936 1.9596297-2.43 3.5918519l-.017234.0163704c-.188617.1887407-.3801064.3659259-.5467021.5084444l-.4605319.4285185-.486383.4516296-.1407447-.0702963c-.7257447.4583704-1.4926596.7886667-2.2796809.9831852l.5840426.5864445-.6769149.6817778-2.052766 2.0636296-.169468.1704444-.019149.0192593-2.3821276 2.3958518c-.4902128.8493334-1.1202128 1.6331852-1.8497873 2.3111112-.6031915.6047407-1.2504255 1.1054814-1.935 1.4954814l-.4777659.4805186-4.3247873 4.3506666-.0296808.0298519-.0315958.0269629-2.1532978 1.8171111-.2661702.2253334h-.3485107-3.8948936l-3.968617 3.9914815-1.3547873 1.3616296-.6769148.6808148-.6769149-.6808148-1.3538298-1.3616296-4.80925535-4.837926-3.2687234-3.2875555-1.63436171-1.6437778h2.3112766 4.62255319 2.67223407l-4.71063832-4.7368148-.6769149-.6808148.6769149-.6808148 4.93851062-4.9650371.6769149-.6798518.6769149.6808148 2.7296809 2.7454074c.9363829-.8820741 2.1485106-1.4685185 3.4037234-1.6562963.278617-1.4694815 1.0187234-2.834963 2.168617-3.9885926.5696808-.572 1.1843617-1.0438519 1.8335106-1.4107407l.2901064-.2917778 4.3094681-4.31985187c.5830851-1.0582963 1.4256383-1.78918519 2.0364893-2.12718519l.4471277-.24748148c.3829787-.7617037.9047872-1.47622222 1.5539362-2.12622222 1.510851-1.51666667 3.3165957-2.31881482 5.22-2.31881482.0871276 0 .1752127.00192593.2594681.00577778 1.9484042.06933334 3.8441489.97933334 5.4775532 2.62792593.1512765.15022222.3303191.34859259.5361702.5797037l.0526595.05874074c.1120213.12518519.2345745.26192593.370532.40733334l1.2657446 1.36066666.6328724.67985185-.6548936.65866667-.2508511.25325926zm-27.9288192 22.17414815h-9.57446804l4.78723404 4.8148148zm23.1864894-21.70422223c-.9220213 1.38666663-2.5180851 3.63037033-4.1984042 1.94133333l4.2510638-4.27651851c-.3810638-.41022222-.6711702-.754-.8923404-.97740741-2.2921277-2.31207407-4.8743617-2.34192593-6.8984043-.312-1.3528723 1.35681481-1.7071277 2.91007407-1.313617 4.38533332l-1.332766-1.52629628c-.385851.21474074-2.0182979 1.65918518-.7937234 3.84703708l-1.5252127-1.274963-2.0240426 2.0299259 2.7344681 2.7502222c-2.1121277-1.6861481-4.3889362-1.5205185-6.2157447.312-1.9560638 1.9615556-1.8181915 4.3381482-.3532979 6.293926l-.295851-.2946667c-1.9321277-1.9432593-4.0318085-1.2576296-5.0706383-.2128148-.8023405.8079259-1.2944681 1.9191852-1.0924468 2.6905185l-4.195532-4.2187407-2.22893613 2.2408148 8.25893613 8.3065185h4.4339362l-2.9767021-2.9938519c-.5893908-.6029568-.9604155-1.0987731-1.1531529-1.5232627-.3182349-.7008886-.1504161-1.2073234.3230465-1.680515.7334043-.7318519 1.583617-.2763704 3.0829787 1.2277777l2.9412766 2.9562963 2.2164894-2.2292592-2.7909575-2.8060741c2.0125532 1.5291852 4.4224468 1.612 6.5728724-.545037 1.3567021-1.2653334 1.7425532-2.4565185 1.7425532-2.4565185l-1.6755319-1.1314815c-.9229788 1.3866666-2.5152128 3.6361481-4.195532 1.9461481l4.2606383-4.2851852 2.655 2.6712593 2.3160639-2.3294074-3.3223405-3.3424445c-1.5520212-1.5609629-.6328723-3.0275555.0124469-3.5793333.3025531.6442222.7448936 1.2624445 1.3078723 1.8296296 2.1485106 2.1676297 4.9260638 2.6038519 7.3685106.1550371 1.3567022-1.2643704 1.7425532-2.4565185 1.7425532-2.4565185zm-3.6564894-1.35537321-2.0211702 2.03377777c-.9890425-1.18251851-.9392553-1.81422222-.3245744-2.43051851.7439361-.7462963 1.4993617-.43044445 2.3457446.39674074zm-12.4879787 12.56088884c-.9890425-1.1825185-.9411702-1.819037-.3284042-2.4353333.7448936-.7462963 1.5003191-.4304444 2.3467021.3967408z" fill="#0f1621" fill-opacity=".7"/><path d="m17.2765957 31.0029116-4.787234 4.8148148-4.78723404-4.8148148zm23.1864894-21.70422223 1.6755319 1.13148153s-.385851 1.1921481-1.7425532 2.4565185c-2.4424468 2.4488148-5.22 2.0125926-7.3685106-.1550371-.5629787-.5671851-1.0053192-1.1854074-1.3078723-1.8296296-.6453192.5517778-1.5644681 2.0183704-.0124469 3.5793333l3.3223405 3.3424445-2.3160639 2.3294074-2.655-2.6712593-4.2606383 4.2851852c1.6803192 1.69 3.2725532-.5594815 4.195532-1.9461481l1.6755319 1.1314815s-.3858511 1.1911851-1.7425532 2.4565185c-2.1504256 2.157037-4.5603192 2.0742222-6.5728724.545037l2.7909575 2.8060741-2.2164894 2.2292592-2.9412766-2.9562963c-1.4993617-1.5041481-2.3495744-1.9596296-3.0829787-1.2277777-.4734626.4731916-.6412814.9796264-.3230465 1.680515.1927374.4244896.5637621.9203059 1.1531529 1.5232627l2.9767021 2.9938519h-4.4339362l-8.25893613-8.3065185 2.22893613-2.2408148 4.195532 4.2187407c-.2020213-.7713333.2901063-1.8825926 1.0924468-2.6905185 1.0388298-1.0448148 3.1385106-1.7304445 5.0706383.2128148l.295851.2946667c-1.4648936-1.9557778-1.6027659-4.3323704.3532979-6.293926 1.8268085-1.8325185 4.103617-1.9981481 6.2157447-.312l-2.7344681-2.7502222 2.0240426-2.0299259 1.5252127 1.274963c-1.2245745-2.1878519.4078724-3.63229634.7937234-3.84703708l1.332766 1.52629628c-.3935107-1.47525925-.0392553-3.02851851 1.313617-4.38533332 2.0240426-2.02992593 4.6062766-2.00007407 6.8984043.312.2211702.22340741.5112766.56718519.8923404.97740741l-4.2510638 4.27651851c1.6803191 1.689037 3.2763829-.5546667 4.1984042-1.94133333zm-16.1444681 11.20551563 2.0182979-2.0385925c-.846383-.8271852-1.6018085-1.1430371-2.3467021-.3967408-.612766.6162963-.6606383 1.2528148.3284042 2.4353333zm12.4879787-12.56088884c-.8463829-.82718519-1.6018085-1.14303704-2.3457446-.39674074-.6146809.61629629-.6644681 1.248.3245744 2.43051851z" fill="#fff" fill-opacity=".3"/></g></svg>',"H_logo"),r.appendChild(this.qf),r=r.appendChild(Cj(d,"DIV","right:0;bottom:0;position:absolute;background-color:rgba(255,255,255,.8);color:#0F1621;padding:2px 16px",null,"H_copyright")),this.i=r.appendChild(Cj(d,"A","color:inherit; margin:0px 8px; text-decoration:none; pointer-events:all;","Terms of use")),this.i.target="_blank",this.g=r.appendChild(Cj(d,"SPAN","margin:0px 8px")),this.c=r.appendChild(Cj(d,"SPAN")),this.s=Wa(Dj),this.vi(n),this.f=A(this.f,this),this.b=A(this.b,this),this.a.addEventListener(this.a.A.Ri,this.f),this.a.a.addEventListener("add",this.b),this.a.a.addEventListener("remove",this.b),this.a.a.addEventListener("set",this.b),this.b()}xj.prototype.C=0,xj.prototype.getState=function(){return this.C},xj.prototype.getState=xj.prototype.getState,xj.prototype.O=function(e){if(0>yj.indexOf(e))throw new D(this.O,0,e);(this.C!==e||1===e&&1<this.a)&&(this.C=e,this.i&&this.i(this))},xj.prototype.a=1,xj.prototype.cn=function(){return this.a},xj.prototype.getTotal=xj.prototype.cn,xj.prototype.b=0,xj.prototype.Om=function(){return this.b},xj.prototype.getProcessed=xj.prototype.Om,xj.prototype.g=0,xj.prototype.hm=function(){return this.g},xj.prototype.getFailed=xj.prototype.hm,xj.prototype.oe=function(){},xj.prototype.cancel=function(){3!==this.C&&(this.oe(),this.O(3))},xj.prototype.cancel=xj.prototype.cancel,t("H.util.ICapturable",Aj),Aj.prototype.capture=function(){},Aj.prototype.capture=Aj.prototype.capture,t("H.util.Disposable",qd),qd.prototype.tb=qd.prototype.tb,qd.prototype.addOnDisposeCallback=qd.prototype.tb,t("H.util.dispose",td),qd.prototype.F=qd.prototype.F,qd.prototype.dispose=qd.prototype.F,qd.prototype.o=qd.prototype.o,qd.prototype.disposeInternal=qd.prototype.o,u(Bj,qd),t("H.map.Imprint",Bj);var Dj={font:'11px "Lucida Grande", Arial, Helvetica, sans-serif',href:"https://legal.here.com/{LN}/terms/serviceterms/{CN}",invert:!1,reportHref:"https://wego.here.com/",locale:"en-US",mark:""};function Cj(e,n,r,d,m){return e=e.createElement(n),r&&(e.style.cssText=r),d&&(e.innerHTML=d),m&&(e.className=m),e}Bj.prototype.vi=function(e){var n,r=this.qf.firstElementChild.firstElementChild.children;e||(this.s=Wa(Dj));var d=this.s;for(n in d)e&&n in e&&(d[n]=e[n]);e=(this.wh=e=d.invert)?Fj:Gj,r[0].style.fill=e.Wk,r[0].style.fillOpacity=""+e.Xk,r[1].style.fill=e.al,r[1].style.fillOpacity=""+e.bl,Hj[e=d.locale]||(d.locale=e="en-US"),this.i.innerHTML=Hj[e],e=e.split("-"),this.i.href=d.href.replace("{LN}",e[0]).replace("{CN}",e[1].toLowerCase()),d.mark?(this.c.innerHTML=d.mark,this.c.style.margin="0px 8px"):(this.c.innerHTML="",this.c.style.margin="0px"),this.S.style.font=d.font},Bj.prototype.setOptions=Bj.prototype.vi,Bj.prototype.N=function(){return this.S},Bj.prototype.f=function(){this.g.innerHTML=this.l+" "+this.ba()},Bj.prototype.b=function(){this.f(),setTimeout(this.f,5e3)};var Gj={al:"#0F1621",bl:.3,Wk:"#fff",Xk:.6},Fj={al:"#fff",bl:1,Wk:"#0F1621",Xk:.7},Ij="1987&ndash;"+zd(2015,(new Date).getFullYear())+" HERE";function Jj(e,n,r,d){Kj(A(function(m){m?r(this.wh?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAeCAYAAABe3VzdAAADNklEQVRYR82XW6hVVRSGv7+rmJfSMKSnSkMEfY7EogcJC7tilGRopBAiSaI+SBARQSCIIqgFISih2YW0oAgLCsKXojA0RB+81VugZEFZv/yHuWTt7d7Hfc4+6+h4OWefNfcc3xlj/v+YS1zjoab5bE8DZgGngB8keSg5GwO0PQ54F3i2BnQIWCLpx14hGwG0fT3wOfBwB5DzwOOSDvQC2RTgM8Ae4D/gaeA3YDdwN5AWvyxp+6gD2r4OmAq8AbwInAMmA/OAT4CbgBWStvYClzUjWkHbrwHLgF8LVHJ8DDxah7P9JHCil7M40oA/A7OBC8ANtSqlrQOVs30/8CWQat8r6cxg1RwRQNvPA88Bk4D7gJzBV4A5teSp5MlS4VuA/ZIeu1Kr+wa0/QTwIRDlRhT5eTswBvi2CKOd42AULilndNAYCcA7gK+BmbVMiyXtsh3Qt4FFBTgW8w6wXtLfV4LrSyS2FwAvAWOBX+JtwF0laUDmS/oun23fDNwJnJb0Ty9g1ZphVdB2qrK2LdFfBbb685/AIxXkUKDqa4cMaDs2kjalRe8Fola57J3qRQSJviGHA3gMuAdYI2lDUfDOArQLWAd8VTuTOW9vjUoFy6TIGYpS9wKfAjuK5wVuSfn91iKcvZJeHy5ci0hsZwzNk5Qh3xIFbLyks7aPAtPLgv+L4VZwDwLvA6uKz6XdfcVAi22PBz4q4+lVSRurXW2vKYKIZfwEHCmmXC35HngAyITYD0ys2t8XWflyBfhmvKm24QCk7aVFCPVc7WMszzKucknI+NoHPCUppt13VICZm2nNwjoksByY0SXL72Vi3FieZ97mgrpyqF432H9xScW2O0H+W6oSE/4D2FYuA9kzlUzVTwO3Ad9IOtx3ydo2aLGZLpABm5KW2Z4AfAbMLfsEcpGkKLqRuMwHu0CukrSpCCrvGlF6hBEVL5MUw24kOhp1B8gc+FTqgxpkFLuzSbjk6jpJOkC2tDPeKCkVbDRkO67fDTTC2VK7vgfyBUlfNEpV2zyAK4HNXRLmZfshScdHC6g9T+WDGU2XpkdZdNXhWs6g7dXAhmsJ7jKR2M77bG4kV7Wt9TZfBLgYEC7PSpcIAAAAAElFTkSuQmCC":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAeCAYAAABe3VzdAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAIMSURBVFiFzdZPiE1RGADwXzPTTPIMQoodVpbKgpoUG5qExUi8DSVJQv4slJJsbNjYWFhNETWLUUosRDRLUVLCYhIiojFojHkW997uvefNGIuZc99Xp/fOO6/Or++c75xDi0d7hDlWYQNqeB9hvv+OGq6jUWjPsKZKVBbtuKOMy9p3bKqOlsROCWYc27AWr9PfJnCgKlgbluNqivmGDmzBrxR3sCocnMEw7sqXdEAzboeK9uLTFPVbed8VcesxglFJtqNEHbcxlIL68ChADuCSpEgauBULt11SDI3C5yJJdrLCCNsQumMBl+J5AKinY4slBfNTfsRcxJwYsK0YxD3J0r1RPut6Cv/twgp0xoDBBc3LNhr0RwJktNifAn7gsnLmsuxVinyVTn4i7dcLoH4sU96Tp2Pi2uSVehN75Gdev+QO7pIXztmZnLwTvf+AzU+/v5Rn50+A24gP2IW5M4mbJ7+ejgVjJ/EpHXuCa8p77nGK68FX5eWfsTgfTJoh92qu1vAaa+CtPJuDZuEh3CHZUyHyxSSYrL3DWKE/gStm8aybDDkmKYperJM/BrJMnsJuHMLq2YJNh/wsX7JuPAyQfTFg0yGPFMZreCCv4n2xgTQjxyXP+CxquK8iXBYhMlzOtliQBVg4RVuCG/iSto/YHAuWxWFTHyXDWBkbNFkc1cK4LI5rYVwW57QY7i/pZeJv8QQJRQAAAABJRU5ErkJggg=="):((m=this.qf.cloneNode(!0)).firstChild.setAttribute("style","font:"+n),r(bf(m.innerHTML)))},e),d)}function Kj(e,n){var r="data:image/svg+xml;charset=utf-8,"+encodeURIComponent('<svg height="40" viewBox="0 0 47 40" width="47" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="m45.2054149 8.82876345.6003191.40637037-.2240425.6914074-.4490426 1.38570368c-.1024468.3148889-.6998936 1.9596297-2.43 3.5918519l-.017234.0163704c-.188617.1887407-.3801064.3659259-.5467021.5084444l-.4605319.4285185-.486383.4516296-.1407447-.0702963c-.7257447.4583704-1.4926596.7886667-2.2796809.9831852l.5840426.5864445-.6769149.6817778-2.052766 2.0636296-.169468.1704444-.019149.0192593-2.3821276 2.3958518c-.4902128.8493334-1.1202128 1.6331852-1.8497873 2.3111112-.6031915.6047407-1.2504255 1.1054814-1.935 1.4954814l-.4777659.4805186-4.3247873 4.3506666-.0296808.0298519-.0315958.0269629-2.1532978 1.8171111-.2661702.2253334h-.3485107-3.8948936l-3.968617 3.9914815-1.3547873 1.3616296-.6769148.6808148-.6769149-.6808148-1.3538298-1.3616296-4.80925535-4.837926-3.2687234-3.2875555-1.63436171-1.6437778h2.3112766 4.62255319 2.67223407l-4.71063832-4.7368148-.6769149-.6808148.6769149-.6808148 4.93851062-4.9650371.6769149-.6798518.6769149.6808148 2.7296809 2.7454074c.9363829-.8820741 2.1485106-1.4685185 3.4037234-1.6562963.278617-1.4694815 1.0187234-2.834963 2.168617-3.9885926.5696808-.572 1.1843617-1.0438519 1.8335106-1.4107407l.2901064-.2917778 4.3094681-4.31985187c.5830851-1.0582963 1.4256383-1.78918519 2.0364893-2.12718519l.4471277-.24748148c.3829787-.7617037.9047872-1.47622222 1.5539362-2.12622222 1.510851-1.51666667 3.3165957-2.31881482 5.22-2.31881482.0871276 0 .1752127.00192593.2594681.00577778 1.9484042.06933334 3.8441489.97933334 5.4775532 2.62792593.1512765.15022222.3303191.34859259.5361702.5797037l.0526595.05874074c.1120213.12518519.2345745.26192593.370532.40733334l1.2657446 1.36066666.6328724.67985185-.6548936.65866667-.2508511.25325926zm-27.9288192 22.17414815h-9.57446804l4.78723404 4.8148148zm23.1864894-21.70422223c-.9220213 1.38666663-2.5180851 3.63037033-4.1984042 1.94133333l4.2510638-4.27651851c-.3810638-.41022222-.6711702-.754-.8923404-.97740741-2.2921277-2.31207407-4.8743617-2.34192593-6.8984043-.312-1.3528723 1.35681481-1.7071277 2.91007407-1.313617 4.38533332l-1.332766-1.52629628c-.385851.21474074-2.0182979 1.65918518-.7937234 3.84703708l-1.5252127-1.274963-2.0240426 2.0299259 2.7344681 2.7502222c-2.1121277-1.6861481-4.3889362-1.5205185-6.2157447.312-1.9560638 1.9615556-1.8181915 4.3381482-.3532979 6.293926l-.295851-.2946667c-1.9321277-1.9432593-4.0318085-1.2576296-5.0706383-.2128148-.8023405.8079259-1.2944681 1.9191852-1.0924468 2.6905185l-4.195532-4.2187407-2.22893613 2.2408148 8.25893613 8.3065185h4.4339362l-2.9767021-2.9938519c-.5893908-.6029568-.9604155-1.0987731-1.1531529-1.5232627-.3182349-.7008886-.1504161-1.2073234.3230465-1.680515.7334043-.7318519 1.583617-.2763704 3.0829787 1.2277777l2.9412766 2.9562963 2.2164894-2.2292592-2.7909575-2.8060741c2.0125532 1.5291852 4.4224468 1.612 6.5728724-.545037 1.3567021-1.2653334 1.7425532-2.4565185 1.7425532-2.4565185l-1.6755319-1.1314815c-.9229788 1.3866666-2.5152128 3.6361481-4.195532 1.9461481l4.2606383-4.2851852 2.655 2.6712593 2.3160639-2.3294074-3.3223405-3.3424445c-1.5520212-1.5609629-.6328723-3.0275555.0124469-3.5793333.3025531.6442222.7448936 1.2624445 1.3078723 1.8296296 2.1485106 2.1676297 4.9260638 2.6038519 7.3685106.1550371 1.3567022-1.2643704 1.7425532-2.4565185 1.7425532-2.4565185zm-3.6564894-1.35537321-2.0211702 2.03377777c-.9890425-1.18251851-.9392553-1.81422222-.3245744-2.43051851.7439361-.7462963 1.4993617-.43044445 2.3457446.39674074zm-12.4879787 12.56088884c-.9890425-1.1825185-.9411702-1.819037-.3284042-2.4353333.7448936-.7462963 1.5003191-.4304444 2.3467021.3967408z" fill="#0f1621" fill-opacity=".7"/><path d="m17.2765957 31.0029116-4.787234 4.8148148-4.78723404-4.8148148zm23.1864894-21.70422223 1.6755319 1.13148153s-.385851 1.1921481-1.7425532 2.4565185c-2.4424468 2.4488148-5.22 2.0125926-7.3685106-.1550371-.5629787-.5671851-1.0053192-1.1854074-1.3078723-1.8296296-.6453192.5517778-1.5644681 2.0183704-.0124469 3.5793333l3.3223405 3.3424445-2.3160639 2.3294074-2.655-2.6712593-4.2606383 4.2851852c1.6803192 1.69 3.2725532-.5594815 4.195532-1.9461481l1.6755319 1.1314815s-.3858511 1.1911851-1.7425532 2.4565185c-2.1504256 2.157037-4.5603192 2.0742222-6.5728724.545037l2.7909575 2.8060741-2.2164894 2.2292592-2.9412766-2.9562963c-1.4993617-1.5041481-2.3495744-1.9596296-3.0829787-1.2277777-.4734626.4731916-.6412814.9796264-.3230465 1.680515.1927374.4244896.5637621.9203059 1.1531529 1.5232627l2.9767021 2.9938519h-4.4339362l-8.25893613-8.3065185 2.22893613-2.2408148 4.195532 4.2187407c-.2020213-.7713333.2901063-1.8825926 1.0924468-2.6905185 1.0388298-1.0448148 3.1385106-1.7304445 5.0706383.2128148l.295851.2946667c-1.4648936-1.9557778-1.6027659-4.3323704.3532979-6.293926 1.8268085-1.8325185 4.103617-1.9981481 6.2157447-.312l-2.7344681-2.7502222 2.0240426-2.0299259 1.5252127 1.274963c-1.2245745-2.1878519.4078724-3.63229634.7937234-3.84703708l1.332766 1.52629628c-.3935107-1.47525925-.0392553-3.02851851 1.313617-4.38533332 2.0240426-2.02992593 4.6062766-2.00007407 6.8984043.312.2211702.22340741.5112766.56718519.8923404.97740741l-4.2510638 4.27651851c1.6803191 1.689037 3.2763829-.5546667 4.1984042-1.94133333zm-16.1444681 11.20551563 2.0182979-2.0385925c-.846383-.8271852-1.6018085-1.1430371-2.3467021-.3967408-.612766.6162963-.6606383 1.2528148.3284042 2.4353333zm12.4879787-12.56088884c-.8463829-.82718519-1.6018085-1.14303704-2.3457446-.39674074-.6146809.61629629-.6644681 1.248.3245744 2.43051851z" fill="#fff" fill-opacity=".3"/></g></svg>'),d=Ej;vc(d)?e(d):new tf("image",r).then(function(m){Ye.drawImage(m,0,0);try{Ye.getImageData(0,0,1,1),d=!1}catch(g){d=18===g.code}finally{Ej=d,e(d)}},n)}Bj.prototype.ba=function(){var v,w,k,e=this.a,n=e.pb(),r=e.c.jb().bounds,d=(e=e.a).a.length,m={},g=0,j=[Ij];if(r)for(;g<d;g++)if(w=e.get(g).getCopyrights(r.K(),n))for(v=0;v<w.length;v++)m[k=w[v].label]||(j.push(k),m[k]=1);return j.join(", ")},Bj.prototype.getCopyrights=Bj.prototype.ba,Bj.prototype.V=function(){return this.S.style},Bj.prototype.l=String.fromCharCode(169),Bj.prototype.o=function(){if(this.a.removeEventListener(this.a.A.Ri,this.f),this.a.a.removeEventListener("add",this.b),this.a.a.removeEventListener("remove",this.b),this.a.a.removeEventListener("set",this.b),this.S.parentNode){var e=this.S;e.parentNode.removeChild(e)}},Bj.prototype.disposeInternal=Bj.prototype.o,Bj.prototype.capture=function(e,n,r,d){var _h,m=e.getContext("2d"),g=window.getComputedStyle(this.g.parentElement),v=2*Dc(g.paddingLeft,10),w=(this.g.offsetWidth+2*v)*n,k=this.g.offsetHeight*n,j=0!==this.c.innerHTML.length?this.c.offsetWidth*n:0,G=Ec(g.getPropertyValue("font-size")),q=this.S.ownerDocument,_t=+e.width,_r=+e.height,_s=16*n,ga=this.qf.childNodes[0].getBoundingClientRect(),_c=ga.width*n,_u=ga.height*n,_f=ld;Da(d)&&(_f=function(){d("capture_error")}),m.fillStyle=g.backgroundColor,m.fillRect(_t-w-j,_r-k,w+j,k),w=this.c.innerHTML,w=this.l+" "+((_h=Cj(q,"div",null,_h=this.ba())).textContent||_h.innerText||"")+(w?" "+w:""),m.font=G*n+"px "+g.getPropertyValue("font-family"),m.fillStyle=g.getPropertyValue("color"),m.textBaseline="bottom",m.textAlign="right",m.fillText(w,_t-v*n,_r),Jj(this,m.font,function(_h){new tf("image",_h).then(function(ad){m.drawImage(ad,_s,_r-(_u+_s),_c,_u),r(e)},_f)},_f)},Bj.prototype.capture=Bj.prototype.capture,Bj.prototype.wh=!1,Bj.prototype.nl=function(e,n){Hj[e]=n},Bj.prototype.addL11NString=Bj.prototype.nl;var Hj={"de-DE":"Nutzungsbedingungen","en-US":"Terms of use","en-GB":"Terms of use","es-ES":"Condiciones de uso","fi-FI":"Palveluehdot","fr-FR":"Conditions d'utilisation","it-IT":"Condizioni di utilizzo","nl-NL":"Dienstvoorwaarden","pl-PL":"Warunki \u015bwiadczenia us\u0142ugi","pt-BR":"Termos de servi\xe7o","pt-PT":"Termos do servi\xe7o","ru-RU":"\u0423\u0441\u043b\u043e\u0432\u0438\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f","tr-TR":"Servis Ko\u015fullar\u0131","zh-CN":"\u4f7f\u7528\u6761\u6b3e"};function R(e){var n={};this.f=n.previousSibling=n.nextSibling=n,this.g=new cf,R.j.constructor.call(this,e),e&&"objects"in e&&this.Xb(e.objects)}function Lj(e,n,r){e.ee(r.ma)}function Mj(e){e.Ye()}function Nj(e,n,r){e.ra(r.c)}function Oj(e){this.push(e)}function Pj(e,n){for(var m,g,r=0,d=n.length,v=[];r<d;r++)g=(m=n[r])instanceof R?{type:"GeometryCollection",geometries:Pj(e,m.Ua())}:m instanceof rh||m instanceof sh||m instanceof th||m instanceof uh?m.ga().Kc():{type:"FeatureCollection",features:hf},v.push(g);return v}u(R,M),t("H.map.Group",R),R.prototype.type=nh.GROUP,R.prototype.ee=function(e,n){return this.b=!0,e=R.j.ee.call(this,e,n),this.b=!1,e&&this.forEach(Lj,!0),e},R.prototype.setProvider=R.prototype.ee,R.prototype.contains=function(e){var n=this===e;if(!n&&this.a&&C(e,M))for(;!n&&e;)e===this?n=!0:e=e.Fa;return n},R.prototype.contains=R.prototype.contains,R.prototype.Ye=function(){this.L=B,this.forEach(Mj,!0)},R.prototype.resetZInfo=R.prototype.Ye,R.prototype.b=!1,R.prototype.ra=function(e){var n=R.j.ra.call(this,e);return n&&!this.b&&(this.c=e,this.forEach(Nj,!0),delete this.c),n},R.prototype.invalidate=R.prototype.ra,R.prototype.forEach=function(e,n,r){var d;if(this.a){var m=this.f,g=m.nextSibling;for(d=0;g!==m;){var v=g.nextSibling;e.call(r,g,d++,this),n&&C(g,R)&&g.forEach(e,n,r),g=v}}},R.prototype.forEach=R.prototype.forEach,R.prototype.Ua=function(e){var n=[];return this.forEach(Oj,e,n),n},R.prototype.getObjects=R.prototype.Ua,R.prototype.K=function(){var e=null;return this.a&&this.forEach(function(n){n.K&&(n=n.K())&&(e=e?e.ec(n):n)}),e},R.prototype.getBoundingBox=R.prototype.K,R.prototype.a=0,R.prototype.Rl=function(){return this.a},R.prototype.getChildCount=R.prototype.Rl,R.prototype.fa=function(e){var n=this.f,r=n.previousSibling;if(C(e,M,this.fa,0),e.contains(this))throw new $c(this.fa,"The new object contains the parent group");var d=e.Lf(!0),m=e.Fa;if(m!==this){if(m){var g=e.nextSibling;(m=e.previousSibling).nextSibling=g,g.previousSibling=m}e.Fa=this,M.j.ka.call(e,this),r.nextSibling=e,e.previousSibling=r,e.nextSibling=n,n.previousSibling=e,this.a++}return e.Di=this.g.next(),e.Ye(),n=e.ee(this.ma,this.fa),e.Lf(!0)!==d&&e.ra(kh.VOLATILITY),n||e.ra(kh.Z_ORDER),e},R.prototype.addObject=R.prototype.fa,R.prototype.Xb=function(e){var n;Bc(e,this.Xb,0);var r=e.length;for(n=0;n<r;n++)this.fa(e[n])},R.prototype.addObjects=R.prototype.Xb,R.prototype.Ga=function(e){if(!e||e.Fa!==this)throw new $c(this.Ga,"object not found");var n=e.previousSibling,r=e.nextSibling;return n.nextSibling=r,r.previousSibling=n,e.Fa=null,M.j.ka.call(e,null),delete e.previousSibling,delete e.nextSibling,C(e.ma,N)&&e.ee(null,this.Ga),this.a--,e},R.prototype.removeObject=R.prototype.Ga,R.prototype.rd=function(e){var n;Bc(e,this.rd,0);var r=e.length;for(n=0;n<r;n++)this.Ga(e[n])},R.prototype.removeObjects=R.prototype.rd,R.prototype.na=function(){var e=this.Ua();this.rd(e)},R.prototype.removeAll=R.prototype.na,R.prototype.Kc=function(e){for(var g,v,w,n=this.Ua(),r=0,d=n.length,m=[];r<d;r++)(w=n[r])instanceof R?(v=qh(this,g=e?e(w.getData()):w.getData(),!!e),(g={type:"Feature"}).properties=v,w.i&&(g.id=w.i),g.geometry={},g.geometry.type="GeometryCollection",g.geometry.geometries=Pj(this,w.Ua()),m.push(g)):m.push(w.Kc(e));return{type:"FeatureCollection",features:m}},R.prototype.toGeoJSON=R.prototype.Kc,R.prototype.Y=function(){var e=R.j.Y.call(this);return e.type="Group",e},R.prototype.forWorkerMessage=R.prototype.Y;var Qj={PROVIDES_BY_VIEWPORT:1,PROVIDES_RASTERS:2,PROVIDES_SPATIALS:4,PROVIDES_OVERLAYS:8,PROVIDES_MARKERS:16,PROVIDES_DOM_MARKERS:32,PROVIDES_GEOJSON:64,PROVIDES_OMV:128,CROP_LINES_BY_TILE:256,CROP_POLYGONS_BY_TILE:512,HAS_VOLATILE_DATA:1024};function Rj(e,n,r,d,m){switch(n&&(this.f=n),vc(r)&&(this.c=!!r),this.c&&d&&(this.Lg=new Wi(d.w,d.h)),vc(m)&&(this.g={crossOrigin:m}),Sj[Ac(e)]){case 2:this.a=e,Tj(this,1);break;case 1:if(nf(e)){this.a=e,Uj(this),Tj(this,1);break}e=e.src;case 0:if(e){e=bf(e),this.b=new tf("image",e,B,this.g),this.b.then(A(this.$n,this),A(this.Zn,this));break}default:throw Tj(this,-1),new D(Rj,0,"No image data")}}function Tj(e,n){e.C=n,delete e.b,e.f&&e.f(n,e)}function Uj(e){if(e.c){var n=e.a,r=Vj(e),d=r&&r.w||+n.width,m=r&&r.h||+n.height,g=Ue();if(C(n,x.HTMLCanvasElement))r=n;else{(r=n.ownerDocument.createElement("canvas")).width=Cd(d*g),r.height=Cd(m*g);var v=r.getContext("2d");v.scale(g,g),v.drawImage(n,0,0,d,m),cd&&(v.clearRect(0,0,d,m),v.drawImage(n,0,0,d,m))}e.a=r}}t("H.map.provider.Capabilities",Qj),Qj.PROVIDES_WEBGL_RENDERABLE_OBJECTS=Qj.PROVIDES_SPATIALS|Qj.PROVIDES_OVERLAYS|Qj.PROVIDES_MARKERS,Rj.prototype.C=0,Rj.prototype.getState=function(){return this.C},Rj.prototype.c=!0,Rj.prototype.getData=function(){return this.a||z};var Sj={String:0,HTMLImageElement:1,HTMLCanvasElement:2};function Vj(e){var r,n=e.Lg;if(!n){var d=e.a;if(0===(n=d.naturalWidth||d.width)&&$e&&1===Sj[Ac(d)]){var m=!0;if(r=d.parentNode)var g=d.nextSibling;document.body.appendChild(d)}e.Lg=n=new Wi(d.naturalWidth||d.width,d.naturalHeight||d.height),m&&(r?r.insertBefore(d,g):document.body.removeChild(d))}return n}function Wj(e,n){var r,d="anonymous";if(this.uid=Xj.next(),Wj.j.constructor.call(this),n){var m="size";if(m in n){var g=n[m];if(!g||isNaN(g.w)||isNaN(g.h))throw new D(Wj,1,m);this.g=new Wi(g.w,g.h)}if((m="anchor")in n){if(!(g=n[m])||isNaN(g.x)||isNaN(g.y))throw new D(Wj,1,m);this.f=new J(g.x,g.y)}(m="hitArea")in n&&(C(g=n[m],Xi,Wj,1),this.c=n[m]),(m="asCanvas")in n&&(r=n[m]),(m="crossOrigin")in n&&(d=n[m]),(g=n.stickHeight)===+g&&0<g&&(this.Fo=g),g=n[m="stickColor"],m in n&&Cc(g)&&(this.Eo=g)}e=new Rj(e,A(this.i,this),r,this.g,d),0!==(n=this.C=e.getState())?this.i(n,e):this.b=e}p=Rj.prototype,p.Lg=z,p.yb=function(){return 1===this.C?Vj(this):z},p.$n=function(e){this.a=e,Uj(this),Tj(this,1)},p.Zn=function(){Tj(this,-1)},p.cancel=function(){this.b&&this.b.cancel()},u(Wj,F),t("H.map.Icon",Wj);var Xj=new cf;function Yj(e,n,r,d,m,g){Yj.j.constructor.call(this,isNaN(e)?15:e,n,r,d,m,g)}function Zj(e,n,r,d,m){var g=n.entries;if(m)if(n.a)g=ak(e,n,r,d,m);else if(g){var v=Eg(n,+((g=g[0])[1]>=n[8])|+(g[0]>=n[9])<<1);v.entries=n.entries,delete n.entries,g.node=v,Bg(e,v),g=ak(e,n,r,d,m)}else Fg(n,g=new bk(r,d)),Bg(e,n),zg(e,g,!0);else g||Bg(e,n),Fg(n,g=new bk(r,d)),zg(e,g,!0);return g}function ak(e,n,r,d,m){return Zj(e,Eg(n,+(r>=n[8])|+(d>=n[9])<<1),r,d,m-1)}function bk(e,n){this.id=Dg++,this[0]=n,this[1]=e}function ck(){this.a=new Yj(10,180,90,0,0,!0)}function dk(e){this.a=e}function ek(e,n,r){this.c=e,this.a=n,this.g=r,this.f=this.c&Qj.PROVIDES_BY_VIEWPORT?"function(){return sources[$source].isInMinMaxRange(feature, $zoom) && feature.ref.effectiveVisibility;}":B,this.b={}}function fk(e,n,r,d){this.a=e,this.b=n,this.c=r,this.kf=d}function gk(e,n,r,d){return e={type:n,uid:e.b,tiled:r,max_zoom:e.c},d&&Ya(e,d),e}function hk(e,n,r,d,m){this.a=e,this.b=n,this.c=r,this.f=d,this.kf=m}function ik(e){if(e.a&Qj.PROVIDES_DOM_MARKERS&&!(e.a&Qj.PROVIDES_MARKERS))return{};var n=new fk(e.a,e.b,e.c,e.kf),r=new dk(e.a);e=new ek(e.a,e.b,e.f);var d={},m=n.b;if(n=n.a&Qj.PROVIDES_BY_VIEWPORT?gk(n,"ObjectSource",!1,{progressiveUpdate:!0,has_volatile_data:!!(n.a&Qj.HAS_VOLATILE_DATA)}):n.a&Qj.PROVIDES_RASTERS?gk(n,"RemoteRasterTileSource",!0,{url:""}):gk(n,"ObjectTileSource",!0,{tile_size:n.kf}),d[m]=n,n={},r.a&Qj.PROVIDES_RASTERS&&(n={"translucent-raster":qi("raster","inlay",1)}),r.a&Qj.PROVIDES_WEBGL_RENDERABLE_OBJECTS){m=!!(r.a&Qj.CROP_LINES_BY_TILE);var g={"translucent-polygons":qi("polygons","inlay",2),"translucent-extruded-polygons":qi("polygons","translucent",3),"translucent-pattern-lines":qi("pattern-lines","translucent",4),"translucent-overlays":qi("overlays","inlay",5),markers:qi("custom_icons","overlay",6,!1)};g["translucent-polygons"].crop_by_tile=!!(r.a&Qj.CROP_POLYGONS_BY_TILE),g["translucent-pattern-lines"].crop_by_tile=m,g.markers.suppress_fade=!0,g.markers.stick=!0,Ya(n,g)}if(e.c&Qj.PROVIDES_RASTERS&&(e.b["tile_layer_"+e.a]=si(e.a,"_default",{"translucent-raster":{color:[1,1,1,e.g],order:0}})),e.c&Qj.PROVIDES_SPATIALS){r={"translucent-pattern-lines":{color:pi("strokeColor"),width:pi("lineWidth * $meters_per_pixel"),join:pi("lineJoin"),cap:pi("lineCap"),tail_cap:pi("lineTailCap"),head_cap:pi("lineHeadCap"),miter_limit:pi("miterLimit"),order:"function() { return 2 + feature.effectiveZIdx / 2; }",interactive:!0,dash:pi("lineDash"),extrude:!0,dash_phase:pi("lineDashOffset")}},m=e.b,g="polygon_layer_"+e.a;var v=si(e.a,"polygons",void 0,e.f);v.flat={filter:"function(){return !feature.height && !feature.min_height;}",draw:ri(!1)},v.extruded={filter:"function(){return feature.height || feature.min_height;}",draw:ri(!0)},m[g]=v,e.b["outline_layer_"+e.a]=si(e.a,"outlines",r,e.f),e.b["polyline_layer_"+e.a]=si(e.a,"polylines",r,e.f)}return e.c&Qj.PROVIDES_OVERLAYS&&(e.b["overlay_layer_"+e.a]=si(e.a,"overlays",{"translucent-overlays":{color:[1,1,1,e.g],order:8190,interactive:!0}})),e.c&Qj.PROVIDES_MARKERS&&(e.b["marker_layer_"+e.a]=si(e.a,"markers",{markers:{sprite:oi("icon.id"),offset:oi("icon.offset"),collide:!1,priority:8191,elevate_by_altitude:!0,interactive:!0,stick:{color:oi("icon.stick_color"),height:oi("icon.stick_height")}}},e.f)),{sources:d,styles:n,layers:e.b}}function P(e){var r,n=""+ef();if(P.j.constructor.call(this),this.min=(e=e||{}).min||0,this.max=e.max||22,r=e.uri){if(/_/.test(r))throw new D(P,0,"uri "+r)}else r=n;if(this.uri=r||n,this.uid=n,e.getCopyrights&&zc(e.getCopyrights,"Function",P)&&(this.getCopyrights=e.getCopyrights),this.hb=this.hb.bind(this),this.ta=!0,this.b=e.engineType||jk,this.b===kk.HARP&&!H.map.render.harp)throw new D(P,0,"HARP engine is not supported, module not found")}function lk(e,n){n=ae(n,0,1),E(n)&&(n=1),e.g!==n&&(e.g=n,e.ta&&mk(e),e.hb(),e.Va())}function mk(e){if(e.b===kk.WEBGL){var n=new hk(e.getCapabilities(),e.uid,e.max,e.g,e.tileSize);e.a=new ti(ik(n))}else e.b===kk.HARP&&H.map.render.harp&&(e.a=new H.map.render.harp.Style({}));e.ta=!0}function ok(e){var n;for(n in xc(this,ok),ok.j.constructor.call(this,e),this.wa=e=[],nh)e[nh[n]]=new jh}function N(e){N.j.constructor.call(this,e=e||{}),this.f=e=new R({min:e.min,max:e.max}),e.ma=this,e.ka(this),e.ra(kh.ADD),this.J=new Lg,this.i=new Lg,this.m=new ck,this.u=new Lg,this.P=new ck,this.T=new Lg}function pk(e,n,r,d,m,g,v){if(v=v||[],n.Rc())for(e=n!==e.m&&n!==e.u,m=!m,r=(n=n.Pf(r,g,g)).length,g=0;g<r;g++){var k,w=n[g].c;if(k=void 0!==d){for(var j=Bd(d),G=w;(k=G.m<=j&&G.s>=j)&&(G=G.Fa););k=!k}k||!m&&!w.wc(!0)||(e||1===w.xb().getState())&&v.push(w)}return v}function qk(e,n,r,d,m){var g=pk(e,e.m,n,r,d,m);return pk(e,e.u,n,r,d,m,g),g}function rk(e,n,r,d,m){var g=pk(e,e.P,n,r,d,m);return pk(e,e.T,n,r,d,m,g),g}function sk(e,n,r){var m,d=r.ga(),g=tk.bind(null,e);e=uk.bind(null,e),C(r,th)?m=C(d,L)?g(d):d.la.some(g):C(r,uh)?m=C(d,O)?e(d):d.la.some(e):C(r,sh)&&(m=e(Ci(d))),m&&n.push(r)}function tk(e,n){t:{var r=n.$,d=Hi(e,n);if(!d){n=n.$.length;for(var m=0;m<n;m+=3)if(Fi(e,r[m],r[m+1])){e=!0;break t}}e=d}return e}function uk(e,n){return Ii(e,n)}function vk(e,n,r){for(var d=e.length;d--;){var m=e[d],g=m.ga();if(C(g,Vi)){for(var w,v=(g=g.la).length;v--;)if(Fi(n,(w=g[v]).lat,w.lng)){r.push(m);break}}else Fi(n,g.lat,g.lng)&&r.push(m)}}Wj.State={ERROR:-1,LOADING:0,READY:1},Wj.prototype.getState=function(){return this.C},Wj.prototype.getState=Wj.prototype.getState,Wj.prototype.i=function(e,n){if(this.a=n.getData(),1===e){var r=this.g;r||(r=this.g=n.yb()),this.f||(this.f=new J(r.w/2|0,r.h))}this.b&&(this.C=e,delete this.b,this.dispatchEvent("statechange"))},Wj.prototype.a=z,Wj.prototype.Qc=function(){return this.a},Wj.prototype.getBitmap=Wj.prototype.Qc,Wj.prototype.yb=function(){return this.g||z},Wj.prototype.getSize=Wj.prototype.yb,Wj.prototype.f=z,Wj.prototype.kd=function(){return this.f},Wj.prototype.getAnchor=Wj.prototype.kd,Wj.prototype.c=z,Wj.prototype.nm=function(){return this.c},Wj.prototype.getHitArea=Wj.prototype.nm,Wj.prototype.o=function(){Wj.j.o.call(this),this.a?(this.a.removeAttribute("src"),delete this.a):(this.b.cancel(),delete this.b)},u(Yj,wg),Yj.prototype.s=function(e){for(var n,r,d=this.head,m=e;m;){if(e=m.entries)if(n=e.length){if(2>n&&(r=m.parent)&&1===r.a){r.removeChild(m),d===m&&(d=r),r.entries=e,m=e[0].node=r;continue}}else if(delete m.entries,(r=m.parent)&&(r.removeChild(m),d===m&&(d=r),1===r.a)){m=r.a?r[0]||r[1]||r[2]||r[3]:null;continue}break}this.head!==d&&(this.head=d,Bg(this))},Yj.prototype.yc=function(e,n){if(Gg(this.a,e,n,e,n))return Zj(this,this.a,e,n,this.c);throw Error("Coordinates out of bounds")},bk.prototype.a=function(e){return this[e%2]},p=ck.prototype,p.Dh=0,p.Rc=function(){return this.Dh},p.Uf=null,p.K=function(){var n,e=this.Uf;return!e&&(n=xg(this.a))&&(this.Uf=e=new K(-n[0],n[3],-n[2],n[1])),e},p.yc=function(e){return++this.Dh,this.Uf=null,this.a.yc(e.lng,-e.lat)},p.remove=function(e){return(e=this.a.remove(e))&&(--this.Dh,this.Uf=null),e},p.Pf=function(e,n,r){var d=this.a,m=e.Nb(),g=e.Jb(),v=-m.lat;m=m.lng;var w=-g.lat;return g=g.lng,e.Bb()?d.Za(-180,v,g,w,r,n).concat(d.Za(m,v,180,w,r,n)):d.Za(m,v,g,w,r,n)},u(P,F),t("H.map.provider.Provider",P),p=P.prototype,p.A={ie:"configchange",za:"update"},p.Va=function(e,n){this.dispatchEvent(new vd(this.A.za,n,e))},p.hb=function(e){e=new cj(this.A.ie,e&&e.newValue,e&&e.oldValue),this.dispatchEvent(e)},p.o=function(){F.prototype.o.call(this),this.a&&(this.a.removeEventListener("change",this.hb),this.a.F(),delete this.a)},p.ba=function(){return null},P.prototype.getCopyrights=P.prototype.ba,P.prototype.getCapabilities=function(){var e=0;return this.di()&&(e|=Qj.PROVIDES_BY_VIEWPORT),this.providesRasters()&&(e|=Qj.PROVIDES_RASTERS),this.providesSpatials()&&(e|=Qj.PROVIDES_SPATIALS),this.providesOverlays()&&(e|=Qj.PROVIDES_OVERLAYS),this.providesMarkers()&&(e|=Qj.PROVIDES_MARKERS),this.providesDomMarkers()&&(e|=Qj.PROVIDES_DOM_MARKERS),this.providesGeoJSON()&&(e|=Qj.PROVIDES_GEOJSON),this.providesOMV()&&(e|=Qj.PROVIDES_OMV),e},P.prototype.getCapabilities=P.prototype.getCapabilities,P.prototype.di=gf,P.prototype.Ve=gf,P.prototype.providesRasters=P.prototype.Ve,P.prototype.Cc=gf,P.prototype.providesSpatials=P.prototype.Cc,P.prototype.fi=gf,P.prototype.providesOverlays=P.prototype.fi,P.prototype.Rb=gf,P.prototype.providesMarkers=P.prototype.Rb,P.prototype.Qb=gf,P.prototype.providesDomMarkers=P.prototype.Qb,P.prototype.ei=gf,P.prototype.providesGeoJSON=P.prototype.ei,P.prototype.Sb=gf,P.prototype.providesOMV=P.prototype.Sb,P.prototype.dm=function(){return this.b},P.prototype.getEngineType=P.prototype.dm,P.prototype.wo=function(e){this.b=e},P.prototype.setEngineType=P.prototype.wo,P.prototype.Ue=ld,P.prototype.preprocessData=P.prototype.Ue,P.prototype.g=1,P.prototype.Em=function(){return this.g},P.prototype.getOpacityInternal=P.prototype.Em,P.prototype.Qa=function(e,n){var r=this;if(this.b===kk.WEBGL&&!C(e,ti)||this.b===kk.HARP&&!C(e,H.map.render.harp.Style))throw e=Object.entries(kk).find(function(d){return d[1]===r.b}),new D(this.Qa,0,"Invalid style for engineType "+e);this.a&&(this.a.removeEventListener("change",this.hb),this.a.removeEventListener(Yh,this.hb),this.a.F()),this.a=e,this.a.addEventListener("change",this.hb),this.a.addEventListener(Yh,this.hb),n||this.hb(),this.ta=!1},P.prototype.setStyleInternal=P.prototype.Qa,P.prototype.Ya=function(){return this.a||mk(this),this.a},P.prototype.getStyleInternal=P.prototype.Ya,P.prototype.Ej=function(){var e=this.getCapabilities(),n=nk.FEATURE;return e&Qj.PROVIDES_BY_VIEWPORT?n=nk.SOURCE:e&Qj.PROVIDES_RASTERS?n=null:e&Qj.PROVIDES_WEBGL_RENDERABLE_OBJECTS&&(n=nk.PROVIDER),n},P.prototype.getPickingMode=P.prototype.Ej,P.prototype.im=function(){return!1},P.prototype.getFeatureProxy=P.prototype.im,u(ok,P),t("H.map.provider.ObjectProvider",ok),ok.prototype.di=ff,ok.prototype.providesByViewport=ok.prototype.di,ok.prototype.Kb=function(e){return this.wa[e||nh.ANY]},ok.prototype.getInvalidations=ok.prototype.Kb,ok.prototype.Td=function(e,n){if(n!==kh.NONE){var r=this.wa[nh.ANY],d=r.a+1;r.update(d,n),(r=this.wa[e.type]).update(d,n),e.Kb().update(d,n),this.Va(e)}},ok.prototype.invalidateObject=ok.prototype.Td,ok.prototype.requestOverlays=ok.prototype.sd,ok.prototype.requestSpatials=ok.prototype.kg,ok.prototype.requestSpatialsByTile=ok.prototype.mg,ok.prototype.qa=!1,ok.prototype.requestMarkers=ok.prototype.Ec,ok.prototype.requestDomMarkers=ok.prototype.Dc,u(N,ok),t("H.map.provider.LocalObjectProvider",N),N.prototype.getCapabilities=function(){return Qj.PROVIDES_BY_VIEWPORT|Qj.PROVIDES_WEBGL_RENDERABLE_OBJECTS|Qj.PROVIDES_DOM_MARKERS|Qj.CROP_LINES_BY_TILE},N.prototype.Ya=function(){if(!this.l&&(this.l=N.j.Ya.call(this),this.l instanceof ti)){var e=new hk(this.getCapabilities()|Qj.HAS_VOLATILE_DATA,this.uid+"_vol",this.max,this.g,this.tileSize);this.l.Oe(ik(e))}return this.l},N.prototype.getStyleInternal=N.prototype.Ya,N.prototype.Qa=function(e,n){N.j.Qa.call(this,e,n),this.l=null},N.prototype.setStyleInternal=N.prototype.Qa,N.prototype.bc=function(){return this.f},N.prototype.getRootGroup=N.prototype.bc,N.prototype.Td=function(e,n){n&kh.SPATIAL&&this.fa(e),N.j.Td.call(this,e,n)},N.prototype.invalidateObject=N.prototype.Td,N.prototype.fa=function(e){var n;if(C(e,M,this.fa,0),e.ma!==this)throw new $c(this.fa,"foreign object");this.Ga(e);var r=e.type;if(r===nh.MARKER)if((n=e.ga())instanceof kg){var d=!0;r=this.m}else r=this.u;else r===nh.DOM_MARKER?(n=e.ga())instanceof kg?(d=!0,r=this.P):r=this.T:r=r===nh.OVERLAY?this.J:this.i;(d=d?r.yc(n):r.Pj(e.K())).c=e,e.qa=d},N.prototype.Ga=function(e){var n;if(e)if(e.ma!==this){if(C(e,M))throw new $c(this.Ga,"foreign object")}else if(n=e.qa){var r=e.type;r===nh.MARKER?this.m.remove(n)||this.u.remove(n):r===nh.DOM_MARKER?this.P.remove(n)||this.T.remove(n):r===nh.OVERLAY?this.J.remove(n):this.i.remove(n),delete n.c,delete e.qa}},N.prototype.removeObject=N.prototype.Ga,N.prototype.fi=function(){return 0<this.J.Rc()},N.prototype.providesOverlays=N.prototype.fi,N.prototype.sd=function(e,n,r){return pk(this,this.J,e,n,r,!1).filter(function(d){return d.Qc()})},N.prototype.requestOverlays=N.prototype.sd,N.prototype.Cc=function(){return 0<this.i.Rc()},N.prototype.providesSpatials=N.prototype.Cc,N.prototype.kg=function(e,n,r){return pk(this,this.i,e,n,r,!1)},N.prototype.requestSpatials=N.prototype.kg,N.prototype.mg=function(e,n){return pk(this,this.i,e.Hf(),e.zL,n,!1)},N.prototype.requestSpatialsByTile=N.prototype.mg,N.prototype.Rb=function(){return 0<this.m.Rc()+this.u.Rc()},N.prototype.providesMarkers=N.prototype.Rb,N.prototype.Ec=function(e,n,r){return qk(this,e,n,r,!1)},N.prototype.requestMarkers=N.prototype.Ec,N.prototype.Qb=function(){return 0<this.P.Rc()+this.T.Rc()},N.prototype.providesDomMarkers=N.prototype.Qb,N.prototype.Dc=function(e,n,r){return rk(this,e,n,r,!1)},N.prototype.requestDomMarkers=N.prototype.Dc,N.prototype.Ua=function(e,n,r,d,m){var g=this,v=e.K(),w=[],k=Zb(),j=1;if(v)for(;j&nh.ANY;){if(j&d)switch(j){case nh.MARKER:k=k.then(function(){return qk(g,v,r,n,!0)}).then(function(G){return vk(G,e,w)});break;case nh.DOM_MARKER:k=k.then(function(){return rk(g,v,r,n,!0)}).then(function(G){return vk(G,e,w)});break;case nh.SPATIAL:k=k.then(function(){return pk(g,g.i,v,r,n,!0)}).then(function(G){G.forEach(sk.bind(null,e,w))});break;case nh.OVERLAY:k=k.then(function(){return pk(g,g.J,v,r,n,!0)}).then(function(G){G.forEach(sk.bind(null,e,w))})}j<<=1}k.then(function(){return m(w)})},N.prototype.ld=function(e,n,r){var d=(r=r||jf).zoom,m=r.visiblesOnly;r=r.types;var g=nh.ANY;C(e,O,this.ld,0,"area"),zc(n,"Function",this.ld,1,"callback"),zc(d,"Number",this.ld,2,"options"),this.Ua(e,!vc(m)||!!m,d,vc(r)?r&g:g,n)},N.prototype.getObjectsWithin=N.prototype.ld,N.prototype.o=function(){N.j.o.call(this),this.f.na()};var wk={PENDING:0,ACTIVE:1,DONE:2};function xk(e,n){var r;if(n=n||{},!C(e,Element))throw new D(xk,0,e);var d=e.ownerDocument.createElement("div");this.S=e,xk.j.constructor.call(this),this.padding=new yk(0,0,0,0),this.center=new J(0,0),this.margin=0,this.element=d,d.style.zIndex=0,d.style.height=d.style.width="100%",d.style.direction="ltr",d.style.position="relative"===e.style.position?"absolute":"relative",this.resize(),e.appendChild(d),(r=n.padding)!==B&&this.wi(r.top,r.right,r.bottom,r.left),this.ri((r=n.margin)!==B?r:0)}function zk(e){var n=e.padding;e.center.set((e.width+n.left-n.right)/2<<0,(e.height+n.top-n.bottom)/2<<0)}function Ak(e,n,r,d,m,g){var v;for(v=[];d<=m;d++)v=v.concat(Bk(e,r,d));for(xj.call(this,g,e=v.length),this.l=r=[],this.f=A(this.f,this),this.c=A(this.c,this),this.O(1);e--;)r.push(Ck(n,(g=v[e])[0],g[1],g[2],this.f,this.c))}function Dk(e,n){var r=this;if(!Da(n))throw new D(Ek,1,n);if(!Da(e.next||Da(e.cycle)))throw new D(Dk,2,'Argument "mode" must implement H.util.AsyncQueue.Mode');this.b=[],this.c=[],this.g=e,this.i=n,this.l=function(){Fk(r)},this.a=null,this.f=function(){r.a||(r.a=x.setTimeout(r.l,1))}}function Fk(e){var n=e.c,r=0,d=e.g;for(d.a(),e.a=null;r<n.length;){var m=n[r];m.Tj?n.splice(r,1):r++}for(;m=d.next(e.b,e.c);)m.cancelled?m.done(null,"cancelled"):(n.push(m),e.i(m,m.data))}function Hk(){Gk(this,null,null,null)}function Gk(e,n,r,d){return e.data=n,e.cancelled=!1,e.Tj=!1,e.b=r,e.c=d,e.a=null,e}function Ik(){}t("H.map.render.RenderState",wk),u(xk,F),t("H.map.ViewPort",xk),xk.prototype.A={za:"update",le:"sync"},xk.prototype.ri=function(e){if(this.margin!==+e){if(E(this.margin=+e))throw new D(this.ri,0,e);zk(this),this.dispatchEvent(this.A.za)}},xk.prototype.setMargin=xk.prototype.ri,xk.prototype.wi=function(e,n,r,d){var m=this.padding;if(m.top!==e||m.right!==n||m.bottom!==r||m.left!==d){if(E(e+n+r+d))throw new D(this.wi);m.top=e,m.right=n,m.bottom=r,m.left=d,zk(this),this.dispatchEvent(this.A.za)}},xk.prototype.setPadding=xk.prototype.wi,xk.prototype.resize=function(){var e=this.S.offsetWidth,n=this.S.offsetHeight;(this.width!==e||this.height!==n)&&(this.a=new Wi(this.width,this.height),this.width=e,this.height=n,zk(this),this.dispatchEvent(this.A.za))},xk.prototype.resize=xk.prototype.resize,xk.prototype.$a=function(e){this.dispatchEvent(new dj(this.A.le,this.a,e,ej.SIZE))},xk.prototype.synchronize=xk.prototype.$a,xk.prototype.o=function(){this.S.removeChild(this.element),delete this.S,delete this.element,xk.j.o.call(this)},xk.prototype.lc=Qc,xk.prototype.startInteraction=xk.prototype.lc,xk.prototype.cc=Qc,xk.prototype.interaction=xk.prototype.cc,xk.prototype.wb=Qc,xk.prototype.endInteraction=xk.prototype.wb,u(Ak,xj),Ak.prototype.f=function(){zj(this,2)},Ak.prototype.c=function(){zj(this,4)},Ak.prototype.oe=function(){for(var e=this.l,n=e.length;n--;)e[n].cancel();delete this.l},t("H.util.AsyncQueue",Dk),Dk.prototype.push=function(e,n){if(!Da(n))throw new D(this.push,1,n);return e=Gk(new Hk,e,this.f,n),this.b.push(e),this.f(),e},Dk.prototype.push=Dk.prototype.push,Dk.Task=Hk,Hk.prototype.done=function(e,n){this.Tj=!0,this.b(),this.c(this,e,n)},Hk.prototype.done=Hk.prototype.done,Hk.prototype.cancel=function(){this.a&&this.a(),this.cancelled=!0},Hk.prototype.cancel=Hk.prototype.cancel,Hk.prototype.vo=function(e){return this.a=e,this},Hk.prototype.setCancelFn=Hk.prototype.vo,Dk.Mode=Ik,Ik.prototype.next=function(){},Ik.prototype.a=function(){};var Jk,Kk=function(){function e(){}for(var n,r,d,m=tc("o ms moz webkit "),g=5;g--&&!n;)n=(r=x[(n=m[g])+(n?"R":"r")+"equestAnimationFrame"])&&!E(r.call(window,e))&&(d=x[n+(n?"C":"c")+"ancelAnimationFrame"]);return Jk=n?function(v){return r.call(x,v)}:function(v){return x.setTimeout(v,25)},n?function(v){return d.call(x,v)}:function(v){return x.clearTimeout(v)}}(),Lk=x.performance&&x.performance.now?function(){return x.performance.now()}:function(){return x.Date.now()};function Mk(e,n){Mk.j.constructor.call(this,new Nk(e),n)}function Nk(e){if(isNaN(e)||0>e)throw new D(Mk,1,'Argument "maxTime" must be a positive number');this.c=e,this.b=Lk()}function Ok(e){if(xc(this,Ok),Ok.j.constructor.call(this,e),e&&"tileSize"in e){var n=Ed(+e.tileSize)/Od;if(isNaN(n)||n%1||0>n||30<n)throw new D(Ok,0,"tileSize: "+e.tileSize);this.tileSize=+e.tileSize}}function Pk(e,n){return Yd(e)-8-Ad(Yd(n))}function Qk(){}function Rk(e,n,r){if(this.g=[],n&&this.$d(n),r&&!Da(r))throw new D(Rk,2,r);this.b=0,this.filter=r,this.a={},this.f=this.c=null,this.ti(e)}function Tk(e,n){return n&&(e.c=Uk(e,n,e.c)),n}function Vk(e){for(;e.b>e.i&&e.f;)Wk(e,e.f,!0)}function Uk(e,n,r){return r!==n&&((n.fc||n.Zc)&&Wk(e,n,!1),(n.fc=r)&&(n.Zc=r.Zc,r.Zc=n),n.Zc||(e.c=n),n.fc||(e.f=n),e.b+=n.size),n}function Wk(e,n,r){var d=n.Zc,m=n.fc;(d||m||n==e.c&&n==e.f)&&(d?d.fc=m:e.c=m,m?m.Zc=d:e.f=d,e.b-=n.size,r&&(delete e.a[n.id],Sk(e,n))),n.fc=n.Zc=null}function Sk(e,n){for(var r=e.g.length;r--;)e.g[r].call(e,n.id,n.data,n.size)}function Xk(e,n,r,d){this.key="",this.x=e,this.y=n,this.z=r,this.data=d,this.valid=!0}function Yk(e,n,r,d){return(e-=r)*e+(n-=d)*n}function Zk(e,n,r){return $k(e,n*n,r||0,0,e.length-1)}function $k(e,n,r,d,m){var g=0,v=d,w=e[d].x,k=e[d].y,j=e[m].x,G=e[m].y,q=d+1,_t=Yk(w,k,j,G);if(_t)for(;q<m;){var _r=e[q++],_s=_r.x,ga=((_s-w)*(j-w)+((_r=_r.y)-k)*(G-k))/_t;(_s=0>ga?Yk(_s,_r,w,k):1<ga?Yk(_s,_r,j,G):Yk(_s,_r,w+ga*(j-w),k+ga*(G-k)))>g&&(g=_s,v=q-1)}else for(;q<m;)(_s=Yk(_s=(_r=e[q++]).x,_r=_r.y,w,k))>g&&(g=_s,v=q-1);return g>=n||0<r&&v-d?(--r,1<v-d?(d=$k(e,n,r,d,v)).splice(d.length-1,1):d=[e[d]],d=d.concat(1<m-v?$k(e,n,r,v,m):e.slice(v,m+1))):d=[e[d],e[m]],d}function al(e,n,r,d,m,g,v,w){al.j.constructor.call(this,n,r,d,null),this.key=e,this.U=w,this.a=m,this.g=g,this.i={},this.zL=v,this.m=Cd(wh.MAX_LINE_WIDTH/2*this.g+1)}function bl(e){return e.U.getInvalidations(nh.SPATIAL)}function cl(e){var g,n=bl(e),r=n.a,d=e.c,m=d===r;if(!(m||n.Rj(d)||n.yh(d))){m=e.f;var v=e.i;if(n.Sf(d))for(g=m.length;g--;){var w=m[g];if(w.Kb().Sf(d)){m.splice(g,1);var k=k||dl(e,w.cb())}}if(n.zh(d)){for(g=m.length;g--;)if((w=m[g]).Kb().zh(d)){var j=1;if((w=v[w.cb()])&&w.a){k=1;break}}j&&m.sort(el)}if(!k&&n.Vd(d))for(g=m.length;g--;)if(m[g].Kb().Vd(d)){var G=1;break}e.u!==d||G||(e.u=r,e.b!==d||k||(e.b=r)),e.c=r,m=!0}return m}function fl(e,n){this.b=e,this.a=n}function dl(e,n){var r=(e=e.i)[n];if(r)return delete e[n],r.a}function gl(e){var m,n=bl(e),r=e.c,d=e.f;if(!cl(e)){for(m=d.length;m--;){var g=d[m],v=g.Kb();(v.Sf(r)||v.yh(r))&&dl(e,g.cb())}e.f=e.U.requestSpatialsByTile(e,!1,!1).sort(el),e.c=n.a}}function el(e,n){return oh(e.Uc(),n.Uc(),!1)}u(Mk,Dk),t("H.util.SequentialQueue",Mk),Nk.prototype.next=function(e){return e.length&&Lk()-this.b<this.c?e=e.shift():null},Nk.prototype.a=function(){this.b=Lk()},u(Ok,P),t("H.map.provider.TileProvider",Ok),Ok.getZoomLevelOffset=Pk,Ok.prototype.requestTile=Ok.prototype.Ha,Ok.prototype.cancelTile=Ok.prototype.mc,Ok.prototype.cancelTileByKey=Ok.prototype.pe,Ok.prototype.createTileInternal=Ok.prototype.ac,Ok.prototype.uc=function(e,n,r){return this.uri.concat("_",e,"_",n,"_",r)},Ok.prototype.getTileKey=Ok.prototype.uc,Ok.prototype.kf=256,Ok.prototype.tileSize=Ok.prototype.kf,t("H.util.ICache",Qk),Qk.prototype.add=function(){},Qk.prototype.add=Qk.prototype.add,Qk.prototype.get=function(){},Qk.prototype.get=Qk.prototype.get,Qk.prototype.zf=function(){},Qk.prototype.drop=Qk.prototype.zf,Qk.prototype.forEach=function(){},Qk.prototype.forEach=Qk.prototype.forEach,Qk.prototype.na=function(){},Qk.prototype.removeAll=Qk.prototype.na,Qk.prototype.$d=function(){},Qk.prototype.registerOnDrop=Qk.prototype.$d,Qk.prototype.Ug=function(){},Qk.prototype.deRegisterOnDrop=Qk.prototype.Ug,t("H.util.Cache",Rk),Rk.prototype.add=function(e,n,r){var d,m;if(!Fc(r=+r)||0>r)throw new D(this.add,2,r);return e=String(e),(m=!this.filter||this.filter(e,n,r))&&((d=this.a[e])?(d.data!==n&&Sk(this,d),this.b+=r-d.size,d.size=r,d.data=n,Tk(this,d)):this.a[e]=Uk(this,{id:e,data:n,size:r,fc:null,Zc:null},this.c),Vk(this)),m},Rk.prototype.add=Rk.prototype.add,Rk.prototype.$d=function(e){if(!Da(e))throw new D(this.$d,0,e);this.g.push(e)},Rk.prototype.registerOnDrop=Rk.prototype.$d,Rk.prototype.Ug=function(e){this.g=this.g.filter(function(n){return n!==e})},Rk.prototype.deRegisterOnDrop=Rk.prototype.Ug,Rk.prototype.get=function(e,n){return(e=n?this.a[e]:Tk(this,this.a[e]))&&e.data},Rk.prototype.get=Rk.prototype.get,Rk.prototype.zf=function(e){var n;(n=this.a[e])&&Wk(this,n,!0)},Rk.prototype.drop=Rk.prototype.zf,Rk.prototype.forEach=function(e,n,r){var d;for(d in this.a){var m=this.a[d];(!r||r(d,m.data,m.size))&&e.call(n,d,m.data,m.size)}},Rk.prototype.forEach=Rk.prototype.forEach,Rk.prototype.na=function(e){var n;for(n in this.a){var r=this.a[n];(!e||e(n,r.data,r.size))&&Wk(this,this.a[n],!0)}},Rk.prototype.removeAll=Rk.prototype.na,Rk.prototype.ti=function(e){if(!(0<+e))throw new D(Rk.prototype.ti,0,e);return this.i=+e,Vk(this),this},Rk.prototype.setMaxSize=Rk.prototype.ti,Rk.prototype.Cm=function(){return this.i},Rk.prototype.getMaxSize=Rk.prototype.Cm,Rk.prototype.Xl=function(){return this.b},Rk.prototype.getCurrentSize=Rk.prototype.Xl,t("H.map.provider.Tile",Xk),t("H.math.simplifyDP",Zk),u(al,Xk),t("H.map.provider.SpatialTile",al),al.prototype.c=Xd,al.prototype.u=Xd,al.prototype.b=Xd,al.prototype.Ud=function(){var e=bl(this),n=e.a,r=this.b,d=r===n;return d||(this.U.qa&&!e.Vd(r)?d=!0:cl(this)&&(d=this.b===n)),d},al.prototype.isCanvasValid=al.prototype.Ud,Object.defineProperty(al.prototype,"valid",{get:function(){return this.Ud()},set:ld,configurable:!0}),al.prototype.f=hf,al.prototype.Ua=function(){return this.f},al.prototype.getObjects=al.prototype.Ua,al.prototype.$m=function(){return this.a},al.prototype.getTileSize=al.prototype.$m;var hl={};function jl(e,n,r,d,m,g,v,w,k){var j=e.a,G=-v;if(v=g+v,w=w||0,k===B&&(k=j.length),m&&e===Jh)n.fillRect(0,0,g,g);else if(k>w){for(n.beginPath(),g=w;g<k;g++){var q=j[g],_t=q.length;if(q===Qh)n.moveTo(G,G),n.lineTo(G,v),n.lineTo(v,v),n.lineTo(v,G);else{var _r=q[0];for(n.moveTo(_r.x,_r.y),w=1;w<_t;w++)n.lineTo((_r=q[w]).x,_r.y)}r&&n.closePath()}r&&m&&n.fill(e.b!==Wd?"evenodd":"nonzero"),d&&n.stroke()}}function il(e,n,r){var d;e.strokeStyle=n.strokeColor,e.lineWidth=n.lineWidth*r,e.lineCap=n.lineCap,e.lineJoin=n.lineJoin,e.miterLimit=n.miterLimit,e.setLineDash&&(d=n.lineDash)!==hf&&(e.setLineDash(d),e.lineDashOffset=n.lineDashOffset)}function kl(e,n){e.fillStyle=n.fillColor}function ll(e,n,r,d,m,g){var v=m*d.width/2,w=(m=m*d.length/2)/2;d=2*m*d.frequency;var k=Fd(Gd(m,2)+Gd(v,2));e=new yk(k,k,e=e.a-k,e);var j,G,q,_t,_r,_s,ga,_c=Pd/2;for(g=g||0,k=(r=r.a).length;k-- >g;){var _u=0,_f=r[k];if(G=j=_f.length){var _h=_f;for(G=_h.length,q=0;--G;)q+=_h[G].Wa(_h[G-1]);G=(_h=q)>=d}if(G)for(q=(G=_h/((G=yd(Bd(_h/d),1e3))+1))/2;--j;){for(_t=(_r=_f[j]).Wa(_s=_f[j-1]);q<=_u+_t;){var ad=_r.x+(_s.x-_r.x)*(ga=(q-_u)/_t);e.vf(ad,ga=_r.y+(_s.y-_r.y)*ga)&&(n.save(),n.translate(ad,ga),n.rotate(-Md((_s.y-_r.y)/(_r.x-_s.x))+(_r.x<_s.x?_c:-_c)),n.beginPath(),n.moveTo(-v,-m),n.lineTo(0,m),n.lineTo(v,-m),n.lineTo(0,-w),n.closePath(),n.fill(),n.restore()),q+=G}_u+=_t}}}al.prototype.Le=function(){var e=this.a+"_"+this.g,n=hl[e];if(!n){var r=this.a-(n=-this.m);n=hl[e]=new yk(n,n,r,r)}return n},al.prototype.getPxClipRect=al.prototype.Le,al.prototype.Hf=function(){var e=this.mb;if(!e){var n=this.Jf();e=0;var r=this.a;this.z&&(r-=e+=this.Le().top),e=this.mb=sg(n.Re(new J(e,e)),n.Re(new J(r,r)))}return e},al.prototype.getGeoClipRect=al.prototype.Hf,al.prototype.Jf=function(){var e=this.J;if(!e){var n=this.a;(e=this.J=new nj(B,n)).Oa(this.z),e.x=this.x*n,e.y=this.y*n}return e},al.prototype.getPxProj=al.prototype.Jf,al.prototype.Xa=function(){return this.g},al.prototype.getPixelRatio=al.prototype.Xa,al.prototype.gg=function(){var e=this.data;return e&&(this.data=null,this.b=Xd),e},al.prototype.releaseCanvas=al.prototype.gg,al.prototype.hg=function(){this.i={},delete this.f,this.c=Xd},al.prototype.releaseData=al.prototype.hg,al.prototype.W=function(e){var r,d,m,g,n=e.getContext("2d"),v=0;if(gl(this),this.b<this.c){var w=this.f;if(r=w.length){e.width=e.height=this.a,n.clearRect(0,0,this.a,this.a);var k=this.i;for(d=0;d<r;d++){var j=w[d],G=j.cb();if(g=(m=k[G])?m.b:j.getGeometriesForTile(this)){if(m)j.Kb().Vd(this.b)&&(m.a=Ih(j,g)),m=m.a;else{m=Ih(j,g);for(var q,_t=g,_r=j.g?2:0,_s=_t.length;_s--;){var ga=_t[_s];if(ga!==Jh){var _c=ga.a;for(q=_c.length;q--;)4<(ga=_c[q]).length&&(_c[q]=Zk(ga,.6,_r))}}this.i[G]=new fl(g,m)}if(m){for(n.save(),_t=j.g?this.D:this.P,G=0;G<g.length;G++)_t.call(this,j,g[G],j.V(),n);if(g=j.getLabels(this))for(j=n,G=g.length;G--;)for(j.font=(_t=(_r=g[G]).size)+"px "+_r.font,j.fillStyle=_r.color,j.textAlign="center",j.translate(_r.x,_r.y),j.rotate(_r.angle),_t=_r.lineHeight||1.375*_t,_r=(_s=_r.lines).length;_r--;)j.fillText(_s[_r],0,_r*_t);n.restore()}v|=+m}}}this.data=v?e:null,this.u=this.b=this.c}else this.data&&(v=1);return 0<v},al.prototype.render=al.prototype.W,al.prototype.data=null,al.prototype.P=function(e,n,r,d){var m;r.b&&(il(d,r,this.g),jl(n,d,!1,!0,!1,this.a,this.m)),r.a&&(m=e.c)&&m.Ob&&(kl(d,m),ll(this,d,n,m,r.lineWidth))},al.prototype.D=function(e,n,r,d){var v,m=r.Ob,g=r.b,w=this.a,k=this.m;if(n===Jh)m&&(kl(d,r),d.fillRect(0,0,w,w));else{if(g&&il(d,r,this.g),r.a&&(v=e.c)){var j=r.lineWidth;v.Ob||(v=null)}(e=n.c)===Wd?((g||m)&&(kl(d,r),jl(n,d,!0,g,m,w,this.m)),v&&(kl(d,v),ll(this,d,n,v,j,0))):(m&&(kl(d,r),jl(n,d,!0,!1,m,w,k,0,e)),g&&jl(n,d,!1,g,!1,w,k,e),v&&(kl(d,v),ll(this,d,n,v,j,e)))}};var ml=[];function nl(e,n){var r;nl.j.constructor.call(this,n),this.D=e,this.P=e=n.pixelRatio,this.tileSize=r=1<<Ad(Yd((n.tileSize||256)*e)),this.L=Pk(r,e),this.Gh=A(this.Gh,this),this.Wh=A(this.Wh,this),this.Hh=A(this.Hh,this),this.Fh=A(this.Fh,this),this.m=A(this.m,this),this.D.addEventListener(P.prototype.A.za,this.m,!1,this),this.f=[],this.i=new Rk(n.tileCacheSize||256,this.Gh),this.l=new Rk(n.dataCacheSize||512,this.Wh),this.J=new Mk(20,this.Hh),this.c={},this.u=Lk()}function yk(e,n,r,d){this.left=+e,this.top=+n,this.right=+r,this.bottom=+d}function ol(e,n){return new yk(e.x,e.y,n.x,n.y)}function pl(e,n){if(n=n||{},!e)throw new D(pl,0,e);this.tileSize=e.tileSize,this.a={},qj.call(this,{min:void 0!==n.min?n.min:e.min,max:void 0!==n.max?n.max:e.max,minWorldSize:this.tileSize,projection:n.eg,dark:n.dark,provider:e})}function ql(e,n,r,d,m){d=Bd(d);var g=Gd(2,d),v=n.left,w=n.top,k=n.right;r=k+(r?g+(k===n.left?0:1):1);var j=n.bottom,G=[];if(m)var q=v+(1+k-v)/2+m.x/e.tileSize-.5,_t=w+(1+j-w)/2+m.y/e.tileSize-.5;for(;v<r;){for(w=n.top;w<=j;)G.push([e=v%g,w,d,m?Dd(q-v)+Dd(_t-w):0]),w++;v++}return G}function Bk(e,n,r){r=Bd(r),e.pixelProjection.Oa(r),n=e.Ae(n);var d=e.Sd(n,r);return ql(e,d,n.left>n.right,r)}function rl(e,n){return n[3]-e[3]}function sl(e,n){pl.call(this,e,n)}function tl(e,n){(n=n?Wa(n):{}).tileSize=n.tileSize||256,n.pixelRatio=n.pixelRatio||Ue(),n.max=24,this.a=new nl(e,n),this.b=new sl(this.a),n.minWorldSize=this.a.tileSize,n.provider=e,tl.j.constructor.call(this,n),this.tileSize=this.b.tileSize,this.c=A(this.c,this),this.a.addEventListener(this.a.A.za,this.c),e.addEventListener(e.A.za,this.c)}al.prototype.Ea=function(e,n,r){for(var g,v,w,k,j,G,_t,d=this.f,m=d.length,q=hf,_r=this.g;m--;)if((v=d[m]).wc(!0)&&(w=this.i[v.cb()])&&(k=w.b)){for(G="none"!==(g=v.V()).fillColor&&v.g,_t="none"===g.strokeColor?0:g.lineWidth*_r,g=k.length;g--;){var _s;if(j=k[g],!(_s=G&&j===Jh)&&(_s=G||_t)){var ga;_s=e;var _c=n,_u=G,_f=_t,_h=j.b,ad=j.c,ey=ad!==Wd,sy=j.a,ly=sy.length,dy=0,vy=0,Ay=!1;for(j=0;j<ly;j++){var Sy=sy[j],jy=j>=ad,Qy=!jy&&j>=_h;if(Sy===Qh&&_u)Qy?dy++:vy++;else{var Ny=Sy.length;for(ml.length=2*Ny,ga=0;ga<Ny;ga++){var P_=Sy[ga];ml[2*ga]=P_.x,ml[2*ga+1]=P_.y}if(ga=_u&&!jy,jy=ey&&!jy?0:_f,ga||jy){if((jy=ee(_s,_c,ml,jy,ga))===de.EDGE||jy===de.VERTEX){Ay=!0;break}if(jy===de.SURFACE)if(Qy)dy++;else if(vy++,_h===Wd)break}}}_s=Ay||0<vy&&!(dy%2)}if(_s){q===hf&&(q=[]),q.push(v);break}}if(r&&q.length)break}return q},u(nl,Ok),nl.prototype.m=function(e){(e=e.target).type===nh.SPATIAL&&this.Va(e)},nl.prototype.Ha=function(e,n,r,d){var g,m=this.getTileKey(e,n,r);if(g=this.i.get(m,d)){if(d||g.Ud())return g;d||this.i.zf(m)}if((g=this.l.get(m,d))&&(d||cl(g)))return e=this.f.pop()||document.createElement("canvas"),g.W(e)||this.f.push(e),this.i.add(m,g,1),g;d||((g=this.c[m])?g.count++:((g=this.J.push([m,e,n,r],this.Fh)).count=1,this.c[m]=g))},nl.prototype.requestTile=nl.prototype.Ha,nl.prototype.ac=function(){},nl.prototype.createTileInternal=nl.prototype.ac,nl.prototype.mc=function(e,n,r){this.pe(this.getTileKey(e,n,r))},nl.prototype.cancelTile=nl.prototype.mc,nl.prototype.pe=function(e){var n;(n=this.c[e])&&(n.count--,n.count||(n.cancel(),delete this.c[e]))},nl.prototype.cancelTileByKey=nl.prototype.pe,p=nl.prototype,p.Hh=function(e,n){var r=n[0],d=n[1],m=n[2],g=n[3];d=(r=this.i.get(r)||new al(r,d,m,g,this.tileSize,this.P,g+this.L,this.D)).data||this.f.pop()||document.createElement("canvas"),r.W(d)||this.f.push(d),n.push(r),e.done(r)},p.Fh=function(e,n){e=e.data[0],n&&this.i.add(e,n,1),delete this.c[e],this.Va()},p.Gh=function(e,n){n.data&&this.f.push(n.gg()),this.l.add(e,n,1)},p.Wh=function(e,n){n.hg()},p.o=function(){for(var e in this.c)this.c[e].cancel();this.i.na(),this.l.na(),this.f.length=0,nl.j.o.call(this)},t("H.math.Rect",yk),yk.prototype.set=yk,yk.prototype.set=yk.prototype.set,yk.prototype.Nb=function(){return this.b||(this.b=new J(this.left,this.top))},yk.prototype.getTopLeft=yk.prototype.Nb,yk.prototype.Jb=function(){return this.a||(this.a=new J(this.right,this.bottom))},yk.prototype.getBottomRight=yk.prototype.Jb,yk.prototype.vf=function(e,n){return this.left<=e&&this.right>=e&&this.top<=n&&this.bottom>=n},yk.prototype.containsXY=yk.prototype.vf,yk.fromPoints=ol,yk.prototype.clone=function(){return new yk(this.left,this.top,this.right,this.bottom)},yk.prototype.clone=yk.prototype.clone,u(pl,qj),t("H.map.layer.BaseTileLayer",pl),pl.prototype.Ae=function(e,n){var r=this.pixelProjection;if(!C(e,K))throw new D(this.Ae,0,e);if(!E(n)){var d=r.Jj();r.Oa(n)}return e=ol(r.ib(e.Nb()),r.ib(e.Jb())),!E(d)&&r.Oa(d),e},pl.prototype.geoRectToRect=pl.prototype.Ae,pl.prototype.Sd=function(e,n){var r=Gd(2,Bd(n)),d=this.tileSize;if(!C(e,yk))throw new D(this.Sd,0,e);if(E(n=+n))throw new D(this.Sd,1,n);(n=Bd(e.left/d))===r&&--n;var m=Bd(e.right/d);return m===r&&--m,new yk(n,ae(Bd(e.top/d),0,r-1),m,ae(Bd(e.bottom/d),0,r-1))},pl.prototype.getTileBounds=pl.prototype.Sd,pl.prototype.Ha=function(e,n,r,d){return this.ma.requestTile(e,n,r,d)},pl.prototype.requestTile=pl.prototype.Ha,pl.prototype.mc=function(e,n,r){this.ma.cancelTile(e,n,r)},pl.prototype.cancelTile=pl.prototype.mc,pl.prototype.ba=function(e,n){return this.ma.getCopyrights?this.ma.getCopyrights(e,n):null},pl.prototype.getCopyrights=pl.prototype.ba,pl.prototype.Ke=function(e,n,r,d,m,g){var v,k,w=[],j=this.ma;g=g??"__default__";var G=j.requestTile;if(!C(e,yk))throw new D(this.Ke,0,e);if(E(r=+r))throw new D(this.Ke,1,r);if(d||(v={}),e=(n=ql(this,e,n,r,m)).length)for(d||n.sort(rl),r=e;r--;)m=n[r],d||(v[j.uc.apply(j,m)]=!0),m[3]=+d,(k=G.apply(j,m))&&w.push(k);if(!d){var q;for(q in d=v,v=this.a[g]||{})v.hasOwnProperty(q)&&v[q]&&!d[q]&&this.ma.cancelTileByKey(q);this.a[g]=d}return{total:e,tiles:w}},pl.prototype.getProviderTiles=pl.prototype.Ke,u(sl,pl),t("H.map.layer.TileLayer",sl),sl.prototype.td=function(e,n,r,d,m){if(!C(e,K))throw new D(this.td,0,e);if(E(n=+n))throw new D(this.td,1,n);n=Bd(n),this.pixelProjection.Oa(n),e=this.Ae(e);var g=this.Sd(e,n);return this.Ke(g,e.left>e.right,n,r,d,m)},sl.prototype.requestTiles=sl.prototype.td,u(tl,qj),t("H.map.layer.ObjectLayer",tl),tl.prototype.c=function(e){e.currentTarget!==this.a&&e.target.type===nh.SPATIAL||this.Va()};var ul={markers:hf,total:0};tl.prototype.Ec=function(e,n,r){var m,d=this.ma;return d.providesMarkers()&&(m=d.requestMarkers(e,n,!0,r)).length?{markers:m,total:m.length}:ul},tl.prototype.requestMarkers=tl.prototype.Ec,tl.prototype.Dc=function(e,n,r){var m,d=this.ma;return d.providesDomMarkers()&&(m=d.requestDomMarkers(e,n,!0,r)).length?{markers:m,total:m.length}:ul},tl.prototype.requestDomMarkers=tl.prototype.Dc;var vl={tiles:hf,total:0};tl.prototype.td=function(e,n,r,d){if(this.ma.providesSpatials()){var m=this.b.td(e,n,r,d);r||(r=this.a,33<(m=Lk())-r.u&&(Fk(r.J),r.u=m),m=this.b.td(e,n,!0,d))}else m=vl;return m},tl.prototype.requestTiles=tl.prototype.td,tl.prototype.Ha=function(e,n,r,d){return this.b.Ha(e,n,r,d)},tl.prototype.requestTile=tl.prototype.Ha,tl.prototype.mc=function(e,n,r){this.b.mc(e,n,r)},tl.prototype.cancelTile=tl.prototype.mc;var wl={overlays:hf,total:0};function S(e){xc(this,S),S.j.constructor.call(this,e),this.sb=new xl,this.ub=A(this.ub,this),this.P=yl,this.createTileInternal=this.ac.bind(this)}tl.prototype.sd=function(e,n,r){var d=this.ma,m=wl;return d.providesOverlays&&d.providesOverlays()&&(n=(e=d.requestOverlays(e,n,!0,r)).length)&&(m={overlays:e,total:n}),m},tl.prototype.requestOverlays=tl.prototype.sd,tl.prototype.o=function(){this.a.F(),this.b.F(),this.ma.dispose(),tl.j.o.call(this)},u(S,Ok),t("H.map.provider.RemoteTileProvider",S),S.prototype.em=function(){return 1},S.prototype.getEntryWeight=S.prototype.em;var yl,zl=screen.width,Al=screen.height,Bl=Ue();Bl=zd(Bl,1);var Cl=Cd(zl*Bl*Al*Bl/1e6);yl=new Rk(Gd(2,zd(8,yd(12,7+Cl))));var Dl={},El={};function Ck(e,n,r,d,m,g){return e.requestInternal(n,r,d=~~d,function(v,w){e.c().put(e.uc(n,r,d),{raw:w&&w.raw||v,timestamp:x.Date.now()},m,g)},g,0)}function Gl(e){delete Dl[e],delete El[e]}function Fl(e){for(var n in Dl)e.ub(n)&&e.cancelTileByKey(n)}S.prototype.nb=function(){return this.P},S.prototype.getCache=S.prototype.nb,S.prototype.J=ba(3),S.prototype.ub=function(e){var n=this.uri;return!e.indexOf(n)&&"_"===e.charAt(n.length)},S.prototype.cacheFilter=S.prototype.ub,S.prototype.wa=function(e,n){n.valid=!1},S.prototype.reload=function(e){var n=this.getCache();e?n.na(this.ub):n.forEach(this.wa,this,this.ub),Fl(this),this.Va(this,{isReload:!0})},S.prototype.reload=S.prototype.reload,S.prototype.l=function(){return!1},S.prototype.MAX_STORE_TIME=1/0,S.prototype.c=function(){return this.sb},S.prototype.ea=function(e,n){n(e)},S.prototype.requestInternal=S.prototype.B,S.prototype.Ha=function(e,n,r,d){var m=this,g=this.getCache();if(E(e=+e))throw new D(this.Ha,0,e);if(E(n=+n))throw new D(this.Ha,0,n);if(E(r=+r))throw new D(this.Ha,0,r);var v=this.getTileKey(e,n,r=~~r);return(g=g.get(v))&&g.valid||d||Dl[v]||(g=B,this.requestTileAsPromise(e,n,r,d).then(function(w){m.Va(w)},ld)),g},S.prototype.requestTile=S.prototype.Ha,S.prototype.Gk=function(e,n,r,d){var w,k,m=this,g=this.getCache(),v=this.getTileKey(e,n,r),j=this.c();return El[v]?El[v]:(El[v]=w=new Rb(function(G,q){function _t(_r){var ga,_s=0,_c=function(_u,_f){(ga=m.createTileInternal(e,n,r,_u,_f)).key=v,g.add(v,ga,1),G(ga),Gl(v)};_r&&(_s=x.Date.now()-_r.timestamp),_r&&_s<m.MAX_STORE_TIME?m.ea(_r.raw,_c):(0<_s&&j.remove(v),(ga=g.get(v))&&ga.valid||d?G(ga||null):Dl[v]=m.requestInternal(e,n,r,_c,q))}k=j.get(v,_t,_t)}),Dl[v]||(Dl[v]=k),w.then(function(){Gl(v)},function(){Gl(v)}),w)},S.prototype.requestTileAsPromise=S.prototype.Gk,S.prototype.Fk=function(e,n){var r=this,d=e.id,m=e.tile.coords;return new Rb(function(g,v){r.Gk(m.x,m.y,m.z,n).then(function(w){for(var G,k=z,j=(w=w.Ua?w.Ua():w.data).length;j--;)if((G=w[j]).cb()===d){k=G;break}g(k)},v)})},S.prototype.requestObjectAsPromise=S.prototype.Fk;var Hl={cancel:ld};function xl(){}function Ek(e){var n;if(Ek.j.constructor.call(this,e),e&&(this.u={crossOrigin:e.crossOrigin||"anonymous",headers:e.headers||{}},this.m=e.getURL),this.b===kk.HARP&&H.map.render.harp&&(n=e&&e.style&&e.style instanceof H.map.render.harp.Style?e.style:new H.map.render.harp.Style({styles:[{technique:"raster",attr:{gamma:1,brightness:1}}]}),this.Qa(n)),!Da(this.m))throw new D(Ek,0,"getURL");if(lk(this,e.opacity),this.f=x.URL||x.webkitURL,!(e="anonymous"===(e=this.u.crossOrigin)||"use-credentials"===e)){e=this.m(0,0,0),n=window.location;var r=document.createElement("a");r.href=e,e=r.hostname===n.hostname&&r.port===n.port&&r.protocol===n.protocol}(this.T=e&&!!uf.arraybuffer&&!!this.f)&&this.nb().$d(A(this.aa,this))}S.prototype.ac=function(e,n,r,d){return new Xk(e,n,r,d)},S.prototype.createTileInternal=S.prototype.ac,S.prototype.pe=function(e){var n=Dl[e];n&&(n.cancel(),Gl(e))},S.prototype.cancelTileByKey=S.prototype.pe,S.prototype.mc=function(e,n,r){this.cancelTileByKey(this.getTileKey(e,n,r))},S.prototype.cancelTile=S.prototype.mc,S.prototype.o=function(){S.j.o.call(this),this.getCache().na(this.ub),Fl(this)},S.NullStorage=xl,xl.prototype.get=function(e,n){return n(),Hl},xl.prototype.get=xl.prototype.get,xl.prototype.put=function(e,n,r){r&&r()},xl.prototype.put=xl.prototype.put,xl.prototype.clear=function(e){e&&e()},xl.prototype.clear=xl.prototype.clear,xl.prototype.remove=function(e,n){n&&n()},xl.prototype.remove=xl.prototype.remove,u(Ek,S),t("H.map.provider.ImageTileProvider",Ek),Ek.prototype.ic=function(e){lk(this,e)},Ek.prototype.setOpacity=Ek.prototype.ic,Ek.prototype.Tc=function(){return this.g},Ek.prototype.getOpacity=Ek.prototype.Tc,Ek.prototype.Ve=ff,Ek.prototype.providesRasters=Ek.prototype.Ve,Ek.prototype.B=function(e,n,r,d,m,g){var k,v=this,w=this.m(e,n,r);if(e=Hl,w){var j=x.setTimeout(function(){v.T?(k=new tf("arraybuffer",w,g,v.u)).then(function(G){return G.blob()}).then(function(G){var q=new Image;q.onload=A(d,null,q,{raw:G}),q.onerror=A(m,null,"bad url");try{q.src=v.f.createObjectURL(G)}catch{}},m):(k=new tf("image",w,g,v.u)).then(d,m)},150);e={cancel:function(){k?k.cancel():x.clearTimeout(j)}}}else d(null);return e},Ek.prototype.requestInternal=Ek.prototype.B,Ek.prototype.ea=function(e,n){var r=new Image;r.onload=function(){n(this)},r.src=this.f.createObjectURL(e)},Ek.prototype.aa=function(e,n){(e=n.data)&&e instanceof HTMLImageElement&&this.f.revokeObjectURL(e.src)},Ek.prototype.V=function(){return this.Ya()},Ek.prototype.getStyle=Ek.prototype.V,Ek.prototype.gb=function(e){H.map.render.harp&&this.b===kk.HARP&&e instanceof H.map.render.harp.Style&&this.Qa(e)},Ek.prototype.setStyle=Ek.prototype.gb,t("H.util.events.listenOnce",Fe),t("H.util.events.dispatchEvent",function(e,n){return e.dispatchEvent(n)}),t("H.util.events.fireListeners",function(e,n,r,d){return pe(e)?e.jd(n,r,d):Oe(e,n,r,d)}),t("H.util.events.listen",Ee),t("H.util.events.unlisten",Me);var Il=Pe;function Jl(e,n,r,d){var m=new yk(0,0,0,0);if(Jl.j.constructor.call(this),!e)throw new D(Jl,0,e);if(!n)throw new D(Jl,1,n);if(!r)throw new D(Jl,2,r);if("object"!=typeof d)throw new D(Jl,3,d+" is not an object");if("number"!=typeof d.pixelRatio)throw new D(Jl,3,d.pixelRatio+" is not a number");this.oa=d.pixelRatio,this.zoom=0,this.fb=Ed(this.oa)/Od,this.b=new nj,this.wa={1:m.clone(),2:m.clone(),4:m.clone()},this.s=new J(.5,.5),this.f=e,Kl(this,this.oa),this.lc=A(this.lc,this),this.cc=A(this.cc,this),this.wb=A(this.wb,this),e.startInteraction=this.lc,e.interaction=this.cc,e.endInteraction=this.wb,e.addEventListener(e.A.za,this.T,!1,this),this.getCapabilities=this.getCapabilities,this.capture=this.capture,this.zoomAt=this.xd,this.relaunch=this.ha,this.dispose=this.F,this.screenToGeo=this.Pa,this.geoToScreen=this.Da,this.screenToLookAtData=this.qg,this.J=n,this.kc=A(this.kc,this),this.control=A(this.control,this),this.vb=A(this.vb,this),n.startControl=this.kc,n.control=this.control,n.endControl=this.vb,n.addEventListener(n.A.za,this.Kg,!1,this),this.c=r,this.Zf=A(this.Zf,this),this.Me=A(this.Me,this),this.Ne=A(this.Ne,this),this.Yf=A(this.Yf,this),r.addEventListener(qj.prototype.A.za,this.Zf,!1,this),r.addEventListener(r.A.he,this.Me,!1,this),r.addEventListener(r.A.je,this.Ne,!1,this),r.addEventListener(r.A.ke,this.Yf,!1,this)}function Kl(e,n){var r=e.f,d=r.width,m=r.height,g=r.padding,v=g.top,w=g.left,k=g.bottom,j=-(d+w-(g=g.right))/2<<0,G=-(m+v-k)/2<<0;(e=e.wa)[1].set((j-(r=r.margin))*n,(G-r)*n,((d+=j)+r)*n,((m+=G)+r)*n),e[2].set(j*n,G*n,d*n,m*n),e[4].set((j+w)*n,(G+v)*n,(d-g)*n,(m-k)*n)}function Ml(e,n){e.style.transition="opacity 1.5s",Fe(e,"transitionend",n,!1),e.style.opacity=0}Pe=function(e,n){var r,d,m=!0,g=n[n.currentTarget===n.target?"AT_TARGET":e.capture?"CAPTURING_PHASE":(r=!0,"BUBBLING_PHASE")];return(!r||"pointerenter"!==(d=n.type)&&"pointerleave"!==d)&&(n.eventPhase=g,m=Il(e,n),r&&e.src&&e.src.Mb&&null===e.src.Mb()&&delete n.eventPhase),m},u(Jl,F),t("H.map.render.RenderEngine",Jl),Jl.prototype.xd=function(){},Jl.prototype.T=function(){Kl(this,this.oa)},Jl.prototype.o=function(){var e=this.f,n=this.J,r=this.c;e.removeEventListener(e.A.za,this.T,!1,this),e.startInteraction===this.lc&&(e.startInteraction=xk.prototype.lc),e.interaction===this.cc&&(e.interaction=xk.prototype.cc),e.endInteraction===this.wb&&(e.endInteraction=xk.prototype.wb),n.removeEventListener(n.A.za,this.Kg,!1,this),n.startControl===this.kc&&(n.startControl=Ll.prototype.kc),n.control===this.control&&(n.control=Ll.prototype.control),n.endControl===this.vb&&(n.endControl=Ll.prototype.vb),r.removeEventListener(qj.prototype.A.za,this.Zf,!1,this),r.removeEventListener(r.A.he,this.Me,!1,this),r.removeEventListener(r.A.je,this.Ne,!1,this),r.removeEventListener(r.A.ke,this.Yf,!1,this)},Jl.prototype.mi=function(e){this.me=e},Jl.prototype.setAnimationCallback=Jl.prototype.mi,Jl.prototype.hi=function(){this.me=void 0},Jl.prototype.resetAnimationCallback=Jl.prototype.hi,Jl.prototype.control=function(){},Jl.prototype.capture=function(){return $b(Error("not implemented"))};var Nl={ZOOM:1,HEADING:2,TILT:4,INCLINE:8,COORD:16};function Ql(e,n){return n.tilt=Rl(e,n.tilt),n.heading=Sl(e,n.heading),n.incline=e.getCapabilities().lookAt.incline.min,n}function Pl(e,n){var r=e.getCapabilities().lookAt.zoom;return ae(n,zd(r.min,e.Eg),yd(r.max,e.Dg))}function Rl(e,n){return ae(n,(e=e.getCapabilities().lookAt.tilt).min,e.max)}function Sl(e,n){return ae((n%360+360)%360,(e=e.getCapabilities().lookAt.heading).min,e.max)}function Ol(e,n,r){(r=r?n.addEventListener:n.removeEventListener).call(n,n.A.Ti,e.Yh,!1,e),r.call(n,n.A.Si,e.Yh,!1,e)}Jl.InteractionModifiers=Nl,p=Jl.prototype,p.A={Vi:"render"},p.Zf=function(e){this.nk(e),this.ha()},p.Me=function(e){this.Pe(e.idx,e.added)},p.Ne=function(e){this.Xh(e.idx,e.removed,e.type===this.c.A.ke)},p.Yf=function(e){e.removed&&this.Ne(e),this.Me(e)},p.nk=ld,p.Pe=function(e,n){this.th(e,n),0===e&&this.Eb(),C(n,qj)&&Ol(this,n,!0),this.ce(),this.ha()},p.Eb=function(){var e=this.c.La();if(0<e.length){var n=e[0].max;this.Eg=e[0].min,this.Dg=n}else n=(e=this.getCapabilities().lookAt.zoom).max,this.Eg=e.min,this.Dg=n;(e=Pl(this,this.zoom))!==this.zoom&&(this.zoom=e,this.b.Oa(e),this.$a())},p.$a=function(e){this.P=this.jb(),e&&(this.P.position=e),this.P.zoom=this.zoom-this.fb,this.P.position.alt=0},p.dl=0,p.heading=180,p.jb=function(){return Ql(this,{position:this.b.projection.dg(this.s),zoom:this.zoom,tilt:this.dl,heading:this.heading})},p.th=ld,p.Xh=ld,p.xo=function(e,n){this.D={before:e,after:n}},Jl.prototype.setOnRenderCallbacks=Jl.prototype.xo;var Tl={P2D:0,WEBGL:1,HARP:2};Jl.EngineType=Tl;var Ul={lookAt:{zoom:{min:-8,max:24},tilt:{min:0,max:85},incline:{min:0,max:0},heading:{min:0,max:360}},interaction:{ZOOM:Nl.ZOOM,COORD:Nl.COORD},capture:!0};function Vl(e){var n,r=this,d=x.H.gl;Vl.j.constructor.call(this),this.a=n=d.Scene.create(x.URL.createObjectURL(pf(JSON.stringify(Wl))),{viewport:e.viewport,container:e.Zb,disableRenderLoop:!0,devicePixelRatio:e.devicePixelRatio,logLevel:"error"}),e.ao&&n.subscribe({load:e.ao}),n.subscribe({view_complete:function(){r.ji=!0,e.qk()}});var m=n.requestRedraw;n.requestRedraw=function(){m.apply(n),e.qk()},this.ki=A(this.ki,this),this.jg=A(this.jg,this),this.f=0,this.c={},this.b={}}function Xl(e){var n;for(n in e=e.a.sources){var r=e[n];if(r.hasPendingCommands&&r.hasPendingCommands())return!0}return x.H.gl.Task.hasPendingTasks()}function Yl(e){e.ji=!1,e.a.resetViewComplete()}function Zl(e){return e.a.view}function $l(e,n){function r(){var w,k,j,q,_t,m=n.La(),g={},v={},G=++e.f;for($h(v,Wl),k=0;k<m.length;k++){var _r=m[k];if(w=_r.ca()){var _s=w.Ya();if(_s.getState()===Xh.READY){var ga=_s.qc();if(!Va(ga)){for(j in delete ga.cameras,delete ga.camera,g[k]=ga=li(ga,k),!C(_r,tl)&&ga.sources&&mi(ga,w.uid),ga.sources){var _c=ga.sources[j];_c.max_zoom=yd(w.max,Ul.lookAt.zoom.max),_c.max_display_zoom=_r.max,_c.min_display_zoom=_r.min,(_t=w.tileSize)&&(2<=d&&256<_t&&w instanceof Ek&&(_t/=2),_c.tile_size=_t)}(q=_s.Ib())&&ni(ga,q),$h(v,ga)}}}}return $h(v.layers.skybox.draw.skybox.color,v.scene.sky),e.a.config=v,e.a.updateConfig().then(function(){var _f,_h,_u={};if(G!==e.f)return!1;for(_h in e.f=0,g){_r=m[+_h];var ad=g[_h].sources;for(_f in ad)(ad=e.a.sources[_f])&&(_u[_f]=ad,ad.initialize&&_r.getProvider()&&ad.initialize(_r.getProvider(),e.ki,e.a.getWorkers().length,ad.tiled?B:e.a.tile_manager.getWorkerForTile(z,ad)))}for(_f in e.c)!_u[_f]&&e.c[_f].dispose&&e.c[_f].dispose();return e.c=_u,!0})}var d=e.a.pixelRatio();e.a.initialized?r():e.a.load(z,{blocking:!1}).then(r)}function am(e,n){var r=e.a.tile_manager;r.removeTiles(e.jg),r.updateTilesForView(),n&&r.removeCachedTiles(e.jg),Yl(e),e.b={}}function bm(e,n,r,d){e.a.getFeatureAt(n,r,d),e.a.update()}function cm(e){return e.a.screenshot(void 0).then(function(n){return new Rb(function(r,d){new Rj(URL.createObjectURL(n.blob),function(m,g){1===m?r(g.getData()):d()},!1)})})}t("H.map.render.webgl.capabilities",Ul),u(Vl,qd),p=Vl.prototype,p.ji=!1,p.W=function(){var e=x.H.gl.Task;return this.a.immediateRedraw(),e.setState({user_moving_view:this.a.view.user_input_active}),e.processAll(),this.ji&&!this.a.dirty&&!this.a.building&&!Xl(this)&&!Object.keys(this.b).length},p.ki=function(e,n,r){var d=this,m=this.a.sources[e],g=r&&r.isReload;n?!0!==this.b[e]&&(this.b[e]||(this.b[e]={cl:{},aj:[]}),C(n,Xk)?this.b[e].cl[n.x+"/"+n.y+"/"+n.z]=!0:this.b[e].aj.push(new K((n=n.boundingBox)[0],n[1],n[2],n[3]))):this.b[e]=!0,m&&m.has_volatile_data?am(this,g):(x.clearTimeout(this.g),this.g=x.setTimeout(function(){return am(d,g)},100))},p.jg=function(e){var n=!1,r=this.b[e.source.name],d=x.H.gl;if(r)if(!0===r)n=!0;else{var m=d.Tile.coord(d.Geo.wrapTile(e.coords));if(!(n=!!r.cl[m.key])){var g=d.Geo.getTileBoundingBox(m,e.source.tile_size,wh.MAX_LINE_WIDTH/2);g=sg(g.getTopLeft(),g.getBottomRight()),n=r.aj.some(function(v){return v.nd(g,!0)||g.gd(v.bb(),!0)})}}return n},p.qc=function(){return this.a.config},p.Xa=function(){return this.a.pixelRatio()},p.o=function(){var e=this.c;Vl.j.o.call(this),this.a.destroy(),this.b={},e&&Object.keys(e).forEach(function(n){e[n].dispose()}),x.clearTimeout(this.g),delete this.c,delete this.a},Vl.prototype.disposeInternal=Vl.prototype.o;var Wl={scene:{background:{color:"#FFFFFF"},sky:{zenith:"#347BC0",horizon:"#EDF2F9",fog:"#FFFFFF"}},lights:{default_light:{type:"directional",name:"default_light",visible:!0}},camera:{type:"perspective"},styles:{},fonts:{},sources:{skybox:{type:"SkyBox"}},layers:{skybox:{data:{source:"skybox"},draw:{skybox:{color:{}}}}},global:{}},nk={FEATURE:1,SOURCE:2,PROVIDER:3};function dm(e){return e}function em(e){return-e*(e-2)}function fm(e){return 1-Math.sqrt(1-e*e)}function gm(e){return Fd(2*e-e*e)}function hm(e){return 1-Math.cos(e*Math.PI/2)}function im(e){return Math.sin(e*Math.PI/2)}function jm(e,n){this.a={tilt:km(e.tilt,n.tilt),heading:km(e.heading,n.heading),zoom:n.zoom-e.zoom};var r=this.b=ng(e.position),d=n.position;e=d.lat*Ud;var m=r.lat*Ud;r=Id(d=d.lng*Ud-r.lng*Ud)*Kd(e),e=Kd(m)*Id(e)-Id(m)*Kd(e)*Kd(d),e=Math.atan2(r,e),this.i=(0<=e?e:Sd+e)*Vd,this.c=this.b.Wa(n.position),this.g=0===(n=this.a.zoom)?lm:Object.assign({},lm,{zoom:0>n?gm:fm,position:0>n?hm:im}),this.f=Object.assign({},{tilt:0,heading:0,zoom:0})}function km(e,n){return-180<(e=n-e)&&180>=e?e:180<e?e-360:e+360}t("H.map.provider.PickingMode",nk),t("H.util.animation.ease.LINEAR",dm),t("H.util.animation.ease.EASE_IN_QUAD",function(e){return e*e}),t("H.util.animation.ease.EASE_OUT_QUAD",em),t("H.util.animation.ease.EASE_IN_OUT_QUINT",function(e){return 1>(e*=2)?Gd(e,5)/2:Gd(e-=2,5)/2+1}),t("H.util.animation.ease.EASE_OUT_CIRC",gm);var lm={tilt:dm,heading:dm,zoom:dm,position:dm};function mm(e,n){if(E(this.x=+e))throw new D(mm,0,e);if(E(this.y=+n))throw new D(mm,1,n)}function nm(e){return Fd(e.a(e))}function om(e){this.mb=vc((e=e||jf).Wn)?e.Wn:3,this.U=vc(e.Un)?e.Un:300,this.u=vc(e.No)?e.No:3,this.J=vc(e.Io)?e.Io:50,this.c=[],this.clear()}function rm(e,n){e.g^=e.g&n}mm.prototype.add=function(e){return new mm(this.x+e.x,this.y+e.y)},mm.prototype.a=function(e){if(!C(e,mm))throw new D(this.a,0,e);return(e=this.b(e)).x+e.y},mm.prototype.b=function(e){if(!C(e,mm))throw new D(this.b,0,e);return new mm(this.x*e.x,this.y*e.y)},mm.prototype.Oa=function(e){return new mm(this.x*e,this.y*e)},t("H.map.render.InteractionUtils",om),om.prototype.tn=function(){return this.b},om.prototype.isGestureDetected=om.prototype.tn,om.prototype.start=function(e,n){var r=Nl.HEADING,d=Nl.TILT;this.s&&this.clear(),this.g=e,this.l=!!n,this.s=!0,this.b=!(e&(r|d))||e===r||e===d},om.prototype.start=om.prototype.start,om.prototype.store=function(e,n,r,d,m){var g=!1;if(this.s){if(g=(e=new pm(e,n,r,d,m)).c,this.m=this.a,this.a=e,this.f){if(this.i=!0,g){n=this.g;var v=this.b;if(!v&&this.i){m=Nl.HEADING;var w=Nl.TILT;d=Nl.ZOOM;var k=n&((r=Nl.COORD)|w)?this.Nd(!0):qm,j=n&d?this.Cf(!0):1,G=n&m?Dd(this.bh(!0)):0,q=Dd(k.x),_t=Dd(k.y);k=10<q||10<_t,q=10<_t&&_t>3*q,j=.8>j||1.2<j,G=7<G,n&w&&(G||j||k&&!q?rm(this,w):q&&(rm(this,~w>>>0),v=!0)),!v&&n&m&&n&(r|d)&&(j||k?(rm(this,m),v=!0):G&&(rm(this,w),v=!0)),this.b=v}}}else this.f=e,g||(this.b=!0);this.l&&this.c.push(e)}return g},om.prototype.store=om.prototype.store,om.prototype.clear=function(){this.c.length=0,this.s=this.l=this.i=this.b=!1,this.f=this.m=this.a=void 0},om.prototype.clear=om.prototype.clear,om.prototype.Ac=function(e){return 0<(this.g&e)},om.prototype.isModifierEnabled=om.prototype.Ac,om.prototype.sa=function(){return this.s},om.prototype.isRunning=om.prototype.sa;var qm=qc(new mm(0,0));function pm(e,n,r,d,m){this.a=new J(e,n),r!==B&&(this.b=new J(r,d),this.c=!0),this.timestamp=m!==B?m:Lk()}function tm(e){var n=e.a;return(e=e.b)?new J(n.x-(n.x-e.x)/2,n.y-(n.y-e.y)/2):B}function vm(e,n){var r=e.a;return(e=e.b)&&e.Wa(n)<r.Wa(n)?e:r}function sm(e,n){var r=e.b,d=n.b;return d&&r?(n=tm(n),e=tm(e)):r?e=vm(e,n=n.a):d?n=vm(n,e=e.a):(n=n.a,e=e.a),new mm(n.x-e.x,n.y-e.y)}function um(e){var n=e.b;return n?e.a.Wa(n):0}function wm(){F.call(this),this.reset()}function ym(e){ym.j.constructor.call(this,wm.prototype.A.Cg),this.b=e}function zm(e){return x.Object.create(e.f)}function xm(e,n,r,d,m,g){this.a=e,this.b=n,this.c=r,this.f=d,this.g=m,this.i=g}function Am(e,n,r,d){Am.j.constructor.call(this),this.Zb=e,this.oa=d,this.a=e.appendChild(this.createElement(e.ownerDocument)),this.cf(n,r)}function Bm(e,n,r,d,m,g){var v=m||"2d";Bm.j.constructor.apply(this,arguments),this.b=this.a.getContext(v,g),this.c="2d"===v,this.g=v,this.In=g}function Cm(e){this.eb=e}function Dm(e){var n="dom";Dm.j.constructor.call(this,e),C(this.eb,Em)&&(n="2d"===e.Id()?"2d":"webgl"),this.a=n}function Fm(e,n,r,d,m){if(!Da(e.mi)||!Da(e.hi))throw new D(Fm,0,e);if(this.b=e,!Da(this.l=n))throw new D(Fm,1,n);if(E(this.i=+r))throw new D(Fm,2,r);if(!Da(this.g=d)&&null!=d)throw new D(Fm,3,d);if(!Da(this.c=m)&&null!=m)throw new D(Fm,4,m);this.id=(new cf).next(),this.a=!1}function Gm(e,n){Gm.j.constructor.call(this,e),this.oc=!(!n||!n.oc),this.f={}}om.prototype.rc=function(){var e;if(this.l){var n=this.c,r=n.length,d=0;for(e=new mm(0,0);--r&&d<this.u;)e=e.add(sm(n[r-1],n[r])),d++}else e=this.Nd();return 0!==(r=nm(n=e))?new mm(n.x/r,n.y/r):n},om.prototype.getDirection=om.prototype.rc,om.prototype.zb=function(e){var n,r;if(e=e||Lk(),this.l){var d=this.c,m=this.c.length,g=this.c[m-1];for(r=n=0;--m&&n<this.u;)r+=nm(sm(d[m],d[m-1])),n++;d=r/n}else g=this.a,d=nm(this.Nd());return d>=this.mb&&e-g.timestamp<=this.J?d>this.U?this.U:d:0},om.prototype.getSpeed=om.prototype.zb,om.prototype.Bf=function(){return this.a?tm(this.a):B},om.prototype.getBifocalCenter=om.prototype.Bf,om.prototype.Nd=function(e){return(e=e?this.f:this.m)?sm(e,this.a):new mm(0,0)},om.prototype.getMoveVector=om.prototype.Nd,om.prototype.Cf=function(e){var n=1;if(this.i){var r=this.a;(e=um(e=e?this.f:this.m))&&(r=um(r))&&(n=r/e)}return n},om.prototype.getBifocalScaling=om.prototype.Cf,om.prototype.bh=function(e){if(this.i){var n=e?this.f:this.m,r=this.a,d=r.b,m=0;(e=n.b)&&d&&(n=n.a,m-=Nd(d.y-(r=r.a).y,d.x-r.x)*Vd-Nd(e.y-n.y,e.x-n.x)*Vd),e=m}else e=0;return e},om.prototype.getBifocalRotation=om.prototype.bh,pm.prototype.c=!1,u(wm,F),wm.prototype.start=function(e,n){this.c&&this.reset(),E(e-n)||(this.a=+e,this.b=+n),this.c=!0},wm.prototype.reset=function(){this.c=!1,this.a=this.b=B,this.f=new xm(0,0,0,0,0,0)},wm.prototype.sa=function(){return this.c},wm.prototype.A={Cg:"animationupdate"},u(ym,ud),wm.prototype.set=function(e,n,r,d,m,g){var v=this.f;this.c&&(e=new xm(e/1e3,n/1e3,r/1e3,d/1e3,m/1e3,g/1e3),v.ia(e)||(this.f=e,this.dispatchEvent(new ym(zm(this)))))},wm.prototype.zb=function(){return zm(this).zb()},wm.prototype.rc=function(){var e=zm(this),n=this.zb()||1;return new xm(e.a/n,e.b/n,e.c/n,e.f,e.g,e.i)},wm.prototype.o=function(){this.reset(),wm.j.o.call(this)},xm.prototype.zb=function(){return Fd(this.a*this.a+this.b*this.b+this.c*this.c)},xm.prototype.rc=function(){var e=this.zb()||1;return new xm(this.a/e,this.b/e,this.c/e,this.f,this.g,this.i)},xm.prototype.ia=function(e){var n=e===this;return!n&&(n=C(e,xm))&&(n=this.a===e.a&&this.b===e.b&&this.c===e.c&&this.f===e.f&&this.g===e.g&&this.i===e.i),n},u(Am,qd),Am.prototype.N=function(){return this.a},Am.prototype.cf=function(e,n){this.size?(this.size.w=e,this.size.h=n):this.size=new Wi(e,n),this.Uk(this.a,this.a.style,e,n,this.oa)},Am.prototype.setSize=Am.prototype.cf,p=Am.prototype,p.yb=function(){return this.size},p.Xa=function(){return this.oa},p.Vj=!0,p.qb=function(e){e!==this.Vj&&(this.a.style.display=e?"block":"none",this.Vj=e)},p.Ih=1,p.ic=function(e){this.Ih!==e&&(this.Yj(e),this.Ih=e)},p.Tc=function(){return this.Ih},p.fe=function(e){this.a.style.zIndex=e},Am.prototype.setZIndex=Am.prototype.fe,Am.prototype.Ij=function(){return+this.a.style.zIndex},Am.prototype.Oc=function(){},Am.prototype.clear=function(){},Am.prototype.o=function(){this.clear(),this.Zb.removeChild(this.a),this.cf(0,0),delete this.a,delete this.Zb,Am.j.o.call(this)},Am.prototype.disposeInternal=Am.prototype.o,Am.prototype.f=0,Am.prototype.pg=function(){++this.f},Am.prototype.release=function(){--this.f||this.F()},u(Bm,Am),p=Bm.prototype,p.createElement=function(e){var n=(e=e.createElement("canvas")).style;return n.position="absolute",n.top=n.left="0",e},p.Uk=function(e,n,r,d,m){e.width=zd(r,1),e.height=zd(d,1),n.width=Ad(r/m)+"px",n.height=Ad(d/m)+"px"},p.Yj=function(e){this.b.globalAlpha=e},p.Oc=function(e,n,r,d,m){this.c&&this.b.drawImage(e,n,r,d,m)},p.Id=function(){return this.g},p.clear=function(e){var n,r;this.c&&(e?this.b.clearRect(n=e.left,r=e.top,e.right-n,e.bottom-r):this.a.width=this.size.w)},p.o=function(){var e=this.a;e.width=e.height=0,delete this.b,Bm.j.o.call(this)},Bm.prototype.disposeInternal=Bm.prototype.o,u(Cm,qd),Cm.prototype.ob=function(){return this.eb},Cm.prototype.getLayer=Cm.prototype.ob,Cm.prototype.Ym=function(){return this.lb},Cm.prototype.getSurface=Cm.prototype.Ym,Cm.prototype.ad=function(e){var n=this.lb;e!==n&&(this.lb=e,e.pg(),n&&n.release())},Cm.prototype.setSurface=Cm.prototype.ad,Cm.prototype.o=function(){this.lb.release()},Cm.prototype.disposeInternal=Cm.prototype.o,Cm.prototype.Rd=function(){},Cm.prototype.render=Cm.prototype.W,u(Dm,Cm),Dm.prototype.W=function(e,n,r,d,m,g,v,w){v=this.eb;var k=this.lb,j=!(C(k,Bm)&&"2d"===k.Id());return d>=v.min&&d<=v.max?(j&&k.qb(!0),v.W(k.N(),{boundingBox:e,zoom:d,screenCenter:n,priorityCenter:g,projection:r,cacheOnly:m,size:k.yb(),pixelRatio:k.Xa(),cameraMatrix:w})):(j&&k.qb(!1),wk.DONE)},Dm.prototype.Rd=function(){return this.a},t("H.util.animation.Animation",Fm),Fm.prototype.start=function(){var e=this;this.f=Lk(),this.a=!0;var n=this.f;this.b.mi(function(){if(e.a){var r=Lk(),d=r-e.f,m=d/e.i,g=!1;1<=m&&(m=1,g=!0),e.l(e.c?e.c(m):m,d,r-n,r),n=r,g&&e.stop()}else e.stop()})},Fm.prototype.start=Fm.prototype.start,Fm.prototype.stop=function(e){this.a=!1,this.b.hi(),e||this.g&&this.g(this)},Fm.prototype.stop=Fm.prototype.stop,Fm.prototype.sa=function(){return this.a},Fm.prototype.isRunning=Fm.prototype.sa,u(Gm,Cm),Gm.prototype.ad=function(e){Gm.j.ad.call(this,e),this.l=e.Zb.ownerDocument},Gm.prototype.setSurface=Gm.prototype.ad;var Hm=function(e,n){return C(n=n.ga(),gh)?n.la:(e[0]=n,e)}.bind(null,[]);function Im(e,n){var r=e[1].Uc(),d=n[1].Uc();return oh(r,d,!0)||e[5]-n[5]||oh(r,d,!1)}function Jm(e,n){Jm.j.constructor.apply(this,arguments),this.c=0,this.a=[],this.b=A(this.b,this)}Gm.prototype.W=function(e,n,r,d,m,g,v){var k,j,G,q,w=this.eb;if(this.s=n=this.f,this.f=r={},d>=w.min&&d<=w.max){var _t=this.rj(e,d,m,g),_r=_t.markers;if(e=_r.length){for(d=[],m=this.lb,g=0;g<e;g++){var _s=Hm(w=_r[g]);for(k=_s.length;k--;)(j=v(_s[k]))&&((q=n[G=w.cb()+"_"+k])?delete n[G]:q={ik:w},r[G]=q,d.push([q,w,w.xb(),m,j.x,j.y]))}for(d.sort(Im),e=d.length,g=0;g<e;g++)this.Ek.apply(this,d[g])}}return!_t||_t.requested&&_t.requested===_t.total||!_t.requested&&_r.length===_t.total?wk.DONE:wk.PENDING},Gm.prototype.render=Gm.prototype.W,Gm.prototype.Ea=function(){},Gm.prototype.getObjectsAt=Gm.prototype.Ea,u(Jm,Gm),t("H.map.render.dom.MarkerRenderer",Jm),Jm.prototype.rj=function(){return this.eb.Dc.apply(this.eb,arguments)},Jm.prototype.W=function(e,n,r,d,m,g,v){this.b(),this.i=0;var G,w=Jm.j.W.apply(this,arguments),k=this.lb,j=this.s;for(G in j)Km(this,k,j[G]);return 0===this.a.length&&w?wk.DONE:wk.PENDING},Jm.prototype.render=Jm.prototype.W,Jm.prototype.ad=function(e){Jm.j.ad.call(this,e),this.g=e.Xa()},Jm.prototype.setSurface=Jm.prototype.ad,Jm.prototype.b=function(){for(var n,r,d,e=this.a.length;e--;)(r=(n=(d=this.a[e]).Ag).xb()).Vh(d,r,n);this.a.length=0},Jm.prototype.Ek=function(e,n,r,d,m,g){var v,w=d.Xa(),k=n.Kb();m*=w,g*=w,this.oc||(m=Ad(m),g=Ad(g)),e.detail&&(k.Vd(e.qn)?Km(this,d,e):v=e.detail),v||(e.detail=v=r.uj(this.l),this.c++,Da(r.Vh)&&this.a.push(v)),e.qn=k.a,v.style.zIndex=this.i++,v.Ag=n,d.Oc(v,m,g,0,0)};var Lm,Mm="pointer-events",Nm,Om;function Km(e,n,r){n.clear(n=r.detail),delete n.Ag,e.c--,(r=(e=r.ik).xb()).b&&r.b(n,r,e)}function Em(e,n){var r=n||{},d=r.contextType;if(r=r.contextAttributes,Em.j.constructor.call(this,n),zc(e,"Function",Em,0,"invalid render callback"),d){if(-1===Pm.indexOf(d))throw new D(Em,1,"invalid context type");this.b=d}r&&(this.c=r),this.f=e}$e&&($e&&bd!==z&&(bd=(Om=/(MSIE\s+|rv:)([^\);]+)(\)|;)/.exec(navigator.userAgent))?+Om[2]:z),Nm=bd,9===Nm?Mm="display":10===Nm&&(Mm="visibility")),Lm=Mm,Jm.prototype.Ea=function(e,n,r){var g,v,w,k,j,d=this.g,m=hf;if(this.c){e/=d,n/=d;var G=(d=this.lb.Zb.getRootNode()).documentElement,q=this.lb.N(),_t=q.getBoundingClientRect();for(e+=_t.left,n+=_t.top;(v=w=d.elementFromPoint(e,n))&&v!==q&&v!==G&&v!==d.host&&w!==_r;){for(;(k=v.parentNode)&&(!Da(k.contains)||!k.contains(q));)v=k;if(k===q&&(v!==w||"svg"!==v.nodeName)&&0>m.indexOf(j=v.Ag)&&(m===hf&&(m=[]),m.push(j),r))break;g||(g=[]);var _r=v.style;g.push({fj:_r.getPropertyValue(Lm),pn:_r.getPropertyPriority(Lm),style:_r}),_r.setProperty(Lm,"visibility"===Lm?"hidden":"none","important"),_r=w}if(g)for(n=g.length;n--;)(e=g[n]).style.removeProperty(Lm),Cc(e.fj)&&e.style.setProperty(Lm,e.fj,e.pn)}return m},Jm.prototype.getObjectsAt=Jm.prototype.Ea,Jm.prototype.Rd=function(){return"dom"},Jm.prototype.o=function(){this.a.length=0;var r,e=this.lb,n=this.f;for(r in n)Km(this,e,n[r]);this.lb.F(),Jm.j.o.call(this)},Jm.prototype.disposeInternal=Jm.prototype.o,u(Em,qj),t("H.map.layer.CanvasLayer",Em);var Pm=["2d","webgl","webgl2","experimental-webgl"];function Qm(e,n){Qm.j.constructor.call(this,n),zc(e,"Function",Qm,0,"invalid render callback"),this.a=e}function Rm(e,n){if(E(this.b=+e))throw new D(Rm,0,e);this.a=0,n&&this.Qk(n)}function Sm(e,n,r,d){Sm.j.constructor.apply(this,arguments)}function Tm(e,n){this.a=e,this.b=n}function Um(e,n,r){var d=[],m={Zb:e.a,width:n.w,height:n.h,oa:e.b};for(e=0;e<r.length;e++){var g=(n=r[e]).Rd(),v={};Ya(v,m);var w=n.lb;switch(g){case"2d":if(C(n.ob(),Em)&&(v.Rg=n.ob().c),g=G&&"2d"===G.Id()){var k=G.In;g=!(k!==(g=v.Rg)&&(k&&!g?k.alpha||k.willReadFrequently:g&&!k?g.alpha||g.willReadFrequently:!g.alpha!=!g.alpha||!k.willReadFrequently!=!g.willReadFrequently))}if(g)var j=!1;else if(w&&!j){var G=w;j=!1}else G=new Bm(v.Zb,v.width,v.height,v.oa,"2d",v.Rg),j=!0;break;case"dom":G=w||new Sm(v.Zb,v.width,v.height,v.oa),j=!w;break;default:G=w||new Bm(v.Zb,v.width,v.height,v.oa,n.ob().Id(),v.Rg),j=!w}d[d.length-1]!==G&&(G.fe(d.length),d.push(G)),n.ad(G)}return d}function Ll(){Ll.j.constructor.call(this),this.b={},this.a={position:new kg(0,0),zoom:0,heading:180,incline:0,tilt:0,bounds:new O(ch([90,-180,90,0,90,180,-90,180,-90,-180]))}}Em.prototype.b="2d",Em.prototype.Id=function(){return this.b},Em.prototype.W=function(e,n){return this.a&&this.a.canvas===e||(this.a=e.getContext(this.b,this.c)),this.f(this.a,n)},Em.prototype.o=function(){Em.j.o.call(this),delete this.a},u(Qm,qj),t("H.map.layer.DomLayer",Qm),Qm.prototype.W=function(e,n){return this.a(e,n)},t("H.util.kinetics.KineticMove",Rm),Rm.prototype.Qk=function(e){return this.a=e,this},Rm.prototype.setInitialSpeed=Rm.prototype.Qk,Rm.prototype.am=function(){return Math.abs(this.a/this.b)},Rm.prototype.getDuration=Rm.prototype.am,Rm.prototype.De=function(e){return this.a+this.b*e},Rm.prototype.getCurrentSpeed=Rm.prototype.De,Rm.prototype.Wl=function(e){return this.a*e+this.b*e*e/2},Rm.prototype.getCurrentPath=Rm.prototype.Wl,u(Sm,Am),t("H.map.render.dom.Surface",Sm),p=Sm.prototype,p.Id=function(){return"dom"},p.createElement=function(e){return(e=e.createElement("DIV")).style.position="absolute",e.style.pointerEvents="none",e},p.Uk=function(e,n,r,d){n.width=r+"px",n.height=d+"px"},p.Yj=function(e){this.a.style.opacity=e},p.Oc=function(e,n,r){var d=this.oa,m=e.style;m[Af("transform")]="matrix(1,0,0,1,"+n/d+","+r/d+")",e.parentNode!==this.a&&(m.position="absolute",this.a.appendChild(e),this.a.style.pointerEvents="auto","auto"===getComputedStyle(e).pointerEvents&&(e.style.pointerEvents="all"),this.a.style.pointerEvents="none")},p.clear=function(e){e?this.a.removeChild(e):this.a.innerHTML=""},u(Ll,F),t("H.map.ViewModel",Ll),Ll.prototype.A={za:"update",le:"sync"},Ll.prototype.Wb=function(e,n){if(!e)throw new D(this.Wb,0,e);var r=e[Vm];if(vc(r)&&!lg(r))throw new D(this.Wb,0,Vm);if(vc(r=e[Wm])&&E(+r))throw new D(this.Wb,0,Wm);if(vc(r=e[Xm])&&!C(r,jg))throw new D(this.Wb,0,Xm);return r=Ym(e=x.Object.assign({},e),this.b,this.a),Zm(this,this.b,e),this.dispatchEvent(new $m(this.b,r,n)),this},Ll.prototype.setLookAtData=Ll.prototype.Wb,Ll.prototype.jb=function(){var e={};return e[Vm]=ng(this.a[Vm]),Zm(this,e,this.a,!0),e},Ll.prototype.getLookAtData=Ll.prototype.jb;var Vm="position",Wm="zoom",Xm="bounds",an={Ui:Vm,Xi:Wm,Oi:"heading",Wi:"tilt",Pi:"incline",Mi:Xm},bn=Object.keys(an).map(function(e){return an[e]});function Zm(e,n,r,d){e.g={},e.f={},e.c=[];for(var w,k,j,m=e.l,g=e.i,v=bn.length;v--;)if(j=r[w=bn[v]],null==(k=n[w])||!d)if(null!=j){vc(m)&&m.call(e,w,k,j);var q,G=w;if((q="position"!==w)||(q=!(!(q=j)||E(q.lat)||E(q.lng))),n[G]=q?j:ng(j),vc(g)){switch(w){case"position":k=j&&k&&(j.lat!==k.lat||j.lng!==k.lng);break;case"bounds":k=j&&k&&!j.ia(k);break;default:k=j!==k}k&&g.call(e,w)}}else delete n[w]}Ll.prototype.l=function(e,n,r){this.g[e]=n,this.f[e]=r},Ll.prototype.i=function(e){this.c.push(cn[e])};var cn=bn.reduce(function(e,n){return e[n]=ej[n.toUpperCase()],e},{});function Ym(e,n,r){var d=0;return["tilt","incline","heading",Wm].forEach(function(m){if(E(e[m])){var g=E(n[m])?r[m]:n[m];e[m]=g}else d|=cn[m]}),[Vm,Xm].forEach(function(m){e[m]?d|=cn[m]:e[m]=n[m]||r[m]}),d}function dn(e,n){return e|n}function $m(e,n,r){$m.j.constructor.call(this,Ll.prototype.A.za,e,null,n),this.b=this.animate=Fc(r)&&0<r&&1/0>r?r:!!r}function T(e,n,r,d){if(T.j.constructor.call(this,e,n,r,d),this.qa=new Rk(100),this.R=new J(0,0),this.Af=!!d.enableSubpixelRendering,this.ab=en,this.m=new om,this.g=d=new wm,this.sb=A(this.sb,this),d.addEventListener(d.A.Cg,this.sb),this.L=e=(d=e.element).ownerDocument.createElement("div"),e.style.position="absolute",e.style.width=e.style.height="100%",e.style.zIndex=0,d.insertBefore(e,d.firstChild),this.Ad=new Tm(this.L,this.oa),this.ta=n.jb().position,!(n=x.H.gl))throw new $c(T,'"H-webgl" module is missing');for(this.a=new Vl({viewport:this.f,Zb:this.L,devicePixelRatio:this.oa,qk:A(this.ha,this)}),n.WorkerBroker.addTarget("model",sj),e=0,d=(n=this.c.La()).length,this.l={Nc:[],ja:[]},this.xa=n;e<d;e++){var m=n[e];this.Pe(e,m),Ol(this,m,!0)}this.Eb(),this.fd=A(this.fd,this),this.Kh=A(this.Kh,this),this.Da=A(this.Da,this),r.addEventListener(qj.prototype.A.ie,this.fd),this.C=fn,this.zoom=Pl(this,this.J.pb()),this.Eb(),this.T()}Ll.prototype.$a=function(e){var n={},r={};Zm(this,this.a,e),this.b={},n.lookAt=this.f,r.lookAt=this.g,e=(e=this.c).length?e.reduce(dn):0,this.dispatchEvent(new dj(this.A.le,n,r,e))},Ll.prototype.synchronize=Ll.prototype.$a,Ll.prototype.df=function(e,n){if(E(e=+e))throw new D(this.df,0,Wm);this.Wb({zoom:e},n)},Ll.prototype.pb=function(){return this.a.zoom},Ll.prototype.kc=Qc,Ll.prototype.startControl=Ll.prototype.kc,Ll.prototype.control=Qc,Ll.prototype.control=Ll.prototype.control,Ll.prototype.vb=Qc,Ll.prototype.endControl=Ll.prototype.vb,u($m,dj),u(T,Jl),t("H.map.render.webgl.RenderEngine",T),T.prototype.jb=function(){var e=this.ta;return Ql(this,{position:{An:e.An,Fn:e.Fn},zoom:this.zoom,tilt:this.dl,heading:this.heading})},T.prototype.fd=function(e){((e=(e=e.target.ca())&&e.Ya())&&e.getState())===Xh.INIT?e.load():(Yl(this.a),$l(this.a,this.c),this.ha())},T.prototype.type=Tl.WEBGL;var fn=2;function gn(e,n,r){return(n=r-n)<(e=Gd(2,8+e.zoom))/2?n:n-e*r/Dd(r)}function hn(e,n,r){function d(w){return m[w]+km(m[w],n[w])/2}if(!(r&ej.POSITION||r&ej.BOUNDS))return null;var m=Zl(e.a).getLookAtData();r=m.position;var g=n.position,v=n.bounds;return Fi(m.bounds,g.lat,g.lng,!1)||v&&Fi(v,r.lat,r.lng,!1)?null:((r=jn(e,{tilt:d("tilt"),heading:d("heading"),incline:0,bounds:tg([r,g])})).zoom=Pl(e,r.zoom-.5),delete r.bounds,r)}function kn(e,n,r,d){return e=(e=e.getCapabilities().lookAt[d]).max-e.min,Dd("zoom"===d?r[d]-n[d]:km(n[d],r[d]))/e||0}function ln(e,n,r){return ae(3e3*(e=zd(8*kn(e,n,r,"zoom"),kn(e,n,r,"heading"),kn(e,n,r,"tilt")/2)),300,4e3)}function jn(e,n){return pn(n),Zl(e.a).getBestLookAtData(n)}function pn(e){var n=e.bounds;!n||n instanceof O||(e.bounds=Ci(n.K()))}function rn(e,n,r){Zl(e.a).setLookAtData(n),Yl(e.a),qn(e),e.ha(),r&&setTimeout(r,0)}function on(e,n,r,d){var m=Zl(e.a).getLookAtData(),g=new jm(m,n);g.a.tilt+g.a.heading+g.a.zoom+g.c!==0?sn(e,function(v){for(var w in g.a)if(0!==g.a[w]){var k=g.g[w](v);m[w]+=g.a[w]*(k-g.f[w]),g.f[w]=k}return 0!==g.c&&(m.position=g.b.zg(g.i,g.c*g.g.position(v),!0)),rn(e,m)},r,function(){return rn(e,n,d)}):rn(e,n,d)}function tn(e,n){e.qa.na(function(r,d){return d.Mb()===n})}function un(e){return!(C(e,Qm)||C(e,Em))}function nn(e,n){var r=n.position;return Ql(e,{zoom:Pl(e,n.zoom),position:new kg(r.lat,r.lng),tilt:n.tilt,heading:n.heading,bounds:n.bounds})}function qn(e){var n=Zl(e.a).getLookAtData();e.zoom=n.zoom,e.ta=n.position}function wn(e,n){return new J((e=Zl(e.a).geoToMeters(n)).x/40075016.68557849+.5,1-(e.y/40075016.68557849+.5))}function xn(e,n){return n.sub(wn(e,e.ta)).scale(Gd(2,8+e.zoom))}function yn(e,n,r,d,m,g,v,w){var k,j,q,G=0,_t=function(){0==--G&&g(m)};if(w&&w.features)for(G=j=w.features.length,q=0;q<j;q++){var _r=w.features[q],_s=_r.id;if(k=e.a.a.sources[_r.source_name]){var ga=k.provider,_c=ga.Ej();if(_c===nk.SOURCE){var _u=_r.source_layer;if("overlays"===_u)zn(e,n,r,d,m,k,_r.properties.overlays_config);else if(k=k.getMapObjectById(_s))if("markers"!==_u)m.push(k);else if(An(e,n,r,k))m.push(k);else if(d&&!v){var _f=!0;bm(e.a,{x:n,y:r},{radius:3.5,top_most_only:!1},function(_h){yn(e,n,r,d,m,g,!0,_h)})}G--}else _c===nk.FEATURE?(_f=ga.getFeatureProxy(_r.properties,_u=_r.tile.coords,function(_h){_h&&(_h.Tk(ga),m.push(_h)),_t()}))||((k=e.qa.get(_s))||((k=new lh(_r)).ka(ga),e.qa.add(_s,k,1)),m.push(k),G--):_c===nk.PROVIDER&&(_f=!0,ga.Fk(_r,!1).then(function(_h){_h&&(!(_h instanceof rh)||An(this,n,r,_h))&&m.push(_h),_t()},function(){_t()},e))}}_c&&(_f||0!==G)||g(m)}function zn(e,n,r,d,m,g,v){var w;for(e=e.Pa(n,r),n=v.length;n--&&(!(w=g.getMapObjectById(v[n].id))||0<=m.indexOf(w)||!w.ga().gd(e)||(m.push(w),!d)););}function An(e,n,r,d){var v,m=d.xb(),g=m.c,w=!g;if(g)if(n+=(m=m.kd()).x,r+=m.y,C(m=d.ga(),Vi))for(v=(d=m.la).length;v--&&!w;)m=e.Da(d[v]),w=g.Of(n-m.x,r-m.y,0)!==de.NONE;else m=e.Da(m),w=g.Of(n-m.x,r-m.y,0)!==de.NONE;return w}function Bn(e,n,r,d,m){for(var v,g=n.length;g--&&!((v=n[g])&&v.Ea&&(e=e.concat(v.Ea(r,d,m)),e.length&&m)););return e}function vn(e){return{w:(e=e.wa[2]).right-e.left,h:e.bottom-e.top}}function Cn(e){e.i&&e.i.sa()||(Xl(e.a)||Lk()-e.ve<e.ab)&&!e.ea?e.Vf||(e.Vf=Jk(e.Kh)):(e.ea&&(e.ce(),Dn(e)),e.C=fn)}function Dn(e,n){e.dd||setTimeout(A(e.dispatchEvent,e,{type:e.A.Vi,target:n||e}),1)}function Fn(e,n,r){Zl(e.a).applyPxOffset([n,r]),qn(e),e.R.set(0,0),Yl(e.a),e.ha()}function Gn(e,n,r,d){Zl(e.a).setLookAtData({zoom:n},Fc(r)&&Fc(r)?[r,d]:B),qn(e),Yl(e.a),e.ha()}function mn(e){En(e),e.g.sa()&&e.vb(!0),e.m.sa()&&e.wb(!0)}function Hn(e,n){if(n){var r={};r.Te=n.power,r.we=n.ease,r.duration=n.duration,e.u=r}}function Jn(e,n){var r=xn(e,wn(e,n.position)),d=r.y;r=r.x;var m=n.zoom,g=xn(e,wn(e,e.ta));n=g.y;var v=g.x;g=e.zoom;var w=e.g.zb(),k=e.g.a,j=e.g.b,G=0;if(r=gn(e,v,r),n=Fd((r-=v)*r+(d-=n)*d+(g=m-g)*g),0!==w&&0!==n){var q=r/n,_t=d/n,_r=g/n,_s=w*w/(2*n);sn(e,function(ga,_c){var _u;1!==ga?((_u=_r*(_c=(ga=w*_c-_s*_c*_c/2)-G))&&(_u=Pl(e,e.zoom+_u),Gn(e,_u,k,j)),Fn(e,Ad(q*_c),Ad(_t*_c)),G=ga):(Gn(e,Pl(e,m),k,j),e.ha())},2*n/w)}}function In(e,n,r){r=r||0;var d=e.g,m=Zl(e.a),g=m.getLookAtData();n.c&&Gn(e,Pl(e,g.zoom+n.c*r),d.a,d.b),m.setLookAtData({heading:Sl(e,g.heading+n.g*r),tilt:Rl(e,g.tilt+n.f*r)}),qn(e),Fn(e,n.a*r,n.b*r)}function sn(e,n,r,d,m){e.i&&e.i.sa()&&e.i.stop(!0),e.i=new Fm(e,n,r,d,m),e.i.start()}function En(e){e.i&&e.i.sa()&&e.i.stop(!0)}T.prototype.getState=function(){return this.C},T.prototype.getState=T.prototype.getState,T.prototype.dd=!1,T.prototype.Kg=function(e){var n=this,r=e.newValue,d=e.modifiers,m=Zl(this.a);mn(this),this.R.set(0,0);var g=nn(this,r);if(bn.forEach(function(G){d&e[G.toUpperCase()]||delete g[G]}),e.b){m=Zl(this.a).getLookAtData();var v=jn(this,g);r=hn(this,v,d);var w=1;Fc(e.b)&&(w=1/e.b);var k=function(){return n.dd=!1};if(delete v.bounds,this.dd=!0,r){m=ln(this,m,r);var j=ln(this,r,v);on(this,r,m*w,function(){return on(n,v,j*w,k)})}else r=ln(this,m,v),on(this,v,r*w,k)}else pn(g),m.setLookAtData(g);qn(this),Yl(this.a),this.ha()},T.prototype.rg=function(){},T.prototype.setAnimationDuration=T.prototype.rg,T.prototype.$g=function(){},T.prototype.getAnimationDuration=T.prototype.$g,T.prototype.sg=function(){},T.prototype.setAnimationEase=T.prototype.sg,T.prototype.ah=function(){},T.prototype.getAnimationEase=T.prototype.ah,T.prototype.ng=function(){},T.prototype.resetAnimationDefaults=T.prototype.ng,p=T.prototype,p.nk=function(e){tn(this,e.target.ca()),Yl(this.a),this.ha()},p.Pe=function(e,n){T.j.Pe.call(this,e,n),un(n)&&(Yl(this.a),(e=(e=n.ca())&&e.Ya())&&e.getState()===Xh.INIT&&e.load())},p.Xh=function(e,n,r){var d;if(this.ve=Lk(),tn(this,n.ca()),n.requestDomMarkers||C(n,Em)||C(n,Qm)){var m=this.l.ja;for(d=m.length;d--;){var g=m[d];if(g.ob()===n){m.splice(d,1),g.F();break}}}un(n)&&$l(this.a,this.c),this.xa=this.c.La(),0===e&&(Ol(this,n,!1),this.Eb()),Um(this.Ad,vn(this),this.l.ja.filter(vc)),this.ce(),r||this.ha()},p.Yh=function(){this.Eb()},p.Eb=function(){T.j.Eb.call(this);var e=this.getCapabilities().lookAt.zoom;Zl(this.a).setZoomConstraints(zd(e.min,this.Eg),yd(e.max,this.Dg))},p.th=function(e,n){var r;if(n){if(e={oc:this.Af,fb:this.fb},n.W?(C(n,Em)||C(n,Qm))&&(r=new Dm(n)):n.requestDomMarkers&&(r=new Jm(n,e)),r){this.l.ja.push(r);var d=this.c.La();this.l.ja.sort(function(m,g){return d.indexOf(m.eb)-d.indexOf(g.eb)}),Um(this.Ad,vn(this),this.l.ja.filter(vc))}un(n)&&$l(this.a,this.c)}this.xa=this.c.La()},p.Da=function(e){return Zl(this.a).geoToPixel(e)},T.prototype.geoToScreen=T.prototype.Da,T.prototype.Pa=function(e,n){return Zl(this.a).xyToGeo(e,n)},T.prototype.screenToGeo=T.prototype.Pa,T.prototype.qg=function(e,n){return e=this.Pa(e,n),(n=this.J.jb()).position=e,n},T.prototype.Ea=function(e,n,r,d){var m=this,g=[];g=Bn(g,this.l.ja,e*this.oa,n*this.oa,r),r&&g.length?d(g):this.a.a.initialized?bm(this.a,{x:e,y:n},{radius:3.5,top_most_only:r},function(v){yn(m,e,n,r,g,d,!1,v)}):d(g)},T.prototype.getObjectsAt=T.prototype.Ea,T.prototype.aa=z,T.prototype.T=function(){var e=this.l.ja.length;Kl(this,this.oa),this.R.set(0,0);var n=vn(this),r=n.w,d=n.h;for(this.a.a.handleViewportUpdate();e--;){var m=(n=this.l.ja[e].lb).yb();m.w===r&&m.h===d||n.cf(r,d)}this.aa=new Wi(r,d),Yl(this.a),this.ha()},T.prototype.getCapabilities=function(){return Ul},T.prototype.getCapabilities=T.prototype.getCapabilities,p=T.prototype,p.Vf=0,p.ce=function(){this.l.Nc.length=0},p.Kh=function(){this.Vf=0,this.D&&this.D.before();var e=Zl(this.a),n=e.getLookAtData(!1),r=e.getLookAtData(!0);e=this.f.center.clone(),r=r.bounds.K();var d=this.zoom,m=this.R,g=this.xa,v=g.length;for(this.ab=en;v--;){var w=g[v];C(w,qj)&&w.ca()&&w.ca().Ue(r,d)}this.ea=this.a.W(),this.J.$a(n),g=(n=this.l).ja.length;var j,k=!0;for(j=0;j<g;j++){var G=n.Nc;(v=n.ja[j])&&((w=v.W(r,e,void 0,d,!1,m,this.Da,this.a.a.getCameraMatrix()))===wk.ACTIVE&&(this.ab=1/0),w!==wk.DONE||G[j]||(Dn(this,v.ob()),G[j]=!0),G[j]||(k=!1))}this.ea=k&&this.ea,this.aa&&(this.f.$a(this.aa),this.aa=z),this.i&&this.i.sa()&&this.me(),this.D&&this.D.after(),Cn(this)},p.o=function(){var e=this.c.La()[0],n=this.f;Kk(this.Vf),En(this),e&&Ol(this,e,!1),this.l.ja.filter(vc).forEach(function(r){r.F()}),n.element&&n.element.removeChild(this.L),delete this.L,this.C=3,this.a.F(),T.j.o.call(this)},p.ha=function(){this.ve=Lk(),this.C===fn&&(this.ea=!1,this.C=1,Cn(this))},p.xd=function(e,n,r){Gn(this,e=Pl(this,Pl(this,e)),n,r)},T.prototype.zoomAt=T.prototype.xd,T.prototype.lc=function(e,n){var r=!!(n||e&(Nl.HEADING|Nl.TILT));mn(this),Hn(this,n),this.m.start(e,r),Zl(this.a).setPanning(!0)},T.prototype.startInteraction=T.prototype.lc,T.prototype.cc=function(e,n,r,d,m){var g=this.m,v=!1;if(g.sa()){var w=Zl(this.a),k=w.getLookAtData(),j=this.f.center;j=[j.x,j.y],n=g.store(e,n,r,d,m),r=g.Bf(),e=g.Nd(),m=this.m.Cf(),d=this.m.bh(),g.b&&(g.Ac(Nl.TILT)&&(w.setLookAtData({tilt:Rl(this,k.tilt+e.y/this.f.height*-180)},j),v=!0),n&&1!==m&&g.Ac(Nl.ZOOM)&&(v=g.Bf(),Gn(this,Pl(this,m=Ed(Gd(2,this.zoom)*m)/Od),v.x,v.y),v=!0),g.Ac(Nl.COORD)&&0<nm(e)&&(Fn(this,-e.x,-e.y),v=!0),g.Ac(Nl.HEADING)&&(n?w.setLookAtData({heading:k.heading+Sl(this,d)},[r.x,r.y]):e.x&&w.setLookAtData({heading:Sl(this,k.heading+e.x/this.f.width*360)},j),v=!0),v&&(Yl(this.a),this.ha()))}},T.prototype.interaction=T.prototype.cc,T.prototype.wb=function(e){var n=this;if(this.m.sa()&&!e){if(this.u){e=this.m.zb();var r=this.m.rc(),d=this.u.duration,m=(this.u.Te||1)*e,g=new Rm(-m/(0<d?d:1),m);!E(r.x)&&!E(r.y)&&0<m&&n.m.Ac(Nl.COORD)&&sn(this,function(v){m=g.De(v*d),E(m)||Fn(n,Ad(-r.x*m),Ad(-r.y*m))},d,void 0,this.u.we)}delete this.u,this.m.clear()}Zl(this.a).setPanning(!1),this.ha()},T.prototype.endInteraction=T.prototype.wb,T.prototype.kc=function(e,n,r){mn(this),this.g.start(n,r),Hn(this,e),Zl(this.a).setPanning(!0)},T.prototype.startControl=T.prototype.kc,T.prototype.control=function(e,n,r,d,m,g){for(var w,v=0;v<arguments.length;v++)if((w=+arguments[v])!=w)throw new D(this.control,v,w);this.g.sa()&&this.g.set(e,n,r,d,m,g)},T.prototype.control=T.prototype.control,T.prototype.vb=function(e,n){var d,r=this;if(this.g.sa()){En(this);var m=Lk(),g=m-this.Ed;if(1<=g&&In(this,zm(this.g),g),!this.u||e||n)"function"==typeof n&&(n(e=(e=Zl(this.a)).getLookAtData()),Jn(this,e));else{n=this.g.zb();var w=this.g.rc(),k=this.u.duration,j=(this.u.Te||1)*n,G=new Rm(-j/(0<k?k:1),j);!E(w.a)&&!E(w.b)&&0<j&&sn(this,function(q,_t,_r,_s){m&&(_r=_s-m,m=0),j=G.De(q*k)*_r,E(j)||((d=w.c*j)&&Gn(r,Pl(r,r.zoom+d),r.g.a,r.g.b),Fn(r,Ad(w.a*j),Ad(w.b*j)))},k,void 0,this.u.we)}this.g.reset(),Zl(this.a).setPanning(!1),this.ha()}},T.prototype.endControl=T.prototype.vb,T.prototype.sb=function(e){var n=this,r=e.b;this.R.set(0,0),r.a||r.b||r.c||r.f||r.g||r.i?(this.Ed=Lk(),sn(this,function(d,m,g,v){n.Ed=v,In(n,r,g)},Wd),this.ha()):En(this)},T.prototype.Wg=function(){},T.prototype.enter=T.prototype.Wg,T.prototype.Xg=function(e){Ml(this.L,e)},T.prototype.exit=T.prototype.Xg,T.prototype.capture=function(e,n,r,d){var m=this;return cm(m.a).then(function(g){var v=m.L.ownerDocument.createElement("canvas"),w=m.oa,k=v.getContext("2d"),j=m.a.Xa()/w,G=(r-e)*w;return w*=d-n,v.width=G,v.height=w,k.drawImage(g,e*j,n*j,G*j,w*j,0,0,G,w),v})},T.prototype.Il=function(e){return Zl(this.a).geoToMeters(e)},T.prototype.geoToMeters=T.prototype.Il,T.prototype.Vn=function(e){return Zl(this.a).metersToGeo(e)},T.prototype.metersToGeo=T.prototype.Vn;var en=5e3;function U(e,n,r){var d={};if(!(e instanceof HTMLElement))throw new D(U,0);if(U.j.constructor.call(this),this.i=Kn(r,U),this.c=r=new Ll,this.D=!1,r.addEventListener(r.A.le,this.R,!1,this),!C(e,Element))throw new D(U,0,e);var m=(r=this.S=e.ownerDocument.createElement("div")).style;if(m.position="relative",m.height=r.style.width="100%",m.overflow="hidden",m.webkitTapHighlightColor="transparent","transparent"!==m.webkitTapHighlightColor&&(m.webkitTapHighlightColor="rgba(0,0,0,0)"),e.appendChild(r),this.b=new xk(this.S,this.i),this.b.addEventListener(this.b.A.le,this.R,!1,this),(e=this.a=new sj(this.i.layers)).addEventListener(e.A.ke,this.P,!1,this),e.addEventListener(e.A.he,this.P,!1,this),e.addEventListener(e.A.je,this.P,!1,this),!this.l&&Ln(this),this.g=null,this.a.add(n,0),this.f=this.u(null!=this.i.engineType?this.i.engineType:jk,this.i),this.J=A(this.J,this),(n=this.i.imprint)!==B&&"object"!=typeof n)throw new D(U,1,"imprint");Mn&&(n||(n={}),n.mark=n.mark||"GS (2022) 5659"),this.s=null===n?n:new Bj(this,n),this.L=(n=this.i.autoColor)===B||!!n,Nn(this),(n=this.i.zoom)&&(d.zoom=n),(n=this.i.bounds)&&(d.bounds=n),(n=this.i.center)&&(d.position=n),this.c.Wb(d)}function Kn(e,n){if(e){var r=e.pixelRatio;if(r===B)e.pixelRatio=Ue();else if(!(0<r))throw new D(n,0,"pixelRatio: "+r)}else(e={}).pixelRatio=Ue();return e.renderBaseBackground||(e.renderBaseBackground={lower:3,higher:2}),e}function Nn(e){e.s&&e.L&&e.s.vi({invert:e.g&&e.g.yl})}function On(e,n,r){e.dispatchEvent(r?new dj(e.A.Qi,r.newValue,r.oldValue,r.modifiers):e.A.Qi+n)}function Pn(e){xj.call(this,e)}function Ln(e){e.m=new N({max:24,engineType:e.i.engineType}),e.l=new tl(e.m,e.i),e.a.add(e.l)}u(U,F),t("H.Map",U),U.prototype.draggable=!1,U.prototype.o=function(){this.L=!1,this.s&&this.s.F(),this.f.dispose(),this.c.F(),this.b.F(),this.l.F(),this.m.F(),this.a.F();var e=this.S;e.parentNode.removeChild(e),delete this.S,F.prototype.o.call(this)},U.prototype.N=function(){return this.S},U.prototype.getElement=U.prototype.N,U.prototype.Xa=function(){return this.i.pixelRatio},U.prototype.getPixelRatio=U.prototype.Xa,U.prototype.P=function(e){var n=e.added,r=e.removed;n&&n.ca()&&n.ca().ka(this),r&&r.ca()&&r.ca().ka(null),r===this.l&&(delete this.l,delete this.m),r===this.g&&(this.g=null),0===e.idx&&(this.dispatchEvent(new cj(this.A.lf,this.g=e.type!==this.a.A.je?n:0<this.a.a.length?this.a.get(0):z,e.type!==this.a.A.he?r:1<this.a.a.length?this.a.get(1):z)),Nn(this))},U.prototype.R=function(e){e.modifiers&&(this.D||(On(this,"start"),this.D=!0),On(this,"",e),this.T&&x.clearTimeout(this.T),this.T=x.setTimeout(this.J,333))},U.prototype.J=function(){On(this,"end"),this.D=!1},U.prototype.tg=function(e,n){return this.f.getCapabilities().lookAt&&this.c.Wb({position:e},!!n),this},U.prototype.setCenter=U.prototype.tg,U.prototype.bb=function(){var e=this.c.jb();return e?e.position:z},U.prototype.getCenter=U.prototype.bb,U.prototype.df=function(e,n){return this.c.df(e,!!n),this},U.prototype.setZoom=U.prototype.df,U.prototype.pb=function(){return this.c.pb()},U.prototype.getZoom=U.prototype.pb,U.prototype.xd=function(e,n,r){this.f.zoomAt(e,n,r)},U.prototype.zoomAt=U.prototype.xd,U.prototype.hn=function(){return this.b},U.prototype.getViewPort=U.prototype.hn,U.prototype.gn=function(){return this.c},U.prototype.getViewModel=U.prototype.gn,U.prototype.wm=function(){return this.a},U.prototype.getLayers=U.prototype.wm,U.prototype.qm=function(){return this.s},U.prototype.getImprint=U.prototype.qm,U.prototype.capture=function(e,n,r,d,m,g){function v(_f,_h){_t?_f.cancel():(ga.save(),_h.capture(_s,G,function(ad){ga.restore(),_f.done(ad)},function(ad){_f.done(null,ad),w(null)}))}function w(_f){_t||(_t=!0,e(_f))}var _s,ga,k=this.f,j=k.getCapabilities(),G=this.i.pixelRatio,q=this.b,_t=!1,_r=this;if(!Da(e))throw new D(this.capture,0,e);d=d||0,g=g||q.height;var _c=zd(0,yd(r=r||0,m=m||q.width)),_u=zd(0,yd(d,g));r=yd(q.width,zd(r,m)),d=yd(q.height,zd(d,g)),j.capture?k.capture(_c,_u,r,d).then(function(_f){var _h=_r.s,ad=n||[];ga=(_s=_f).getContext("2d"),_s.style.width=_s.width/G+"px",_s.style.height=_s.height/G+"px";var ey=new Mk(10,v);(ad=ad.concat(_h).filter(function(sy){return Da(sy&&sy.capture)})).length?(_f=ad.pop(),ad.forEach(function(sy){ey.push(sy,ld)}),ey.push(_f,A(w,_r,_s)),Fk(ey)):w(_s)},function(){w(z)}):e(null)},U.prototype.capture=U.prototype.capture,U.prototype.cm=function(){return this.f},U.prototype.getEngine=U.prototype.cm,U.prototype.u=function(e,n){if(n=n?Kn(n,this.u):this.i,Nn(this),e===kk.P2D)return new x.H.map.render.p2d.RenderEngine(this.b,this.c,this.a,n);if(e===kk.WEBGL)return new T(this.b,this.c,this.a,n);if(e===kk.HARP)return new x.H.map.render.harp.RenderEngine(this.b,this.c,this.a,n);throw new D(this.u,0,e)},U.prototype.gf=function(e,n,r,d,m){if(n=vc(n)?C(n,K,this.gf,1,n)&&n:this.c.jb().bounds.K(),!C(m=m||this.g,pl))throw new D(this.gf,4);var g=m.ca(),v=this.Xa(),w=m.tileSize;if(2<=v&&256<w&&g instanceof Ek&&(w/=2),v=this.pb(),w=Math.log2(w)-8,!((r=vc(r)?+r:v)<=(d=vc(d)?+d:v)))throw new D(this.gf,B,"!(min <= max)");v=g.min;var k=g.max,j=this.f.type===kk.WEBGL?Bd:Ad;if(r=ae(j(r)-w,v,k),d=ae(j(d)-w,v,k),!(g&&C(g,S)&&od()&&g.l()))throw new $c(this.gf,"Storing is not supported");return new Ak(m,g,n,r,d,e)},U.prototype.storeContent=U.prototype.gf,u(Pn,xj),Pn.prototype.f=function(){zj(this,2)},Pn.prototype.c=function(){zj(this,4)},U.prototype.xl=function(e){return e=new Pn(e),nd().clear(A(e.f,e),A(e.c,e)),e},U.prototype.clearContent=U.prototype.xl,U.prototype.nf=function(e,n){var r=this.a,d=r.indexOf(e),m=n!==+n;return n=m?r.a.length-1:n,0>d?r.add(e,n):d-n&&(r.hc(d),r.add(e,m?n-1:n)),this},U.prototype.addLayer=U.prototype.nf,U.prototype.ae=function(e){var n=this.a.indexOf(e);return e!==this.g&&e!==this.l&&-1!==n&&this.a.hc(n),this},U.prototype.removeLayer=U.prototype.ae,U.prototype.ud=function(e){return this.g!==e&&(this.a.a.length&&this.a.get(0)!==this.l?this.a.set(0,e):this.a.add(e,0),this.g=e),this},U.prototype.setBaseLayer=U.prototype.ud,U.prototype.Ol=function(){return this.g},U.prototype.getBaseLayer=U.prototype.Ol,U.prototype.Da=function(e){if(!lg(e))throw new D(this.Da,0,e);return(e=this.f.geoToScreen(e))?zf(e):z},U.prototype.geoToScreen=U.prototype.Da,U.prototype.Pa=function(e,n){var r;if(r=+E(e)||2*+E(n))throw new D(this.Pa,r-1,arguments[r-1]);return(r=this.f.screenToGeo(e,n))?ng(r):z},U.prototype.screenToGeo=U.prototype.Pa,U.prototype.qg=function(e,n){return this.f.screenToLookAtData(e,n)},U.prototype.screenToLookAtData=U.prototype.qg,U.prototype.fa=function(e){if(!C(e,M))throw new D(this.fa,0,e);return!this.l&&Ln(this),this.m.bc().fa(e),e},U.prototype.addObject=U.prototype.fa,U.prototype.Ga=function(e){if(!C(e,M))throw new D(this.Ga,0,e);return!this.l&&Ln(this),this.m.bc().Ga(e),e},U.prototype.removeObject=U.prototype.Ga,U.prototype.Ua=function(e){return!this.l&&Ln(this),this.m.bc().Ua(e)},U.prototype.getObjects=U.prototype.Ua,U.prototype.Xb=function(e){var n;Bc(e,this.Xb,0,e),!this.l&&Ln(this);var r=e.length;for(n=0;n<r;n++)this.fa(e[n]);return this},U.prototype.addObjects=U.prototype.Xb,U.prototype.rd=function(e){var n;Bc(e,this.rd,0,e),!this.l&&Ln(this);var r=e.length;for(n=0;n<r;n++)this.Ga(e[n]);return this},U.prototype.removeObjects=U.prototype.rd,U.prototype.Od=function(e,n,r){var d;if(d=+E(e)||2*+E(n))throw new D(this.Od,d-1,arguments[d-1]);this.f.getObjectsAt(e,n,!0,function(m){r(m[0])})},U.prototype.getObjectAt=U.prototype.Od,U.prototype.Ea=function(e,n,r,d){var m;if(m=+E(e)||2*+E(n))throw new D(this.Od,m-1,arguments[m-1]);this.f.getObjectsAt(e,n,!1,r,!!d)},U.prototype.getObjectsAt=U.prototype.Ea,U.prototype.ld=function(e,n,r){var d=(r=r||{}).zoom;r.zoom=vc(d)?d:this.c.pb(),this.m.ld(e,n,r)},U.prototype.getObjectsWithin=U.prototype.ld;var Qn=Tl.HARP,kk={P2D:Tl.P2D,WEBGL:Tl.WEBGL,HARP:Qn};function Rn(e,n){Rn.j.constructor.call(this,e,n)}function sh(e,n,r){var d="anonymous",m=1;this.c=A(this.c,this),M.call(this,r),this.da(e),r&&((e="crossOrigin")in r&&(d=r[e]),(e="opacity")in r&&(m=r[e])),this.Ok(n,d),this.ic(m)}function Sn(e,n){Sn.j.constructor.call(this,e,n)}U.EngineType=kk,U.prototype.A={Wo:"mapviewchangestart",Qi:"mapviewchange",Ri:"mapviewchangeend",lf:"baselayerchange"},u(Rn,rh),t("H.map.Marker",Rn),Rn.prototype.type=nh.MARKER,Rn.prototype.T=1,Rn.prototype.ra=function(e){if(e!==kh.VISUAL||1===this.zk||1===this.icon.getState())var n=Rn.j.ra.call(this,e);return n||!1},Rn.prototype.invalidate=Rn.prototype.ra,p=Rn.prototype,p.zk=0,p.Uj=function(e){return C(e,Wj)},p.xh=!1,p.mk=function(){this.ra(kh.VISUAL)},p.Ic=function(e){var n=this.icon;return this.xh&&(n.removeEventListener("statechange",this.mk,!1,this),delete this.xh),n&&(this.zk=n.getState()),Rn.j.Ic.call(this,e),0===e.getState()&&(this.xh=!0,Fe(e,"statechange",this.mk,!1,this)),this},Rn.prototype.setIcon=Rn.prototype.Ic,Rn.prototype.b=function(e){return new Wj(e.svg,e)},Rn.prototype.Y=function(){var e=this.getIcon(),n=e.Fo||0,r=Rn.j.forWorkerMessage.call(this),d=r.properties.icon;return d&&0<n&&Ya(d,{stick_color:e.Eo,stick_height:n}),r},Rn.prototype.forWorkerMessage=Rn.prototype.Y,u(sh,M),t("H.map.Overlay",sh),sh.prototype.type=nh.OVERLAY,sh.prototype.K=function(){return this.a},sh.prototype.getBoundingBox=sh.prototype.K,sh.prototype.de=function(e){return C(e,K,this.de,0,e),this.da(e)},sh.prototype.setBoundingBox=sh.prototype.de,sh.prototype.ga=function(){return this.a},sh.prototype.getGeometry=sh.prototype.ga,sh.prototype.da=function(e){var n=this.a,r=!n;return C(e,K,this.da,0,e),(r||!n.ia(e))&&(this.a=e,r||this.ra(kh.SPATIAL)),this},sh.prototype.setGeometry=sh.prototype.da,sh.prototype.Qc=function(){return this.b.getData()},sh.prototype.getBitmap=sh.prototype.Qc,sh.prototype.Ok=function(e,n){var r=this.b;return r&&1!==r.getState()&&r.cancel(),this.b=new Rj(e,this.c,!0,B,n),this},sh.prototype.setBitmap=sh.prototype.Ok,sh.prototype.c=function(e,n){this.b=n,1===e&&this.ra(kh.VISUAL)},sh.prototype.Tc=function(){return this.f},sh.prototype.getOpacity=sh.prototype.Tc,sh.prototype.ic=function(e){var n=this.f,r=2>n;if(!(0<=e&&1>=e))throw new D(this.ic,0);return e!==n&&(this.f=e,r&&this.ra(kh.VISUAL)),this},sh.prototype.setOpacity=sh.prototype.ic,sh.prototype.Y=function(){var e=sh.j.Y.call(this);return e.geometry=Ci(this.a).Y(),e.properties.overlay=!0,e},sh.prototype.forWorkerMessage=sh.prototype.Y,u(Sn,pl),t("H.map.layer.MarkerTileLayer",Sn);var Tn={markers:[],total:0,requested:0};function Un(e,n,r,d,m){var v,g=Bd(r);for(e.pixelProjection.Oa(g),n=e.Sd(e.Ae(n),g),r=e.Ke(n,n.left>n.right,~~r,d,m),e=r.tiles,r=r.total,d=e.length,m=[],v=0;v<d;v++)for(g=(n=e[v]).data.length;g--;)m.push(n.data[g]);return{markers:m,total:e.length,requested:r}}function Vn(e,n,r){var d,m=6;if(n){for(d=' expected close to: "'+n;m--;)-1!==(n=e.a.next())&&(d+=String.fromCharCode(n));d+='"'}throw new D(Wn,0,"- Malformed WKT: "+(d?r+d:"unexpected end of stream"))}function Xn(e,n){var r=e.next();r!==(n=n?")":"(")&&Vn(e,r,'"'+n+'"')}function Yn(e){return","===Zn(e)&&(e.next(),!0)}function $n(e,n,r,d,m){var g,v,w=2+n+r;for(v=1;v<=w;v++)(r=e.next())?(g=+r)!==g?Vn(e,r,"number"):1===v?d[m+1]=g:2===v?d[m]=g:3===v&&(d[m+2]=g):Vn(e,r);n||(d[m+2]=0)}Sn.prototype.Ec=function(e,n,r,d){return this.ma.providesDomMarkers()?Tn:Un(this,e,n,r,d)},Sn.prototype.requestMarkers=Sn.prototype.Ec,Sn.prototype.Dc=function(e,n,r,d){return this.ma.providesDomMarkers()?Un(this,e,n,r,d):Tn},Sn.prototype.requestDomMarkers=Sn.prototype.Dc;var ao=[];function bo(e,n,r,d){return d||Xn(e,0),$n(e,n,r,ao,0),d||Xn(e,1),new kg(ao[0],ao[1],n?ao[2]:B)}function co(e,n,r){var d=[];Xn(e,0);do{$n(e,n,r,d,d.length)}while(Yn(e));return Xn(e,1),new L(d)}function eo(e,n,r){Xn(e,0);var d=co(e,n,r);if(Yn(e)){var m=[];do{m.push(co(e,n,r))}while(Yn(e))}return Xn(e,1),new O(d,m)}var fo=[],go=[eo],ho=[bo],io={POINT:ho,LINESTRING:[co],POLYGON:go,MULTIPOINT:[bo,Vi],MULTILINESTRING:[co,ih],MULTIPOLYGON:[eo,Ji],GEOMETRY:fo,GEOMETRYCOLLECTION:fo,CIRCULARSTRING:fo,COMPOUNDCURVE:fo,CURVEPOLYGON:fo,MULTICURVE:fo,MULTISURFACE:fo,CURVE:fo,SURFACE:fo,POLYHEDRALSURFACE:fo,TIN:fo,TRIANGLE:fo},jo={Z:1,M:2,ZM:3};function Wn(e){var n,r=(e=new ko(e)).next();if((n=io[r.toUpperCase()])||Vn(e,r,"type name"),n!==fo){r=Zn(e);var d=1&(r=jo[r.toUpperCase()]),m=r>>1;if(d|m&&e.next(),"EMPTY"===(r=Zn(e)))if(e.next(),d=n[1])var g=new d([]);else n!==ho&&(g=new L([]),n===go&&(g=new O(g)));else if("("===r){if(g=n[0],n=n[1]){var v=[];if(Xn(e,0),g===bo){var w="("!==Zn(e);do{v.push(g(e,d,m,w))}while(Yn(e))}else do{v.push(g(e,d,m))}while(Yn(e));Xn(e,1),d=new n(v)}else d=g(e,d,m);g=d}else Vn(e,r,'"Z", "M", "ZM", "(" or "EMPTY"');e.next()&&Vn(e,r,"end of stream")}return g||z}function ko(e){this.a=e}function Zn(e){var n=e.b;if(n===B){for(n=e.a;n.Pb()===lo;)n.next();if(mo[n.Pb()])n=(n=n.next())===no?"":String.fromCharCode(n);else{n.ge();do{n.next()}while(!mo[n.Pb()]);n=String.fromCharCode.apply(null,n.Gd())}e.b=n}return n}ko.prototype.next=function(){var e=Zn(this);return""!==e&&delete this.b,e};var lo=32,no=-1,oo={$o:lo,Uo:40,Zo:41,Ro:44,So:no},mo=Object.keys(oo).reduce(function(e,n){return e[oo[n]]=!0,e},oc());function po(){}function qo(e){this.c=String(e),this.f=0,this.a=[],this.b=!1}function ro(e,n){ro.j.constructor.call(this,Ki,n),this.de(e)}function so(){return Hf("H-core","1.49.1","74e5afb",{region:"row"})}t("H.util.ICharStream",po),po.prototype.next=function(){},po.prototype.ge=function(){},po.prototype.Gd=function(){},po.prototype.Pb=function(){},t("H.util.CharStream",qo),qo.prototype.next=function(){var e=this.c.charCodeAt(this.f++);return e=isNaN(e)?-1:e,this.b&&this.a.push(e),e},qo.prototype.ge=function(){this.b=!0,this.a=[]},qo.prototype.Gd=function(){var e=this.a.slice();return this.b=!1,this.a=[],e},qo.prototype.Pb=function(){var e=this.c.charCodeAt(this.f);return isNaN(e)?-1:e},t("H.util.wkt.toGeometry",function(e){return Wn(new qo(e))}),u(ro,uh),t("H.map.Rect",ro),ro.prototype.de=function(e){if(!C(e,K))throw new D(this.de,0,e);e.ia(this.aa)||(this.aa=this.D=e,this.a!==z&&ro.j.da.call(this,Ci(e)))},ro.prototype.setBoundingBox=ro.prototype.de,ro.prototype.K=function(){return this.D},ro.prototype.getBoundingBox=ro.prototype.K,ro.prototype.da=function(){return this},ro.prototype.setGeometry=ro.prototype.da,ro.prototype.ga=function(){return this.a===Ki&&ro.j.da.call(this,Ci(this.aa)),this.a},ro.prototype.getGeometry=ro.prototype.ga,t("H.buildInfo",so);var Mn="cn"===so().region,jk=kk[Mn?"HARP":"WEBGL"],to,uo="maps".concat("js-"),vo,wo,xo,yo,zo;if(vo=x.document.querySelector('script[src*="'+uo+'"]'),!vo)for(wo=x.document.getElementsByTagName("script"),yo=new RegExp("^.*"+uo),zo=0,xo=wo.length;zo<xo;zo++)if(yo.test(wo[zo].src)){vo=wo[zo];break}function Ao(){var e=decodeURIComponent(to);if(e){e="/"===e[e.length-1]?e.substring(0,e.length-1):e;var n=x.document,r="";n?((n=n.createElement("a")).href=e,r=n.href):/[\w]+:\/\//.test(e)&&(r=e),(e=new URL(r)).pathname+="/"===e.pathname[e.pathname.length-1]?"styles":"/styles",e=e.toString()}else e="https://js.api.here.com/v3/3.1.49.1/styles";return e}function Bo(e){var n=e.ownerDocument;n=n.documentElement||n.body.parentNode||n.body;try{var r=e.getBoundingClientRect()}catch{r={top:0,right:0,bottom:0,left:0,height:0,width:0}}return{x:r.left+("number"==typeof window.pageXOffset?window.pageXOffset:n.scrollLeft),y:r.top+("number"==typeof window.pageYOffset?window.pageYOffset:n.scrollTop)}}to=vo?vo.src.replace(/\/[^\/]*$/,"/"):"",t("H.getScriptPath",function(){return to}),t("H.getStylePath",Ao);var Co=function(){return this}.apply(null);function Do(e,n,r,d,m,g){if(isNaN(e))throw Error("x needs to be a number");if(isNaN(n))throw Error("y needs to be a number");if(isNaN(r))throw Error("pointer must have an id");this.viewportX=e,this.viewportY=n,this.target=null,this.id=r,this.type=d,this.dragTarget=null,this.button=vc(m)?m:-1,this.buttons=vc(g)?g:0,this.a=this.button}function Eo(e,n,r){if(isNaN(n))throw Error("x needs to be a number");if(isNaN(r))throw Error("y needs to be a number");e.viewportX=n,e.viewportY=r}function Fo(e,n){e.a=n,e.buttons|=Go[+n]||0}function Ho(e,n){e.a=n,e.buttons&=~(Go[+n]||0)}t("H.mapevents.Pointer",Do),Do.prototype.tm=function(){return this.a},Do.prototype.getLastChangedButton=Do.prototype.tm;var Go=[1,4,2],Io={NONE:-1,LEFT:0,MIDDLE:1,RIGHT:2};function Jo(e,n,r,d,m,g,v){Jo.j.constructor.call(this,e),this.pointers=n,this.changedPointers=r,this.targetPointers=d,this.currentPointer=m,this.originalEvent=v,this.target=g}function Ko(e){this.a=e instanceof Array?e.slice(0):[]}function Lo(e,n){return-1!==(n=e.indexOf(n))?e.a[n]:null}function Mo(e,n){for(var r=e.a.length,d=[];r--;)e.a[r].type!==n&&d.push(e.a[r]);e.a=d}function No(e,n){for(var r=e.a.length;r--;)if(e.a[r].dragTarget===n)return!0;return!1}function Oo(e,n,r){if(r=r||{},!(e instanceof U))throw Error("events: map instance required");if(!(n instanceof Array))throw Error("events: map array required");qd.call(this),this.Tg=r.Tg||300,this.gj=r.gj||50,this.Zk=r.Zk||50,this.$k=r.$k||500,this.Ch=r.Ch||900,this.Bh=r.Bh||8,this.map=e,this.m=this.map.b,this.f=this.m.element,this.D=n,this.a=new Ko,this.b=new Ko,this.l={},this.c=null,this.u=!0,this.U={},this.g={},this.s=null,this.te=A(this.te,this),this.P={pointerdown:this.Bl,pointermove:this.Cl,pointerup:this.Dl,pointercancel:this.Al},Po(this)}function Po(e,n){var r,d=e.D.length;for(r=0;r<d;r++){var m=e.D[r],g=m.listener;"function"==typeof g&&(n?(m.target||e.f).removeEventListener(m.Sa,g):(m.target||e.f).addEventListener(m.Sa,g))}}function Qo(e,n,r){var d;if("function"==typeof e.P[n]){"pointermove"!==n&&(e.u=!0);var m=0;for(d=e.b.length();m<d;m++){var g=e.b.a[m]||null;e.f.contains(r.composedPath()[0])?Ro(e,g,e.nj.bind(e,r,n,g)):e.nj(r,n,g,null)}}e.b.clear()}function Ro(e,n,r){if(e.c===n)r(n.target);else{var d=e.m,m=n.viewportX;if(n=n.viewportY,0>m||0>n||m>=d.width||n>=d.height)r(z);else{var g=e.map;g.Od(m,n,function(v){r(v||g)})}}}function To(e,n,r){n===e.c&&(Uo(e,n.dragTarget,"dragend",r,n),e.c=null,So(n.id,e.U)),n.dragTarget=null}function So(e,n){n[e]&&(n[e].timeout?clearTimeout(n[e].timeout):clearTimeout(n[e]),delete n[e])}function Vo(e,n,r){var d=n.target,m=new J(n.viewportX,n.viewportY),g=n.id;So(g,e.g);var v=setTimeout(function(){d&&d===n.target&&m.Wa({x:n.viewportX,y:n.viewportY})<e.Bh&&(Uo(e,d,"longpress",r,n),delete e.l[n.id])},e.Ch);e.g[g]={timeout:v,Se:m}}function Uo(e,n,r,d,m){if(n&&"function"==typeof n.dispatchEvent){var k,g=Jo,v=e.a.La(),w=e.b.La(),j=(e=e.a).a.length,G=[];for(k=0;k<j;k++)e.a[k].target===n&&G.push(e.a[k]);g=new g(r,v,w,G,m,n,d),m.button=/^(?:longpress|(?:dbl)?tap|pointer(?:down|up))$/.test(r)?m.a:Io.NONE,n.dispatchEvent(g)}return g}function Wo(e){this.i=A(this.i,this),Oo.call(this,e,[{Sa:"touchstart",listener:this.i},{Sa:"touchmove",listener:this.i},{Sa:"touchend",listener:this.i},{Sa:"touchcancel",listener:this.i}]),this.L={touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",touchcancel:"pointercancel"},this.J=(e=(e=e.s)?e.N():null)?Array.prototype.slice.call(e.querySelectorAll("a"),0):[]}function Xo(e){var n=Yo(this);(window.PointerEvent||window.MSPointerEvent)&&n.push({Sa:"MSHoldVisual",listener:"prevent"}),Oo.call(this,e,n)}function Yo(e){var r,n=!!window.PointerEvent,m=[];return e.i=A(e.i,e),"MSPointerDown MSPointerMove MSPointerUp MSPointerCancel MSPointerOut MSPointerOver".split(" ").forEach(function(g){r=g.toLowerCase().replace(/ms/g,""),m.push({Sa:n?r:g,listener:e.i,target:/^pointer(up|move)$/.test(r)?window:null})}),m}Do.Button=Io,u(Jo,ud),t("H.mapevents.Event",Jo),p=Ko.prototype,p.clear=function(){this.a.splice(0,this.a.length)},p.length=function(){return this.a.length},p.indexOf=function(e){for(var n=this.a.length;n--;)if(this.a[n].id===e)return n;return-1},p.remove=function(e){return-1!==(e=this.indexOf(e))?this.a.splice(e,1)[0]:null},p.push=function(e){if(e instanceof Do)return this.a.push(e);throw Error("list needs a pointer")},p.La=function(){return this.a},p.clone=function(){return new Ko(this.a)},u(Oo,qd),p=Oo.prototype,p.nj=function(e,n,r,d){So(r.id,this.U),this.P[n].call(this,r,d,e)},p.Dl=function(e,n,r){var d=e.id;e.target=n,To(this,e,r),Uo(this,n,"pointerup",r,e),"mouse"!==e.type&&Uo(this,n,"pointerleave",r,e);var g=r.timeStamp,v=e.target,w=this.s;(n=this.l[e.id])&&n.target===v&&n.Se.Wa({x:e.viewportX,y:e.viewportY})<this.Zk&&g-n.Hi<this.$k?(Uo(this,v,"tap",r,e),w&&w.target===v&&g-w.Hi<this.Tg?w.Se.Wa({x:e.viewportX,y:e.viewportY})<this.gj&&(Uo(this,v,"dbltap",r,e),this.s=null):this.s={target:v,Se:new J(e.viewportX,e.viewportY),Hi:r.timeStamp}):this.s=null,this.l={},So(d,this.g)},p.te=function(e,n){var r=this;Uo(this,e.dragTarget,"drag",n,e),So(e.id,this.U),this.U[e.id]=setTimeout(function(){r.te(e,n)},150)},p.Cl=function(e,n,r){var d=e.dragTarget,m=e.id,g=e.target;e.target=n,g!==n&&(Uo(this,g,"pointerleave",r,e),Uo(this,n,"pointerenter",r,e)),d?this.c?(this.te(e,r),this.g[m]&&this.g[m].Se.Wa({x:e.viewportX,y:e.viewportY})>this.Bh&&So(m,this.g)):this.u?this.u=!1:(this.c=e,Uo(this,d,"dragstart",r,e),this.te(e,r),delete this.l[m],this.u=!0):(!this.c||this.c&&this.c.dragTarget!==n&&this.c.dragTarget!==this.map)&&Uo(this,n,"pointermove",r,e)},p.Bl=function(e,n,r){var d=!(/^(?:mouse|pen)$/.test(e.type)&&0!==r.button);if(n){e.target=n,this.l[e.id]={Se:new J(e.viewportX,e.viewportY),target:e.target,Hi:r.timeStamp},"mouse"!==e.type&&Uo(this,n,"pointerenter",r,e);var m=Uo(this,n,"pointerdown",r,e);!this.c&&d&&(n.draggable&&!No(this.a,n)?e.dragTarget=n:!this.map.draggable||m.defaultPrevented||No(this.a,this.map)||(e.dragTarget=this.map)),Vo(this,e,r)}},p.Al=function(e,n,r){var d=e.id;e.target=null,n?(Uo(this,n,"pointerleave",r,e),Uo(this,n,"pointercancel",r,e)):Uo(this,this.map,"pointercancel",r,e),To(this,e,r),this.l={},So(d,this.g)},p.o=function(){Po(this,!0),this.a.clear(),this.b.clear();var n,e=this.U;for(n in e)So(n,e);for(var r in e=this.g)So(r,e);delete this.f,delete this.D,delete this.a,delete this.b,delete this.map,this.s=null,delete this.l,this.c=null,qd.prototype.o.call(this)},u(Wo,Oo),Wo.prototype.i=function(e){var d,n=e.touches,r=this.a.length();if("touchstart"===e.type&&r>=n.length){for(r=this.a.clone(),d=n.length;d--;)r.remove(n[d].identifier);for(d=r.length();d--;)this.a.remove((r.a[d]||null).id);this.b=r,Qo(this,"pointercancel",e),this.b.clear()}if(this.L[e.type]){n=Bo(this.m.element),r=e.type;var g,m=(d=e.changedTouches).length;for(this.b.clear(),g=0;g<m;g++){var v=d[g],w=Lo(this.a,v.identifier),k=v.pageX-n.x,j=v.pageY-n.y;if(w)if("touchmove"===r){v=Math.abs(w.viewportX-k);var G=Math.abs(w.viewportY-j);(1<v||1<G||1===v&&1===G)&&(Eo(w,k,j),this.b.push(w))}else"touchend"===r&&(this.a.remove(w.id),this.b.push(w),Ho(w,Io.LEFT));else w=new Do(k,j,v.identifier,"touch",Io.LEFT,1),this.a.push(w),this.b.push(w)}Qo(this,this.L[e.type],e),-1===this.J.indexOf(e.target)&&e.preventDefault()}},Wo.prototype.o=function(){this.J=null,Oo.prototype.o.call(this)},u(Xo,Oo);var Zo={2:"touch",3:"pen",4:"mouse"};function $o(e,n,r,d){$o.j.constructor.call(this,"contextmenu"),this.items=[],this.viewportX=e,this.viewportY=n,this.target=r,this.originalEvent=d}function ap(e){this.ph=A(this.ph,this),this.rh=A(this.rh,this),this.qh=A(this.qh,this),this.J=!1,this.i=-1,this.L=0,ap.j.constructor.call(this,e,[{Sa:"contextmenu",listener:this.ph},{target:e,Sa:"longpress",listener:this.rh},{target:e,Sa:"dbltap",listener:this.qh}])}function bp(e,n,r,d,m){var g=e.map,v=Date.now()-e.L;m?!e.J&&v>e.Ch&&(e.J=!0,m.dispatchEvent(new $o(n,r,m,d)),Fe(g.N(),cp,e.mj,!1,e)):g.Od(n,r,e.Jn.bind(e,n,r,d))}Xo.prototype.i=function(e){var n=window.PointerEvent?e.type:e.type.toLowerCase().replace(/ms/g,""),r=Bo(this.f),d=Lo(this.a,e.pointerId),m=e.pageX-r.x;r=e.pageY-r.y;var g=Zo[e.pointerType]||e.pointerType;if(cd&&"rtl"===x.getComputedStyle(this.m.element).direction&&(m-=(x.devicePixelRatio-1)*this.m.width),!(d||/^pointer(up|out|cancel)$/.test(n)||"touch"===g&&"pointerdown"!==n)){var v=e.pointerType;"number"==typeof v&&(v=Zo[v]),d=new Do((d={x:m,y:r}).x,d.y,e.pointerId,v,e.button,e.buttons),this.a.push(d)}d&&(/^pointer(up|cancel)$/.test(n)?("touch"===g&&this.a.remove(d.id),Ho(d,e.button)):"pointerdown"===n&&("touch"===e.pointerType&&(Mo(this.a,"mouse"),Mo(this.a,"pen")),Fo(d,e.button)),this.b.push(d),"pointermove"!==n?(Eo(d,m,r),Qo(this,/^pointer(over|out)$/.test(n)?"pointermove":n,e)):(d.viewportX!==m||d.viewportY!==r)&&(Eo(d,m,r),Qo(this,n,e))),this.b.clear()},u($o,ud),t("H.mapevents.ContextMenuEvent",$o),u(ap,Oo),p=ap.prototype,p.rh=function(e){var n=e.currentPointer;"touch"===n.type&&1===e.pointers.length&&bp(this,n.viewportX,n.viewportY,e.originalEvent,e.target)},p.qh=function(e){"touch"===e.currentPointer.type&&(this.L=Date.now())},p.ph=function(e){var n=this;-1===this.i?this.i=setTimeout(function(){var r=Bo(n.f),d=e.pageX-r.x;r=e.pageY-r.y,n.i=-1,bp(n,d,r,e)},this.Tg):(clearInterval(this.i),this.i=-1),e.preventDefault()},p.Jn=function(e,n,r,d){bp(this,e,n,r,d=d&&Da(d.dispatchEvent)?d:this.map)},p.mj=function(){this.J&&(this.J=!1,this.map.dispatchEvent(new ud("contextmenuclose",this.map)))},p.o=function(){var e=this.map.N();clearInterval(this.i),e&&Me(e,cp,this.mj,!1,this),Oo.prototype.o.call(this)};var cp=["mousedown","touchstart","pointerdown","wheel"];function dp(e,n,r,d,m){dp.j.constructor.call(this,"wheel"),this.delta=e,this.viewportX=n,this.viewportY=r,this.target=d,this.originalEvent=m}function ep(e){var n="onwheel"in document;this.T=n,this.L=(n?"d":"wheelD")+"elta",this.i=A(this.i,this),ep.j.constructor.call(this,e,[{Sa:(n?"":"mouse")+"wheel",listener:this.i}]),this.J=this.map.b}function fp(e){this.i=A(this.i,this),Oo.call(this,e,[{Sa:"mousedown",listener:this.i},{Sa:"mousemove",listener:this.i,target:window},{Sa:"mouseup",listener:this.i,target:window},{Sa:"mouseover",listener:this.i},{Sa:"mouseout",listener:this.i},{Sa:"dragstart",listener:this.J}])}function gp(e){var n=e.b.element.style;if(-1!==hp.indexOf(e))throw Error("InvalidArgument: map is already in use");this.a=e,hp.push(e),n.msTouchAction=n.touchAction="none",dd||!window.PointerEvent&&!window.MSPointerEvent?(this.c=new Wo(this.a),this.b=new fp(this.a)):this.c=new Xo(this.a),this.g=new ep(this.a),this.f=new ap(this.a),this.a.tb(this.F,this),qd.call(this)}u(dp,ud),t("H.mapevents.WheelEvent",dp),u(ep,Oo),ep.prototype.i=function(e){if(!e.kl){var n=Bo(this.f),r=e.pageX-n.x;n=e.pageY-n.y;var g,d=this.L,m=e[d+(d+"Y"in e?"Y":"")];if(cd&&"rtl"===x.getComputedStyle(this.J.element).direction&&(r-=(x.devicePixelRatio-1)*this.J.width),m){var v=Math.abs,w=v(m);m=(!(g=e[d+"X"])||3<=w/v(g))&&(!(g=e[d+"Z"])||3<=w/v(g))?(+(0<m)-+(0>m))*(this.T?1:-1):0}(r=new dp(m,r,n,null,e)).delta&&(e.stopImmediatePropagation(),e.preventDefault(),this.map.Od(r.viewportX,r.viewportY,this.R.bind(this,r)))}},ep.prototype.R=function(e,n){var d,m,r=e.target=n||this.map;setTimeout(function(){r.dispatchEvent(e),e.c||((m=new x.WheelEvent("wheel",d=e.originalEvent)).kl=!0,d.target.dispatchEvent(m))},0)},u(fp,Oo),fp.prototype.i=function(e){var d,n=e.type,r=Bo(this.f);r={x:e.pageX-r.x,y:e.pageY-r.y},(d=this.a.a[0]||null)||(d=new Do(r.x,r.y,1,"mouse"),this.a.push(d)),this.b.push(d),Eo(d,r.x,r.y),/^mouse(?:move|over|out)$/.test(n)?Qo(this,"pointermove",e):(/^mouse(down|up)$/.test(n)&&(r=e.which-1,"up"===Co.RegExp.$1?Ho(d,r):Fo(d,r)),Qo(this,n.replace("mouse","pointer"),e)),this.b.clear()},fp.prototype.J=function(e){e.preventDefault()},u(gp,qd),t("H.mapevents.MapEvents",gp);var hp=[];function ip(e,n){var r;if(n=void 0===n?{}:n,ip.j.constructor.call(this),-1!==jp.indexOf(e))throw new D(ip,0,"events are already used");this.b=r=e.a,this.l=e,jp.push(e),r.draggable=!0,this.i=n.kinetics||{duration:600,ease:em},this.s=n.modifierKey||"Alt",this.enable(n.enabled),this.c=r.b,this.f=this.c.element,this.g=0,r.addEventListener("dragstart",this.Mh,!1,this),r.addEventListener("drag",this.bk,!1,this),r.addEventListener("dragend",this.Lh,!0,this),r.addEventListener("wheel",this.rk,!1,this),r.addEventListener("dbltap",this.lk,!1,this),r.addEventListener("pointermove",this.ck,!1,this),Ee(this.f,"contextmenu",this.ak,!1,this),e.tb(this.F,this)}Ic(hp),gp.prototype.F=function(){delete this.a,this.c.F(),this.g.F(),this.f.F(),this.b&&this.b.F(),hp.splice(hp.indexOf(this.a),1),qd.prototype.F.call(this)},gp.prototype.dispose=gp.prototype.F,gp.prototype.Nl=function(){return this.a},gp.prototype.getAttachedMap=gp.prototype.Nl,u(ip,qd),t("H.mapevents.Behavior",ip);var jp=[];Ic(jp),ip.prototype.a=0;var kp={PANNING:1,PINCH_ZOOM:2,WHEEL_ZOOM:4,DBL_TAP_ZOOM:8,FRACTIONAL_ZOOM:16,TILT:32,HEADING:64};ip.Feature=kp;var lp=kp.PANNING,mp=kp.PINCH_ZOOM,np=kp.WHEEL_ZOOM,op=kp.DBL_TAP_ZOOM,pp=kp.FRACTIONAL_ZOOM,qp=kp.TILT,rp=kp.HEADING,sp=lp|mp|np|op|pp|qp|rp;function tp(e,n){if(e!==+e||e%1||0>e||2147483647<e)throw new D(n,0,"integer in range [0...0x7FFFFFFF] required")}function up(e,n,r){var g,d="touch"===n.currentPointer.type,m=0;if(g=!d){g=e.s;var v,w=n.originalEvent;v=w.getModifierState?w.getModifierState(g):!!w[g.replace(/^Control$/,"ctrl").toLowerCase()+"Key"],g=v}return g?m|=qp|rp:(m|=lp,d&&2===(n=n.pointers).length&&(m|=mp|rp,r?55>Dd(n[0].viewportY-n[1].viewportY)&&(m|=qp):e.uh&Nl.TILT&&(m|=qp))),((m&=e.a)&qp?Nl.TILT:0)|(m&rp?Nl.HEADING:0)|(m&mp?Nl.ZOOM:0)|(m&lp?Nl.COORD:0)}function vp(e){var n=e.pointers;return e=[(e=n[0]).viewportX,e.viewportY],(n=n[1])&&e.push(n.viewportX,n.viewportY),e}function wp(e,n,r,d,m){var g=+r-+n;if(e=e.b.c,isNaN(+n))throw Error("start zoom needs to be a number");if(isNaN(+r))throw Error("to zoom needs to be a number");0!==g&&(e.startControl(null,d,m),e.control(0,0,6,0,0,0),e.endControl(!0,function(v){v.zoom=r}))}function xp(e){return e=e.uc("_#-;,:","_#-;,:","_#-;,:"),new RegExp("^"+e.replace(/[.*+?^${}()|[\]\\\/]/g,"\\$&").replace(/_#-;,:/g,"\\d+")+"$")}function yp(e,n){return Ya.apply(null,arguments),e}function zp(e,n){var r=x.console;r&&r.warn&&(e=yc(e)+" is deprecated and will be removed soon. ",n&&(e+=n),r.warn(e))}ip.DRAGGING=lp,ip.WHEELZOOM=np,ip.DBLTAPZOOM=op,ip.FRACTIONALZOOM=pp,ip.prototype.disable=function(e){var n=this.a;e!==B?(tp(e,this.disable),n^=n&e):n=0,this.c.endInteraction(!0),this.a=n,this.b.draggable=0<(n&(lp|qp|rp|mp))},ip.prototype.disable=ip.prototype.disable,ip.prototype.enable=function(e){var n=this.a;e!==B?(tp(e,this.enable),n|=e&sp):n=sp,this.a=n,this.b.draggable=0<(n&(lp|qp|rp|mp))},ip.prototype.enable=ip.prototype.enable,ip.prototype.isEnabled=function(e){return tp(e,this.isEnabled),e===(this.a&e)},ip.prototype.isEnabled=ip.prototype.isEnabled,p=ip.prototype,p.uh=0,p.Mh=function(e){var n=up(this,e,!0);if(this.uh=n){var r=this.c;if(e=vp(e),r.startInteraction(n,this.i),r.interaction.apply(r,e),this.a&np&&!(this.a&pp)&&(n=e[0],r=e[1],this.g)){e=this.b.pb();var d=(0>this.g?Cd:Bd)(e);e!==d&&(this.g=0,wp(this,e,d,n,r))}}},p.bk=function(e){var n=up(this,e,!1);if(n!==this.uh)"pointerout"!==e.originalEvent.type&&"pointerover"!==e.originalEvent.type&&(this.Lh(e),this.Mh(e));else if(n){n=this.c;var r=vp(e);n.interaction.apply(n,r),e.originalEvent.preventDefault()}},p.Lh=function(e){up(this,e,!1)&&this.c.endInteraction(!this.i)},p.rk=function(e){if(!e.defaultPrevented&&this.a&np){var n=e.delta,r=this.b.pb(),d=this.b,m=d.f.type;d=this.a&pp?r-n:(0>-n?Cd:Bd)(r)-n,(m===kk.P2D||m===kk.WEBGL||m===kk.HARP)&&(wp(this,r,d,e.viewportX,e.viewportY),this.g=n),e.preventDefault()}},p.ck=function(){},p.lk=function(e){var n=e.currentPointer,r=this.b.pb(),m=this.b.f.type;(m===kk.P2D||m===kk.WEBGL||m===kk.HARP)&&this.a&op&&(e="mouse"===e.currentPointer.type?0===e.originalEvent.button?-1:1:0<e.pointers.length?1:-1,wp(this,r,e=this.a&pp?r-e:(0>-e?Cd:Bd)(r)-e,n.viewportX,n.viewportY))},p.ak=function(e){return!(this.a&op&&(e.preventDefault(),1))},p.F=function(){var e=this.b;e&&(e.draggable=!1,e.removeEventListener("dragstart",this.Mh,!1,this),e.removeEventListener("drag",this.bk,!1,this),e.removeEventListener("dragend",this.Lh,!0,this),e.removeEventListener("wheel",this.rk,!1,this),e.removeEventListener("dbltap",this.lk,!1,this),e.removeEventListener("pointermove",this.ck,!1,this),delete this.b),this.f&&(this.f.style.msTouchAction="",Me(this.f,"contextmenu",this.ak,!1,this),delete this.f),delete this.c,delete this.i,jp.splice(jp.indexOf(this.l),1),delete this.l,qd.prototype.F.call(this)},ip.prototype.dispose=ip.prototype.F,t("H.mapevents.buildInfo",function(){return Hf("H-mapevents","1.49.1","74e5afb",{region:"row"})}),S.prototype.J=ca(3,function(e){var n=this.getCache(),r=this;if(e!==z){C(e,Rk,S.prototype.J,0);var d=e}else d=yl;d!==n&&n.na(function(m,g,v){return!!r.ub(m)&&(d.add(m,g,v),!0)}),this.P=d}),ti.prototype.a=ca(2,function(e){this.f=e,(e=this.getState())!==Xh.INIT&&e!==Xh.LOADING&&Ai(this)});var Ap=globalThis;function Bp(){}tc("monospace serif"),Bp.prototype.pop=function(e){return this[e]||(this[e]=[]),this[e].pop()||document.createElement("canvas")},Bp.prototype.push=function(e,n){this[n]||(this[n]=[]),this[n].push(e)};var Cp=new Bp;function W(e,n,r,d,m,g){if(!e||!n)throw new D(W,B,'Parameters "scheme" and "host" must be specified');this.Bi(e),this.af(n),this.wd(r),this.xi(m),this.Lk(g),this.bf(d)}function Dp(e,n){var d,k,j,r=x.document,m="";if(r){if(m=r.createElement("a"),n){var g=(d=r.getElementsByTagName("base")[0])&&d.href,v=r.head,w=d||v.appendChild(r.createElement("base"));w.href=n}m.href=e,m=m.href,n&&(d?d.href=g:v.removeChild(w))}else/[\w]+:\/\//.test(e)&&(m=e);if(e=(g=/(?:(\w+):\/\/)?(?:([^:]+):([^@/]*)@)?([^/:]+)?(?:[:]{1}([0-9]+))?(\/[^?#]*)?(\?[^#]+)?(#.*)?/.exec(m))[1],v=g[4],n=g[5],w=g[6],r=g[7],d=g[8],!g[2]&&v&&/@/.test(v)&&(v=v.split("@")[1]),g=W,w=w&&0<w.length?w.substr(1):"",m={},r)for(k=/([?&]?([^=&+]+))(=([^&]+))?/g;j=k.exec(r);)m[decodeURIComponent(j[2])]=j[4]?decodeURIComponent(j[4]):void 0;return new g(e,v,w,m,isNaN(+n)?void 0:+n,d&&0<d.length?d.substr(1):"")}function Gp(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(n){return"%"+n.charCodeAt(0).toString(16)})}function Fp(e){var m,n=[],r=e.a,d={};for(m in r){if(r.hasOwnProperty(m)&&"function"!=typeof r[m]){var g=e.a[m];d.yd=Gp(m),C(g,Hp)?g.a.forEach(function(v){return function(w){n.push(v.yd+"="+Gp(w))}}(d)):C(g,Ip)?n.push(d.yd+"="+g.b.map(function(v){return Gp(v)}).join(g.a)):n.push(void 0===g?d.yd:d.yd+"="+Gp(g))}d={yd:d.yd}}return 0<n.length?"?"+n.join("&"):""}function Jp(e){var n=Hf("H-service","1.49.1","74e5afb",{region:"row"});return e.a.xnlp="CL_JSMv3."+n.version,e}function Ep(e){var n,r=0;for(n in e.a)if(e.a.hasOwnProperty(n)&&"function"!=typeof e.a[n]&&0<++r)break;return!r}function Kp(e,n){if(Bc(e))for(var r=0;r<e.length;r++){var d=e[r];if(!Cc(d)&&!Fc(d)){var m="The Array does not contain only strings and numbers";break}}else m="Not an Array";if(m)throw new D(n,0,e);return e}function Hp(e){this.a=Kp(e,Hp)}function Ip(e,n){if(this.b=Kp(e,Ip),!/^[!\$\(\)\*\+,;]$/.test(n))throw new D(Ip,1,'Invalid delimiter "'+n+'"');this.a=n}function Lp(e,n){C(e,Mp,Lp,0);var r={};Object.assign(r,n),r.min=r.min||0,r.max=r.max||20,r.tileSize=r.tileSize||512,r.getURL=function(d,m,g){return e.v().clone().G(e.b.og+"/"+e.b.eg+"/"+g+"/"+d+"/"+m+"/"+e.b.format).I(e.f).clone().I({size:r.tileSize})},Ek.call(this,r),this.i=e}function X(e){var n=(e=yp({},this.b,e)).apikey||e.apiKey,r=e.baseUrl;if(r=n?r?0:"baseUrl":"apikey")throw new D(X,0,'"'+r+'" must be specified');this.Nk(e.baseUrl),this.a=n,this.Yb.I({apikey:n}),this.c=e.headers||{},this.f=Wa(e.servicesConfig||{})}function Op(e,n){if(n=void 0===n?{}:n,!e.Qf)throw new $c(e);Op.j.constructor.call(this);var r=Pp(this,n);if(!r.baseUrl&&!r.platformBaseUrl)throw new D(e,0,'either "baseUrl" or "platformBaseUrl" must be specified');this.i=(r.baseUrl?r.baseUrl:r.platformBaseUrl).clone(),(e=r.baseUrl?n:r).host&&this.i.af(e.host),e.subDomain&&this.i.Ba(e.subDomain),e.path&&this.i.wd(e.path),Jp(this.i),this.g=r.headers||{}}function Pp(e,n){return e=e.Aa(),n?yp({},e,n):e}function Qp(e,n,r){return function(d){return"function"!=typeof d.json?Promise.reject(r(Rp(n,d))):d.json().then(function(m){return r(e.a(m))},function(){return r(Rp(n,d))})}}function Rp(e,n){return Error((n.statusText?"["+n.statusText+"] ":"")+e+" request failed")}function Sp(e){Sp.j.constructor.call(this,Sp,e)}function Tp(e){if(!e||!Da(e.requestData))throw new D(Tp,0,"options.requestData");Tp.j.constructor.call(this,e),this.L=e.requestData,this.D=!!e.providesDomMarkers}function Up(){this.a={}}t("H.service.util.eval",function(a){return eval(a)}),t("H.service.Url",W),W.parse=Dp,W.prototype.clone=function(){var n,e={};for(n in this.a)e[n]=this.a[n];return new W(this.i,this.c,this.b,e,this.g,this.f)},W.prototype.clone=W.prototype.clone,W.prototype.Bi=function(e){if(!e||"string"!=typeof e)throw new D(this.Bi,0,'The "scheme" parameter must be a non-empty string.');return this.i=e,this},W.prototype.setScheme=W.prototype.Bi,W.prototype.Vm=function(){return this.i},W.prototype.getScheme=W.prototype.Vm,W.prototype.af=function(e){if(!e||"string"!=typeof e||"-"===e.charAt(0)||"."===e.charAt(0)||"."===e.charAt(e.length-1))throw new D(this.af,0,'The "host" parameter is not a valid host name.');return this.c=e,this},W.prototype.setHost=W.prototype.af,W.prototype.om=function(){return this.c},W.prototype.getHost=W.prototype.om,W.prototype.wd=function(e){return this.b=e||void 0,this},W.prototype.setPath=W.prototype.wd,W.prototype.Hm=function(){return this.b},W.prototype.getPath=W.prototype.Hm,W.prototype.bf=function(e){if(e){if("object"!=typeof e)throw new D(this.bf,0,'Parameter "params" must be an object.');this.a=e}else this.a={};return this},W.prototype.setQuery=W.prototype.bf,W.prototype.Mj=function(){return!Ep(this)},W.prototype.hasQuery=W.prototype.Mj,W.prototype.getQuery=function(){return this.a},W.prototype.getQuery=W.prototype.getQuery,W.prototype.xi=function(e){if(void 0===e)this.g=e;else{var n=ae(+e<<0,0,65535);if(n!=e)throw new D(this.xi,0,'Parameter "port" must be an integer in range [0...65535]');this.g=n}return this},W.prototype.setPort=W.prototype.xi,W.prototype.Mm=function(){return this.g},W.prototype.getPort=W.prototype.Mm,W.prototype.Lk=function(e){return this.f=e||void 0,this},W.prototype.setAnchor=W.prototype.Lk,W.prototype.kd=function(){return this.f},W.prototype.getAnchor=W.prototype.kd,W.prototype.I=function(e){if("object"!=typeof e)throw new D(this.I,0,'Parameter "other" must be an object.');var r,n=this.a;for(r in e)e.hasOwnProperty(r)&&"function"!=typeof e[r]&&(n[r]=e[r]);return this},W.prototype.mergeQuery=W.prototype.I,W.prototype.Ba=function(e){if(!e||"string"!=typeof e)throw new D(this.Ba,0,'Parameter "subDomain" must be a non-empty string');return"."===e.substr(e.length-1)&&(e=e.substr(0,e.length-1)),this.af(e+"."+this.c)},W.prototype.addSubDomain=W.prototype.Ba,W.prototype.G=function(e){if(!e||"string"!=typeof e)throw new D(this.G,0,'Parameter "subPath" must be a non-empty string');return this.wd((this.b?this.b+"/":"")+e)},W.prototype.addSubPath=W.prototype.G,W.prototype.toString=function(){return[this.i+"://",this.c,this.g?":"+this.g:"",this.b||!Ep(this)||this.f?"/":"",this.b?encodeURI(this.b):"",Fp(this),this.f?"#"+encodeURIComponent(this.f):""].join("")},W.prototype.toString=W.prototype.toString,W.MultiValueQueryParameter=Hp,Hp.prototype.fn=function(){return this.a},Hp.prototype.getValues=Hp.prototype.fn,W.DelimitedQuerySubValues=Ip,u(Lp,Ek),t("H.service.rasterTile.Provider",Lp),Lp.prototype.ba=function(e,n){var r=this.i;return Np(r.ba(),r.b.og+"."+r.V(),n,e)},Lp.prototype.getCopyrights=Lp.prototype.ba,Lp.prototype.l=function(){return od()},Lp.prototype.c=function(){return od()?nd():Lp.j.c.call(this)},t("H.service.Platform",X),X.prototype.b={apikey:null,baseUrl:new W("https","hereapi"+(Mn?".cn":".com"))},X.prototype.Nk=function(e){this.Yb=Jp(e.clone()),this.a=e=this.a,this.Yb.I({apikey:e})},X.prototype.setBaseUrl=X.prototype.Nk,X.prototype.Ib=function(){return this.Yb},X.prototype.getBaseUrl=X.prototype.Ib,X.prototype.Ma=function(e,n){try{return e.Qf=!0,new e(yp({platformBaseUrl:this.Ib(),headers:this.c},this.f[e.CONFIG_KEY]||{},n||{}))}finally{e.Qf=!1}},X.prototype.createService=X.prototype.Ma,X.prototype.xf=function(e,n,r){var d=this;if(!H.map.render.harp)throw Error("HARP engine module not found");if(!Ea(e)&&!Cc(e))throw new D(this.xf,0,"is invalid: must be either a configuration object or a URL");if(!Da(n))throw new D(this.xf,1,"is invalid: must be a Function");if(!Da(r))throw new D(this.xf,2,"is invalid: must be a Function");var m=new H.map.render.harp.Style(e);m.addEventListener("change",function(){var g=m.getState();if(-1===g)r(Error("H.service.platform#createHybridLayers method failed to load style configuration"));else if(2===g){g={dark:!0};var v=d.lh({resource:"background",queryParams:{style:"satellite.day"}}),w=m.qc(),k={styles:[{technique:"raster",attr:{gamma:1,brightness:1}}]};w.definitions&&(void 0!==w.definitions["Satellite.Texture.Gamma"]&&(k.styles[0].attr.gamma=w.definitions["Satellite.Texture.Gamma"]),void 0!==w.definitions["Satellite.Texture.Brightness"]&&(k.styles[0].attr.brightness=w.definitions["Satellite.Texture.Brightness"])),v=new Lp(v,{engineType:Qn,style:new H.map.render.harp.Style(k)}),n({raster:new sl(v,g),vector:d.He().$b(m,{engineType:Qn},g),traffic:d.oh().$b(m,{engineType:Qn},g)})}}),m.load()},X.prototype.createHybridLayers=X.prototype.xf,X.prototype.wf=function(e,n,r,d,m,g){function v(ly,dy,vy){dy=ly.f(dy),dy=_r?new ti(dy):new H.map.render.harp.Style(dy);var Sy,Ay={engineType:j};return q&&q.politicalView&&(Ay.politicalView=q.politicalView),r&&(Ay.lg=r),d&&(Ay.lg2=d),g&&(Ay.pois=g),vy&&(Sy={dark:vy}),ly.$b(dy,Ay,Sy)}function w(ly,dy,vy,Ay,Sy){return ly.nc(dy,vy,_s,Ay,ga,1,Sy,G)}var k=this,j=jk,G={crossOrigin:"anonymous"};if(Ea(e)){var q=e;"crossOrigin"in q&&(G.crossOrigin=q.crossOrigin),e=q.tileSize,n=q.ppi,r=q.lg,d=q.lg2,m=q.style,g=q.pois,void 0!==q.engineType&&(G.engineType=j=q.engineType)}var _t=j===kk.HARP,_r=j===kk.WEBGL,_s=e||512,ga={};if(0>[72,250,320,500].indexOf(+n)){if(n!==B)throw new D(this.wf,1,n)}else ga.ppi=+n;if(r&&(ga.lg=r),d&&(ga.lg2=d),m&&(ga.style=m),g&&(ga.pois=!!g),_t&&!H.map.render.harp)throw new D(this.wf,0,"HARP engine is not supported, module not found");if(e={},Mn)yp(e,{vector:{normal:{map:v(this.He(),"harp/oslo/normal.day.json")}}});else{m=this.ih();var _c=this.ih({type:"aerial"}),_u=this.nh(),_f=_u.ej(ga.lg?{lg:ga.lg,i18n:!0,engineType:j}:{engineType:j});if(yp(e,{raster:{normal:{xbase:w(m,"xbasetile","normal.day","png8",!1),xbasenight:w(m,"xbasetile","normal.night","png8",!0),base:w(m,"basetile","normal.day","png8",!1),basenight:w(m,"basetile","normal.night","png8",!0),map:w(m,"maptile","normal.day","png8",!1),mapnight:w(m,"maptile","normal.night","png8",!0),trafficincidents:_f,transit:w(m,"maptile","normal.day.transit","png8",!1),labels:w(m,"labeltile","normal.day","png",!1)},satellite:{xbase:w(_c,"xbasetile","hybrid.day","jpg",!0),base:w(_c,"basetile","hybrid.day","jpg",!0),map:w(_c,"maptile","hybrid.day","jpg",!0),labels:w(_c,"labeltile","hybrid.day","png",!0)},terrain:{xbase:w(_c,"xbasetile","terrain.day","jpg",!1),base:w(_c,"basetile","terrain.day","jpg",!1),map:w(_c,"maptile","terrain.day","jpg",!1),labels:w(_c,"labeltile","terrain.day","png",!1)}}}),_t||_r){if(yp(e,{vector:{normal:{traffic:_u.dj(void 0,j),trafficincidents:_f}}}),m=this.He(),_r?(e.vector.normal.map=v(m,"omv/miami/normal.day.yaml"),e.vector.normal.truck=v(m,"omv/miami/truck.day.yaml")):_t&&(e.vector.normal.map=v(m,"harp/oslo/normal.day.json"),e.vector.normal.truck=v(m,"harp/oslo/normal.day.json")),m=this.oh(),_t){var _h={ppi:72<n?400:100,size:256<_s?512:256,features:"pois:"+(!0===g||Cc(g)&&/[^0]/.test(g)?"all":"disabled")};r&&(_h.lang=r),d&&(_h.lang2=d),q&&q.politicalView&&(_h.pview=q.politicalView),n={dark:!0},_c=function(ly,dy,vy,Ay,Sy){var jy=yp({},_h);return/^explore\./.test(vy)||delete jy.features,new sl(Sy=new Lp(ly=k.lh({format:dy,resource:ly,queryParams:yp({style:vy},jy)}),{engineType:j,style:Sy}),Ay)},yp(e.raster.normal,{base:_c("background","png8","explore.day"),basenight:_c("background","png8","explore.night",n),map:_c("base","png8","explore.day"),mapnight:_c("base","png8","explore.night",n),labels:_c("label","png","explore.day")}),yp(e.raster.satellite,{xbase:_c("background","jpeg","satellite.day",n),base:_c("background","jpeg","explore.satellite.day",n),map:_c("base","jpeg","explore.satellite.day",n),labels:_c("label","png","explore.satellite.day")}),_u=this.He(),yp(e.vector.normal,{mapnight:v(_u,"harp/oslo/normal.night.json",!0),lite:v(_u,"harp/oslo/lite.day.json"),litenight:v(_u,"harp/oslo/lite.night.json",!0),ism:v(_u,"harp/oslo/ism.day.json"),ismnight:v(_u,"harp/oslo/ism.night.json",!0)}),_f={styles:[{technique:"raster",attr:{gamma:["interpolate",["linear"],["zoom"],0,1,13,1.2,17,1.3],brightness:["interpolate",["linear"],["zoom"],0,.7,13,.9,17,1]}}]};for(var ad=[],ey=0;4>ey;ey++){var sy=new H.map.render.harp.Style(JSON.parse(JSON.stringify(_f)));sy=_c("background","jpeg","satellite.day",n,sy),ad.push(sy)}e.hybrid={day:{raster:ad[0],vector:v(_u,"harp/oslo/hybrid.day.json",!0),traffic:v(m,"harp/oslo/hybrid.day.json",!0)},night:{raster:ad[1],vector:v(_u,"harp/oslo/hybrid.night.json",!0),traffic:v(m,"harp/oslo/hybrid.night.json",!0)},liteday:{raster:ad[2],vector:v(_u,"harp/oslo/lite.hybrid.day.json",!0),traffic:v(m,"harp/oslo/lite.hybrid.day.json",!0)},litenight:{raster:ad[3],vector:v(_u,"harp/oslo/lite.hybrid.night.json",!0),traffic:v(m,"harp/oslo/lite.hybrid.night.json",!0)}}}(n={traffic:{}}).traffic.map=v(m,_r?"traffic/vector.tile.yaml":"harp/oslo/normal.day.json"),_t&&(n.traffic.mapnight=v(m,"harp/oslo/normal.night.json"),n.traffic.lite=v(m,"harp/oslo/lite.day.json"),n.traffic.litenight=v(m,"harp/oslo/lite.night.json")),yp(e.vector,n)}}return e},X.prototype.createDefaultLayers=X.prototype.wf,u(Op,F),t("H.service.Service",Op),Op.prototype.Aa=function(){return{}},Op.prototype.v=function(){return this.i},Op.prototype.getUrl=Op.prototype.v,Op.prototype.B=function(e,n,r,d){return(d=new tf(void 0===d?"application/json":d,e.toString(),je,{headers:this.g})).then(n,Qp(this,e,r)),d},Op.prototype.a=function(e){return Error(e.message)},u(Sp,Op),t("H.service.traffic.Service7",Sp),Sp.prototype.Aa=function(){return{subDomain:"data.traffic",path:"v7"}},Sp.CONFIG_KEY="traffic_v7",Sp.prototype.qo=function(e,n,r,d){return e=this.v().clone().G(["incidents",e].join("/")).I(n||{}),this.B(e,r,d)},Sp.prototype.requestIncidentById=Sp.prototype.qo,Sp.prototype.oo=function(e,n,r){return e=this.v().clone().G("flow").I(e||{}),this.B(e,n,r)},Sp.prototype.requestFlowByArea=Sp.prototype.oo,Sp.prototype.so=function(e,n,r){return e=this.v().clone().G("incidents").I(e||{}),this.B(e,n,r)},Sp.prototype.requestIncidentsByArea=Sp.prototype.so,u(Tp,S),t("H.map.provider.MarkerTileProvider",Tp),Tp.prototype.B=function(e,n,r,d,m){var g=this;return this.L(e,n,r,function(v){for(var k,j,w=[],G=v.length;G--;)(j=v[G]).Ho=g.getTileKey(e,n,r),j.ka(g),k=j.xb(),(C(j,bj)||1===k.getState())&&w.push(v[G]);d(w)},m)},Tp.prototype.requestInternal=Tp.prototype.B,Tp.prototype.Td=function(e,n){n===kh.VISUAL&&(e=this.nb().get(e.Ho))&&(e.valid=!1,this.Va(e))},Tp.prototype.invalidateObject=Tp.prototype.Td,Tp.prototype.Qb=function(){return this.D},Tp.prototype.providesDomMarkers=Tp.prototype.Qb,Tp.prototype.Rb=ff,Tp.prototype.providesMarkers=Tp.prototype.Rb,Up.prototype.xb=function(e,n){var d,r=e+n;return(d=this.a[r])?d:(e=(e=Vp.MARKER.replace("{{icon}}",Wp[e]||Wp.OTHER)).replace("{{color}}",Xp[n]||Xp.BLOCKING),n={size:{w:26,h:33},anchor:{x:13,y:30},hitArea:new Xi(Yi.POLYGON,Yp.MARKER)},this.a[r]=d=new Wj(e,n))};var Vp={MARKER:'<svg width="26" height="33" enable-background="new 0 0 26 33" viewBox="0 0 26 33" xmlns="http://www.w3.org/2000/svg"><path d="m26 33h-26v-33h26z" fill="#8c8c8c" opacity="0"/><path d="m17 29.566c0 1.116-1.791 2.022-4 2.022s-4-.906-4-2.022c0-1.118 1.791-2.026 4-2.026s4 .908 4 2.026" fill="#878787" opacity=".6"/><path d="m1.795 17.971c-1.562-1.555-1.574-3.828-.028-5.655l8.343-10.021c.769-.895 1.795-1.384 2.894-1.384 1.117 0 2.197.521 2.889 1.394l8.338 10.014c1.588 1.854 1.578 4.022-.029 5.65l-11.202 11.202z" fill="{{color}}"/>{{icon}}</svg>'},Wp={CONGESTION:'<path style="fill:#FFFFFF;" d="M12.966,1.177c0.965,0,1.894,0.442,2.496,1.204l8.378,10.258c1.362,1.592,1.482,3.477,0,4.979L12.994,28.464L2.143,17.618c-1.381-1.375-1.38-3.348,0-4.979l8.314-10.258C11.174,1.547,12.085,1.177,12.966,1.177 M12.967,0.177L12.967,0.177c-1.247,0-2.408,0.551-3.269,1.552l-8.332,10.28c-1.711,2.022-1.688,4.567,0.07,6.317l10.85,10.845l0.707,0.707l0.707-0.707l10.847-10.846c1.784-1.807,1.803-4.292,0.053-6.337L16.237,1.748C15.462,0.769,14.236,0.177,12.967,0.177L12.967,0.177z M16.645,10.405l-2.025-2.22c-0.48-0.51-1.15-0.8-1.84-0.8H9.53c-0.69,0-1.36,0.29-1.84,0.8l-1.94,2.22c-0.39,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.44l0.255-0.539c0.204-0.431,0.456-0.837,0.753-1.21l0.962-1.211l0.83-0.9c0.32-0.35,0.72-0.63,1.15-0.82H8.23c-0.28,0-0.55-0.07-0.79-0.22l-0.28-0.17l1.27-1.45c0.28-0.31,0.68-0.48,1.1-0.48h3.25c0.42,0,0.82,0.17,1.1,0.48l1.354,1.54H16.645z M18.31,12.205c-0.35-0.37-0.81-0.63-1.3-0.74c-0.18-0.04-0.36-0.06-0.54-0.06h-3.24c-0.7,0-1.37,0.29-1.84,0.8l-1.13,1.22l-0.82,1c-0.38,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.75v-1h5.99v1h1.75c0.69,0,1.25-0.56,1.25-1.25v-1.64c0-0.74-0.2-1.46-0.59-2.09L18.31,12.205z M12.1,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C12.35,16.993,12.238,17.105,12.1,17.105z M18.59,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C18.84,16.993,18.728,17.105,18.59,17.105z M18.56,14.505c-0.24,0.15-0.51,0.22-0.79,0.22h-5.85c-0.28,0-0.55-0.07-0.78-0.22l-0.29-0.17l1.27-1.45c0.15-0.16,0.33-0.28,0.53-0.37c0.18-0.07,0.38-0.11,0.58-0.11h3.24c0.24,0,0.48,0.06,0.68,0.16c0.16,0.08,0.3,0.19,0.42,0.32l1.27,1.45L18.56,14.505z M8.42,13.03h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C8.67,12.918,8.559,13.03,8.42,13.03z"/>',ROADWORKS:'<path d="m13.004 1.411c.964 0 1.894.441 2.496 1.204l8.346 10.023c1.363 1.592 1.482 3.477 0 4.979l-10.846 10.847-10.852-10.846c-1.381-1.375-1.379-3.348 0-4.979l8.346-10.023c.717-.835 1.628-1.205 2.51-1.205m0-1c-1.248 0-2.408.551-3.268 1.552l-8.356 10.035c-1.718 2.033-1.695 4.578.064 6.328l10.85 10.845.706.707.707-.707 10.846-10.846c1.784-1.808 1.803-4.293.053-6.337l-8.337-10.012c-.769-.973-1.996-1.565-3.265-1.565zm-.575 15.264c.018-.332-.13-.651-.394-.851l-2.945-2.235-.21.36c-.22.39-.41.78-.58 1.19l-.677 2.129-1.364 3.051h1.314l2.109-4.672 1.317 1.212.138 3.46h1.092zm6.16-1.327c-.401-.54-1.209-.539-1.609.001l-1.17 1.58-2.29-1.74-.139-4.054c-.011-.276-.134-.535-.342-.716l-.7-.61c-.185-.161-.422-.25-.667-.25h-1.885c-.335 0-.648.168-.833.447l-1.144 1.723 7.58 5.76-1.86 2.51c-.098.132-.004.32.161.32h6.648l1.142-1.077zm-8.79-2.989-.876-.665.841-1.018.965.043zm1.63 1.24.969-1.781.118 2.61zm2.76-5.79c-.64 0-1.16.52-1.16 1.16 0 .65.52 1.17 1.16 1.17s1.16-.52 1.16-1.17c0-.64-.52-1.16-1.16-1.16z" fill="#fff"/>',ACCIDENT:'<path style="fill:#FFFFFF;" d="M12.998,1.091c0.964,0,1.894,0.442,2.496,1.204l8.346,10.344c1.363,1.592,1.482,3.477,0,4.979L12.994,28.465L2.143,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.344C11.205,1.462,12.115,1.091,12.998,1.091 M12.998,0.091L12.998,0.091c-1.248,0-2.408,0.551-3.269,1.552L1.364,12.011c-1.708,2.021-1.685,4.566,0.073,6.316l10.85,10.845l0.707,0.707l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337l-8.327-10.32C15.494,0.684,14.268,0.091,12.998,0.091L12.998,0.091z M7.83,18.982l-3.309-1.855l0.945,1.855H7.83z M16.111,19h3.942l1.596-2L16.111,19z M10.512,20.064l1.021-1.021l1.632,0.076c0.329,0.018,0.651-0.022,0.963-0.123c0.626-0.206,1.122-0.76,1.288-1.44l0.264-1.089l2.066-0.93c0.373-0.17,0.673-0.42,0.861-0.731c0.275-0.449,0.405-0.97,0.369-1.498L18.9,11.676l1.021-1.021l-0.724-0.724l-0.427,0.427l-0.121-0.364c-0.201-0.603-0.54-1.151-0.989-1.6l-1.159-1.159c-0.5-0.5-1.31-0.5-1.809,0l-1.267,1.267l0.724,0.724l-5.066,5.066l-0.724-0.724l-1.267,1.267c-0.5,0.5-0.5,1.31,0,1.809l1.159,1.159c0.449,0.449,0.997,0.788,1.6,0.989l0.364,0.121l-0.427,0.427L10.512,20.064z M14.901,10.349l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0l-0.732-0.732C14.803,10.604,14.803,10.446,14.901,10.349z M9.472,15.777l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0L9.472,16.13C9.375,16.033,9.375,15.874,9.472,15.777z M11.391,17.615c0.069-0.271,0.206-0.518,0.405-0.717l4.961-4.961c0.195-0.195,0.445-0.337,0.717-0.405l0.344-0.083l0.137,1.925c0.022,0.318-0.058,0.63-0.221,0.901c-0.101,0.166-0.279,0.271-0.409,0.329L14.8,15.74l-0.38,1.574c-0.083,0.344-0.318,0.615-0.612,0.713c-0.188,0.058-0.38,0.083-0.579,0.072l-1.925-0.138L11.391,17.615z"/>',OTHER:'<path style="fill:#FFFFFF;" d="M13.004,1.411c0.964,0,1.894,0.441,2.496,1.204l8.346,10.023c1.363,1.592,1.482,3.477,0,4.979L13,28.465L2.148,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.023C11.211,1.781,12.122,1.411,13.004,1.411 M13.004,0.411L13.004,0.411c-1.248,0-2.408,0.551-3.268,1.552L1.38,11.998c-1.718,2.033-1.694,4.579,0.064,6.328l10.85,10.845L13,29.878l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337L16.269,1.976C15.5,1.003,14.273,0.411,13.004,0.411L13.004,0.411z M14.716,20.139c0,0.947-0.758,1.724-1.724,1.724c-0.947,0-1.704-0.777-1.704-1.724c0-0.928,0.757-1.704,1.704-1.704C13.958,18.435,14.716,19.211,14.716,20.139z M14.204,16.33H11.78l-0.537-8.533h3.5L14.204,16.33z"/>'},Xp={BLOCKING:"#323232",VERYHIGH:"#d5232f",HIGH:"#ffa100"},Yp={MARKER:[24.1,17.8,14.2,28.42,16.8,29.4,12.8,31.4,8.79,29.4,11.23,28.42,1.7,17.8,1.7,12.1,10,1.9,12.9,.498,15.8,1.9,24.1,12.1,24.1,17.8]};function Zp(e,n,r){(r=r||{}).criticality||(r.criticality="major,critical"),C(e,$p,Zp,0),Tp.call(this,{max:20,min:8,requestData:A(this.T,this),engineType:r.engineType}),this.f=new Up,this.u=e,this.i=r,this.reload=A(this.reload,this),this.m=setInterval(this.reload,n||18e4)}u(Zp,Tp),t("H.service.traffic.incidents.Provider",Zp);var aq={minor:"HIGH","low impact":"HIGH",major:"VERYHIGH",critical:"BLOCKING"};Zp.prototype.T=function(e,n,r,d,m){var g=this,v=this.f;return this.u.requestIncidentsByTile(e,n,r,function(w){var j,k=[];if(w=w.TRAFFIC_ITEMS)for(j=(w=w.TRAFFIC_ITEM).length;j--;){var G=w[j],q=G.TRAFFIC_ITEM_TYPE_DESC;switch(q){case"ACCIDENT":case"CONGESTION":var _t=q;break;case"CONSTRUCTION":_t="ROADWORKS";break;default:_t="OTHER"}_t=v.xb(_t,aq[G.CRITICALITY.DESCRIPTION]),(q=new Rn({lat:(q=G.LOCATION.GEOLOC.ORIGIN).LATITUDE,lng:q.LONGITUDE},{provider:g,icon:_t})).setData(G),k.push(q)}d(k)},m,this.i)},Zp.prototype.F=function(){Tp.prototype.F.call(this),clearInterval(this.m)},Zp.prototype.dispose=Zp.prototype.F;var bq="A21 A22 F01 F02 F08 F04 F05 F07 F03 F06 A2F F13 A25 A2C F12 D1B F1B A27 E12 A3A A24 A3D A3F F1F F25 F2C E32 A33 F29 D26 D36 F26 D0F F0F F2B E0C D3A A45 D23 D11 F2E F19 F14 F39 A4A A4B A5C D38 F2A F1A D0A F1C A48 D25 D1D F32 A46 A3E D24 E1C E32 A5F D2E D22 D0A".split(" ");function cq(e,n,r,d){cq.j.constructor.call(this,{min:10,max:21,engineType:d}),C(e,$p,cq,0),this.m=e,this.f=r||dq,this.f.responseattributes="sh,fc",this.i=setInterval(A(this.reload,this),n||18e4),this.b===kk.WEBGL?this.Qa(new ti(Ao()+"/traffic/flow.yaml"),!0):this.Qa(new H.map.render.harp.Style({styles:[{when:["==",["geometry-type"],"LineString"],technique:"solid-line",renderOrder:10002,attr:{color:["case",[">=",["get","JF"],10],"black",[">=",["get","JF"],8],"red",[">=",["get","JF"],4],"yellow","green"],lineWidth:3,metricUnit:"Pixel"}}]}))}u(cq,S),t("H.service.traffic.flow.Provider",cq),cq.prototype.ei=ff,cq.prototype.providesGeoJSON=cq.prototype.ei,cq.prototype.V=function(){return this.Ya()},cq.prototype.getStyle=cq.prototype.V,cq.prototype.gb=function(e){e.a&&e.a("GeoJSONTileSource"),this.Qa(e)},cq.prototype.setStyle=cq.prototype.gb;var dq={locationreferences:"tmc,shp"};cq.prototype.o=function(){cq.j.o.call(this),clearInterval(this.i)},cq.prototype.B=function(e,n,r,d,m){return this.m.requestFlowByTile(e,n,r,function(g){g.type&&-1!==g.type.indexOf("Error")?m(g.Details):d(g)},m,this.f)},cq.prototype.requestInternal=cq.prototype.B,cq.prototype.ac=function(e,n,r,d,m){var g,v,w,k,G,j={type:"FeatureCollection",features:[]},q=d.RWS.length;for(g=0;g<q;g++){var _t=d.RWS[g],_r=_t.RW,_s=_r.length,ga=-1!==bq.indexOf(_t.EXTENDED_COUNTRY_CODE+_t.EBU_COUNTRY_CODE);for(_t=0;_t<_s;_t++){var _c=_r[_t].FIS,_u=_c.length;for(_c=0;_c<_u;_c++){var _f=_r[_t].FIS[_c].FI,_h=_f.length;for(v=0;v<_h;v++){var ad=_f[v],ey=[],sy=ad.CF[0],ly=!!sy.SSS,dy={type:"Feature",properties:sy,geometry:{type:"MultiLineString",coordinates:ey}};for(dy.properties.LHT=ga,ad.SHP.length&&(dy.properties.FC=ad.SHP[0].FC),ly&&(G=[]),sy=0;sy<ad.SHP.length;sy++){var vy=ad.SHP[sy].value,Ay=vy.length;for(w=0;w<Ay;w++){var Sy=ly?G:void 0,jy=new qo(vy[w].trim()),Qy=[],Ny={};for(jy.ge();-1!==(k=jy.Pb());)k===eq?(Ny.lat=+String.fromCharCode.apply(cq,jy.Gd()),jy.next(),jy.ge()):k===fq?(Ny.lng=+String.fromCharCode.apply(cq,jy.Gd()),Qy.push([Ny.lng,Ny.lat]),Sy&&Sy.push(ng(Ny)),Ny=[],jy.next(),jy.ge()):jy.next();Ny.lng=+String.fromCharCode.apply(cq,jy.Gd()),Qy.push([Ny.lng,Ny.lat]),Sy&&Sy.push(ng(Ny)),ey.push(k=Qy)}}j.features.push(dy)}}}}return cq.j.ac.call(this,e,n,r,j,m)},cq.prototype.createTileInternal=cq.prototype.ac;var fq=32,eq=44;function gq(e){function n(G){d.contains(m)&&d.removeChild(m),j&&clearTimeout(j),delete gq.a[g],G&&e.pj&&e.pj.call(k,G)}if(!e.url||!e.Og)throw Error('Parameter "options" must specify at least a URL and a callback.');if("function"!=typeof e.Og)throw Error("Parameters options.callback must be a function");var r=e.cp||document,d=r.getElementsByTagName("head")[0],m=r.createElement("script");r=e.url instanceof W?e.url:Dp(e.url,e.bp);var g=gq.b++,v=e.vl||"callback",w=e.Og,k={},j=null;return k.id=g,k.cancel=function(){n("cancelled")},0!==e.timeout&&(j=x.setTimeout(function(){n("timeout")},e.timeout||3e4)),gq.a[g]=function(G){n(),w.call(k,G)},m.type="text/javascript",m.src=r.toString()+(r.Mj()?"&":"?")+v+"="+(e.ep?"H.service.jsonp.handleResponse("+g+")":encodeURI("H.service.jsonp.handleResponse("+g+")")),d.appendChild(m),k}function $p(e){$p.j.constructor.call(this,$p,e),this.c=Pp(this,e).callbackKey,this.b=!1}function hq(e,n,r,d){return e.b||(zp($p,"Use HERE Traffic API v7 instead."),e.b=!0),gq({url:n,Og:r,pj:function(m){d(Error("["+m+"] "+n+" request failed"))},vl:e.c})}function iq(e){iq.j.constructor.call(this,iq,e),this.b=Pp(this,e).reverseSubDomain,zp(iq,"Use HERE Geocoding and Search API v7 instead.")}function jq(e){zp(jq,"Use HERE Geocoding and Search API v7 instead."),jq.j.constructor.call(this,jq,e)}function kq(e,n,r,d,m){return n=e.v().clone().G(n).I(r||{}),e.B(n,d,m)}function lq(){this.a={}}function mq(e,n){for(var r in n)if(n.hasOwnProperty(r)){var d,m=n[r],g=e.a[r]||(e.a[r]=[]),v=m.length;for(d=0;d<v;d++)g.push(new nq(m[d]))}}function Np(e,n,r,d){var m=(e=e.a[n])?e.length:0,g=[];for(n=0;n<m;n++)e[n].nd(r,d)&&g.push(e[n]);return g}function nq(e){var n,r=e.boxes;if(this.label=e.label,this.min=e.minLevel,this.max=e.maxLevel,this.b=[],r&&(n=r.length)){var d=r[0],m=new K(d[0],d[1],d[2],d[3]);for(this.b.push(m),this.a=new K(d[0],d[1],d[2],d[3]),e=1;e<n;e++)m=new K((d=r[e])[0],d[1],d[2],d[3]),this.b.push(m),this.a.ec(m,!1,this.a)}}function oq(e,n,r){var w,d=this,m=r||{},g=+m.min,v=+m.max;m.tileSize=m.tileSize||512,m.min=g?ae(g,1,17):1,m.min+=Pk(m.tileSize,1),m.max=v?ae(v,1,17):17,oq.j.constructor.call(this,m),C(e,pq,oq,0),C(n,Wh,oq,1),this.i=e,n.a&&n.a("OMV"),this.Qa(n,!0),this.m=!1,r&&(r.politicalView&&(this.u=r.politicalView),qq(this,r.lg,r.lg2),this.m=!!r.pois),this.aa=function(){d.T=xp(d),d.reload(!1)},e.addEventListener("versionupdate",this.aa),this.T=xp(this),oq.prototype.qa=(w=/^v2\/vectortiles\/(.+)\/mc$/.exec(e.v().b))?w[1]:B+""}function qq(e,n,r){var d=Cc(n),m=Cc(r);d&&(e.R=n),m&&(e.L=r),(d||m)&&(e.f=[],(m=(d=/^([a-zA-Z]{2})(-|$)/).exec(n))&&e.f.push("zh"===m[1]?n:m[1]),(m=d.exec(r))&&e.f.push("zh"===m[1]?r:m[1]),e.D=!0)}t("H.service.jsonp",gq),gq.mn=function(e){return(e=gq.a[e])?e:function(){}},gq.handleResponse=gq.mn,gq.b=0,gq.a={},u($p,Op),t("H.service.traffic.Service",$p),$p.prototype.Aa=function(){return{subDomain:"traffic.ls",path:"traffic/6.1",callbackKey:"jsoncallback"}},$p.CONFIG_KEY="traffic",$p.prototype.dj=function(e,n){return new sl(new cq(this,void 0,e,n),{max:22})},$p.prototype.createFlowLayer=$p.prototype.dj,$p.prototype.ej=function(e){return new Sn(new Zp(this,void 0,e))},$p.prototype.createIncidentsLayer=$p.prototype.ej,$p.prototype.ro=function(e,n,r){return hq(this,e=this.v().clone().G("incidents.json").I(e),n,r)},$p.prototype.requestIncidents=$p.prototype.ro,$p.prototype.po=function(e,n,r,d,m,g){return hq(this,e=this.v().clone().G(["flow/json",r,e,n].join("/")).I(g||{}),d,m)},$p.prototype.requestFlowByTile=$p.prototype.po,$p.prototype.to=function(e,n,r,d,m,g){return hq(this,e=this.v().clone().G(["incidents/json",r,e,n].join("/")).I(g||{}),d,m)},$p.prototype.requestIncidentsByTile=$p.prototype.to,X.prototype.nh=function(e,n){if(6===(n=n||6))n=$p;else{if(7!==n)throw new D(this.nh,1,"allowed values are 6 and 7");n=Sp}return this.Ma(n,e)},X.prototype.getTrafficService=X.prototype.nh,u(iq,Op),t("H.service.GeocodingService",iq),iq.prototype.Aa=function(){return{subDomain:"geocoder.ls",reverseSubDomain:"reverse",path:"6.2"}},iq.CONFIG_KEY="geocoding",iq.prototype.a=function(e){return Error(e.Details||e.message||e.error)},iq.prototype.Zg=function(e,n,r){return e=this.v().clone().G("geocode.json").I(e),this.B(e,n,r)},iq.prototype.geocode=iq.prototype.Zg,iq.prototype.ii=function(e,n,r){return e=this.v().clone().G("reversegeocode.json").I(e),this.b&&e.Ba(this.b),this.B(e,n,r)},iq.prototype.reverseGeocode=iq.prototype.ii,iq.prototype.search=function(e,n,r){return e=this.v().clone().G("search.json").I(e),this.B(e,n,r)},iq.prototype.search=iq.prototype.search,X.prototype.km=function(e){return this.Ma(iq,e)},X.prototype.getGeocodingService=X.prototype.km,u(jq,Op),t("H.service.PlacesService",jq),jq.prototype.Aa=function(){return{subDomain:"places.ls",path:"places/v1"}},jq.CONFIG_KEY="places",jq.EntryPoint={SEARCH:"discover/search",SUGGEST:"suggest",EXPLORE:"discover/explore",AROUND:"discover/around",HERE:"discover/here",CATEGORIES:"categories/places"},jq.prototype.request=function(e,n,r,d){return kq(this,e,n,r,d)},jq.prototype.request=jq.prototype.request,jq.prototype.search=function(e,n,r){return kq(this,"discover/search",e,n,r)},jq.prototype.search=jq.prototype.search,jq.prototype.Go=function(e,n,r){return kq(this,"suggest",e,n,r)},jq.prototype.suggest=jq.prototype.Go,jq.prototype.Fl=function(e,n,r){return kq(this,"discover/explore",e,n,r)},jq.prototype.explore=jq.prototype.Fl,jq.prototype.rl=function(e,n,r){return kq(this,"discover/around",e,n,r)},jq.prototype.around=jq.prototype.rl,jq.prototype.on=function(e,n,r){return kq(this,"discover/here",e,n,r)},jq.prototype.here=jq.prototype.on,jq.prototype.wl=function(e,n,r){return kq(this,"categories/places",e,n,r)},jq.prototype.categories=jq.prototype.wl,jq.prototype.Gl=function(e,n,r,d){return e=Dp(e).I(this.v().getQuery()).I(d||{}),this.B(e,n,r)},jq.prototype.follow=jq.prototype.Gl,X.prototype.Im=function(e){return this.Ma(jq,e)},X.prototype.getPlacesService=X.prototype.Im,nq.prototype.nd=function(e,n){if(e>=this.min&&e<=this.max){if(!(e=this.b.length)||!this.a)return!0;if(this.a.nd(n))for(;e--;)if(this.b[e].nd(n))return!0}return!1},u(oq,S),t("H.service.omv.Provider",oq),oq.prototype.Sb=ff,oq.prototype.providesOMV=oq.prototype.Sb,oq.prototype.ub=function(e){return this.T.test(e)},oq.prototype.cacheFilter=oq.prototype.ub,oq.prototype.uc=function(e,n,r){return rq(this.i,e,n,r).toString()},oq.prototype.getTileKey=oq.prototype.uc,oq.prototype.nb=function(){return this.xa},oq.prototype.getCache=oq.prototype.nb,oq.prototype.Lm=function(){return this.u},oq.prototype.getPoliticalView=oq.prototype.Lm,oq.prototype.yo=function(e){var n=this.u;this.u=e,this.dispatchEvent(new cj("politicalviewchange",this.u,n))},oq.prototype.setPoliticalView=oq.prototype.yo,oq.prototype.MAX_STORE_TIME=2592e6,oq.prototype.l=function(){return od()},oq.prototype.c=function(){return od()?nd():oq.j.c.call(this)},oq.prototype.s=function(){return this.i},oq.prototype.B=function(e,n,r,d,m){return this.i.Ha(e,n,r,d,m)},oq.prototype.requestInternal=oq.prototype.B,oq.prototype.gb=function(e){e.a&&e.a("OMV"),this.Qa(e)},oq.prototype.setStyle=oq.prototype.gb,oq.prototype.V=function(){return oq.j.Ya.apply(this)},oq.prototype.getStyle=oq.prototype.V,oq.prototype.Ya=function(){var e=oq.j.Ya.apply(this),n=e.getState()===Xh.READY,r=e.qc();return n&&r&&r.global&&(this.D&&(this.R&&(r.global.ux_language=this.R),this.L&&(r.global.ux_language_fallback=this.L)),this.m&&r.global.poi&&r.global.poi.default&&(r.global.poi.default.visible=this.m),this.D||this.m)&&(e=new ti(r,e.Ib())),e},oq.prototype.getStyleInternal=oq.prototype.Ya,oq.prototype.D=!1;var sq=["en"];function pq(e){pq.j.constructor.call(this,pq,e);var n=Pp(this,e).mapVersion;this.l=e.queryParams||{},this.b=vc(n)?n:tq[this.v().toString()],vc(this.b)||uq(this)}oq.prototype.hh=function(){return this.f||sq},oq.prototype.getLanguages=oq.prototype.hh,oq.prototype.o=function(){oq.j.o.call(this),this.i.removeEventListener("versionupdate",this.aa)},oq.prototype.xa=new Rk(256),oq.prototype.ba=function(e,n){return Np(this.i.ba(),this.qa,n,e)},oq.prototype.getCopyrights=oq.prototype.ba,u(pq,Op),t("H.service.omv.Service",pq),pq.prototype.Aa=function(){return{subDomain:"vector",path:"v2/vectortiles/base/mc"}},pq.CONFIG_KEY="omv";var tq={};function uq(e){e.B(e.v().clone().G("../../info"),function(n){n=n.mapVersion;var r=e.v().toString();e.b=n,n!==tq[r]&&(tq[r]=n,e.dispatchEvent("versionupdate"))},function(){})}function rq(e,n,r,d){return n=e.v().clone().G(d+"/"+n+"/"+r+"/omv"),vc(e.b)&&n.I({mv:e.b}).I(e.l),n}function vq(e){vq.j.constructor.call(this,vq,e),this.b=e.getToken}function Fq(e,n,r,d){return e.v().clone().G(n+"/layers/"+r+"/features").I(d||{})}function Dq(e,n,r,d,m){return Fq(e,r,d,n=Object.assign({},m,{id:new Hp(n)}))}function Aq(e,n,r,d,m){return e.v().clone().G(r+"/layers/"+d+"/features/"+n).I(m||{})}function yq(e,n,r,d,m,g,v){return v=void 0===v?"application/json":v,r={method:r,headers:Object.assign({},g?{"Content-Type":"application/geo+json"}:void 0,"function"==typeof e.b?{Authorization:"Bearer "+e.b()}:void 0,e.g)},g&&(r.data=JSON.stringify(g)),(g=new tf(v,n.toString(),je,r)).then(d,Qp(e,n,m)),g}function wq(e,n,r,d){zc(r,"String",e,n,"must be a string"),zc(d,"String",e,n+1,"must be a string")}function zq(e,n){zc(n,"String",e,0,"must be a string")}function Bq(e,n){if(!Array.isArray(n)||0===n.length||n.some(function(r){return"string"!=typeof r}))throw new D(e,0,"must be a non-empty array of strings")}function Eq(e,n,r){if(!Ea(r))throw new D(e,n,"must be a GeoJSON object")}function xq(e,n,r,d){if(!Da(r))throw new D(e,n,"must be a function");if(!Da(d))throw new D(e,n+1,"must be a function")}function Gq(e,n,r,d){if(Gq.j.constructor.call(this,d?{min:d.min,max:d.max,engineType:d.engineType}:void 0),C(e,vq,Gq,0),!Cc(n))throw new D(Gq,1,'"catalogHrn" must be a string');if(!Cc(r))throw new D(Gq,2,'"layerId" must be a string');this.u=e,this.f=n,this.i=r,this.m=Ea(d)&&Ea(d.parameters)?d.parameters:{},this.Qa(this.b===kk.WEBGL?new ti({sources:{iml:{type:"MVT"}},layers:{iml:{data:{source:"iml",layer:this.f+":"+this.i},points:{filter:{$geometry:"point"},draw:{points:{collide:!1,order:200,color:"#92CF48",size:[[10,"8px"],[14,"12px"],[18,"16px"]]}}},polygons:{filter:{$geometry:"polygon"},draw:{polygons:{order:201,color:"#E39E3C"},lines:{order:202,color:"#755DA5",width:"1px"}}},lines:{filter:{$geometry:"line"},draw:{lines:{order:203,color:"#0258AE",width:"2px",join:"round",cap:"round"}}}}}}):new H.map.render.harp.Style({styles:[{layer:this.f+":"+this.i,when:["==",["geometry-type"],"Point"],technique:"circles",renderOrder:200,color:"#92CF48",size:["interpolate",["linear"],["zoom"],10,8,14,12,18,16]},{layer:this.f+":"+this.i,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:"#E39E3C",renderOrder:201},{layer:this.f+":"+this.i,when:["==",["geometry-type"],"Polygon"],technique:"solid-line",color:"#755DA5",lineWidth:"1px",renderOrder:202},{layer:this.f+":"+this.i,when:["==",["geometry-type"],"LineString"],technique:"solid-line",color:"#0258AE",lineWidth:"2px",renderOrder:203}]}))}function Mp(e){Mp.j.constructor.call(this,Mp,e=void 0===e?{}:e),this.b={og:e.resource||"base",eg:e.projection||"mc",format:e.format||"png8"},this.f=e.queryParams||{}}function Hq(e,n,r,d,m,g,v){var w=this;v=v||{},g=g||{};var k=e.v().clone().G(n+"/"+e.vc()+"/"+r).I(g),j=e.c;this.D=e,this.R=k,Ek.call(this,{tileSize:d,max:512===d?19:20,min:512===d?2:0,getURL:function(G,q,_t){var _r=w.R.clone();return j&&_r.Ba(j[(_t+q+G)%j.length]),_r.G(_t+"/"+G+"/"+q+"/"+d+"/"+m),_r.toString()},crossOrigin:v.crossOrigin,headers:v.headers,uri:k.toString().replace(/_/g,"")+d,engineType:v.engineType}),this.me=n,this.ab=r,this.xa=g,this.qa=r.split(".")[0],this.i=A(this.i,this),this.getCopyrights=this.ba,this.L=!1,e.addEventListener("versionupdate",this.i)}function Iq(e){Iq.j.constructor.call(this,Iq,e),e=Pp(this,e),this.c=e.shards,(this.f=e.ignoreTypes?null:e.type)&&this.v().Ba(this.f),this.b=e.version,this.s=new lq,this.m={},this.l=0,"newest"===this.b&&Jq(this)}function Kq(e,n){for(var r={},d=e[n+"s"][n],m=d.length;m--;)r[d[m].id]=d[m];e[n+"s"]=r}function Jq(e){var n=e.v().clone().G("info").I({output:"json"});e.c&&n.Ba(e.c[0]),e.B(n,function(r){var d;if(Kq(r=r.response,"map"),Kq(r,"scheme"),Kq(r,"tiletype"),Kq(r,"format"),Kq(r,"resolution"),Kq(r,"language"),"newest"===e.b&&"traffic"!==e.f)for(d in r.maps)r.maps[d].hash&&r.maps[d].newest&&(e.b=r.maps[d].hash,e.dispatchEvent("versionupdate"));e.u=r,e.dispatchEvent("infoupdate")},function(r){throw r})}function Lq(e){var n=e.v().clone().G("copyright").G(e.vc()).I({output:"json"});e.c&&n.Ba(e.c[0]),e.l=1,e.B(n,function(r){e.l=2,mq(e.s,r),e.dispatchEvent("copyrightupdate")},function(r){throw e.l=-1,r})}function Mq(e){Mq.j.constructor.call(this,Mq,e)}function Nq(e){Nq.j.constructor.call(this,Nq,e),zp(Nq,"Use HERE Routing API v8 instead.")}function Oq(e){Oq.j.constructor.call(this,Oq,e)}function Pq(){}function Qq(){}function Rq(e,n){this.a=e,this.b=n}function Sq(){}function Tq(e,n){this.b=e,this.a=n}function Uq(e,n,r){var d;if(n=n||(e&&e.length?Object.keys(e[0]):B),this.Cb=e,n)for(this.Dd=n,this.Pg=e=oc(),d=n.length;d--;)e[n[d]]=!0;r!==B&&(this.Sh=r)}function Vq(e,n){return e.Cb?e.Cb.push(n):e.Cb=[n],e.Cb.length-1}function Wq(e){var n=Xq;if(!e||!Cc(af(e.layerId,e.layer))||!Fc(e.level)||vc(e.rowFilter)&&!Da(e.rowFilter)||vc(e.rowFilterContext)&&!Ea(e.rowFilterContext))throw new D(n,1,vc("invalid layer config")?"invalid layer config":e)}function Yq(e,n,r,d){d=d||Zq,this.a={},d.provider=e,this.invalidate=gf,Yq.j.constructor.call(this,n,d),delete this.invalidate,r&&(this.b=r),this.ra(kh.ADD)}Ic(tq),pq.prototype.Am=function(){return this.b},pq.prototype.getMapVersion=pq.prototype.Am,pq.prototype.$b=function(e,n,r){n=n||{};var d={min:0,max:22};return Ea(r)&&yp(d,r),Mn&&(n.min=d.min=4),new sl(new oq(this,e,n),d)},pq.prototype.createLayer=pq.prototype.$b,pq.prototype.Ha=function(e,n,r,d,m){return this.B(rq(this,e,n,r),function(g){return g.arrayBuffer().then(d,m)},m,"arraybuffer")},pq.prototype.f=function(e){return Ao()+"/"+e},pq.prototype.Je=function(e,n){if(!Da(e))throw new D(this.Je,0,'"onResult" must be a function');if(!Da(n))throw new D(this.Je,1,'"onError" must be a function');return this.B(this.v().clone().wd("v2/vectortiles/pviews"),e,n)},pq.prototype.getPoliticalViews=pq.prototype.Je,X.prototype.He=function(e){return this.Ma(pq,e)},X.prototype.getOMVService=X.prototype.He,pq.prototype.s=function(e){mq(this.c,e),this.dispatchEvent("copyrightupdate")},pq.prototype.ba=function(){return this.c||(this.c=new lq,this.B(this.v().clone().G("../../copyrights"),A(this.s,this),ld)),this.c},pq.prototype.getCopyrights=pq.prototype.ba,u(vq,Op),t("H.service.iml.Service",vq),vq.prototype.Aa=function(){return{host:"interactive.data.api.platform.here.com",path:"interactive/v1/catalogs"}},vq.prototype.a=function(e){var r=[{keys:["code","title","cause","action"],format:function(){return e.code+": "+e.title+"; cause: "+e.cause+"; action: "+e.action}},{keys:["error","error_description"],format:function(){return e.error+": "+e.error_description}},{keys:["error","errorMessage"],format:function(){return e.error+": "+e.errorMessage}}];return Error(Ea(e)?function n(){for(var d=ea(r),m=d.next();!m.done;m=d.next()){var g=(m=m.value).format;if(m.keys.every(function(v){return e[v]}))return g()}return JSON.stringify(e)}():e)},vq.prototype.Qd=function(e,n,r,d,m){var g=this.Qd;return wq(g,0,e,n),xq(g,2,r,d),yq(this,e=this.v().clone().G(e+"/layers/"+n+"/statistics").I(m||{}),"GET",r,d)},vq.prototype.getStatistics=vq.prototype.Qd,vq.prototype.Ff=function(e,n,r,d,m,g,v,w,k){var j=k?"":".mvtf";return yq(this,e=this.v().clone().G(d+"/layers/"+m+"/tile/web/"+r+"_"+e+"_"+n+j).I(Object.assign({clip:!0},w)),"GET",k?g:function(G){return G.arrayBuffer().then(g)},v,void 0,k?"application/json":"arraybuffer")},vq.prototype.getFeaturesByTile=vq.prototype.Ff,vq.prototype.wj=function(e,n,r,d,m,g){var v=this.wj;return zq(v,e),wq(v,1,n,r),xq(v,3,d,m),yq(this,e=Aq(this,e,n,r,g),"GET",d,m)},vq.prototype.getFeatureById=vq.prototype.wj,vq.prototype.Sc=function(e,n,r,d,m,g){var v=this.Sc;return Bq(v,e),wq(v,1,n,r),xq(v,3,d,m),yq(this,e=Dq(this,e,n,r,g),"GET",d,m)},vq.prototype.getFeaturesById=vq.prototype.Sc,vq.prototype.Jd=function(e,n,r,d,m){var g=this.Jd;if(!Ea(e)||!(e.bbox||e.north&&e.east&&e.south&&e.west))throw new D(g,0,'must be an object with either "bbox" or a full set of "north", "east", "south" and "west"');return wq(g,1,n,r),xq(g,3,d,m),yq(this,e=this.v().clone().G(n+"/layers/"+r+"/bbox").I(e),"GET",d,m)},vq.prototype.getFeaturesByBoundingBox=vq.prototype.Jd,vq.prototype.yj=function(e,n,r,d,m){var g=this.yj;if(!(Ea(e)&&e.radius&&(e.lat&&(e.lng||e.lon)||e.refCatalogHrn&&e.refLayerId&&e.refFeatureId)))throw new D(g,0,'must be an object with "radius" and a combination of either "lat"+"lng" or "refCatalogHrn"+"refLayerId"+"refFeatureId"');return wq(g,1,n,r),xq(g,3,d,m),yq(this,e=this.v().clone().G(n+"/layers/"+r+"/spatial").I(e),"GET",d,m)},vq.prototype.getFeaturesByPointAndRadius=vq.prototype.yj,vq.prototype.xj=function(e,n,r,d,m,g){var v=this.xj;if(!Ea(e)||!e.radius)throw new D(v,0,'must be an object with "radius"');return Eq(v,1,n),wq(v,2,r,d),xq(v,4,m,g),yq(this,e=this.v().clone().G(r+"/layers/"+d+"/spatial").I(e),"POST",m,g,n)},vq.prototype.getFeaturesByGeometryAndRadius=vq.prototype.xj,vq.prototype.Jk=function(e,n,r,d,m){var g=this.Jk;return wq(g,0,e,n),xq(g,2,r,d),yq(this,e=this.v().clone().G(e+"/layers/"+n+"/search").I(m||{}),"GET",r,d)},vq.prototype.searchFeatures=vq.prototype.Jk,vq.prototype.Wj=function(e,n,r,d,m){var g=this.Wj;return wq(g,0,e,n),xq(g,2,r,d),yq(this,e=this.v().clone().G(e+"/layers/"+n+"/iterate").I(m||{}),"GET",r,d)},vq.prototype.iterateFeatures=vq.prototype.Wj,vq.prototype.$c=function(e,n,r,d,m,g){var v=this.$c;return Eq(v,0,e),wq(v,1,n,r),xq(v,3,d,m),yq(this,n=Fq(this,n,r,g),"PUT",d,m,e)},vq.prototype.putFeatures=vq.prototype.$c,vq.prototype.Yc=function(e,n,r,d,m,g){var v=this.Yc;return Eq(v,0,e),wq(v,1,n,r),xq(v,3,d,m),yq(this,n=Fq(this,n,r,g),"POST",d,m,e)},vq.prototype.postFeatures=vq.prototype.Yc,vq.prototype.hd=function(e,n,r,d,m){var g=this.hd;return Bq(g,e),wq(g,1,n,r),xq(g,3,d,m),yq(this,e=Dq(this,e,n,r),"DELETE",d,m)},vq.prototype.deleteFeatures=vq.prototype.hd,vq.prototype.Ck=function(e,n,r,d,m,g,v){var w=this.Ck;return zq(w,e),Eq(w,1,n),wq(w,2,r,d),xq(w,4,m,g),yq(this,e=Aq(this,e,r,d,v),"PUT",m,g,n)},vq.prototype.putFeature=vq.prototype.Ck,vq.prototype.wk=function(e,n,r,d,m,g,v){var w=this.wk;return zq(w,e),Eq(w,1,n),wq(w,2,r,d),xq(w,4,m,g),yq(this,e=Aq(this,e,r,d,v),"PATCH",m,g,n)},vq.prototype.patchFeature=vq.prototype.wk,vq.prototype.ij=function(e,n,r,d,m){var g=this.ij;return zq(g,e),wq(g,1,n,r),xq(g,3,d,m),yq(this,e=Aq(this,e,n,r),"DELETE",d,m,void 0,"text/plain")},vq.prototype.deleteFeature=vq.prototype.ij,vq.CONFIG_KEY="iml",X.prototype.pm=function(e){return this.Ma(vq,e)},X.prototype.getIMLService=X.prototype.pm,u(Gq,S),t("H.service.iml.Provider",Gq),Gq.prototype.B=function(e,n,r,d,m){return this.u.Ff(e,n,r,this.f,this.i,d,m,this.m)},Gq.prototype.requestInternal=Gq.prototype.B,Gq.prototype.Sb=ff,Gq.prototype.providesOMV=Gq.prototype.Sb,Gq.prototype.V=function(){return this.Ya()},Gq.prototype.getStyle=Gq.prototype.V,Gq.prototype.gb=function(e){C(e,ti)&&e.a("MVT"),this.Qa(e)},Gq.prototype.setStyle=Gq.prototype.gb,u(Mp,Op),t("H.service.rasterTile.Service",Mp),p=Mp.prototype,p.V=function(){return this.f.style||"explore.day"},p.Aa=function(){return{subDomain:"maps",path:"v3"}},p.ba=function(){return this.c||(this.c=new lq,this.B(this.v().clone().G("copyright"),A(this.Kn,this),ld)),this.c},p.Kn=function(e){var n=e.copyrights;e=e.resources;var r={},d=this.b.og+"."+this.V();r[d]=[],e[this.b.og].styles[this.V()].forEach(function(m){n[m].forEach(function(g){var v=[];g.boundingBoxes.forEach(function(w){v.push([w.north,w.west,w.south,w.east])}),r[d].push({boxes:v,label:g.label,alt:g.alt,minLevel:g.minLevel,maxLevel:g.maxLevel})})}),mq(this.c,r)},p.Fe=function(e,n){return this.B(this.v().clone().G("info"),e,n)},Mp.prototype.getInfo=Mp.prototype.Fe,Mp.prototype.Je=function(e,n){return this.B(this.v().clone().G("politicalViews"),e,n)},Mp.prototype.getPoliticalViews=Mp.prototype.Je,Mp.prototype.jm=function(e,n){return this.B(this.v().clone().G("features"),e,n)},Mp.prototype.getFeatures=Mp.prototype.jm,Mp.prototype.hh=function(e,n){return this.B(this.v().clone().G("languages"),e,n)},Mp.prototype.getLanguages=Mp.prototype.hh,Mp.CONFIG_KEY="rasterTile",X.prototype.lh=function(e){return this.Ma(Mp,e)},X.prototype.getRasterTileService=X.prototype.lh,u(Hq,Ek),Hq.prototype.MAX_STORE_TIME=2592e6,Hq.prototype.B=function(e,n,r,d,m,g){return this.L||(zp(Iq,"Use HERE Vector Tile API or Raster Tile API v3 instead."),this.L=!0),Hq.j.B.call(this,e,n,r,d,m,g)},Hq.prototype.requestInternal=Hq.prototype.B,Hq.prototype.o=function(){Ek.prototype.o.call(this),this.D.removeEventListener("versionupdate",this.i)},Hq.prototype.ba=function(e,n){return Np(this.D.ba(),this.qa,n,e)},Hq.prototype.getCopyrights=Hq.prototype.ba,Hq.prototype.i=function(){var e=this.D;this.R=e.v().clone().G(this.me+"/"+e.vc()+"/"+this.ab).I(this.xa),this.reload(!1)},Hq.prototype.l=function(){return od()},Hq.prototype.c=function(){return od()?nd():Hq.j.c.call(this)},u(Iq,Op),t("H.service.MapTileService",Iq),Iq.prototype.Aa=function(){return{subDomain:"maps.ls",path:"maptile/2.1",type:"base",version:"newest",shards:["1","2","3","4"]}},Iq.CONFIG_KEY="maptile",Iq.prototype.Hj=function(){return this.f},Iq.prototype.getType=Iq.prototype.Hj,Iq.prototype.vc=function(){return this.b},Iq.prototype.getVersion=Iq.prototype.vc,Iq.prototype.ba=function(){return this.l||(this.b&&"newest"!==this.b||"traffic"===this.f)&&Lq(this),this.s},Iq.prototype.getCopyrights=Iq.prototype.ba,Iq.prototype.Fe=function(){return this.u},Iq.prototype.getInfo=Iq.prototype.Fe,Iq.prototype.ue=function(e,n,r,d,m,g){var k,v=this.v().clone().G(e+"/"+this.vc()+"/"+n+"/"+r+"/"+d).I(m||{}).toString(),w=0,j=v.length;if(0!==j)for(k=0;k<j;k++)w=(w<<5)-w+v.charCodeAt(k),w|=0;return(w=this.m[v=w])||(w=new Hq(this,e,n,r,d,m,yp({headers:this.g},g||{})),this.m[v]=w),w},Iq.prototype.createTileProvider=Iq.prototype.ue,Iq.prototype.nc=function(e,n,r,d,m,g,v,w){return new sl(e=this.ue(e,n,r,d,m,w),{opacity:g,dark:!!v})},Iq.prototype.createTileLayer=Iq.prototype.nc,X.prototype.ih=function(e){return this.Ma(Iq,e)},X.prototype.getMapTileService=X.prototype.ih,u(Mq,Op),t("H.service.publicTransit.Service",Mq),Mq.prototype.Aa=function(){return{subDomain:"transit.router",path:"v8"}},Mq.CONFIG_KEY="publicTransit",Mq.prototype.Tm=function(e,n,r){return e=this.v().clone().G("routes").I(e),this.B(e,n,r)},Mq.prototype.getRoutes=Mq.prototype.Tm,Mq.prototype.$l=function(e,n,r){return e=this.v().clone().G("departures").I(e),this.B(e,n,r)},Mq.prototype.getDepartures=Mq.prototype.$l,Mq.prototype.Xm=function(e,n,r){return e=this.v().clone().G("stations").I(e),this.B(e,n,r)},Mq.prototype.getStations=Mq.prototype.Xm,Mq.prototype.a=function(e){return Error(JSON.stringify(e))},X.prototype.Pm=function(e){return this.Ma(Mq,e)},X.prototype.getPublicTransitService=X.prototype.Pm,u(Nq,Op),t("H.service.RoutingService",Nq),Nq.prototype.Aa=function(){return{subDomain:"route.ls",path:"routing/7.2"}},Nq.prototype.a=function(e){return Error(e.details)},Nq.CONFIG_KEY="routing",Nq.prototype.Cd=function(e,n,r){return e=this.v().clone().G("calculateroute.json").I(e),this.B(e,n,r)},Nq.prototype.calculateRoute=Nq.prototype.Cd,Nq.prototype.Ng=function(e,n,r){return e=this.v().clone().Ba("isoline").G("calculateisoline.json").I(e),this.B(e,n,r)},Nq.prototype.calculateIsoline=Nq.prototype.Ng,u(Oq,Op),t("H.service.RoutingService8",Oq),Oq.CONFIG_KEY="routing_v8",Oq.prototype.Aa=function(){return{subDomain:"router",path:"v8/routes"}},Oq.prototype.a=function(e){return Error(e.error)},Oq.prototype.Cd=function(e,n,r){return e=this.v().clone().I(e),this.B(e,n,r)},Oq.prototype.calculateRoute=Oq.prototype.Cd,Oq.prototype.Ng=function(e,n,r){return e=this.v().clone().Ba("isoline").wd("v8/isolines").I(e),this.B(e,n,r)},Oq.prototype.calculateIsoline=Oq.prototype.Ng,X.prototype.Fj=function(e,n){if(7===(n=Mn?8:+n||7))n=Nq;else{if(8!==n)throw new D(this.Fj,1,"allowed values are 7 and 8");n=Oq}return this.Ma(n,e)},X.prototype.getRoutingService=X.prototype.Fj,t("H.service.extension.dataView.ITable",Pq),Pq.prototype.Md=function(){},Pq.prototype.getMeta=Pq.prototype.Md,Pq.prototype.Pd=function(){},Pq.prototype.getRowCount=Pq.prototype.Pd,Pq.prototype.tc=function(){},Pq.prototype.getRow=Pq.prototype.tc,Pq.prototype.Ta=function(){},Pq.prototype.getColumnNames=Pq.prototype.Ta,Pq.prototype.Be=function(){},Pq.prototype.getColumn=Pq.prototype.Be,Pq.prototype.ua=function(){},Pq.prototype.getCell=Pq.prototype.ua,Pq.prototype.concat=function(){},Pq.prototype.concat=Pq.prototype.concat,t("H.service.extension.dataView.IRow",Qq),Qq.prototype.Ta=function(){},Qq.prototype.getColumnNames=Qq.prototype.Ta,Qq.prototype.ua=function(){},Qq.prototype.getCell=Qq.prototype.ua,Qq.prototype.md=function(){},Qq.prototype.getTable=Qq.prototype.md,t("H.service.extension.dataView.ObjRow",Rq),Rq.prototype.Ta=function(){return this.a.Ta()},Rq.prototype.getColumnNames=Rq.prototype.Ta,Rq.prototype.ua=function(e){return this.a.ua(this.b,e)},Rq.prototype.getCell=Rq.prototype.ua,Rq.prototype.md=function(){return this.a},Rq.prototype.getTable=Rq.prototype.md,t("H.service.extension.dataView.IColumn",Sq),Sq.prototype.ua=function(){},Sq.prototype.getCell=Sq.prototype.ua,t("H.service.extension.dataView.ObjColumn",Tq),Tq.prototype.ua=function(e){return this.b.ua(e,this.a)},Tq.prototype.getCell=Tq.prototype.ua,t("H.service.extension.dataView.ObjTable",Uq),p=Uq.prototype,p.Sh=B,p.Cb=B,p.Dd=B,p.Pg=B,p.Md=function(){return this.Sh},Uq.prototype.getMeta=Uq.prototype.Md,Uq.prototype.Pd=function(){return this.Cb?this.Cb.length:0},Uq.prototype.getRowCount=Uq.prototype.Pd,Uq.prototype.tc=function(e){var n=this.Cb;return n&&n[e]?new Rq(this,e):B},Uq.prototype.getRow=Uq.prototype.tc,Uq.prototype.Ta=function(){return this.Dd||hf},Uq.prototype.getColumnNames=Uq.prototype.Ta,Uq.prototype.Be=function(e){return this.Pg[e]?new Tq(this,e):B},Uq.prototype.getColumn=Uq.prototype.Be,Uq.prototype.ua=function(e,n){var r=this.Cb;return(e=r&&this.Pg[n]&&r[e])&&e[n]},Uq.prototype.getCell=Uq.prototype.ua,Uq.prototype.concat=function(){var n,e=arguments.length,r=this.Dd,d=""+this.Dd,m=(this.Cb||[]).slice();for(n=0;n<e;n++){var g=arguments[n];if(!(g instanceof Uq))throw new D(this.concat,n);if(g.Cb){if(r&&""+g.Dd!==d)throw new D(this.concat,n,"Incompatible columns!");m=m.concat(g.Cb)}}return new Uq(m,this.Dd,this.Sh)},Uq.prototype.concat=Uq.prototype.concat,u(Yq,Hh),t("H.service.remote.Spatial",Yq);var Zq={};function $q(e,n){this.a=e,n&&(this.b=n)}Yq.prototype.cb=function(){return this.b||Hh.prototype.cb.call(this)},Yq.prototype.getId=Yq.prototype.cb,Yq.prototype.pg=ld,Yq.prototype.retain=Yq.prototype.pg,Yq.prototype.release=ff,Yq.prototype.release=Yq.prototype.release;var ar=new $q(hf);function br(e,n,r){e.a[n.key]=new $q(r,void 0)}function cr(e,n,r,d){if(!Da(r))throw new D(e,n,"has invalid type");if(!Da(d))throw new D(e,n+1,"has invalid type")}function dr(e,n,r){var d=8===e;this.b=n,this.c=r||ld,(this.a=4===e||d)?this.l=d:this.g=1===e,this.f=this.a?"$HProjGeometry":"geometry"}function er(e,n,r,d,m){var g=[],v=m.paths,w=v.length,k=0,j=e.b&&e.b(d);for(e=new Yq(n,e.l,B,{style:j||e.i,data:d});k!==w;)g.push(gr(v[k++]));return br(e,r,[new Ph(g,m.interiorsIndex,m.outlinesIndex)]),e}function fr(e,n,r,d){d=new kg(d[0],d[1]);var m=e.b&&e.b(r);return e=e.g?new Rn(d,e={icon:m,data:r,provider:n}):new bj(d,e={icon:m,data:r,provider:n})}function gr(e){for(var n=0,r=e.length,d=[];n<r;)d.push(new J(e[n++],e[n++]));return d}function hr(e,n){var r={};this.c=e,Ya(r,n||r),ok.call(this,r),this.ig={},(e=this.Kb(nh.SPATIAL)).update(e.a+1,kh.ADD)}function ir(e){return e.wc(!0)}function jr(e,n,r){var m,d=n.l&&n.l[r];return!d&&(m=n.s)&&(delete n.s,(n.l=e=e.c.parse(e,n,m))&&(d=e[r])),d||hf}Yq.prototype.Kd=function(e){return(this.a[e.key]||ar).a},Yq.prototype.getGeometriesForTile=Yq.prototype.Kd,Yq.prototype.gh=function(e){return(this.a[e.key]||ar).b},Yq.prototype.getLabels=Yq.prototype.gh,dr.prototype.parse=function(e,n,r){var d,m,w,k,g={},v=[],j=0;for(w=r.length;j<w;j++){var G=r[j],q=G.Rows;if(G=q.length){var _t=Object.keys(q[0]).filter(function(_s){return"geometry"!==_s&&"$HProjGeometry"!==_s});for(_t=new Uq(q,_t),k=0;k<G;k++){var _r=q[k];if(m=_r[this.f]){if(delete _r[this.f],_r=_t.tc(k))try{(d=this.a?er(this,e,n,_r,m):fr(this,e,_r,m.path)).ka(e),v.push(d)}catch(_s){this.c(_s.message)}}else this.c("Layer must contain geometries")}}}return g[this.a?"spatials":this.g?"markers":"domMarkers"]=v,g},u(hr,ok),t("H.service.remote.ObjectProvider",hr),hr.prototype.F=function(){ok.prototype.F.call(this)},hr.prototype.dispose=hr.prototype.F,hr.prototype.Ec=function(){return hf},hr.prototype.requestMarkers=hr.prototype.Ec,hr.prototype.Dc=function(){return hf},hr.prototype.requestDomMarkers=hr.prototype.Dc,hr.prototype.sd=function(){return hf},hr.prototype.requestOverlays=hr.prototype.sd,hr.prototype.Rb=ff,hr.prototype.providesMarkers=hr.prototype.Rb,hr.prototype.Qb=ff,hr.prototype.providesDomMarkers=hr.prototype.Qb,hr.prototype.Cc=ff,hr.prototype.providesSpatials=hr.prototype.Cc,hr.prototype.kg=function(){return hf},hr.prototype.requestSpatials=hr.prototype.kg,hr.prototype.mg=function(e,n){return e=jr(this,e,kr),n&&(e=e.filter(ir)),e},hr.prototype.requestSpatialsByTile=hr.prototype.mg,hr.prototype.fa=function(e){var n=e.cb();if(this.ig[n])throw new $c(this.fa,"Remote object "+n+" already added");return this.ig[n]=e},hr.prototype.Ga=function(e){delete this.ig[e.cb()]};var kr="spatials";function lr(e){var n=(e=e||{}).tileCacheSize||1024,r=e.resultType,d=e.styleCallback;if(vc(e.min)||(e.min=12),lr.j.constructor.call(this,e),-1===mr.indexOf(r))throw new D(lr,2,"invalid resultType");if(this.f=r,d&&!Da(d))throw new D(lr,2,"invalid style callback");this.aa=d,this.R=e.pixelRatio||Ue(),this.Gb=A(this.Gb,this),this.J(new Rk(n,A(this.ab,this))),this.createTileInternal=A(4===r||8===r?this.T:this.L,this)}function nr(e){var n=e.qa;return n||(e.u||(e.u=e.m(e.f,e.aa,e.Gb)),(n=e.qa=new hr(e.u)).ka(e),n.addEventListener(e.A.za,A(e.xa,e)),n.qa=!0),n}u(lr,S),t("H.service.extension.TileProvider",lr),lr.prototype.i=!1,lr.prototype.getCapabilities=function(){return lr.j.getCapabilities.call(this)|Qj.CROP_LINES_BY_TILE|Qj.CROP_POLYGONS_BY_TILE},lr.prototype.Ha=function(e,n,r,d){return this.i?lr.j.Ha.call(this,e,n,r,d):B},lr.prototype.requestTile=lr.prototype.Ha,lr.prototype.Gb=function(e){this.dispatchEvent(new wd("error",Cc(e)?e:e+"",this))},lr.prototype.Rb=function(){return 1===this.f},lr.prototype.providesMarkers=lr.prototype.Rb,lr.prototype.Qb=function(){return 2===this.f},lr.prototype.providesDomMarkers=lr.prototype.Qb,lr.prototype.Cc=function(){return 4===this.f||8===this.f},lr.prototype.providesSpatials=lr.prototype.Cc,lr.prototype.L=function(e,n,r,d){var m=this.getTileKey(e,n,r);m=this.nb().get(m);var g=2==this.f,v=[],w=nr(this);for(m?m.valid=!0:(delete(e=m=new Xk(e,n,r,z)).l,e.s=d),n=(d=jr(w,m,g?"domMarkers":"markers")).length;n--;)(e=d[n]).Ii=m,(g||1===e.xb().getState())&&v.push(e);return m.data=v,m},lr.prototype.xa=function(e){(e=e.target.Ii)&&(e.valid=!1)},lr.prototype.Ao=function(e){this.D=!!e},lr.prototype.setTileCanvasRendering=lr.prototype.Ao,lr.prototype.D=!0,lr.prototype.T=function(e,n,r,d){var m=nr(this),g=this.getTileKey(e,n,r),v=this.tileSize,w=this.nb().get(g);return w||(delete(e=w=new al(g,e,n,r,v,this.R,r,m)).l,e.s=d),this.D?(d=Cp.pop(v),w.W(d)||Cp.push(d,v)):gl(w),w},lr.prototype.ab=function(e,n){var r;if(4===this.f||8===this.f){for(r=(e=n.Ua()).length;r--;)delete e[r].a[n.key];(e=n.gg())&&(Cp.push(e,this.tileSize),n.hg())}else for(r=(e=n.data).length;r--;)delete e[r].Ii},lr.prototype.o=function(){lr.j.o.call(this),nr(this).F()};var or={MARKER:1,DOM_MARKER:2,POLYLINE:4,POLYGON:8};lr.ResultType=or;var mr=[1,2,4,8];function Xq(e,n,r){var d=this,m=n&&n.rowFilter,g=r.resultType;Xq.j.constructor.call(this,r),C(e,pr,Xq,0),Wq(n),m?(r=Wa(n)).rowFilter=m.toString():r=Wa(n),delete r.layer,r.layerId=af(n.layerId,n.layer),(new Pf).a("pde","H.service.extension.worker.processor"),e=e.v().clone().G(qr+"."+rr).I({meta:1}),new Sf("pde",{message:[this.uid,0,{tileSize:this.tileSize,projected:!0,onlyOutline:4===g,serverUrl:e.toString(),layerConfigs:[r],horizontalMargin:1}]}).then(function(){d.i=!0,d.Va()},this.Gb)}u(Xq,lr),t("H.service.extension.platformData.TileProvider",Xq),Xq.prototype.m=function(e,n,r){return(e=new dr(e,n,r)).i=sr,e};var sr=new wh({strokeColor:"transparent",fillColor:"transparent",lineWidth:0,lineJoin:"round",lineCap:"round"});function tr(e,n,r,d,m,g){cr(tr,1,n,r),cr(tr,2,d,m),(this.f=e.length)?(this.U=e,this.m=n,this.i=r,this.b=0,this.c=A(this.c,this),this.s=d,this.l=m,this.a=oc(),Ya(this.a,ur,g||{}),this.g={},x.setTimeout(this.c,0)):n(hf,!0)}Xq.prototype.B=function(e,n,r,d,m){var w,g=this,v=this.getTileKey(e,n,r);v=this.nb().get(v);var k={cancel:ld},j=!0,G=this.f;if(v&&(4===G||8===G?v.Ud()||(d(Cp.pop(this.tileSize),null),j=!1):(d(z),j=!1)),j){var q=Ap.setTimeout(function(){(w=new Sf("pde",{message:[g.uid,1,[e,n,r]]})).then(d,m)},500);k.cancel=function(){w?w.cancel():Ap.clearTimeout(q)}}return k},Xq.prototype.requestInternal=Xq.prototype.B,Xq.prototype.o=function(){Xq.j.o.call(this),new Sf("pde",{message:[this.uid,3]})},Xq.ResultType=or;var ur={duration:100,Kl:"geometry",Jl:"WKT",uo:"searchAttributes",hj:B};function vr(e){this.a=e}function pr(e){pr.j.constructor.call(this,pr,e),zp(pr)}tr.prototype.c=function(){for(var d,e=[],n=!1,r=Lk();this.b<this.f;){var m=this.U[this.b];if(n=m.attributes,d=m.layerId||this.a.hj,m.distance&&(n[this.a.uo]={nearest:new kg(m.nearestLat,m.nearestLon),distance:m.distance}),m=m[this.a.Kl]){try{var g=Wn(new qo(m))}catch(v){this.i(new x.Error(v.message)),n=!0;break}n[this.a.Jl]=g}if((m=this.g[d])||(m=this.g[d]=this.s({layerId:d,columnNames:Object.keys(n)})),n=this.l(m,n),e.push(n),this.b++,(n=this.b===this.f)||Lk()-r>=this.a.duration){this.m(e,n);break}}n?this.g={}:this.u=x.setTimeout(this.c,0)},tr.prototype.cancel=function(){x.clearTimeout(this.u),this.b<this.f&&this.i(new x.Error("parsing canceled"))},tr.prototype.cancel=tr.prototype.cancel,vr.prototype.cancel=function(){for(var e=this.a,n=e.length;n--;)e[n].cancel();e.length=0},vr.prototype.cancel=vr.prototype.cancel,u(pr,Op),t("H.service.extension.platformData.Service",pr),pr.prototype.Aa=function(){return{subDomain:"s.fleet.ls",path:"1"}},pr.CONFIG_KEY="platformData",pr.prototype.request=function(e,n,r,d,m){var g="text/plain";if(!e)throw new D(this.request,0,e);if(!n)throw new D(this.request,1,n);if(!d)throw new D(this.request,3,d);if(!m)throw new D(this.request,4,m);return e=this.v().clone().G(e+"."+n).I(r),n===wr.JSON&&(g="application/json"),this.B(e,d,m,g)},pr.prototype.request=pr.prototype.request;var qr="tiles";pr.EntryPoint={DOC_ATTRIBUTES:"doc/attributes",DOC_LAYER:"doc/layer",DOC_LAYERS:"doc/layers",DOC_MAPS:"doc/maps",DOC_INDEXES:"doc/indexes",SEARCH_BBOX:"search/bbox",SEARCH_CORRIDOR:"search/corridor",SEARCH_PROXIMITY:"search/proximity",SEARCH_QUADKEY:"search/quadkey",SERVICE_CONFIGURATION:"serviceconfiguration",STATIC:"static",TILE:"tile",TILES:qr,FILE:"file",INDEX:"index"};var rr="json",wr={TXT:"txt",JSON:rr,HTML:"html",BIN:"bin"};function xr(e,n,r,d,m){var v,g=[],w=r.layer_id||r.layer_ids;return e=e.request(n,rr,r,function(k){v=new tr(k.geometries,d,m,function(j){return new Uq([],j.columnNames,j)},function(j,G){return j.tc(Vq(j,G))},{hj:w}),g.push(v)},function(k){m(new x.Error(k))}),g.push(e),new vr(g)}function yr(e,n,r){if(!Bc(e))throw new D(r,0,"has invalid type");if(!Bc(n))throw new D(r,1,"has invalid type");if(e.length!==n.length||!e.length)throw new D(r,1,"specify one key attribute for each given layer id in the same order")}function zr(e){zr.j.constructor.call(this,zr,e),zp(zr)}function Ar(e){var n=Br;if(!e||!Cc(e.layerId)||vc(e.rowFilter)&&!Da(e.rowFilter)||vc(e.rowFilterContext)&&!Ea(e.rowFilterContext))throw new D(n,1,vc("invalid layer config")?"invalid layer config":e)}function Cr(e){return Cc(e)&&/^[A-Z][A-Z0-9_]*$/.test(e)}function Dr(e){for(var n=e&&e.length,r=2<=n&&"WKT"===e[--n]&&"GEOMETRY_ID"===e[--n];r&&n--;)r=Cr(e[n]);return r}function Er(e,n){var r="",d=[];if(n){var m=e.geometries;if(m&&m.length){var g=Object.keys(m[0].attributes);for(r=r+"Meta:\t"+n+"\n"+g.join("\t"),r+="\tWKT\n",e=0;e<m.length;e++){var v=m[e].attributes,w=m[e].geometry;for(n=0;n<g.length;n++)d.push(v[g[n]]);r+=d.join("\t"),r+="\t"+w+"\n",d=[]}}}else{if(w={},d=[],e.geometries)for(m=0;m<e.geometries.length;m++)w[(n=e.geometries[m]).layerId]||(w[n.layerId]=[]),w[n.layerId].push(n);for(g in w)d.push({layerId:g,geometries:w[g]});for(e=0;e<d.length;e++)r+=Er(d[e],d[e].layerId)}return r}function Br(e,n,r){var g,d=this,m=n&&n.rowFilter;Br.j.constructor.call(this,r),C(e,Fr,Br,0);var v=r.resultType;if(Ar(n),m){var w=Wa(n);w.rowFilter=m.toString()}else w=n;(new Pf).a("cle","H.service.extension.worker.processor");var k=n.layerId;e.request(Gr,Hr,{detail_level:"all",layer_id:k},function(j){var G;for(j=j.layers,G=0;G<j.length;G++)if(j[G].layerId===k){w.level=j[G].level;break}g=e.v().clone().G(Ir+"."+Hr).I({meta:1}),new Sf("cle",{message:[d.uid,0,{tileSize:d.tileSize,projected:!0,onlyOutline:4===v,serverUrl:g.toString(),layerConfigs:[w],batchTiles:!1,horizontalMargin:1}]}).then(function(){d.i=!0,d.Va()},d.Gb)},function(j){d.Gb(j.message)})}function Jr(){if(Kr)throw new $c(Jr)}pr.EntryPointType=wr,pr.prototype.nc=function(e,n){var r=n&&n.resultType;return e=new Xq(this,e,n),1==r||2===r?new Sn(e):new sl(e)},pr.prototype.createTileLayer=pr.prototype.nc,pr.prototype.Fc=function(e,n,r,d,m,g){function v(j,G){G&&w--,d(j,!w)}var w,k=[];for(yr(e,n,this.Fc),cr(this.Fc,3,d,m),C(r,K,this.Fc,2),r={bbox:r.c+","+r.a+";"+r.f+","+r.b},g&&Ya(r,g),g=0,w=(e=r.layer_id?[r.layer_id]:e).length;g<w;g++)r.layer_id=e[g],r.key_attribute=n[g],k.push(xr(this,"search/bbox",r,v,m));return new vr(k)},pr.prototype.searchByBoundingBox=pr.prototype.Fc,pr.prototype.Ub=function(e,n,r,d,m,g,v){if(yr(e,n,this.Ub),C(r,kg,this.Ub,2,"has invalid type"),!Fc(d))throw new D(this.Ub,3,"has invalid type");return cr(this.Ub,4,m,g),e={layer_ids:e.join(","),key_attributes:n.join(","),proximity:r.lat+","+r.lng+","+d},v&&Ya(e,v),xr(this,"search/proximity",e,m,g)},pr.prototype.searchByProximity=pr.prototype.Ub,pr.prototype.Tb=function(e,n,r,d,m,g,v){var w="";if(yr(e,n,this.Tb),!Cc(r)&&!C(r,L))throw new D(this.Tb,1,"has invalid type");if(!Fc(d))throw new D(this.Tb,2,"has invalid type");if(cr(this.Tb,4,m,g),e={layer_ids:e.join(","),key_attributes:n.join(","),radius:d},Cc(r))e.route_id=r;else{for(d=r.$,r=0,n=d.length;r<n;r+=3)w+=d[r]+","+d[r+1],r<n-3&&(w+=";");e.corridor=w}return v&&Ya(e,v),xr(this,"search/corridor",e,m,g)},pr.prototype.searchByCorridor=pr.prototype.Tb,X.prototype.Jm=function(e){return this.Ma(pr,e)},X.prototype.getPlatformDataService=X.prototype.Jm,u(zr,Op),t("H.service.extension.geofencing.Service",zr),zr.prototype.Aa=function(){return{subDomain:"fleet.ls",path:"2"}},zr.CONFIG_KEY="geofencing",zr.prototype.request=function(e,n,r,d){if(!e)throw new D(this.request,0,e);if(!Da(r))throw new TypeError("onResult must be a function");if(!Da(d))throw new TypeError("onError must be a function");return e=this.v().clone().G(e+".json").I(n),this.B(e,r,d)},zr.prototype.request=zr.prototype.request,zr.prototype.a=function(e){return Error(e.issues&&e.issues.length?e.issues.map(function(n){return n.message}).join(". "):e.message||e.response_code)},zr.EntryPoint={SEARCH_PROXIMITY:"search/proximity"},X.prototype.lm=function(e){return this.Ma(zr,e)},X.prototype.getGeofencingService=X.prototype.lm,t("H.service.extension.customLocation.Permission",{READ:"read",WRITE:"write",EXPORT:"export"}),t("H.service.extension.customLocation.Storage",{READONLY:"readonly",UPDATABLE:"updatable"}),u(Br,lr),t("H.service.extension.customLocation.TileProvider",Br),Br.prototype.m=function(e,n,r){return new dr(e,n,r)},Br.prototype.B=function(e,n,r,d,m){var w,g=this,v=this.getTileKey(e,n,r);v=this.nb().get(v);var k={cancel:ld},j=!0,G=this.f;if(v&&(4===G||8===G?v.Ud()||(d(Cp.pop(this.tileSize),null),j=!1):(d(z),j=!1)),j){var q=Ap.setTimeout(function(){(w=new Sf("cle",{message:[g.uid,1,[e,n,r]]})).then(d,m)},500);k.cancel=function(){w?w.cancel():Ap.clearTimeout(q)}}return k},Br.prototype.requestInternal=Br.prototype.B,Br.prototype.o=function(){Br.j.o.call(this),new Sf("cle",{message:[this.uid,3]})},t("H.service.extension.customLocation.Table",Jr);var Kr=!0;function Lr(e,n){var r;Kr=!1;var d=new Jr;Kr=!0,d.c=rc(x.JSON.parse(x.JSON.stringify(e))),e=e.columnNames;var m=oc();for(r=e.length;r--;)m[e[r]]=r;if(d.f=m,d.b=e.length,n){if(n.length%e.length)throw new D(Lr,1,"Invalid number of cells")}else n=[];return d.a=n,d}Jr.prototype.Md=function(){return this.c},Jr.prototype.getMeta=Jr.prototype.Md,Jr.prototype.Pd=function(){return this.a.length/this.b},Jr.prototype.getRowCount=Jr.prototype.Pd,Jr.prototype.tc=function(e){return e<this.a.length/this.b?new Mr(this,e):B},Jr.prototype.getRow=Jr.prototype.tc,Jr.prototype.Um=function(){var n,e=this.a.length/this.b,r=new x.Array(e);for(n=0;n<e;n++)r[n]=new Mr(this,n);return r},Jr.prototype.getRows=Jr.prototype.Um,Jr.prototype.Hg=function(e){var r=this.a,d=r.length/this.b;if(!e||e.length%this.b)throw new D(this.Hg,0,"Invalid number of cells");return this.a=r.concat(e),d},Jr.prototype.addCells=Jr.prototype.Hg,Jr.prototype.ol=function(){for(var e=this.b,n=this.a,r=this.a.length/this.b;e--;)n.push(z);return this.tc(r)},Jr.prototype.addRow=Jr.prototype.ol,Jr.prototype.Ta=function(){return this.c.columnNames},Jr.prototype.getColumnNames=Jr.prototype.Ta,Jr.prototype.Be=function(e){return this.f[e]===B?B:new Nr(this,e)},Jr.prototype.getColumn=Jr.prototype.Be,Jr.prototype.ua=function(e,n){return this.a[e*this.b+this.f[n]]},Jr.prototype.getCell=Jr.prototype.ua,Jr.prototype.Gc=function(e,n,r){if(n=this.f[n],e>=this.a.length/this.b)throw new D(this.Gc,0,"Row index out of bounds");if(n===B)throw new D(this.Gc,0,"Column unknown");this.a[e*this.b+n]=r},Jr.prototype.setCell=Jr.prototype.Gc,Jr.prototype.concat=function(e){var r,n=arguments.length,d=""+this.Ta(),m=this.a?this.a.slice():[];for(r=0;r<n;r++){var g=arguments[r];if(!(g instanceof Jr))throw new D(this.concat,r);if(""+g.Ta()!==d)throw new D(this.concat,r,"Incompatible columns!");g.a&&(m=m.concat(g.a))}return Lr(this.c,m)},Jr.prototype.concat=Jr.prototype.concat;var Or=/(\n|\t|\r|")/;function Pr(e,n,r,d,m,g,v,w){var k;for(k=0;k<v;k++){k&&n.push("\t");var j=r[d*m+g[k]];if(k!==w){if(j!==z){if(j=String(j),Or.test(j))throw new D(e.Gi,0,'Invalid character (\\n, \\r, \\t, or ") in row '+d+" column "+e.c.columnNames[g[k]]);n.push(j)}}else n.push(j)}}function Nr(e,n){this.b=e,this.a=n}function Mr(e,n){this.a=e,this.Nh=n}function Qr(e){if(e===B)e="\t";else if(!/^[^"\r\n]$/.test(e))throw new D(Qr,0);this.b=String(e).charCodeAt(0),this.Oh=A(this.Oh,this),this.C=Rr}Jr.prototype.Gi=function(e,n){var r,d=this.b,m=this.Ta(),g=[],v=[],w=this.a,k=-1;for(r=0;r<d;r++)(!e||e.test(m[r]))&&("WKT"===m[r]&&(k=g.length),g.push(r));if(!(e=g.length))throw new D(this.Gi,1,"No columns filtered");if(Pr(this,v,m,0,d,g,e,k),n){var j=n.length;for(r=0;r<j;r++)v.push("\n"),Pr(this,v,w,m=n[r],d,g,e,k)}else for(j=this.Pd(),m=0;m<j;m++)v.push("\n"),Pr(this,v,w,m,d,g,e,k);return v.join("")},Jr.Column=Nr,Nr.prototype.ua=function(e){return this.b.ua(e,this.a)},Nr.prototype.getCell=Nr.prototype.ua,Nr.prototype.Gc=function(e,n){this.b.Gc(e,this.a,n)},Nr.prototype.setCell=Nr.prototype.Gc,Jr.Row=Mr,Mr.prototype.Ta=function(){return this.a.Ta()},Mr.prototype.getColumnNames=Mr.prototype.Ta,Mr.prototype.ua=function(e){return this.a.ua(this.Nh,e)},Mr.prototype.getCell=Mr.prototype.ua,Mr.prototype.Gc=function(e,n){this.a.Gc(this.Nh,e,n)},Mr.prototype.setCell=Mr.prototype.Gc,Mr.prototype.md=function(){return this.a},Mr.prototype.getTable=Mr.prototype.md;var Rr=0;function Sr(e,n,r){var d=e.C;if(d!==n)throw 1===d&&(e.C=Rr),new $c(r,"Requires state: "+["READY","PARSE","PAUSE"][n]+" but found "+["READY","PARSE","PAUSE"][d])}function Tr(e,n){var r=[];return e.parse(n,function(d,m,g){return 1>d&&(r[m]=g),0<d}),e.C=Rr,r}function Ur(e,n,r){this.c=new qo(e),this.s=n,this.g=!0,this.tf=this.l=this.b=0,Vr(this),this.a=r,this.f=[],this.i=!1}function Vr(e){var n=e.c.Pb();e.m=!1,(e.U=34===n)&&e.c.next()}function Wr(e,n){var r=e.c;switch(e.m=!0,n){case e.s:e.b++;break;case 13:r.next(),10!==r.Pb()&&e.a("CR without LF");case 10:e.b=0,e.l++;break;case-1:e.g=!1;break;default:e.a("End of field expected")}return r.next(),-1}function Xr(e,n,r,d){if(d=d||{},!n)throw new D(Xr,1,"has to be a function");if(!r)throw new D(Xr,2,"has to be a function");for(this.s=n,this.u=r,this.a=[],this.g={},this.f=[],this.b={},this.i={},this.l={},this.m={},this.U=d.duration||100,this.c=A(this.c,this),e=e.split("Meta:\t").slice(1),n=0;n<e.length;n++){r=(d=e[n].split("\n"))[0].split("\t")[0],d=d.slice(1).join("\n"),this.b[r]=new Qr,this.g[r]=Tr(this.b[r],d);var m={layerId:r,columnNames:this.g[r]};this.f.push(r),this.m[r]=Lr(m),this.i[r]=Lk(),Yr(this,d,r),this.c(r)}}function Yr(e,n,r){var d=[],m=e.g[r].length-1,g=e.m[r];try{e.b[r].parse(n,function(v,w,k){var j=!1;return 0<v&&(d[w]=k,w===m&&(e.a.push(g.tc(g.Hg(d))),Lk()-e.i[r]>e.U&&(j=!0))),j},function(v,w,k){if(0<v&&w===m)return Wn(k)})}catch(v){e.u(v)}}function Fr(e){Fr.j.constructor.call(this,Fr,e),zp(Fr)}function Zr(e,n,r,d){var m,g=n[e=e===$r?"changes":"file"],v=Cc(g),w=!v&&C(g,Blob);if(!v&&!w)throw new D(d,0,"Invalid "+e+" parameter");if(as)m=w?g:pf(g,"text/plain"),(d=new x.FormData).append(e,m,m.name||e+".wkt"),r.method="POST",r.data=d,delete n[e];else if(w)throw new D(d,0,"Sending Blob data is not supported by the browser")}p=Qr.prototype,p.getState=function(){return this.C},p.abort=function(){Sr(this,2,Qr.prototype.abort),this.C=Rr},p.Oh=function(e){throw this.C=Rr,new D(Qr.prototype.parse,0,"Malformed DSV at row "+this.a.l+" column "+this.a.b+": "+e)},p.parse=function(e,n,r){Sr(this,Rr,Qr.prototype.parse),e=e.trim(),this.a=new Ur(e,this.b,this.Oh),this.c=n,this.kk=r||gf,this.C=2,this.Ph()},p.kk=gf,p.Ph=function(){var e=this.a,n=[];Sr(this,2,Qr.prototype.Ph),this.C=1;do{if(!e.g){this.C=Rr;break}if(m>e.b){if(void 0!==r&&r!==m)return void this.a.a("The number of columns must be the same for all rows");var r=m}var d=e.l,m=e.b,g=e.tf,v=this.kk(d,m,e);if(e.tf>g)for(;-1!==e.next(););else{for(;-1!==(g=e.next());)n.push(g);v=String.fromCharCode.apply(z,n),n.length=0}Vr(e),this.c(d,m,v)&&(this.C=e.g?2:Rr)}while(1===this.C);2!=this.C&&void 0!==r&&0<m&&r!==m&&this.a.a("The number of columns must be the same for all rows")},p=Ur.prototype,p.tf=0,p.Pb=function(){if(this.m)var e=-1;else{var n=this.c;if(e=n.Pb(),this.U)switch(e){case 34:n.next(),34!==(e=n.Pb())&&(e=Wr(this,e));break;case-1:this.a("Closing quotation mark expected")}else switch(e){case 34:this.a("Unexpected quotation mark");case this.s:case 13:case 10:case-1:e=Wr(this,e)}}return e},p.ge=function(){this.i=!0,this.f=[]},p.Gd=function(){var e=this.f.slice();return this.i=!1,this.f=[],e},p.next=function(){var e=this.Pb();return-1!==e&&this.c.next(),this.i&&this.f.push(e),this.tf++,e},Xr.prototype.cancel=function(){for(var e in this.l)x.clearTimeout(this.l[e])},Xr.prototype.cancel=Xr.prototype.cancel,Xr.prototype.c=function(e){var r,d,n=this;this.l[e]=x.setTimeout(function(){if(2===n.b[e].getState())n.i[e]=Lk(),n.s(n.a,!1),n.a=[],n.b[e].Ph(),n.c(e);else{for(r=!0,d=0;d<n.f.length;d++)if(n.b[n.f[d]].getState()!==Rr){r=!1;break}r&&(0<n.a.length&&n.s(n.a,!0),n.a=[])}},0)},u(Fr,Op),t("H.service.extension.customLocation.Service",Fr),Fr.prototype.Aa=function(){return{subDomain:"fleet.ls",path:"2"}},Fr.CONFIG_KEY="customLocation",Fr.prototype.nc=function(e,n){var r=n&&n.resultType;return e=new Br(this,e,n),1===r||2===r?new Sn(e):new sl(e)},Fr.prototype.createTileLayer=Fr.prototype.nc;var as=x.FormData&&!!x.FormData.prototype.append;function bs(e,n,r,d,m,g){var v="text/plain",w=n===cs.LAYERS_UPLOAD||n===cs.LAYERS_MODIFY||n===cs.LAYERS_IMPORT,k=d,j={data:B,method:"GET",headers:e.g};if(!n)throw new D(e.request,0,n);if(!r)throw new D(e.request,1,r);cr(e.request,3,m,g),w&&(C(d,Object,e.request,2,"Invalid request parameters"),Zr(n,k=Wa(d),j,e.request));var G=e.v().clone().G(n+"."+r).I(k);return r===ds.JSON&&(v="application/json"),(e=new tf(v,G.toString(),je,j)).then(function(q){var _t=q.issues;_t&&q.error_id&&q.response_code?g(Error(_t[0].message)):m(q)},function(q){"error"===q.type||404===q.status?g(Error(q.statusText||"Unable to load data")):q.json().then(function(_t){g(Error("["+_t.issues[0].message+"] "+G+" request failed"))},function(){g(Error("["+q.statusText+"] "+G+" request failed"))})}),e}Fr.prototype.request=function(e,n,r,d,m){return bs(this,e,n,r,d,m)},Fr.prototype.request=Fr.prototype.request;var Gr="layers/list",$r="layers/modify",Ir="tiled/tile",cs={LAYERS_DELETE:"layers/delete",LAYERS_GRANT:"layers/access/grant",LAYERS_LIST:Gr,LAYERS_MODIFY:$r,LAYERS_UPLOAD:"layers/upload",LAYERS_IMPORT:"layers/import",SEARCH_ALL:"search/all",SEARCH_BBOX:"search/bbox",SEARCH_CORRIDOR:"search/corridor",SEARCH_PROXIMITY:"search/proximity",SEARCH_QUADKEY:"search/quadkey",SEARCH_TILE:Ir};Fr.EntryPoint=cs;var Hr="json",ds={TXT:"txt",JSON:Hr};function es(e,n,r,d,m){var v,g=[];return e=e.request(n,Hr,r,function(w){w.geometries.length?(w=Er(w,r.layer_id),v=new Xr(w,d,m),g.push(v)):d(hf,!0)},m),g.push(e),new vr(g)}Fr.EntryPointType=ds,Fr.prototype.ob=function(e,n,r){var d=this;return this.request("search/all","txt",{filter:'WKT==""',layer_id:e},function(m){var g=String(m).replace(/[\r\n]+$/g,"").split("\t");d.request(Gr,Hr,{layer_id:e,detail_level:"all"},function(v){(v=v.layers[0]).columnNames=g,n(Lr(v))},r)},r)},Fr.prototype.getLayer=Fr.prototype.ob,Fr.prototype.Kj=function(e,n,r,d){var g=n&&n.length,v=-1,w=this;return function m(){return++v<g?w.request("layers/access/grant",Hr,{layer_id:e,granted_app_id:n[v].grantedAppId,permissions:n[v].permissions.join(",")},m,d):w.ob(e,r,d)}()},Fr.prototype.grantAccess=Fr.prototype.Kj,Fr.prototype.jj=function(e,n,r){return this.request("layers/delete",Hr,{layer_ids:e},n,r)},Fr.prototype.deleteLayer=Fr.prototype.jj,Fr.prototype.$b=function(e,n,r){function d(){setTimeout(function(){k.ob(v,function(_t){setTimeout(m.bind(null,_t),G)},function(){64e3>j?(j+=G,d()):r(x.Error("Timeout"))})},G),G*=2}function m(_t){var _r=JSON.stringify(_t.Ta()),_s=e.grants;if(_r!==JSON.stringify(w)){var ga="Results into different column names on the backend: "+_r;setTimeout(function(){k.jj(v,function(){r(x.Error(ga))},function(_c){r(x.Error(ga+". "+_c.message))})},G)}else _s&&_s.length?k.Kj(v,_s,n,r):n(_t)}var g,v,w,k=this,j=0,G=1e3,q=!e||!Cr(v=e.layerId)&&(g="layerId")||!Dr(w=e.columnNames)&&(g="columnNames")?0:Da(n)?Da(r)?-1:2:1;if(0<=q)throw new D(k.$b,q,g||arguments[q]);return k.ob(v,function(){r(x.Error("Layer exists already"))},function(){var _t={layer_id:v,file:w.join("\t")},_r=e.level,_s=e.storage;_r!==B&&(_t.level=_r),_s!==B&&(_t.storage=_s),k.request("layers/upload",Hr,_t,d,r)})},Fr.prototype.createLayer=Fr.prototype.$b,Fr.prototype.Ub=function(e,n,r,d,m,g){if(!Bc(e))throw new D(this.Ub,0,"has invalid type");if(C(n,kg,this.Ub,1,"has invalid type"),!Fc(r))throw new D(this.Ub,2,"has invalid type");return cr(this.Ub,3,d,m),e={layer_ids:e.join(","),proximity:n.lat+","+n.lng+","+r},g&&Ya(e,g),es(this,"search/proximity",e,d,m)},Fr.prototype.searchByProximity=Fr.prototype.Ub,Fr.prototype.Tb=function(e,n,r,d,m,g){var v="";if(!Bc(e))throw new D(this.Tb,0,"has invalid type");if(!Cc(n)&&!C(n,L))throw new D(this.Tb,1,"has invalid type");if(!Fc(r))throw new D(this.Tb,2,"has invalid type");if(cr(this.Tb,3,d,m),e={layer_ids:e.join(","),radius:r},Cc(n))e.route_id=n;else{var w=n.$;for(n=0,r=w.length;n<r;n+=3)v+=w[n]+","+w[n+1],n<r-3&&(v+=",");e.corridor=v}return g&&Ya(e,g),es(this,"search/corridor",e,d,m)},Fr.prototype.searchByCorridor=Fr.prototype.Tb,Fr.prototype.Fc=function(e,n,r,d,m){function g(k,j){j&&w--,r(k,!w)}var w,v=[];if(!Bc(e))throw new D(this.Fc,0,"has invalid type");for(C(n,K,this.Fc,1,"has invalid type"),cr(this.Fc,2,r,d),n={bbox:n.c+","+n.a+";"+n.f+","+n.b},m&&Ya(n,m),m=0,w=(e=n.layer_id?[n.layer_id]:e).length;m<w;m++)n.layer_id=e[m],v.push(es(this,"search/bbox",n,g,d));return new vr(v)},Fr.prototype.searchByBoundingBox=Fr.prototype.Fc,Fr.prototype.li=function(e,n,r,d){var m,g=[];if(!Cc(e))throw new D(this.li,0,"has invalid type");cr(this.li,1,n,r);var v={layer_id:e};return d&&Ya(v,d),d=this.request("search/all",Hr,v,function(w){w.geometries.length?(w=Er(w,e),m=new Xr(w,n,r),g.push(m)):n(hf,!0)},r),g.push(d),new vr(g)},Fr.prototype.searchAll=Fr.prototype.li;var fs={delete:/^GEOMETRY_ID$/,append:/^(?!GEOMETRY_ID$)/};function gs(e,n,r,d,m,g){function v(){_s++,d(this,_s===_t)}function w(_h){_s++,m(_h,this,_s===_t)}var j,k="append"!==n,G={},q=oc(),_t=0,_r=[],_s=0;if(!Bc(r))throw new D(g,0,r);for(cr(g,1,d,m),j=r.length;j--;){var ga=r[j];if(C(ga,Mr)){var _c=ga.md().Md().layerId,_u=ga.ua("GEOMETRY_ID");if(k){if(_u===z||""===String(_u))var _f='GEOMETRY_ID must not be null or ""';G[_u=_c+"_"+_u]&&(_f="same GEOMETRY_ID for multiple rows"),G[_u]=ga}else _u!==z&&""!==String(_u)&&(_f='GEOMETRY_ID must be null or ""')}else _f="Invalid type";if(_f)throw new D(g,0,"- Invalid row at index "+j+", "+_f);(_u=q[_c])||(_u=q[_c]=[],_t++),_u.push(ga)}for(_c in q){for(r=[],j=(_u=q[_c]).length;j--;)r.push(_u[j].Nh);_r.push(e.request($r,Hr,{layer_id:_c,action:n,changes:_u[0].md().Gi(fs[n]||null,r)},A(v,_u),A(w,_u)))}return new vr(_r)}function hs(e){jq.j.constructor.call(this,hs,e),zp(hs)}function is(e,n,r){var d=+(r=r||{}).min,m=+r.max;r.min=d?ae(d,1,17):1,r.max=m?ae(m,1,17):17,is.j.constructor.call(this,r),C(e,js,is,0),C(n,Wh,is,1),this.f=e,n.a&&n.a("OMV"),this.Qa(n,!0),this.i=xp(this)}function js(e){js.j.constructor.call(this,js,e),this.b=(e||jf).layer||"traffic"}function ks(e,n,r,d){return e.v().clone().G("traffictiles/"+e.b+"/mc/"+d+"/"+n+"/"+r+"/omv")}function ls(e){ls.j.constructor.call(this,ls,e)}function ms(e){if(this.c=!!e.toBypassToken,!this.c&&!e.token)throw new D(ms,0,'"token" must be specified');zp(ms,"Use HERE IML service instead."),ms.j.constructor.call(this,ms,e),this.l=e.token,this.f={},this.b={}}function rs(e,n,r,d,m,g,v){return m={method:m,headers:Object.assign(e.c?{}:{authorization:"Bearer "+e.l},{"Content-Type":"application/geo+json"},e.g)},g&&(m.data=JSON.stringify(g)),(g=new tf("application/json",(n=os(e.v().clone().G(n+"/features").I(v||{}))).toString(),je,m)).then(r,Qp(e,n,d)),g}function qs(e,n){e.b[n]=ss,e.Kf(n,function(r){e.b[n]=ts,e.f[n]=r.copyright,e.dispatchEvent("copyrightupdate")},function(r){throw e.b[n]=us,r})}function ps(e,n){return e.c?n:os(n).I({access_token:e.l})}function os(e){var n=Object.assign({},e.getQuery());return delete n.apikey,e.bf(n)}Fr.prototype.$i=function(e,n,r){return gs(this,"append",e,n,r,this.$i)},Fr.prototype.appendRows=Fr.prototype.$i,Fr.prototype.il=function(e,n,r){return gs(this,"update",e,n,r,this.il)},Fr.prototype.updateRows=Fr.prototype.il,Fr.prototype.kj=function(e,n,r){return gs(this,"delete",e,n,r,this.kj)},Fr.prototype.deleteRows=Fr.prototype.kj,X.prototype.Yl=function(e){return this.Ma(Fr,e)},X.prototype.getCustomLocationService=X.prototype.Yl,u(hs,Op),t("H.service.extension.customRoute.Service",hs),hs.prototype.Aa=function(){return{subDomain:"s.fleet.ls",path:"2"}},hs.CONFIG_KEY="customRoute",hs.prototype.a=function(e){return Error(e.issues&&e.issues.length?e.issues.map(function(n){return n.message}).join(". "):e)},hs.prototype.Cd=function(e,n,r){return cr(this.Cd,1,n,r),e=this.v().clone().G("calculateroute.json").I(e),this.B(e,n,r)},hs.prototype.calculateRoute=hs.prototype.Cd,X.prototype.Zl=function(e){return this.Ma(hs,e)},X.prototype.getCustomRoutingService=X.prototype.Zl,u(is,S),t("H.service.trafficVectorTile.Provider",is),is.prototype.Sb=ff,is.prototype.providesOMV=is.prototype.Sb,is.prototype.ub=function(e){return this.i.test(e)},is.prototype.cacheFilter=is.prototype.ub,is.prototype.uc=function(e,n,r){return ks(this.f,e,n,r).toString()},is.prototype.getTileKey=is.prototype.uc,is.prototype.nb=function(){return this.m},is.prototype.getCache=is.prototype.nb,is.prototype.MAX_STORE_TIME=2592e6,is.prototype.l=function(){return od()},is.prototype.c=function(){return od()?nd():is.j.c.call(this)},is.prototype.s=function(){return this.f},is.prototype.B=function(e,n,r,d,m){return this.f.Ha(e,n,r,d,m)},is.prototype.requestInternal=is.prototype.B,is.prototype.gb=function(e){e.a&&e.a("OMV"),this.Qa(e)},is.prototype.setStyle=is.prototype.gb,is.prototype.V=function(){return is.j.Ya.apply(this)},is.prototype.getStyle=is.prototype.V,is.prototype.m=new Rk(256),is.prototype.ba=function(){return null},is.prototype.getCopyrights=is.prototype.ba,u(js,Op),t("H.service.trafficVectorTile.Service",js),js.prototype.Aa=function(){return{subDomain:"traffic.vector",path:"v2"}},js.CONFIG_KEY="trafficVectorTile",js.prototype.$b=function(e,n,r){n=n||{};var d={min:0,max:22};return Ea(r)&&yp(d,r),new sl(new is(this,e,n),d)},js.prototype.createLayer=js.prototype.$b,js.prototype.Ha=function(e,n,r,d,m){return this.B(ks(this,e,n,r),function(g){return g.arrayBuffer().then(d,m)},m,"arraybuffer")},js.prototype.f=function(e){return Ao()+"/"+e},js.prototype.vm=function(){return this.b},js.prototype.getLayerName=js.prototype.vm,X.prototype.oh=function(e){return this.Ma(js,e)},X.prototype.getTrafficVectorTileService=X.prototype.oh,u(ls,Op),t("H.service.SearchService",ls),ls.CONFIG_KEY="search",ls.prototype.Aa=function(){return{subDomain:"search",path:"v1"}},ls.prototype.a=function(e){return e=[e.title,e.action,e.cause].filter(function(n){return n}),Error(e.join(". "))},ls.prototype.Zg=function(e,n,r){return e=this.v().clone().Ba("geocode").G("geocode").I(e),this.B(e,n,r)},ls.prototype.geocode=ls.prototype.Zg,ls.prototype.ii=function(e,n,r){return e=this.v().clone().Ba("revgeocode").G("revgeocode").I(e),this.B(e,n,r)},ls.prototype.reverseGeocode=ls.prototype.ii,ls.prototype.sl=function(e,n,r){return e=this.v().clone().Ba("autosuggest").G("autosuggest").I(e),this.B(e,n,r)},ls.prototype.autosuggest=ls.prototype.sl,ls.prototype.zl=function(e,n,r){return e=this.v().clone().Ba("discover").G("discover").I(e),this.B(e,n,r)},ls.prototype.discover=ls.prototype.zl,ls.prototype.Gn=function(e,n,r){return e=this.v().clone().Ba("lookup").G("lookup").I(e),this.B(e,n,r)},ls.prototype.lookup=ls.prototype.Gn,ls.prototype.ul=function(e,n,r){return e=this.v().clone().Ba("browse").G("browse").I(e),this.B(e,n,r)},ls.prototype.browse=ls.prototype.ul,X.prototype.Wm=function(e){return this.Ma(ls,e)},X.prototype.getSearchService=X.prototype.Wm,u(ms,Op),t("H.service.xyz.Service",ms),ms.prototype.Aa=function(){return{host:"xyz.api.here.com",path:"hub/spaces"}},ms.prototype.a=function(e){return Error(e.errorMessage||e.message)},ms.prototype.jh=function(e,n,r){return zc(e,"String",this.jh,0,'"projectId" must be a string'),ns(this.jh,1,n,r),e=os(this.v().clone().wd("project-api/projects/"+e)),this.B(e,n,r)},ms.prototype.getProject=ms.prototype.jh,ms.prototype.Gj=function(e,n,r){return ns(this.Gj,0,e,n),r=ps(this,this.v().clone().I(r||{})),this.B(r,e,n)},ms.prototype.getSpaces=ms.prototype.Gj,ms.prototype.Kf=function(e,n,r){return zc(e,"String",this.Kf,0,'"spaceId" must be a string'),ns(this.Kf,1,n,r),e=ps(this,this.v().clone().G(e)),this.B(e,n,r)},ms.prototype.getSpace=ms.prototype.Kf,ms.prototype.Qd=function(e,n,r){return zc(e,"String",this.Qd,0,'"spaceId" must be a string'),ns(this.Qd,1,n,r),e=ps(this,this.v().clone().G(e+"/statistics")),this.B(e,n,r)},ms.prototype.getStatistics=ms.prototype.Qd,ms.prototype.Ff=function(e,n,r,d,m,g,v){return e=ps(this,this.v().clone().G(d+"/tile/web/"+r+"_"+e+"_"+n+".mvtf").I(Object.assign({clip:!0},v))),this.B(e,function(w){return w.arrayBuffer().then(m)},g,"arraybuffer")},ms.prototype.search=function(e,n,r,d){return zc(e,"String",this.search,0,'"spaceId" must be a string'),ns(this.search,1,n,r),e=ps(this,this.v().clone().G(e+"/search").I(d||{})),this.B(e,n,r)},ms.prototype.search=ms.prototype.search,ms.prototype.Sc=function(e,n,r,d){if(zc(e,"String",this.Sc,0,'"spaceId" must be a string'),!Ea(n))throw new D(this.Sc,1,'"params" must be an object');return ns(this.Sc,2,r,d),e=ps(this,this.v().clone().G(e+"/features").I(n)),this.B(e,r,d)},ms.prototype.getFeaturesById=ms.prototype.Sc,ms.prototype.Jd=function(e,n,r,d){if(zc(e,"String",this.Jd,0,'"spaceId" must be a string'),!Ea(n))throw new D(this.Sc,1,'"params" must be an object');return ns(this.Jd,2,r,d),e=ps(this,this.v().clone().G(e+"/bbox").I(n)),this.B(e,r,d)},ms.prototype.getFeaturesByBoundingBox=ms.prototype.Jd,ms.prototype.ba=function(e){return this.f[e]||(this.b[e]||qs(this,e),null)},ms.prototype.$c=function(e,n,r,d,m){if(zc(e,"String",this.$c,0,'"spaceId" must be a string'),!Ea(n))throw new D(this.$c,1,'"geojsonObject" must be an object');if(ns(this.$c,2,r,d),m&&!Ea(m))throw new D(this.$c,4,'"opt_params" must be an object');return rs(this,e,r,d,"PUT",n,m)},ms.prototype.putFeatures=ms.prototype.$c,ms.prototype.Yc=function(e,n,r,d,m){if(zc(e,"String",this.Yc,0,'"spaceId" must be a string'),!Ea(n))throw new D(this.Yc,1,'"featureCollection" must be an object');if(ns(this.Yc,2,r,d),m&&!Ea(m))throw new D(this.Yc,4,'"opt_params" must be an object');return rs(this,e,r,d,"POST",n,m)},ms.prototype.postFeatures=ms.prototype.Yc,ms.prototype.hd=function(e,n,r,d){if(zc(e,"String",this.hd,0,'"spaceId" must be a string'),!Ea(n))throw new D(this.hd,1,'"params" must be an object');return ns(this.hd,2,r,d),rs(this,e,r,d,"DELETE",B,n)},ms.prototype.deleteFeatures=ms.prototype.hd,ms.CONFIG_KEY="xyz";var ss=1,ts=2,us=-1;function ns(e,n,r,d){if(!Da(r))throw new D(e,n,'"onResult" must be a function');if(!Da(d))throw new D(e,n+1,'"onError" must be a function')}function vs(e,n,r){var d;if(vs.j.constructor.call(this,r?{min:r.min,max:r.max,engineType:r.engineType}:void 0),C(e,ms,vs,0),!Cc(n))throw new D(vs,1,'"spaceId" must be a string');if(this.m=e,this.f=n,this.i={},r&&(["limit","simplificationLevel","tags"].forEach(function(m){m in r&&(this.i[m]=r[m])},this),e=r.parameters))for(d in e)this.i[d]=e[d];this.Qa(this.b===kk.WEBGL?new ti({sources:{xyz:{type:"MVT"}},layers:{xyz:{data:{source:"xyz",layer:this.f},points:{filter:{$geometry:"point"},draw:{points:{collide:!1,order:200,color:"#92CF48",size:[[10,"8px"],[14,"12px"],[18,"16px"]]}}},polygons:{filter:{$geometry:"polygon"},draw:{polygons:{order:201,color:"#E39E3C"},lines:{order:202,color:"#755DA5",width:"1px"}}},lines:{filter:{$geometry:"line"},draw:{lines:{order:203,color:"#000000",width:"2px",join:"round",cap:"round"}}}}}}):new H.map.render.harp.Style({styles:[{layer:this.f,when:["==",["geometry-type"],"Point"],technique:"circles",renderOrder:200,color:"#92CF48",size:["interpolate",["linear"],["zoom"],10,8,14,12,18,16]},{layer:this.f,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:"#E39E3C",renderOrder:201},{layer:this.f,when:["==",["geometry-type"],"Polygon"],technique:"solid-line",color:"#755DA5",lineWidth:"1px",renderOrder:202},{layer:this.f,when:["==",["geometry-type"],"LineString"],technique:"solid-line",color:"#000000",lineWidth:"2px",renderOrder:203}]}))}function ws(e,n,r,d,m){1&m&&xs(e,e,n,r,d,0),2&m&&xs(e,e,n,r,d,1),4&m&&xs(e,e,n,r,d,2),8&m&&xs(e,e,n,r,d,3)}function xs(e,n,r,d,m,g){for(var w,G,ga,_c,v=(r+1)*(r+1),k=4*d,j=r+1,q=[{r:0,Hl:0,tl:0,Fg:0,next:null}],_t=1,_r=["r","g","b","a"][g],_s=2*r+1;_t<_s;_t++)q[_t]={r:0,Hl:0,tl:0,Fg:0,next:null},q[_t-1].next=q[_t];q[2*r].next=q[0];var _u=4*(d-1);for(w=0;w<m;w++){var _f=w*k,_h=e[_f+g],ad=_h*j*(r+2)/2;for(_s=_h*j,_t=0;_t<=r;_t++)q[_t][_r]=_h;var ey=0;for(_t=1;_t<=r;_t++){var sy=_t<d?_f+4*_t:_f+_u;ad+=(sy=e[sy+g])*(j-_t),ey+=sy,q[r+_t][_r]=sy}sy=q[0],ga=q[j],_t=_f,_c=4*j;var ly=_f+_u;for(_h=0;_h<d;_h++){n[_t+g]=ad/v,ad-=_s;var dy=_h+j<d?_t+_c:ly;if(ad+=ey+=dy=e[dy+g],_s-=sy[_r],_s+=ga[_r],ey-=ga[_r],sy[_r]=dy,sy=sy.next,ga=ga.next,_t+=4,!ad)for(;(G=4*(_h+j))<k&&0===e[_f+g+G];)_h++,_t+=4}}for(_f=(m-1)*k,_h=0;_h<d;_h++){for(ad=(w=n[(e=4*_h)+g])*j*(r+2)/2,_s=w*j,_t=0;_t<=r;_t++)q[_t][_r]=w;for(ey=0,_t=1;_t<=r;_t++)ad+=(sy=n[(sy=_t<m?e+_t*k:e+_f)+g])*(r-_t+1),ey+=sy,q[r+_t][_r]=sy;for(sy=q[0],ga=q[j],_t=e,ly=j*k,_u=e+_f,w=0;w<m;w++)if(n[_t+g]=ad/v,ad-=_s,ad+=ey+=dy=n[(dy=w+j<m?_t+ly:_u)+g],_s-=sy[_r],_s+=ga[_r],ey-=ga[_r],sy[_r]=dy,sy=sy.next,ga=ga.next,_t+=k,!ad)for(;(G=w+j)<m&&0===n[G*k+g+e];)w++,_t+=k}}function ys(e,n,r){this.f=n=e>>n,this.l=Math.log(n)*Math.LOG2E,this.i=e=document.createElement("CANVAS"),this.a=e.getContext("2d"),this.b=e.width=e.height=3*n;var d=document.createElement("canvas");e=r.a;var g,m=r.b;for(v in n=[],d.width=256,d.height=1,d=d.getContext("2d"),m)m.hasOwnProperty(v)&&n.push({stop:parseFloat(v),value:m[v]});m=n.length,n.sort(this.s),0<n[0].stop&&n.unshift({stop:0,value:n[0].value}),1>n[m-1].stop&&n.push({stop:1,value:n[m-1].value}),m=n.length;var v=d.createLinearGradient(0,0,256,0);for(g=0;g<m;g++){if(!e&&k){var w=k.stop+(n[g].stop-k.stop)/2;v.addColorStop(w,k.value),v.addColorStop(w,n[g].value)}v.addColorStop(n[g].stop,n[g].value);var k=n[g]}d.fillStyle=v,d.fillRect(0,0,256,1),this.c=d.getImageData(0,0,256,1).data,this.g=r.a}function zs(e,n){this.a=e,this.size=n}function As(e,n){var r,d=0;if(!Ea(e)||Va(e))throw new D(As,0,e);for(r in e){var m=+r;if(d++,!(Fc(m)&&0<=m&&1>=m&&Cc(e[r])))throw new D(As,0,e)}if(2>d)throw new D(As,0,"Specify at least 2 stops");this.b=e,this.a=!!n}X.prototype.jn=function(e){return this.Ma(ms,e)},X.prototype.getXYZService=X.prototype.jn,u(vs,S),t("H.service.xyz.Provider",vs),vs.prototype.B=function(e,n,r,d,m){return this.m.Ff(e,n,r,this.f,d,m,this.i)},vs.prototype.requestInternal=vs.prototype.B,vs.prototype.ba=function(){return this.m.ba(this.f)},vs.prototype.getCopyrights=vs.prototype.ba,vs.prototype.Sb=ff,vs.prototype.providesOMV=vs.prototype.Sb,vs.prototype.V=function(){return this.Ya()},vs.prototype.getStyle=vs.prototype.V,vs.prototype.gb=function(e){C(e,ti)&&e.a("MVT"),this.Qa(e)},vs.prototype.setStyle=vs.prototype.gb,t("H.service.buildInfo",function(){return Hf("H-service","1.49.1","74e5afb",{region:"row"})}),ys.prototype.s=function(e,n){return e.stop-n.stop},t("H.data.heatmap.Colors",As);var Bs=new As({0:"#008",.2:"#0b0",.5:"#ff0",.7:"#f00"},!0);function Cs(e,n,r){this.a=e=ae(e,0,30),this.u=n,this.i=r,this.s=[],this.b=[];do{this.b[e]=[],this.s[e]=new Ds}while(e--);n===Es?(this.m=Fs,this.l=Gs):(this.m=Hs,this.l=Is),this.c=1/0,this.f=-1/0}As.DEFAULT=Bs;var Js=Math.log(.5);function Gs(e){return this.g?Math.round((e-this.c)/this.g*255):127}function Is(e){return void 0===this.U?127:Math.round(255*Math.pow(e,this.U))}function Ks(e,n,r,d,m){var v,w,g=1<<n;return d=$d(d,g),!(g=0<=r&&r<g&&(v=e.b[n])&&(w=v[r])&&(g=w[d])||null)&&m&&0<=n&&(g=Ks(e,n-1,r>>1,d>>1,m)),g}function Ls(e,n,r,d,m,g){for(var v,w=[];r<=d;r++)for(v=m;v<=g;v++)w.push(Ks(e,n,r,v,!1));return w}function Ms(e,n){var g,r=0,d=0,m=Ks(e,0,0,0,!1);return n.f||(n.z===e.a?n.c=n.a:(Ns(e,n,function(v){var w=Os(e,v),k=4-w.length;if(v.z!==e.a){for(g=0;g<w.length;g++)r+=w[g].a,d++;r+=k*m.a,d+=k}}),n.c=r/d),n.f=!0),n.c}function Ns(e,n,r){n=[n];for(var d,m;0<n.length;)d=Os(e,m=n.shift()),r(m),n.push.apply(n,d)}function Os(e,n){var d,m,g,r=[];for(m=0;1>=m;m++)for(g=0;1>=g;g++)(d=Ks(e,n.z+1,2*n.x+m,2*n.y+g,!1))&&r.push(d);return r}function Hs(e,n,r){this.x=e,this.y=n,this.z=r,this.a=this.b=this.g=0,this.f=!1,this.c=0}function Fs(e,n,r){this.x=e,this.y=n,this.z=r,this.a=this.b=this.g=0,this.f=!1,this.c=0}function Ds(){this.f=this.c=1/0,this.a=this.b=-1/0}function Ps(e){var n=e||{},r=+n.sampleDepth,d=n.pointSize;e=+n.coarseness;var m=n.colors,g={min:n.min,max:n.max,engineType:n.engineType},w=+n.dataMax;if(n.tileSize&&(g.tileSize=n.tileSize),S.call(this,g),lk(this,n.opacity),this.i="value"===n.type?Es:Qs,this.sampleDepth_=Fc(r)?ae(Math.round(r),1,8):4,this.L=this.i===Qs?Fc(d)?ae(Math.round(7-d),0,6):2:1,this.D=!!n.assumeValues,n=this.max,this.T=Fc(w)?ae(Math.round(w),this.min,n+this.sampleDepth_):n,e=Fc(e)?ae(Math.round(e),0,3):1,m&&!C(m,As))throw new D(Ps,0,"colors");this.f=new Cs(n+this.sampleDepth_+this.L,this.i,this.T),this.aa=new ys(this.tileSize,e,m||Bs),this.u=A(this.u,this),this.m=A(this.m,this),this.R=new Mk(20,this.u)}function Rs(e,n,r,d){var m=document.createElement("canvas"),g=e.tileSize,v=m.getContext("2d");m.width=m.height=g;var _s,ga,w=e.aa,k=e.f,j=e.D,G=e.i,q=e.L,_t=w.f,_r=w.a,_c=G===Qs?void 0===q?2:q:1;q=_c,e=Math.min(e.sampleDepth_+_c,w.l),_c=w.b;var _u=k.a;if(j&&G===Es){for(ga=-1;1>=ga;ga++)for(j=-1;1>=j;j++){var _f=(_f=Ks(k,d,r+ga,n+j,!0))?k.l(Ms(k,_f)):128;_r.fillStyle="rgba("+_f+",128,0,1)",_r.fillRect((j+1)*_t,(ga+1)*_t,_t,_t)}j=_t-Math.floor(_t/10),ga=3,ws((_f=_r.getImageData(0,0,_c,_c)).data,j,_c,_c,ga),_r.putImageData(_f,0,0)}else _r.fillStyle=j?"#080":"#000",_r.fillRect(0,0,_c,_c);for(;q<=e&&d+q<=_u;q++){ga=_t-(j=_t>>q);var _h=G===Qs?127+Math.floor(128/(1<<e-q)):255;_f=2+(1<<q);var ad=1<<q,ey=n<<q,sy=r<<q;for(ey=(ad=Ls(k,d+q,sy-1,sy+ad,ey-1,ey+ad)).length;ey--;){sy=ey%_f;var ly=ey/_f<<0;(_s=ad[ey])&&(_s=k.l(_s.a),_r.fillStyle="rgba("+_s+","+_h+",0,1)",_r.fillRect(sy*j+ga,ly*j+ga,j,j))}_f=_r,_h=j,sy=sy=3,ws((ly=_r.getImageData(ad=ga,ga,ey=_t+2*j,j=_t+2*j)).data,_h,ey,j,sy),_f.putImageData(ly,ad,ga)}for(n=_r.getImageData(0,0,_c,_c),r=w.c,d=w.g,e=0,_c=(k=n.data).length;e<_c;e+=4)G=k[e],q=k[e+1],4===r.length&&(G=0),k[e]=r[4*G],k[e+1]=r[4*G+1],k[e+2]=r[4*G+2],k[e+3]=r[4*G+3]*(d?q/255:10>q?0:1);return _r.putImageData(n,0,0),w=new zs(w.i,_t),v.drawImage(w.a,_t=w.size,_t,_t,_t,0,0,g,g),m}Cs.prototype.Db=function(e){var n,r,d=e.value;void 0===d&&(d=1),d>this.f&&(this.f=d,this.g=this.f-this.c),d<this.c&&(this.c=d,this.g=this.f-this.c);var m=mj.Pc(e).scale(1073741823).floor(),g=m.x>>30-(d=this.a);for(m=m.y>>30-d,r=this.m;-1<d;){this.b[d][m]||(this.b[d][m]=[]),(n=this.b[d][m][g])||(n=this.b[d][m][g]=new r(g,m,d)),n.Db(e,d);var v=this.s[d];v.f>n.b&&(v.f=n.b),v.a<n.b&&(v.a=n.b),v.c>n.a&&(v.c=n.a),v.b<n.a&&(v.b=n.a),d--,g>>=1,m>>=1}},Cs.prototype.clear=function(){Cs.call(this,this.a,this.u,this.i)},Hs.prototype.Db=function(e,n){this.g++,this.b+=e.value||1,this.a=this.b/Math.pow(2,2*(30-n))},Fs.prototype.Db=function(e){this.b+=void 0!==(e=e.value)?e:1,this.a=this.b/++this.g,this.f=!1},u(Ps,S),t("H.data.heatmap.Provider",Ps),Ps.prototype.ic=function(e){lk(this,e)},Ps.prototype.setOpacity=Ps.prototype.ic,Ps.prototype.Tc=function(){return this.g},Ps.prototype.getOpacity=Ps.prototype.Tc,Ps.prototype.Ve=ff,Ps.prototype.providesRasters=Ps.prototype.Ve,Ps.prototype.B=function(e,n,r,d,m){var v,w,g=this.D;if(Ks(this.f,0,0,0,!1)){if(!g){var k=Ls(this.f,r,n-1,n+1,e-1,e+1);for(v=k.length;v--&&!g;)if(null!==k[v]){g=!0;break}}g&&(w=this.R.push([e,n,r,d,m],this.m))}return g||d(null),w||Hl},Ps.prototype.requestInternal=Ps.prototype.B,Ps.prototype.u=function(e,n){e.done(Rs(this,n[0],n[1],n[2]))},Ps.prototype.m=function(e,n,r){var d=e.data;e=d[3],d=d[4],r?d():e(n)},Ps.prototype.Zi=function(e,n){var r;if(!Bc(e))throw new D(this.Zi,0,e);if(r=e.length){for(;r--;)this.f.Db(e[r]);var d;r=(e=this.f).s;var m=e.a,g=0;if(e.u===Qs){var v=r[e.a].a;for(d=e.a;0<=d&&r[d].a===v;d--)g=d;for(v=r[0].a,d=0;d<=g&&v===r[d].a;d++)m=d;g>e.i&&(g=e.i),v=Math.round(m+(g-m)/2),e.U=Js/Math.log(r[v].b)}this.reload(!!n)}},Ps.prototype.addData=Ps.prototype.Zi,Ps.prototype.clear=function(){this.f.clear(),this.reload(!0)},Ps.prototype.clear=Ps.prototype.clear;var Qs=0,Es=1;function Ss(){}function Ts(e){for(var n,r=(e=e.attributes).length;r--;)switch(n=e[r],n.name){case"x":this.x=parseFloat(n.value);break;case"y":this.y=parseFloat(n.value);break;case"xunits":this.Vc="fraction"===Ss.prototype.Na(n);break;case"yunits":this.zc="fraction"===Ss.prototype.Na(n)}}function Us(e){var n=e.childNodes,r=new Ss;for(e=n.length;e--;){var d=n[e];"href"===d.nodeName&&(this.href=r.Na(d))}}function Vs(e){var n;if(e){var r=(e=e.childNodes).length;for(n=new Ss;r--;){var d=e[r];switch(d.nodeName){case"scale":this.scale=n.Gf(d);break;case"Icon":this.icon=d=new Us(d);break;case"hotSpot":this.a=d=new Ts(d)}}}}function Ws(){this.a={4:function(e){return["#",e.charAt(1),e.charAt(1),e.charAt(2),e.charAt(2),e.charAt(3),e.charAt(3),"ff"].join("")},5:function(e){return["#",e.charAt(1),e.charAt(1),e.charAt(2),e.charAt(2),e.charAt(3),e.charAt(3),e.charAt(4),e.charAt(4)].join("")},7:function(e){return e+"ff"},9:function(e){return e}},this.b={4:function(e){return[Xs(e.charAt(1)),Xs(e.charAt(2)),Xs(e.charAt(3)),255]},5:function(e){return[Xs(e.charAt(1)),Xs(e.charAt(2)),Xs(e.charAt(3)),Xs(e.charAt(4))]},7:function(e){return[(e=parseInt(e.substring(1),16))>>16&255,e>>8&255,255&e,255]},9:function(e){return[(e=parseInt(e.substring(1),16))>>24&255,e>>16&255,e>>8&255,255&e]}}}function Xs(e){return((e=parseInt(e,16))<<4)+e}function Ys(e){return 16>e?"0"+Math.round(e).toString(16):Math.round(e).toString(16)}function Zs(e,n,r){return/^(#|rgb).*/.test(n)?(r||(r="","#"===n.charAt(0)?r=e.a[n.length]?n:"":"rgb"===n.substr(0,3)&&(r=2<(r=(n=n.match(/\d+(\.\d+)?/g)).length)&&5>r?["#",Ys(+n[0]),Ys(+n[1]),Ys(+n[2]),3<r?Ys(255*+n[3]):"ff"].join(""):""),n=r),(e=e.b[n.length](n))[3]=Math.round(e[3]/255*100)/100,e):[0,0,0,255]}function $s(e){for(var n,r=(e=e.childNodes).length,d=new Ss,m=new Ws;r--;)switch(n=e[r],n.nodeName){case"color":this.a=d.Ef(n);break;case"colorMode":this.b=d.Na(n)}"random"===this.b&&(this.a="#"+m.el(this.a,!1))}function at(e){var n=e.childNodes,r=n.length,d=new Ss;for(this.a=this.fill=!0,this.b=new $s(e);r--;)switch(e=n[r],e.nodeName){case"fill":this.fill=d.Hd(e);break;case"outline":this.a=d.Hd(e)}}function bt(e){var n=e.childNodes,r=n.length,d=new Ss;for(this.a=new $s(e);r--;)"width"===(e=n[r]).nodeName&&(this.width=d.Gf(e))}function ct(e){for(var n,r=(e=e.childNodes).length,d=new Ss;r--;)switch(n=e[r],n.nodeName){case"bgColor":this.bgColor=d.Ef(n);break;case"textColor":this.textColor=d.Ef(n);break;case"text":this.text=d.Na(n);break;case"displayMode":this.displayMode=d.Na(n)}}function dt(e){var n=e.childNodes,r=n.length;for(this.id=e.getAttribute("id");r--;)switch(e=n[r],e.nodeName){case"IconStyle":this.Oj=e=new Vs(e);break;case"LineStyle":this.Wd=e=new bt(e);break;case"PolyStyle":this.yk=e=new at(e);break;case"BalloonStyle":this.pf=e=new ct(e)}}function et(e,n){var r=(e=e.childNodes).length,d=new Ss;for(this.b=n;r--;)switch(n=e[r],n.nodeName){case"key":this.key=d.Na(n);break;case"styleUrl":this.a=d.Na(n)}}function ft(e,n){var r=e.childNodes,d=r.length;for(this.b=n,this.id=e.getAttribute("id"),this.a=[];d--;)"Pair"===(e=r[d]).nodeName&&(e=new et(e,this.b),this.a.push(e))}function gt(){this.a={}}function ht(e){for(var n,r=(e=e.childNodes).length,d=null,m=new Ss;r--;)"coordinates"===(n=e[r]).nodeName&&(d=m.Na(n));this.a=null,d&&(this.a=m.$h(d)||null)}function it(e,n){var r=e&&e.childNodes||[],d=new Ss;if(!e||!n)throw Error("Node or stylesContainer is not defined");for(this.visibility=!0,this.f=e,e=r.length;e--;){var m=r[e];switch(m.nodeName){case"name":this.name=d.Na(m);break;case"description":this.description=d.Na(m);break;case"visibility":this.visibility=d.Hd(m);break;case"open":this.open=d.Hd(m);break;case"styleUrl":(this.b=d.Na(m))&&(m=this.b.substr(1),this.c=n.mh(m,!1));break;case"Style":this.a=m=new dt(m)}}}function jt(e){for(var n,r=(e=e.childNodes).length,d=new Ss;r--;)if("coordinates"===(n=e[r]).nodeName){var m=[],g=new Ss;try{m=g.vk(d.Na(n))}catch{m=[]}this.a=2>m.length?[]:m}}function kt(e){for(var n=new L,r=e.a?e.a.length:0;r--;)n.qd(e.a[r]);return n}function lt(){}function mt(e){var n=e.childNodes,r=n.length;for(this.a=new L,this.c=[];r--;){var d=n[r],m=d.nodeName;if("outerBoundaryIs"===m||"innerBoundaryIs"===m){var g=d.childNodes;for(d=g.length;d--;){var v=g[d];if("LinearRing"===v.nodeName){var w=new jt(v);if("outerBoundaryIs"===m){this.a=kt(w);var k=void 0,j=e,G=w.a;w=new Ss;var q=j.querySelector("altitudeMode");if(q&&q.parentNode===j&&!/^\s*clampTo/.test(w.Na(q))&&G){q=G.length;for(var _t=0;_t<q&&0!==k;_t++){var _r=G[_t].alt;_r?k?_r!==k&&(k=0):k=_r:k=0}(G=j.querySelector("*|altitudeOffset"))&&G.parentNode===v&&"http://www.google.com/kml/ext/2.2"===G.namespaceURI&&(v=w.Gf(G))&&(k+=v),k&&(k=yd(2047,k),(v=j.querySelector("extrude"))&&v.parentNode===j&&w.Hd(v)?this.b=k:this.f=k)}}else this.c.push(kt(w))}}}}}function nt(e,n){var r=document.createElement("CANVAS");r.width=1,r.height=1,this.g=e,this.b={},this.c={},this.f=new Wj(r),this.Yb=n||""}function ot(e,n,r){for(var m,v,d=(n=n.childNodes).length,g={};d--;){var w=n[d];switch(w.nodeName){case"Point":w=new ht(w),v=pt(e,"Marker"),(w=w.a)&&(m=new Rn(w,v),v.ai&&Fe(v.ai,"statechange",A(e.i,e,v.ai,m,v),!1));break;case"LineString":case"LinearRing":w=new jt(w),v=pt(e,"Polyline"),m=new th(kt(w),v);break;case"Polygon":w=new mt(w),(v=pt(e,"Polygon")).elevation=w.f,v.extrusion=w.b,m=new uh(new O(w.a,w.c),v);break;case"MultiGeometry":m=ot(e,w,new R)}m&&(e.a.name&&(g.name=e.a.name),e.a.description&&(g.description=e.a.description),v&&v.pf&&(g.balloonStyle=v.pf),g.kmlNode=e.a.f,m.setData(g),r&&r.fa(m))}return r||m}function pt(e,n){var r=e.a,d={visibility:r.visibility},m=new Ws,g=1,v={x:0,y:0,Vc:!1,zc:!1},w=qt(e,r.c);switch(r.a&&(w=qt(e,r.a,w)),n){case"Marker":if(w&&w.Oj){if((m=w.Oj).scale&&(g=m.scale),m.a){var k=m.a;v={x:k.x,y:k.y,Vc:k.Vc,zc:k.zc}}m.icon&&m.icon.href?(rt.test(n=m.icon.href)||(n=e.Yb+n),(k=e.b[m=g+"_"+v.x+v.y+v.Vc+v.zc+"_"+n]||e.c[m])||(k=new Wj(n),e.c[m]=k),0===k.getState()?(d.icon=e.f,d.ai=k,d.href=n,d.anchor=v,d.scale=g):1===k.getState()&&(d.icon=k)):1!==g&&(k||(v={x:14,y:4,Vc:!1,zc:!1}),g={size:new Wi((e={w:28*g,h:36*g}).w,e.h),anchor:new J(v.Vc?e.w*v.x:v.x*g,v.zc?e.h*(1-v.y):e.h-v.y*g),hitArea:new Xi(Yi.POLYGON,[0*g,16*g,0*g,7*g,8*g,0*g,18*g,0*g,26*g,7*g,26*g,16*g,18*g,34*g,8*g,34*g])},d.icon=new Wj('<svg xmlns="http://www.w3.org/2000/svg" width="28px" height="36px"><path d="M 19 31 C 19 32.7 16.3 34 13 34 C 9.7 34 7 32.7 7 31 C 7 29.3 9.7 28 13 28 C 16.3 28 19 29.3 19 31 Z" fill="#000" fill-opacity=".2"/><path d="M 13 0 C 9.5 0 6.3 1.3 3.8 3.8 C 1.4 7.8 0 9.4 0 12.8 C 0 16.3 1.4 19.5 3.8 21.9 L 13 31 L 22.2 21.9 C 24.6 19.5 25.9 16.3 25.9 12.8 C 25.9 9.4 24.6 6.1 22.1 3.8 C 19.7 1.3 16.5 0 13 0 Z" fill="#fff"/><path d="M 13 2.2 C 6 2.2 2.3 7.2 2.1 12.8 C 2.1 16.1 3.1 18.4 5.2 20.5 L 13 28.2 L 20.8 20.5 C 22.9 18.4 23.8 16.2 23.8 12.8 C 23.6 7.07 20 2.2 13 2.2 Z" fill="#18d"/></svg>',g))}break;case"Polyline":d.style={},w&&w.Wd&&(d.style.strokeColor="rgba("+Zs(m,(g=w.Wd).a.a,!0)+")",0<=g.width&&(d.style.lineWidth=g.width));break;case"Polygon":d.style={},w&&(w.Wd&&(d.style.strokeColor="rgba("+Zs(m,(g=w.Wd).a.a,!0)+")",0<=g.width&&(d.style.lineWidth=g.width)),w.yk&&(d.style.fillColor=(g=w.yk).fill?"rgba("+Zs(m,g.b.a,!0)+")":"rgba(0,0,0,0)",g.a||(d.style.lineWidth=0)))}return d.pf=w.pf,d}function qt(e,n,r){for(var d in r=r||{},n)n.hasOwnProperty(d)&&(r[d]="object"==typeof n[d]?qt(e,n[d],r[d]):n[d]);return r}t("H.data.utils.Dom",Ss),Ss.prototype.Hd=function(e){return!!e&&/^\s*(1|true)\s*$/i.test(this.Na(e))},Ss.prototype.getBoolean=Ss.prototype.Hd,Ss.prototype.Na=function(e){var n;try{if(e.nodeType===Node.ATTRIBUTE_NODE)return e.value;var r="",d=0,m=e.childNodes;for(n=m.length;d<n;d++)m[d].nodeType!==Node.COMMENT_NODE&&(r+=m[d].nodeValue.replace(/^\s+|\s+$/g,""))}catch{}return r||""},Ss.prototype.getString=Ss.prototype.Na,Ss.prototype.Gf=function(e){return parseFloat(this.Na(e))||0},Ss.prototype.getFloat=Ss.prototype.Gf,Ss.prototype.vk=function(e){var v,n=e.split(/\s+/),r=n.length,d=!(n&&1==r),m=d?1:3,g=[];for(d||(r=(n=e.split(",")).length),v=0;v<r;v+=m){if(!(e=this.$h(d?n[v]:v+3>n.length?null:n.slice(v,v+3))))return[];g.push(e)}return g},Ss.prototype.parseCoords=Ss.prototype.vk,Ss.prototype.$h=function(e){if(!e)return null;var n=e instanceof Array&&0<e.length&&4>e.length?e:e.split(",");e=parseFloat(n[0]);var r=parseFloat(n[1]);return n=parseFloat(n[2]),isNaN(r)||isNaN(e)?null:new kg(r,e,isNaN(n)?void 0:n)},Ss.prototype.parseCoord=Ss.prototype.$h,Ss.prototype.Ef=function(e){return e=this.Na(e),/^[0-9a-fA-F]{8}$/.test(e)?"#"+e.substr(6,2)+e.substr(4,2)+e.substr(2,2)+e.substr(0,2):"#000000ff"},Ss.prototype.getColor=Ss.prototype.Ef,t("H.data.kml.HotSpot",Ts),t("H.data.kml.Icon",Us),t("H.data.kml.IconStyle",Vs),t("H.data.utils.ColorHelper",Ws),Ws.prototype.el=function(e,n){var r="";if(!/^(#|rgb).*/.test(e)){var d;for(r="",d=0;6>d;d++)r+="ABCDEF0123456789".charAt(Math.floor(16*Math.random()));return r+"ff"}for(e=Zs(this,e,n),n=0;4>n;n++)r+=Ys(d=3>n?Math.floor(Math.random()*(e[n]+1)):255*e[n]);return r},Ws.prototype.toRandomRGBA=Ws.prototype.el,t("H.data.kml.ColorStyle",$s),t("H.data.kml.PolyStyle",at),t("H.data.kml.LineStyle",bt),t("H.data.kml.BalloonStyle",ct),t("H.data.kml.Style",dt),t("H.data.kml.Pair",et),et.prototype.V=function(){if(this.a){var e="highlight"===this.key;e=this.b.mh(this.a.substr(1),e)}return e},et.prototype.getStyle=et.prototype.V,t("H.data.kml.StyleMap",ft),ft.prototype.V=function(e){var n=null;e=e?"highlight":"normal";for(var r=this.a.length;r--;)this.a[r].key===e&&(n=this.a[r].V());return n},ft.prototype.getStyle=ft.prototype.V,t("H.data.kml.StyleContainer",gt),gt.prototype.Ig=function(e){e&&e.id&&(this.a["style_"+e.id]=e)},gt.prototype.addStyle=gt.prototype.Ig,gt.prototype.mh=function(e,n){return(e=this.a["style_"+e])instanceof ft&&(e=e.V(n)),e},gt.prototype.getStyleById=gt.prototype.mh,t("H.data.kml.Point",ht),t("H.data.kml.Feature",it),t("H.data.kml.Line",jt),lt.prototype.f=0,lt.prototype.b=0,u(mt,lt),t("H.data.kml.Polygon",mt),nt.prototype.create=function(e){return this.a=new it(e,this.g),ot(this,e)},nt.prototype.i=function(e,n,r){var d=r.anchor,m=r.scale;r=m+"_"+d.x+d.y+d.Vc+d.zc+"_"+r.href;var g={};if(1===e.getState()){var v=this.b[r];if(!v){var w=d.x,k=d.y;(v=e.yb())&&(g.size=v={w:v.w*m,h:v.h*m}),g.anchor={x:w=d.Vc&&v?v.w*w:w*m,y:k=d.zc&&v?v.h*(1-k):!d.zc&&v?v.h-k*m:k*m},v=new Wj(e.Qc(),g),this.b[r]=v}n.Ic(v)}delete this.c[r]};var rt=/^[^:\/]+:/;function st(e){xc(this,st),this.url=e,this.b=[],this.a=z,this.c=A(this.c,this),F.call(this)}u(st,F),t("H.data.AbstractReader",st);var tt={ERROR:-1,LOADING:0,VISIT:1,READY:2};function ut(e,n,r,d){ut.j.constructor.call(this,n,e),this.state=r,this.message=d}function vt(e){var n=e?e.lastIndexOf("/"):-1;this.g=[],st.call(this,e),0<=n&&(this.i=e.substr(0,n)+"/")}function xt(e,n,r){r?r.fa(n):(e.a&&e.a.bc().fa(n),e.b.push(n),e.O(tt.VISIT,n))}function wt(e,n){for(var d,r=e.length,m=[];r--;)(d=e[r]).nodeName===n&&m.push(d);return m}function yt(e,n){this.b=e,this.a=n}function zt(e){return new kg(e[1],e[0])}function Bt(e){for(var d,n=At(e[0]),r=[],m=1,g=e.length;m<g;m++)d=At(e[m]),r.push(d);return new O(n,r)}function At(e){for(var n=0,r=e.length,d=new L;n<r;n++)d.qd(zt(e[n]));return d}function Ct(e,n){this.i=(n=n||{}).style||this.Fd,(this.g=!!n.disableLegacyMode)||window.console.warn("H.data.geojson.Reader: Legacy parser is enabled in GeoJSON Reader. Features like Multi-Geometries, Polygon interiors and GeoJSON feature properties might not work as expected. To maximise compatibility with the remote services it is recommended to set the `disableLegacyMode` flag to true."),st.call(this,e)}function Et(e){var n={};if(e.geometry){var r=e.geometry;n.type=r.type,n.properties=e.properties,r.coordinates&&(n.coordinates=r.coordinates),r.geometries&&(n.geometries=r.geometries),e.id&&(n.id=e.id)}return n}function Dt(e,n){e.a&&e.a.bc().fa(n),e.b.push(n),e.O(tt.VISIT,n)}function Ft(e,n){this.a=e,this.b=n}function Gt(e,n,r){this.g=this.b=r,this.bi=[],this.a=0,this.f=sg(e,n,!0)}function Ht(e){var n;qd.call(this),this.a=[],e?Ya(n={},It,e):n=It,this.g=n,qd.call(this)}st.State=tt,st.prototype.f=tt.READY,st.prototype.A={ml:"statechange"},st.prototype.ob=function(){return this.a||(this.a=new N,this.a.bc().Xb(this.b)),new tl(this.a)},st.prototype.getLayer=st.prototype.ob,st.prototype.Gm=function(){return this.b.concat([])},st.prototype.getParsedObjects=st.prototype.Gm,st.prototype.v=function(){return this.url},st.prototype.getUrl=st.prototype.v,st.prototype.Co=function(e){if(this.f===tt.LOADING||this.f===tt.VISIT)throw Error("InvalidState: state "+this.f);return this.b=[],this.a=z,this.url=e,this},st.prototype.setUrl=st.prototype.Co,st.prototype.getState=function(){return this.f},st.prototype.getState=st.prototype.getState,st.prototype.O=function(e,n,r){this.f=e,this.dispatchEvent(new ut(n||this,this.A.ml,e,r||""))},st.prototype.parse=function(){var e=this;vc(this.url)?(this.O(tt.LOADING),new tf("text/plain",this.url).then(function(n){try{e.c(n)}catch(r){e.O(tt.ERROR,z,r.message)}},function(){e.O(tt.ERROR,z,"Error loading file")})):e.O(tt.ERROR,z,"File url was not set")},st.prototype.parse=st.prototype.parse,u(ut,ud),st.Event=ut,u(vt,st),t("H.data.kml.Reader",vt),vt.prototype.c=function(e){var n,r=null;if(Cc(e)&&""!=e.trim()){try{var d=(new DOMParser).parseFromString(e,"text/xml")}catch{return void this.O(tt.ERROR,z,"Error parsing KML document")}if(d.getElementsByTagName("parsererror").length)this.O(tt.ERROR,z,"Error parsing KML document");else if((e=d.childNodes&&"kml"===d.childNodes[0].nodeName?d.childNodes[0]:void 0)&&(n=wt(e.childNodes,"Document")[0]),n=n||e){d=new gt;for(var m=wt(n.childNodes,"Style"),g=wt(n.childNodes,"StyleMap"),v=m.length;v--;)e=new dt(m[v]),d.Ig(e);for(v=g.length;v--;)e=new ft(g[v],d),d.Ig(e);for(this.l=new nt(d,this.i),n=(e=n.childNodes).length;n--;)d=r,"Placemark"===(m=e[n]).nodeName?(m=this.l.create(m))&&xt(this,m,d):"Folder"===m.nodeName&&(xt(this,(m={group:new R,node:m}).group,d),this.g.push(m)),!n&&(d=this.g.shift())&&(r=d.group,n=(e=d.node.childNodes).length);this.O(tt.READY)}else this.O(tt.ERROR,z,"Invalid KML document")}else this.O(tt.ERROR,z,"Unable to create objects from the empty data")},yt.prototype.create=function(e,n){var r=e.coordinates;switch(e.type){case"Point":var d=new Rn(zt(r));break;case"LineString":d=new th(At(r));break;case"Polygon":d=new uh(Bt(r));break;case"MultiPoint":var m=0,g=r.length;if(d=[],this.a){for(;m<g;m++)d.push(zt(r[m]));r=new Rn(new Vi(d))}else{for(;m<g;m++)d.push(new Rn(zt(r[m])));(r=new R).Xb(d)}d=r,g="multiPoint";break;case"MultiLineString":if(m=0,g=r.length,d=[],this.a){for(;m<g;m++)d.push(At(r[m]));r=new th(new ih(d))}else{for(;m<g;m++)d.push(new th(At(r[m])));(r=new R).Xb(d)}d=r,g="multiLineString";break;case"MultiPolygon":if(d=[],m=0,g=r.length,this.a){for(;m<g;m++)d.push(Bt(r[m]));r=new uh(new Ji(d))}else{for(;m<g;m++)d.push(new uh(Bt(r[m])));(r=new R).Xb(d)}d=r,g="multiPolygon";break;case"GeometryCollection":r=d=new R,g=0;for(var v=(m=e.geometries).length;g<v;g++)this.create(m[g],r);g="geometryCollection"}return d&&(r=d,m=e.properties,e=e.id,v={},m&&(this.a?v=m:v.properties=m),g&&!this.a&&(v[g]=!0),e&&r.Ai(e),r.setData(v),this.b(d)),n&&d&&n.fa(d),d},yt.prototype.create=yt.prototype.create,u(Ct,st),t("H.data.geojson.Reader",Ct),Ct.prototype.c=function(e){var n,r;try{var d="string"==typeof e?JSON.parse(e):e;if("object"==typeof d){var m=new yt(this.i,this.g);switch(d.type){case"FeatureCollection":if(n=d.features){var g=new R;for(Dt(this,g),r=0;r<n.length;r++){var v=Et(n[r]);(v=m.create(v))&&g.fa(v)}}break;case"Feature":v=Et(d),(v=m.create(v))&&Dt(this,v);break;default:(v=m.create(d))&&Dt(this,v)}this.O(tt.READY)}else this.O(tt.ERROR,z,"Invalid syntax")}catch(w){this.O(tt.ERROR,z,"Parse error. "+w.message)}},Ct.prototype.io=function(e){this.O(tt.LOADING),this.c(e)},Ct.prototype.parseData=Ct.prototype.io,Ct.prototype.Fd=function(){},t("H.data.buildInfo",function(){return Hf("H-data","1.49.1","74e5afb",{region:"row"})}),wg.prototype.Lc=ca(1,function(e,n){this.a.Lc(e,Fc(n)?n:this.c)}),Ag.prototype.Lc=ca(0,function(e,n){var d,r=0;if(!e(this)&&n--)for(;3>=r;r++)(d=this[r])&&d.Lc(e,n)}),t("H.clustering.grid.NoisePoint",Ft),Ft.prototype.ya=function(){return ng(this.a)},Ft.prototype.getPosition=Ft.prototype.ya,Ft.prototype.xc=function(){return this.a.wt},Ft.prototype.getWeight=Ft.prototype.xc,Ft.prototype.od=gf,Ft.prototype.isCluster=Ft.prototype.od,Ft.prototype.sc=function(){return this.b},Ft.prototype.getMinZoom=Ft.prototype.sc,Ft.prototype.getData=function(){return this.a.data},Ft.prototype.getData=Ft.prototype.getData,t("H.clustering.grid.Cluster",Gt),Gt.prototype.ne=function(e){this.c||(this.c=ng(e)),this.a+=e.wt||1,this.bi.push(e)},Gt.prototype.ya=function(){return this.c},Gt.prototype.getPosition=Gt.prototype.ya,Gt.prototype.xc=function(){return this.a},Gt.prototype.getWeight=Gt.prototype.xc,Gt.prototype.od=ff,Gt.prototype.isCluster=Gt.prototype.od,Gt.prototype.sc=function(){return this.b},Gt.prototype.getMinZoom=Gt.prototype.sc,Gt.prototype.If=function(){return this.g},Gt.prototype.getMaxZoom=Gt.prototype.If,Gt.prototype.K=function(){return this.f},Gt.prototype.getBoundingBox=Gt.prototype.K,Gt.prototype.Yg=function(e){this.ze(e)},Gt.prototype.forEachEntry=Gt.prototype.Yg,Gt.prototype.ze=function(e){var n=this;if(!Da(e))throw new D(this.ze,0,e);this.bi.forEach(function(r){e(new Ft(r,n.b+1))})},Gt.prototype.forEachDataPoint=Gt.prototype.ze,u(Ht,qd);var Jt={clusters:[],noisePoints:[]},It={projection:mj,min:0,max:22,eps:32,minWeight:2};function Kt(e){Ht.call(this,e)}function Lt(e){this.a=e;var n=(e=document.createElement("canvas")).getContext("2d"),r=this.a,d=14*r;e.width=d,e.height=d,n.scale(r,r),n.beginPath(),n.strokeStyle="#FFFFFF",n.fillStyle="#1080DD",n.arc(7,7,6,0,2*Math.PI,!1),n.fill(),n.lineWidth=1,n.stroke(),this.f=new Wj(e,{size:{w:14,h:14},anchor:{x:7,y:7}}),this.b={},this.c={}}function Mt(e,n,r){var d,m=document.createElement("canvas"),g=m.getContext("2d"),v=e.a,w=n*v;return m.width=w,m.height=w,g.scale(v,v),(d=e.b[v=n+":"+r])?g.putImageData(d,0,0):(n/=2,g.beginPath(),g.strokeStyle="rgba("+r+",0.2)",g.fillStyle="rgba("+r+",1)",g.arc(n,n,n/5*3,0,2*Math.PI,!1),g.fill(),g.lineWidth=n/5*4,g.stroke(),e.b[v]=g.getImageData(0,0,w,w)),m}function Nt(e){if(Ht.call(this,e),(e=this.g).projection!==mj)throw new D(Nt,0,"Other projection than mercator not supported yet");this.s=e.projection,this.f=e.eps,this.D=e.minWeight,this.m=new nj(this.s),(new Pf).a("cluster","H.clustering.dynamicgrid.worker"),this.i=A(this.i,this),this.l=A(this.l,this)}p=Ht.prototype,p.Hc=function(e){this.a=e,this.b=!0},p.Db=function(e){this.a.push(e),this.b=!0},p.mf=function(e){this.a=this.a.concat(e),this.b=!0},p.We=function(e){this.a=this.a.filter(function(n){return n!==e}),this.b=!0},p.o=function(){Ht.j.o.call(this),delete this.a},Ht.prototype.disposeInternal=Ht.prototype.o,Ht.prototype.U=ld,u(Kt,Ht),Kt.prototype.Ei=function(e){var v,n=this.g,r=n.min,d=n.max,m=[],g=[];if(this.b){for(v=this.a;r<=d;r++){for(var w,j,G,q,_t,_r,_s,ga,k=void 0,_c=r,_u=v,_f=m,_h=g,ad=n.eps,ey=n.projection,sy=n.minWeight,ly=_u.length,dy=Math.pow(2,_c+8),vy=[];ga=_u[--ly];)if(!ga.Ki){for(_s=dy,_r=(G=ey.Pc(ga).scale(dy).floor()).x,_t=G.y,j=vy.length;j--;)q=(w=vy[j]).ya(),w.Ji||(w.Ji=ey.Pc(q).scale(dy).floor()),(q=(q=w.Ji).Wa(G))<_s&&(_s=q,k=w);k&&k.K().gd(ga)||(k=new Gt(ey.dg({x:(_r-ad)/dy,y:(_t-ad)/dy}),ey.dg({x:(_r+ad)/dy,y:(_t+ad)/dy}),_c),vy.push(k)),k.ne(ga),k=null}for(ly=vy.length;ly--;)if((j=(w=vy[ly]).xc())<sy)for(j=(w=w.bi).length;ga=w[--j];)_h.push(new Ft(ga,_c)),ga.Ki=!0;else _f.push(w)}for(r=0,d=v.length;r<d;r++)delete v[r].Ki;this.b=!1,e({clusters:m,noisePoints:g})}},t("H.clustering.theme.Circular",Lt),Lt.prototype.Sl=function(e){var n=e.xc(),r=this.c[n];if(!r){if(10>n){r=Mt(this,28,"118,209,0");var d={x:11,y:18}}else 25>n?(r=Mt(this,38,"255,105,0"),d={x:13,y:23}):50>n?(r=Mt(this,38,"240,60,0"),d={x:13,y:23}):100>n?(r=Mt(this,38,"181,0,21"),d={x:13,y:23}):1e3>n?(r=Mt(this,48,"181,0,21"),d={x:15,y:28}):(r=Mt(this,66,"181,0,21"),d={x:20,y:38});var m=r.getContext("2d");m.fillStyle="#FFFFFF",m.font="bold 11px Arial",m.fillText(String(n),d.x,d.y),r=new Wj(r,{size:{w:d=r.width/this.a,h:d},anchor:{x:d/2,y:d/2}}),this.c[n]=r}return(n=new Rn(e.ya(),{icon:r,min:e.sc(),max:e.If()})).setData(e),n},Lt.prototype.getClusterPresentation=Lt.prototype.Sl,Lt.prototype.Dm=function(e){var n=new Rn(e.ya(),{icon:this.f,min:e.sc()});return n.setData(e),n},Lt.prototype.getNoisePresentation=Lt.prototype.Dm,u(Nt,Ht),Nt.prototype.U=function(e,n){this.u=e,this.J=Bd(n)},Nt.prototype.Ei=function(e,n){var r=this.c,d=this.u,m=this.J||0,g=!r||!(r.zoom===m&&r.b.ia(d));if(d&&(this.b||g)){if(r&&3>r.Yd&&r.cancel(),this.b=!1,(r=this.f)>=128*Gd(2,m))var v=Ot;else{(g=this.m).Oa(m);var w=g.ib(d.Nb());v=g.ib(d.Jb()),w.y-=r,v.y+=r,w=g.Re(w);var k=g.Re(v);v=new K(w.lat,w.lng,k.lat,k.lng),r=g.Ra(r,0).lng+180,v=v.Bc(w.lat,w.lng-r,k.lat,w.lng).Bc(w.lat,k.lng,k.lat,k.lng+r)}for(r=v,v=[],g=(w=this.a).length;g--;)r.gd(w[g])&&v.push(w[g]);0<v.length?(this.c=new Pt(d,m,v,this.f,this.D,this.s!==mj,e,n),this.c.then(this.i,this.l)):e(Jt)}},Nt.prototype.i=function(e){Ca(e)||(e=new x.Uint32Array(e)),this.c.g(Qt(this,e))},Nt.prototype.l=function(e){Cc(e)&&this.c.f(e)};var Ot=new K(90,-180,-90,180);function Qt(e,n){for(var r=0,d=n[r++],m=Array(d),g=0,v=[],w=n.length,k=e.c.a,j=e.c.zoom;d--;)m[g++]=new Ft(k[n[r++]],j);for(;r<w;){d=n[r++],g=k[n[r]];var G=e.m,q=e.f;G.Oa(e.c.zoom);var _t=G.ib(g);for(g=G.Ra(_t.x-q,_t.y-q),G=G.Ra(_t.x+q,_t.y+q),g=new Gt((g=new K(g.lat,g.lng,G.lat,G.lng)).Nb(),g.Jb(),j);d--;)g.ne(k[n[r++]]);v.push(g)}return{clusters:v,noisePoints:m}}function Pt(e,n,r,d,m,g,v,w){this.b=e,this.zoom=n,this.a=r,this.g=v,this.f=w,v=3*(e=r.length),w=new(x.Float64Array||Array)(v);for(var k;e--;)w[--v]=(k=r[e]).lat,w[--v]=k.lng,w[--v]=k.wt;ie.call(this,"cluster",{message:[w,d,m,n,g]},void 0)}function Rt(e,n,r){this.b=e,this.a=n,this.f=r}function St(e,n,r,d){this.b=e,this.a=n,this.l=r,this.U=d,this.f=Ka(this.f,this),this.c=Ka(this.c,this)}function Tt(e,n,r,d,m,g){this.g=n,e&&(this.parent=e,1&n?(r=e[8],m=e[5]):(r=e[7],m=e[8]),2&n?(d=e[9],g=e[6]):(d=e[4],g=e[9])),this[7]=r,this[5]=m,this[8]=(r+m)/2,this[4]=d,this[6]=g,this[9]=(d+g)/2}function Ut(e,n){return e[n]||(++e.Xd,e[n]=new Tt(e,n))}function Vt(e,n,r,d){var m,g;if(!n(e,d)&&r--)for(++d,m=0;4>m;m++)(g=e[m])&&Vt(g,n,r,d)}function Wt(e){this.b=e||10,Xt(this)}function Xt(e){e.head=e.a=new Tt(null,NaN,0,0,4294967296,4294967296)}function Yt(e,n){var r,d;for(r=0;4>r;r++)(d=n[r])&&(Yt(e,d),delete n[r]);delete n.parent,delete n.entries}function Zt(e,n){var d,r=e.head;if(n){var m=n;if(m!==r)for(r=m;m=m.parent;)(m.entries||1<m.Xd)&&(r=m)}else for(;!r.entries&&2>(d=r.Xd)&&d;)r=m;e.head=r}function $t(e,n,r,d,m,g,v){var w=n.entries;return g?n.Xd?w=$t(e,Ut(n,+(r>=n[8])|+(d>=n[9])<<1),r,d,m,g-1,v):w?((w=Ut(n,+((w=w[0])[1]>=n[8])|+(w[0]>=n[9])<<1)).entries=n.entries,w.qe=n.qe,w.re=n.re,w.Fb=n.Fb,w.a=n.a,w.f=n.f,w.b=n.b,w.c=n.c,delete n.entries,Zt(e,w),w=$t(e,Ut(n,+(r>=n[8])|+(d>=n[9])<<1),r,d,m,g-1,v)):(g=w=new au(r,d,m,v),(n.entries||(n.entries=[])).push(g),Zt(e,n)):(w||Zt(e,n),e=w=new au(r,d,m,v),(n.entries||(n.entries=[])).push(e)),n.qe+=r*m,n.re+=d*m,n.Fb+=m,n.a===B?(n.a=n.b=r,n.f=n.c=d):(r<n.a?n.a=r:r>n.b&&(n.b=r),d<n.f?n.f=d:d>n.c&&(n.c=d)),w}function au(e,n,r,d){this[0]=n,this[1]=e,this.a=r,this.data=d}function bu(e){Ht.call(this,e),this.l=(e=this.g).projection,this.m=e.min,this.f=e.max,this.s=e.minWeight,this.c=7-Ad(Ed(zd(1,e.eps))/Od),this.i=new Wt(zd(this.m,this.f+this.c))}function cu(e,n,r,d,m,g,v){var k,w=n.Fb;if(v&&(v.node.Fb!==w?(g.clusters.push(new St(e,v.node,v.depth,r-1)),v=null):m++),v||(w>=e.s?(v={node:n,depth:r},m=r):du(e,n,m+1,g)),n.Xd&&d--)for(r++,w=0;4>w;w++)(k=n[w])&&(cu(e,k,r,d,m,g,v),v=null);v&&g.clusters.push(new St(e,v.node,v.depth,e.f+e.c))}function du(e,n,r,d){var m;if(n=n.entries){var g=n.length;for(d=d.noisePoints,m=0;m<g;m++)d.push(new Rt(e,n[m],r))}else for(m=0;4>m;m++)(g=e[m])&&du(e,g,r,d)}function eu(e,n){var r={},d=(n=n||{}).min||0,m=zd(d,n.max||22);switch(eu.j.constructor.call(this,d={min:d,max:m}),this.xa=n.pixelRatio||Ue(),Ya(r,It,d,n.clusteringOptions||{}),r.minWeight=zd(It.minWeight,r.minWeight),r.strategy){case fu.DYNAMICGRID:if(r.projection!==mj)throw new D(eu,1,"Unsupported projection");this.c=new Nt(r);break;case fu.GRID:this.c=new Kt(r);break;default:this.c=new bu(r)}this.c.Hc(e),this.D=n.theme||new Lt(this.xa),this.R=A(this.R,this),this.aa=A(this.aa,this),gu(this)}Nt.prototype.o=function(){Nt.j.o.call(this)},Nt.prototype.disposeInternal=Nt.prototype.o,u(Pt,Sf),t("H.clustering.fastgrid.NoisePoint",Rt),Rt.prototype.ya=function(){return this.c||(this.c=this.b.Ra(this.a[1],this.a[0],1)),this.c},Rt.prototype.getPosition=Rt.prototype.ya,Rt.prototype.xc=function(){return this.a.a},Rt.prototype.getWeight=Rt.prototype.xc,Rt.prototype.od=gf,Rt.prototype.isCluster=Rt.prototype.od,Rt.prototype.sc=function(){return this.f-this.b.c},Rt.prototype.getMinZoom=Rt.prototype.sc,Rt.prototype.getData=function(){return this.a.data},Rt.prototype.getData=Rt.prototype.getData,t("H.clustering.fastgrid.Cluster",St),St.prototype.ya=function(){return this.s||(this.s=this.b.Ra(this.a.qe,this.a.re,this.a.Fb)),this.s},St.prototype.getPosition=St.prototype.ya,St.prototype.xc=function(){return this.a.Fb},St.prototype.getWeight=St.prototype.xc,St.prototype.od=ff,St.prototype.isCluster=St.prototype.od,St.prototype.sc=function(){return this.l?this.l-this.b.c:-1/0},St.prototype.getMinZoom=St.prototype.sc,St.prototype.If=function(){return this.U-this.b.c},St.prototype.getMaxZoom=St.prototype.If,St.prototype.K=function(){return this.i||(this.i=sg(this.b.Ra(this.a.a,this.a.f,1),this.b.Ra(this.a.b,this.a.c,1),!0)),this.i},St.prototype.getBoundingBox=St.prototype.K,St.prototype.Yg=function(e){this.g=e,this.a.Lc(this.f,Wd)},St.prototype.forEachEntry=St.prototype.Yg,St.prototype.f=function(e,n){var d,m,r=!1;if(e.Fb>=this.b.s&&e!==this.a&&e.Fb!==this.a.Fb&&(this.g(new St(this.b,e,0,n)),r=!0),!r&&(d=e.entries))for(e=d.length,m=0;m<e;m++)this.g(new Rt(this.b,d[m],n));return r},St.prototype.ze=function(e){this.m=e,this.a.Lc(this.c,Wd)},St.prototype.forEachDataPoint=St.prototype.ze,St.prototype.c=function(e,n){var r;if(e=e.entries){var d=e.length;for(r=0;r<d;r++)this.m(new Rt(this.b,e[r],n))}return!1},p=Tt.prototype,p.Xd=0,p.removeChild=function(e){var n=e.g;this[n]===e&&(delete this[n],delete e.parent,--this.Xd)},p.Lc=function(e,n){for(var r=0,d=this;d=d.parent;)++r;Vt(this,e,n,r)},p.qe=0,p.re=0,p.Fb=0,Wt.prototype.yc=function(e,n,r,d){var m=this.a;if(!(e>=m[7]&&n>=m[4]&&e<=m[5]&&n<=m[6]))throw Error("Coordinates out of bounds");return $t(this,this.a,e,n,r,this.b,d)},Wt.prototype.Lc=function(e,n){Vt(this.a,e,n===+n?n:this.b,0)},u(bu,Ht),p=bu.prototype,p.Hc=function(e){var d,n=0,r=e.length,m=new J(0,0),g=this.l,v=this.i;for(bu.j.Hc.call(this,e),Yt(v,v.a),Xt(v);n<r;n++)g.Pc(d=e[n],m).scale(4294967296).floor(),v.yc(m.x,m.y,d.wt,d.data);this.b=!0},p.Db=function(e){bu.j.Db.call(this,e),this.Hc(this.a)},p.mf=function(e){for(var n=e.length,r=bu.j.Db;n--;)r.call(this,e[n]);this.Hc(this.a)},p.We=function(e){bu.j.We.call(this,e),this.Hc(this.a)},p.Ra=function(e,n,r,d){return this.l.Ra(e/r/4294967296,n/r/4294967296,d)},p.Ei=function(e){if(this.b){var n={clusters:[],noisePoints:[]};cu(this,this.i.a,0,this.f+this.c,-1/0,n,null),this.b=!1,e(n)}},p.o=function(){bu.j.o.call(this),this.i=null},bu.prototype.disposeInternal=bu.prototype.o,t("H.clustering.DataPoint",function(e,n,r,d){this.lat=e,this.lng=n,this.wt=r===+r?r:1,this.data=d}),u(eu,N),t("H.clustering.Provider",eu),eu.prototype.o=function(){eu.j.o.call(this),this.f.na(),this.c.F(),delete this.c,delete this.L,delete this.D,x.clearTimeout(this.ea)};var fu={FASTGRID:0,GRID:1,DYNAMICGRID:2};function gu(e,n,r){e.ea&&x.clearTimeout(e.ea),n&&e.c.U(n,r),e.ea=x.setTimeout(e.R,150)}function hu(e){var n=e.L.clusters,r=e.L.noisePoints,d=n.length,m=r.length,g=0<d+m;for(e.f.na();m--;)e.f.fa(e.D.getNoisePresentation(r[m]));for(;d--;)e.f.fa(e.D.getClusterPresentation(r=n[d]));g&&e.Va()}function iu(e,n){t:{for(var r=e.length,d="string"==typeof e?e.split(""):e,m=0;m<r;m++)if(m in d&&n.call(void 0,d[m],m,e)){n=m;break t}n=-1}return 0>n?null:"string"==typeof e?e.charAt(n):e[n]}eu.Strategy=fu,eu.prototype.R=function(){this.dispatchEvent("start"),this.c.Ei(this.aa,ld)},eu.prototype.aa=function(e){this.L=e,hu(this),this.dispatchEvent("end")},eu.prototype.Hc=function(e){this.c.Hc(e),gu(this)},eu.prototype.setDataPoints=eu.prototype.Hc,eu.prototype.Db=function(e){this.c.Db(e),gu(this)},eu.prototype.addDataPoint=eu.prototype.Db,eu.prototype.mf=function(e){this.c.mf(e),gu(this)},eu.prototype.addDataPoints=eu.prototype.mf,eu.prototype.We=function(e){this.c.We(e),gu(this)},eu.prototype.removeDataPoint=eu.prototype.We,eu.prototype.Zm=function(){return this.D},eu.prototype.getTheme=eu.prototype.Zm,eu.prototype.zo=function(e){this.D=e,this.L&&(this.f.na(),hu(this))},eu.prototype.setTheme=eu.prototype.zo,eu.prototype.Qb=function(){return!0},eu.prototype.providesDomMarkers=eu.prototype.Qb,eu.prototype.Rb=function(){return!0},eu.prototype.providesMarkers=eu.prototype.Rb,eu.prototype.Cc=function(){return!0},eu.prototype.providesSpatials=eu.prototype.Cc,eu.prototype.Ue=function(e,n){gu(this,e,n)},eu.prototype.preprocessData=eu.prototype.Ue,t("H.clustering.buildInfo",function(){return Hf("H-clustering","1.49.1","74e5afb",{region:"row"})});var ju={};function ku(e){var n=e.ownerDocument,r=n.documentElement;n=n.defaultView;var d=e.getBoundingClientRect();return e=d.left,d=d.top,isNaN(n.pageXOffset)?(e+=r.scrollLeft,d+=r.scrollTop):(e+=n.pageXOffset,d+=n.pageYOffset),new J(e,d)}function lu(e,n,r){n=Fc(n)?n+"px":n,r=Fc(r)?r+"px":r,e.style[Af("transform")]="translate("+n+","+r+")"}var mu,nu=navigator.userAgent,ou=-1<nu.indexOf("Android")&&-1<nu.indexOf("Mozilla/5.0")&&-1<nu.indexOf("AppleWebKit"),pu=/AppleWebKit\/([\d.]+)/,qu=null===pu.exec(nu)?null:parseFloat(pu.exec(nu)[1]);mu=ou&&null!==qu&&537>qu;var ru=globalThis,su=document.createElement("T");function tu(){this.a=this.lj()}tu.prototype.lj=function(){var e=navigator,n=[];return e&&(e.msPointerEnabled?n.push(uu):e.pointerEnabled&&n.push(vu)),1>n.length&&("TouchEvent"in ru&&n.push(wu),n.push(xu)),n},tu.prototype.detectEventSets=tu.prototype.lj,tu.prototype.addEventListener=function(e,n,r,d){for(var g,m=this.a,v=m.length,w=!1;v--;)(g=m[v][n])&&(w=!0,e.addEventListener(g,r,d||!1));w||e.addEventListener(n,r,d||!1)},tu.prototype.removeEventListener=function(e,n,r,d){for(var g,m=this.a,v=m.length,w=!1;v--;)(g=m[v][n])&&(w=!0,e.removeEventListener(g,r,d||!1));w||e.removeEventListener(n,r,d||!1)};var vu={start:"pointerdown",end:"pointerup",move:"pointermove",cancel:"pointercancel",over:"pointerover",out:"pointerout",hover:"pointerhover"},uu={start:"MSPointerDown",end:"MSPointerUp",move:"MSPointerMove",cancel:"MSPointerCancel",over:"MSPointerOver",out:"MSPointerOut",hover:"MSPointerHover"},wu={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},xu={start:"mousedown",end:"mouseup",move:"mousemove",over:"mouseover",out:"mouseout",hover:"mousehover"};function yu(e,n,r,d){return e=e.createElement(n),r&&(e.className=r),d&&(e.innerHTML=d),e}function zu(e,n){for(var r=1,d=arguments.length;r<d;r++)e.appendChild(arguments[r])}var Au=new tu;function Bu(e,n,r){Au.addEventListener(e,n,r,void 0)}function Cu(e,n,r){Au.removeEventListener(e,n,r,void 0)}function Y(e,n){F.call(this),this.ab=e||"div",this.f=n?n.split(" "):[],this.L=!1,this.f.push("H_el")}function Du(e){(e=e.N())&&e.parentNode&&e.parentNode.removeChild(e)}function Eu(e){e=e||{},Y.call(this,"div","H_btn"),this.Jc(e.label||" "),this.jc(e.tooltip||""),this.setData(e.data),this.va(!!e.disabled),this.O(Fu.UP,!0),e.onStateChange&&this.addEventListener("statechange",e.onStateChange),this.b=A(this.b,this),this.a=A(this.a,this)}u(Y,F),t("H.ui.base.Element",Y),Y.prototype.W=function(e){if(!e)throw Error("Wrong document object");return this.S=yu(e,this.ab,this.f.join(" ")),this.renderInternal(this.S,e),this.va(this.dc(),!0),this.jc(this.aa),this.qb(this.R),this.S},Y.prototype.ta=function(){},Y.prototype.T=function(){},Y.prototype.X=function(){},Y.prototype.renderInternal=Y.prototype.X,Y.prototype.dc=function(){return this.L},Y.prototype.isDisabled=Y.prototype.dc,Y.prototype.va=function(e,n){return((e=!!e)!==this.L||n)&&((this.L=e)?this.Ka("H_disabled"):this.kb("H_disabled")),this},Y.prototype.setDisabled=Y.prototype.va,Y.prototype.J=null,Y.prototype.getData=function(){return this.J},Y.prototype.getData=Y.prototype.getData,Y.prototype.setData=function(e){this.J=e},Y.prototype.setData=Y.prototype.setData,Y.prototype.jc=function(e){var n=this.N();this.aa=e,n&&(e?n.setAttribute("title",e):n.removeAttribute("title"))},Y.prototype.setTooltip=Y.prototype.jc,Y.prototype.S=null,Y.prototype.N=function(){return this.S},Y.prototype.getElement=Y.prototype.N,Y.prototype.R=!0,Y.prototype.qb=function(e){var n=this.N();this.R=e,n&&(n.style.display=e?"":"none")},Y.prototype.setVisibility=Y.prototype.qb,Y.prototype.wc=function(){return this.R},Y.prototype.getVisibility=Y.prototype.wc,Y.prototype.Ka=function(e){var n=this.N();return 0>this.f.indexOf(e)&&this.f.push(e),n&&(n.className=this.f.join(" ")),this},Y.prototype.addClass=Y.prototype.Ka,Y.prototype.kb=function(e){e=this.f.indexOf(e);var n=this.N();return-1<e&&this.f.splice(e,1),n&&(n.className=this.f.join(" ")),this},Y.prototype.removeClass=Y.prototype.kb,Y.prototype.o=function(){Y.j.o.call(this),Du(this),this.J=this.S=null,delete this.aa},u(Eu,Y),t("H.ui.base.Button",Eu),Eu.prototype.va=function(e,n){return e&&this.kb("H_active"),Eu.j.va.call(this,e,n)},Eu.prototype.setDisabled=Eu.prototype.va,Eu.prototype.X=function(e){Bu(e,"start",this.b),Bu(e,"end",this.a),Bu(e,"out",this.a),this.Jc(this.Ge(),!0)},Eu.prototype.renderInternal=Eu.prototype.X,Eu.prototype.getState=function(){return this.C},Eu.prototype.getState=Eu.prototype.getState,Eu.prototype.O=function(e,n){return e!==this.C&&(this.C=e,e===Fu.DOWN?this.Ka("H_active"):this.kb("H_active"),n||this.dispatchEvent("statechange")),this},Eu.prototype.setState=Eu.prototype.O,Eu.prototype.Ge=function(){return this.c},Eu.prototype.getLabel=Eu.prototype.Ge,Eu.prototype.Jc=function(e,n){return(n||e!==this.c)&&(this.c=e,(n=this.N())&&(n.innerHTML=e)),this},Eu.prototype.setLabel=Eu.prototype.Jc,Eu.prototype.b=function(e){this.dc()||this.O(Fu.DOWN),e.preventDefault()},Eu.prototype.a=function(e){this.dc()||this.O(Fu.UP),e.preventDefault()},Eu.prototype.o=function(){var e=this.N();e&&(Cu(e,"start",this.b),Cu(e,"end",this.a),Cu(e,"out",this.a)),Y.prototype.o.call(this)};var Fu={UP:"up",DOWN:"down"};Eu.State=Fu;var Gu={in:'<svg version="1.1" class="H_icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><g><path d="m5 10.6h5.6v-5.6h2.8v5.6h5.6v2.8h-5.6v5.6h-2.8v-5.6h-5.6v-2.8z"></path></g></svg>',out:'<svg version="1.1" class="H_icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><path d="m5 10.6h14v2.8h-14z"/></svg>'};function Hu(e){var n;this.b=!!(e=e||{}).vertical,this.ea=e.length||"16em",this.a=Fc(n=e.min)?n:0,this.i=zd(this.a,Fc(n=e.max)?n:100),this.wa=E(n=e.step)?1:n,this.l=Iu(this,Fc(n=e.value)?n:(this.a+this.i)/2),this.ag=A(this.ag,this),this.Wf=A(this.Wf,this),this.cg=A(this.cg,this),this.bg=A(this.bg,this),this.s=e.pointerArea,Y.call(this,"div","H_slider"+(this.b?"":" H_l_horizontal"))}function Ju(e){if(!e.m){Bu(e.N(),"start",e.ag);var n=e.s;Bu(n,"move",e.Wf),Bu(n,"end",e.cg),Bu(n,"out",e.bg),e.m=!0}}function Ku(e){if(e.m){Cu(e.N(),"start",e.ag);var n=e.s;Cu(n,"move",e.Wf),Cu(n,"end",e.cg),Cu(n,"out",e.bg),e.m=!1}}function Iu(e,n){var r=e.wa;return n=ae(n,e.a,e.i),r?e.a+Ad((n-e.a)/r)*r:n}function Lu(e,n){var r=e.D,d=e.b;e.u||(e.u=r["offset"+(d?"Height":"Width")]),0>(n-=ku(r)[d?"y":"x"])&&(n=0),n=(e.i-e.a)*n/e.u,n=Iu(e,d?e.i-n:e.a+n),e.l!==n&&(e.wg(n,!0),e.dispatchEvent(new cj(e.A.ed,n,e.l)))}function Mu(e,n){return(n.touches?n.targetTouches[0]:n)["page"+(e.b?"Y":"X")]}function Nu(e){var n=!1,r=e.type;return-1!==r.indexOf("pointer")||-1!==r.indexOf("touch")?n=!0:C(e,MouseEvent)&&(n=1===e.which||1===e.buttons),n}function Ou(e){var n=e.touches;return n&&1===n.length||C(e,MouseEvent)}u(Hu,Y),t("H.ui.base.Slider",Hu),Hu.prototype.wg=function(e,n){var r=this.b,d=r?"top":"left";return(!this.c||n)&&(e=ae(e,this.a,this.i),this.g&&(this.g.style[d]=(r=(r?-1:1)*(n=100*(e-this.a)/(this.i-this.a)))+"%",this.qa.style[d]=100+r+"%"),this.l=Iu(this,e)),this.l},Hu.prototype.setValue=Hu.prototype.wg,Hu.prototype.en=function(){return this.l},Hu.prototype.getValue=Hu.prototype.en,p=Hu.prototype,p.ag=function(e){var n=this.b;if(Nu(e)&&Ou(e)){var r=Mu(this,e),d=e.target;d===this.g||d.parentElement===this.g?(this.P=r-ku(this.g)[n?"y":"x"]-this.g.offsetWidth/2,this.N().className="H_slider H_slider_active"+(this.b?"":" H_l_horizontal"),this.c=!0):Lu(this,r),e.preventDefault()}},p.cg=function(){this.c&&(this.N().className="H_slider "+(this.b?"":" H_l_horizontal"),this.c=!1)},p.bg=function(e){this.c&&e.target===this.s&&(this.c=!1)},p.Wf=function(e){this.c&&Ou(e)&&(Nu(e)?(Lu(this,Mu(this,e)-this.P),e.preventDefault()):this.c=!1)},p.A={ed:"change"},p.X=function(e,n){var r=yu(n,"div","H_slider_cont"),d=yu(n,"div","H_slider_knob_cont"),m=yu(n,"div","H_slider_knob"),g=yu(n,"div","H_slider_knob_halo"),v=yu(n,"div","H_slider_track");n=yu(n,"div","H_slider_track H_slider_track_active"),e.appendChild(r),r.appendChild(v),v.appendChild(n),r.appendChild(d),d.appendChild(m),d.appendChild(g),this.D=v,this.qa=n,this.g=d,this.s||(this.s=e.ownerDocument.body),r.style[this.b?"height":"width"]=this.ea,this.wg(this.l),Ju(this)},Hu.prototype.renderInternal=Hu.prototype.X,Hu.prototype.o=function(){Ku(this)},Hu.prototype.va=function(e,n){return e?Ku(this):this.D&&Ju(this),Y.prototype.va.call(this,e,n)},Hu.prototype.setDisabled=Hu.prototype.va;var Pu={TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right",LEFT_TOP:"left-top",LEFT_MIDDLE:"left-middle",LEFT_BOTTOM:"left-bottom",RIGHT_TOP:"right-top",RIGHT_MIDDLE:"right-middle",RIGHT_BOTTOM:"right-bottom",BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right"};function Qu(e,n,r){Y.call(this,e,n),this.a=r?r.concat():[]}function Ru(){Qu.call(this,"div","H_ctl"),this.map=null,this.Mc="top-left"}function Su(e){var n=(e=e||{}).slider;Ru.call(this),this.s=A(this.s,this),this.g=A(this.g,this),this.b=A(this.b,this),n&&(this.u=A(this.u,this),this.D=n,this.wa=e.sliderSnaps,this.Ka("H_zoom_slider")),this.i=new Eu({label:Gu.in,onStateChange:this.s}),this.m=new Eu({label:Gu.out,onStateChange:this.s}),this.Ka("H_zoom"),this.Ka("H_grp"),this.ea=!1!==e.fractionalZoom,this.setZoomSpeed(e.zoomSpeed||4),this.Vb(e.alignment||"right-middle")}function Tu(e){e.removeChild(e.c),e.c=null,e.l&&(e.l.removeEventListener("minchange",e.b),e.l.removeEventListener("maxchange",e.b),e.l=null)}function Uu(e,n){var r={},d={};r["top-left"]=yu(n,"div",[Vu,Wu].join(" ")),r["top-center"]=yu(n,"div",[Vu,Xu,Yu,Wu].join(" ")),r["top-right"]=yu(n,"div",[Vu,Wu].join(" ")),r["left-top"]=yu(n,"div",[Vu,Zu].join(" ")),r["left-middle"]=yu(n,"div",[Vu,$u,av,Zu].join(" ")),r["left-bottom"]=yu(n,"div",[Vu,Zu].join(" ")),r["right-top"]=yu(n,"div",[Vu,Zu].join(" ")),r["right-middle"]=yu(n,"div",[Vu,bv,av,Zu].join(" ")),r["right-bottom"]=yu(n,"div",[Vu,Zu].join(" ")),r["bottom-left"]=yu(n,"div",[Vu,Wu].join(" ")),r["bottom-center"]=yu(n,"div",[Vu,cv,Yu,Wu].join(" ")),r["bottom-right"]=yu(n,"div",[Vu,Wu].join(" ")),d["top-left"]=yu(n,"div",[Xu,$u].join(" ")),d["top-right"]=yu(n,"div",[Xu,bv].join(" ")),d["bottom-left"]=yu(n,"div",[cv,$u].join(" ")),d["bottom-right"]=yu(n,"div",[cv,bv].join(" ")),zu(d["top-left"],r["top-left"],r["left-top"]),zu(d["top-right"],r["top-right"],r["right-top"]),zu(d["bottom-left"],r["left-bottom"],r["bottom-left"]),zu(d["bottom-right"],r["right-bottom"],r["bottom-right"]),zu(e,d["top-left"],d["top-right"],d["bottom-left"],d["bottom-right"],r["top-center"],r["left-middle"],r["right-middle"],r["bottom-center"]),this.a=r}t("H.ui.LayoutAlignment",Pu),u(Qu,Y),t("H.ui.base.Container",Qu),Qu.prototype.va=function(e,n){var r=this.a?this.a.length:0;for(Y.prototype.va.call(this,e,n);r--;)this.a[r].va(e,n);return this},Qu.prototype.setDisabled=Qu.prototype.va,Qu.prototype.Ja=function(e){var n=this.N();return this.a.push(e),n&&(e.W(n.ownerDocument),n.appendChild(e.N())),this},Qu.prototype.addChild=Qu.prototype.Ja,Qu.prototype.dh=function(){return this.a.concat()},Qu.prototype.getChildren=Qu.prototype.dh,Qu.prototype.removeChild=function(e){var n=this.a.indexOf(e),r=this.N();0<=n&&(this.a.splice(n,1),r&&r.removeChild(e.N()))},Qu.prototype.removeChild=Qu.prototype.removeChild,Qu.prototype.na=function(){var e=this.N();e&&this.a.forEach(function(n){e.removeChild(n.N())}),this.a=[]},Qu.prototype.X=function(e,n){for(var r=0,d=this.a.length;r<d;r++)e.appendChild(this.a[r].W(n))},Qu.prototype.renderInternal=Qu.prototype.X,Qu.prototype.o=function(){this.na(),this.a.forEach(this.qa,this),Y.prototype.o.call(this)},Qu.prototype.qa=function(e){e.F()},u(Ru,Qu),t("H.ui.Control",Ru),Ru.prototype.Ia=function(e){this.map=e},Ru.prototype.W=function(e){return Qu.prototype.W.call(this,e)},Ru.prototype.X=function(e,n){Qu.prototype.renderInternal.call(this,e,n),this.Vb(this.Mc)},Ru.prototype.renderInternal=Ru.prototype.X,Ru.prototype.Qe=function(){},Ru.prototype.onUnitSystemChange=Ru.prototype.Qe,Ru.prototype.Lb=function(){return this.map},Ru.prototype.getMap=Ru.prototype.Lb,Ru.prototype.pa=function(){return this.xa},Ru.prototype.getLocalization=Ru.prototype.pa,Ru.prototype.Ll=function(){return this.Mc},Ru.prototype.getAlignment=Ru.prototype.Ll,Ru.prototype.Vb=function(e){return"string"==typeof e&&Pu[e.replace("-","_").toUpperCase()]===e&&(this.Mc=e,this.dispatchEvent("alignmentchange")),this},Ru.prototype.setAlignment=Ru.prototype.Vb,u(Su,Ru),t("H.ui.ZoomControl",Su),Su.prototype.kn=function(){return this.P},Su.prototype.getZoomSpeed=Su.prototype.kn,Su.prototype.Do=function(e){this.P=e},Su.prototype.setZoomSpeed=Su.prototype.Do,Su.prototype.Ia=function(e){this.map!==e&&(this.map&&this.map.removeEventListener("mapviewchange",this.g),Tu(this)),Ru.prototype.Ia.apply(this,arguments),this.map&&(this.b(),e.addEventListener("mapviewchange",this.g),e.addEventListener("baselayerchange",this.b))},Su.prototype.setMap=Su.prototype.Ia,Su.prototype.o=function(){Ru.prototype.o.apply(this,arguments),this.map.removeEventListener("baselayerchange",this.b),Tu(this)},Su.prototype.X=function(e,n){Ru.prototype.renderInternal.call(this,e,n),this.i.jc(this.pa().translate("zoom.in")),this.m.jc(this.pa().translate("zoom.out"))},Su.prototype.renderInternal=Su.prototype.X,Su.prototype.Vb=function(e){var n=this.Mc;return Ru.prototype.Vb.call(this,e),n!==e&&this.b(),this},Su.prototype.setAlignment=Su.prototype.Vb,Su.prototype.g=function(){var e=this.map,n=e.pb(),r=e.Xa()-1;e=e.g||e.f.getCapabilities().lookAt.zoom,this.D&&this.c.wg(n),this.dc()||(this.i.va(n+r>=e.max),this.m.va(n<=e.min))},Su.prototype.va=function(e,n){return Su.j.va.call(this,e,n),this.g(),this},Su.prototype.setDisabled=Su.prototype.va,Su.prototype.s=function(e){var m,n=(e=e.target)===this.i?1:-1,r=0<n?Math.ceil:Math.floor,d=this.map,g=this;d&&("down"===e.getState()?(d.c.startControl(),d.c.control(0,0,n*this.P,0,0,0)):d.c.endControl(!0,function(v){m=g.ea?v.zoom:r(v.zoom),v.zoom=m}))},Su.prototype.u=function(e){this.map&&this.map.df(e.newValue)},Su.prototype.b=function(){var e=this.Mc,n=this.Lb();if(/^top/g.test(e)||/^bottom/g.test(e)){var r=this.m;e=this.i;var d=!1}else r=this.i,e=this.m,d=!0;if(this.removeChild(r),this.removeChild(e),this.Ja(r),this.D&&n){Tu(this),n=d;var m=(d=(r=this.map)&&r.g)||r.f.getCapabilities().lookAt.zoom;(this.l=d)&&(d.addEventListener("minchange",this.b),d.addEventListener("maxchange",this.b)),this.c=new Hu({step:this.wa?1:0,vertical:n,min:m.min,max:m.max,value:r.pb(),pointerArea:r.N()}),this.c.addEventListener(this.c.A.ed,this.u),this.Ja(this.c)}this.Ja(e)};var Xu="H_l_top",cv="H_l_bottom",$u="H_l_left",bv="H_l_right",Yu="H_l_center",av="H_l_middle",Wu="H_l_horizontal",Zu="H_l_vertical",Vu="H_l_anchor";function dv(e,n){n?(n=e.offsetWidth,e.style.marginLeft=-Math.round(.5*n)+"px"):(n=e.offsetHeight,e.style.marginTop=-Math.round(.5*n)+"px")}Uu.prototype.update=function(){var e=this.a;dv(e["top-center"],!0),dv(e["bottom-center"],!0),dv(e["left-middle"],!1),dv(e["right-middle"],!1)},Uu.prototype.put=function(e,n){e=e?e.N():null;var r=n?this.a[n]:null;e&&r&&(e.parentElement&&e.parentElement.removeChild(e),r.insertBefore(e,/(bottom|right)$/.test(n)||/(center|middle)/.test(n)&&r.childNodes.length%2?r.firstChild:null)),this.update()};var ev={IMPERIAL:"imperial",METRIC:"metric"};t("H.ui.UnitSystem",ev);var fv={btn:'<svg class="H_icon" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><g fill-rule="evenodd"><g transform="translate(3 2)"><path d="m18 13v7h-18v-7h2v5h2v-2h2v2h2v-3h2v3h2v-2h2v2h2v-5z"></path><path d="m2.3.3c.7 0 1.3.1 1.8.4s.9.6 1.1 1 .4.9.4 1.4c0 .5-.1 1-.3 1.4s-.57 1-1 1.6-1.3 1.3-2.3 2.2h3.9l-.2 1.7h-6.16v-1.6c1.1-1.1 2-2 2.5-2.6s.9-1 1-1.4.3-.8.3-1.2c0-.4-.1-.7-.3-.9s-.5-.3-.9-.3c-.3 0-.6 0-.9.2s-.5.4-.8.7l-1.3-1c.4-.5.9-.9 1.4-1.2s1.2-.4 1.8-.4zm14.4 9.7h-2.3l-.2-3.8c 0-.9-.1-1.7-.1-2.4 0-.5 0-1 0-1.5l-1.5 6.7h-2.2l-1.6-6.7c.1.8.1 1.6.1 2.3 0 .5 0 1.1 0 1.7l-.2 3.8h-2.2l.7-9.7h2.9l1.5 6.6 1.4-6.6h2.9z"></path></g></g></svg>',point:'<svg height="22" viewBox="0 0 12 12" width="22" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="m6 12c3.3 0 6-2.7 6-6s-2.7-6-6-6-6 2.7-6 6 2.7 6 6 6z" fill="#fff"></path><path d="m6 10c2.2 0 4-1.8 4-4s-1.8-4-4-4-4 1.8-4 4 1.8 4 4 4z" fill="#2ed5c9" stroke="#272c36" stroke-width="2"></path></g></svg>'};function gv(e){Eu.call(this,e),this.i=function(n){n.preventDefault()},this.g=A(function(n){this.dc()||this.toggleState(),n.preventDefault()},this)}function hv(e,n,r){bj.call(this,e,{icon:iv,visibility:r}),jv(this,n)}function jv(e,n){e.zn=n,e.S&&(e.S.textContent=n)}u(gv,Eu),t("H.ui.base.PushButton",gv),gv.prototype.X=function(e){Bu(e,"start",this.g),Bu(e,"end",this.i),this.Jc(this.Ge(),!0)},gv.prototype.renderInternal=gv.prototype.X,gv.prototype.Lo=function(){var e=Fu.DOWN;return this.O(this.getState()===e?Fu.UP:e),this},gv.prototype.toggleState=gv.prototype.Lo,gv.prototype.o=function(){var e=this.N();e&&Cu(e,"start",this.g),Eu.prototype.o.call(this)},u(hv,bj);var iv=new Ti(yu(ru.document,"span","H_dm_label"),{onAttach:function(e,n,r){r.S=e,jv(r,r.zn)},onDetach:function(e,n,r){delete r.S}});function kv(e,n){F.call(this),this.b=e,this.f=new hv(this.Jo,""),n.push(this.f),this.a=new R({objects:n,data:this}),this.ug=this.ug.bind(this)}function lv(e,n){n&&(e.nextSibling=n,n.previousSibling=e)}function mv(e,n,r,d){var m=new L,g=[];lv(e,this),lv(this,n),m.qd(e.ya()),m.qd(n.ya()),this.c=new th(m,{style:r.Wd}),this.i=new th(m,{style:{strokeColor:"transparent",lineWidth:Math.min(100,this.c.V().lineWidth+2*(d||5))}}),r.c&&(this.g=new th(m,{style:r.c}),g.push(this.g)),g.push(this.c,this.i),kv.call(this,r,g),this.s=this.l=-1,(e=this.a).addEventListener("pointermove",this.J,!0,this),e.addEventListener("pointerleave",this.u,!0,this)}function nv(e,n,r){var d=e.c.ga();d.ff(3*+r,3,[n.lat,n.lng,0]),e.g&&e.g.da(d),e.i.da(d),e.c.da(d)}function ov(e,n,r){r=n.b(r||0),this.c=new Rn(e,{icon:r,zIndex:0}),this.c.draggable=!0,kv.call(this,n,[this.c]),(e=this.a).addEventListener("dragstart",this.Qn,!0,this),e.addEventListener("drag",this.Rn,!0,this),e.addEventListener("dragend",this.Pn,!0,this)}function pv(e){var n=0;e.nextSibling&&e.previousSibling&&(e.nextSibling.Wc||e.previousSibling.Wc?e.nextSibling.Wc&&!e.previousSibling.Wc&&(n=2):n=1),n=e.b.b(n),e.c.Ic(n)}function qv(e,n){this.Ca=n,this.b=e,this.a={Wc:!0},rv(this,this.a),this.$f=A(this.$f,this)}function sv(e,n){for(var r=(e=e.a).nextSibling;r!==e;){var d=r;(d.m=r.previousSibling!==e&&n)?d.ug():(d.Rh&&x.clearTimeout(d.Rh),d.Rh=x.setTimeout(d.ug,100)),r=r.nextSibling}}function tv(e,n){var r=n||e.a.nextSibling,d=0,m=0;if(n&&!uv(e,n))throw new D(e.Xe,0,n);for(r instanceof ov?d=r.Ee():r instanceof mv&&(d=r.previousSibling.Ee()),n=r;n&&n!==e.a;n=n.nextSibling,m++)n.ni(d),m%2==1&&(d+=n.Ee())}function uv(e,n){for(var r=e.a.nextSibling,d=!1;r!==e.a;){if(r===n){d=!0;break}r=r.nextSibling}return d}function vv(e,n,r){n=new mv(n,r,e.Ca),e.b.fa(n.a)}function rv(e,n){e.a.nextSibling=n,n.previousSibling=e.a}function wv(e){var n,r=(e=e||{}).lineStyle;Ru.call(this),this.s=new gv({label:fv.btn,onStateChange:A(this.Nn,this)}),this.Ja(this.s),(n=e.distanceFormatter)&&(this.oj=n),r&&(this.Xj=r,this.sk=B),this.Vb(e.alignment||"right-bottom"),this.g={},this.g[0]=e.startIcon,this.g[2]=e.endIcon,this.g[1]=e.stopoverIcon,this.g[3]=e.splitIcon}function xv(e){var r,n=e.map,d={};e.c||(e.l=new N,e.m=new tl(e.l,{pixelRatio:e.map.Xa()}),e.u=r=e.l.bc(),e.u.Vk(!0),r.addEventListener("dragstart",e.Ln,!0,e),r.addEventListener("dragend",e.ef,!0,e),r.addEventListener("pointerenter",e.ef,!0,e),r.addEventListener("pointerleave",e.Mn,!0,e),r.addEventListener("tap",e.co,!0,e),e.i=yv(e),d.a=A(e.oj,e),d.b=A(e.dk,e),d.g=A(e.Dj,e),d.map=e.map,d.f=e.i,d.Wd=e.Xj,d.c=e.sk,e.b=new qv(e.u,d),e.c=!0),e.i&&e.u.fa(e.i),n.addEventListener("tap",e.pk,!0,e),n.a.add(e.m)}function zv(e){var n=e.map;e.c&&(n.removeEventListener("tap",e.pk,!0,e),n.ae(e.m),e.b.na())}function yv(e){function n(){var w=r.yb();return w={anchor:r.kd().clone().scale(g).floor(),size:new Wi(Bd(w.w*g),Bd(w.h*g)),hitArea:d},new Wj(r.Qc(),w)}var m,r=e.dk(3),d=new Xi(Yi.NONE,[]),g=r===e.D?.5:1;if(1===r.getState())var v=n();else v=new Wj("<svg/>",{hitArea:d}),r.addEventListener("statechange",function(){1===r.getState()&&m.Ic(n())});return m=new Rn(e.map.bb(),{visibility:!1,icon:v})}function Av(){this.C=Bv.CLOSED,Qu.call(this,"div","H_overlay")}u(kv,F),p=kv.prototype,p.Wc=!1,p.Jo={lat:0,lng:0},p.Jc=function(e,n){jv(this.f,e),this.f.da(n)},p.Rh=0,p.ug=function(){this.f.qb(this.m)},u(mv,kv),mv.prototype.Ee=function(){var e=this.c.ga();return e.ye(0).Wa(e.ye(1))},mv.prototype.J=function(e){var n=e.currentPointer;e=this.previousSibling.ya();var r=this.nextSibling.ya(),d=this.b.f,m=n.viewportX;n=n.viewportY,(this.l!==m||this.s!==n)&&(this.l=m,this.s=n,d.da(this.b.g(e,r,{x:m,y:n})),d.qb(!0))},mv.prototype.u=function(){this.b.f.qb()},mv.prototype.ni=function(){this.Jc(this.b.a(this.Ee()),this.c.K().bb())},u(ov,kv),p=ov.prototype,p.hk=0,p.A={ed:"change"},p.Ee=function(){return this.hk},p.ya=function(){return this.c.ga()},p.Rn=function(e){var n=e.currentPointer;e=n.viewportX,n=n.viewportY,(this.i!==e||this.l!==n)&&(this.i=e,this.l=n,this.c.da(this.b.map.Pa(e-this.g.x,n-this.g.y)),this.dispatchEvent(new ud(this.A.ed,this)))},p.Qn=function(e){var n=e.currentPointer,r=n.viewportX;n=n.viewportY;var d=this.b.map.Da(this.ya());this.c.fe(1),this.g={x:r-d.x,y:n-d.y},e.stopPropagation()},p.Pn=function(){this.c.fe(0)},p.ni=function(e){this.hk=e,this.Jc(this.b.a(e),this.ya())},t("H.ui.distanceMeasurement.Model",qv),p=qv.prototype,p.Rf=function(){return this.a.nextSibling===this.a},p.ne=function(e){var n=this.a.previousSibling,r=this.Rf();return e=new ov(e,this.Ca,r?0:2),this.b.fa(e.a),lv(e,this.a),e.addEventListener(e.A.ed,this.$f),r?rv(this,e):(vv(this,n,e),pv(n),tv(this,n)),e},p.insertBefore=function(e,n){var r,d=1;if(n){if(!uv(this,n))throw new D(this.insertBefore,1,n);(r=n.previousSibling.Wc)&&(d=0),(e=new ov(e,this.Ca,d)).addEventListener(e.A.ed,this.$f),this.b.fa(e.a),r?(vv(this,e,r=this.a.nextSibling),rv(this,e),n=e,pv(r)):(n=(r=n.previousSibling).previousSibling,d=r.nextSibling,this.b.Ga(r.a),vv(this,n,e),vv(this,e,d)),tv(this,n)}else e=this.ne(e);return e},p.na=function(){rv(this,this.a),this.b.na()},p.Xe=function(e){var n=this.a,r=e.previousSibling,d=e.nextSibling;if(!uv(this,e))throw new D(this.Xe,0,e);if(this.b.Ga(e.a),r===n){var m=d;m!==n?(rv(this,e=m.nextSibling),e.ni(0),pv(e),tv(this,e)):rv(this,this.a)}else d===n?(lv(e=(m=r).previousSibling,n),pv(e)):r&&d&&(vv(this,r.previousSibling,d.nextSibling),this.b.rd([d.a,r.a]),tv(this,r.previousSibling));m&&m!==n&&this.b.Ga(m.a)},p.$f=function(e){var n=(e=e.target).previousSibling,r=e.nextSibling,d=e.ya();if(!r.Wc){nv(r,d,!1);var m=e}n.Wc||(nv(n,d,!0),m=n.previousSibling),tv(this,m)},u(wv,Ru),t("H.ui.DistanceMeasurement",wv),p=wv.prototype,p.Qh=ev.METRIC,p.Xj={strokeColor:"rgb(39,44,54)",lineWidth:5},p.sk={strokeColor:"white",lineWidth:7},p.oj=function(e){var n="m",r=0;return"metric"===this.Qh?1e3<=e&&(e/=1e3,n="km",r=1):(n="ft",5280<=(e/=.3048)&&(e/=5280,n="mi",r=1)),e.toFixed(r)+" "+this.pa().translate("scale."+n)},p.Dj=function(e,n,r){var d=this.map.Da(e);return n=this.map.Da(n),r=new J(r.x,r.y).Cj(d,n),this.map.Pa(r.x,r.y)||ng(e)},p.X=function(e,n){var r=22*(this.map.f.type===kk.P2D?this.map.Xa():1),d=r/2;Ru.prototype.renderInternal.call(this,e,n),this.Qh=ev.METRIC,this.D=new Wj(fv.point,{anchor:{x:d,y:d},size:{w:r,h:r},hitArea:new Xi(Yi.CIRCLE,[d,d,d])}),this.s.jc(this.pa().translate("distance.measurement"))},wv.prototype.renderInternal=wv.prototype.X,p=wv.prototype,p.dk=function(e){return this.g[e]||this.D},p.ef=function(){sv(this.b,!0)},p.Ln=function(){sv(this.b)},p.Mn=function(e){"touch"!==e.currentPointer.type&&sv(this.b)},p.co=function(e){var d,n=e.currentPointer,r=e.target.Fa;r&&(r=r.getData())instanceof kv&&(d=r),e=(e=e.originalEvent).metaKey||e.altKey,(r=d)&&(e&&r instanceof ov?this.b.Xe(r):r instanceof mv&&(e=r.previousSibling.ya(),d=r.nextSibling.ya(),this.b.insertBefore(this.Dj(e,d,n={x:n.viewportX,y:n.viewportY}),r.nextSibling),this.i.qb()),this.ef())},p.pk=function(e){var n=e.currentPointer;(e=e.target)!==this.map&&e.getProvider&&e.getProvider()===this.l||(this.b.ne(this.map.Pa(n.viewportX,n.viewportY)),this.i.qb(),this.ef())},p.Nn=function(e){"down"===e.target.getState()?xv(this):zv(this)},p.Qe=function(e){this.Qh=e,this.c&&(tv(this.b),this.ef())},wv.prototype.onUnitSystemChange=wv.prototype.Qe,wv.prototype.o=function(){zv(this),this.c&&(this.l.F(),this.m.F()),wv.j.o.call(this)},wv.prototype.Ia=function(e){e?this.s.getState()===Fu.DOWN&&(this.map=e,xv(this)):(zv(this),this.c=!1),Ru.prototype.Ia.apply(this,arguments)},wv.prototype.setMap=wv.prototype.Ia,u(Av,Qu),t("H.ui.base.OverlayPanel",Av),Av.prototype.O=function(e,n){return(e!==this.C||n)&&(this.C=e,e===Bv.OPEN?this.Ka("H_open"):this.kb("H_open")),this},Av.prototype.setState=Av.prototype.O,Av.prototype.getState=function(){return this.C},Av.prototype.getState=Av.prototype.getState,Av.prototype.xk=function(e){var n=e.Mc;e=e.N();var r=this.N(),d=r.style;if(this.kb("H_top"),this.kb("H_middle"),this.kb("H_bottom"),this.kb("H_left"),this.kb("H_center"),this.kb("H_right"),d.bottom=d.top=d.left=d.right=d.margin="",/top/g.test(n)){this.Ka("H_top"),d.top="0",d.margin="0 12px";var m=-1}else/bottom/g.test(n)?(this.Ka("H_bottom"),d.bottom="0",d.margin="0 12px",m=1):(this.Ka("H_middle"),d.top="50%",d.margin="0 12px",d.marginTop=-Math.round(.5*r.offsetHeight)+"px",m=0);/left/g.test(n)?(this.Ka("H_left"),d.left=e.offsetWidth+"px",d.marginLeft="12px"):/right/g.test(n)?(this.Ka("H_right"),d.right=e.offsetWidth+"px",d.marginRight="12px"):(this.Ka("H_center"),d.left="50%",0>m?(d.top=e.offsetHeight+"px",d.marginTop="12px"):0<m&&(d.bottom=e.offsetHeight+"px",d.marginBottom="12px"),d.marginLeft=-Math.round(.5*r.offsetWidth)+"px",e.appendChild(r))},Av.prototype.pointToControl=Av.prototype.xk;var Bv={OPEN:"open",CLOSED:"closed"};function Cv(e){e=e||{},Qu.call(this,"div","H_rdo"),this.g=new Y("div","H_rdo_title"),this.b=new Qu("div","H_rdo_buttons"),this.Ja(this.g),this.Ja(this.b),this.i=A(function(n){n.target.getState()===Fu.DOWN?(this.Kk(n.target,!0),this.dispatchEvent(Dv)):n.target.O(Fu.DOWN,!0)},this),this.addEventListener("statechange",this.i),this.Ci(e.title||""),e.onActiveButtonChange&&this.addEventListener(Dv,e.onActiveButtonChange),e.buttonsOptions&&e.buttonsOptions.forEach(function(n){this.Gg(new gv(n))},this)}Av.State=Bv,u(Cv,Qu),t("H.ui.base.RadioGroup",Cv);var Dv="activebuttonchange";function Ev(e){e=e||{},Ru.call(this),this.i=new Av,this.b=this.b.bind(this),this.s=this.s.bind(this),this.m=this.m.bind(this),this.Vb(e.alignment||"bottom-right"),Fv(this,e.baseLayers,e.layers)}function Gv(e,n){var r=[];return e.concat(n).forEach(function(d){r=r.concat(d.layer)}),r}function Hv(e,n,r){var d=e.Lb();if(d){e=Gv(e.c,e.g);var m=Gv(n,r);e.forEach(function(g){m.includes(g)||d.ae(g)})}}function Fv(e,n,r){Hv(e,n,r),e.D=NaN,e.c=Bc(n)?n:[],e.g=Bc(r)?r:[],e.l&&(e.l.na(),e.u.na(),Iv(e))}function Iv(e){var n=e.pa();e.c.forEach(function(r,d){var m=r.layer;this.l.Gg(new gv({label:Jv(n,r.label),data:d,disabled:!m||Bc(m)&&!m.length}))},e),e.g.forEach(function(r,d){var m=r.layer;this.u.Ja(new gv({label:Jv(n,r.label),onStateChange:this.sb.bind(this,r.layer),data:d,disabled:!m||Bc(m)&&!m.length}))},e),e.ea.qb(!(!e.g.length||!e.c.length)),x.setTimeout(function(){this.map&&(this.b(),this.P.va(!(this.c&&this.c.length||this.g&&this.g.length)))}.bind(e))}function Mv(e,n){var r=window.H.service&&window.H.service.omv.Provider,d=n.ca();if(r&&n.ca()instanceof r&&d.V().xe){var m=d.V(),g=function(){var v=Nv.ground.filter(function(j){return!!m.kh("layers."+j)}),w=Nv.water.filter(function(j){return!!m.kh("layers."+j)});if(v.concat(w).length){var k={};$h(k,m.xe(v)),$h(k,m.xe(w,!1,!0)),delete k.global,v=new ti(k,m.Ib()),(v=d.s().$b(v)).Bg=n,this.map.nf(v)}m.removeEventListener(Zh.CHANGE,g)}.bind(e);m.getState()!==Xh.READY?m.addEventListener(Zh.CHANGE,g):g()}}function Kv(e){return iu(e.map.a.La(),function(n){return!!n.Bg})}function Lv(e){e=e.map.a.La();var n=window.H.service&&window.H.service.traffic.flow.Provider;return!!n&&e.some(function(r){return r.ca()instanceof n})}Cv.prototype.X=function(e,n){Qu.prototype.renderInternal.call(this,e,n),this.Ci(this.c,!0)},Cv.prototype.renderInternal=Cv.prototype.X,Cv.prototype.na=function(){this.b.na()},Cv.prototype.Ci=function(e,n){return(e!==this.c||n)&&(this.c=e,this.g.N()&&(this.g.N().innerHTML=this.c)),this},Cv.prototype.setTitle=Cv.prototype.Ci,Cv.prototype.an=function(){return this.c},Cv.prototype.getTitle=Cv.prototype.an,Cv.prototype.Gg=function(e){if(!(e instanceof gv))throw Error("PushButton expected");return e.ka(this),this.b.Ja(e),this},Cv.prototype.addButton=Cv.prototype.Gg,Cv.prototype.ko=function(e){return this.b.removeChild(e),e.ka(null),this},Cv.prototype.removeButton=Cv.prototype.ko,Cv.prototype.Df=function(){return this.b.dh()},Cv.prototype.getButtons=Cv.prototype.Df,Cv.prototype.Kk=function(e,n){for(var r=this.Df(),d=r.length;d--;)r[d].O(r[d]===e?Fu.DOWN:Fu.UP,n)},Cv.prototype.setActiveButton=Cv.prototype.Kk,Cv.prototype.o=function(){this.removeEventListener("statechange",this.i),this.na(),Qu.prototype.o.call(this)},u(Ev,Ru),t("H.ui.MapSettingsControl",Ev),Ev.prototype.ta=function(){var e=this.Lb();e&&(e.addEventListener("tap",this.s),(e=e.a).addEventListener("add",this.b),e.addEventListener("remove",this.b),e.addEventListener("set",this.b))},Ev.prototype.T=function(){var e=this.Lb();e&&(e.removeEventListener("tap",this.s),(e=e.a).removeEventListener("add",this.b),e.removeEventListener("remove",this.b),e.removeEventListener("set",this.b))},Ev.prototype.X=function(e,n){var r=this.pa().translate("layers.choose");Ru.prototype.renderInternal.call(this,e,n),this.ta(),this.P=new gv({tooltip:r,label:'<svg xmlns="http://www.w3.org/2000/svg" class="H_icon" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M6.7,14.6 L4.5,16 L12,20.6 L19.5,16 L17.3,14.6 L19.1,13.5 L23,16 L12,23 L1,16 L4.9,13.5 L6.7,14.6 Z M12,2 L23,9 L12,16 L1,9 L12,2 Z"></path></svg>',onStateChange:A(function(d){d.target.getState()===Fu.DOWN?(this.i.O(Bv.OPEN),this.i.xk(this)):this.i.O(Bv.CLOSED)},this)}),Ev.prototype.wa=function(d){if(this.map.f.type===Qn){var m=H.map.render.harp.Style;d=[].concat(d);for(var g=0;!w&&g<d.length;g++){var v=d[g].ca();if(v.Sb()&&v.V)var w=(v=v.V()).getConfig()||v.getUrl()}if(w){var k=function(j){(j=j.ca()).Sb()&&j.V&&j.V()instanceof m&&j.gb(new m(w))};this.g.forEach(function(j){Bc(j=j.layer)?j.forEach(k):j&&k(j)})}}},this.l=new Cv({title:r,onActiveButtonChange:function(){var d=this.D;t:{for(var m=this.l.Df(),g=m.length;g--;)if(m[g].getState()===Fu.DOWN){m=m[g];break t}m=null}if(m=m.getData(),g=Bc(m=this.c[m].layer),this.map.ud(g?m[0]:m),(d=this.c[d])&&Bc(d=d.layer))for(var v=d.length;1<v--;)this.map.ae(d[v]);if(g)for(d=m.length;1<d--;)this.map.nf(m[d],1);this.wa(m),this.m()}.bind(this)}),this.u=new Qu("div","H_grp"),this.ea=new Y("div","H_separator"),this.Ja(this.P),this.Ja(this.i),this.i.Ja(this.l),this.i.Ja(this.ea),this.i.Ja(this.u),Iv(this)},Ev.prototype.renderInternal=Ev.prototype.X,Ev.prototype.b=function(){var e=this.map.g,n=this.map.a;this.D=NaN,this.c.forEach(function(r,d){r=e===(Bc(r=r.layer)?r[0]:r),this.l.Df()[d].O(Fu[r?"DOWN":"UP"],!0),r&&(this.D=d)},this),this.g.forEach(function(r,d){var m=Bc(r=r.layer);d=this.u.dh()[d],!r||m&&!r.length?d.va(!0):d.O(Fu[-1!==n.indexOf(m?r[0]:r)?"DOWN":"UP"],!0)},this)},Ev.prototype.sb=function(e,n){e=Bc(e)?e:[e],n=n.target.getState()===Fu.DOWN;for(var r=0;r<e.length;r++)n?this.map.nf(e[r]):this.map.ae(e[r]);this.m()},Ev.prototype.m=function(){var e=Kv(this);e&&(e.Bg.ca().V().Oe(e.ca().V().qc()),this.map.ae(e),e.F(),delete e.Bg),Lv(this)&&Mv(this,this.map.g)};var Nv={water:["water.water-labels"],ground:"road_labels continent_label island_label roads.shields roads.directions truck-restriction.signs places landuse.label".split(" ")};function Jv(e,n){return/^layers?/.test(n)&&e.Nf(n)?e.translate(n):n}Ev.prototype.s=function(){this.P.O(Fu.UP)},Ev.prototype.o=function(){Ev.j.o.call(this),this.T()};var Ov=[];t("H.ui.i18n.defaultLocales",Ov);var Pv={},Qv=[];function Rv(e,n){Pv[e]=n,-1===Ov.indexOf(e)&&Ov.push(e),Qv.length?Sv(e,n):Qv=Object.keys(n)}function Sv(e,n){for(var m,r=Qv,d=r.length;d--;)if(!n[m=r[d]])throw Error("'"+m+"' key missing in translation map for "+e)}function Tv(e){e=e||{},Ru.call(this),this.c=new gv({label:'<svg xmlns="http://www.w3.org/2000/svg" class="H_icon" viewBox="0 0 24 24"><g transform="translate(1 3)"><path fill-rule="nonzero" d="M5,0 L5,2 L2,2 L2,16 L5,16 L5,18 L2,18 C0.9,18 0,17 0,15.75 L0,2.25 C0,1 0.9,0 2,0 L5,0 Z M17,0 L20,0 C21.1,0 22,1 22,2.25 L22,15.75 C22,17 21.1,18 20,18 L17,18 L17,16 L20,16 L20,2 L17,2 L17,0 Z"></path><rect width="10" height="2" x="6" y="8"></rect><rect width="2" height="10" x="10" y="4"></rect></g></svg>',onStateChange:A(this.On,this)}),this.Ja(this.c),this.Vb(e.alignment||"right-bottom")}function Uv(e,n){if(!Cc(e))throw new TypeError("string locale code required");if(Ea(n))Sv(e,n);else{if(-1===Ov.indexOf(e))throw Error("Default locale '"+e+"' does nto exist.");n=Pv[e]}this.b=n||{},this.a=e}function Vv(e){e=e||{},Ru.call(this),this.Ka("H_scalebar"),this.Vb(e.alignment||"right-bottom"),this.m=150,this.update=A(this.update,this),this.i=this.g=this.b=this.c=null}function Wv(e){C(e,Re,Wv,1),Y.call(this,"div","H_context_menu_item"),this.b=e,this.c=A(this.c,this),this.a=A(this.a,this),this.b.addEventListener("update",this.a)}function Xv(e){C(e,Array,Xv,1),Qu.call(this,"div","H_context_menu"),this.c=e,this.b=null}function Yv(e,n){n=n||{};var r=this;Y.call(this,"div","H_ib H_ib_top"),this.u=A(function(d){r.dc()||(r.close(),d.preventDefault())},this),this.update=A(this.update,this),this.i=A(this.i,this),this.setPosition(e),this.$e(n.content),n.onStateChange&&this.addEventListener("statechange",n.onStateChange),this.O(Zv.OPEN)}u(Tv,Ru),t("H.ui.ZoomRectangle",Tv),p=Tv.prototype,p.On=function(e){var n=this.map,r=n.b.element;e.target.getState()===Fu.DOWN?(n.addEventListener("dragstart",this.fk,!0,this),n.addEventListener("drag",this.gk,!0,this),n.addEventListener("dragend",this.ek,!0,this),(e=r.ownerDocument.createElement("div")).className="H_zoom_lasso",r.appendChild(e),this.b=e):(n.removeEventListener("dragstart",this.fk,!0,this),n.removeEventListener("drag",this.gk,!0,this),n.removeEventListener("dragend",this.ek,!0,this),r.removeChild(this.b))},p.fk=function(e){var n=this.b.style,r=e.currentPointer,d=r.viewportX;r=r.viewportY,e.target===this.map&&(e.stopPropagation(),n.width="0px",n.height="0px",n.top=r+"px",n.left=d+"px",n.display="block",this.i=r,this.g=d)},p.gk=function(e){var n=e.currentPointer,r=n.viewportX,d=n.viewportY;n=this.g;var m=this.i,g=this.b.style;e.target===this.map&&(e.stopPropagation(),e=r-n,r=d-m,g.left=n+(0>e?e:0)+"px",g.top=m+(0>r?r:0)+"px",g.width=Math.abs(e)+"px",g.height=Math.abs(r)+"px")},p.ek=function(e){var n=this.map,r=e.currentPointer;e.target===this.map&&(e.stopPropagation(),this.b.style.display="none",n.c.Wb({bounds:tg([n.Pa(this.g,this.i),n.Pa(r.viewportX,r.viewportY)])},!0))},p.X=function(e,n){Ru.prototype.renderInternal.call(this,e,n),this.c.jc(this.pa().translate("zoom.rectangle"))},Tv.prototype.renderInternal=Tv.prototype.X,Rv("nl-NL",{"layers.normal":"Kaartweergave","layers.satellite":"Satelliet","layers.terrain":"Terrein","layer.transit":"Openbaar vervoer","layer.traffic":"Verkeerssituatie","layer.incidents":"Toon verkeersincidenten","layers.choose":"Weergave kiezen",minimap:"Minimap","scale.switchToImperial":"Overgaan naar mijlen","scale.switchToMetric":"Wijzigen naar km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Uitzoomen","zoom.in":"Inzoomen","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Openbaar vervoer","traffic.MISCELLANEOUS":"Diversen","traffic.ACCIDENT":"Ongeval","traffic.OTHER_NEWS":"Meer informatie","traffic.OTHER":"Meer informatie","traffic.PLANNED_EVENT":"Geplande afzetting","traffic.ROAD_HAZARD":"Gevaar op de weg","traffic.ROAD_CLOSURE":"Rijbaan afgesloten","traffic.WEATHER":"Weer","traffic.CONGESTION":"Verkeersopstopping","traffic.CONSTRUCTION":"Wegwerkzaamheden","traffic.DISABLED_VEHICLE":"Voertuig met pech","traffic.LANE_RESTRICTION":"Rijstrookbeperking","traffic.from":"Begintijd:","traffic.until":"Geschatte eindtijd:","distance.measurement":"Measure distance"}),Rv("pt-PT",{"layers.normal":"Vista do mapa","layers.satellite":"Sat\xe9lite","layers.terrain":"Terreno","layer.transit":"Transportes p\xfablicos","layer.traffic":"Condi\xe7\xf5es de tr\xe2nsito","layer.incidents":"Mostrar incidentes de tr\xe2nsito","layers.choose":"Escolher vista",minimap:"Minimap","scale.switchToImperial":"Mudar para milhas","scale.switchToMetric":"Mudar para km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Diminuir","zoom.in":"Aumentar","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transportes p\xfablicos","traffic.MISCELLANEOUS":"Diversos","traffic.ACCIDENT":"Acidente","traffic.OTHER_NEWS":"Outras not\xedcias","traffic.OTHER":"Outras not\xedcias","traffic.PLANNED_EVENT":"Evento planeado","traffic.ROAD_HAZARD":"Perigo na estrada","traffic.ROAD_CLOSURE":"Estrada fechada","traffic.WEATHER":"Meteorologia","traffic.CONGESTION":"Congestionamento","traffic.CONSTRUCTION":"Constru\xe7\xe3o","traffic.DISABLED_VEHICLE":"Ve\xedculo avariado","traffic.LANE_RESTRICTION":"Limita\xe7\xe3o da faixa de rodagem","traffic.from":"Hora de in\xedcio:","traffic.until":"Hora de fim prevista:","distance.measurement":"Measure distance"}),Rv("ru-RU",{"layers.normal":"\u0420\u0435\u0436\u0438\u043c \u043a\u0430\u0440\u0442\u044b","layers.satellite":"\u0421\u043f\u0443\u0442\u043d\u0438\u043a\u043e\u0432\u0430\u044f","layers.terrain":"\u041c\u0435\u0441\u0442\u043d\u043e\u0441\u0442\u044c","layer.transit":"\u041e\u0431\u0449\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442","layer.traffic":"\u0414\u043e\u0440\u043e\u0436\u043d\u044b\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f","layer.incidents":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0434\u043e\u0440\u043e\u0436\u043d\u044b\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f","layers.choose":"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0438\u0434",minimap:"Minimap","scale.switchToImperial":"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043c\u0438\u043b\u0438","scale.switchToMetric":"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043a\u0438\u043b\u043e\u043c\u0435\u0442\u0440\u044b","scale.km":"\u043a\u043c","scale.m":"\u043c","scale.mi":"\u043c\u0438\u043b\u044c","scale.ft":"\u0444\u0443\u0442","zoom.out":"\u041e\u0442\u0434\u0430\u043b\u0438\u0442\u044c","zoom.in":"\u041f\u0440\u0438\u0431\u043b\u0438\u0437\u0438\u0442\u044c","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"\u041e\u0431\u0449\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442","traffic.MISCELLANEOUS":"\u041f\u0440\u043e\u0447\u0435\u0435 \u0414\u0422\u041f","traffic.ACCIDENT":"\u0414\u0422\u041f","traffic.OTHER_NEWS":"\u0414\u0440\u0443\u0433\u0438\u0435 \u043d\u043e\u0432\u043e\u0441\u0442\u0438","traffic.OTHER":"\u0414\u0440\u0443\u0433\u0438\u0435 \u043d\u043e\u0432\u043e\u0441\u0442\u0438","traffic.PLANNED_EVENT":"\u041f\u043b\u0430\u043d\u043e\u0432\u043e\u0435 \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0435","traffic.ROAD_HAZARD":"\u0414\u043e\u0440\u043e\u0436\u043d\u0430\u044f \u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c","traffic.ROAD_CLOSURE":"\u0414\u043e\u0440\u043e\u0433\u0430 \u0437\u0430\u043a\u0440\u044b\u0442\u0430","traffic.WEATHER":"\u041f\u043e\u0433\u043e\u0434\u0430","traffic.CONGESTION":"\u041f\u0440\u043e\u0431\u043a\u0430","traffic.CONSTRUCTION":"\u0420\u0435\u043c\u043e\u043d\u0442","traffic.DISABLED_VEHICLE":"\u041d\u0435\u0438\u0441\u043f\u0440\u0430\u0432\u043d\u044b\u0439 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044c","traffic.LANE_RESTRICTION":"\u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u043e\u0441\u044b \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u044f","traffic.from":"\u0412\u0440\u0435\u043c\u044f \u043d\u0430\u0447\u0430\u043b\u0430:","traffic.until":"\u041e\u0436\u0438\u0434\u0430\u0435\u043c\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f:","distance.measurement":"\u0418\u0437\u043c\u0435\u0440\u0438\u0442\u044c \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435"}),Rv("fi-FI",{"layers.normal":"Karttan\xe4kym\xe4","layers.satellite":"Satelliitti","layers.terrain":"Maasto","layer.transit":"Julkinen liikenne","layer.traffic":"Liikenneolosuhteet","layer.incidents":"N\xe4yt\xe4 liikennetapahtumat","layers.choose":"Valitse n\xe4kym\xe4",minimap:"Minimap","scale.switchToImperial":"Vaihda maileihin","scale.switchToMetric":"Vaihda kilometreihin","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Loitonna","zoom.in":"L\xe4henn\xe4","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Julkinen liikenne","traffic.MISCELLANEOUS":"Erittelem\xe4t\xf6n syy","traffic.ACCIDENT":"Onnettomuus","traffic.OTHER_NEWS":"Muu tapahtuma","traffic.OTHER":"Muu tapahtuma","traffic.PLANNED_EVENT":"Suunniteltu tapahtuma","traffic.ROAD_HAZARD":"Vaara tiell\xe4","traffic.ROAD_CLOSURE":"Tie suljettu","traffic.WEATHER":"S\xe4\xe4","traffic.CONGESTION":"Ruuhka","traffic.CONSTRUCTION":"Rakennusty\xf6","traffic.DISABLED_VEHICLE":"Pys\xe4htynyt ajoneuvo","traffic.LANE_RESTRICTION":"Kaista rajoitus","traffic.from":"Alkamisaika:","traffic.until":"Arvioitu p\xe4\xe4ttymisaika:","distance.measurement":"Measure distance"}),Rv("pt-BR",{"layers.normal":"Exibi\xe7\xe3o do mapa","layers.satellite":"Sat\xe9lite","layers.terrain":"Terreno","layer.transit":"Transporte p\xfablico","layer.traffic":"Condi\xe7\xf5es do tr\xe2nsito","layer.incidents":"Mostrar incidentes no tr\xe2nsito","layers.choose":"Escolher exibi\xe7\xe3o",minimap:"Minimap","scale.switchToImperial":"Mudar para milhas","scale.switchToMetric":"Mudar para km","scale.km":"km","scale.m":"m","scale.mi":"milhas","scale.ft":"p\xe9s","zoom.out":"Menos zoom","zoom.in":"Mais zoom","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transporte p\xfablico","traffic.MISCELLANEOUS":"Miscel\xe2nea","traffic.ACCIDENT":"Acidente","traffic.OTHER_NEWS":"Outras not\xedcias","traffic.OTHER":"Outras not\xedcias","traffic.PLANNED_EVENT":"Evento planejado","traffic.ROAD_HAZARD":"Risco na estrada","traffic.ROAD_CLOSURE":"Estrada fechada","traffic.WEATHER":"Clima","traffic.CONGESTION":"Congestionamento","traffic.CONSTRUCTION":"Constru\xe7\xe3o","traffic.DISABLED_VEHICLE":"Ve\xedculo incapacitado","traffic.LANE_RESTRICTION":"Restri\xe7\xe3o de pista","traffic.from":"Hora de in\xedcio:","traffic.until":"Tempo final estimado:","distance.measurement":"Measure distance"}),Rv("zh-CN",{"layers.normal":"\u5730\u56fe\u89c6\u56fe","layers.satellite":"\u536b\u661f","layers.terrain":"\u5730\u5f62","layer.transit":"\u516c\u5171\u4ea4\u901a","layer.traffic":"\u4ea4\u901a\u60c5\u51b5","layer.incidents":"\u663e\u793a\u4ea4\u901a\u4e8b\u4ef6","layers.choose":"\u9009\u62e9\u89c6\u56fe",minimap:"Minimap","scale.switchToImperial":"\u5207\u6362\u4e3a\u300c\u82f1\u91cc\u300d","scale.switchToMetric":"\u5207\u6362\u4e3a\u300c\u516c\u91cc\u300d","scale.km":"\u516c\u91cc","scale.m":"\u7c73","scale.mi":"\u82f1\u91cc","scale.ft":"\u82f1\u5c3a","zoom.out":"\u7f29\u5c0f","zoom.in":"\u653e\u5927","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"\u516c\u5171\u4ea4\u901a","traffic.MISCELLANEOUS":"\u7efc\u5408\u4e8b\u4ef6","traffic.ACCIDENT":"\u4ea4\u901a\u610f\u5916","traffic.OTHER_NEWS":"\u5176\u4ed6\u65b0\u95fb","traffic.OTHER":"\u5176\u4ed6\u65b0\u95fb","traffic.PLANNED_EVENT":"\u9884\u5b9a\u4e8b\u4ef6","traffic.ROAD_HAZARD":"\u9053\u8def\u5371\u9669","traffic.ROAD_CLOSURE":"\u9053\u8def\u5df2\u5173\u95ed","traffic.WEATHER":"\u5929\u6c14","traffic.CONGESTION":"\u5835\u585e","traffic.CONSTRUCTION":"\u65bd\u5de5","traffic.DISABLED_VEHICLE":"\u8f66\u8f86\u629b\u951a","traffic.LANE_RESTRICTION":"\u8f66\u9053\u9650\u5236","traffic.from":"\u5f00\u59cb\u65f6\u95f4\uff1a","traffic.until":"\u9884\u8ba1\u7ed3\u675f\u65f6\u95f4\uff1a","distance.measurement":"Measure distance"}),Rv("es-ES",{"layers.normal":"Mapa","layers.satellite":"Sat\xe9lite","layers.terrain":"Terreno","layer.transit":"Transporte p\xfablico","layer.traffic":"Estado del tr\xe1fico","layer.incidents":"Mostrar incidentes de tr\xe1fico","layers.choose":"Elija una vista",minimap:"Minimap","scale.switchToImperial":"Cambiar a millas","scale.switchToMetric":"Cambiar a km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Alejar","zoom.in":"Acercar","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transporte p\xfablico","traffic.MISCELLANEOUS":"Varios","traffic.ACCIDENT":"Accidente","traffic.OTHER_NEWS":"M\xe1s noticias","traffic.OTHER":"M\xe1s noticias","traffic.PLANNED_EVENT":"Acto programado","traffic.ROAD_HAZARD":"Riesgo en carretera","traffic.ROAD_CLOSURE":"Carretera cerrada","traffic.WEATHER":"Tiempo","traffic.CONGESTION":"Atasco","traffic.CONSTRUCTION":"Construcci\xf3n","traffic.DISABLED_VEHICLE":"Veh\xedculo averiado","traffic.LANE_RESTRICTION":"Restricci\xf3n de carril","traffic.from":"Inicio:","traffic.until":"Finalizaci\xf3n estimada:","distance.measurement":"Measure distance"}),Rv("fr-FR",{"layers.normal":"Carte","layers.satellite":"Satellite","layers.terrain":"Terrain","layer.transit":"Transports publics","layer.traffic":"Conditions de circulation","layer.incidents":"Afficher les incidents de circulation","layers.choose":"Choisir la vue",minimap:"Minimap","scale.switchToImperial":"Passer en miles","scale.switchToMetric":"Passer en km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Zoom arri\xe8re","zoom.in":"Zoom avant","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transports publics","traffic.MISCELLANEOUS":"Divers","traffic.ACCIDENT":"Accident","traffic.OTHER_NEWS":"Autre","traffic.OTHER":"Autre","traffic.PLANNED_EVENT":"\xc9v\xe9nement pr\xe9vu","traffic.ROAD_HAZARD":"Danger routier","traffic.ROAD_CLOSURE":"Chauss\xe9e ferm\xe9e","traffic.WEATHER":"M\xe9t\xe9o","traffic.CONGESTION":"Embouteillage","traffic.CONSTRUCTION":"Travaux","traffic.DISABLED_VEHICLE":"V\xe9hicule en panne","traffic.LANE_RESTRICTION":"Restriction de voie","traffic.from":"Date ou heure de d\xe9but:","traffic.until":"Date et heure de fin estim\xe9es:","distance.measurement":"Measure distance"}),Rv("pl-PL",{"layers.normal":"Widok mapy","layers.satellite":"Satelita","layers.terrain":"Teren","layer.transit":"Transport publiczny","layer.traffic":"Warunki drogowe","layer.incidents":"Poka\u017c zdarzenia drogowe","layers.choose":"Wybierz widok",minimap:"Minimap","scale.switchToImperial":"Zmie\u0144 na mile","scale.switchToMetric":"Zmie\u0144 na km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Oddal","zoom.in":"Przybli\u017c","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transport publiczny","traffic.MISCELLANEOUS":"Inne zdarzenie","traffic.ACCIDENT":"Wypadek","traffic.OTHER_NEWS":"Inne wiadomo\u015bci","traffic.OTHER":"Inne wiadomo\u015bci","traffic.PLANNED_EVENT":"Zdarzenie planowane","traffic.ROAD_HAZARD":"Niebezpiecze\u0144stwo na drodze","traffic.ROAD_CLOSURE":"Jezdnia zamkni\u0119ta","traffic.WEATHER":"Pogoda","traffic.CONGESTION":"Korek","traffic.CONSTRUCTION":"Budowa","traffic.DISABLED_VEHICLE":"Uszkodzony pojazd","traffic.LANE_RESTRICTION":"Ograniczenie pasa ruchu","traffic.from":"Data rozpocz\u0119cia:","traffic.until":"Przybli\u017cona data zako\u0144czenia:","distance.measurement":"Measure distance"}),Rv("de-DE",{"layers.normal":"Kartenansicht","layers.satellite":"Satellit","layers.terrain":"Gel\xe4nde","layer.transit":"\xd6ffentliche Verkehrsmittel","layer.traffic":"Verkehrslage","layer.incidents":"Verkehrsst\xf6rungen anzeigen","layers.choose":"Ansicht ausw\xe4hlen",minimap:"Minimap","scale.switchToImperial":"Umrechnung in Meilen","scale.switchToMetric":"Umrechnung in Kilometer","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Verkleinern","zoom.in":"Vergr\xf6\xdfern","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"\xd6ffentliche Verkehrsmittel","traffic.MISCELLANEOUS":"Diverse","traffic.ACCIDENT":"Unfall","traffic.OTHER_NEWS":"Anderes Ereignis","traffic.OTHER":"Anderes Ereignis","traffic.PLANNED_EVENT":"Geplantes Ereignis","traffic.ROAD_HAZARD":"Verkehrshindernis","traffic.ROAD_CLOSURE":"Fahrbahn gesperrt","traffic.WEATHER":"Wetter","traffic.CONGESTION":"Verkehrsstau","traffic.CONSTRUCTION":"Baustelle","traffic.DISABLED_VEHICLE":"Liegengebliebenes Fahrzeug","traffic.LANE_RESTRICTION":"Fahrstreifensperrung","traffic.from":"Beginn:","traffic.until":"Voraussichtliches Ende:","distance.measurement":"Measure distance"}),Rv("tr-TR",{"layers.normal":"Harita g\xf6r\xfcn\xfcm\xfc","layers.satellite":"Uydu","layers.terrain":"Arazi","layer.transit":"Toplu ula\u015f\u0131m","layer.traffic":"Trafik durumlar\u0131","layer.incidents":"Trafik olaylar\u0131n\u0131 g\xf6ster","layers.choose":"G\xf6r\xfcn\xfcm se\xe7",minimap:"Minimap","scale.switchToImperial":"Mile d\xf6n\xfc\u015ft\xfcr","scale.switchToMetric":"Kilometreye d\xf6n\xfc\u015ft\xfcr","scale.km":"km","scale.m":"m","scale.mi":"mil","scale.ft":"ft","zoom.out":"Uzakla\u015ft\u0131r","zoom.in":"Yak\u0131nla\u015ft\u0131r","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Toplu ula\u015f\u0131m","traffic.MISCELLANEOUS":"\xc7e\u015fitli","traffic.ACCIDENT":"Kaza","traffic.OTHER_NEWS":"Di\u011fer haberler","traffic.OTHER":"Di\u011fer haberler","traffic.PLANNED_EVENT":"Planl\u0131 etkinlik","traffic.ROAD_HAZARD":"Yol tehlikesi","traffic.ROAD_CLOSURE":"Yol kapal\u0131","traffic.WEATHER":"Hava durumu","traffic.CONGESTION":"Yo\u011funluk","traffic.CONSTRUCTION":"Yol \xe7al\u0131\u015fmas\u0131","traffic.DISABLED_VEHICLE":"Ara\xe7 ar\u0131zas\u0131","traffic.LANE_RESTRICTION":"\u015eerit k\u0131s\u0131tlamas\u0131","traffic.from":"Ba\u015flang\u0131\xe7 zaman\u0131:","traffic.until":"Tahmini biti\u015f zaman\u0131:","distance.measurement":"Measure distance"}),Rv("it-IT",{"layers.normal":"Vista mappa","layers.satellite":"Satellite","layers.terrain":"Terreno","layer.transit":"Mezzi pubblici","layer.traffic":"Condizioni del traffico","layer.incidents":"Mostra incidenti stradali","layers.choose":"Scegli vista",minimap:"Minimap","scale.switchToImperial":"Passa a miglia","scale.switchToMetric":"Passa a km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Zoom indietro","zoom.in":"Zoom avanti","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Mezzi pubblici","traffic.MISCELLANEOUS":"Varie","traffic.ACCIDENT":"Incidente","traffic.OTHER_NEWS":"Altre notizie","traffic.OTHER":"Altre notizie","traffic.PLANNED_EVENT":"Evento pianificato","traffic.ROAD_HAZARD":"Strada dissestata","traffic.ROAD_CLOSURE":"Strada chiusa","traffic.WEATHER":"Maltempo","traffic.CONGESTION":"Ingorgo","traffic.CONSTRUCTION":"Lavori in corso","traffic.DISABLED_VEHICLE":"Veicolo in panne","traffic.LANE_RESTRICTION":"Restrizione di corsia","traffic.from":"Ora di inizio:","traffic.until":"Ora di fine stimata:","distance.measurement":"Measure distance"}),Rv("en-US",{"layers.normal":"Map view","layers.satellite":"Satellite","layers.terrain":"Terrain","layer.transit":"Public transport","layer.traffic":"Traffic conditions","layer.incidents":"Show traffic incidents","layers.choose":"Choose view",minimap:"Minimap","scale.switchToImperial":"Change to miles","scale.switchToMetric":"Change to km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Zoom out","zoom.in":"Zoom in","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Public transport","traffic.MISCELLANEOUS":"Miscellaneous","traffic.ACCIDENT":"Accident","traffic.OTHER_NEWS":"Other news","traffic.OTHER":"Other news","traffic.PLANNED_EVENT":"Planned event","traffic.ROAD_HAZARD":"Road hazard","traffic.ROAD_CLOSURE":"Roadway closed","traffic.WEATHER":"Weather","traffic.CONGESTION":"Congestion","traffic.CONSTRUCTION":"Construction","traffic.DISABLED_VEHICLE":"Disabled vehicle","traffic.LANE_RESTRICTION":"Lane restriction","traffic.from":"Start time:","traffic.until":"Estimated end time:","distance.measurement":"Measure distance"}),t("H.ui.i18n.Localization",Uv),Uv.prototype.zm=function(){return this.a},Uv.prototype.getLocale=Uv.prototype.zm,Uv.prototype.sm=function(){return Object.keys(this.b)},Uv.prototype.getKeys=Uv.prototype.sm,Uv.prototype.Nf=function(e){return!(!this.b||!this.b[e])},Uv.prototype.hasKey=Uv.prototype.Nf,Uv.prototype.translate=function(e){var n=this.b[e];if(!Cc(n))throw Error("Translation missing for key '"+e+"'.");return n},Uv.prototype.translate=Uv.prototype.translate,u(Vv,Ru),t("H.ui.ScaleBar",Vv),Vv.prototype.X=function(e,n){Ru.prototype.renderInternal.call(this,e,n),e.innerHTML='<svg height="12" version="1.1" xmlns="http://www.w3.org/2000/svg"><polyline style="fill:none; stroke:white; stroke-width:4" points="2,2 2,10 98,10 98,2"/><polyline style="fill:none; stroke:black; stroke-width:2" points="2,2 2,10 98,10 98,2"/></svg><div style="padding: 0 0 0 10px"></div>',e.style.direction="ltr",this.c=e.firstChild,this.b=(n=this.c.childNodes)[0],this.g=n[1],this.i=e.lastChild,this.l=ev.METRIC,this.s=A(function(r){this.dc()||(this.dispatchEvent("toggleunitsystem"),r.preventDefault())},this),this.u=A(function(r){r.preventDefault()},this),Bu(e,"start",this.u),Bu(e,"end",this.s),this.jc(this.pa().translate("scale.switchToImperial")),this.update()},Vv.prototype.renderInternal=Vv.prototype.X,Vv.prototype.Ia=function(e){this.map&&this.map.removeEventListener("mapviewchange",this.update),e&&e.addEventListener("mapviewchange",this.update),Ru.prototype.Ia.apply(this,arguments)},Vv.prototype.setMap=Vv.prototype.Ia,Vv.prototype.capture=function(e,n,r){var d=this.N(),m=d.ownerDocument,g=m.createElement("canvas"),v=g.getContext("2d"),w=m.createElementNS("http://www.w3.org/2000/svg","svg"),k=m.createElementNS("http://www.w3.org/2000/svg","foreignObject"),j=lf(d,m,!1);m=parseFloat(d.offsetWidth)+1;var G=parseFloat(d.offsetHeight),q=m*e;e*=G,g.width=q,g.height=e,w.setAttribute("xmlns","http://www.w3.org/2000/svg"),w.setAttribute("width",q),w.setAttribute("height",e),w.setAttribute("viewBox","0 0 "+m+" "+G),k.setAttribute("width","100%"),k.setAttribute("height","100%"),w.appendChild(k),j.setAttribute("width","100%"),j.setAttribute("height","100%"),j.setAttribute("xmlns","http://www.w3.org/1999/xhtml");var _t=window.getComputedStyle(d);"box-shadow display align-items font font-family font-size height text-shadow direction".split(" ").forEach(function(_r){j.style.setProperty(_r,_t.getPropertyValue(_r))}),k.appendChild(j),new tf("image",d=bf(w.outerHTML)).then(function(_r){v.drawImage(_r,0,0),n(g)},r)},Vv.prototype.capture=Vv.prototype.capture,Vv.prototype.Qe=function(e){this.l=e,this.jc("imperial"===e?this.pa().translate("scale.switchToMetric"):this.pa().translate("scale.switchToImperial")),this.update()},Vv.prototype.onUnitSystemChange=Vv.prototype.Qe,Vv.prototype.update=function(){var e;if(this.N()){this.c=this.c,this.b=this.b;var n=this.m,r=0,d=this.map;if(d){var m=Math.round(.5*d.b.width),g=Math.round(.5*d.b.height);(e=d.Pa(m,g))&&(d=d.Pa(m+1,g))&&(r=100*e.Wa(d))}r&&(this.l===ev.IMPERIAL?1609.344>r?(d=r/.3048006,e=this.pa().translate("scale.ft")):(d=r/1609.344,e=this.pa().translate("scale.mi")):1e3>r?(d=r,e=this.pa().translate("scale.m")):(d=r/1e3,e=this.pa().translate("scale.km")),(d=(r=Math.pow(10,Math.floor(Math.log(d)/Math.LN10)))/d*100)<n/5?(r*=5,d*=5):d<n/2?(r*=2,d*=2):d>n&&(r/=2,d/=2),d=Math.round(d),this.c.setAttribute("width",d),this.i.textContent=r+" "+e,this.b.points.getItem(2).x=this.g.points.getItem(2).x=this.b.points.getItem(3).x=this.g.points.getItem(3).x=d-2)}},u(Wv,Y),t("H.ui.context.Item",Wv),Wv.prototype.c=function(e){var n=this.b,r=n.callback;r&&!n.isDisabled()&&(this.dispatchEvent("click"),r(e))},Wv.prototype.X=function(){var e=this,n=this.N();Ee(n,"click",this.c),n.addEventListener("keyup",function(r){13==r.keyCode&&e.c(r)}),this.a()},Wv.prototype.renderInternal=Wv.prototype.X,Wv.prototype.a=function(){var e=this.N(),n=this.b;n.callback?(this.Ka("clickable"),e.setAttribute("tabindex","0")):(this.kb("clickable"),e.removeAttribute("tabindex")),n.isDisabled()?this.Ka("disabled"):this.kb("disabled"),n=n.getLabel(),su.textContent=n,e.innerHTML=su.innerHTML.split("\n").join("<br/>")},Wv.prototype.o=function(){Y.prototype.o.call(this),this.b.removeEventListener("update",this.a)},u(Xv,Qu),t("H.ui.context.Menu",Xv),Xv.prototype.X=function(){Qu.prototype.X.apply(this,arguments),this.c.forEach(function(e){e===Se?e=new Y("div","H_context_menu_item_separator"):(e=new Wv(e)).addEventListener("click",this.g.bind(this)),this.Ja(e)},this),Ee(this.N(),["mousedown","touchstart","pointerdown","wheel"],function(e){e.stopPropagation()})},Xv.prototype.renderInternal=Xv.prototype.X,Xv.prototype.setPosition=function(e,n){if(this.b){var r=this.N(),d=r.offsetWidth,m=r.offsetHeight,g=this.b,v=g.b.width;e+d>v&&e>v/2&&(e-=d),n+m>(g=g.b.height)&&n>g/2&&(n-=m),lu(r,e,n)}},Xv.prototype.setPosition=Xv.prototype.setPosition,Xv.prototype.g=function(){this.b&&this.b.dispatchEvent(new ud("contextmenuclose",this.b))},Xv.prototype.Ia=function(e){this.b=e},Xv.prototype.setMap=Xv.prototype.Ia,u(Yv,Y),t("H.ui.InfoBubble",Yv),Yv.prototype.a=null,Yv.prototype.ya=function(){return this.m},Yv.prototype.setPosition=function(e){this.m=ng(e),this.update()},Yv.prototype.setPosition=Yv.prototype.setPosition,Yv.prototype.Ia=function(e){this.a=e},Yv.prototype.X=function(e,n){this.l=yu(n,"div","H_ib_body"),this.tailEl_=yu(n,"div","H_ib_tail"),this.c=yu(n,"div","H_ib_close H_btn",'<svg version="1.1" class="H_icon" viewBox="0 0 12 12"><path d="m8.12 6 3.66-3.66c.29-.29.29-.76 0-1.05l-1.06-1.06c-.29-.29-.76-.29-1.05 0l-3.66 3.66-3.66-3.66c-.29-.29-.76-.29-1.05 0l-1.06 1.06c-.29.29-.3.76 0 1.05l3.66 3.66-3.66 3.66c-.29.29-.29.76 0 1.05l1.06 1.06c.29.29.76.29 1.05 0l3.66-3.66 3.66 3.66c.29.29.76.29 1.05 0l1.06-1.06c.29-.29.3-.76 0-1.05z"></path></svg>'),this.b=yu(n,"div","H_ib_content","&nbsp;"),this.l.appendChild(this.c),this.l.appendChild(this.b),Bu(this.c,"start",this.u),this.a.c.addEventListener("sync",this.update),this.a.b.addEventListener("sync",this.update),e.appendChild(this.l),e.appendChild(this.tailEl_),this.$e(this.g)},Yv.prototype.renderInternal=Yv.prototype.X,Yv.prototype.i=function(){this.s||(this.s=setTimeout(this.update,0))},Yv.prototype.update=function(){var r,e=this.N(),n=this.a,d="none";if(this.s=0,n&&e&&this.getState()===Zv.OPEN){if(r=n.Da(this.m)){var m=r.x;r=r.y,(m>=-(n=n.b.width)||m<=2*n||r>=-n||r<=2*n)&&(d="",mu?(e.style.left=m-n+"px",e.style.top=r+"px"):lu(e,m,r))}e.style.display=d,""===d&&(e.style.visibility="visible")}};var Zv={OPEN:"open",CLOSED:"closed"};function $v(e,n){this.b=e,this.a=null,this.f=0,this.c=22,this.i=n,this.Xf=A(this.Xf,this),this.Sg=A(this.Sg,this),(e=this.b.Lb()).addEventListener("mapviewchange",this.bo,!1,this),this.g=e.f.type,(e=e.a).addEventListener("add",this.Sn,!1,this),e.addEventListener("remove",this.Tn,!1,this)}function aw(e,n,r){var d=n.ca();d&&void 0!==r&&r&&d.removeEventListener("tap",e.Xf),n?(d.addEventListener("tap",e.Xf),e.f=d.min,e.c=d.max):(e.f=0,e.c=22)}function bw(e){return window.H.service&&(e.ca()instanceof window.H.service.traffic.incidents.Provider||e.ca()instanceof window.H.service.trafficVectorTile.Provider&&"incident"===e.ca().s().b)}function cw(e,n){try{return e.Qf=!0,new e(n)}finally{e.Qf=!1}}function dw(e,n){var r=e.N(),d=this;F.call(this),this.c=e,this.i=r.ownerDocument,this.f={},this.b=[],this.S=yu(this.i,"div","H_ui"),this.setDirection(),this.P=A(function(m){this.m.put(m.target,m.target.Mc)},this),this.addEventListener("alignmentchange",this.P),this.L=A(function(){this.fl()},this),this.addEventListener("toggleunitsystem",this.L),this.S.addEventListener("contextmenu",this.J,!1),this.S.addEventListener("MSHoldVisual",this.J,!1),this.c.addEventListener("contextmenu",this.D,!1,this),this.c.addEventListener("contextmenuclose",this.u,!1,this),this.c.tb(this.F.bind(this)),this.a=null,this.s=-1,this.m=new Uu(this.S,this.i),this.g=ev.METRIC,ew(this,"en-US"),n&&fw(this,n),r.appendChild(this.S),x.setTimeout(function(){d.m.update()},1)}function ew(e,n){if(Cc(n))var r=n;else{if(!(n instanceof Uv))throw Error("The locale parameter must be a string or a H.ui.i18n.Localization object.");r=n.a;var d=n}if(!r)throw Error("No locale was defined.");if(d)e.l=d;else{if(!(0<=Ov.indexOf(r)))throw Error("Locale ["+r+"] is not supported.");e.l=new Uv(r)}}function fw(e,n){var r,d;n.unitSystem&&e.vg(n.unitSystem),(d=n.locale)&&ew(e,d),(r=n.zoom)&&e.Bd("zoom",new Su(Ea(r)?r:null)),(r=n.zoomrectangle)&&e.Bd("zoomrectangle",new Tv(Ea(r)?r:null)),(r=n.mapsettings)&&e.Bd("mapsettings",new Ev(Ea(r)?r:null)),(r=n.scalebar)&&e.Bd("scalebar",new Vv(Ea(r)?r:null)),(r=n.distancemeasurement)&&e.Bd("distancemeasurement",new wv(Ea(r)?r:null))}function hw(e,n,r,d){for(var m=e,g=0;m&&g<n.length;g++)m=m[n[g]];if(m&&m!==e)return d.push(e={label:r,layer:m}),e}function gw(e,n,r){var d=[],m=[],g=n.raster;if(e===kk.P2D&&g){if(hw(n,["raster","normal","map"],"layers.normal",d),hw(n,["raster","satellite","map"],"layers.satellite",d),hw(n,["raster","terrain","map"],"layers.terrain",d),r)for(var v in g)if(g[v]&&g[v].map===r){var w=v;break}hw(n,["raster","normal","trafficincidents"],"layer.incidents",m),hw(n,["raster",w,"transit"],"layer.transit",m)}else hw(n,["vector","normal","map"],"layers.normal",d),e===kk.WEBGL?(hw(n,["raster","satellite","map"],"layers.satellite",d),hw(n,["vector","normal","traffic"],"layer.traffic",m),hw(n,["vector","normal","trafficincidents"],"layer.incidents",m)):(r=hw(n,["hybrid","day","vector"],"",[]),(g=hw(n,["hybrid","day","raster"],"layers.satellite",d)).layer=[g.layer,r.layer],window.H.service&&(r=n.vector.traffic.map.ca().s().v(),n=cw(window.H.service.trafficVectorTile.Service,{baseUrl:r,layer:"flow"}),r=cw(window.H.service.trafficVectorTile.Service,{baseUrl:r,layer:"incident"}),w=Ao()+"/harp/oslo/normal.day.json",g=new H.map.render.harp.Style(w),w=new H.map.render.harp.Style(w),n=n.createLayer(g,{engineType:e}),e=r.createLayer(w,{engineType:e}),m.push({label:"layer.traffic",layer:n},{label:"layer.incidents",layer:e})));return{alignment:"bottom-right",baseLayers:d,layers:m}}function iw(e,n){if(n=n||{},!(e&&e instanceof sl))throw Error("Base layer is mandatory for overview UI element");Ru.call(this),this.c=new gv({label:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="H_icon"><g fill-rule="evenodd" transform="translate(2 2)"><rect width="9" height="9" x="10" y="10"/><rect class="H_icon_stroke" width="18" height="18" x="1" y="1" fill="none" stroke="#000" stroke-width="2" rx="2"/></g></svg>',onStateChange:A(this.g,this)}),this.Ja(this.c),this.b=new jw(e,n.zoomDelta,n.scaleX,n.scaleY),this.Vb(n.alignment||"right-bottom"),this.Ja(this.b)}function jw(e,n,r,d){this.l=e,"number"==typeof n&&(this.jl=n),"number"==typeof r&&(this.tk=r),"number"==typeof d&&(this.uk=d),Qu.call(this,"div","H_overview")}function lw(e){!e.zd&&kw(e),e.kb("H_overview_active"),e.b.removeEventListener("mapviewchange",e.Fi,!1,e)}function kw(e,n){var r=e.b.b.element,d=e.N().style,m=r.offsetWidth/e.tk/10;r=r.offsetHeight/e.uk/10;var g=e.g.style;n?(d.width=m+"em",d.height=r+"em",g.width=m+"em",g.height=r+"em"):d.width=d.height="0em",e.c.b.resize()}function mw(e,n){if(!e)throw new D(mw,0,e);mw.j.constructor.call(this,e),this.b={},this.c=!(!n||!n.oc),this.f=nw++}Yv.State=Zv,Yv.prototype.C=Zv.OPEN,Yv.prototype.getState=function(){return this.C},Yv.prototype.getState=Yv.prototype.getState,Yv.prototype.O=function(e){e!==this.C&&(this.C=e,this.dispatchEvent("statechange")),(e=this.N())&&(this.C===Zv.OPEN?(e.style.display="block",e.style.visibility="hidden",this.i()):e.style.display="none")},Yv.prototype.setState=Yv.prototype.O,Yv.prototype.close=function(){this.O(Zv.CLOSED)},Yv.prototype.close=Yv.prototype.close,Yv.prototype.open=function(){this.O(Zv.OPEN)},Yv.prototype.open=Yv.prototype.open,Yv.prototype.Ul=function(){return this.b||null},Yv.prototype.getContentElement=Yv.prototype.Ul,Yv.prototype.$e=function(e){if(e){if("string"!=typeof e&&("number"!=typeof e.nodeType||"string"!=typeof e.nodeName))throw Error("InfoBubble content must be a string or HTML node.");this.g=e}else this.g="";this.N()&&(this.g?(this.b.innerHTML="","string"==typeof this.g?this.b.innerHTML=e:"number"==typeof e.nodeType&&"string"==typeof e.nodeName&&this.b.appendChild(e)):this.b.innerHTML="&nbsp;",this.i())},Yv.prototype.setContent=Yv.prototype.$e,Yv.prototype.o=function(){this.close(),this.$e(""),this.c&&Cu(this.c,"end",this.u),this.a&&(this.a.c.removeEventListener("sync",this.update),this.a.b.removeEventListener("sync",this.update)),Y.prototype.o.call(this)},p=$v.prototype,p.bo=function(e){var n=e.newValue.zoom;this.a&&e.modifiers&e.ZOOM&&(n<this.f||n>this.c)&&this.a.close()},p.Sn=function(e){bw(e=e.added)&&aw(this,e)},p.Tn=function(e){bw(e=e.removed)&&(this.a&&this.a.close(),aw(this,e,!0))},p.Xf=function(e){var n,r=this.g===kk.HARP;e.target&&(n=e.target.getData())&&0===e.currentPointer.button&&(r?(n=this.b.Lb().Pa(e.currentPointer.viewportX,e.currentPointer.viewportY),(r=e.target.getData()?e.target.getData().properties.id:null)&&this.i.requestIncidentById(r,{locationReferencing:"none",lang:this.b.pa().a},this.hl.bind(this,n),console.error)):(r=e.target.ga(),this.hl(r,n)),e.stopPropagation())},p.hl=function(e,n){if(this.g===kk.HARP){n=n.incidentDetails;var r=this.b.pa().a,d=n.type,m=d.split(/(?=[A-Z])/).join("_").toUpperCase();this.b.pa().Nf("traffic."+m)&&(d=this.b.pa().translate("traffic."+m)),e={position:e,title:d,description:n.description.value,startTime:new Date(n.startTime).toLocaleString(r).split(",").join(" "),endTime:new Date(n.endTime).toLocaleString(r).split(",").join(" ")}}else r=n.TRAFFIC_ITEM_TYPE_DESC.replace(" ","_"),e={position:e,title:r=this.b.pa().Nf("traffic."+r)?this.b.pa().translate("traffic."+r):n.TRAFFIC_ITEM_DESCRIPTION[n.TRAFFIC_ITEM_DESCRIPTION.length-1].value,description:n.TRAFFIC_ITEM_DESCRIPTION[0].value,startTime:n.START_TIME,endTime:n.END_TIME};this.Sg(e)},p.Sg=function(e){var n=e.position,r=e.title,d=e.description,m=e.startTime;e=e.endTime,this.a||(this.a=new Yv(n),this.a.Ka("H_tib"),this.b.Yi(this.a)),this.a.setPosition(n),this.a.$e('<div class="H_tib_content"><div class="H_rdo_title" dir="auto">{{title}}</div><div class="H_tib_desc" dir="auto"><span>{{desc}}</span><div class="H_tib_time"><span class="H_tib_left">{{traffic.from}}</span><span class="H_tib_right">{{from}}</span><br/><span class="H_tib_left">{{traffic.until}}</span><span class="H_tib_right">{{until}}</span></div></div>'.replace("{{title}}",r).replace("{{desc}}",d).replace("{{traffic.from}}",this.b.pa().translate("traffic.from")).replace("{{traffic.until}}",this.b.pa().translate("traffic.until")).replace("{{from}}",m).replace("{{until}}",e)),this.a.open()},u(dw,F),t("H.ui.UI",dw),dw.prototype.J=function(e){for(var n=e.target;n&&!/\bH_ib_content\b/.test(n.className);)n=n.parentNode;n||e.preventDefault()},dw.prototype.N=function(){return this.S},dw.prototype.getElement=dw.prototype.N,dw.prototype.Lb=function(){return this.c},dw.prototype.getMap=dw.prototype.Lb,dw.prototype.dn=function(){return this.g},dw.prototype.getUnitSystem=dw.prototype.dn,dw.prototype.vg=function(e){var r,n=this.f;if(e!==this.g)for(r in this.g=e,n)n[r]instanceof Ru&&n[r].onUnitSystemChange(this.g)},dw.prototype.setUnitSystem=dw.prototype.vg,dw.prototype.setDirection=function(e){this.S.setAttribute("dir",e||getComputedStyle(this.Lb().N()).direction)},dw.prototype.setDirection=dw.prototype.setDirection,dw.prototype.pa=function(){return this.l},dw.prototype.fl=function(){this.vg(this.g===ev.METRIC?ev.IMPERIAL:ev.METRIC)},dw.prototype.toggleUnitSystem=dw.prototype.fl,dw.prototype.Yi=function(e){var n=this.b.length,r=this.S;if(0>this.b.indexOf(e)){e.ka(this),e.Ia(this.c);var d=e.W(this.i);n=0<n?this.b[n-1].N().nextSibling:this.S.firstChild,r.insertBefore(d,n),this.b.push(e)}},dw.prototype.addBubble=dw.prototype.Yi,dw.prototype.D=function(e){var n=e.items;this.a&&this.u(),clearTimeout(this.s),this.s=x.setTimeout(function(){n.length&&(this.a=new Xv(n),this.S.insertBefore(this.a.W(this.i),this.S.firstChild),this.a.ka(this),this.a.Ia(this.c),this.a.setPosition(e.viewportX,e.viewportY))}.bind(this),0)},dw.prototype.u=function(){this.a&&(this.a.F(),this.a=null)},dw.prototype.jo=function(e){var n=this.b.indexOf(e);-1<n&&(e.ka(null),e.Ia(null),this.b.splice(n,1),this.S.removeChild(e.N()))},dw.prototype.removeBubble=dw.prototype.jo,dw.prototype.Ql=function(){return this.b},dw.prototype.getBubbles=dw.prototype.Ql,dw.prototype.Bd=function(e,n){if(this.Ce(e))throw Error("A control with name ["+e+"] is already registered.");n.ka(this),n.Ia(this.c),n.xa=this.l,n.W(this.i),n.onUnitSystemChange(this.g),this.f[e]=n},dw.prototype.addControl=dw.prototype.Bd,dw.prototype.lo=function(e){var n=this.Ce(e);if(!n)throw Error("Control ["+e+"] not found in this UI's controls.");return n.T(),n.ka(null),n.Ia(null),Du(n),delete this.f[e],n},dw.prototype.removeControl=dw.prototype.lo,dw.prototype.Ce=function(e){return this.f[e]},dw.prototype.getControl=dw.prototype.Ce,dw.prototype.o=function(){for(var e in this.f)ju.hasOwnProperty.call(this.f,e)&&this.f[e].F();this.b.forEach(function(n){n.F()}),(e=this.S.parentNode)&&e.removeChild(this.S),F.prototype.o.call(this),delete this.S},dw.prototype.capture=function(e,n,r,d){var m=this.Ce("scalebar"),g=e.getContext("2d"),v=e.width,w=e.height,k=this.c.s,j=5+(k?k.N().childNodes[1].offsetHeight:0);m&&m.wc()?m.capture(n,function(G){g.drawImage(G,v-G.width-5*n,w-G.height-j*n),r(e)},d):r(e)},dw.prototype.capture=dw.prototype.capture,dw.createDefault=function(e,n,r){var d=e.f.type;if(r=new dw(e,{unitSystem:ev.METRIC,zoom:{alignment:"right-bottom"},mapsettings:gw(d,n,e.g),scalebar:{alignment:"bottom-right"},locale:r||"en-US"}),d===kk.P2D){var m=r.Ce("mapsettings"),g=function(){if(m.Lb()){var j=gw(d,n,e.g);Fv(m,j.baseLayers,j.layers)}};e.addEventListener(e.A.lf,g),r.tb(function(){e.removeEventListener(e.A.lf,g)}),m.tb(function(){e.removeEventListener(e.A.lf,g)})}if(d===kk.HARP){if(window.H.service){var v=n.vector.traffic.map.ca().s().v(),w=new window.H.service.Url(v.i,v.c.split(".").slice(-2).join(".")),k=(w=cw(window.H.service.traffic.Service7,{platformBaseUrl:w})).v().getQuery();k.apikey=v.getQuery().apikey,w.v().bf(k),new $v(r,w)}}else new $v(r);return r},dw.prototype.Bo=function(){},dw.prototype.setTrafficIncidentsHandle=dw.prototype.Bo,u(iw,Ru),t("H.ui.Overview",iw),iw.prototype.ud=function(e){return this.b.ud(e),this},iw.prototype.setBaseLayer=iw.prototype.ud,iw.prototype.g=function(e){e.target.getState()===Fu.DOWN?(kw(e=this.b,!0),e.Fi(),e.Ka("H_overview_active"),e.b.addEventListener("mapviewchange",e.Fi,!1,e)):lw(this.b)},iw.prototype.X=function(e,n){Ru.prototype.renderInternal.call(this,e,n),this.c.N().style.float=this.Mc.match("right")?"right":"left",this.b.Ia(this.map),this.c.jc(this.pa().translate("minimap"))},iw.prototype.renderInternal=iw.prototype.X,iw.prototype.o=function(){this.b.F(),Y.prototype.o.call(this)},u(jw,Ru),jw.prototype.ud=function(e){this.c.ud(e)},jw.prototype.X=function(e,n){zu(e,n=yu(n,"div","H_overview_map")),this.g=n},jw.prototype.renderInternal=jw.prototype.X,jw.prototype.renderInternal=jw.prototype.X,p=jw.prototype,p.jl=3,p.tk=5,p.uk=5,p.Ia=function(e){this.b=e,this.c=new U(this.g,this.l,{pixelRatio:this.b.Xa(),engineType:this.b.f.type}),this.c.s.N().style.display="none",this.s=this.c.c,this.i=this.b.c},p.Fi=function(e){e&&e.modifiers&e.SIZE&&kw(this,!0),(e=this.i.jb()).zoom-=this.jl,this.s.Wb(e)},p.o=function(){jw.j.o.call(this),lw(this),this.c.F(),this.c=this.s=this.i=this.b=this.l=this.g=null},t("H.ui.buildInfo",function(){return Hf("H-ui","1.49.1","74e5afb",{region:"row"})}),u(mw,Cm);var nw=0;function ow(e,n){n=n||{},C(e,tl,ow,0),ow.j.constructor.call(this,e),this.oc=!!n.oc,this.c=n.fb||0,this.a=[],this.b={}}mw.prototype.W=function(e,n,r,d,m,g){var v=Ad(d),w=this.eb,k=v+(r.exp-w.pixelProjection.exp),j=w.min,G=w.max;d=w.tileSize;var q=w.ca().g,_t=this.lb,_r=_t.Tc(),_s=_t.yb().w,ga=r.w,_c=r.x,_u=r.y,_f={};if(v<j||v>G)return wk.DONE;for(e=(m=w.requestTiles(e,k,m,g,this.f)).total,g=(m=m.tiles).length,this.g=r,this.l=n,this.a=k,_r!==q&&_t.ic(q),r=d=d*ga/(Gd(2,k)*d),this.c||(d%1&&(_c/=ga=r/(d=Bd(d)),_u/=ga,ga=Gd(2,k)*d),_c=Bd(_c),_u=Bd(_u)),this.i=r,k=-d,v=_s+d,w=0;w<g;w++){if((j=(_s=m[w]).data)&&j.tagName){for(_t.Oc(j,r=n.x-(_c-_s.x*d),q=n.y-(_u-_s.y*d),d,d),_r=r;(_r-=ga)>k;)_t.Oc(j,_r,q,d,d);for(_r=r;(_r+=ga)<v;)_t.Oc(j,_r,q,d,d)}_f[this.a+"_"+_s.x+"_"+_s.y]=_s}return this.b=_f,g===e?wk.DONE:wk.PENDING},mw.prototype.Ea=function(e,n,r){var w,d=this.i,m=d/this.eb.tileSize,g=this.g,v=this.l;if(vc(this.a)&&g){e=g.x+(e-v.x),n=g.y+(n-v.y);var k=Bd(g.w/d),j=g=Bd(e/d);v=Bd(n/d),Dd(j)>=k&&(j%=k),0>j&&(j=k+j),(k=this.b[this.a+"_"+j+"_"+v])&&k.Ea&&(w=k.Ea((e-d*g)/m,(n-d*v)/m,r))}return w||hf},mw.prototype.Rd=function(){return"2d"},u(ow,Cm),ow.prototype.W=function(e,n,r,d,m,g){var v,k,w=this.eb;d-=this.c,this.a.length=0;var j=this.b;if(this.b=v={},d>=w.min&&d<=w.max){var G=w.sd(e,d,m,g),q=G.overlays;if(e=q.length)for(q.sort(ph),d=this.lb,m=this.oc,g=0;g<e;g++){var _t=(w=q[g]).K(),_r=r.ib(_t.Nb()),_s=r.ib(_t.Jb());_t=r.w,_r.x>=_s.x&&(_r.x-=_t),_r.x+=_t*=-((_r.x+_s.x)/_t>>1),_r.add(n),_s.x+=_t,_s.add(n),m||(_r.round(),_s.round()),(_t=j[k=w.cb()])?delete j[k]:_t={ho:w},v[k]=_t;var ga=_r.x,_c=_s.x,_u=_c-ga,_f=(_s=_s.y)-(_r=_r.y);d.ic(w.Tc()),d.Oc(w.Qc(),ga,_r,_u,_f),_t.Vg?_t.Vg.set(ga,_r,_c,_s):_t.Vg=new yk(ga,_r,_c,_s),this.a.push(_t)}}return!G||G.requested&&G.requested===G.total||!G.requested&&q.length===G.total?wk.DONE:wk.PENDING},ow.prototype.Ea=function(e,n,r){for(var g,w,d=this.a,m=d.length;m--;)if((g=d[m]).Vg.vf(e,n))if(g=g.ho,w)w.push(g);else if(w=[g],r)break;return w||hf},ow.prototype.Rd=function(){return"2d"},ow.prototype.o=function(){delete this.a,ow.j.o.call(this)},ow.prototype.disposeInternal=ow.prototype.o;var pw={lookAt:{zoom:{min:-8,max:24},tilt:{min:0,max:0},incline:{min:0,max:0},heading:{min:180,max:180}},interaction:{ZOOM:Nl.ZOOM,COORD:Nl.COORD},capture:!0};function qw(e,n){this.a=[],qw.j.constructor.apply(this,arguments)}function Z(e,n,r,d){Z.j.constructor.call(this,e,n,r,d),this.L=new J(0,0),(r=d.renderBaseBackground)&&(this.Xn=r.lower,this.Hn=r.higher),this.yn=!!d.enableSubpixelRendering,this.fd=rw,this.Af=0,this.Ed=this.ve=!1,this.g=new om,this.a=d=new wm,this.dd=A(this.dd,this),d.addEventListener(d.A.Cg,this.dd),this.Da=A(this.Da,this),this.aa=e=(d=e.element).ownerDocument.createElement("div"),e.style.position="absolute",e.style.width=e.style.height="100%",e.style.zIndex=0,d.insertBefore(e,d.firstChild),this.sj=new Tm(this.aa,this.oa),this.m=[],sw(this),this.Jh=A(Z.prototype.Jh,this),this.C=tw,this.ng(),this.zoom=uw(this,this.J.pb()+this.fb),this.Eb(),vw(this,n.jb().position,this.zoom),this.$a(),this.T()}t("H.map.render.p2d.capabilities",pw),u(qw,Gm),p=qw.prototype,p.rj=function(){return this.eb.Ec.apply(this.eb,arguments)},p.W=function(e,n,r,d,m,g,v){return this.a=[],qw.j.W.apply(this,arguments)},p.$j=1,p.Ek=function(e,n,r,d,m,g){var v=this.$j=d.Xa();m*=v,g*=v;var w=r.yb();n=w.w*v,w=w.h*v;var k=r.kd();this.oc?(m-=k.x*v,g-=k.y*v):(m=Ad(m-k.x*v),g=Ad(g-k.y*v)),d.Oc(r.Qc(),m,g,n,w),e.detail?e.detail.set(m,g,m+n,g+w):e.detail=new yk(m,g,m+n,g+w),this.a.push(e)},p.Ea=function(e,n,r){for(var g,v,w,d=this.a,m=d.length,k=hf,j=this.$j;m--&&!((v=(g=d[m]).detail).vf(e,n)&&(g=g.ik,(!(w=g.xb().c)||w.Of((e-v.left)/j,(n-v.top)/j,0))&&0>k.indexOf(g)&&(k===hf&&(k=[]),k.push(g),r))););return k},p.Rd=function(){return"2d"},p.o=function(){this.a=[],qw.j.o.call(this)},qw.prototype.disposeInternal=qw.prototype.o,u(Z,Jl),t("H.map.render.p2d.RenderEngine",Z),Z.prototype.type=Tl.P2D;var tw=2;function ww(e,n,r){return Dd(n=r-n)<e.b.w/2?n:n-e.b.w*r/Dd(r)}function sw(e){var n=e.c.La(),r=0,d=n.length;for([e.R={},e.u={},e.ta={},e.ea={}].forEach(function(m){m.Nc=[],m.ja=[]}),e.ab=e.c.La();r<d;r++)e.Pe(r,n[r]);e.Eb()}function Fw(e){var n=[];return(n=(n=(n=(n=n.concat(e.u.ja)).concat(e.R.ja)).concat(e.ta.ja)).concat(e.ea.ja)).filter(vc)}function zw(e,n){var r=Pl(e,Pl(e,n.zoom)+e.fb);return(e=Ql(e,n)).zoom=r,e}function vw(e,n,r){var d=e.b;d.Oa(r),e.s=d.projection.Pc(n),d.x=d.w*e.s.x,d.y=d.h*e.s.y}function Ew(e){return{w:(e=e.wa[2]).right-e.left,h:e.bottom-e.top}}function Gw(e){e.i&&e.i.sa()||Lk()-e.Nj<e.fd&&!e.Ad?e.Yn=Jk(e.Jh):(e.Ad&&(e.ce(),Hw(e)),e.C=tw)}function Hw(e,n){e.dispatchEvent({type:e.A.Vi,target:n||e})}function Lw(e,n,r){Bw(e,n*e.oa,r*e.oa),e.L.set(0,0),e.$a(),e.ha()}function Bw(e,n,r){var d=e.b;e=e.s,d.x=Zd(d.x+n,d.w),d.y=zd(0,yd(d.w,d.y+r)),e.x=d.x/d.w,e.y=d.y/d.h}function Cw(e,n,r,d){var m=e.oa,g=e.f.center;r===+r&&d===+d?(e.L.set(r=(r-g.x)*m,d=(d-g.y)*m),Bw(e,r,d),e.b.Oa(n),Bw(e,-r,-d)):(e.L.set(0,0),e.b.Oa(n)),e.zoom=n,e.$a(),e.ha()}function xw(e,n,r,d){var m=e.getCapabilities().lookAt.zoom.max,g=n.bb(),v=d||g;if(n.Rf()||r&&d)r=r===B?m:r;else{var w=new nj(e.b.projection);w.Oa(m);var k=w.ib(n.Nb()).round(),j=w.ib(n.Jb()).round();m=w.w,n.Bb()&&(k.x-=m),d?(g=w.ib(v),n=2*zd(g.x-k.x,j.x-g.x),k=2*zd(g.y-k.y,j.y-g.y)):(n=j.x-k.x,k=j.y-k.y,v=g),r===B&&(r=(g=e.wa[4]).right-g.left,g=g.bottom-g.top,r=Pl(e,r=-8+yd(Ed(r/n*m)/Od,Ed(g/k*m)/Od)-e.fb))}return{zoom:Bd(r),position:v}}function yw(e){Dw(e,!0),e.a.sa()&&e.vb(!0),e.g.sa()&&e.wb(!0),Dw(e,!0)}function Mw(e,n){if(n){var r={};r.Te=n.power,r.we=n.ease,r.duration=n.duration,e.l=r}}function uw(e,n){return Pl(e,Pl(e,n-e.fb)+e.fb)}function Ow(e,n){var r=e.s,d=e.b.projection.Pc(n.position),m=e.b.Zd(d),g=m.y;m=m.x;var v=n.zoom;n=(r=e.b.Zd(r)).y;var w=r.x;r=e.zoom;var k=e.a.zb(),j=e.a.a,G=e.a.b,q=0;if(m=ww(e,w,m),n=Fd((m-=w)*m+(g-=n)*g+(r=v-r)*r),0!==k&&0!==n){var _t=m/n,_r=g/n,_s=r/n,ga=k*k/(2*n);Aw(e,function(_c,_u){var _f;1!==_c?((_f=_s*(_u=(_c=k*_u-ga*_u*_u/2)-q))&&(_f=uw(e,e.zoom+_f),Cw(e,uw(e,_f),j,G)),Lw(e,Ad(_t*_u),Ad(_r*_u)),q=_c):(e.s=d,Cw(e,uw(e,v),j,G),e.$a(),e.ha())},2*n/k)}}function Nw(e,n,r){r=r||0,n.c&&Cw(e,uw(e,e.zoom+n.c*r),e.a.atX,e.a.atY),Lw(e,n.a*r,n.b*r)}function Aw(e,n,r,d,m){e.i&&e.i.sa()&&e.i.stop(!0),e.i=new Fm(e,n,r,d,m),e.i.start()}function Dw(e,n){e.i&&e.i.sa()&&e.i.stop(n)}Z.prototype.getState=function(){return this.C},Z.prototype.getState=Z.prototype.getState,Z.prototype.Kg=function(e){var n=this,r=e.b,d=e.newValue,m=e.modifiers;e=d.position;var v,g=d.bounds,w=this.zoom,k=this.s,j=0;if(m&ej.POSITION&&(v=n.b.ib(e)),m&ej.BOUNDS)d=xw(this,g.K(),m&ej.ZOOM?d.zoom:B,m&ej.POSITION?e:B),this.J.Wb(d,r);else{m&ej.POSITION||(v=n.b.ib(d.position));var G=v.x,q=v.y;yw(this),this.L.set(0,0);var _t=(d=zw(this,d)).zoom,_r=d.position;if(r){var _s=_t-w,ga={x:k.x,y:k.y};r=this.b.Zd(ga).x;var _c=this.b.projection.Pc(e);(_c.x!==this.s.x||_c.y!==this.s.y||_t!==this.zoom)&&(G=ww(this,r,G),Aw(this,function(_u){var _f=_u-j;if(_t!==w){v=n.b.Zd(_c);var _h=n.b.Zd(ga);G=ww(n,_h.x,v.x),q=v.y-_h.y}j=_u,Bw(n,G*_f,q*_f),Cw(n,w+=_s*_f),n.$a(),n.ha()},this.qa,function(){vw(n,_r,_t),Cw(n,_t),n.$a(_r),n.ha()},this.xa))}else Dw(this),vw(this,_r,_t),Cw(this,_t),this.$a(_r);this.ha()}},Z.prototype.qa=300,Z.prototype.rg=function(e){var n=Fc(e);if(!n||n&&0>e)throw new D(this.rg,1,"positive number required");this.qa=e},Z.prototype.setAnimationDuration=Z.prototype.rg,Z.prototype.$g=function(){return this.qa},Z.prototype.getAnimationDuration=Z.prototype.$g,Z.prototype.xa=em,Z.prototype.sg=function(e){if(!Da(e))throw new D(this.sg,1,"function required");this.xa=e},Z.prototype.setAnimationEase=Z.prototype.sg,Z.prototype.ah=function(){return this.xa},Z.prototype.getAnimationEase=Z.prototype.ah,Z.prototype.ng=function(){this.xa=em,this.qa=300},Z.prototype.resetAnimationDefaults=Z.prototype.ng,Z.prototype.Xh=function(e,n,r){var d;this.Nj=Lk(),(d=this.R.ja.splice(e,1)[0])&&d.F&&d.F(),(d=this.u.ja.splice(e,1)[0])&&d.F&&d.F(),(d=this.ta.ja.splice(e,1)[0])&&d.F&&d.F(),(d=this.ea.ja.splice(e,1)[0])&&d.F&&d.F(),this.ab=this.c.La(),0===e&&(Ol(this,n,!1),this.Eb()),this.m=Um(this.sj,Ew(this),Fw(this)),this.ce(),r||this.ha()},Z.prototype.Yh=function(){this.Eb(),this.ha()},Z.prototype.th=function(e,n,r){var d,m,g,v;if(n){var w={oc:this.yn,fb:this.fb};n.W?C(n,Em)?m=new Dm(n):C(n,Qm)&&(v=new Dm(n)):(n.requestOverlays&&(d=new ow(n,w)),n.requestTiles&&(m=new mw(n,w)),n.requestMarkers&&(g=new qw(n,w)),n.requestDomMarkers&&(v=new Jm(n,w)))}this.R.ja.splice(e,r=r||0,d),this.u.ja.splice(e,r,m),this.ta.ja.splice(e,r,g),this.ea.ja.splice(e,r,v),this.ab=this.c.La(),this.m=Um(this.sj,Ew(this),Fw(this))},Z.prototype.Pa=function(e,n){var r=this.f.center,d=this.oa;return this.b.Ra((e-r.x)*d,(n-r.y)*d)},Z.prototype.screenToGeo=Z.prototype.Pa,Z.prototype.qg=function(e,n){return e=this.Pa(e,n),(n=this.J.jb()).position=e,n},Z.prototype.Da=function(e){var n=this.oa,r=this.f.center,d=r.x*n;r=r.y*n,e=this.b.ib(e);var m=this.b.w;return new J(Ad((e.x-Ad(e.x/m)*m+d)/n),Ad((e.y+r)/n))},Z.prototype.geoToScreen=Z.prototype.Da,Z.prototype.K=function(e,n){var r=this.wa[e||4],d=r.left-n,m=(e=this.b).Ra(d,r.top-n),g=r.right+n;return n=e.Ra(g,r.bottom+n),g-d>=e.w&&(m.lng=-(n.lng=180)),sg(m,n)},Z.prototype.Ea=function(e,n,r,d){var v,m=[],g=this.oa;for(e*=g,n*=g,v=(g=[this.R,this.u,this.ta,this.ea]).length;v--&&(!r||!m.length);){for(var w=m,k=g[v].ja,j=e,G=n,q=r,_t=k.length;_t--&&!((m=k[_t])&&m.Ea&&(w=w.concat(m.Ea(j,G,q)),w.length&&q)););m=w}d(m)},Z.prototype.getObjectsAt=Z.prototype.Ea,Z.prototype.sb=z,Z.prototype.T=function(){var n,e=this.m.length;Z.j.T.call(this);var r=Ew(this);this.L.set(0,0);var d=r.w;for(n=r.h;e--;){var m=(r=this.m[e]).yb();m.w===d&&m.h===n||r.cf(d,n)}this.sb=new Wi(d,n),this.ha()},Z.prototype.getCapabilities=function(){return pw},Z.prototype.getCapabilities=Z.prototype.getCapabilities,p=Z.prototype,p.ce=function(){this.R.Nc.length=0,this.u.Nc.length=0,this.ta.Nc.length=0,this.ea.Nc.length=0},p.Jh=function(){var e;this.D&&this.D.before();var n=this.u.ja,r=this.f.center.clone().scale(this.oa).round(),d=this.K(1,0),m=this.K(1,Iw),g=this.zoom,v=g-this.fb,w=this.b,k=this.Xn,j=this.Hn,G=n[0];n=this.L;var q=this.m.length,_t=this.ab;for(e=_t.length;q--;){var _r=this.m[q];C(_r,Bm)&&_r.clear()}if(G){if(k)for(;k;)G.W(d,r,w,q=g-k,!0,n),--k;if(j&&this.Ed)for(_r=1;_r<=j&&(w.Oa(q=g+_r),k=this.K(2,0),w.Oa(g),!G.W(k,r,w,q,!0,n));_r++);}for(this.fd=rw;e--;)C(w=_t[e],qj)&&w.ca()&&w.ca().Ue(m,v);d=this.Zj(d,r,g,!1,n,Jw,this.u,this.R),r=this.Zj(m,r,v,!1,n,Kw,this.ta,this.ea),this.Ad=d&&r,this.i&&this.i.sa()&&this.me(),this.P||(this.P=this.J.jb()),this.P.bounds=this.K(4,0),this.J.$a(this.P),this.P=null,this.sb&&(this.f.$a(this.sb),this.sb=z),g<this.Af?this.Ed=!0:this.ve&&(this.Ed=!1),this.Af=g,this.ve=d,this.D&&this.D.after(),Gw(this)},p.Zj=function(e,n,r,d,m,g,v){var _t,w=Array.prototype.slice.call(arguments,6),k=w.length,j=w[0].ja.length,G=k*j,q=!!G;for(_t=0;_t<G;_t++){if(g===Jw)var _r=_t%k,_s=Math.floor(_t/k);else _r=Math.floor(_t/j),_s=_t%j;var ga=w[_r].ja[_s];_r=w[_r].Nc,ga&&((ga=ga.W(e,n,this.b,r,d,m,this.Da))===wk.ACTIVE&&(this.fd=1/0),ga!==wk.DONE||_r[_s]||(Hw(this,this.ab[_s]),_r[_s]=!0),_r[_s]||(q=!1))}return q},p.o=function(){var e=this.c.La()[0],n=this.f;Kk(this.Yn),Dw(this,!0),e&&Ol(this,e,!1),Fw(this).forEach(function(r){r.F()}),n.element&&n.element.removeChild(this.aa),this.aa=null,this.C=3,Z.j.o.call(this)},p.ha=function(){this.Nj=Lk(),this.C===tw&&(this.Ad=!1,this.C=1,Gw(this))},p.xd=function(e,n,r){Cw(this,e=Pl(this,Pl(this,e)+this.fb),n,r)},Z.prototype.zoomAt=Z.prototype.xd,Z.prototype.lc=function(e,n){yw(this),Mw(this,n),this.g.start(e,!!n)},Z.prototype.startInteraction=Z.prototype.lc,Z.prototype.cc=function(e,n,r,d,m){var g=!1;this.g.sa()&&(n=this.g.store(e,n,r,d,m),this.g.Ac(Nl.COORD)&&0<nm(e=this.g.Nd())&&(Lw(this,-e.x,-e.y),g=!0),n&&this.g.Ac(Nl.ZOOM)&&(e=this.g.Bf(),n=this.g.Cf(),(n=Ed(Gd(2,this.zoom)*n)/Od)!==this.zoom&&(Cw(this,n=uw(this,n),e.x,e.y),g=!0)),g&&this.ha())},Z.prototype.interaction=Z.prototype.cc,Z.prototype.wb=function(e){var n=this;if(this.g.sa()&&!e){if(this.l){e=this.g.zb();var r=this.g.rc(),d=this.l.duration,m=(this.l.Te||1)*e,g=new Rm(-m/(0<d?d:1),m);!E(r.x)&&!E(r.y)&&0<m&&n.g.Ac(Nl.COORD)&&Aw(this,function(v){m=g.De(v*d),E(m)||Lw(n,Ad(-r.x*m),Ad(-r.y*m))},d,void 0,this.l.we)}this.l=null,this.g.clear()}},Z.prototype.endInteraction=Z.prototype.wb,Z.prototype.kc=function(e,n,r){yw(this),this.a.start(n,r),Mw(this,e)},Z.prototype.startControl=Z.prototype.kc,Z.prototype.control=function(e,n,r){if(E(+r))throw new D(this.control,2,r);if(E(e))throw new D(this.control,0,e);if(E(n))throw new D(this.control,1,n);this.a.sa()&&this.a.set(e,n,r,0,0,0)},Z.prototype.control=Z.prototype.control,Z.prototype.vb=function(e,n){var d,r=this;if(this.a.sa()){Dw(this,!0);var m=Lk(),g=m-this.Lj;if(1<=g&&Nw(this,zm(this.a),g),!this.l||e||n)"function"==typeof n&&((e=this.jb()).zoom=this.zoom-this.fb,n(e),e.zoom+=this.fb,Ow(this,e));else{n=this.a.zb();var w=this.a.rc(),k=this.l.duration,j=(this.l.Te||1)*n,G=new Rm(-j/(0<k?k:1),j);!E(w.a)&&!E(w.b)&&0<j&&Aw(this,function(q,_t,_r,_s){m&&(_r=_s-m,m=0),j=G.De(q*k)*_r,E(j)||((d=w.c*j)&&Cw(r,uw(r,r.zoom+d),r.a.a,r.a.b),Lw(r,Ad(w.a*j),Ad(w.b*j)))},k,void 0,this.l.we)}this.a.reset()}},Z.prototype.endControl=Z.prototype.vb,Z.prototype.dd=function(e){var n=this,r=e.b;this.L.set(0,0),r.a||r.b||r.c?(this.Lj=Lk(),Aw(this,function(d,m,g,v){n.Lj=v,Nw(n,r,g)},Number.POSITIVE_INFINITY),this.ha()):Dw(this,!0)},Z.prototype.Wg=function(){},Z.prototype.enter=Z.prototype.Wg,Z.prototype.Xg=function(e){Ml(this.aa,e)},Z.prototype.exit=Z.prototype.Xg,Z.prototype.capture=function(e,n,r,d){var m=this.aa.ownerDocument.createElement("canvas"),g=m.getContext("2d"),v=this.oa;for(m.width=(r-e)*v,m.height=(d-n)*v,r=0;r<this.m.length;r++)C(d=this.m[r],Bm)&&g.drawImage(d.N(),-e*v,-n*v);return Zb(m)};var Kw=0,Jw=1,rw=1e3,Iw=256;function Pw(e){var n;if(e)for(Qw={},n=e.length;n--;)Qw[e[n]]=!0;this.Yk={}}var Rw,Qw={};Pw.prototype.parse=function(e,n,r){var d,m,g,v,w;Rw=!1;try{r=JSON.parse(r)}catch{Rw=!0}if(r&&(d=r.metadata)){var k={spatials:[]};for(m in d)if((r=!Qw[m]&&(g=Sw[m]))&&((v=d[m])||(Rw=!0,v=void 0),r=v),r)for(r=v.length;r--;){var j;(j=v[r])||(Rw=!0,j=void 0),(w=j)&&g(n,e,this,m,w,k)}}else Rw=!0;return Rw?void 0:k},Pw.prototype.parse=Pw.prototype.parse;var Sw={"street labels":function(e,n,r,d,m,g){var v;if((v=m.vertices)||(Rw=!0,v=void 0),v){var w,j,k=v.length;if((j=0<k)||(Rw=!0,j=void 0),j)for(w=Array(k/2);k;){var G=v[--k];j=v[--k],w[k/2]=new J(j,G)}w=w?{a:[w]}:B,k=+m["font size"]/e.Xa(),(v=r.Yk[k])||(Tw.lineWidth=k,v=r.Yk[k]=r.Fd.vj(Tw)),Uw(e,n,w,!1,v,m,d,g)}delete m.vertices},"city center labels":function(e,n,r,d,m,g){Uw(e,n,Vw(m,new Ph([])),!0,r.Fd,m,d,g)},labels:function(e,n,r,d,m,g){var v;if((v=m["bounding boxes"])||(Rw=!0,v=void 0),v){for(var j,w=v.length,k=new Ph([]);w--;){var G;(G=v[w])||(Rw=!0,G=void 0),(j=G)&&Vw(j,k)}Uw(e,n,k,!0,r.Fd,m,d,g)}delete m["bounding boxes"]},buildings:function(e,n,r,d,m,g){var k,j,G,_r,v=m.id,w=n.ig[v],q=[],_t=[];(k=m)||(Rw=!0,k=void 0),k&&((j=k.vertices)||(Rw=!0,j=void 0),j)&&((_r=k.polygons)||(Rw=!0,_r=void 0),(G=_r)&&q.push.apply(q,Ww(j,G)),(k=k.outlines)||(Rw=!0,k=void 0),(G=k)&&_t.push.apply(_t,Ww(j,G))),G=q.length,q.push.apply(q,_t),_t=new Ph(q,Wd,G),(q=q.length)||(Rw=!0,q=void 0),q&&(w?(br(w,e,[_t]),g.spatials.push(w)):(w=Uw(e,n,_t,!0,r.Fd,m,d,g,v),n.fa(w)))}};Sw["transit stops"]=Sw.POIs=Sw.labels;var Xw=["box 2","box 1","annotation box","icon box"];function Vw(e,n){for(var d,m,r=Xw.length;r--;)if(m=e[d=Xw[r]]){var g=m[0],v=m[1],w=m[2];m=m[3],n.a.push([new J(g,v),new J(g+w,v),new J(g+w,v+m),new J(g,v+m)]),delete e[d]}return n}function Ww(e,n){var d,m,g,r=n.length;if(0<r)for(m=Array(r);r--;)if((d=n[r])||(Rw=!0,d=void 0),d){var v=d.length;if(0<v)for(m[r]=g=Array(v);v--;){var w=2*d[v];g[v]=new J(e[w],e[w+1])}}return m||[]}var Yw={};function Uw(e,n,r,d,m,g,v,w,k){return Yw.style=m,d=new Yq(n,d,k,Yw),r&&br(d,e,[r]),Zw(g),g.category=v,d.setData(g),w.spatials.push(d),d.ka(n),d}Pw.prototype.Fd=new wh({strokeColor:"transparent",fillColor:"transparent",lineWidth:0});var Tw={};function Zw(e){var n,r=!1;switch(typeof e){case"object":if(e instanceof Array)for(n=e.length;n--;)Zw(e[n])?r=!0:delete e[n];else if(e)for(n in e)Zw(e[n])?r=!0:delete e[n];break;case"number":r=!0;break;default:r=!!e}return r}function $w(e,n,r){n=n||{};var d=(r=r||{}).tileType||"maptile",m=r.scheme||"normal.day";if(S.call(this,{min:0,max:20}),!0===n.pois&&(n.pois="!F"),this.L=n,!(e&&e instanceof ax))throw Error("InvalidArgument: service required");this.m=e,this.i=A(this.i,this),this.m.addEventListener("versionupdate",this.i),this.Yb=e.v().clone().G(d+"/"+e.vc()+"/"+m).I(bx).I(n),this.R=e.f||null,this.T=r.pixelRatio||r.pixelratio||Ue(),this.tileSize=r.tileSize||256,this.tileType=d,this.scheme=m,this.f=new hr(new Pw(r.categoryFilter)),this.f.ka(this),this.u=A(this.u,this),this.f.addEventListener("update",this.u),this.D=!1,S.call(this,{min:0,max:20}),this.J(new Rk(r.tileCacheSize||256,A(this.aa,this)))}u($w,S),t("H.service.metaInfo.TileProvider",$w),$w.prototype.aa=function(e,n){for(var d,r=(e=n.Ua()).length;r--;)delete(d=e[r]).a[n.key],d.release();n.data&&(Cp.push(n.gg(),this.tileSize),n.hg())},$w.prototype.u=function(){this.dispatchEvent("update")},$w.prototype.B=function(e,n,r,d,m){var j,g=this.Yb.clone(),v=this.R,w=this.tileSize,k=this.getTileKey(e,n,r);if((k=this.nb().get(k))&&!k.Ud()){d(Cp.pop(this.tileSize),null);var G={cancel:function(){}}}else{v&&g.Ba(v[(r+n+e)%v.length]),g.G(r+"/"+e+"/"+n+"/"+w+"/png8");var q=Ap.setTimeout(function(){(j=new tf("text/plain",g.toString())).then(function(_t){d(null,_t)},m)},500)}return this.D||(zp($w,"Use HERE Vector Tile API or Raster Tile API v3 instead."),this.D=!0),G||{cancel:function(){j?j.cancel():Ap.clearTimeout(q)}}},$w.prototype.requestInternal=$w.prototype.B,$w.prototype.ac=function(e,n,r,d,m){var g=this.f,v=d||Cp.pop(this.tileSize);if(d)(e=this.nb().get(this.getTileKey(e,n,r))).W(d);else if(delete(d=e=new al(this.uc(e,n,r),e,n,r,this.tileSize,this.T,r,g)).l,d.s=m,e.W(v))for(v=(m=e.Ua()).length;v--;)m[v].pg();else Cp.push(v,this.tileSize);return e},$w.prototype.createTileInternal=$w.prototype.ac,$w.prototype.F=function(){this.f.F(),this.m.removeEventListener("versionupdate",this.i),S.prototype.F.call(this)},$w.prototype.dispose=$w.prototype.F,$w.prototype.i=function(){var e=this.m;this.Yb=e.v().clone().G(this.tileType+"/"+e.vc()+"/"+this.scheme).I(bx).I(this.L),this.reload(!1)};var bx={metadata:"metaonly",mgen:"2"};function ax(e){ax.j.constructor.call(this,ax,e),e=Pp(this,e),this.f=e.shards,(this.b=e.ignoreTypes?null:e.type)&&this.v().Ba(this.b),this.c=e.version,this.l=new lq,"newest"===this.c&&cx(this)}function dx(e,n){for(var r={},d=e[n+"s"][n],m=d.length;m--;)r[d[m].id]=d[m];e[n+"s"]=r}function cx(e){var n=e.v().clone().G("info").I({output:"json"});e.f&&n.Ba(e.f[0]),e.B(n,function(r){var d;if(dx(r=r.response,"map"),dx(r,"scheme"),dx(r,"tiletype"),dx(r,"format"),dx(r,"resolution"),dx(r,"language"),"newest"===e.c&&"traffic"!==e.b)for(d in r.maps)r.maps[d].hash&&r.maps[d].newest&&(e.c=r.maps[d].hash,e.dispatchEvent("versionupdate"));e.s=r,e.dispatchEvent("infoupdate")},function(r){throw r})}u(ax,Op),t("H.service.metaInfo.Service",ax),ax.prototype.Aa=function(){return{type:"base",version:"newest",subDomain:"maps.ls",path:"maptile/2.1",shards:["1","2","3","4"]}},ax.CONFIG_KEY="metaInfo",ax.prototype.Hj=function(){return this.b},ax.prototype.vc=function(){return this.c},ax.prototype.getVersion=ax.prototype.vc,ax.prototype.ba=function(){return this.l},ax.prototype.getCopyrights=ax.prototype.ba,ax.prototype.Fe=function(){return this.s},ax.prototype.getInfo=ax.prototype.Fe,ax.prototype.ue=function(e,n,r,d,m,g){return new $w(this,d,{tileSize:e,pixelRatio:n,categoryFilter:r,tileType:m,scheme:g})},ax.prototype.createTileProvider=ax.prototype.ue,ax.prototype.nc=function(e,n,r,d,m,g){return new sl(this.ue(e,n,r,d,m,g))},ax.prototype.createTileLayer=ax.prototype.nc,X.prototype.Aj=function(e){return this.Ma(ax,e)},X.prototype.getMetaInfoService=X.prototype.Aj,function(){var e=X.prototype.createDefaultLayers;X.prototype.createDefaultLayers=function(n,r,d,m,g,v){var w=e.call(this,n,r,d,m,g,v),k={},j=this.Aj();"object"==typeof n&&(n=(v=n).tileSize,r=v.ppi,d=v.lg,m=v.lg2,g=v.style,v=v.pois),n=n||256;var G=320===r?2:1;if(0>[72,250,320,500].indexOf(+r)){if(r!==B)throw new D(this.wf,1,r)}else k.ppi=+r;return d&&(k.lg=d),m&&(k.lg2=m),g&&(k.style=g),v&&(k.pois=v),w.raster.normal.metaInfo=j.nc(n,G,["buildings"],k),w}}(),H.__bootstrap__='var l,aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ba="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function ca(a,b){if(b){var c=ba;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&aa(c,a,{configurable:!0,writable:!0,value:b})}}var ea;\nif("function"==typeof Object.setPrototypeOf)ea=Object.setPrototypeOf;else{var fa;a:{var ha={lb:!0},ja={};try{ja.__proto__=ha;fa=ja.lb;break a}catch(a){}fa=!1}ea=fa?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ka=ea;ca("Object.setPrototypeOf",function(a){return a||ka});var p=this||self;\nfunction la(a,b,c){a=a.split(".");c=c||p;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}:c[d]=b}function ma(){}\nfunction na(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";\nelse if("function"==b&&"undefined"==typeof a.call)return"object";return b}function r(a){return"function"==na(a)}function oa(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var pa="closure_uid_"+(1E9*Math.random()>>>0),ra=0;function sa(a,b,c){return a.call.apply(a.bind,arguments)}\nfunction ta(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,d);return a.apply(b,e)}}return function(){return a.apply(b,arguments)}}function ua(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ua=sa:ua=ta;return ua.apply(null,arguments)}\nfunction va(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var d=c.slice();d.push.apply(d,arguments);return a.apply(this,d)}}function t(a,b){la(a,b,void 0)}function wa(a,b){function c(){}c.prototype=b.prototype;a.U=b.prototype;a.prototype=new c;a.prototype.constructor=a};function v(){}t("H.util.ICache",v);v.prototype.add=function(){};v.prototype.add=v.prototype.add;v.prototype.get=function(){};v.prototype.get=v.prototype.get;v.prototype.sa=function(){};v.prototype.drop=v.prototype.sa;v.prototype.forEach=function(){};v.prototype.forEach=v.prototype.forEach;v.prototype.S=function(){};v.prototype.removeAll=v.prototype.S;v.prototype.aa=function(){};v.prototype.registerOnDrop=v.prototype.aa;v.prototype.qa=function(){};v.prototype.deRegisterOnDrop=v.prototype.qa;function xa(){var a=ya,b;for(b in a)return!1;return!0}function za(a){var b={},c;for(c in a)b[c]=a[c];return b}var Aa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ba(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Aa.length;f++)c=Aa[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var Ca=this;function Da(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Da);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}wa(Da,Error);Da.prototype.name="CustomError";var Ea=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if("string"===typeof a)return"string"!==typeof b||1!=b.length?-1:a.indexOf(b,0);for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1};var Fa=ua,Ga=String,Ha=Ca.Object.freeze||function(a){return a},x=[].pop(),Ia=/x/.exec("");function Ja(a){return Ga(a).split(","!==x?",":" ")}var Ma="prototype constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Na(a,b,c,d){if(!(b=a instanceof b)&&c)throw new y(c,d,void 0!==x?void 0:a);return b}function Oa(a,b,c,d){var e;if(!(e="Array"===Pa(a))&&b)throw new y(b,c,d!==x?d:a);return e}\nt("H.lang.isArray",function(a,b,c,d){return Oa(a,b,c,d)});function Qa(a){return"string"===typeof a}t("H.lang.isString",Qa);var Ra=isNaN;function Sa(a){return a===+a}t("H.lang.isNumber",Sa);t("H.lang.isInteger",Number.isInteger?Number.isInteger:function(a){return"number"===typeof a&&0===a%1});function Pa(a){var b=Object[Ma[0]][Ma[6]].call(a).match(/^\\[object (\\w+)\\]$/);return b?b[1]:typeof a}var Ta=[];0>Ta.indexOf(Ta)&&Ta.push(Ta);\nfunction Ua(a,b,c,d){var e="",f=2>arguments.length,g;f&&(b={H:Ca.H},c="",d=Ta.slice());Va(b,!0,function(h,k){try{if(g=h[k],k=Wa(h,g),!(oa(g)&&g.window===g&&g.self===g||oa(g)&&0<g.nodeType&&r(g.cloneNode))&&oa(g)){if(g===a)return e=c+"."+k,!0;if(0>d.indexOf(g)&&(d.push(g),e=Ua(a,g,c+"."+k,d)))return!0}}catch(m){}});f&&(e=e?e.substr(1).replace("."+Ma[0]+".","#"):"~"+(r(a)?Xa(a)+"()":Pa(a)));return e}\nfunction Wa(a,b){var c=[];Va(a,!1,function(d,e){d[e]===b&&c.push(e)});return c.sort(Ya)[0]}function Ya(a,b){return b.length-a.length}var Za=Object[Ma[0]][Ma[2]];function Va(a,b,c){var d;if(a){for(e in a)if((!b||Za.call(a,e))&&c(a,e,!0))return;for(d=Ma.length;d--;){var e=Ma[d];if((!b||Za.call(a,e))&&c(a,e,!1))break}}}function Xa(a){return(a=/^\\s*function ([^\\( ]+)/.exec(a))?a[1]:"anonymous"}function $a(a,b,c){c[b]="#"+b};function A(a,b,c){this.g=[];b&&this.aa(b);if(c&&!r(c))throw new y(A,2,c);this.b=0;this.filter=c;this.a={};this.f=this.c=null;this.Ha(a)}t("H.util.Cache",A);A.prototype.add=function(a,b,c){var d,e;c=+c;if(!Sa(c)||0>c)throw new y(this.add,2,c);a=String(a);if(e=this.filter?this.filter(a,b,c):!0)(d=this.a[a])?(d.data!==b&&ab(this,d),this.b+=c-d.size,d.size=c,d.data=b,eb(this,d)):this.a[a]=fb(this,{id:a,data:b,size:c,m:null,C:null},this.c),gb(this);return e};A.prototype.add=A.prototype.add;\nA.prototype.aa=function(a){if(!r(a))throw new y(this.aa,0,a);this.g.push(a)};A.prototype.registerOnDrop=A.prototype.aa;A.prototype.qa=function(a){this.g=this.g.filter(function(b){return b!==a})};A.prototype.deRegisterOnDrop=A.prototype.qa;A.prototype.get=function(a,b){return(a=b?this.a[a]:eb(this,this.a[a]))&&a.data};A.prototype.get=A.prototype.get;A.prototype.sa=function(a){var b;(b=this.a[a])&&hb(this,b,!0)};A.prototype.drop=A.prototype.sa;\nA.prototype.forEach=function(a,b,c){var d;for(d in this.a){var e=this.a[d];(c?c(d,e.data,e.size):1)&&a.call(b,d,e.data,e.size)}};A.prototype.forEach=A.prototype.forEach;A.prototype.S=function(a){var b;for(b in this.a){var c=this.a[b];(a?a(b,c.data,c.size):1)&&hb(this,this.a[b],!0)}};A.prototype.removeAll=A.prototype.S;A.prototype.Ha=function(a){if(!(0<+a))throw new y(A.prototype.Ha,0,a);this.i=+a;gb(this);return this};A.prototype.setMaxSize=A.prototype.Ha;A.prototype.Bb=function(){return this.i};\nA.prototype.getMaxSize=A.prototype.Bb;A.prototype.xb=function(){return this.b};A.prototype.getCurrentSize=A.prototype.xb;function eb(a,b){b&&(a.c=fb(a,b,a.c));return b}function gb(a){for(;a.b>a.i&&a.f;)hb(a,a.f,!0)}function fb(a,b,c){if(c!==b){(b.m||b.C)&&hb(a,b,!1);if(b.m=c)b.C=c.C,c.C=b;b.C||(a.c=b);b.m||(a.f=b);a.b+=b.size}return b}function hb(a,b,c){var d=b.C,e=b.m;if(d||e||b==a.c&&b==a.f)d?d.m=e:a.c=e,e?e.C=d:a.f=d,a.b-=b.size,c&&(delete a.a[b.id],ab(a,b));b.m=b.C=null}\nfunction ab(a,b){for(var c=a.g.length;c--;)a.g[c].call(a,b.id,b.data,b.size)};function B(){}t("H.service.extension.dataView.ITable",B);B.prototype.xa=function(){};B.prototype.getMeta=B.prototype.xa;B.prototype.ya=function(){};B.prototype.getRowCount=B.prototype.ya;B.prototype.ga=function(){};B.prototype.getRow=B.prototype.ga;B.prototype.A=function(){};B.prototype.getColumnNames=B.prototype.A;B.prototype.wa=function(){};B.prototype.getColumn=B.prototype.wa;B.prototype.l=function(){};B.prototype.getCell=B.prototype.l;B.prototype.concat=function(){};B.prototype.concat=B.prototype.concat;function ib(){}t("H.service.extension.dataView.IRow",ib);ib.prototype.A=function(){};ib.prototype.getColumnNames=ib.prototype.A;ib.prototype.l=function(){};ib.prototype.getCell=ib.prototype.l;ib.prototype.za=function(){};ib.prototype.getTable=ib.prototype.za;function jb(a,b){this.a=a;this.b=b}t("H.service.extension.dataView.ObjRow",jb);jb.prototype.A=function(){return this.a.A()};jb.prototype.getColumnNames=jb.prototype.A;jb.prototype.l=function(a){return this.a.l(this.b,a)};jb.prototype.getCell=jb.prototype.l;jb.prototype.za=function(){return this.a};jb.prototype.getTable=jb.prototype.za;function kb(){}t("H.service.extension.dataView.IColumn",kb);kb.prototype.l=function(){};kb.prototype.getCell=kb.prototype.l;function lb(a,b){this.b=a;this.a=b}t("H.service.extension.dataView.ObjColumn",lb);lb.prototype.l=function(a){return this.b.l(a,this.a)};lb.prototype.getCell=lb.prototype.l;function y(a,b,c){var d=arguments.length;b=b!==x?+b:b;if(b!==x){var e=(e=/^.*?\\(([^\\)]+)/.exec((""+a).replace(/(\\/\\*([\\s\\S]*?)\\*\\/)|(\\/\\/(.*)$)/gm,"")))?Ja(e[1].replace(/\\s+/g,"")):[];e.forEach($a);e=e[b]||"#"+b}var f=a?Ua(a):"";d=2<d?Ga(c):"";if(e||d)f+=" (Argument "+(e||"")+(d?" "+d:"")+")";d=Error(f);Object.setPrototypeOf(d,y.prototype);return d}wa(y,Error);t("H.lang.InvalidArgumentError",y);y.prototype.name="InvalidArgumentError";function C(a,b,c){var d;b=b||(a&&a.length?Object.keys(a[0]):x);this.D=a;if(b)for(this.M=b,this.pa=a=Object.create(Ia,void 0),d=b.length;d--;)a[b[d]]=!0;c!==x&&(this.Ca=c)}t("H.service.extension.dataView.ObjTable",C);l=C.prototype;l.Ca=x;l.D=x;l.M=x;l.pa=x;l.xa=function(){return this.Ca};C.prototype.getMeta=C.prototype.xa;C.prototype.ya=function(){return this.D?this.D.length:0};C.prototype.getRowCount=C.prototype.ya;C.prototype.ga=function(a){var b=this.D;return b&&b[a]?new jb(this,a):x};\nC.prototype.getRow=C.prototype.ga;C.prototype.A=function(){return this.M||mb};C.prototype.getColumnNames=C.prototype.A;C.prototype.wa=function(a){return this.pa[a]?new lb(this,a):x};C.prototype.getColumn=C.prototype.wa;C.prototype.l=function(a,b){var c=this.D;return(a=c&&this.pa[b]&&c[a])&&a[b]};C.prototype.getCell=C.prototype.l;\nC.prototype.concat=function(){var a=arguments.length,b,c=this.M,d=""+this.M,e=(this.D||[]).slice();for(b=0;b<a;b++){var f=arguments[b];if(!(f instanceof C))throw new y(this.concat,b);if(f.D){if(c&&""+f.M!==d)throw new y(this.concat,b,"Incompatible columns!");e=e.concat(f.D)}}return new C(e,this.M,this.Ca)};C.prototype.concat=C.prototype.concat;var D=Math,nb=D.min,ob=D.max,pb=D.round,qb=D.floor,rb=D.ceil,sb=D.abs,tb=D.log,ub=D.sqrt,vb=D.pow,wb=D.exp,xb=D.sin,yb=D.asin,zb=D.cos,Ab=D.tan,Bb=D.atan,Cb=D.atan2,Db=D.LN2,E=D.PI,Eb=E/2,Fb=E/4,Gb=2*E,Hb=3*E,Ib=E/180,Kb=180/E,Lb=1/0;vb(-2,53);function Mb(a,b){var c;return 0>(c=a%b)===0>b?c:c+b}t("H.math.normalize",function(a,b,c){b-=c=c||0;a-=c;return a-qb(a/b)*b+c});function Nb(a,b,c){return a>c?c:a<b?b:a}t("H.math.clamp",Nb);function Ob(a,b,c){return b<c?a>=b&&a<=c:a>=c&&a<=b}\nfunction Pb(a,b,c,d,e,f){return ub(vb((a-e)*(d-f)-(b-f)*(c-e),2)/(vb(c-e,2)+vb(d-f,2)))}var Qb={NONE:0,VERTEX:1,EDGE:2,SURFACE:3};t("H.math.CoverType",Qb);\nfunction Rb(a,b,c){for(var d=c.length,e=d,f,g,h,k,m=c[0],n=0,q=0,u=0;1!=n&&1<e;){g=c[--e];f=c[--e];k=c[e?e-1:(d+(e-1))%d];h=c[e?e-2:(d+(e-2))%d];if(f>=a&&f<=a&&g>=b&&g<=b||h>=a&&h<=a&&k>=b&&k<=b)n=1;else if(!n&&f===a)h===a&&(g<b&&k>b||g>b&&k<b)||(m<=a&&h>a||m>=a&&h<a)&&(g>=b?++q:++u),n=Ob(b,g,k)&&0>=Pb(a,b,f,g,h,k)?2:0;else if(!n&&Ob(a,f,h)){if(f<a&&h>a||f>a&&h<a)m=g+(a-f)/(h-f)*(k-g),q+=m>b,u+=m<b;n=Ob(b,g,k)&&0>=Pb(a,b,f,g,h,k)?2:0}m=f}!n&&0!==u&&0!==q%2&&(n=3);return n}\nfunction Sb(a,b){return Rb(a.x,a.y,b)!==Qb.NONE}t("H.math.isPointInsidePolygon",Sb);function Tb(a){for(var b=a.length,c=new Float64Array(2*b),d=b&&a[0].x!==x;b--;){var e=a[b],f=b<<1;c[f]=d?e.x:e[0];c[f+1]=d?e.y:e[1]}return c}t("H.math.flatten",Tb);function F(a,b){this.x=+a;this.y=+b}t("H.math.Point",F);F.prototype.set=F;F.prototype.set=F.prototype.set;F.prototype.clone=function(a){a?(a.x=this.x,a.y=this.y):a=new F(this.x,this.y);return a};F.prototype.clone=F.prototype.clone;F.prototype.add=function(a){this.x+=a.x;this.y+=a.y;return this};F.prototype.add=F.prototype.add;F.prototype.sub=function(a){this.x-=a.x;this.y-=a.y;return this};F.prototype.sub=F.prototype.sub;F.prototype.scale=function(a,b){this.x*=a;this.y*=void 0===b?a:b;return this};\nF.prototype.scale=F.prototype.scale;F.prototype.round=function(){this.x=pb(this.x);this.y=pb(this.y);return this};F.prototype.round=F.prototype.round;F.prototype.floor=function(){this.x=qb(this.x);this.y=qb(this.y);return this};F.prototype.floor=F.prototype.floor;F.prototype.ceil=function(){this.x=rb(this.x);this.y=rb(this.y);return this};F.prototype.ceil=F.prototype.ceil;F.prototype.F=function(a){return!(!a||this.x!==a.x||this.y!==a.y)};F.prototype.equals=F.prototype.F;\nF.prototype.Cb=function(a,b){var c=b.x-a.x,d=b.y-a.y,e=a;if(c||d){var f=((this.x-a.x)*c+(this.y-a.y)*d)/(c*c+d*d);0>=f?e=a:1<=f?e=b:e=new F(a.x+f*c,a.y+f*d)}return e};F.prototype.getNearest=F.prototype.Cb;F.prototype.ra=function(a){return ub(vb(this.x-a.x,2)+vb(this.y-a.y,2))};F.prototype.distance=F.prototype.ra;F.fromIPoint=function(a){if(!a)throw Error("invalid argument");return a instanceof F?a:new F(a.x,a.y)};function Ub(a,b,c,d,e,f){var g,h,k=a.length,m,n;if(k)for(g=[];k--;){var q=a[k];var u=q.length;var I=0;for(m=1;m<u;m++)if(n=Vb(q[m-1],q[m],c,b,d,e)){var L=n[0];var w=n[1];I&&I.F(L)?h.push(w):g.push(h=n);I=w;f&&(m=u,k=0)}}else g=a;return g}t("H.math.clipping.clipStrips",Ub);\nfunction Vb(a,b,c,d,e,f){var g=a.x;a=-a.y;var h=b.x;b=-b.y;c=-c;f=-f;if(g>h){if(h>e||g<d)return;var k=g;var m=a;g=h;a=b;h=k;b=m;k=1}else if(g>e||h<d)return;if(a>b){if(b>c||a<f)return;var n=1;a=-a;b=-b;m=f;f=-c;c=-m}else if(a>c||b<f)return;if(g<d){if((a+=(d-g)*(b-a)/(h-g))>c)return;g=d}if(a<f){if((g+=(f-a)*(h-g)/(b-a))>e)return;a=f}h>e&&(b=a+(e-g)*(b-a)/(h-g),h=e);b>c&&(h=g+(c-a)*(h-g)/(b-a),b=c);n&&(a=-a,b=-b);return k?[new F(h,-b),new F(g,-a)]:[new F(g,-a),new F(h,-b)]}\nfunction Wb(a,b,c){a=Xb(a,!0);b=Xb(b,!1);var d,e;var f={};var g=d=1;switch(~~(c||0)){case 1:g=d=0;break;case 2:d=0;g=1;break;case 3:d=1,g=0}c=d;var h=g;if(b&&a){b.W=new Yb(b.x,b.y,null,Zb(b));a.W=new Yb(a.x,a.y,null,Zb(a));for(g=b;g.next;g=g.next)if(!g.u)for(d=a;d.next;d=d.next)if(!d.u){var k=$b(g.next);var m=$b(d.next);if(e=ac(g,k,d,m,f)){e=f.mb;var n=f.nb;var q=f.ec;var u=f.fc;e=new Yb(q,u,null,null,null,null,!0,0,0,e);bc(e,g,k);k=new Yb(q,u,null,null,null,null,!0,0,0,n);bc(k,d,m);e.Da=k;k.Da=e}}f=\nSb(b,cc(a));c&&(f=!f);for(g=b;g;g=g.next)g.u&&(g.Aa=f,f=!f);f=Sb(a,cc(b));h&&(f=!f);for(d=a;d.next;d=d.next)d.u&&(d.Aa=f,f=!f);dc(b);for(dc(a);(a=ec(b))!=b;){for(c=null;!a.na;a=a.Da){for(f=a.Aa;;){c=new Yb(a.x,a.y,c);c.artificial=a.u||a.Wa;a.na=1;a=f?a.next:a.o;if(!a)break;if(a.u){a.na=1;break}}if(!a)break}c.Za=I||null;var I=c}return I}}t("H.math.clipping.clipPolygon",Wb);\nfunction Yb(a,b,c,d,e,f,g,h,k,m){this.x=a;this.y=b;this.next=c||null;this.o=d||null;this.Za=e||null;this.Da=f||null;this.u=!!g;this.Aa=!!h;this.na=k||0;this.alpha=m||0;d&&(d.next=this);c&&(c.o=this);this.Wa=!1;this.W=null}function $b(a){for(;a&&a.u;)a=a.next;return a}function Zb(a){if(a)for(;a.next;)a=a.next;return a}function ec(a){var b=a;if(b){do b=b.next;while(b!=a&&(!b.u||b.u&&b.na))}return b}function dc(a){var b=Zb(a);b.o.next=a;a.o=b.o}\nfunction ac(a,b,c,d,e){var f,g=b.x-a.x,h=b.y-a.y;var k=d.x-c.x;var m=d.y-c.y;var n=g*m-h*k;if(!n)return 0;k=((c.x-a.x)*m-(c.y-a.y)*k)/n;n=(h*(c.x-a.x)-g*(c.y-a.y))/n;if(0>k||1<k||0>n||1<n)return 0;0===k?f=a:1===k?f=b:0===n?f=c:1===n&&(f=d);if(f)return f.x+=2.480549651603763E-5,f.y+=7.321997314118067E-5,f.W&&(f.W.x=f.x,f.W.y=f.y),ac(a,b,c,d,e);e.ec=a.x+k*g;e.fc=a.y+k*h;e.mb=k;e.nb=n;return 1}function cc(a){for(var b=[];a;)b.push(a.x,a.y),a=a.next;return b}\nfunction bc(a,b,c){for(b=b.next;b!==c&&b.alpha<=a.alpha;)b=b.next;a.next=b;a.o=b.o;a.next.o=a;a.o.next=a}function Xb(a,b){for(var c,d=null,e=0,f=a.length;e<f;e++){c=new Yb(a[e].x,a[e].y,d);c.Wa=b;if(c.next=d)d.o=c;d=c}return d};function fc(a,b){var c=[];a&&c.push(Ua(a));1<arguments.length&&c.push(""+b);c=Error(c.join(" "));Object.setPrototypeOf(c,fc.prototype);return c}wa(fc,Error);t("H.lang.IllegalOperationError",fc);fc.prototype.name="IllegalOperationError";function gc(){this.constructor=this.constructor;if(!Qa("STATIC_DB"))throw new y(this.constructor,0);this.i=hc();if(!this.i)throw new fc(this.constructor,"This browser does not support IndexedDB");this.a=[];this.c=[];this.g=Fa(this.g,this)}var ic,jc;gc.prototype.get=function(a,b,c){var d;if(!Qa(a)&&!Sa(a))throw new y(this.get,0);if(!r(b))throw new y(this.get,1);kc(this,function(e){d=e.get(a);lc(d,b,c)},c);return{cancel:function(){d&&(d.onsuccess=mc)}}};\ngc.prototype.g=function(){var a=this.b.result;a.objectStoreNames.contains("data")||a.createObjectStore("data")};\nfunction nc(a,b,c){if(a.b)a.a?(a.a.push(b),c&&a.c.push(c)):a.f?c&&c(a.f):b(a.b.result);else{a.b=a.i.open("H_STATIC_DB",1);a.b.onupgradeneeded=a.g;var d=a.b.onerror=function(){clearTimeout(a.j);a.f=this.error;a.c.forEach(function(e){e(a.f)});delete a.a;delete a.c};a.j=setTimeout(function(){d.call({error:Error("DbOpenTimeoutError")})},500);a.b.onsuccess=function(){clearTimeout(a.j);a.a?(a.a.forEach(function(e){e(this.result)},this),delete a.a,delete a.c):(delete a.b,delete a.f,a.a=[],a.c=[])};\na.a.push(b);c&&a.c.push(c)}}function kc(a,b,c){nc(a,function(d){d=d.transaction(["data"],"readwrite");b(d.objectStore("data"))},c)}function lc(a,b,c){b&&(a.onsuccess=function(){b(this.result)});c&&(a.onerror=function(){c(this.error)})}t("H.util.IndexedDBStorage.getInstance",function(){ic||(ic=new gc);return ic});function hc(){return Ca.indexedDB||Ca.webkitIndexedDB||Ca.mozIndexedDB||Ca.msIndexedDB}\nt("H.util.IndexedDBStorage.isSupported",function(){var a="";if(jc===x)if("file:"===window.location.protocol&&-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&128<=window.location.href.length)jc=!1;else{try{var b=hc();a="H_TEST_DB";var c=b&&b.open(a,1)}catch(d){}jc=!!c&&null===c.onupgradeneeded;c&&b.deleteDatabase&&b.deleteDatabase(a)}return jc});function J(){0!=oc&&(pc[this[pa]||(this[pa]=++ra)]=this);this.c=this.c;this.a=this.a}var oc=0,pc={};J.prototype.c=!1;J.prototype.s=function(){if(!this.c&&(this.c=!0,this.v(),0!=oc)){var a=this[pa]||(this[pa]=++ra);if(0!=oc&&this.a&&0<this.a.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass\' method.");delete pc[a]}};\nJ.prototype.L=function(a,b){this.c?void 0!==b?a.call(b):a():(this.a||(this.a=[]),this.a.push(void 0!==b?ua(a,b):a))};J.prototype.v=function(){if(this.a)for(;this.a.length;)this.a.shift()()};function K(a,b){this.type=a;this.currentTarget=this.target=b;this.a=!1;this.ab=!0}K.prototype.stopPropagation=function(){this.a=!0};K.prototype.c=function(){this.ab=!1};t("H.util.Event",K);K.prototype.stopPropagation=K.prototype.stopPropagation;K.prototype.stopPropagation=K.prototype.stopPropagation;K.prototype.CAPTURING_PHASE=1;K.prototype.CAPTURING_PHASE=K.prototype.CAPTURING_PHASE;K.prototype.AT_TARGET=2;K.prototype.AT_TARGET=K.prototype.AT_TARGET;K.prototype.BUBBLING_PHASE=3;K.prototype.BUBBLING_PHASE=K.prototype.BUBBLING_PHASE;K.prototype.eventPhase=0;K.prototype.eventPhase=K.prototype.eventPhase;function qc(a,b,c){qc.U.constructor.call(this,a,c);this.data=b}wa(qc,K);t("H.util.DataEvent",qc);function rc(a,b,c){rc.U.constructor.call(this,a,c);this.message=b}wa(rc,K);t("H.util.ErrorEvent",rc);function sc(){}t("H.util.ICancelable",sc);sc.prototype.cancel=function(){};sc.prototype.cancel=sc.prototype.cancel;function tc(a,b){this.c=a;this.f=b;this.b=0;this.a=null}tc.prototype.get=function(){if(0<this.b){this.b--;var a=this.a;this.a=a.next;a.next=null}else a=this.c();return a};function uc(a,b){a.f(b);100>a.b&&(a.b++,b.next=a.a,a.a=b)};function vc(){this.b=this.a=null}var xc=new tc(function(){return new wc},function(a){a.reset()});vc.prototype.add=function(a,b){var c=xc.get();c.set(a,b);this.b?this.b.next=c:this.a=c;this.b=c};function yc(){var a=zc,b=null;a.a&&(b=a.a,a.a=a.a.next,a.a||(a.b=null),b.next=null);return b}function wc(){this.next=this.b=this.a=null}wc.prototype.set=function(a,b){this.a=a;this.b=b;this.next=null};wc.prototype.reset=function(){this.next=this.b=this.a=null};var Ac=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\\s\\xa0]*([\\s\\S]*?)[\\s\\xa0]*$/.exec(a)[1]};function Bc(a,b){return a<b?-1:a>b?1:0};var Cc;a:{var Dc=p.navigator;if(Dc){var Ec=Dc.userAgent;if(Ec){Cc=Ec;break a}}Cc=""}function M(a){return-1!=Cc.indexOf(a)};function Hc(a,b){this.b=a===Ic&&b||"";this.a=Jc}var Jc={},Ic={},Kc=new Hc(Ic,"");function Lc(a,b){this.b=a===Mc&&b||"";this.a=Nc}var Nc={},Mc={};function Oc(){this.a="";this.b=Pc}function Qc(){var a=Rc;if(a instanceof Oc&&a.constructor===Oc&&a.b===Pc)return a.a;na(a);return"type_error:SafeHtml"}var Pc={};function Sc(a){var b=new Oc;b.a=a;return b}Sc("<!DOCTYPE html>");var Rc=Sc("");Sc("<br>");function Tc(a){var b=new Lc(Mc,Kc instanceof Hc&&Kc.constructor===Hc&&Kc.a===Jc?Kc.b:"type_error:Const");b instanceof Lc&&b.constructor===Lc&&b.a===Nc?b=b.b:(na(b),b="type_error:TrustedResourceUrl");a.src=b.toString()};function Uc(a){Uc[" "](a);return a}Uc[" "]=ma;var Vc=M("Opera"),Wc=M("Trident")||M("MSIE"),Xc=M("Edge"),Yc=M("Gecko")&&!(-1!=Cc.toLowerCase().indexOf("webkit")&&!M("Edge"))&&!(M("Trident")||M("MSIE"))&&!M("Edge"),Zc=-1!=Cc.toLowerCase().indexOf("webkit")&&!M("Edge");function $c(){var a=p.document;return a?a.documentMode:void 0}var ad;\na:{var bd="",cd=function(){var a=Cc;if(Yc)return/rv:([^\\);]+)(\\)|;)/.exec(a);if(Xc)return/Edge\\/([\\d\\.]+)/.exec(a);if(Wc)return/\\b(?:MSIE|rv)[: ]([^\\);]+)(\\)|;)/.exec(a);if(Zc)return/WebKit\\/(\\S+)/.exec(a);if(Vc)return/(?:Version)[ \\/]?(\\S+)/.exec(a)}();cd&&(bd=cd?cd[1]:"");if(Wc){var dd=$c();if(null!=dd&&dd>parseFloat(bd)){ad=String(dd);break a}}ad=bd}var ed={},fd;fd=p.document&&Wc?$c():void 0;function gd(a){var b=document;a=String(a);"application/xhtml+xml"===b.contentType&&(a=a.toLowerCase());return b.createElement(a)};function hd(a){p.setTimeout(function(){throw a;},0)}var id;\nfunction jd(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!M("Presto")&&(a=function(){var e=gd("IFRAME");e.style.display="none";Tc(e);document.documentElement.appendChild(e);var f=e.contentWindow;e=f.document;e.open();e.write(Qc());e.close();var g="callImmediate"+Math.random(),h="file:"==f.location.protocol?"*":f.location.protocol+"//"+f.location.host;e=ua(function(k){if(("*"==h||k.origin==h)&&k.data==g)this.port1.onmessage()},\nthis);f.addEventListener("message",e,!1);this.port1={};this.port2={postMessage:function(){f.postMessage(g,h)}}});if("undefined"!==typeof a&&!M("Trident")&&!M("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(void 0!==c.next){c=c.next;var e=c.Pa;c.Pa=null;e()}};return function(e){d.next={Pa:e};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in gd("SCRIPT")?function(e){var f=gd("SCRIPT");f.onreadystatechange=function(){f.onreadystatechange=null;\nf.parentNode.removeChild(f);f=null;e();e=null};document.documentElement.appendChild(f)}:function(e){p.setTimeout(e,0)}};function kd(a,b){ld||md();nd||(ld(),nd=!0);zc.add(a,b)}var ld;function md(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);ld=function(){a.then(od)}}else ld=function(){var b=od;!r(p.setImmediate)||p.Window&&p.Window.prototype&&!M("Edge")&&p.Window.prototype.setImmediate==p.setImmediate?(id||(id=jd()),id(b)):p.setImmediate(b)}}var nd=!1,zc=new vc;function od(){for(var a;a=yc();){try{a.a.call(a.b)}catch(b){hd(b)}uc(xc,a)}nd=!1};function pd(a){this.a=qd;this.j=void 0;this.f=this.b=this.c=null;this.g=this.i=!1;if(a!=ma)try{var b=this;a.call(void 0,function(c){rd(b,sd,c)},function(c){rd(b,td,c)})}catch(c){rd(this,td,c)}}var qd=0,sd=2,td=3;function ud(){this.next=this.c=this.b=this.f=this.a=null;this.g=!1}ud.prototype.reset=function(){this.c=this.b=this.f=this.a=null;this.g=!1};var vd=new tc(function(){return new ud},function(a){a.reset()});function wd(a,b,c){var d=vd.get();d.f=a;d.b=b;d.c=c;return d}\nfunction xd(a,b,c){yd(a,b,c,null)||kd(va(b,a))}function zd(a){return new pd(function(b,c){var d=a.length,e=[];if(d)for(var f=function(m,n){d--;e[m]=n;0==d&&b(e)},g=function(m){c(m)},h=0,k;h<a.length;h++)k=a[h],xd(k,va(f,h),g);else b(e)})}function Ad(){var a,b,c=new pd(function(d,e){a=d;b=e});return new Bd(c,a,b)}pd.prototype.then=function(a,b,c){return Cd(this,r(a)?a:null,r(b)?b:null,c)};pd.prototype.$goog_Thenable=!0;\npd.prototype.cancel=function(a){if(this.a==qd){var b=new Dd(a);kd(function(){Ed(this,b)},this)}};function Ed(a,b){if(a.a==qd)if(a.c){var c=a.c;if(c.b){for(var d=0,e=null,f=null,g=c.b;g&&(g.g||(d++,g.a==a&&(e=g),!(e&&1<d)));g=g.next)e||(f=g);e&&(c.a==qd&&1==d?Ed(c,b):(f?(d=f,d.next==c.f&&(c.f=d),d.next=d.next.next):Fd(c),Gd(c,e,td,b)))}a.c=null}else rd(a,td,b)}function Hd(a,b){a.b||a.a!=sd&&a.a!=td||Id(a);a.f?a.f.next=b:a.b=b;a.f=b}\nfunction Cd(a,b,c,d){var e=wd(null,null,null);e.a=new pd(function(f,g){e.f=b?function(h){try{var k=b.call(d,h);f(k)}catch(m){g(m)}}:f;e.b=c?function(h){try{var k=c.call(d,h);void 0===k&&h instanceof Dd?g(h):f(k)}catch(m){g(m)}}:g});e.a.c=a;Hd(a,e);return e.a}pd.prototype.Ea=function(a){this.a=qd;rd(this,sd,a)};pd.prototype.Ga=function(a){this.a=qd;rd(this,td,a)};\nfunction rd(a,b,c){a.a==qd&&(a===c&&(b=td,c=new TypeError("Promise cannot resolve to itself")),a.a=1,yd(c,a.Ea,a.Ga,a)||(a.j=c,a.a=b,a.c=null,Id(a),b!=td||c instanceof Dd||Jd(a,c)))}function yd(a,b,c,d){if(a instanceof pd)return Hd(a,wd(b||ma,c||null,d)),!0;if(a)try{var e=!!a.$goog_Thenable}catch(g){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;if(oa(a))try{var f=a.then;if(r(f))return Kd(a,f,b,c,d),!0}catch(g){return c.call(d,g),!0}return!1}\nfunction Kd(a,b,c,d,e){function f(k){h||(h=!0,d.call(e,k))}function g(k){h||(h=!0,c.call(e,k))}var h=!1;try{b.call(a,g,f)}catch(k){f(k)}}function Id(a){a.i||(a.i=!0,kd(a.P,a))}function Fd(a){var b=null;a.b&&(b=a.b,a.b=b.next,b.next=null);a.b||(a.f=null);return b}pd.prototype.P=function(){for(var a;a=Fd(this);)Gd(this,a,this.a,this.j);this.i=!1};\nfunction Gd(a,b,c,d){if(c==td&&b.b&&!b.g)for(;a&&a.g;a=a.c)a.g=!1;if(b.a)b.a.c=null,Ld(b,c,d);else try{b.g?b.f.call(b.c):Ld(b,c,d)}catch(e){Md.call(null,e)}uc(vd,b)}function Ld(a,b,c){b==sd?a.f.call(a.c,c):a.b&&a.b.call(a.c,c)}function Jd(a,b){a.g=!0;kd(function(){a.g&&Md.call(null,b)})}var Md=hd;function Dd(a){Da.call(this,a)}wa(Dd,Da);Dd.prototype.name="cancel";function Bd(a,b,c){this.a=a;this.b=b;this.reject=c};function Nd(a,b,c){this.type=a;this.data=b;this.a=Ad();this.Xa=Fa(this.Xa,this);this.reject=Fa(this.reject,this);this.priority=Od;c!==x&&(this.priority=c);this.b().add(this)}var Od=1,Pd={hc:0,ic:Od,gc:2};l=Nd.prototype;l.then=function(a,b,c){return this.a.a.then(a,b,c)};l.Xa=function(a){this.Z=3;this.a.b(a)};l.reject=function(a){this.Z=5;this.a.reject(a)};l.Z=0;\nl.cancel=function(){if(3>this.Z){this.c();var a=this.b(),b=this.priority,c=a.a[b].indexOf(this);-1<c?a.a[b].splice(c,1):this.Ma&&a.ca.qb(this.Ma);this.Z=4}};Nd.prototype.cancel=Nd.prototype.cancel;function Qd(a){var b;this.a={};for(b in Pd)this.a[Pd[b]]=[];this.ca=a;this.ca.addEventListener("allocatable",Fa(this.b,this))}t("H.util.JobManager",Qd);var Rd=Object.keys(Pd).map(function(a){return Pd[a]}).sort().reverse();Qd.prototype.add=function(a){Na(a,Nd,this.add,0);this.a[a.priority].push(a);this.b()};Qd.prototype.contains=function(a){return-1<this.a[a.priority].indexOf(a)};\nQd.prototype.b=function(){Rd.forEach(function(a){this.a[a]=this.a[a].filter(function(b){var c;if((c=this.ca.jc(b))!==Ia){var d=Fa(this.ca.qb,this.ca,c,b);b.Ma=c;b.then(d,d);b.Z=b.kc(c)?1:5}else return!0},this)},this)};function Sd(a,b,c){var d=[],e=arguments.length;a&&d.push(Ua(a));1<e&&(e=2<e&&Oa(c,void 0,void 0,void 0)?" out of ["+c[0]+"..."+c[1]+"]":"",d.push("("+b+e+")"));d=Error(d.join(" "));Object.setPrototypeOf(d,Sd.prototype);return d}wa(Sd,Error);t("H.lang.OutOfRangeError",Sd);Sd.prototype.name="OutOfRangeError";var Td="closure_listenable_"+(1E6*Math.random()|0),Ud=0;function Vd(a,b,c,d,e){this.listener=a;this.proxy=null;this.src=b;this.type=c;this.capture=!!d;this.ha=e;this.key=++Ud;this.T=this.da=!1}function Wd(a){a.T=!0;a.listener=null;a.proxy=null;a.src=null;a.ha=null};function Xd(a){this.src=a;this.a={};this.b=0}Xd.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.a[f];a||(a=this.a[f]=[],this.b++);var g=Yd(a,b,d,e);-1<g?(b=a[g],c||(b.da=!1)):(b=new Vd(b,this.src,f,!!d,e),b.da=c,a.push(b));return b};function Zd(a,b){var c=b.type;if(c in a.a){var d=a.a[c],e=Ea(d,b),f;(f=0<=e)&&Array.prototype.splice.call(d,e,1);f&&(Wd(b),0==a.a[c].length&&(delete a.a[c],a.b--))}}\nXd.prototype.S=function(a){a=a&&a.toString();var b=0,c;for(c in this.a)if(!a||c==a){for(var d=this.a[c],e=0;e<d.length;e++)++b,Wd(d[e]);delete this.a[c];this.b--}return b};function Yd(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.T&&f.listener==b&&f.capture==!!c&&f.ha==d)return e}return-1};var $d;($d=!Wc)||($d=9<=Number(fd));var ae=$d,be;\nif(be=Wc){var ce;if(Object.prototype.hasOwnProperty.call(ed,"9"))ce=ed["9"];else{for(var de=0,ee=Ac(String(ad)).split("."),fe=Ac("9").split("."),ge=Math.max(ee.length,fe.length),he=0;0==de&&he<ge;he++){var ie=ee[he]||"",je=fe[he]||"";do{var ke=/(\\d*)(\\D*)(.*)/.exec(ie)||["","","",""],le=/(\\d*)(\\D*)(.*)/.exec(je)||["","","",""];if(0==ke[0].length&&0==le[0].length)break;de=Bc(0==ke[1].length?0:parseInt(ke[1],10),0==le[1].length?0:parseInt(le[1],10))||Bc(0==ke[2].length,0==le[2].length)||Bc(ke[2],le[2]);\nie=ke[3];je=le[3]}while(0==de)}ce=ed["9"]=0<=de}be=!ce}var me=be,ne=function(){if(!p.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{p.addEventListener("test",ma,b),p.removeEventListener("test",ma,b)}catch(c){}return a}();function oe(a,b){K.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=0;this.key="";this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.pointerId=0;this.pointerType="";this.b=null;if(a){var c=this.type=a.type,d=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.currentTarget=b;if(b=a.relatedTarget){if(Yc){a:{try{Uc(b.nodeName);var e=!0;break a}catch(f){}e=\n!1}e||(b=null)}}else"mouseover"==c?b=a.fromElement:"mouseout"==c&&(b=a.toElement);this.relatedTarget=b;d?(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0);this.button=a.button;this.key=a.key||"";this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=\na.shiftKey;this.metaKey=a.metaKey;this.pointerId=a.pointerId||0;this.pointerType="string"===typeof a.pointerType?a.pointerType:pe[a.pointerType]||"";this.b=a;a.defaultPrevented&&this.c()}}wa(oe,K);var pe={2:"touch",3:"pen",4:"mouse"};oe.prototype.stopPropagation=function(){oe.U.stopPropagation.call(this);this.b.stopPropagation?this.b.stopPropagation():this.b.cancelBubble=!0};\noe.prototype.c=function(){oe.U.c.call(this);var a=this.b;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,me)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var qe="closure_lm_"+(1E6*Math.random()|0),re={},se=0;function te(a,b,c,d,e){if(d&&d.once)ue(a,b,c,d,e);else if("array"==na(b))for(var f=0;f<b.length;f++)te(a,b[f],c,d,e);else c=ve(c),a&&a[Td]?a.b.add(String(b),c,!1,oa(d)?!!d.capture:!!d,e):we(a,b,c,!1,d,e)}\nfunction we(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var g=oa(e)?!!e.capture:!!e,h=xe(a);h||(a[qe]=h=new Xd(a));c=h.add(b,c,d,g,f);if(!c.proxy){d=ye();c.proxy=d;d.src=a;d.listener=c;if(a.addEventListener)ne||(e=g),void 0===e&&(e=!1),a.addEventListener(b.toString(),d,e);else if(a.attachEvent)a.attachEvent(ze(b.toString()),d);else if(a.addListener&&a.removeListener)a.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");se++}}\nfunction ye(){var a=Ae,b=ae?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b}function ue(a,b,c,d,e){if("array"==na(b))for(var f=0;f<b.length;f++)ue(a,b[f],c,d,e);else c=ve(c),a&&a[Td]?a.b.add(String(b),c,!0,oa(d)?!!d.capture:!!d,e):we(a,b,c,!0,d,e)}\nfunction Be(a,b,c,d,e){if("array"==na(b))for(var f=0;f<b.length;f++)Be(a,b[f],c,d,e);else(d=oa(d)?!!d.capture:!!d,c=ve(c),a&&a[Td])?(a=a.b,b=String(b).toString(),b in a.a&&(f=a.a[b],c=Yd(f,c,d,e),-1<c&&(Wd(f[c]),Array.prototype.splice.call(f,c,1),0==f.length&&(delete a.a[b],a.b--)))):a&&(a=xe(a))&&(b=a.a[b.toString()],a=-1,b&&(a=Yd(b,c,d,e)),(c=-1<a?b[a]:null)&&Ce(c))}\nfunction Ce(a){if("number"!==typeof a&&a&&!a.T){var b=a.src;if(b&&b[Td])Zd(b.b,a);else{var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent?b.detachEvent(ze(c),d):b.addListener&&b.removeListener&&b.removeListener(d);se--;(c=xe(b))?(Zd(c,a),0==c.b&&(c.src=null,b[qe]=null)):Wd(a)}}}function ze(a){return a in re?re[a]:re[a]="on"+a}\nfunction De(a,b,c,d){var e=!0;if(a=xe(a))if(b=a.a[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.capture==c&&!f.T&&(f=Ee(f,d),e=e&&!1!==f)}return e}function Ee(a,b){var c=a.listener,d=a.ha||a.src;a.da&&Ce(a);return c.call(d,b)}\nfunction Ae(a,b){if(a.T)return!0;if(!ae){if(!b)a:{b=["window","event"];for(var c=p,d=0;d<b.length;d++)if(c=c[b[d]],null==c){b=null;break a}b=c}d=b;b=new oe(d,this);c=!0;if(!(0>d.keyCode||void 0!=d.returnValue)){a:{var e=!1;if(0==d.keyCode)try{d.keyCode=-1;break a}catch(g){e=!0}if(e||void 0==d.returnValue)d.returnValue=!0}d=[];for(e=b.currentTarget;e;e=e.parentNode)d.push(e);a=a.type;for(e=d.length-1;!b.a&&0<=e;e--){b.currentTarget=d[e];var f=De(d[e],a,!0,b);c=c&&f}for(e=0;!b.a&&e<d.length;e++)b.currentTarget=\nd[e],f=De(d[e],a,!1,b),c=c&&f}return c}return Ee(a,new oe(b,this))}function xe(a){a=a[qe];return a instanceof Xd?a:null}var Fe="__closure_events_fn_"+(1E9*Math.random()>>>0);function ve(a){if(r(a))return a;a[Fe]||(a[Fe]=function(b){return a.handleEvent(b)});return a[Fe]};function N(){J.call(this);this.b=new Xd(this);this.j=this;this.i=null}wa(N,J);N.prototype[Td]=!0;l=N.prototype;l.B=function(){return this.i};l.la=function(a){this.i=a};l.addEventListener=function(a,b,c,d){te(this,a,b,c,d)};l.removeEventListener=function(a,b,c,d){Be(this,a,b,c,d)};\nl.dispatchEvent=function(a){var b,c=this.B();if(c)for(b=[];c;c=c.B())b.push(c);c=this.j;var d=a.type||a;if("string"===typeof a)a=new K(a,c);else if(a instanceof K)a.target=a.target||c;else{var e=a;a=new K(d,c);Ba(a,e)}e=!0;if(b)for(var f=b.length-1;!a.a&&0<=f;f--){var g=a.currentTarget=b[f];e=g.N(d,!0,a)&&e}a.a||(g=a.currentTarget=c,e=g.N(d,!0,a)&&e,a.a||(e=g.N(d,!1,a)&&e));if(b)for(f=0;!a.a&&f<b.length;f++)g=a.currentTarget=b[f],e=g.N(d,!1,a)&&e;return e};\nl.v=function(){N.U.v.call(this);this.b&&this.b.S(void 0);this.i=null};l.N=function(a,b,c){a=this.b.a[String(a)];if(!a)return!0;a=a.concat();for(var d=!0,e=0;e<a.length;++e){var f=a[e];if(f&&!f.T&&f.capture==b){var g=f.listener,h=f.ha||f.src;f.da&&Zd(this.b,f);d=!1!==g.call(h,c)&&d}}return d&&0!=c.ab};t("H.util.EventTarget",N);N.prototype.la=N.prototype.la;N.prototype.setParentEventTarget=N.prototype.la;N.prototype.B=N.prototype.B;N.prototype.getParentEventTarget=N.prototype.B;N.prototype.addEventListener=N.prototype.addEventListener;N.prototype.addEventListener=N.prototype.addEventListener;N.prototype.removeEventListener=N.prototype.removeEventListener;N.prototype.removeEventListener=N.prototype.removeEventListener;N.prototype.dispatchEvent=N.prototype.dispatchEvent;\nN.prototype.dispatchEvent=N.prototype.dispatchEvent;N.prototype.s=N.prototype.s;N.prototype.dispose=N.prototype.s;N.prototype.L=N.prototype.L;N.prototype.addOnDisposeCallback=N.prototype.L;N.prototype.P=N.prototype.N;\nN.prototype.N=function(a,b,c){var d,e,f=!0;var g=c[c.currentTarget===c.target?"AT_TARGET":b?"CAPTURING_PHASE":(d=!0,"BUBBLING_PHASE")];if(!d||"pointerenter"!==(e=c.type)&&"pointerleave"!==e)c.eventPhase=g,f=N.prototype.P.apply(this,arguments),d&&this.B&&null===this.B()&&delete c.eventPhase;return f};N.prototype.Yb=function(a){for(var b,c=this;c&&(b=c.B())&&b!==a;)c=b;b||c.la(a)};N.prototype.setRootParentEventTarget=N.prototype.Yb;function Q(a){a=a||{};var b=a.callback;this.g=a.label;r(b)&&(this.callback=b);this.f=!!a.disabled;Q.U.constructor.call(this)}wa(Q,N);t("H.util.ContextItem",Q);Q.prototype.zb=function(){return this.g};Q.prototype.getLabel=Q.prototype.zb;Q.prototype.Xb=function(a){this.g!==a&&(this.g=a,this.dispatchEvent("update"));return this};Q.prototype.setLabel=Q.prototype.Xb;Q.prototype.Ob=function(){return this.f};Q.prototype.isDisabled=Q.prototype.Ob;\nQ.prototype.Wb=function(a){a!==this.f&&(this.f=a,this.dispatchEvent("update"));return this};Q.prototype.setDisabled=Q.prototype.Wb;var Ge=new Q;Q.SEPARATOR=Ge;function Ie(a){if(Ca.document){var b=document.createElement("canvas");b.width=b.height=1;b.getContext("2d",{lc:a})}}t("H.util.getPixelRatio",function(){return window.devicePixelRatio||1});Object.create(Ia,void 0);t("H.util.eval",function(a){return eval(a)});t("H.util.provide",function(a){var b=p.$jscomp;if(b&&("function"!=typeof b.wb?0:b.wb()))throw Error("goog.provide cannot be used within a module.");la(a,void 0)});function Je(){this.m=0}\nJe.prototype.next=function(a){if(9007199254740992===this.m)throw new Sd(a,this.m,[0,9007199254740991]);return this.m++};var Ke=new Je;Fa(Ke.next,Ke);function mc(){}var mb=Ha([]);Ha({});Ie(!0);Ie(!1);function Le(a,b,c){var d=Nb(+a,-90,90);if(b&&Ra(d))throw new y(b,c,a);return d}function Me(a,b,c){var d=+a;if(-180>d||180<d)d=Mb(d+180,360)-180;if(b&&Ra(d))throw new y(b,c,a);return d}function Ne(a,b,c){var d;if(a!==x&&Ra(d=+a)&&b)throw new y(b,c,a);return d}t("H.geo.isDBC",function(a,b){return 0>a!==0>b&&180<sb(b-a)});function R(){var a=R;if(!0===(Na(this,a)&&this.constructor===a))throw new TypeError("Illegal constructor "+Ua(a));}t("H.geo.AbstractGeometry",R);R.prototype.getBoundingBox=R.prototype.X;R.prototype.equals=R.prototype.F;R.prototype.oa="";R.prototype.va="";R.prototype.toString=function(){return this.eb([this.oa.toUpperCase()," "]).join("")};R.prototype.toString=R.prototype.toString;R.prototype.$b=function(){return{type:this.va,coordinates:this.cb()}};R.prototype.toGeoJSON=R.prototype.$b;\nR.prototype.ta=function(){return{type:this.oa,coordinates:this.ua(),boundingBox:this.X().ta()}};R.prototype.forWorkerMessage=R.prototype.ta;function S(a,b,c){this.lat=Le(a,S,0);this.lng=Me(b,S,1);c!==x&&(this.alt=Ne(c,S,2))}wa(S,R);t("H.geo.Point",S);S.prototype.F=function(a){return this===a||!!a&&this.lat===a.lat&&this.lng===a.lng&&(this.alt||0)===(a.alt||0)};S.prototype.equals=S.prototype.F;S.prototype.ra=function(a){if(this===a||this.lat===a.lat&&this.lng===a.lng)a=0;else{var b=this.lat*Ib;var c=a.lat*Ib;a=1.274200158E7*yb(nb(1,ub(vb(xb((b-c)/2),2)+zb(b)*zb(c)*vb(xb((this.lng*Ib-a.lng*Ib)/2),2))))}return a};\nS.prototype.distance=S.prototype.ra;\nS.prototype.dc=function(a,b,c){var d;if(c){if(d=b/6371000.79){b=a*Ib;a=Ib*this.lat;var e=xb(a);c=xb(d);var f=zb(d);d=Ib*this.lng;var g=zb(a);a=yb(g*zb(b)*c+e*f);b=Cb(xb(b)*g*c,f-e*xb(a));b=(d+b+E)%(2*E)-E;b*=Kb;e=new S(a*Kb,(b+540)%360-180)}return e||this}a=(a%360+360)%360;if(0===(a+90)%180)return a=this.lng+b/(6371000.79*Gb*zb(this.lat*Ib))*(270===a?-360:360),new S(this.lat,(a+540)%360-180);if(b/=6371000.79)a*=Ib,e=this.lat*Ib,c=this.lng*Ib,d=e+b*zb(a),f=d-e,g=tb(Ab(d/2+Fb)/Ab(e/2+Fb)),g=Ra(f/g)?\nzb(e):f/g,a=b*xb(a)/g,sb(d)>Eb&&(d=0<d?E-d:-(E+d)),d=new S(d*Kb,((c+a+Hb+(sb(e+f)>Eb?E:0))%Gb-E)*Kb);return d||this};S.prototype.walk=S.prototype.dc;S.prototype.X=function(){return new V(this.lat,this.lng,this.lat,this.lng)};S.prototype.getBoundingBox=S.prototype.X;function Oe(a,b,c){var d=oa(a)&&!(Ra(a.lat=Le(a.lat))||Ra(a.lng=Me(a.lng))||a.alt!==x&&Ra(a.alt=Ne(a.alt)));if(!d&&b)throw new y(b,c,a);return d}S.validate=Oe;function Pe(a){if(!a)throw new y(Pe,0,a);return new S(a.lat,a.lng,a.alt)}\nS.fromIPoint=Pe;l=S.prototype;l.oa="Point";l.eb=function(a){a.push("(",this.lng," ",this.lat,")");return a};l.va="Point";l.cb=function(){return[this.lng,this.lat,this.alt||0]};l.ua=function(){return[this.lat,this.lng,this.alt||0]};function Qe(){}function Re(a){return nb(1,ob(0,.5-tb(Ab(Fb+Eb*a/180))/E/2))}Qe.prototype.ia=function(a,b,c){c?(c.x=b/360+.5,c.y=Re(a)):c=new F(b/360+.5,Re(a));return c};Qe.prototype.latLngToPoint=Qe.prototype.ia;Qe.prototype.tb=function(a,b){return this.ia(a.lat,a.lng,b)};Qe.prototype.geoToPoint=Qe.prototype.tb;function Se(a){return 0>=a?90:1<=a?-90:Kb*(2*Bb(wb(E*(1-2*a)))-Eb)}Qe.prototype.V=function(a,b,c){c?(c.lat=Se(b),c.lng=360*(1===a?1:Mb(a,1))-180):c=new S(Se(b),360*(1===a?1:Mb(a,1))-180);return c};\nQe.prototype.xyToGeo=Qe.prototype.V;Qe.prototype.Tb=function(a,b){return this.V(a.x,a.y,b)};Qe.prototype.pointToGeo=Qe.prototype.Tb;var Te=new Qe;t("H.geo.mercator",Te);t("H.util.constants.DEFAULT_MIN_ZOOM_LEVEL",0);t("H.util.constants.DEFAULT_MAX_ZOOM_LEVEL",22);function W(a,b){this.projection=a||Te;this.b=0;this.a=this.exp=tb(b||256)/Db;Ue(this);this.y=this.x=0}t("H.geo.PixelProjection",W);var Ve=sb(24)+sb(-8);W.prototype.Vb=Te;W.prototype.projection=W.prototype.Vb;W.prototype.x=0;W.prototype.x=W.prototype.x;W.prototype.y=0;W.prototype.y=W.prototype.y;W.prototype.cc=vb(2,Ve);W.prototype.w=W.prototype.cc;W.prototype.Jb=vb(2,Ve);W.prototype.h=W.prototype.Jb;\nW.prototype.ba=function(a){if(Ra(a))throw new y(this.ba,0,a);var b=this.x/this.w;var c=this.y/this.h;this.b=a;this.a=this.exp+a;Ue(this);this.x=b*this.w;this.y=c*this.h};W.prototype.rescale=W.prototype.ba;function Ue(a){a.a>Ve&&(a.a=Ve);a.w=vb(2,a.a);a.h=vb(2,a.a)}W.prototype.Ta=function(){return this.b||0};W.prototype.getZoomScale=W.prototype.Ta;W.prototype.sb=function(a,b){a=this.projection.ia(a.lat,a.lng,b);a.x=a.x*this.w-this.x;a.y=a.y*this.h-this.y;return a};W.prototype.geoToPixel=W.prototype.sb;\nW.prototype.Fa=function(a,b){return this.projection.V((a.x+this.x)/this.w,(a.y+this.y)/this.h,b)};W.prototype.pixelToGeo=W.prototype.Fa;W.prototype.V=function(a,b,c){return this.projection.V((a+this.x)/this.w,(b+this.y)/this.h,c)};W.prototype.xyToGeo=W.prototype.V;W.prototype.Ba=function(a,b,c){a=this.projection.ia(a,b,c);a.x=a.x*this.w-this.x;a.y=a.y*this.h-this.y;return a};W.prototype.latLngToPixel=W.prototype.Ba;W.prototype.Ub=function(a){return new F(a.x*this.w-this.x,a.y*this.h-this.y)};\nW.prototype.pointToPixel=W.prototype.Ub;t("H.util.Disposable",J);J.prototype.L=J.prototype.L;J.prototype.addOnDisposeCallback=J.prototype.L;t("H.util.dispose",function(a){a&&"function"==typeof a.s&&a.s()});J.prototype.s=J.prototype.s;J.prototype.dispose=J.prototype.s;J.prototype.v=J.prototype.v;J.prototype.disposeInternal=J.prototype.v;function We(a,b,c,d){if(!a||!b||!c)throw new y(We,x,"Must specify name, version and revision parameter");this.name=a;this.version=b;this.revision=c;d&&Ba(this,d)}t("H.util.BuildInfo",We);We.prototype.toString=function(){var a,b=[];for(a in this)Qa(this[a])&&b.push(this[a]);return b.join(";")};var Xe={};function Ye(a,b,c,d){if(!a)throw new y(Ye,1,"Must specify a name parameter");return Xe[a]||(Xe[a]=new We(a,b,c,d))}We.get=Ye;function Y(a,b,c,d,e,f){if(a&&b)this.Ka(a),this.ka(b),this.Ia(c),this.Ja(e),this.bb(f),this.ma(d);else throw new y(Y,x,\'Parameters "scheme" and "host" must be specified\');}t("H.service.Url",Y);\nfunction Ze(a,b){var c=Ca.document,d;var e="";if(c){e=c.createElement("a");if(b){var f=(d=c.getElementsByTagName("base")[0])&&d.href;var g=c.head;var h=d||g.appendChild(c.createElement("base"));h.href=b}e.href=a;e=e.href;b&&(d?d.href=f:g.removeChild(h))}else/[\\w]+:\\/\\//.test(a)&&(e=a);f=/(?:(\\w+):\\/\\/)?(?:([^:]+):([^@/]*)@)?([^/:]+)?(?:[:]{1}([0-9]+))?(\\/[^?#]*)?(\\?[^#]+)?(#.*)?/.exec(e);a=f[1];g=f[4];b=f[5];h=f[6];c=f[7];d=f[8];!f[2]&&g&&/@/.test(g)&&(g=g.split("@")[1]);f=Y;h=h&&0<h.length?h.substr(1):\n"";e={};var k,m;if(c)for(k=/([?&]?([^=&+]+))(=([^&]+))?/g;m=k.exec(c);)e[decodeURIComponent(m[2])]=m[4]?decodeURIComponent(m[4]):void 0;return new f(a,g,h,e,isNaN(+b)?void 0:+b,d&&0<d.length?d.substr(1):"")}Y.parse=Ze;Y.prototype.clone=function(){var a={},b;for(b in this.a)a[b]=this.a[b];return new Y(this.i,this.g,this.b,a,this.f,this.c)};Y.prototype.clone=Y.prototype.clone;\nY.prototype.Ka=function(a){if(!a||"string"!==typeof a)throw new y(this.Ka,0,\'The "scheme" parameter must be a non-empty string.\');this.i=a;return this};Y.prototype.setScheme=Y.prototype.Ka;Y.prototype.Gb=function(){return this.i};Y.prototype.getScheme=Y.prototype.Gb;Y.prototype.ka=function(a){if(!a||"string"!==typeof a||"-"===a.charAt(0)||"."===a.charAt(0)||"."===a.charAt(a.length-1))throw new y(this.ka,0,\'The "host" parameter is not a valid host name.\');this.g=a;return this};\nY.prototype.setHost=Y.prototype.ka;Y.prototype.yb=function(){return this.g};Y.prototype.getHost=Y.prototype.yb;Y.prototype.Ia=function(a){this.b=a||void 0;return this};Y.prototype.setPath=Y.prototype.Ia;Y.prototype.Db=function(){return this.b};Y.prototype.getPath=Y.prototype.Db;Y.prototype.ma=function(a){if(a)if("object"==typeof a)this.a=a;else throw new y(this.ma,0,\'Parameter "params" must be an object.\');else this.a={};return this};Y.prototype.setQuery=Y.prototype.ma;Y.prototype.Kb=function(){return!$e(this)};\nY.prototype.hasQuery=Y.prototype.Kb;Y.prototype.getQuery=function(){return this.a};Y.prototype.getQuery=Y.prototype.getQuery;Y.prototype.Ja=function(a){if(void 0===a)this.f=a;else{var b=Nb(+a<<0,0,65535);if(b!=a)throw new y(this.Ja,0,\'Parameter "port" must be an integer in range [0...65535]\');this.f=b}return this};Y.prototype.setPort=Y.prototype.Ja;Y.prototype.Eb=function(){return this.f};Y.prototype.getPort=Y.prototype.Eb;Y.prototype.bb=function(a){this.c=a||void 0;return this};\nY.prototype.setAnchor=Y.prototype.bb;Y.prototype.ub=function(){return this.c};Y.prototype.getAnchor=Y.prototype.ub;Y.prototype.R=function(a){if("object"!==typeof a)throw new y(this.R,0,\'Parameter "other" must be an object.\');var b=this.a,c;for(c in a)a.hasOwnProperty(c)&&"function"!==typeof a[c]&&(b[c]=a[c]);return this};Y.prototype.mergeQuery=Y.prototype.R;\nY.prototype.Na=function(a){if(!a||"string"!==typeof a)throw new y(this.Na,0,\'Parameter "subDomain" must be a non-empty string\');"."===a.substr(a.length-1)&&(a=a.substr(0,a.length-1));return this.ka(a+"."+this.g)};Y.prototype.addSubDomain=Y.prototype.Na;Y.prototype.Oa=function(a){if(!a||"string"!==typeof a)throw new y(this.Oa,0,\'Parameter "subPath" must be a non-empty string\');return this.Ia((this.b?this.b+"/":"")+a)};Y.prototype.addSubPath=Y.prototype.Oa;\nY.prototype.toString=function(){return[this.i+"://",this.g,this.f?":"+this.f:"",this.b||!$e(this)||this.c?"/":"",this.b?encodeURI(this.b):"",af(this),this.c?"#"+encodeURIComponent(this.c):""].join("")};Y.prototype.toString=Y.prototype.toString;function bf(a){return encodeURIComponent(a).replace(/[!\'()*]/g,function(b){return"%"+b.charCodeAt(0).toString(16)})}\nfunction af(a){var b=[],c=a.a,d={},e;for(e in c){if(c.hasOwnProperty(e)&&"function"!==typeof c[e]){var f=a.a[e];d.K=bf(e);Na(f,cf)?f.a.forEach(function(g){return function(h){b.push(g.K+"="+bf(h))}}(d)):Na(f,df)?b.push(d.K+"="+f.b.map(function(g){return bf(g)}).join(f.a)):b.push(void 0===f?d.K:d.K+"="+bf(f))}d={K:d.K}}return 0<b.length?"?"+b.join("&"):""}function $e(a){var b,c=0;for(b in a.a)if(a.a.hasOwnProperty(b)&&"function"!==typeof a.a[b]&&(c++,0<c))break;return!c}\nfunction ef(a,b){if(Oa(a,void 0,void 0,void 0))for(var c=0;c<a.length;c++){var d=a[c];if(!Qa(d)&&!Sa(d)){var e="The Array does not contain only strings and numbers";break}}else e="Not an Array";if(e)throw new y(b,0,a);return a}function cf(a){this.a=ef(a,cf)}Y.MultiValueQueryParameter=cf;cf.prototype.Ib=function(){return this.a};cf.prototype.getValues=cf.prototype.Ib;function df(a,b){this.b=ef(a,df);if(!/^[!\\$\\(\\)\\*\\+,;]$/.test(b))throw new y(df,1,\'Invalid delimiter "\'+b+\'"\');this.a=b}\nY.DelimitedQuerySubValues=df;var ff={};function gf(a){try{importScripts.apply(self,arguments)}catch(b){this.postError("invalid_script")}}function hf(a){delete ff[a];this.postMessage(a)}function jf(a,b,c){if(r(b))var d=b;else try{d=self.eval("("+b+")"),r(d)||(d=null)}catch(e){}d?(ff[a]=d,c||this.postMessage(a)):this.postError("invalid_processor")}function kf(a){this.b=a&&a[0];this.a=a&&a[1];this.c=a&&a[2]||[]}kf.prototype.postError=function(a){this.postMessage(a,x,0)};\nkf.prototype.postMessage=function(a,b,c){self.postMessage({processor:this.b,taskId:this.a,type:c===x?1:c,data:a},b||x)};function lf(a,b,c){if(!Qa(a))throw new y(lf,0,"InvalidArgument");if(!r(b))throw new y(lf,1,"InvalidArgument");var d=mf++;nf[d]={mimeType:c||of,ob:b};(new kf(["3",d,[]])).postMessage(a,[],2)}var nf={},mf=0;\nfunction pf(a,b){var c=a;if(nf[this.a]){var d=nf[this.a];var e=d.ob;delete nf[this.a];if(b)e(null,b);else{if(d.mimeType===qf){a=new Uint8Array(a);b=a.byteLength;d="";c=0;for(var f,g,h,k;c<b;)f=a[c++],192>f||(g=a[c++],224>f?f=(f&31)<<6|g&63:(h=a[c++],240>f?f=(f&15)<<12|(g&63)<<6|h&63:(k=a[c++],f=(f&7)<<18|(g&63)<<12|(h&63)<<6|k&63))),65536>f?d+=String.fromCharCode(f):(f-=65536,d+=String.fromCharCode((f>>10)+55296,(f&1023)+56320));c=d}e(c)}}}var of=0,qf=1;function V(a,b,c,d){rf(this,Le(a,V,0),Me(b,V,1),Le(c,V,2),Me(d,V,3))}wa(V,R);t("H.geo.Rect",V);V.prototype.oa="Polygon";V.prototype.eb=function(a){var b=this.f,c=this.a,d=this.c,e=this.b;a.push("(","(",c," ",b,",",e," ",b,",",e," ",d,",",c," ",d,",",c," ",b,")",")");return a};V.prototype.F=function(a){var b=this===a;!b&&Na(a,V)&&(b=this.f===a.f&&this.a===a.a&&this.c===a.c&&this.b===a.b);return b};V.prototype.equals=V.prototype.F;\nV.prototype.clone=function(){return new V(this.f,this.a,this.c,this.b)};V.prototype.clone=V.prototype.clone;function rf(a,b,c,d,e){a.a=c;a.b=e;b<d&&(c=b,b=d,d=c);a.f=b;a.c=d;a.j=a.g=a.i=null;return a}V.prototype.Sa=function(){this.j||(this.j=new S(this.f,this.a));return this.j};V.prototype.getTopLeft=V.prototype.Sa;V.prototype.Ra=function(){this.g||(this.g=new S(this.c,this.b));return this.g};V.prototype.getBottomRight=V.prototype.Ra;V.prototype.Hb=function(){return this.f};V.prototype.getTop=V.prototype.Hb;\nV.prototype.vb=function(){return this.c};V.prototype.getBottom=V.prototype.vb;V.prototype.Ab=function(){return this.a};V.prototype.getLeft=V.prototype.Ab;V.prototype.Fb=function(){return this.b};V.prototype.getRight=V.prototype.Fb;V.prototype.G=function(){this.i||(this.i=new S(this.c+(this.f-this.c)/2,sf(this.a,this.I())));return this.i};V.prototype.getCenter=V.prototype.G;V.prototype.I=function(){return tf(this.a,this.b)};V.prototype.getWidth=V.prototype.I;\nV.prototype.O=function(){return this.f-this.c};V.prototype.getHeight=V.prototype.O;V.prototype.Nb=function(){return this.a>this.b};V.prototype.isCDB=V.prototype.Nb;V.prototype.Pb=function(){return!this.I()&&!this.O()};V.prototype.isEmpty=V.prototype.Pb;V.prototype.X=function(){return new V(this.f,this.a,this.c,this.b)};V.prototype.getBoundingBox=V.prototype.X;\nV.prototype.ea=function(a,b,c){var d=this.G();c||(a=Le(a,this.ea,0),b=Me(b,this.ea,1));b=this.J(a,b,c);a=b.G();return a.lat===d.lat&&a.lng===d.lng&&this.O()===b.O()&&this.I()===b.I()};V.prototype.containsLatLng=V.prototype.ea;V.prototype.fa=function(a,b){b||Oe(a,this.fa,0);return this.ea(a.lat,a.lng,b)};V.prototype.containsPoint=V.prototype.fa;\nV.prototype.Qa=function(a,b){var c=this.G();if(!b&&!Na(a,V))throw new y(this.Qa,0,a);b=this.ja(a,b);a=b.G();return a.lat===c.lat&&a.lng===c.lng&&this.O()===b.O()&&this.I()===b.I()};V.prototype.containsRect=V.prototype.Qa;V.prototype.J=function(a,b,c,d){if(!c){if(Ra(a=Le(a)))throw new y(this.J,0,a);if(Ra(b=Me(b)))throw new y(this.J,1,b);}return uf(this.f,this.a,this.c,this.b,a,b,a,b,d)};V.prototype.mergeLatLng=V.prototype.J;\nV.prototype.Ya=function(a,b,c){b||Oe(a,this.Ya,0);return this.J(a.lat,a.lng,b,c)};V.prototype.mergePoint=V.prototype.Ya;V.prototype.ja=function(a,b,c){if(!b&&!Na(a,V))throw new y(this.ja,0,a);return uf(this.f,this.a,this.c,this.b,a.f,a.a,a.c,a.b,c)};V.prototype.mergeRect=V.prototype.ja;V.prototype.$=function(a,b,c,d,e,f){e||(a=Le(a,this.$,0),b=Me(b,this.$,1),c=Le(c,this.$,2),d=Me(d,this.$,3));return uf(this.f,this.a,this.c,this.b,a,b,c,d,f)};V.prototype.mergeTopLeftBottomRight=V.prototype.$;\nV.prototype.Va=function(a,b){var c=this.a<=this.b,d=a.a<=a.b,e=this.a<a.b,f=a.a<this.b;if(!b&&!Na(a,V))throw new y(this.Va,0,a);return this.c<=a.f&&a.c<=this.f&&(!c&&(!d||e||f)||!d&&(e||f)||e&&f)};V.prototype.intersects=V.prototype.Va;function tf(a,b){a=b-a;return a+(0>a?360:0)}function sf(a,b){a+=b/2;return a-(180<a?360:0)}\nfunction uf(a,b,c,d,e,f,g,h,k){c=nb(c,g);a=ob(a,e);e=tf(b,d);var m=sf(b,e);g=tf(f,h);var n=sf(f,g)-m;n+=0>n-1E-6?360:0;if(180>n-1E-6){m=b;var q=h}else n=360-n,m=f,q=d;n=n+e/2+g/2;360<=n+5E-7?(m=-180,q=180):n-5E-7<e?(m=b,q=d):n-5E-7<g&&(m=f,q=h);return k?rf(k,a,m,c,q):new V(a,m,c,q)}V.merge=uf;function vf(a,b,c){c||(Oe(a,vf,0),Oe(b,vf,1));return new V(a.lat,a.lng,b.lat,b.lng)}V.fromPoints=vf;\nfunction wf(a,b){var c=1,d=a.length,e=null;var f=na(a);if("array"!=f&&("object"!=f||"number"!=typeof a.length))throw new y(wf,0,a);if(0<d)for(f=a[0],e=vf(f,f,b);c<d;c++)f=a[c],e.J(f.lat,f.lng,b,e);return e}V.coverPoints=wf;function xf(a,b){var c=3,d=a.length,e;if(!(b||a&&null!=a.length))throw new y(xf,0,a);if(0<d)for(e=new V(a[0],a[1],a[0],a[1]);c<d;c+=3)e.J(a[c],a[c+1],b,e);return e}V.coverLatLngAlts=xf;\nfunction yf(a,b){var c=1,d=a.length,e;if(b&&(!a||null==a.length))throw new y(yf,0,a);if(0<d)for(e=new V(a[0].f,a[0].a,a[0].c,a[0].b);c<d;c++)e.ja(a[c],b,e);return e}V.coverRects=yf;\nV.prototype.$a=function(a,b){var c=this.a,d=this.f,e=this.b,f=this.c,g=this.G().lng;Oe(a,this.$a,0);var h=a.lat-f-(d-f)/2;var k=a.lng-g;k=180<k||-180>k?-(g+a.lng):k;a=c+(0>k?2*k:0);a=-180>a?360+a:a;e+=0<k?2*k:0;e=180<e?e-360:e;d=0<h?d+2*h:d;90<=d&&(d=90);f=0>h?f+2*h:f;-90>=f&&(f=-90);return b?rf(b,d,a,f,e):new V(d,a,f,e)};V.prototype.resizeToCenter=V.prototype.$a;V.prototype.va="Polygon";\nV.prototype.cb=function(){return[[this.a,this.f,0],[this.b,this.f,0],[this.b,this.c,0],[this.a,this.c,0],[this.a,this.f,0]]};V.prototype.ta=function(){return this.ua()};V.prototype.ua=function(){return[this.f,this.a,this.c,this.b]};function zf(a,b,c,d){this.key="";this.x=a;this.y=b;this.b=c;this.Y=d;this.a=Ad()}zf.prototype.then=function(a,b,c){return this.a.a.then(a,b,c)};zf.prototype.reject=function(a){this.a.reject(a)};zf.prototype.cancel=function(){this.a.a.cancel()};zf.prototype.cancel=zf.prototype.cancel;function Af(a,b,c,d){var e=!!c,f,g=0,h=0,k=0,m=0,n=0,q,u=-1;var I=Ca.Float32Array;var L,w=[];if(b){b=Ja(b);a=Ja(a);e&&(f=Ja(c));c=b.length;d=d?1E-7:1E-5;for(L=new I(3*c);g<c;){I=b[g];var G=+I;var X=+a[g];e&&(q=+f[g]);Bf.test(I)?0<=u&&(0<g-u&&w.push(u,g+1),u=-1):0>u&&(u=g);g++;m=L[h++]=m+X*d;k=L[h++]=k+G*d;e&&(n=L[h]=n+q);h++}0<=u&&1<c-u&&w.push(u,c)}else L=new I(0);return{path:L,outlineIndices:w}}var Bf=/^-?0\\d/;\nfunction Cf(a,b){for(var c=0,d=a.length/3,e=new Ca.Array(d),f=0;c<d;)e[c++]=b.Ba(a[f],a[++f]),f+=2;return e};function Df(a,b){b=180/(1<<b);var c=a.lat+90;a=(a.lng+180)%360;var d=0;180==c&&d--;d+=Math.floor(c/b);return[d,Math.floor(a/b)]}var Ef=1/Math.pow(10,10);function Ff(a,b){var c=[],d=a.Sa();a=a.Ra();var e;180==a.lng&&(a.lng-=Ef);d=Df(d,b);a=Df(a,b);for(e=d[0];e>=a[0];e--)for(b=d[1];b<=a[1];b++)c.push(e,b);return c};function Gf(a,b){var c=a.tileSize||256;this.b={};this.j=Ze(a.serverUrl);this.g=b;this.fb=a.layerConfigs||[];this.i=a.projected;this.P=c;this.Ea=!1!==a.batchTiles;this.bc=a.horizontalMargin||0;this.gb=a.onlyOutline;this.ib=new W(x,c);this.f=new W(x,c);this.f.ba(22-Math.log(c)/Math.LN2+8)}wa(Gf,J);\nGf.prototype.kb=function(a,b,c){var d=this.P,e=this.bc,f={x:a*d-e,y:b*d};d={x:(a+1)*d-1+e,y:(b+1)*d-1};e=this.ib;e.ba(c);f=e.Fa(f);d=e.Fa(d);return Hf(this,new V(f.lat,f.lng,d.lat,d.lng),this.fb,{x:a,y:b,z:c})};Gf.prototype.jb=function(a,b,c,d,e){return Hf(this,new V(a,b,c,d),e)};\nfunction Hf(a,b,c,d){var e=If(c),f=e.length,g={},h,k=a.b,m=[],n=[];for(c=0;c<f;c++){var q=e[c];var u=q.layerId;var I=q.level;g[u]=q.columns;q=Ff(b,I);var L=q.length-1;for(h=0;h<L;h+=2){var w=[u,q[h+1],q[h],I].join("_");var G=k[w]||a.g.get(w);G||(G=new zf(q[h+1],q[h],I,u),G.key=w,k[w]=G,n.push(G));m.push(G)}}n.length&&(a.Ea?Jf(a,n):Kf(a,n));return zd(m.map(function(X){return X.then(Fa(this.Ga,this,X.Y,Lf(e))).then(Fa(this.hb,this,X,d||Mf)).then(Fa(this.ac,this,g[X.Y]))},a))}var Mf={x:0,y:0,z:0};\nGf.prototype.Ga=function(a,b,c){var d=c.Rows,e=d.length,f,g;if(e&&(f=b[a])){b=new C(c.Rows);var h=[];for(g=0;g<e;g++){var k=d[g];f(b.ga(g),a)&&h.push(k)}a={Rows:h};if(c=c.Meta)a.Meta=c}else a=c;return a};function Kf(a,b){function c(k,m,n){n?(delete a.b[k.key],k.reject(n)):Nf(a,k,m)}var d,e=b.length,f=a.j;for(d=0;d<e;d++){var g=b[d];var h=f.clone().R({tilex:g.x}).R({tiley:g.y}).R({level:g.b}).R({layer:g.Y});new lf(h.toString(),Fa(c,null,g),qf)}}\nfunction Jf(a,b){var c=b.length,d;for(d=0;d<c;d+=15){var e=b.slice(d,d+15);Of(a,e)}}function Of(a,b){var c=a.j.clone(),d=[],e=[],f=[],g=c.getQuery();b.length&&(b.forEach(function(h){d.push(h.x,h.y);e.push(h.b);f.push(h.Y)}),g.tilexy=d.join(","),g.layers=f.join(","),g.levels=e.join(","),c.ma(g),new lf(c.toString(),function(h,k){k?b.forEach(function(m){delete a.b[m.key];m.reject("error")}):Nf(a,b,h)},qf))}\nfunction Nf(a,b,c){var d=b.length,e;if(Oa(b,void 0,void 0,void 0)){var f=c.indexOf("[")+1;for(e=0;e<d;e++){var g=c.indexOf("]},{",f+3)+2;g<f&&(g=c.lastIndexOf("]}"));var h=c.substr(f,g-f);f=g+1;Pf(a,b[e],h)}}else Pf(a,b,c)}function Pf(a,b,c){try{var d=c.length;var e=b.key;delete a.b[e];a.g.add(e,b,2*d);var f=JSON.parse(c);b.a.b(f)}catch(g){b.reject(g.message)}}\nfunction Lf(a){var b={},c,d=a.length;for(c=0;c<d;c++){var e=a[c];if(e.rowFilter){var f=e.layerId;f=f!==x?f:e.layer;b[f]=Fa(e.rowFilter,e.rowFilterContext)}}return b}function Qf(a,b,c,d,e){return e?[new F(a,b),new F(c,b),new F(c,d),new F(a,d),new F(a,b)]:[a,b,c,b,c,d,a,d]}\nGf.prototype.hb=function(a,b,c){var d=this.f.Ta()-b.z,e=this.P<<d,f=50<<d,g=b.x*e;b=b.y*e;var h=g+e;e=b+e;var k=g-f,m=b-f,n=h+f;f=e+f;var q,u,I=c.Rows,L=I.length,w,G=/^ADAS/.test(a.Y),X=this.f,qa=this.gb,O,bb=[],Ka=[],La=[],cb=[];for(a=0;a<L;a++){var z=w=I[a];var T=(O=G)?"HPY":"LAT";var U=O?"HPX":"LON";var da=O?"HPZ":"ZLEVEL";if(z[T]){var P=Af(z[T],z[U],z[da],O);z.geometry=P;delete z[T];delete z[U];delete z[da];if(z.INNER_LAT)for(T=z.INNER_LAT.split(";"),P=z.INNER_LON.split(";"),delete z.INNER_LAT,\ndelete z.INNER_LON,z.interiors=da=[],U=T.length,z=0;z<U;z++)da.push(Af(T[z],P[z],"",O))}if(this.i){U=w;z=X;P=U.$$projected$$;T=0;if(!P){var Z=U.geometry;O=Cf(Z.path,z);w=[O];U.$$projected$$=P={Sb:w};U=(da=U.interiors)?da.length:0;w.length+=U;T|=+Rf(w,O,Z.outlineIndices);if(U)for(P.Lb=1,q=0;q<U;q++)Z=da[q],O=Cf(Z.path,z),w[1+q]=O,T|=+Rf(w,O,Z.outlineIndices);T&&(P.Qb=1+U)}z=P;O=z.Sb;w=z.Lb;var Fc=z.Qb;P=[];T=U=Lb;var db=da=x;z=O[0];if(1===z.length){var Gc=Gc||(Gc=Qf(g,b,h,e,!1));w=z[0];Rb(w.x,w.y,\nGc)&&P.push(Sf(z,g,b,d))}else{var He=O.length;for(Z=qa?Fc:0;Z<He&&(qa||!Z||P.length);Z++)if(z=O[Z],Z>=Fc){Z===Fc&&(T=P.length);var ia=Ub([z],k,m,n,f,!1);Tf(ia,g,b,d,P)}else{var Jb=Jb||(Jb=Qf(k,m,n,f,!0));if(Z>=w)if(Z===w&&(U=P.length),db)for(q=db.length;q--;){if(ia=Uf(db[q],z),u=ia.length){for(da=da||[];u--;)da.push(q);Tf(ia,g,b,d,P)}}else ia=Uf(Jb,z),Tf(ia,g,b,d,P);else if(ia=Uf(Jb,z),Tf(ia,g,b,d,P),1<ia.length&&w<He)for(db=[],q=ia.length;q--;)db[q]=ia[q]}}P.length&&(bb[a]=P,Ka[a]=U,La[a]=da,cb[a]=\nT)}}return{Zb:c,pb:bb,Mb:Ka,rb:La,Rb:cb}};function Rf(a,b,c){for(var d=c.length,e=0,f,g,h=b.length;e<d;)f=c[e++],g=c[e++],a.push(g-f===h?b:b.slice(f,g));return 0<c.length}function Uf(a,b){var c,d=[];if(c=Wb(a,b)){do{a=[];b=c;do a.push(b);while(b=b.next);d.push(a)}while(c=c.Za)}else Sb(b[0],Tb(a))?d.push(b):Sb(a[0],Tb(b))&&d.push(a);return d}function Tf(a,b,c,d,e){for(var f=0,g=a.length;f<g;f++)e.push(Sf(a[f],b,c,d))}\nfunction Sf(a,b,c,d){var e,f=a.length,g=new Int32Array(2*f),h=0;for(e=0;e<f;e++){var k=a[e];g[h++]=k.x-b>>d;g[h++]=k.y-c>>d}return g}\nGf.prototype.ac=function(a,b){var c=b.Zb,d=b.pb,e=b.Mb,f=b.Rb;b=b.rb;for(var g=[],h,k={Rows:g},m,n=a?a.length:0,q=0,u,I=c.Rows,L=I.length,w;q<L;q+=1)if(d[q]||!this.i){h={};u=I[q];if(n)for(m=0;m<n;m++)u.hasOwnProperty(a[m])&&(h[a[m]]=u[a[m]]);else for(w in u)"$$projected$$"!==w&&(h[w]=u[w]);u.geometry&&(h.geometry=u.geometry);m=void 0;var G,X=h,qa=d[q],O=e[q],bb=b[q],Ka=f[q],La=g;if(qa){var cb=qa.length;if(bb)for(G=O;G--;){if(G){var z={};for(m in X)z[m]=X[m]}else z=X;u=[qa[G]];var T=nb(cb,Ka)-O;for(h=\n0;h<T;h++)bb[h]===G&&u.push(qa[O+h]);T=u.length;if(!G)for(h=Ka;h<cb;h++)u.push(qa[h]);z.$HProjGeometry={paths:u,interiorsIndex:1,outlinesIndex:T};La.push(z)}else X.$HProjGeometry={paths:qa,interiorsIndex:O,outlinesIndex:Ka},La.push(X)}else La.push(X)}c.Meta&&(k.Meta=c.Meta);return k};Gf.prototype.v=function(){var a,b=this.b;for(a in b)b.hasOwnProperty(a)&&(b[a].reject("disposed"),delete b[a])};Gf.prototype.disposeInternal=Gf.prototype.v;\nfunction If(a){for(var b=[],c,d=a.length,e=0;e<d;e++){c=za(a[e]);if(c.rowFilter&&(c.rowFilter=eval("("+c.rowFilter+")"),!r(c.rowFilter)))throw Error("Invalid row filter for layer "+c.layerId);b.push(c)}return b};t("H.service.extension.worker.processor",function(a,b,c){function d(h){e.postMessage(h)}var e=this,f=ya[a];var g=function(h){e.postError(h.toString())};if(0===b)f||(ya[a]=new Gf(c,Vf)),this.postMessage(void 0);else if(f)switch(b){case 1:try{f.kb.apply(f,c).then(d,g)}catch(h){this.postError(h.message)}break;case 2:try{f.jb.apply(f,c).then(d,g)}catch(h){this.postError(h.message)}break;case 3:f.s();delete ya[a];xa()&&Vf.S();break;default:e.postError("Unsupported command")}});\nvar Vf=new A(26214400),ya=Object.create(Ia,void 0);function Wf(a,b,c){var d=a[b];a=a[b+1];this.Ua=[];this.La=0;this.b=b;this.a=[a-c,d-c,a+c,d+c]}Wf.prototype.fa=function(a,b){var c=a[b];a=a[b+1];b=this.a;return b[1]<=c&&c<=b[3]&&b[0]<=a&&a<=b[2]};Wf.prototype.G=function(){return this.b};var Xf=new F(0,0);function Yf(a,b,c,d,e){d[e]=b;d[e+1]=a}var Zf=new W;function $f(a,b,c,d,e){Zf.Ba(a,b,Xf);d[e]=Xf.x;d[e+1]=Xf.y}\nt("H.clustering.dynamicgrid.worker",function(a,b,c,d,e){var f=e?Yf:$f,g=0;e=!!self.ArrayBuffer;var h=a.byteLength?new Float64Array(a):a,k=h.length/3;a=[];var m=[],n=[],q=e?new Float64Array(2*k):[];k=0;var u=0;for(Zf.ba(d);g<h.length;){var I=h[g++];var L=h[g++];var w=h[g++];f(w,L,d,q,u);for(w=a.length;w--;)if(L=a[w],L.fa(q,u)){var G=L;break}G||(G=new Wf(q,u,b),a.push(G));w=u/2;G.La+=I||1;G.Ua.push(w);G=null;u+=2}for(w=a.length;w--;)L=a[w],b=L.La>=c,f=L.Ua,d=f.length,b?(m.push(d),m=m.concat(f)):\n(k+=d,n=n.concat(f));c=[k].concat(n,m);c=e?(new Uint32Array(c)).buffer:c;this.postMessage(c,[c])});self.addEventListener("message",function(a){a=new kf(a.data);var b=ff[a.b];if(b)try{b.apply(a,a.c)}catch(c){a.postError(c.message)}else a.postError("processor_not_found")});(function(){var a=new kf;var b=function(c,d){jf.apply(a,[c,d,!0])};b("0",gf);b("1",jf);b("2",hf);b("3",pf)})();\n',function(){var f=function(){var target=(typeof self>"u"||!(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope))&&(module.exports||typeof window<"u"),__worker_src__,__worker_src_map__,__worker_src_origin__;target&&(__worker_src__=f.toString(),__worker_src_map__="",__worker_src_origin__=typeof document<"u"&&document.currentScript instanceof HTMLScriptElement?document.currentScript.src:""),function(){var toString={}.toString,classofRaw=function(e){return toString.call(e).slice(8,-1)},commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function unwrapExports(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function createCommonjsModule(e,n){return e(n={exports:{}},n.exports),n.exports}function getCjsExportFromNamespace(e){return e&&e.default||e}var commonjsHelpers=Object.freeze({commonjsGlobal,commonjsRequire,unwrapExports,createCommonjsModule,getCjsExportFromNamespace}),O="object",check=function(e){return e&&e.Math==Math&&e},global_1=check(typeof globalThis==O&&globalThis)||check(typeof window==O&&window)||check(typeof self==O&&self)||check(typeof commonjsGlobal==O&&commonjsGlobal)||Function("return this")(),fails=function(e){try{return!!e()}catch{return!0}},descriptors=!fails(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),isObject=function(e){return"object"==typeof e?null!==e:"function"==typeof e},document$1=global_1.document,exist=isObject(document$1)&&isObject(document$1.createElement),documentCreateElement=function(e){return exist?document$1.createElement(e):{}},ie8DomDefine=!descriptors&&!fails(function(){return 7!=Object.defineProperty(documentCreateElement("div"),"a",{get:function(){return 7}}).a}),anObject=function(e){if(!isObject(e))throw TypeError(String(e)+" is not an object");return e},toPrimitive=function(e,n){if(!isObject(e))return e;var r,d;if(n&&"function"==typeof(r=e.toString)&&!isObject(d=r.call(e))||"function"==typeof(r=e.valueOf)&&!isObject(d=r.call(e))||!n&&"function"==typeof(r=e.toString)&&!isObject(d=r.call(e)))return d;throw TypeError("Can't convert object to primitive value")},nativeDefineProperty=Object.defineProperty,f=descriptors?nativeDefineProperty:function(e,n,r){if(anObject(e),n=toPrimitive(n,!0),anObject(r),ie8DomDefine)try{return nativeDefineProperty(e,n,r)}catch{}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[n]=r.value),e},objectDefineProperty={f},createPropertyDescriptor=function(e,n){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:n}},hide=descriptors?function(e,n,r){return objectDefineProperty.f(e,n,createPropertyDescriptor(1,r))}:function(e,n,r){return e[n]=r,e},setGlobal=function(e,n){try{hide(global_1,e,n)}catch{global_1[e]=n}return n},isPure=!1,shared=createCommonjsModule(function(e){var n="__core-js_shared__",r=global_1[n]||setGlobal(n,{});(e.exports=function(d,m){return r[d]||(r[d]=void 0!==m?m:{})})("versions",[]).push({version:"3.1.0",mode:"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})}),id=0,postfix=Math.random(),uid=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++id+postfix).toString(36))},nativeSymbol=!fails(function(){return!String(Symbol())}),store=shared("wks"),Symbol$1=global_1.Symbol,wellKnownSymbol=function(e){return store[e]||(store[e]=nativeSymbol&&Symbol$1[e]||(nativeSymbol?Symbol$1:uid)("Symbol."+e))},TO_STRING_TAG=wellKnownSymbol("toStringTag"),CORRECT_ARGUMENTS="Arguments"==classofRaw(function(){return arguments}()),tryGet=function(e,n){try{return e[n]}catch{}},classof=function(e){var n,r,d;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=tryGet(n=Object(e),TO_STRING_TAG))?r:CORRECT_ARGUMENTS?classofRaw(n):"Object"==(d=classofRaw(n))&&"function"==typeof n.callee?"Arguments":d},TO_STRING_TAG$1=wellKnownSymbol("toStringTag"),test={};test[TO_STRING_TAG$1]="z";var objectToString="[object z]"!==String(test)?function(){return"[object "+classof(this)+"]"}:test.toString,hasOwnProperty={}.hasOwnProperty,has=function(e,n){return hasOwnProperty.call(e,n)},functionToString=shared("native-function-to-string",Function.toString),WeakMap=global_1.WeakMap,nativeWeakMap="function"==typeof WeakMap&&/native code/.test(functionToString.call(WeakMap)),shared$1=shared("keys"),sharedKey=function(e){return shared$1[e]||(shared$1[e]=uid(e))},hiddenKeys={},WeakMap$1=global_1.WeakMap,set,get,has$1,enforce=function(e){return has$1(e)?get(e):set(e,{})},getterFor=function(e){return function(n){var r;if(!isObject(n)||(r=get(n)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}},store$1,wmget,wmhas,wmset,set,get,has$1,STATE;has$1=nativeWeakMap?(store$1=new WeakMap$1,wmget=store$1.get,wmhas=store$1.has,wmset=store$1.set,set=function(e,n){return wmset.call(store$1,e,n),n},get=function(e){return wmget.call(store$1,e)||{}},function(e){return wmhas.call(store$1,e)}):(STATE=sharedKey("state"),hiddenKeys[STATE]=!0,set=function(e,n){return hide(e,STATE,n),n},get=function(e){return has(e,STATE)?e[STATE]:{}},function(e){return has(e,STATE)});var internalState={set,get,has:has$1,enforce,getterFor},redefine=createCommonjsModule(function(e){var n=internalState.get,r=internalState.enforce,d=String(functionToString).split("toString");shared("inspectSource",function(m){return functionToString.call(m)}),(e.exports=function(m,g,v,w){var k=!!w&&!!w.unsafe,j=!!w&&!!w.enumerable,G=!!w&&!!w.noTargetGet;"function"==typeof v&&("string"!=typeof g||has(v,"name")||hide(v,"name",g),r(v).source=d.join("string"==typeof g?g:"")),m!==global_1?(k?!G&&m[g]&&(j=!0):delete m[g],j?m[g]=v:hide(m,g,v)):j?m[g]=v:setGlobal(g,v)})(Function.prototype,"toString",function(){return"function"==typeof this&&n(this).source||functionToString.call(this)})}),ObjectPrototype=Object.prototype;objectToString!==ObjectPrototype.toString&&redefine(ObjectPrototype,"toString",objectToString,{unsafe:!0});var ceil=Math.ceil,floor=Math.floor,toInteger=function(e){return isNaN(e=+e)?0:(0<e?floor:ceil)(e)},requireObjectCoercible=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},stringAt=function(e,n,r){var d,m,g=String(requireObjectCoercible(e)),v=toInteger(n),w=g.length;return v<0||w<=v?r?"":void 0:(d=g.charCodeAt(v))<55296||56319<d||v+1===w||(m=g.charCodeAt(v+1))<56320||57343<m?r?g.charAt(v):d:r?g.slice(v,v+2):m-56320+(d-55296<<10)+65536},nativePropertyIsEnumerable={}.propertyIsEnumerable,nativeGetOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,NASHORN_BUG=nativeGetOwnPropertyDescriptor&&!nativePropertyIsEnumerable.call({1:2},1),f$1=NASHORN_BUG?function(e){var n=nativeGetOwnPropertyDescriptor(this,e);return!!n&&n.enumerable}:nativePropertyIsEnumerable,objectPropertyIsEnumerable={f:f$1},split="".split,indexedObject=fails(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==classofRaw(e)?split.call(e,""):Object(e)}:Object,toIndexedObject=function(e){return indexedObject(requireObjectCoercible(e))},nativeGetOwnPropertyDescriptor$1=Object.getOwnPropertyDescriptor,f$2=descriptors?nativeGetOwnPropertyDescriptor$1:function(e,n){if(e=toIndexedObject(e),n=toPrimitive(n,!0),ie8DomDefine)try{return nativeGetOwnPropertyDescriptor$1(e,n)}catch{}if(has(e,n))return createPropertyDescriptor(!objectPropertyIsEnumerable.f.call(e,n),e[n])},objectGetOwnPropertyDescriptor={f:f$2},min=Math.min,toLength=function(e){return 0<e?min(toInteger(e),9007199254740991):0},max=Math.max,min$1=Math.min,toAbsoluteIndex=function(e,n){var r=toInteger(e);return r<0?max(r+n,0):min$1(r,n)},arrayIncludes=function(e){return function(n,r,d){var m,g=toIndexedObject(n),v=toLength(g.length),w=toAbsoluteIndex(d,v);if(e&&r!=r){for(;w<v;)if((m=g[w++])!=m)return!0}else for(;w<v;w++)if((e||w in g)&&g[w]===r)return e||w||0;return!e&&-1}},arrayIndexOf=arrayIncludes(!1),objectKeysInternal=function(e,n){var r,d=toIndexedObject(e),m=0,g=[];for(r in d)!has(hiddenKeys,r)&&has(d,r)&&g.push(r);for(;n.length>m;)has(d,r=n[m++])&&(~arrayIndexOf(g,r)||g.push(r));return g},enumBugKeys=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],hiddenKeys$1=enumBugKeys.concat("length","prototype"),f$3=Object.getOwnPropertyNames||function(e){return objectKeysInternal(e,hiddenKeys$1)},objectGetOwnPropertyNames={f:f$3},f$4=Object.getOwnPropertySymbols,objectGetOwnPropertySymbols={f:f$4},Reflect$1=global_1.Reflect,ownKeys=Reflect$1&&Reflect$1.ownKeys||function(e){var n=objectGetOwnPropertyNames.f(anObject(e)),r=objectGetOwnPropertySymbols.f;return r?n.concat(r(e)):n},copyConstructorProperties=function(e,n){for(var r=ownKeys(n),d=objectDefineProperty.f,m=objectGetOwnPropertyDescriptor.f,g=0;g<r.length;g++){var v=r[g];has(e,v)||d(e,v,m(n,v))}},replacement=/#|\.prototype\./,isForced=function(e,n){var r=data[normalize(e)];return r==POLYFILL||r!=NATIVE&&("function"==typeof n?fails(n):!!n)},normalize=isForced.normalize=function(e){return String(e).replace(replacement,".").toLowerCase()},data=isForced.data={},NATIVE=isForced.NATIVE="N",POLYFILL=isForced.POLYFILL="P",isForced_1=isForced,getOwnPropertyDescriptor=objectGetOwnPropertyDescriptor.f,_export=function(e,n){var r,d,m,g,v=e.target,w=e.global,k=e.stat,j=w?global_1:k?global_1[v]||setGlobal(v,{}):(global_1[v]||{}).prototype;if(j)for(r in n){if(m=n[r],d=e.noTargetGet?(g=getOwnPropertyDescriptor(j,r))&&g.value:j[r],!isForced_1(w?r:v+(k?".":"#")+r,e.forced)&&void 0!==d){if(typeof m==typeof d)continue;copyConstructorProperties(m,d)}(e.sham||d&&d.sham)&&hide(m,"sham",!0),redefine(j,r,m,e)}},toObject=function(e){return Object(requireObjectCoercible(e))},correctPrototypeGetter=!fails(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),IE_PROTO=sharedKey("IE_PROTO"),ObjectPrototype$1=Object.prototype,objectGetPrototypeOf=correctPrototypeGetter?Object.getPrototypeOf:function(e){return e=toObject(e),has(e,IE_PROTO)?e[IE_PROTO]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?ObjectPrototype$1:null},ITERATOR=wellKnownSymbol("iterator"),BUGGY_SAFARI_ITERATORS=!1,returnThis=function(){return this},IteratorPrototype,PrototypeOfArrayIteratorPrototype,arrayIterator;[].keys&&(arrayIterator=[].keys(),"next"in arrayIterator?(PrototypeOfArrayIteratorPrototype=objectGetPrototypeOf(objectGetPrototypeOf(arrayIterator)),PrototypeOfArrayIteratorPrototype!==Object.prototype&&(IteratorPrototype=PrototypeOfArrayIteratorPrototype)):BUGGY_SAFARI_ITERATORS=!0),null==IteratorPrototype&&(IteratorPrototype={}),has(IteratorPrototype,ITERATOR)||hide(IteratorPrototype,ITERATOR,returnThis);var iteratorsCore={IteratorPrototype,BUGGY_SAFARI_ITERATORS},objectKeys=Object.keys||function(e){return objectKeysInternal(e,enumBugKeys)},objectDefineProperties=descriptors?Object.defineProperties:function(e,n){anObject(e);for(var r,d=objectKeys(n),m=d.length,g=0;g<m;)objectDefineProperty.f(e,r=d[g++],n[r]);return e},document$2=global_1.document,html=document$2&&document$2.documentElement,IE_PROTO$1=sharedKey("IE_PROTO"),PROTOTYPE="prototype",Empty=function(){},createDict=function(){var e,n=documentCreateElement("iframe"),r=enumBugKeys.length;for(n.style.display="none",html.appendChild(n),n.src="javascript:",(e=n.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),createDict=e.F;r--;)delete createDict[PROTOTYPE][enumBugKeys[r]];return createDict()},objectCreate=Object.create||function(e,n){var r;return null!==e?(Empty[PROTOTYPE]=anObject(e),r=new Empty,Empty[PROTOTYPE]=null,r[IE_PROTO$1]=e):r=createDict(),void 0===n?r:objectDefineProperties(r,n)};hiddenKeys[IE_PROTO$1]=!0;var defineProperty=objectDefineProperty.f,TO_STRING_TAG$2=wellKnownSymbol("toStringTag"),setToStringTag=function(e,n,r){e&&!has(e=r?e:e.prototype,TO_STRING_TAG$2)&&defineProperty(e,TO_STRING_TAG$2,{configurable:!0,value:n})},iterators={},IteratorPrototype$1=iteratorsCore.IteratorPrototype,returnThis$1=function(){return this},createIteratorConstructor=function(e,n,r){var d=n+" Iterator";return e.prototype=objectCreate(IteratorPrototype$1,{next:createPropertyDescriptor(1,r)}),setToStringTag(e,d,!1,!0),iterators[d]=returnThis$1,e},validateSetPrototypeOfArguments=function(e,n){if(anObject(e),!isObject(n)&&null!==n)throw TypeError("Can't set "+String(n)+" as a prototype")},objectSetPrototypeOf=Object.setPrototypeOf||("__proto__"in{}?function(){var e,n=!1,r={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),n=r instanceof Array}catch{}return function(d,m){return validateSetPrototypeOfArguments(d,m),n?e.call(d,m):d.__proto__=m,d}}():void 0),ITERATOR$1=wellKnownSymbol("iterator"),IteratorPrototype$2=iteratorsCore.IteratorPrototype,BUGGY_SAFARI_ITERATORS$1=iteratorsCore.BUGGY_SAFARI_ITERATORS,KEYS="keys",VALUES="values",ENTRIES="entries",returnThis$2=function(){return this},defineIterator=function(e,n,r,d,m,g,v){function w(_u){if(_u===m&&ga)return ga;if(!BUGGY_SAFARI_ITERATORS$1&&_u in _r)return _r[_u];switch(_u){case KEYS:case VALUES:case ENTRIES:return function(){return new r(this,_u)}}return function(){return new r(this)}}createIteratorConstructor(r,n,d);var k,j,G,q=n+" Iterator",_t=!1,_r=e.prototype,_s=_r[ITERATOR$1]||_r["@@iterator"]||m&&_r[m],ga=!BUGGY_SAFARI_ITERATORS$1&&_s||w(m),_c="Array"==n&&_r.entries||_s;if(_c&&(k=objectGetPrototypeOf(_c.call(new e)),IteratorPrototype$2!==Object.prototype&&k.next&&(objectGetPrototypeOf(k)!==IteratorPrototype$2&&(objectSetPrototypeOf?objectSetPrototypeOf(k,IteratorPrototype$2):"function"!=typeof k[ITERATOR$1]&&hide(k,ITERATOR$1,returnThis$2)),setToStringTag(k,q,!0,!0))),m==VALUES&&_s&&_s.name!==VALUES&&(_t=!0,ga=function(){return _s.call(this)}),_r[ITERATOR$1]!==ga&&hide(_r,ITERATOR$1,ga),iterators[n]=ga,m)if(j={values:w(VALUES),keys:g?ga:w(KEYS),entries:w(ENTRIES)},v)for(G in j)!BUGGY_SAFARI_ITERATORS$1&&!_t&&G in _r||redefine(_r,G,j[G]);else _export({target:n,proto:!0,forced:BUGGY_SAFARI_ITERATORS$1||_t},j);return j},STRING_ITERATOR="String Iterator",setInternalState=internalState.set,getInternalState=internalState.getterFor(STRING_ITERATOR);defineIterator(String,"String",function(e){setInternalState(this,{type:STRING_ITERATOR,string:String(e),index:0})},function(){var e,n=getInternalState(this),r=n.string,d=n.index;return d>=r.length?{value:void 0,done:!0}:(e=stringAt(r,d,!0),n.index+=e.length,{value:e,done:!1})});var domIterables={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},UNSCOPABLES=wellKnownSymbol("unscopables"),ArrayPrototype=Array.prototype;null==ArrayPrototype[UNSCOPABLES]&&hide(ArrayPrototype,UNSCOPABLES,objectCreate(null));var addToUnscopables=function(e){ArrayPrototype[UNSCOPABLES][e]=!0},ARRAY_ITERATOR="Array Iterator",setInternalState$1=internalState.set,getInternalState$1=internalState.getterFor(ARRAY_ITERATOR),es_array_iterator=defineIterator(Array,"Array",function(e,n){setInternalState$1(this,{type:ARRAY_ITERATOR,target:toIndexedObject(e),index:0,kind:n})},function(){var e=getInternalState$1(this),n=e.target,r=e.kind,d=e.index++;return!n||d>=n.length?{value:e.target=void 0,done:!0}:"keys"==r?{value:d,done:!1}:"values"==r?{value:n[d],done:!1}:{value:[d,n[d]],done:!1}},"values");iterators.Arguments=iterators.Array,addToUnscopables("keys"),addToUnscopables("values"),addToUnscopables("entries");var ITERATOR$2=wellKnownSymbol("iterator"),TO_STRING_TAG$3=wellKnownSymbol("toStringTag"),ArrayValues=es_array_iterator.values;for(var COLLECTION_NAME in domIterables){var Collection=global_1[COLLECTION_NAME],CollectionPrototype=Collection&&Collection.prototype;if(CollectionPrototype){if(CollectionPrototype[ITERATOR$2]!==ArrayValues)try{hide(CollectionPrototype,ITERATOR$2,ArrayValues)}catch{CollectionPrototype[ITERATOR$2]=ArrayValues}if(CollectionPrototype[TO_STRING_TAG$3]||hide(CollectionPrototype,TO_STRING_TAG$3,COLLECTION_NAME),domIterables[COLLECTION_NAME])for(var METHOD_NAME in es_array_iterator)if(CollectionPrototype[METHOD_NAME]!==es_array_iterator[METHOD_NAME])try{hide(CollectionPrototype,METHOD_NAME,es_array_iterator[METHOD_NAME])}catch{CollectionPrototype[METHOD_NAME]=es_array_iterator[METHOD_NAME]}}}var aFunction=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},anInstance=function(e,n,r){if(!(e instanceof n))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return e},ITERATOR$3=wellKnownSymbol("iterator"),ArrayPrototype$1=Array.prototype,isArrayIteratorMethod=function(e){return void 0!==e&&(iterators.Array===e||ArrayPrototype$1[ITERATOR$3]===e)},bindContext=function(e,n,r){if(aFunction(e),void 0===n)return e;switch(r){case 0:return function(){return e.call(n)};case 1:return function(d){return e.call(n,d)};case 2:return function(d,m){return e.call(n,d,m)};case 3:return function(d,m,g){return e.call(n,d,m,g)}}return function(){return e.apply(n,arguments)}},ITERATOR$4=wellKnownSymbol("iterator"),getIteratorMethod=function(e){if(null!=e)return e[ITERATOR$4]||e["@@iterator"]||iterators[classof(e)]},callWithSafeIterationClosing=function(e,n,r,d){try{return d?n(anObject(r)[0],r[1]):n(r)}catch(g){var m=e.return;throw void 0!==m&&anObject(m.call(e)),g}},iterate=createCommonjsModule(function(e){var n={};(e.exports=function(r,d,m,g,v){var w,k,j,G,q,_t=bindContext(d,m,g?2:1);if(v)w=r;else{if("function"!=typeof(k=getIteratorMethod(r)))throw TypeError("Target is not iterable");if(isArrayIteratorMethod(k)){for(j=0,G=toLength(r.length);j<G;j++)if((g?_t(anObject(q=r[j])[0],q[1]):_t(r[j]))===n)return n;return}w=k.call(r)}for(;!(q=w.next()).done;)if(callWithSafeIterationClosing(w,_t,q.value,g)===n)return n}).BREAK=n}),ITERATOR$5=wellKnownSymbol("iterator"),SAFE_CLOSING=!1;try{var called=0,iteratorWithReturn={next:function(){return{done:!!called++}},return:function(){SAFE_CLOSING=!0}};iteratorWithReturn[ITERATOR$5]=function(){return this}}catch(e){}var checkCorrectnessOfIteration=function(e,n){if(!n&&!SAFE_CLOSING)return!1;var r=!1;try{var d={};d[ITERATOR$5]=function(){return{next:function(){return{done:r=!0}}}},e(d)}catch{}return r},SPECIES=wellKnownSymbol("species"),speciesConstructor=function(e,n){var r,d=anObject(e).constructor;return void 0===d||null==(r=anObject(d)[SPECIES])?n:aFunction(r)},location=global_1.location,set$1=global_1.setImmediate,clear=global_1.clearImmediate,process=global_1.process,MessageChannel=global_1.MessageChannel,Dispatch=global_1.Dispatch,counter=0,queue={},ONREADYSTATECHANGE="onreadystatechange",defer,channel,port,run=function(e){var n;queue.hasOwnProperty(e)&&(n=queue[e],delete queue[e],n())},runner=function(e){return function(){run(e)}},listener=function(e){run(e.data)},post=function(e){global_1.postMessage(e+"",location.protocol+"//"+location.host)};set$1&&clear||(set$1=function(e){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);return queue[++counter]=function(){("function"==typeof e?e:Function(e)).apply(void 0,n)},defer(counter),counter},clear=function(e){delete queue[e]},"process"==classofRaw(process)?defer=function(e){process.nextTick(runner(e))}:Dispatch&&Dispatch.now?defer=function(e){Dispatch.now(runner(e))}:MessageChannel?(channel=new MessageChannel,port=channel.port2,channel.port1.onmessage=listener,defer=bindContext(port.postMessage,port,1)):!global_1.addEventListener||"function"!=typeof postMessage||global_1.importScripts||fails(post)?defer=ONREADYSTATECHANGE in documentCreateElement("script")?function(e){html.appendChild(documentCreateElement("script"))[ONREADYSTATECHANGE]=function(){html.removeChild(this),run(e)}}:function(e){setTimeout(runner(e),0)}:(defer=post,global_1.addEventListener("message",listener,!1)));var task={set:set$1,clear},navigator$1=global_1.navigator,userAgent=navigator$1&&navigator$1.userAgent||"",getOwnPropertyDescriptor$1=objectGetOwnPropertyDescriptor.f,macrotask=task.set,MutationObserver=global_1.MutationObserver||global_1.WebKitMutationObserver,process$1=global_1.process,Promise$1=global_1.Promise,IS_NODE="process"==classofRaw(process$1),queueMicrotaskDescriptor=getOwnPropertyDescriptor$1(global_1,"queueMicrotask"),queueMicrotask=queueMicrotaskDescriptor&&queueMicrotaskDescriptor.value,flush,head,last,notify,toggle,node,promise;queueMicrotask||(flush=function(){var e,n;for(IS_NODE&&(e=process$1.domain)&&e.exit();head;){n=head.fn,head=head.next;try{n()}catch(r){throw head?notify():last=void 0,r}}last=void 0,e&&e.enter()},notify=IS_NODE?function(){process$1.nextTick(flush)}:MutationObserver&&!/(iphone|ipod|ipad).*applewebkit/i.test(userAgent)?(toggle=!0,node=document.createTextNode(""),new MutationObserver(flush).observe(node,{characterData:!0}),function(){node.data=toggle=!toggle}):Promise$1&&Promise$1.resolve?(promise=Promise$1.resolve(void 0),function(){promise.then(flush)}):function(){macrotask.call(global_1,flush)});var microtask=queueMicrotask||function(e){var n={fn:e,next:void 0};last&&(last.next=n),head||(head=n,notify()),last=n},PromiseCapability=function(e){var n,r;this.promise=new e(function(d,m){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=d,r=m}),this.resolve=aFunction(n),this.reject=aFunction(r)},f$5=function(e){return new PromiseCapability(e)},newPromiseCapability={f:f$5},promiseResolve=function(e,n){if(anObject(e),isObject(n)&&n.constructor===e)return n;var r=newPromiseCapability.f(e);return(0,r.resolve)(n),r.promise},hostReportErrors=function(e,n){var r=global_1.console;r&&r.error&&(1===arguments.length?r.error(e):r.error(e,n))},perform=function(e){try{return{error:!1,value:e()}}catch(n){return{error:!0,value:n}}},redefineAll=function(e,n,r){for(var d in n)redefine(e,d,n[d],r);return e},path=global_1,aFunction$1=function(e){return"function"==typeof e?e:void 0},getBuiltIn=function(e,n){return arguments.length<2?aFunction$1(path[e])||aFunction$1(global_1[e]):path[e]&&path[e][n]||global_1[e]&&global_1[e][n]},SPECIES$1=wellKnownSymbol("species"),setSpecies=function(e){var n=getBuiltIn(e);descriptors&&n&&!n[SPECIES$1]&&(0,objectDefineProperty.f)(n,SPECIES$1,{configurable:!0,get:function(){return this}})},PROMISE="Promise",task$1=task.set,SPECIES$2=wellKnownSymbol("species"),getInternalState$2=internalState.get,setInternalState$2=internalState.set,getInternalPromiseState=internalState.getterFor(PROMISE),PromiseConstructor=global_1[PROMISE],TypeError$1=global_1.TypeError,document$3=global_1.document,process$2=global_1.process,$fetch=global_1.fetch,versions=process$2&&process$2.versions,v8=versions&&versions.v8||"",newPromiseCapability$1=newPromiseCapability.f,newGenericPromiseCapability=newPromiseCapability$1,IS_NODE$1="process"==classofRaw(process$2),DISPATCH_EVENT=!!(document$3&&document$3.createEvent&&global_1.dispatchEvent),UNHANDLED_REJECTION="unhandledrejection",REJECTION_HANDLED="rejectionhandled",PENDING=0,FULFILLED=1,REJECTED=2,HANDLED=1,UNHANDLED=2,Internal,OwnPromiseCapability,PromiseWrapper,FORCED=isForced_1(PROMISE,function(){function e(){}var n=PromiseConstructor.resolve(1),r=(n.constructor={})[SPECIES$2]=function(d){d(e,e)};return!((IS_NODE$1||"function"==typeof PromiseRejectionEvent)&&(!isPure||n.finally)&&n.then(e)instanceof r&&0!==v8.indexOf("6.6")&&-1===userAgent.indexOf("Chrome/66"))}),INCORRECT_ITERATION=FORCED||!checkCorrectnessOfIteration(function(e){PromiseConstructor.all(e).catch(function(){})}),isThenable=function(e){var n;return!(!isObject(e)||"function"!=typeof(n=e.then))&&n},notify$1=function(e,n,r){var d;n.notified||(n.notified=!0,d=n.reactions,microtask(function(){for(var m=n.value,g=n.state==FULFILLED,v=0;d.length>v;)!function(w){var k,j,G,q=g?w.ok:w.fail,_t=w.resolve,_r=w.reject,_s=w.domain;try{q?(g||(n.rejection===UNHANDLED&&onHandleUnhandled(e,n),n.rejection=HANDLED),!0===q?k=m:(_s&&_s.enter(),k=q(m),_s&&(_s.exit(),G=!0)),k===w.promise?_r(TypeError$1("Promise-chain cycle")):(j=isThenable(k))?j.call(k,_t,_r):_t(k)):_r(m)}catch(ga){_s&&!G&&_s.exit(),_r(ga)}}(d[v++]);n.reactions=[],n.notified=!1,r&&!n.rejection&&onUnhandled(e,n)}))},dispatchEvent=function(e,n,r){var d,m;DISPATCH_EVENT?((d=document$3.createEvent("Event")).promise=n,d.reason=r,d.initEvent(e,!1,!0),global_1.dispatchEvent(d)):d={promise:n,reason:r},(m=global_1["on"+e])?m(d):e===UNHANDLED_REJECTION&&hostReportErrors("Unhandled promise rejection",r)},onUnhandled=function(e,n){task$1.call(global_1,function(){var r,d=n.value;if(isUnhandled(n)&&(r=perform(function(){IS_NODE$1?process$2.emit("unhandledRejection",d,e):dispatchEvent(UNHANDLED_REJECTION,e,d)}),n.rejection=IS_NODE$1||isUnhandled(n)?UNHANDLED:HANDLED,r.error))throw r.value})},isUnhandled=function(e){return e.rejection!==HANDLED&&!e.parent},onHandleUnhandled=function(e,n){task$1.call(global_1,function(){IS_NODE$1?process$2.emit("rejectionHandled",e):dispatchEvent(REJECTION_HANDLED,e,n.value)})},bind=function(e,n,r,d){return function(m){e(n,r,m,d)}},internalReject=function(e,n,r,d){n.done||(n.done=!0,d&&(n=d),n.value=r,n.state=REJECTED,notify$1(e,n,!0))},internalResolve=function(e,n,r,d){if(!n.done){n.done=!0,d&&(n=d);try{if(e===r)throw TypeError$1("Promise can't be resolved itself");var m=isThenable(r);m?microtask(function(){var g={done:!1};try{m.call(r,bind(internalResolve,e,g,n),bind(internalReject,e,g,n))}catch(v){internalReject(e,g,v,n)}}):(n.value=r,n.state=FULFILLED,notify$1(e,n,!1))}catch(g){internalReject(e,{done:!1},g,n)}}};FORCED&&(PromiseConstructor=function(e){anInstance(this,PromiseConstructor,PROMISE),aFunction(e),Internal.call(this);var n=getInternalState$2(this);try{e(bind(internalResolve,this,n),bind(internalReject,this,n))}catch(r){internalReject(this,n,r)}},Internal=function(){setInternalState$2(this,{type:PROMISE,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:PENDING,value:void 0})},Internal.prototype=redefineAll(PromiseConstructor.prototype,{then:function(e,n){var r=getInternalPromiseState(this),d=newPromiseCapability$1(speciesConstructor(this,PromiseConstructor));return d.ok="function"!=typeof e||e,d.fail="function"==typeof n&&n,d.domain=IS_NODE$1?process$2.domain:void 0,r.parent=!0,r.reactions.push(d),r.state!=PENDING&&notify$1(this,r,!1),d.promise},catch:function(e){return this.then(void 0,e)}}),OwnPromiseCapability=function(){var e=new Internal,n=getInternalState$2(e);this.promise=e,this.resolve=bind(internalResolve,e,n),this.reject=bind(internalReject,e,n)},newPromiseCapability.f=newPromiseCapability$1=function(e){return e===PromiseConstructor||e===PromiseWrapper?new OwnPromiseCapability(e):newGenericPromiseCapability(e)},"function"==typeof $fetch&&_export({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return promiseResolve(PromiseConstructor,$fetch.apply(global_1,arguments))}})),_export({global:!0,wrap:!0,forced:FORCED},{Promise:PromiseConstructor}),setToStringTag(PromiseConstructor,PROMISE,!1,!0),setSpecies(PROMISE),PromiseWrapper=path[PROMISE],_export({target:PROMISE,stat:!0,forced:FORCED},{reject:function(e){var n=newPromiseCapability$1(this);return n.reject.call(void 0,e),n.promise}}),_export({target:PROMISE,stat:!0,forced:FORCED},{resolve:function(e){return promiseResolve(this,e)}}),_export({target:PROMISE,stat:!0,forced:INCORRECT_ITERATION},{all:function(e){var n=this,r=newPromiseCapability$1(n),d=r.resolve,m=r.reject,g=perform(function(){var v=aFunction(n.resolve),w=[],k=0,j=1;iterate(e,function(G){var q=k++,_t=!1;w.push(void 0),j++,v.call(n,G).then(function(_r){_t||(_t=!0,w[q]=_r,--j||d(w))},m)}),--j||d(w)});return g.error&&m(g.value),r.promise},race:function(e){var n=this,r=newPromiseCapability$1(n),d=r.reject,m=perform(function(){var g=aFunction(n.resolve);iterate(e,function(v){g.call(n,v).then(r.resolve,d)})});return m.error&&d(m.value),r.promise}}),_export({target:"Promise",proto:!0,real:!0},{finally:function(e){var n=speciesConstructor(this,getBuiltIn("Promise")),r="function"==typeof e;return this.then(r?function(d){return promiseResolve(n,e()).then(function(){return d})}:e,r?function(d){return promiseResolve(n,e()).then(function(){throw d})}:e)}});var promise$1=path.Promise,perf,start;function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(e)}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var r=0;r<n.length;r++){var d=n[r];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(e,d.key,d)}}function _createClass(e,n,r){return n&&_defineProperties(e.prototype,n),r&&_defineProperties(e,r),e}function _defineProperty(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function _inherits(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&_setPrototypeOf(e,n)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(e)}function _setPrototypeOf(e,n){return(_setPrototypeOf=Object.setPrototypeOf||function(r,d){return r.__proto__=d,r})(e,n)}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function _construct(e,n,r){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(d,m,g){var v=[null];v.push.apply(v,m);var w=new(Function.bind.apply(d,v));return g&&_setPrototypeOf(w,g.prototype),w}).apply(null,arguments)}function _isNativeFunction(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function _wrapNativeSuper(e){var n="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(r){if(null===r||!_isNativeFunction(r))return r;if("function"!=typeof r)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(r))return n.get(r);n.set(r,d)}function d(){return _construct(r,arguments,_getPrototypeOf(this).constructor)}return d.prototype=Object.create(r.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(d,r)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn(e,n){return!n||"object"!=typeof n&&"function"!=typeof n?_assertThisInitialized(e):n}function _createSuper(e){var n=_isNativeReflectConstruct();return function(){var r,d=_getPrototypeOf(e);return _possibleConstructorReturn(this,n?(r=_getPrototypeOf(this).constructor,Reflect.construct(d,arguments,r)):d.apply(this,arguments))}}function _superPropBase(e,n){for(;!Object.prototype.hasOwnProperty.call(e,n)&&null!==(e=_getPrototypeOf(e)););return e}function _get(e,n,r){return(_get=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(d,m,g){var v=_superPropBase(d,m);if(v){var w=Object.getOwnPropertyDescriptor(v,m);return w.get?w.get.call(g):w.value}})(e,n,r||e)}function _slicedToArray(e,n){return _arrayWithHoles(e)||_iterableToArrayLimit(e,n)||_unsupportedIterableToArray(e,n)||_nonIterableRest()}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArray(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function _iterableToArrayLimit(e,n){if(typeof Symbol<"u"&&Symbol.iterator in Object(e)){var r=[],d=!0,m=!1,g=void 0;try{for(var v,w=e[Symbol.iterator]();!(d=(v=w.next()).done)&&(r.push(v.value),!n||r.length!==n);d=!0);}catch(k){m=!0,g=k}finally{try{d||null==w.return||w.return()}finally{if(m)throw g}}return r}}function _unsupportedIterableToArray(e,n){if(e){if("string"==typeof e)return _arrayLikeToArray(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,n):void 0}}function _arrayLikeToArray(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,d=new Array(n);r<n;r++)d[r]=e[r];return d}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _createForOfIteratorHelper(e,n){var r;if(typeof Symbol>"u"||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var d=0,m=function(){};return{s:m,n:function(){return d>=e.length?{done:!0}:{done:!1,value:e[d++]}},e:function(k){throw k},f:m}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var g,v=!0,w=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var k=r.next();return v=k.done,k},e:function(k){w=!0,g=k},f:function(){try{v||null==r.return||r.return()}finally{if(w)throw g}}}}"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;r++){var d=arguments[r];if(null!=d)for(var m in d)d.hasOwnProperty(m)&&(n[m]=d[m])}return n}),"function"!=typeof Object.values&&(Object.values=function(e){return Object.keys(e).map(function(n){return e[n]})}),Math.hypot=Math.hypot||function(){for(var e=0,n=arguments.length,r=0;r<n;r++){if(arguments[r]===1/0||arguments[r]===-1/0)return 1/0;e+=arguments[r]*arguments[r]}return Math.sqrt(e)},Math.log2=Math.log2||function(e){return Math.log(e)*Math.LOG2E},typeof window<"u"?(!("performance"in window)&&(window.performance={}),perf=window.performance):typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&(!("performance"in self)&&(self.performance={}),perf=self.performance),perf&&"function"!=typeof perf.now&&(start=+new Date,perf.now=function(){return new Date-start});var global$1=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},ns={},MathUtils;(function(){var e,n,r="function"==typeof Object.defineProperties?Object.defineProperty:function(_a,wc,_g){_a!=Array.prototype&&_a!=Object.prototype&&(_a[wc]=_g.value)},d=(typeof window>"u"||window!==this)&&void 0!==global$1&&null!=global$1?global$1:this;if("function"==typeof Object.setPrototypeOf)e=Object.setPrototypeOf;else{t:{var m={};try{m.__proto__={ea:!0},n=m.ea;break t}catch{}n=!1}e=n?function(_a,wc){if(_a.__proto__=wc,_a.__proto__!==wc)throw new TypeError(_a+" is not extensible");return _a}:null}var g=e;!function(_a,wc){if(wc){var _g=d;_a=_a.split(".");for(var ty=0;ty<_a.length-1;ty++){var ny=_a[ty];ny in _g||(_g[ny]={}),_g=_g[ny]}(wc=wc(ty=_g[_a=_a[_a.length-1]]))!=ty&&null!=wc&&r(_g,_a,{configurable:!0,writable:!0,value:wc})}}("Object.setPrototypeOf",function(_a){return _a||g});var v=this||self;function w(_a){var wc=_typeof(_a);if("object"==wc){if(!_a)return"null";if(_a instanceof Array)return"array";if(_a instanceof Object)return wc;var _g=Object.prototype.toString.call(_a);if("[object Window]"==_g)return"object";if("[object Array]"==_g||"number"==typeof _a.length&&void 0!==_a.splice&&void 0!==_a.propertyIsEnumerable&&!_a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==_g||void 0!==_a.call&&void 0!==_a.propertyIsEnumerable&&!_a.propertyIsEnumerable("call"))return"function"}else if("function"==wc&&void 0===_a.call)return"object";return wc}function k(_a){return"function"==w(_a)}function j(_a){var wc=_typeof(_a);return"object"==wc&&null!=_a||"function"==wc}function G(_a,wc){_a=_a.split(".");var _g,ty=v;for((_a[0]in ty||void 0===ty.execScript||ty.execScript("var "+_a[0]));_a.length&&(_g=_a.shift());)_a.length||void 0===wc?ty=ty[_g]&&ty[_g]!==Object.prototype[_g]?ty[_g]:ty[_g]={}:ty[_g]=wc}function q(_a,wc){function _g(){}_g.prototype=wc.prototype,_a.ua=wc.prototype,_a.prototype=new _g,_a.prototype.constructor=_a}var _t=Math,_r=_t.min,_s=_t.max,ga=_t.round,_c=_t.floor,_u=_t.ceil,_f=_t.abs,_h=_t.log,ad=_t.sqrt,ey=_t.pow,sy=_t.sin,ly=_t.asin,dy=_t.cos,vy=_t.tan,Ay=_t.atan2,Sy=_t.PI,jy=Sy/2,Qy=Sy/4,Ny=2*Sy,P_=3*Sy,l_=Sy/180,K_=180/Sy;function p_(_a,wc,_g){return _g<_a?_g:_a<wc?wc:_a}function qy(_a,wc,_g){return wc<_g?wc<=_a&&_a<=_g:_g<=_a&&_a<=wc}function I_(_a,wc,_g,ty,ny,cy){return ad(ey((_a-ny)*(ty-cy)-(wc-cy)*(_g-ny),2)/(ey(_g-ny,2)+ey(ty-cy,2)))}G("H.math.normalize",function(_a,wc,_g){return wc-=_g=_g||0,(_a-=_g)-_c(_a/wc)*wc+_g}),G("H.math.clamp",p_);var S0={NONE:0,VERTEX:1,EDGE:2,SURFACE:3};function c1(_a,wc){var _g=_a.x;_a=_a.y;for(var ty,ny,cy,Cy,yy=wc.length,Iy=yy,Ky=wc[0],o_=0,i_=0,L_=0;1!=o_&&1<Iy;)ny=wc[--Iy],ty=wc[--Iy],Cy=wc[Iy?Iy-1:(yy+(Iy-1))%yy],cy=wc[Iy?Iy-2:(yy+(Iy-2))%yy],_g<=ty&&ty<=_g&&_a<=ny&&ny<=_a||_g<=cy&&cy<=_g&&_a<=Cy&&Cy<=_a?o_=1:o_||ty!==_g?!o_&&qy(_g,ty,cy)&&((ty<_g&&_g<cy||_g<ty&&cy<_g)&&(i_+=_a<(Ky=ny+(_g-ty)/(cy-ty)*(Cy-ny)),L_+=Ky<_a),o_=qy(_a,ny,Cy)&&I_(_g,_a,ty,ny,cy,Cy)<=0?2:0):(cy===_g&&(ny<_a&&_a<Cy||_a<ny&&Cy<_a)||(Ky<=_g&&_g<cy||_g<=Ky&&cy<_g)&&(_a<=ny?++i_:++L_),o_=qy(_a,ny,Cy)&&I_(_g,_a,ty,ny,cy,Cy)<=0?2:0),Ky=ty;return o_||0===L_||i_%2==0||(o_=3),o_!==S0.NONE}function j_(_a,wc){this.x=+_a,this.y=+wc}function G_(_a,wc,_g,ty,ny,cy,Cy,yy,Iy,Ky){return _a={x:_a,y:wc,next:_g||null,s:ty||null,ta:ny||null,X:cy||null,o:!!Cy,T:yy||0,O:Iy||0,alpha:Ky||0},ty&&(_a.s.next=_a),_g&&(_a.next.s=_a),_a}function z1(_a){for(;_a&&_a.o;)_a=_a.next;return _a}function b0(_a){if(_a)for(;_a.next;)_a=_a.next;return _a}function k1(_a){var wc=b0(_a);(wc.s.next=_a).s=wc.s}function X_(_a){for(var wc=[];_a;)wc.push(_a.x,_a.y),_a=_a.next;return wc}function N_(_a,wc,_g){for(wc=wc.next;wc!==_g&&wc.alpha<=_a.alpha;)wc=wc.next;_a.next=wc,_a.s=wc.s,(_a.next.s=_a).s.next=_a}function o0(_a,wc){for(var _g,ty=null,ny=0,cy=_a.length;ny<cy;ny++)(_g=G_(_a[ny].x,_a[ny].y,ty)).qa=wc,(_g.next=ty)&&(ty.s=_g),ty=_g;return ty}function c_(_a,wc,_g,ty){return(_a-=_g)*_a+(wc-=ty)*wc}G("H.math.CoverType",S0),G("H.math.isPointInsidePolygon",c1),G("H.math.flatten",function(_a){for(var wc=_a.length,_g=new Float64Array(2*wc),ty=wc&&_a[0].x!==q0;wc--;){var ny=_a[wc],cy=wc<<1;_g[cy]=ty?ny.x:ny[0],_g[1+cy]=ty?ny.y:ny[1]}return _g}),G("H.math.Point",j_),(j_.prototype.set=j_).prototype.clone=function(_a){return _a?(_a.x=this.x,_a.y=this.y):_a=new j_(this.x,this.y),_a},j_.prototype.add=function(_a){return this.x+=_a.x,this.y+=_a.y,this},j_.prototype.sub=function(_a){return this.x-=_a.x,this.y-=_a.y,this},j_.prototype.scale=function(_a,wc){return this.x*=_a,this.y*=void 0===wc?_a:wc,this},j_.prototype.round=function(){return this.x=ga(this.x),this.y=ga(this.y),this},j_.prototype.floor=function(){return this.x=_c(this.x),this.y=_c(this.y),this},j_.prototype.ceil=function(){return this.x=_u(this.x),this.y=_u(this.y),this},j_.prototype.equals=j_.prototype.w=function(_a){return!(!_a||this.x!==_a.x||this.y!==_a.y)},j_.prototype.getNearest=j_.prototype.la=function(_a,wc){var _g,ty=wc.x-_a.x,ny=wc.y-_a.y,cy=_a;return(ty||ny)&&(cy=(_g=((this.x-_a.x)*ty+(this.y-_a.y)*ny)/(ty*ty+ny*ny))<=0?_a:1<=_g?wc:new j_(_a.x+_g*ty,_a.y+_g*ny)),cy},j_.prototype.distance=j_.prototype.R=function(_a){return ad(ey(this.x-_a.x,2)+ey(this.y-_a.y,2))},j_.fromIPoint=function(_a){if(!_a)throw Error("invalid argument");return _a instanceof j_?_a:new j_(_a.x,_a.y)},G("H.math.clipping.clipStrips",function(_a,wc,_g,ty,ny,cy){var Cy,yy,Iy,Ky=_a.length;if(Ky)for(Cy=[];Ky--;)for(var i_,L_=_a[Ky],V_=L_.length,g0=0,e_=1;e_<V_;e_++)(Iy=function(a_,r_,E_,q_,s0,W_){var Z_=a_.x;a_=-a_.y;var F_=r_.x;if(r_=-r_.y,E_=-E_,W_=-W_,F_<Z_){if(s0<F_||Z_<q_)return;var $1=Z_,N0=a_;Z_=F_,a_=r_,F_=$1,r_=N0,$1=1}else if(s0<Z_||F_<q_)return;if(r_<a_){if(E_<r_||a_<W_)return;var u0=1;a_=-a_,r_=-r_,N0=W_,W_=-E_,E_=-N0}else if(E_<a_||r_<W_)return;if(Z_<q_){if((a_+=(q_-Z_)*(r_-a_)/(F_-Z_))>E_)return;Z_=q_}if(a_<W_){if((Z_+=(W_-a_)*(F_-Z_)/(r_-a_))>s0)return;a_=W_}return s0<F_&&(r_=a_+(s0-Z_)*(r_-a_)/(F_-Z_),F_=s0),E_<r_&&(F_=Z_+(E_-a_)*(F_-Z_)/(r_-a_),r_=E_),u0&&(a_=-a_,r_=-r_),$1?[new j_(F_,-r_),new j_(Z_,-a_)]:[new j_(Z_,-a_),new j_(F_,-r_)]}(L_[e_-1],L_[e_],_g,wc,ty,ny))&&(i_=Iy[1],g0&&g0.w(Iy[0])?yy.push(i_):Cy.push(yy=Iy),g0=i_,cy&&(e_=V_,Ky=0));else Cy=_a;return Cy}),G("H.math.clipping.clipPolygon",function(_a,wc,_g){var ty;_a=o0(_a,!0),wc=o0(wc,!1);var ny={},cy=ty=1;switch(~~(_g||0)){case 1:cy=ty=0;break;case 2:ty=0,cy=1;break;case 3:ty=1,cy=0}_g=ty;var Cy,yy,Iy,Ky,o_,i_,L_=cy;if(wc&&_a){for(wc.M=G_(wc.x,wc.y,null,b0(wc)),_a.M=G_(_a.x,_a.y,null,b0(_a)),cy=wc;cy.next;cy=cy.next)if(!cy.o)for(ty=_a;ty.next;ty=ty.next)ty.o||(i_=function g0(e_,a_,r_,E_,q_){var s0,W_=a_.x-e_.x,Z_=a_.y-e_.y,F_=E_.x-r_.x,$1=E_.y-r_.y,N0=W_*$1-Z_*F_;return!N0||(F_=((r_.x-e_.x)*$1-(r_.y-e_.y)*F_)/N0,N0=(Z_*(r_.x-e_.x)-W_*(r_.y-e_.y))/N0,F_<0||1<F_||N0<0||1<N0)?0:(0===F_?s0=e_:1===F_?s0=a_:0===N0?s0=r_:1===N0&&(s0=E_),s0?(s0.x+=2480549651603763e-20,s0.y+=7321997314118067e-20,s0.M&&(s0.M.x=s0.x,s0.M.y=s0.y),g0(e_,a_,r_,E_,q_)):(q_.xa=e_.x+F_*W_,q_.ya=e_.y+F_*Z_,q_.fa=F_,q_.ga=N0,1))}(cy,Cy=z1(cy.next),ty,yy=z1(ty.next),ny))&&(Iy=ny.ga,N_(i_=G_(Ky=ny.xa,o_=ny.ya,null,null,null,null,!0,0,0,i_=ny.fa),cy,Cy),N_(Cy=G_(Ky,o_,null,null,null,null,!0,0,0,Iy),ty,yy),(i_.X=Cy).X=i_);for(ny=c1(wc,X_(_a)),_g&&(ny=!ny),cy=wc;cy;cy=cy.next)cy.o&&(ny=!(cy.T=ny));for(ny=c1(_a,X_(wc)),L_&&(ny=!ny),ty=_a;ty.next;ty=ty.next)ty.o&&(ny=!(ty.T=ny));for(k1(wc),k1(_a);(_a=function(g0){var e_=g0;if(e_)for(;(e_=e_.next)!=g0&&(!e_.o||e_.o&&e_.O););return e_}(wc))!=wc;){for(_g=null;!_a.O;_a=_a.X){for(ny=_a.T;(_g=G_(_a.x,_a.y,_g)).artificial=_a.o||_a.qa,_a.O=1,_a=ny?_a.next:_a.s;)if(_a.o){_a.O=1;break}if(!_a)break}_g.ta=V_;var V_=_g}return V_}}),G("H.math.simplifyDP",function(_a,wc,_g){return function ty(ny,cy,Cy,yy,Iy){var Ky=0,o_=yy,i_=ny[yy].x,L_=ny[yy].y,V_=ny[Iy].x,g0=ny[Iy].y,e_=yy+1,a_=c_(i_,L_,V_,g0);if(a_)for(;e_<Iy;){var r_=ny[e_++],E_=r_.x,q_=((E_-i_)*(V_-i_)+((r_=r_.y)-L_)*(g0-L_))/a_;Ky<(E_=q_<0?c_(E_,r_,i_,L_):1<q_?c_(E_,r_,V_,g0):c_(E_,r_,i_+q_*(V_-i_),L_+q_*(g0-L_)))&&(Ky=E_,o_=e_-1)}else for(;e_<Iy;)Ky<(E_=c_(E_=(r_=ny[e_++]).x,r_=r_.y,i_,L_))&&(Ky=E_,o_=e_-1);return cy<=Ky||0<Cy&&o_-yy?(--Cy,1<o_-yy?(yy=ty(ny,cy,Cy,yy,o_)).splice(yy.length-1,1):yy=[ny[yy]],yy.concat(1<Iy-o_?ty(ny,cy,Cy,o_,Iy):ny.slice(o_,Iy+1))):[ny[yy],ny[Iy]]}(_a,wc*wc,_g||0,0,_a.length-1)});var yx=this,u1=String,q0=[].pop(),bT=/x/.exec(""),_1="prototype constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P0(_a,wc){if(_a instanceof wc&&_a.constructor===wc)throw new TypeError("Illegal constructor "+H1(wc))}G("H.lang.isArray",function(_a,wc,_g,ty){var ny;if(!(ny="Array"===JE(_a))&&wc)throw new w0(wc,_g,ty!==q0?ty:_a);return ny}),G("H.lang.isString",function(_a){return"string"==typeof _a});var g1=isNaN;function xE(_a){return _a===+_a}function JE(_a){var wc=Object[_1[0]][_1[6]].call(_a).match(/^\[object (\w+)\]$/);return wc?wc[1]:_typeof(_a)}G("H.lang.isNumber",xE),G("H.lang.isInteger",Number.isInteger?Number.isInteger:function(_a){return"number"==typeof _a&&_a%1==0});var b1=[];function H1(_a,wc,_g,ty){var ny,cy,Cy="",yy=arguments.length<2;return yy&&(wc={H:yx.H},_g="",ty=b1.slice()),QE(wc,!0,function(Iy,Ky){try{if(o_=ny=Iy[Ky],QE(Iy,!(i_=[]),function(L_,V_){L_[V_]===o_&&i_.push(V_)}),Ky=i_.sort(cA)[0],!(j(ny)&&ny.window===ny&&ny.self===ny||j(ny)&&0<ny.nodeType&&k(ny.cloneNode))&&j(ny)){if(ny===_a)return Cy=_g+"."+Ky,1;if(ty.indexOf(ny)<0&&(ty.push(ny),Cy=H1(_a,ny,_g+"."+Ky,ty)))return 1}}catch{}var o_,i_}),yy&&(Cy=Cy?Cy.substr(1).replace("."+_1[0]+".","#"):"~"+(k(_a)?((cy=/^\s*function ([^\( ]+)/.exec(cy=_a))?cy[1]:"anonymous")+"()":JE(_a))),Cy}function cA(_a,wc){return wc.length-_a.length}b1.indexOf(b1)<0&&b1.push(b1);var v0=Object[_1[0]][_1[2]];function QE(_a,wc,_g){var ty;if(_a){for(ny in _a)if((!wc||v0.call(_a,ny))&&_g(_a,ny,!0))return;for(ty=_1.length;ty--;){var ny=_1[ty];if((!wc||v0.call(_a,ny))&&_g(_a,ny,!1))break}}}function SS(_a,wc,_g){_g[wc]="#"+wc}function w0(_a,wc,_g){var ty,ny,cy=arguments.length;return(wc=wc!==q0?+wc:wc)!==q0&&((ny=ty=(ny=/^.*?\(([^\)]+)/.exec((""+_a).replace(/(\/\*([\s\S]*?)\*\/)|(\/\/(.*)$)/gm,"")))?u1(ny[1].replace(/\s+/g,"")).split(","!==q0?",":" "):[]).forEach(SS),ny=ny[wc]||"#"+wc),ty=_a?H1(_a):"",cy=2<cy?u1(_g):"",(ny||cy)&&(ty+=" (Argument "+(ny||"")+(cy?" "+cy:"")+")"),cy=Error(ty),Object.setPrototypeOf(cy,w0.prototype),cy}function G1(_a,wc,_g){var ty=p_(+_a,-90,90);if(wc&&g1(ty))throw new w0(wc,_g,_a);return ty}function vx(_a,wc,_g){var ty,ny=+_a;if((ny<-180||180<ny)&&(ny=((ty=(ny+180)%360)<0?360+ty:ty)-180),wc&&g1(ny))throw new w0(wc,_g,_a);return ny}function uA(_a,wc,_g){var ty;if(_a!==q0&&g1(ty=+_a)&&wc)throw new w0(wc,_g,_a);return ty}function Jb(){P0(this,Jb)}function B_(_a,wc,_g){this.lat=G1(_a,B_,0),this.lng=vx(wc,B_,1),_g!==q0&&(this.alt=uA(_g,B_,2))}function _x(_a,wc,_g){var ty=j(_a)&&!(g1(_a.lat=G1(_a.lat))||g1(_a.lng=vx(_a.lng))||_a.alt!==q0&&g1(_a.alt=uA(_a.alt)));if(!ty&&wc)throw new w0(wc,_g,_a);return ty}function Gy(_a,wc,_g,ty){tT(this,G1(_a,Gy,0),vx(wc,Gy,1),G1(_g,Gy,2),vx(ty,Gy,3))}function tT(_a,wc,_g,ty,ny){return _a.f=_g,_a.g=ny,wc<ty&&(_g=wc,wc=ty,ty=_g),_a.i=wc,_a.h=ty,_a.m=_a.b=_a.c=null,_a}function tx(_a,wc){return(_a=wc-_a)+(_a<0?360:0)}function EE(_a,wc){return(_a+=wc/2)-(180<_a?360:0)}function eT(_a,wc,_g,ty,ny,cy,Cy,yy,Iy){_g=_r(_g,Cy),_a=_s(_a,ny);var Ky=EE(wc,ny=tx(wc,ty)),o_=EE(cy,Cy=tx(cy,yy))-Ky,i_=(o_+=o_-1e-6<0?360:0)-1e-6<180?(Ky=wc,yy):(o_=360-o_,Ky=cy,ty);return 360<=(o_=o_+ny/2+Cy/2)+5e-7?(Ky=-180,i_=180):o_-5e-7<ny?(Ky=wc,i_=ty):o_-5e-7<Cy&&(Ky=cy,i_=yy),Iy?tT(Iy,_a,Ky,_g,i_):new Gy(_a,Ky,_g,i_)}function TE(_a,wc,_g){return _g||(_x(_a,TE,0),_x(wc,TE,1)),new Gy(_a.lat,_a.lng,wc.lat,wc.lng)}function Yx(_a,wc,_g,ty,ny,cy){P0(this,Yx),this.sa=_a||10,this.c=this.b=null,this.j=ty||0,this.l=ny||0,this.m=wc||1,this.u=_g||1,this.I=!!cy,this.flush()}function dA(_a,wc,_g){var ty,ny;if(_a.I&&(ty=_a.c))for(ny=3;0<=ny;ny--){var cy=wc[ny];if(ny%3?cy>=ty[ny]:cy<=ty[ny]){if(!_g){_a.c=null;break}ty[ny]=cy}}}function wT(_a,wc){var _g,ty=_a.a;if(wc){var ny=wc;if(ny!==ty)for(ty=ny;ny=ny.c;)(ny.entries||1<ny.a)&&(ty=ny)}else for(;!ty.entries&&(_g=ty.a)<2&&_g;)ty=ny;_a.a=ty}q(w0,Error),G("H.lang.InvalidArgumentError",w0),w0.prototype.name="InvalidArgumentError",G("H.geo.isDBC",function(_a,wc){return 0!=(_a<0^wc<0)&&180<_f(wc-_a)}),G("H.geo.AbstractGeometry",Jb),Jb.prototype.getBoundingBox=Jb.prototype.D,Jb.prototype.equals=Jb.prototype.w,Jb.prototype.a="",Jb.prototype.l="",Jb.prototype.toString=function(){return this.I([this.a.toUpperCase()," "]).join("")},Jb.prototype.toGeoJSON=Jb.prototype.va=function(){return{type:this.l,coordinates:this.u()}},Jb.prototype.forWorkerMessage=Jb.prototype.U=function(){return{type:this.a,coordinates:this.j(),boundingBox:this.D().U()}},q(B_,Jb),G("H.geo.Point",B_),B_.prototype.equals=B_.prototype.w=function(_a){return this===_a||!!_a&&this.lat===_a.lat&&this.lng===_a.lng&&(this.alt||0)===(_a.alt||0)},B_.prototype.distance=B_.prototype.R=function(_a){var wc,_g;return this===_a||this.lat===_a.lat&&this.lng===_a.lng?0:12742001.58*ly(_r(1,ad(ey(sy(((wc=this.lat*l_)-(_g=_a.lat*l_))/2),2)+dy(wc)*dy(_g)*ey(sy((this.lng*l_-_a.lng*l_)/2),2))))},B_.prototype.walk=B_.prototype.wa=function(_a,wc,_g){var ty,ny,cy,Cy,yy,Iy,Ky;return _g?((wc/=6371000.79)&&(_a*=l_,ty=sy(yy=l_*this.lat),ny=sy(wc),cy=dy(wc),Cy=l_*this.lng,Iy=dy(yy),yy=ly(Iy*dy(_a)*ny+ty*cy),Iy=(_a=(Cy+(_a=Ay(sy(_a)*Iy*ny,cy-ty*sy(yy)))+Sy)%(2*Sy)-Sy)*K_),wc?new B_(yy*K_,(Iy+540)%360-180):this):(90+(_a=(_a%360+360)%360))%180==0?(yy=this.lng+wc/(6371000.79*Ny*dy(this.lat*l_))*(270===_a?-360:360),new B_(this.lat,(yy+540)%360-180)):((wc/=6371000.79)&&(ty=this.lng*l_,cy=(ny=(Cy=this.lat*l_)+wc*dy(_a*=l_))-Cy,yy=_h(vy(ny/2+Qy)/vy(Cy/2+Qy)),yy=g1(cy/yy)?dy(Cy):cy/yy,Ky=wc*sy(_a)/yy,_f(ny)>jy&&(ny=0<ny?Sy-ny:-(Sy+ny))),wc?new B_(ny*K_,((ty+Ky+P_+(_f(Cy+cy)>jy?Sy:0))%Ny-Sy)*K_):this)},B_.prototype.getBoundingBox=B_.prototype.D=function(){return new Gy(this.lat,this.lng,this.lat,this.lng)},B_.validate=_x,B_.fromIPoint=function _a(wc){if(!wc)throw new w0(_a,0,wc);return new B_(wc.lat,wc.lng,wc.alt)},B_.prototype.a="Point",B_.prototype.I=function(_a){return _a.push("(",this.lng," ",this.lat,")"),_a},B_.prototype.l="Point",B_.prototype.u=function(){return[this.lng,this.lat,this.alt||0]},B_.prototype.j=function(){return[this.lat,this.lng,this.alt||0]},q(Gy,Jb),G("H.geo.Rect",Gy),Gy.prototype.a="Polygon",Gy.prototype.I=function(_a){var wc=this.i,_g=this.f,ty=this.h,ny=this.g;return _a.push("(","(",_g," ",wc,",",ny," ",wc,",",ny," ",ty,",",_g," ",ty,",",_g," ",wc,")",")"),_a},Gy.prototype.equals=Gy.prototype.w=function(_a){return this===_a||!!_a&&this.i===_a.i&&this.f===_a.f&&this.h===_a.h&&this.g===_a.g},Gy.prototype.clone=function(){return new Gy(this.i,this.f,this.h,this.g)},Gy.prototype.getTopLeft=Gy.prototype.W=function(){return this.m||(this.m=new B_(this.i,this.f)),this.m},Gy.prototype.getBottomRight=Gy.prototype.V=function(){return this.b||(this.b=new B_(this.h,this.g)),this.b},Gy.prototype.getTop=Gy.prototype.na=function(){return this.i},Gy.prototype.getBottom=Gy.prototype.ha=function(){return this.h},Gy.prototype.getLeft=Gy.prototype.ja=function(){return this.f},Gy.prototype.getRight=Gy.prototype.ma=function(){return this.g},Gy.prototype.getCenter=Gy.prototype.F=function(){return this.c||(this.c=new B_(this.h+(this.i-this.h)/2,EE(this.f,this.A()))),this.c},Gy.prototype.getWidth=Gy.prototype.A=function(){return tx(this.f,this.g)},Gy.prototype.getHeight=Gy.prototype.G=function(){return this.i-this.h},Gy.prototype.isCDB=Gy.prototype.N=function(){return this.f>this.g},Gy.prototype.isEmpty=Gy.prototype.ra=function(){return!this.A()&&!this.G()},Gy.prototype.getBoundingBox=Gy.prototype.D=function(){return new Gy(this.i,this.f,this.h,this.g)},Gy.prototype.containsLatLng=Gy.prototype.L=function(_a,wc,_g){var ty=this.F();return _g||(_a=G1(_a,this.L,0),wc=vx(wc,this.L,1)),(_a=(wc=this.B(_a,wc,_g)).F()).lat===ty.lat&&_a.lng===ty.lng&&this.G()===wc.G()&&this.A()===wc.A()},Gy.prototype.containsPoint=Gy.prototype.$=function(_a,wc){return wc||_x(_a,this.$,0),this.L(_a.lat,_a.lng,wc)},Gy.prototype.containsRect=Gy.prototype.aa=function(_a,wc){var _g=this.F();if(!(wc||_a instanceof Gy))throw new w0(this.aa,0,_a);return(_a=(wc=this.J(_a,wc)).F()).lat===_g.lat&&_a.lng===_g.lng&&this.G()===wc.G()&&this.A()===wc.A()},Gy.prototype.mergeLatLng=Gy.prototype.B=function(_a,wc,_g,ty){if(!_g){if(g1(_a=G1(_a)))throw new w0(this.B,0,_a);if(g1(wc=vx(wc)))throw new w0(this.B,1,wc)}return eT(this.i,this.f,this.h,this.g,_a,wc,_a,wc,ty)},Gy.prototype.mergePoint=Gy.prototype.ca=function(_a,wc,_g){return wc||_x(_a,this.ca,0),this.B(_a.lat,_a.lng,wc,_g)},Gy.prototype.mergeRect=Gy.prototype.J=function(_a,wc,_g){if(!(wc||_a instanceof Gy))throw new w0(this.J,0,_a);return eT(this.i,this.f,this.h,this.g,_a.i,_a.f,_a.h,_a.g,_g)},Gy.prototype.mergeTopLeftBottomRight=Gy.prototype.C=function(_a,wc,_g,ty,ny,cy){return ny||(_a=G1(_a,this.C,0),wc=vx(wc,this.C,1),_g=G1(_g,this.C,2),ty=vx(ty,this.C,3)),eT(this.i,this.f,this.h,this.g,_a,wc,_g,ty,cy)},Gy.prototype.intersects=Gy.prototype.ba=function(_a,wc){var _g=this.f<=this.g,ty=_a.f<=_a.g,ny=this.f<_a.g,cy=_a.f<this.g;if(!(wc||_a instanceof Gy))throw new w0(this.ba,0,_a);return this.h<=_a.i&&_a.h<=this.i&&(!_g&&(!ty||ny||cy)||!ty&&(ny||cy)||ny&&cy)},Gy.merge=eT,Gy.fromPoints=TE,Gy.coverPoints=function _a(wc,_g){var ty=1,ny=wc.length,cy=null,Cy=w(wc);if("array"!=Cy&&("object"!=Cy||"number"!=typeof wc.length))throw new w0(_a,0,wc);if(0<ny)for(cy=TE(Cy=wc[0],Cy,_g);ty<ny;ty++)cy.B((Cy=wc[ty]).lat,Cy.lng,_g,cy);return cy},Gy.coverLatLngAlts=function _a(wc,_g){var ty,ny=3,cy=wc.length;if(!(_g||wc&&null!=wc.length))throw new w0(_a,0,wc);if(0<cy)for(ty=new Gy(wc[0],wc[1],wc[0],wc[1]);ny<cy;ny+=3)ty.B(wc[ny],wc[ny+1],_g,ty);return ty},Gy.coverRects=function _a(wc,_g){var ty,ny=1,cy=wc.length;if(_g&&(!wc||null==wc.length))throw new w0(_a,0,wc);if(0<cy)for(ty=new Gy(wc[0].i,wc[0].f,wc[0].h,wc[0].g);ny<cy;ny++)ty.J(wc[ny],_g,ty);return ty},Gy.prototype.resizeToCenter=Gy.prototype.da=function(_a,wc){var _g=this.f,ty=this.i,ny=this.g,cy=this.h,Cy=this.F().lng;_x(_a,this.da,0);var yy=_a.lat-cy-(ty-cy)/2,Iy=_a.lng-Cy;return _a=(_a=_g+((Iy=180<Iy||Iy<-180?-(Cy+_a.lng):Iy)<0?2*Iy:0))<-180?360+_a:_a,ny=180<(ny+=0<Iy?2*Iy:0)?ny-360:ny,90<=(ty=0<yy?ty+2*yy:ty)&&(ty=90),(cy=yy<0?cy+2*yy:cy)<=-90&&(cy=-90),wc?tT(wc,ty,_a,cy,ny):new Gy(ty,_a,cy,ny)},Gy.prototype.l="Polygon",Gy.prototype.u=function(){return[[this.f,this.i,0],[this.g,this.i,0],[this.g,this.h,0],[this.f,this.h,0],[this.f,this.i,0]]},Gy.prototype.U=function(){return this.j()},Gy.prototype.j=function(){return[this.i,this.f,this.h,this.g]},Yx.prototype.remove=function(_a){var wc,_g,ty,ny,cy,Cy,yy=!1;if(_a&&(wc=_a.a)&&wc.b===this&&(_g=wc.entries)&&0<=(ty=_g.indexOf(_a))){for(_g.splice(ty,1),_g=this.a;wc;)(ny=wc.entries)&&ny.length||(ny&&delete wc.entries,wc.a||!(cy=wc.c))?wc=bT:((ty=cy)[Cy=(yy=wc).j]===yy&&(delete ty[Cy],delete yy.c,--ty.a),_g===wc&&(_g=cy),wc=cy);this.a!==_g&&(this.a=_g,wT(this)),dA(this,_a,!1),yy=!0}return yy},Yx.prototype.flush=function(){var _a=new nT(null,NaN,this.j-this.m,this.l-this.u,this.j+this.m,this.l+this.u);(_a.b=this).a=this.b=_a,this.c=null},Yx.prototype.o=function(_a,wc,_g,ty,ny,cy){var Cy=[],yy=this.a,Iy=this.b;return _a<=yy[5]&&wc<=yy[6]&&(ny?_g>=yy[7]:_g>yy[7])&&(cy?ty>=yy[4]:ty>yy[4])&&function Ky(o_,i_,L_,V_,g0,e_,a_,r_,E_){var q_,s0=i_.entries,W_=i_[7],Z_=i_[4],F_=i_[5],$1=i_[6],N0=i_[8],u0=i_[9];if(s0){var q1=s0.length;if(Z_<g0||W_<V_||a_<$1||e_<F_)for(;q1--;)Z_=(W_=s0[q1])[3],F_=W_[0],$1=W_[1],g0<=W_[2]&&V_<=$1&&(F_<a_||r_&&F_==a_)&&(Z_<e_||E_&&Z_==e_)&&L_.push(W_);else for(;q1--;)L_.push(s0[q1])}(N0<e_||E_&&e_==N0)&&(g0<u0&&(q_=i_[1])&&Ky(o_,q_,L_,V_,g0,e_,a_,r_,E_),(u0<a_||r_&&a_==u0)&&(q_=i_[3])&&Ky(o_,q_,L_,V_,g0,e_,a_,r_,E_)),V_<N0&&(g0<u0&&(q_=i_[0])&&Ky(o_,q_,L_,V_,g0,e_,a_,r_,E_),(u0<a_||r_&&a_==u0)&&(q_=i_[2])&&Ky(o_,q_,L_,V_,g0,e_,a_,r_,E_))}(this,yy,Cy,_a,wc,_g,ty,cy||ty>=Iy[6],ny||_g>=Iy[5]),Cy};var hA=0;function nT(_a,wc,_g,ty,ny,cy){this.j=wc,_a&&(this.c=_a,this.b=_a.b,ny=1&wc?(_g=_a[8],_a[5]):(_g=_a[7],_a[8]),cy=2&wc?(ty=_a[9],_a[6]):(ty=_a[4],_a[9])),this[7]=_g,this[5]=ny,this[8]=(_g+ny)/2,this[4]=ty,this[6]=cy,this[9]=(ty+cy)/2}function xT(_a,wc,_g,ty,ny,cy){xT.ua.constructor.apply(this,arguments)}function CS(_a,wc,_g,ty,ny,cy,Cy){var yy,Iy,Ky=wc[8],o_=wc[9];return Cy&&(ny<Ky||(yy=Ky<=_g))&&(cy<o_||(Iy=o_<=ty))?_g=(Ky=CS)(_a,wc=wc[yy|=Iy<<1]||(++wc.a,wc[yy]=new nT(wc,yy)),_g,ty,ny,cy,Cy-1):(ty=_g=new ET(_g,ty,ny,cy),(wc.entries||(wc.entries=[])).push(ty),ty.a=wc,dA(_a,_g,!0),wT(_a,wc)),_g}function ET(_a,wc,_g,ty){this.id=hA++,this[0]=wc,this[1]=_g,this[2]=ty,this[3]=_a}function ex(_a){this.l=new xT(+_a||10,180,90,0,0,!0),this.j=[],this.m=!1,this.a=this.b=this.c=null}function TT(_a,wc,_g,ty,ny,cy){if(cy)cy=new ET(ny,-wc,_g+360,-ty),_a.j.push(cy),_a.m=!0,_a.a&&_a.a.C(wc,_g,ty,ny,!0,_a.a);else{var Cy=-wc,yy=-ty,Iy=(cy=_a.l).b,Ky=Iy[5],o_=Iy[6];if(!(Iy[7]<=_g&&Iy[4]<=Cy&&(ny<Ky||Ky===ny&&Ky===Iy.b.b[5])&&(yy<o_||o_===yy&&o_===Iy.b.b[6])))throw Error("Coordinates out of bounds");cy=CS(cy,cy.b,_g,Cy,ny,yy,cy.sa),_a.b&&_a.b.C(wc,_g,ty,ny,!0,_a.b)}return _a.c=null,cy}function AE(_a,wc,_g,ty,ny,cy,Cy){var yy=(_a=_a.j).length,Iy=[];if(yy)for(var Ky=_g+360,o_=ny+360;yy--;){var i_=_a[yy];(rT(i_,wc,_g,ty,ny,cy,Cy)||rT(i_,wc,Ky,ty,o_,cy,Cy))&&Iy.push(i_)}return Iy}function rT(_a,wc,_g,ty,ny,cy,Cy){var yy=_a[3],Iy=_a[0],Ky=_a[1];return _a=_a[2],(cy?Iy<=ty:Iy<ty)&&(Cy?yy<=ny:yy<ny)&&wc<=_a&&_g<=Ky}function SE(_a,wc){var _g,ty;if(_g=wc.length){for(var ny=_a.length,cy={};ny--;)cy[_a[ny].id]=1;for(;_g--;)(ty=wc[_g]).id in cy||_a.push(ty)}}function t1(){}function T0(_a,wc,_g){if(this.l=[],wc&&this.K(wc),_g&&!k(_g))throw new w0(T0,2,_g);this.b=0,this.m=_g,this.a={},this.j=this.c=null,this.Z(_a)}function CE(_a,wc){return wc&&(_a.c=W0(_a,wc,_a.c)),wc}function ME(_a){for(;_a.b>_a.u&&_a.j;)wx(_a,_a.j,!0)}function W0(_a,wc,_g){return _g!==wc&&((wc.H||wc.v)&&wx(_a,wc,!1),(wc.H=_g)&&(wc.v=_g.v,_g.v=wc),wc.v||(_a.c=wc),wc.H||(_a.j=wc),_a.b+=wc.size),wc}function wx(_a,wc,_g){var ty=wc.v,ny=wc.H;(ty||ny||wc==_a.c&&wc==_a.j)&&(ty?ty.H=ny:_a.c=ny,ny?ny.v=ty:_a.j=ty,_a.b-=wc.size,_g&&(delete _a.a[wc.id],AT(_a,wc))),wc.H=wc.v=null}function AT(_a,wc){for(var _g=_a.l.length;_g--;)_a.l[_g].call(_a,wc.id,wc.data,wc.size)}nT.prototype.a=0,q(xT,Yx),G("H.geo.QuadTree",ex),ex.prototype.N=function(){return this.m},ex.prototype.D=function(){var _a;if(!this.c){var wc,_g,ty=[];if((Cy=!this.b)&&(yy=(cy=this.l).c,cy.I&&!yy&&((Cy=cy.a).entries||Cy[0]||Cy[1]||Cy[2]||Cy[3])&&(yy=function Ky(o_,i_){for(var L_,V_,g0=0,e_=3;0<=e_;e_--){for(var a_=e_+4,r_=0<e_%3,E_=[],q_=i_[e_],s0=o_[e_],W_=s0.length;W_--;){var Z_=s0[W_];if(L_=Z_.entries)for(V_=L_.length;V_--;){var F_=L_[V_][e_];(r_?q_<F_:F_<q_)&&(q_=F_)}for(V_=4;V_--;)(L_=Z_[V_])&&(r_?L_[a_]>q_:L_[a_]<q_)&&E_.push(L_)}g0+=E_.length,i_[e_]=q_,o_[e_]=E_}return g0&&(i_=Ky(o_,i_)),i_}([yy=[Cy],yy,yy,yy],[Cy[6],Cy[7],Cy[4],Cy[5]]),cy.c=yy),Cy=cy=yy),Cy&&(this.b=new Gy(-cy[0],cy[3],-cy[2],cy[1])),(_a=this.b)&&ty.push(_a),!this.a&&(_g=(wc=this.j).length)){for(Cy=360,yy=-(cy=90),Iy=0;_g--;)var ny=wc[_g],cy=_r(cy,ny[0]),Cy=_r(Cy,ny[3]),yy=_s(yy,ny[2]),Iy=_s(Iy,ny[1]);this.a=new Gy(-cy,Cy,-yy,Iy-360)}(_a=this.a)&&ty.push(_a),(_a=ty[0])&&(ty[1]&&(_a=_a.J(ty[1],!0)),this.c=_a)}return this.c},ex.prototype.insertBoundingBox=ex.prototype.oa=function(_a){var wc=_a.W(),_g=_a.V();return(_a=_a.N())?TT(this,wc.lat,_g.lng,_g.lat,wc.lng,_a):TT(this,wc.lat,wc.lng,_g.lat,_g.lng,_a)},ex.prototype.remove=function(_a){var wc,_g;return _a.a?(_g=this.l.remove(_a),this.b=null):(_g=0<=(_a=(wc=this.j).indexOf(_a)))&&(wc.splice(_a,1),this.m=0<wc.length,this.a=null),_g&&(this.c=null),_g},ex.prototype.intersectBoundingBox=ex.prototype.pa=function(_a,wc,_g){var ty=this.l,cy=_a.W(),yy=_a.V(),ny=-cy.lat,Cy=(cy=cy.lng,-yy.lat);return yy=yy.lng,!wc&&ny==Cy||!_g&&cy===yy?_a=[]:_a.N()?(SE(_a=ty.o(-180,ny,yy,Cy,_g,wc),ty.o(cy,ny,180,Cy,!1,wc)),SE(_a,AE(this,ny,yy,Cy,cy+360,wc,_g))):SE(_a=ty.o(cy,ny,yy,Cy,_g,wc),AE(this,ny,cy,Cy,yy,wc,_g)),_a},G("H.util.ICache",t1),t1.prototype.add=function(){},t1.prototype.get=function(){},t1.prototype.drop=t1.prototype.S=function(){},t1.prototype.forEach=function(){},t1.prototype.removeAll=t1.prototype.Y=function(){},t1.prototype.registerOnDrop=t1.prototype.K=function(){},t1.prototype.deRegisterOnDrop=t1.prototype.P=function(){},G("H.util.Cache",T0),T0.prototype.add=function(_a,wc,_g){var ty,ny;if(!xE(_g=+_g)||_g<0)throw new w0(this.add,2,_g);return _a=String(_a),(ny=!this.m||this.m(_a,wc,_g))&&((ty=this.a[_a])?(ty.data!==wc&&AT(this,ty),this.b+=_g-ty.size,ty.size=_g,ty.data=wc,CE(this,ty)):this.a[_a]=W0(this,{id:_a,data:wc,size:_g,H:null,v:null},this.c),ME(this)),ny},T0.prototype.registerOnDrop=T0.prototype.K=function(_a){if(!k(_a))throw new w0(this.K,0,_a);this.l.push(_a)},T0.prototype.deRegisterOnDrop=T0.prototype.P=function(_a){this.l=this.l.filter(function(wc){return wc!==_a})},T0.prototype.get=function(_a,wc){return(_a=wc?this.a[_a]:CE(this,this.a[_a]))&&_a.data},T0.prototype.drop=T0.prototype.S=function(_a){var wc;(wc=this.a[_a])&&wx(this,wc,!0)},T0.prototype.forEach=function(_a,wc,_g){var ty;for(ty in this.a){var ny=this.a[ty];_g&&!_g(ty,ny.data,ny.size)||_a.call(wc,ty,ny.data,ny.size)}},T0.prototype.removeAll=T0.prototype.Y=function(_a){var wc;for(wc in this.a){var _g=this.a[wc];_a&&!_a(wc,_g.data,_g.size)||wx(this,this.a[wc],!0)}},T0.prototype.setMaxSize=T0.prototype.Z=function(_a){if(!(0<+_a))throw new w0(T0.prototype.Z,0,_a);return this.u=+_a,ME(this),this},T0.prototype.getMaxSize=T0.prototype.ka=function(){return this.u},T0.prototype.getCurrentSize=T0.prototype.ia=function(){return this.b}}).call(ns);var MathUtils$1=MathUtils={},Geo;function _xyToArr(e){return[e.x,e.y]}function _arrToXy(e){return _construct(ns.H.math.Point,_toConsumableArray(e))}MathUtils.clipPolygon=function(e,n){var r,d,m=[],g=ns.H.math.clipping.clipPolygon(e.map(_arrToXy),n.map(_arrToXy));if(g)do{for(r=[],d=g;r.push(_xyToArr(d)),d=d.next;);m.push(r)}while(g=g.nextPoly);else MathUtils.isPointInsidePolygon(n[0],e)?m.push(n):MathUtils.isPointInsidePolygon(e[0],n)&&m.push(e);return m},MathUtils.isPointInsidePolygon=function(e,n){return ns.H.math.isPointInsidePolygon({x:e[0],y:e[1]},ns.H.math.flatten(n))},MathUtils.clamp=function(e,n,r){return(e-=0)>r?r:e<n?n:e},MathUtils.splitLegs=function(e,n){var r=[];e.push(e[0]);for(var d=0;d<e.length-1;d++){var g=e[d],v=e[d+1];r.push(g),Math.abs(v[0]-g[0])>=n&&r.push([(g[0]+v[0])/2,(g[1]+v[1])/2])}return r.length!==e.length-1?MathUtils.splitLegs(r,n):r},MathUtils.getBBox=function(e){var n=1/0,r=1/0,d=-1/0,m=-1/0;return e.forEach(function(g){g[0]<n&&(n=g[0]),g[1]<r&&(r=g[1]),g[0]>d&&(d=g[0]),g[1]>m&&(m=g[1])}),[n,r,d,m]},MathUtils.getBBoxCenter=function(e){var n=_slicedToArray(e,4),r=n[0],d=n[1];return[r+(n[2]-r)/2,d+(n[3]-d)/2]},MathUtils.getLineLength=function(e,n,r,d){return Math.sqrt(Math.pow(e-r,2)+Math.pow(n-d,2))},MathUtils.modulo=function(e,n){var r;return(r=e%n)<0==n<0?r:r+n};var Geo$1=Geo={};Geo.default_source_max_zoom=18,Geo.default_view_max_zoom=20,Geo.tile_size=256,Geo.half_circumference_meters=20037508.342789244,Geo.circumference_meters=2*Geo.half_circumference_meters,Geo.min_zoom_meters_per_pixel=Geo.circumference_meters/Geo.tile_size;var meters_per_pixel=[];Geo.metersPerPixel=function(e){return meters_per_pixel[e]=meters_per_pixel[e]||Geo.min_zoom_meters_per_pixel/Math.pow(2,e),meters_per_pixel[e]};var meters_per_tile=[];Geo.metersPerTile=function(e){return meters_per_tile[e]=meters_per_tile[e]||Geo.circumference_meters/Math.pow(2,e),meters_per_tile[e]},Geo.tile_scale=4096,Geo.units_per_pixel=Geo.tile_scale/Geo.tile_size,Geo.height_scale=16;var units_per_meter=[];Geo.unitsPerMeter=function(e){return units_per_meter[e]=units_per_meter[e]||Geo.tile_scale/(Geo.tile_size*Geo.metersPerPixel(e)),units_per_meter[e]},Geo.metersForTile=function(e){return{x:e.x*Geo.circumference_meters/Math.pow(2,e.z)-Geo.half_circumference_meters,y:-(e.y*Geo.circumference_meters/Math.pow(2,e.z)-Geo.half_circumference_meters)}},Geo.tileForMeters=function(e,n){var r=_slicedToArray(e,2),m=r[1];return{x:Math.floor((r[0]+Geo.half_circumference_meters)/(Geo.circumference_meters/Math.pow(2,n))),y:Math.floor((-m+Geo.half_circumference_meters)/(Geo.circumference_meters/Math.pow(2,n))),z:n}},Geo.metersToExactTileCoords=function(e,n){var r=_slicedToArray(e,2),d=r[0],m=r[1];return{x:Math.pow(2,n-1)*(1+d/Geo.half_circumference_meters),y:Math.pow(2,n-1)*(1-m/Geo.half_circumference_meters),z:n}},Geo.wrapTile=function(e){var n=e.x,r=e.y,d=e.z,m=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{x:!0,y:!1},g=(1<<d)-1;return m.x&&(n&=g),m.y&&(r&=g),{x:n,y:r,z:d}},Geo.wrapMeters=function(e){var r=e.y;return{x:MathUtils$1.modulo(e.x+Geo.half_circumference_meters,Geo.circumference_meters)-Geo.half_circumference_meters,y:r}},Geo.metersToLatLng=function(e){var n=_slicedToArray(e,2),r=n[0],d=n[1];return r/=Geo.half_circumference_meters,d/=Geo.half_circumference_meters,d=(2*Math.atan(Math.exp(d*Math.PI))-Math.PI/2)/Math.PI,[r*=180,d*=180]},Geo.latLngToMeters=function(e){var n=_slicedToArray(e,2),r=n[0],d=n[1];return d=Math.log(Math.tan(d*Math.PI/360+Math.PI/4))/Math.PI,d*=Geo.half_circumference_meters,d=Math.min(Math.max(d,-Geo.half_circumference_meters),Geo.half_circumference_meters),[r*=Geo.half_circumference_meters/180,d]},Geo.tileSpaceToMeters=function(e,n,r){var d=_slicedToArray(e,2),m=d[0],g=d[1],v=Geo.unitsPerMeter(n);return[m/v+r.x,g/v+r.y]},Geo.tileSpaceToLatlng=function(e,n,r){var d=Geo.unitsPerMeter(n);return Geo.transformGeometry(e,function(m){m[0]=m[0]/d+r.x,m[1]=m[1]/d+r.y;var g=_slicedToArray(Geo.metersToLatLng(m),2),w=g[1];m[0]=g[0],m[1]=w}),e},Geo.copyGeometry=function(e){if(null!=e){var n={type:e.type};return"Point"===e.type?n.coordinates=[e.coordinates[0],e.coordinates[1]]:"LineString"===e.type||"MultiPoint"===e.type?n.coordinates=e.coordinates.map(function(r){return[r[0],r[1]]}):"Polygon"===e.type||"MultiLineString"===e.type?n.coordinates=e.coordinates.map(function(r){return r.map(function(d){return[d[0],d[1]]})}):"MultiPolygon"===e.type&&(n.coordinates=e.coordinates.map(function(r){return r.map(function(d){return d.map(function(m){return[m[0],m[1]]})})})),n}},Geo.transformGeometry=function(e,n){null!=e&&("Point"===e.type?n(e.coordinates):"LineString"===e.type||"MultiPoint"===e.type?e.coordinates.forEach(n):"Polygon"===e.type||"MultiLineString"===e.type?e.coordinates.forEach(function(r){return r.forEach(n)}):"MultiPolygon"===e.type&&e.coordinates.forEach(function(r){r.forEach(function(d){return d.forEach(n)})}))},Geo.boxIntersect=function(e,n){return!(n.sw.x>e.ne.x||n.ne.x<e.sw.x||n.sw.y>e.ne.y||n.ne.y<e.sw.y)},Geo.findBoundingBox=function(e){for(var n=1/0,r=-1/0,d=1/0,m=-1/0,g=e[0].length,v=0;v<g;v++){var w=e[0][v];w[0]<n&&(n=w[0]),w[1]<d&&(d=w[1]),w[0]>r&&(r=w[0]),w[1]>m&&(m=w[1])}return[n,d,r,m]},Geo.geometryType=function(e){return"Polygon"===e||"MultiPolygon"===e?"polygon":"LineString"===e||"MultiLineString"===e?"line":"Point"===e||"MultiPoint"===e?"point":void 0},Geo.centroid=function(e){var n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(e&&0!==e.length){var r,d=0,m=0,g=0,v=e[0],w=v.length;n&&(r=v[0],v=v.map(function(_s){return[_s[0]-r[0],_s[1]-r[1]]}));for(var k=0,j=w-1;k<w;j=k,k++){var G=v[k],q=v[j],_t=G[1]*q[0]-q[1]*G[0];d+=(G[0]+q[0])*_t,m+=(G[1]+q[1])*_t,g+=3*_t}var _r=[d/g,m/g];return n&&(_r[0]+=r[0],_r[1]+=r[1]),_r}},Geo.multiCentroid=function(e){for(var n=e.length,r=[0,0],d=0;d<e.length;d++){var m=Geo.centroid(e[d]);r[0]+=m[0],r[1]+=m[1]}return r[0]/=n,r[1]/=n,r},Geo.signedPolygonRingAreaSum=function(e){for(var n=0,r=e.length,d=0;d<r-1;d++){var m=e[d],g=e[d+1];n+=m[0]*g[1]-g[0]*m[1]}return n+(e[r-1][0]*e[0][1]-e[0][0]*e[r-1][1])},Geo.polygonRingArea=function(e){return Math.abs(Geo.signedPolygonRingAreaSum(e))/2},Geo.polygonArea=function(e){if(e)return Geo.polygonRingArea(e[0])},Geo.multiPolygonArea=function(e){for(var n=0,r=0;r<e.length;r++)n+=Geo.polygonArea(e[r]);return n},Geo.ringWinding=function(e){var n=Geo.signedPolygonRingAreaSum(e);return 0<n?"CW":n<0?"CCW":void 0},Geo.getTileBoundingBox=function(e,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,d=Geo.wrapTile(e,{x:!0}),m=Geo.metersForTile(d),g=Geo.metersPerPixel(d.z),v=Geo.metersToLatLng([m.x-r*g,m.y+r*g]),w=Geo.metersToLatLng([m.x+(n+r)*g,m.y-(n+r)*g]),k=Geo.isLastTile(d);return new ns.H.geo.Rect(0===e.y?90:MathUtils$1.clamp(v[1],-90,90),MathUtils$1.clamp(v[0],-180,180),k.row?-90:MathUtils$1.clamp(w[1],-90,90),k.column?180:MathUtils$1.clamp(w[0],-180,180))},Geo.isLastTile=function(e){var n=e.x,d=e.z;return{row:e.y===Math.pow(2,d)-1,column:n===Math.pow(2,d)-1}};var MethodNotImplemented=function(){_inherits(n,_wrapNativeSuper(Error));var e=_createSuper(n);function n(r){var d;return _classCallCheck(this,n),(d=e.call(this)).name="MethodNotImplemented",d.message="Method "+r+" must be implemented in subclass",d}return n}(),is_worker=!1,is_main=!1,force_main,force_worker;try{window.document!==HTMLDocument&&(is_main=!0)}catch(e){void 0!==self&&(is_worker=!0,self.window={document:{}},self.document=self.window.document)}var Thread={get is_fake_worker(){return self.is_fake_worker},get is_worker(){return void 0!==force_worker?force_worker:is_worker||self.is_fake_worker},set is_worker(e){force_worker=e},get is_main(){return void 0!==force_main?force_main:is_main&&!self.is_fake_worker},set is_main(e){force_main=e},is_native_worker:is_worker},WorkerBroker={},message_id=0,messages={},targets={},main_worker_targets={};function findTarget(e,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:targets,d=[];if("string"==typeof e&&(e=(d=e.split(".")).pop()),Thread.is_main&&n&&1===d.length&&"self"===d[0])r=n;else for(var m=0;m<d.length;m++){if(!r[d[m]])return[];r=r[d[m]]}return[e,r]}WorkerBroker.addTarget=function(e,n){Thread.is_fake_worker?main_worker_targets[e]=n:targets[e]=n},WorkerBroker.removeTarget=function(e){delete targets[e],delete main_worker_targets[e]};var ERROR_NO_TARGET=" No object with that name is registered on main thread.",ERROR_NO_METHOD=" Object has no method with that name.",ERROR_NOT_SET="_worker_broker_error_not_set_";function setupMainThread(){WorkerBroker.postMessage=function(e,n){for(var r=arguments.length,d=new Array(2<r?r-2:0),m=2;m<r;m++)d[m-2]=arguments[m];if(Array.isArray(e))return Promise.all(e.map(function(q){return WorkerBroker.postMessage.apply(WorkerBroker,[q,n].concat(_toConsumableArray(d)))}));var g,v={};"object"===_typeof(n)&&(n=(v=n).method);var w="main_send";"string"==typeof e?(n=e,d=Array.prototype.slice.call(arguments,1),g=!0,w="worker_send"):e.init&&(g=!0);var k,j=[];if(d&&1===d.length&&d[0]instanceof WorkerBroker.withTransferables&&(j=d[0].transferables,d=d[0].value),k={type:w,message_id:++message_id,method:n,message:d},g)return function(q,_t){var _s=_slicedToArray(findTarget(q.method,_t,"main_send"===q.type?main_worker_targets:targets),2),ga=_s[0],_c=_s[1],_u="Worker broker could not dispatch message type ".concat(q.method," on target ").concat(q.target,".");if(!_c)throw Error(_u+ERROR_NO_TARGET);var _f="function"==typeof _c[ga]&&_c[ga];if(!_f)throw Error(_u+ERROR_NO_METHOD);return new Promise(function(_h,ad){var ey;try{ey=_f.apply(_c,q.message)}catch(sy){return void ad(sy)}ey instanceof Promise?ey.then(function(sy){sy instanceof WorkerBroker.withTransferables&&(sy=sy.value[0]),_h(sy)},function(sy){ad(sy instanceof Error?"".concat(sy.message,": ").concat(sy.stack):sy)}):(ey instanceof WorkerBroker.withTransferables&&(ey=ey.value[0]),_h(ey))})}(k,e&&e.init?e:void 0);var G=new Promise(function(q,_t){messages[message_id]={method:n,message:d,resolve:q,reject:_t}});return v.stringify&&(k=JSON.stringify(k)),e.postMessage(k,j.map(function(q){return q.object})),freeTransferables(j),G},WorkerBroker.addWorker=function(e){if(!(e instanceof Worker))throw Error("Worker broker could not add non-Worker object",e);e.addEventListener("message",function(n){var r="string"==typeof n.data?JSON.parse(n.data):n.data,d=r.message_id;if("worker_reply"===r.type)messages[d]&&(r.error?messages[d].reject(r.error):messages[d].resolve(r.message),delete messages[d]);else if("worker_send"===r.type&&null!=d){var m=_slicedToArray(findTarget(r.method),2),g=m[0],v=m[1],w="Worker broker could not dispatch message type ".concat(r.method," on target ").concat(r.target,".");if(!v)throw Error(w+ERROR_NO_TARGET);var k="function"==typeof v[g]&&v[g];if(!k)throw Error(w+ERROR_NO_METHOD);var j,G=ERROR_NOT_SET;try{j=k.apply(v,r.message)}catch(_r){G=_r}var q,_t=[];j&&"function"==typeof j.then?j.then(function(_r){_r instanceof WorkerBroker.withTransferables&&(_t=_r.transferables,_r=_r.value[0]),e.postMessage(q={type:"main_reply",message_id:d,message:_r},_t.map(function(_s){return _s.object})),freeTransferables(_t)},function(_r){e.postMessage({type:"main_reply",message_id:d,error:_r instanceof Error?"".concat(_r.message,": ").concat(_r.stack):_r})}):(j instanceof WorkerBroker.withTransferables&&(_t=j.transferables,j=j.value[0]),q={type:"main_reply",message_id:d,message:j,error:G instanceof Error?"".concat(G.message,": ").concat(G.stack):G},e.postMessage(q,_t.map(function(_r){return _r.object})),freeTransferables(_t))}})},WorkerBroker.getMessages=function(){return messages},WorkerBroker.getMessageId=function(){return message_id}}function setupWorkerThread(){WorkerBroker.postMessage=function(e){for(var n=arguments.length,r=new Array(1<n?n-1:0),d=1;d<n;d++)r[d-1]=arguments[d];var m={};"object"===_typeof(e)&&(e=(m=e).method);var g,v=new Promise(function(k,j){messages[message_id]={method:e,message:r,resolve:k,reject:j}}),w=[];return r&&1===r.length&&r[0]instanceof WorkerBroker.withTransferables&&(w=r[0].transferables,r=r[0].value),g={type:"worker_send",message_id,method:e,message:r},m.stringify&&(g=JSON.stringify(g)),self.postMessage(g,w.map(function(k){return k.object})),freeTransferables(w),message_id++,v},self.addEventListener("message",function(e){var n="string"==typeof e.data?JSON.parse(e.data):e.data,r=n.message_id;if("main_reply"===n.type)messages[r]&&(n.hasOwnProperty("error")&&n.error!==ERROR_NOT_SET?messages[r].reject(n.error):messages[r].resolve(n.message),delete messages[r]);else if("main_send"===n.type&&null!=r){var d=_slicedToArray(findTarget(n.method),2),m=d[0],g=d[1],v="Worker broker could not dispatch message type ".concat(n.method," on target ").concat(n.target,".");if(!g)throw Error(v+ERROR_NO_TARGET);var w,k,j="function"==typeof g[m]&&g[m];if(!j)throw Error(v+ERROR_NO_METHOD);try{w=j.apply(g,n.message)}catch(_t){k=_t}var G,q=[];w instanceof Promise?w.then(function(_t){_t instanceof WorkerBroker.withTransferables&&(q=_t.transferables,_t=_t.value[0]),G={type:"worker_reply",message_id:r,message:_t},self.postMessage(G,q.map(function(_r){return _r.object})),freeTransferables(q)},function(_t){self.postMessage({type:"worker_reply",message_id:r,error:_t instanceof Error?"".concat(_t.message,": ").concat(_t.stack):_t})}):(w instanceof WorkerBroker.withTransferables&&(q=w.transferables,w=w.value[0]),G={type:"worker_reply",message_id:r,message:w,error:k instanceof Error?"".concat(k.message,": ").concat(k.stack):k},self.postMessage(G,q.map(function(_t){return _t.object})),freeTransferables(q))}})}function findTransferables(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[];if(!e)return d;if(Array.isArray(e))e.forEach(function(g,v){return findTransferables(g,e,v,d)});else if("object"===_typeof(e))if(e instanceof ArrayBuffer)d.push({object:e,parent:n,property:r});else if(e.buffer instanceof ArrayBuffer)d.push({object:e.buffer,parent:n,property:r});else for(var m in e)findTransferables(e[m],e,m,d);return d}function freeTransferables(e){Array.isArray(e)&&e.filter(function(n){return n.parent&&n.property}).forEach(function(n){return delete n.parent[n.property]})}WorkerBroker.withTransferables=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!(this instanceof WorkerBroker.withTransferables))return _construct(WorkerBroker.withTransferables,n);this.value=n,this.transferables=findTransferables(this.value)},Thread.is_main&&setupMainThread(),Thread.is_worker&&setupWorkerThread();var LEVELS={silent:-1,error:0,warn:1,info:2,debug:3,trace:4},methods={},logged_once={},Utils;function methodForLevel(e){return methods[e]=methods[e]||(console[e]?console[e]:console.log).bind(console),methods[e]}function log(e){var n="object"===_typeof(e)?e.level:e;if(LEVELS[n]<=LEVELS[log.level]){for(var r=arguments.length,d=new Array(1<r?r-1:0),m=1;m<r;m++)d[m-1]=arguments[m];if(Thread.is_native_worker)WorkerBroker.postMessage.apply(WorkerBroker,[{method:"_logProxy",stringify:!0},e].concat(d));else{if("object"===_typeof(e)&&!0===e.once){if(logged_once[JSON.stringify(d)])return;logged_once[JSON.stringify(d)]=!0}var g=methodForLevel(n);1<d.length?g.apply(void 0,["Tangram [".concat(n,"]: ").concat(d[0])].concat(_toConsumableArray(d.slice(1)))):g("Tangram [".concat(n,"]: ").concat(d[0]))}}}function debounce(e,n,r){var d,m;return r=r||0,function(){var g=this,v=arguments;function w(){m=0,e.apply(g,v)}clearTimeout(d),m&&r&&Date.now()-m>=r?w():(m=m||Date.now(),d=setTimeout(function(){w()},n))}}log.level="info",log.workers=null,log.setLevel=function(e){log.level=e,Thread.is_main&&Array.isArray(log.workers)&&WorkerBroker.postMessage(log.workers,"_logSetLevelProxy",e)},Thread.is_main&&(log.setWorkers=function(e){log.workers=e},log.reset=function(){logged_once={}}),WorkerBroker.addTarget("_logProxy",log),WorkerBroker.addTarget("_logSetLevelProxy",log.setLevel);var Utils$1=Utils={};WorkerBroker.addTarget("Utils",Utils),Utils.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},Utils.isMicrosoft=function(){return/(Trident\/7.0|Edge[ /](\d+[\.\d]+))/i.test(navigator.userAgent)},Utils._requests={},Utils._proxy_requests={},Utils.io=function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:6e4,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"text",d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"GET",m=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},g=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null,v=6<arguments.length&&void 0!==arguments[6]&&arguments[6];if(Thread.is_worker&&Utils.isMicrosoft())return log("debug","Proxying request for URL to worker",e),g&&(Utils._proxy_requests[g]=!0),WorkerBroker.postMessage("Utils.io",e,n,r,d,m,g,!0);var w=new XMLHttpRequest,k=(k=new Promise(function(j,G){w.open(d,e,!0),w.timeout=n,w.responseType=r,w.onload=function(){200===w.status?-1<["text","json"].indexOf(w.responseType)?j(w.responseText):j(w.response):G(Error("Request error with a status of "+w.statusText))},w.onerror=function(q){G(Error("There was a network error"+q.toString()))},w.ontimeout=function(q){G(Error("timeout "+q.toString()))},w.send()})).then(function(j){return g&&delete Utils._requests[g],v?WorkerBroker.withTransferables(j):j});return g&&(Utils._requests[g]=w),k},Utils.cancelRequest=function(e){if(Thread.is_worker&&Utils._proxy_requests[e])return WorkerBroker.postMessage("Utils.cancelRequest",e);Utils._requests[e]?(log("trace","Cancelling network request key '".concat(e,"'")),Utils._requests[e].abort(),delete Utils._requests[e]):log("trace","Could not find network request key '".concat(e,"'"))},Utils.requestAnimationFramePolyfill=function(){"function"!=typeof window.requestAnimationFrame&&(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,16.666666666666668)})},Utils.serializeWithFunctions=function(e){return"function"==typeof e?e.toString():JSON.stringify(e,function(n,r){return"function"==typeof r?r.toString():r})},Utils.stringsToFunctions=function(e,n){if("string"==typeof e)e=Utils.stringToFunction(e,n);else if(null!=e&&"object"===_typeof(e))for(var r in e)e[r]=Utils.stringsToFunctions(e[r],n);return e},Utils._use_count=0,Utils._function_cache={};var _clear_function_cache=debounce(function(){log("trace","Cleared cached ".concat(Object.keys(Utils._function_cache).length," functions (reused ").concat(Utils._use_count," times)")),Utils._use_count=0,Utils._function_cache={}},1e4),FUNCTION_MATCH_RGX=/^\s*function[^(]*\(([^)]*)\)\s*?\{([\s\S]*)\}$/m,_createObjectURL,_revokeObjectURL;function addBaseURL(e,n){if(!e||!isRelativeURL(e))return e;var r,d="/"!==e[0];return n?(r=document.createElement("a")).href=n:r=window.location,d?pathForURL(r.href)+e:(r.origin||r.protocol+"//"+r.host)+e}function pathForURL(e){if("string"!=typeof e||-1!==e.search(/^(data|blob):/))return"";var n=e.indexOf("?");-1<n&&(e=e.substr(0,n));var r=e.indexOf("#");return-1<r&&(e=e.substr(0,r)),e.substr(0,e.lastIndexOf("/")+1)||""}function extensionForURL(e){var n=(e=e.split("/").pop()).lastIndexOf(".");if(-1<n)return e.substring(n+1)}function isRelativeURL(e){return"string"==typeof e&&!(-1<e.search(/^(http|https|data|blob):/)||"//"===e.substr(0,2))}function addParamsToURL(e,n){if(!n||0===Object.keys(n).length)return[e,[]];var r=e.indexOf("?"),d=e.indexOf("#"),m="";-1<d&&(m=e.slice(d),e=e.slice(0,d)),-1===r&&(r=e.length,e+="?"),r++;var g="",v=[];for(var w in n)""===getURLParameter(w,e)?g+="".concat(w,"=").concat(n[w],"&"):v.push([w,n[w]]);return[e=e.slice(0,r)+g+e.slice(r)+m,v]}function createObjectURL(e){return void 0===_createObjectURL&&"function"!=typeof(_createObjectURL=window.URL&&window.URL.createObjectURL||window.webkitURL&&window.webkitURL.createObjectURL)&&(_createObjectURL=null,log("warn","window.URL.createObjectURL (or vendor prefix) not found, unable to create local blob URLs")),_createObjectURL?_createObjectURL(e):e}function revokeObjectURL(e){return void 0===_revokeObjectURL&&"function"!=typeof(_revokeObjectURL=window.URL&&window.URL.revokeObjectURL||window.webkitURL&&window.webkitURL.revokeObjectURL)&&(_revokeObjectURL=null,log("warn","window.URL.revokeObjectURL (or vendor prefix) not found, unable to create local blob URLs")),_revokeObjectURL?_revokeObjectURL(e):e}function getURLParameter(e,n){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(n);return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))}Utils.stringToFunction=function(e,n){var r=e;n&&(r+=n.toString());var d=Utils._function_cache[r];if(_clear_function_cache(),d)return Utils._use_count++,d;var m="string"==typeof e&&e.match(FUNCTION_MATCH_RGX);if(m&&2<m.length)try{var g=m[2],v=0<(v=0<m[1].length&&m[1].split(",").map(function(k){return k.trim()}).filter(function(k){return k})).length?v:["context"],w=new Function(v.toString(),"function"==typeof n?n(g):g);return Utils._function_cache[r]=w}catch{return e}return e},Utils.device_pixel_ratio=1,Utils.isPowerOf2=function(e){return 0==(e&e-1)},Utils.interpolate=function(e,n,r){if(!Array.isArray(n)||!Array.isArray(n[0])||n.length<1)return n;var d,m,g,v,w;if(e<=n[0][0])v=n[0][1],"function"==typeof r&&(v=r(v));else if(e>=n[n.length-1][0])v=n[n.length-1][1],"function"==typeof r&&(v=r(v));else for(var k=0;k<n.length-1;k++)if(e>=n[k][0]&&e<n[k+1][0]){if(d=n[k][0],m=n[k+1][0],Array.isArray(n[k][1])){v=[];for(var j=0;j<n[k][1].length;j++)"function"==typeof r?(w=r(n[k][1][j]),g=r(n[k+1][1][j])-w,v[j]=g*(e-d)/(m-d)+w):v[j]=(g=n[k+1][1][j]-n[k][1][j])*(e-d)/(m-d)+n[k][1][j]}else v="function"==typeof r?(w=r(n[k][1]),(g=r(n[k+1][1])-w)*(e-d)/(m-d)+w):(g=n[k+1][1]-n[k][1])*(e-d)/(m-d)+n[k][1];break}return v},Utils.toCSSColor=function(e){return 1===e[3]?"rgb(".concat(e.slice(0,3).map(function(n){return Math.round(255*n)}).join(", "),")"):"rgba(".concat(e.map(function(n,r){return r<3&&Math.round(255*n)||n}).join(", "),")")},Utils.pointInTile=function(e){return 0<=e[0]&&e[1]>-Geo$1.tile_scale&&e[0]<Geo$1.tile_scale&&e[1]<=0},Utils.zoomToTileLevel=function(e){return Math.floor(e)};var DataSource=function(){function e(n,r){var d=this;if(_classCallCheck(this,e),this.config=n,this.sources=r,this.id=n.id,this.name=n.name,this.pad_scale=n.pad_scale||1e-4,this.default_winding=null,this.rasters=[],Array.isArray(n.rasters)&&n.rasters.forEach(function(g){-1===d.rasters.indexOf(g)&&d.rasters.push(g)}),this.preprocess=n.preprocess,"function"==typeof this.preprocess&&this.preprocess.bind(this),this.transform=n.transform,"function"==typeof this.transform)this.transform=this.transform.bind(this);else if("object"===_typeof(this.transform))for(var m in this.transform)"function"==typeof this.transform[m]&&(this.transform[m]=this.transform[m].bind(this));this.extra_data=n.extra_data,this.scripts=n.scripts,this.max_zoom=null!=n.max_zoom?n.max_zoom:Geo$1.default_source_max_zoom,this.setTileSize(n.tile_size),this.max_coord_zoom=this.max_zoom+this.zoom_bias,this.min_display_zoom=null!=n.min_display_zoom?n.min_display_zoom:0,this.max_display_zoom=null!=n.max_display_zoom?n.max_display_zoom:null,this._has_volatile_data=!!n.has_volatile_data}return _createClass(e,[{key:"hasLabeledData",value:function(){return!0}},{key:"_transformTile",value:function(n){if(n.source_data.layers){var r={coords:n.coords},d=[];if("function"==typeof this.transform)d.push(this.transform);else if("object"===_typeof(this.transform))for(var m=Object.keys(this.transform).sort(),g=0;g<m.length;g++)d.push(this.transform[m[g]]);for(var v=1===Object.keys(n.source_data.layers).length&&n.source_data.layers._default,w=0;w<d.length;w++)v?n.source_data.layers._default=d[w](n.source_data.layers._default,this.extra_data,r):n.source_data.layers=d[w](n.source_data.layers,this.extra_data,r)}}},{key:"_postProcessTile",value:function(n){var r=this;for(var d in this._transformTile(n),n.source_data.layers){var m=n.source_data.layers[d];m&&m.features&&m.features.forEach(function(g){Geo$1.transformGeometry(g.geometry,function(v){v[1]=-v[1],r.pad_scale&&(v[0]=Math.round(v[0]*(1+r.pad_scale)-Geo$1.tile_scale*r.pad_scale/2),v[1]=Math.round(v[1]*(1+r.pad_scale)-Geo$1.tile_scale*r.pad_scale/2))}),r.updateDefaultWinding(g.geometry)})}n.default_winding=this.default_winding||"CCW"}},{key:"load",value:function(n){return n.source_data={},n.source_data.layers={},n.pad_scale=this.pad_scale,n.rasters=_toConsumableArray(this.rasters),this._load(n)}},{key:"_load",value:function(){throw new MethodNotImplemented("_load")}},{key:"setTileSize",value:function(n){this.tile_size=n||256,("number"!=typeof this.tile_size||this.tile_size<256||!Utils$1.isPowerOf2(this.tile_size))&&(log({level:"warn",once:!0},"Data source '".concat(this.name,"': 'tile_size' parameter must be a number that is a power of 2 greater than or equal to 256, but was '").concat(n,"'")),this.tile_size=256),this.zoom_bias=Math.log2(this.tile_size)-8}},{key:"updateDefaultWinding",value:function(n){return null==this.default_winding&&("Polygon"===n.type?this.default_winding=Geo$1.ringWinding(n.coordinates[0]):"MultiPolygon"===n.type&&(this.default_winding=Geo$1.ringWinding(n.coordinates[0][0]))),this.default_winding}},{key:"includesTile",value:function(n,r){if(n.z<this.min_display_zoom||null!=this.max_display_zoom&&r>this.max_display_zoom)return!1;for(var d=0;d<this.rasters.length;d++){var m=this.rasters[d];if(this.sources[m]&&this.sources[m]!==this&&!this.sources[m].includesTile(n,n.z))return!1}return!0}},{key:"has_volatile_data",get:function(){return this._has_volatile_data},set:function(n){this._has_volatile_data=0<arguments.length&&void 0!==n&&n}}],[{key:"create",value:function(n,r){for(var d in r)if(r[d].config.name===n.name&&e.sameConfig(r[d],{config:n}))return r[d];if(e.types[n.type])return new e.types[n.type](n,r)}},{key:"sameConfig",value:function(n,r){if(!n||!r)return!1;var d=Object.assign({},n.config,{id:null,tiled:null,url:null}),m=Object.assign({},r.config,{id:null,tiled:null,url:null});return JSON.stringify(d)===JSON.stringify(m)}},{key:"coordsToMeters",value:function(n){var r=_slicedToArray(Geo$1.latLngToMeters(n),2),m=r[1];n[0]=r[0],n[1]=m}},{key:"projectData",value:function(n){for(var r in n.layers)for(var d=n.layers[r].features.length,m=0;m<d;m++)Geo$1.transformGeometry(n.layers[r].features[m].geometry,e.coordsToMeters)}},{key:"metersToTileUnits",value:function(n,r,d){d[0]=Math.round((d[0]-r.x)*n),d[1]=-1*Math.round((d[1]-r.y)*n)}},{key:"scaleData",value:function(n,r){var m=r.min,g=e.metersToTileUnits.bind(this,Geo$1.unitsPerMeter(r.coords.z),m);for(var v in n.layers)for(var w=n.layers[v].features.length,k=0;k<w;k++)Geo$1.transformGeometry(n.layers[v].features[k].geometry,g)}},{key:"register",value:function(n,r){n&&r&&(e.types[r]=n)}}]),e}();DataSource.types={};var network_request_id=0,NetworkSource=function(){_inherits(n,DataSource);var e=_createSuper(n);function n(r,d){var m;_classCallCheck(this,n),(m=e.call(this,r,d)).response_type="";var g=_slicedToArray(addParamsToURL(r.url,r.url_params),2),w=g[1];if(m.url=g[0],w.forEach(function(k){var j=_slicedToArray(k,2),G=j[0],q=j[1];log({level:"warn",once:!0},"Data source '".concat(m.name,"': parameter '").concat(G,"' already present in URL '").concat(r.url,"', ")+"skipping value '".concat(G,"=").concat(q,"' specified in 'url_params'"))}),"string"!=typeof m.url)throw Error("Network data source must provide a string `url` property");return m}return _createClass(n,[{key:"_load",value:function(r){var d=this,m=this.formatUrl(this.url,r),g=r.source_data;return g.url=m,new Promise(function(v,w){g.error=null;var k=network_request_id+++"-"+m,j=Utils$1.io(m,6e4,d.response_type,"GET",{},k);g.request_id=k,j.then(function(G){"function"==typeof d.preprocess&&(G=d.preprocess(G)),(G=G instanceof Promise?G:Promise.resolve(G)).then(function(q){d.parseSourceData(r,g,q),d._postProcessTile(r),v(r)})},function(G){g.error=G.stack,d._postProcessTile(r),v(r)})})}},{key:"formatUrl",value:function(){throw new MethodNotImplemented("formatUrl")}},{key:"parseSourceData",value:function(){throw new MethodNotImplemented("parseSourceData")}}]),n}(),NetworkTileSource=function(){_inherits(n,NetworkSource);var e=_createSuper(n);function n(r,d){var m;return _classCallCheck(this,n),(m=e.call(this,r,d)).tiled=!0,m.parseBounds(r),m.builds_geometry_tiles=!1,m.tms=!0===r.tms,-1<m.url.search("{s}")&&(Array.isArray(r.url_subdomains)&&0<r.url_subdomains.length?(m.url_subdomains=r.url_subdomains,m.next_url_subdomain=0):log({level:"warn",once:!0},"Data source '".concat(m.name,"': source URL includes '{s}' subdomain marker ('").concat(m.url,"'), but no subdomains ")+"were specified in 'url_subdomains' parameter")),m}return _createClass(n,[{key:"parseBounds",value:function(r){var d,m,g,v;Array.isArray(r.bounds)&&4===r.bounds.length&&(this.bounds=r.bounds,m=(d=_slicedToArray(this.bounds,4))[0],g=d[1],v=d[2],this.bounds_meters={min:Geo$1.latLngToMeters([m,d[3]]),max:Geo$1.latLngToMeters([v,g])},this.bounds_tiles={min:{},max:{}})}},{key:"checkBounds",value:function(r){if(this.bounds){r=Geo$1.wrapTile(r,{x:!0});var d=(d=this.bounds_tiles.min[r.z])||(this.bounds_tiles.min[r.z]=Geo$1.tileForMeters(this.bounds_meters.min,r.z)),m=(m=this.bounds_tiles.max[r.z])||(this.bounds_tiles.max[r.z]=Geo$1.tileForMeters(this.bounds_meters.max,r.z));if(r.x<d.x||r.x>m.x||r.y<d.y||r.y>m.y)return!1}return!0}},{key:"includesTile",value:function(r,d){return!!_get(_getPrototypeOf(n.prototype),"includesTile",this).call(this,r,d)&&!!this.checkBounds(r)}},{key:"formatUrl",value:function(r,d){var m=Geo$1.wrapTile(d.coords,{x:!0});this.tms&&(m.y=Math.pow(2,m.z)-1-m.y);var g=r.replace("{x}",m.x).replace("{y}",m.y).replace("{z}",m.z);return null!=this.url_subdomains&&(g=g.replace("{s}",this.url_subdomains[this.next_url_subdomain]),this.next_url_subdomain=(this.next_url_subdomain+1)%this.url_subdomains.length),g}},{key:"urlHasTilePattern",value:function(r){return r&&-1<r.search("{x}")&&-1<r.search("{y}")&&-1<r.search("{z}")}}]),n}(),MapsJsSource=function(){_inherits(n,DataSource);var e=_createSuper(n);function n(r,d){var m;return _classCallCheck(this,n),(m=e.call(this,r,d)).target_name="MapsJsSource"+r.uid,m.tiled=!!r.tiled,WorkerBroker.addTarget(m.target_name,_assertThisInitialized(m)),Thread.is_worker&&WorkerBroker.postMessage(m.target_name+".onWorkerInitialized"),Thread.is_main&&(m._workers_left=0),m}return _createClass(n,[{key:"initialize",value:function(r,d,m,g){this._main_initialized||(this.provider=r,this.worker=g,this._workers_left+=m,this._on_update=d,this._main_initialized=!0,this._onProviderUpdate=this._onProviderUpdate.bind(this),r.addEventListener("update",this._onProviderUpdate),this._isReady()&&this.onReady())}},{key:"onWorkerInitialized",value:function(){--this._workers_left,this._isReady()&&this.onReady()}},{key:"onReady",value:function(){}},{key:"_isReady",value:function(){return this._main_initialized&&!this._workers_left}},{key:"_onProviderUpdate",value:function(r){this._isReady()&&this.onProviderUpdate(r)}},{key:"onProviderUpdate",value:function(r){this.dispatchUpdate(void 0,r.data)}},{key:"dispatchUpdate",value:function(r,d){this._on_update(this.name,r,d)}},{key:"dispose",value:function(){WorkerBroker.removeTarget(this.target_name),this.provider.removeEventListener("update",this._onProviderUpdate)}}]),n}(),read=function(e,n,r,d,m){var g,v,w=8*m-d-1,k=(1<<w)-1,j=k>>1,G=-7,q=r?m-1:0,_t=r?-1:1,_r=e[n+q];for(q+=_t,g=_r&(1<<-G)-1,_r>>=-G,G+=w;0<G;g=256*g+e[n+q],q+=_t,G-=8);for(v=g&(1<<-G)-1,g>>=-G,G+=d;0<G;v=256*v+e[n+q],q+=_t,G-=8);if(0===g)g=1-j;else{if(g===k)return v?NaN:1/0*(_r?-1:1);v+=Math.pow(2,d),g-=j}return(_r?-1:1)*v*Math.pow(2,g-d)},write=function(e,n,r,d,m,g){var v,w,k,j=8*g-m-1,G=(1<<j)-1,q=G>>1,_t=23===m?Math.pow(2,-24)-Math.pow(2,-77):0,_r=d?0:g-1,_s=d?1:-1,ga=n<0||0===n&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(w=isNaN(n)?1:0,v=G):(v=Math.floor(Math.log(n)/Math.LN2),n*(k=Math.pow(2,-v))<1&&(v--,k*=2),2<=(n+=1<=v+q?_t/k:_t*Math.pow(2,1-q))*k&&(v++,k/=2),G<=v+q?(w=0,v=G):1<=v+q?(w=(n*k-1)*Math.pow(2,m),v+=q):(w=n*Math.pow(2,q-1)*Math.pow(2,m),v=0));8<=m;e[r+_r]=255&w,_r+=_s,w/=256,m-=8);for(v=v<<m|w,j+=m;0<j;e[r+_r]=255&v,_r+=_s,v/=256,j-=8);e[r+_r-_s]|=128*ga},ieee754={read,write},pbf=Pbf;function Pbf(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Pbf.Varint=0,Pbf.Fixed64=1,Pbf.Bytes=2,Pbf.Fixed32=5;var SHIFT_LEFT_32=4294967296,SHIFT_RIGHT_32=1/SHIFT_LEFT_32;function readVarintRemainder(e,n,r){var d=r.buf,m=d[r.pos++],g=(112&m)>>4;if(m<128||(g|=(127&(m=d[r.pos++]))<<3,m<128)||(g|=(127&(m=d[r.pos++]))<<10,m<128)||(g|=(127&(m=d[r.pos++]))<<17,m<128)||(g|=(127&(m=d[r.pos++]))<<24,m<128)||(g|=(1&(m=d[r.pos++]))<<31,m<128))return toNum(e,g,n);throw new Error("Expected varint not more than 10 bytes")}function readPackedEnd(e){return e.type===Pbf.Bytes?e.readVarint()+e.pos:e.pos+1}function toNum(e,n,r){return r?4294967296*n+(e>>>0):4294967296*(n>>>0)+(e>>>0)}function writeBigVarint(e,n){var r,d;if(0<=e?(r=e%4294967296|0,d=e/4294967296|0):(d=~(-e/4294967296),4294967295^(r=~(-e%4294967296))?r=r+1|0:d=d+1|(r=0)),0x10000000000000000<=e||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");n.realloc(10),writeBigVarintLow(r,d,n),writeBigVarintHigh(d,n)}function writeBigVarintLow(e,n,r){r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,r.buf[r.pos]=127&(e>>>=7)}function writeBigVarintHigh(e,n){var r=(7&e)<<4;n.buf[n.pos++]|=r|((e>>>=3)?128:0),e&&(n.buf[n.pos++]=127&e|((e>>>=7)?128:0),e&&(n.buf[n.pos++]=127&e|((e>>>=7)?128:0),e&&(n.buf[n.pos++]=127&e|((e>>>=7)?128:0),e&&(n.buf[n.pos++]=127&e|((e>>>=7)?128:0),e&&(n.buf[n.pos++]=127&e)))))}function makeRoomForExtraLength(e,n,r){var d=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.ceil(Math.log(n)/(7*Math.LN2));r.realloc(d);for(var m=r.pos-1;e<=m;m--)r.buf[m+d]=r.buf[m]}function writePackedVarint(e,n){for(var r=0;r<e.length;r++)n.writeVarint(e[r])}function writePackedSVarint(e,n){for(var r=0;r<e.length;r++)n.writeSVarint(e[r])}function writePackedFloat(e,n){for(var r=0;r<e.length;r++)n.writeFloat(e[r])}function writePackedDouble(e,n){for(var r=0;r<e.length;r++)n.writeDouble(e[r])}function writePackedBoolean(e,n){for(var r=0;r<e.length;r++)n.writeBoolean(e[r])}function writePackedFixed32(e,n){for(var r=0;r<e.length;r++)n.writeFixed32(e[r])}function writePackedSFixed32(e,n){for(var r=0;r<e.length;r++)n.writeSFixed32(e[r])}function writePackedFixed64(e,n){for(var r=0;r<e.length;r++)n.writeFixed64(e[r])}function writePackedSFixed64(e,n){for(var r=0;r<e.length;r++)n.writeSFixed64(e[r])}function readUInt32(e,n){return(e[n]|e[n+1]<<8|e[n+2]<<16)+16777216*e[n+3]}function writeInt32(e,n,r){e[r]=n,e[r+1]=n>>>8,e[r+2]=n>>>16,e[r+3]=n>>>24}function readInt32(e,n){return(e[n]|e[n+1]<<8|e[n+2]<<16)+(e[n+3]<<24)}function readUtf8(e,n,r){for(var d="",m=n;m<r;){var g,v,w,k=e[m],j=null,G=239<k?4:223<k?3:191<k?2:1;if(r<m+G)break;1===G?k<128&&(j=k):2===G?128==(192&(g=e[m+1]))&&(j=(31&k)<<6|63&g)<=127&&(j=null):3===G?(v=e[m+2],128==(192&(g=e[m+1]))&&128==(192&v)&&((j=(15&k)<<12|(63&g)<<6|63&v)<=2047||55296<=j&&j<=57343)&&(j=null)):4===G&&(v=e[m+2],w=e[m+3],128==(192&(g=e[m+1]))&&128==(192&v)&&128==(192&w)&&((j=(15&k)<<18|(63&g)<<12|(63&v)<<6|63&w)<=65535||1114112<=j)&&(j=null)),null===j?(j=65533,G=1):65535<j&&(j-=65536,d+=String.fromCharCode(j>>>10&1023|55296),j=56320|1023&j),d+=String.fromCharCode(j),m+=G}return d}function writeUtf8(e,n,r){for(var d,m,g=0;g<n.length;g++){if(55295<(d=n.charCodeAt(g))&&d<57344){if(!m){56319<d||g+1===n.length?(e[r++]=239,e[r++]=191,e[r++]=189):m=d;continue}if(d<56320){e[r++]=239,e[r++]=191,e[r++]=189,m=d;continue}d=m-55296<<10|d-56320|65536,m=null}else m&&(e[r++]=239,e[r++]=191,e[r++]=189,m=null);d<128?e[r++]=d:(d<2048?e[r++]=d>>6|192:(d<65536?e[r++]=d>>12|224:(e[r++]=d>>18|240,e[r++]=d>>12&63|128),e[r++]=d>>6&63|128),e[r++]=63&d|128)}return r}Pbf.prototype={destroy:function(){this.buf=null},readFields:function(e,n,r){for(r=r||this.length;this.pos<r;){var d=this.readVarint(),m=d>>3,g=this.pos;this.type=7&d,e(m,n,this),this.pos===g&&this.skip(d)}return n},readMessage:function(e,n){return this.readFields(e,n,this.readVarint()+this.pos)},readFixed32:function(){var e=readUInt32(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=readInt32(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=readUInt32(this.buf,this.pos)+readUInt32(this.buf,this.pos+4)*SHIFT_LEFT_32;return this.pos+=8,e},readSFixed64:function(){var e=readUInt32(this.buf,this.pos)+readInt32(this.buf,this.pos+4)*SHIFT_LEFT_32;return this.pos+=8,e},readFloat:function(){var e=ieee754.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=ieee754.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var n=this.buf,r=n[this.pos++],d=127&r;return r<128?d:(d|=(127&(r=n[this.pos++]))<<7,r<128?d:(d|=(127&(r=n[this.pos++]))<<14,r<128?d:(d|=(127&(r=n[this.pos++]))<<21,r<128?d:readVarintRemainder(d|=(15&(r=n[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,n=readUtf8(this.buf,this.pos,e);return this.pos=e,n},readBytes:function(){var e=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,e);return this.pos=e,n},readPackedVarint:function(e,n){var r=readPackedEnd(this);for(e=e||[];this.pos<r;)e.push(this.readVarint(n));return e},readPackedSVarint:function(e){var n=readPackedEnd(this);for(e=e||[];this.pos<n;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){var n=readPackedEnd(this);for(e=e||[];this.pos<n;)e.push(this.readBoolean());return e},readPackedFloat:function(e){var n=readPackedEnd(this);for(e=e||[];this.pos<n;)e.push(this.readFloat());return e},readPackedDouble:function(e){var n=readPackedEnd(this);for(e=e||[];this.pos<n;)e.push(this.readDouble());return e},readPackedFixed32:function(e){var n=readPackedEnd(this);for(e=e||[];this.pos<n;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){var n=readPackedEnd(this);for(e=e||[];this.pos<n;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){var n=readPackedEnd(this);for(e=e||[];this.pos<n;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){var n=readPackedEnd(this);for(e=e||[];this.pos<n;)e.push(this.readSFixed64());return e},skip:function(e){var n=7&e;if(n===Pbf.Varint)for(;127<this.buf[this.pos++];);else if(n===Pbf.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Pbf.Fixed32)this.pos+=4;else{if(n!==Pbf.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(e,n){this.writeVarint(e<<3|n)},realloc:function(e){for(var n,r=this.length||16;r<this.pos+e;)r*=2;r!==this.length&&((n=new Uint8Array(r)).set(this.buf),this.buf=n,this.length=r)},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),writeInt32(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),writeInt32(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),writeInt32(this.buf,-1&e,this.pos),writeInt32(this.buf,Math.floor(e*SHIFT_RIGHT_32),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),writeInt32(this.buf,-1&e,this.pos),writeInt32(this.buf,Math.floor(e*SHIFT_RIGHT_32),this.pos+4),this.pos+=8},writeVarint:function(e){268435455<(e=+e||0)||e<0?writeBigVarint(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(127<e?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(127<e?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(127<e?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var n=this.pos;this.pos=writeUtf8(this.buf,e,this.pos);var r=this.pos-n;128<=r&&makeRoomForExtraLength(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeFloat:function(e){this.realloc(4),ieee754.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),ieee754.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var n=e.length;this.writeVarint(n),this.realloc(n);for(var r=0;r<n;r++)this.buf[this.pos++]=e[r]},writeRawMessage:function(e,n){this.pos++;var r=this.pos;e(n,this);var d=this.pos-r;128<=d&&makeRoomForExtraLength(r,d,this),this.pos=r-1,this.writeVarint(d),this.pos+=d},writeMessage:function(e,n,r){this.writeTag(e,Pbf.Bytes),this.writeRawMessage(n,r)},writePackedVarint:function(e,n){this.writeMessage(e,writePackedVarint,n)},writePackedSVarint:function(e,n){this.writeMessage(e,writePackedSVarint,n)},writePackedBoolean:function(e,n){this.writeMessage(e,writePackedBoolean,n)},writePackedFloat:function(e,n){this.writeMessage(e,writePackedFloat,n)},writePackedDouble:function(e,n){this.writeMessage(e,writePackedDouble,n)},writePackedFixed32:function(e,n){this.writeMessage(e,writePackedFixed32,n)},writePackedSFixed32:function(e,n){this.writeMessage(e,writePackedSFixed32,n)},writePackedFixed64:function(e,n){this.writeMessage(e,writePackedFixed64,n)},writePackedSFixed64:function(e,n){this.writeMessage(e,writePackedSFixed64,n)},writeBytesField:function(e,n){this.writeTag(e,Pbf.Bytes),this.writeBytes(n)},writeFixed32Field:function(e,n){this.writeTag(e,Pbf.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(e,n){this.writeTag(e,Pbf.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(e,n){this.writeTag(e,Pbf.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(e,n){this.writeTag(e,Pbf.Fixed64),this.writeSFixed64(n)},writeVarintField:function(e,n){this.writeTag(e,Pbf.Varint),this.writeVarint(n)},writeSVarintField:function(e,n){this.writeTag(e,Pbf.Varint),this.writeSVarint(n)},writeStringField:function(e,n){this.writeTag(e,Pbf.Bytes),this.writeString(n)},writeFloatField:function(e,n){this.writeTag(e,Pbf.Fixed32),this.writeFloat(n)},writeDoubleField:function(e,n){this.writeTag(e,Pbf.Fixed64),this.writeDouble(n)},writeBooleanField:function(e,n){this.writeVarintField(e,!!n)}};var pointGeometry=Point;function Point(e,n){this.x=e,this.y=n}Point.prototype={clone:function(){return new Point(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,n){return this.clone()._rotateAround(e,n)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var n=e.x-this.x,r=e.y-this.y;return n*n+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,n){return Math.atan2(this.x*n-this.y*e,this.x*e+this.y*n)},_matMult:function(e){var r=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=r,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var n=Math.cos(e),r=Math.sin(e),m=r*this.x+n*this.y;return this.x=n*this.x-r*this.y,this.y=m,this},_rotateAround:function(e,n){var r=Math.cos(e),d=Math.sin(e),g=n.y+d*(this.x-n.x)+r*(this.y-n.y);return this.x=n.x+r*(this.x-n.x)-d*(this.y-n.y),this.y=g,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Point.convert=function(e){return e instanceof Point||!Array.isArray(e)?e:new Point(e[0],e[1])};var vectortilefeature=VectorTileFeature;function VectorTileFeature(e,n,r,d,m){this.properties={},this.extent=r,this.type=0,this._pbf=e,this._geometry=-1,this._keys=d,this._values=m,e.readFields(readFeature,this,n)}function readFeature(e,n,r){1==e?n.id=r.readVarint():2==e?readTag(r,n):3==e?n.type=r.readVarint():4==e&&(n._geometry=r.pos)}function readTag(e,n){for(var r=e.readVarint()+e.pos;e.pos<r;){var d=n._keys[e.readVarint()],m=n._values[e.readVarint()];n.properties[d]=m}}function classifyRings(e){var n=e.length;if(n<=1)return[e];for(var r,d,m=[],g=0;g<n;g++){var v=signedArea(e[g]);0!==v&&(void 0===d&&(d=v<0),d===v<0?(r&&m.push(r),r=[e[g]]):r.push(e[g]))}return r&&m.push(r),m}function signedArea(e){for(var n,r,d=0,m=0,g=e.length,v=g-1;m<g;v=m++)d+=((r=e[v]).x-(n=e[m]).x)*(n.y+r.y);return d}VectorTileFeature.types=["Unknown","Point","LineString","Polygon"],VectorTileFeature.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var n,r,d=e.readVarint()+e.pos,m=1,g=0,v=0,w=0,k=[];e.pos<d;)if(g||(m=7&(r=e.readVarint()),g=r>>3),g--,1===m||2===m)v+=e.readSVarint(),w+=e.readSVarint(),1===m&&(n&&k.push(n),n=[]),n.push(new pointGeometry(v,w));else{if(7!==m)throw new Error("unknown command "+m);n&&n.push(n[0].clone())}return n&&k.push(n),k},VectorTileFeature.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var n,r=e.readVarint()+e.pos,d=1,m=0,g=0,v=0,w=1/0,k=-1/0,j=1/0,G=-1/0;e.pos<r;)if(m||(d=7&(n=e.readVarint()),m=n>>3),m--,1===d||2===d)(g+=e.readSVarint())<w&&(w=g),k<g&&(k=g),(v+=e.readSVarint())<j&&(j=v),G<v&&(G=v);else if(7!==d)throw new Error("unknown command "+d);return[w,j,k,G]},VectorTileFeature.prototype.toGeoJSON=function(e,n,r){var d,m=this.extent*Math.pow(2,r),g=this.extent*e,v=this.extent*n,w=this.loadGeometry(),k=VectorTileFeature.types[this.type];function j(_r){for(var _s=0;_s<_r.length;_s++){var ga=_r[_s];_r[_s]=[360*(ga.x+g)/m-180,360/Math.PI*Math.atan(Math.exp((180-360*(ga.y+v)/m)*Math.PI/180))-90]}}switch(this.type){case 1:for(var G=[],q=0;q<w.length;q++)G[q]=w[q][0];j(w=G);break;case 2:for(q=0;q<w.length;q++)j(w[q]);break;case 3:for(w=classifyRings(w),q=0;q<w.length;q++)for(d=0;d<w[q].length;d++)j(w[q][d])}1===w.length?w=w[0]:k="Multi"+k;var _t={type:"Feature",geometry:{type:k,coordinates:w},properties:this.properties};return"id"in this&&(_t.id=this.id),_t};var VectorTileFeature$1=vectortilefeature,long_1=Long,wasm=null;try{wasm=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function Long(e,n,r){this.low=0|e,this.high=0|n,this.unsigned=!!r}function isLong(e){return!0===(e&&e.__isLong__)}Object.defineProperty(Long.prototype,"__isLong__",{value:!0}),Long.isLong=isLong;var INT_CACHE={},UINT_CACHE={};function fromInt(e,n){var r,d,m;return n?(m=0<=(e>>>=0)&&e<256)&&(d=UINT_CACHE[e])?d:(r=fromBits(e,(0|e)<0?-1:0,!0),m&&(UINT_CACHE[e]=r),r):(m=-128<=(e|=0)&&e<128)&&(d=INT_CACHE[e])?d:(r=fromBits(e,e<0?-1:0,!1),m&&(INT_CACHE[e]=r),r)}function fromNumber(e,n){if(isNaN(e))return n?UZERO:ZERO;if(n){if(e<0)return UZERO;if(TWO_PWR_64_DBL<=e)return MAX_UNSIGNED_VALUE}else{if(e<=-TWO_PWR_63_DBL)return MIN_VALUE;if(TWO_PWR_63_DBL<=e+1)return MAX_VALUE}return e<0?fromNumber(-e,n).neg():fromBits(e%TWO_PWR_32_DBL|0,e/TWO_PWR_32_DBL|0,n)}function fromBits(e,n,r){return new Long(e,n,r)}Long.fromInt=fromInt,Long.fromNumber=fromNumber,Long.fromBits=fromBits;var pow_dbl=Math.pow;function fromString(e,n,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return ZERO;if(n="number"==typeof n?(r=n,!1):!!n,(r=r||10)<2||36<r)throw RangeError("radix");var d;if(0<(d=e.indexOf("-")))throw Error("interior hyphen");if(0===d)return fromString(e.substring(1),n,r).neg();for(var m=fromNumber(pow_dbl(r,8)),g=ZERO,v=0;v<e.length;v+=8){var w,k=Math.min(8,e.length-v),j=parseInt(e.substring(v,v+k),r);g=k<8?(w=fromNumber(pow_dbl(r,k)),g.mul(w).add(fromNumber(j))):(g=g.mul(m)).add(fromNumber(j))}return g.unsigned=n,g}function fromValue(e,n){return"number"==typeof e?fromNumber(e,n):"string"==typeof e?fromString(e,n):fromBits(e.low,e.high,"boolean"==typeof n?n:e.unsigned)}Long.fromString=fromString,Long.fromValue=fromValue;var TWO_PWR_16_DBL=65536,TWO_PWR_24_DBL=1<<24,TWO_PWR_32_DBL=TWO_PWR_16_DBL*TWO_PWR_16_DBL,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=fromInt(TWO_PWR_24_DBL),ZERO=fromInt(0);Long.ZERO=ZERO;var UZERO=fromInt(0,!0);Long.UZERO=UZERO;var ONE=fromInt(1);Long.ONE=ONE;var UONE=fromInt(1,!0);Long.UONE=UONE;var NEG_ONE=fromInt(-1);Long.NEG_ONE=NEG_ONE;var MAX_VALUE=fromBits(-1,2147483647,!1);Long.MAX_VALUE=MAX_VALUE;var MAX_UNSIGNED_VALUE=fromBits(-1,-1,!0);Long.MAX_UNSIGNED_VALUE=MAX_UNSIGNED_VALUE;var MIN_VALUE=fromBits(0,-2147483648,!1);Long.MIN_VALUE=MIN_VALUE;var LongPrototype=Long.prototype;LongPrototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},LongPrototype.toNumber=function(){return this.unsigned?(this.high>>>0)*TWO_PWR_32_DBL+(this.low>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)},LongPrototype.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(MIN_VALUE)){var n=fromNumber(e),r=this.div(n),d=r.mul(n).sub(this);return r.toString(e)+d.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var m=fromNumber(pow_dbl(e,6),this.unsigned),g=this,v="";;){var w=g.div(m),k=(g.sub(w.mul(m)).toInt()>>>0).toString(e);if((g=w).isZero())return k+v;for(;k.length<6;)k="0"+k;v=""+k+v}},LongPrototype.getHighBits=function(){return this.high},LongPrototype.getHighBitsUnsigned=function(){return this.high>>>0},LongPrototype.getLowBits=function(){return this.low},LongPrototype.getLowBitsUnsigned=function(){return this.low>>>0},LongPrototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(MIN_VALUE)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,n=31;0<n&&!(e&1<<n);n--);return 0!=this.high?n+33:n+1},LongPrototype.isZero=function(){return 0===this.high&&0===this.low},LongPrototype.eqz=LongPrototype.isZero,LongPrototype.isNegative=function(){return!this.unsigned&&this.high<0},LongPrototype.isPositive=function(){return this.unsigned||0<=this.high},LongPrototype.isOdd=function(){return 1==(1&this.low)},LongPrototype.isEven=function(){return 0==(1&this.low)},LongPrototype.equals=function(e){return isLong(e)||(e=fromValue(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},LongPrototype.eq=LongPrototype.equals,LongPrototype.notEquals=function(e){return!this.eq(e)},LongPrototype.neq=LongPrototype.notEquals,LongPrototype.ne=LongPrototype.notEquals,LongPrototype.lessThan=function(e){return this.comp(e)<0},LongPrototype.lt=LongPrototype.lessThan,LongPrototype.lessThanOrEqual=function(e){return this.comp(e)<=0},LongPrototype.lte=LongPrototype.lessThanOrEqual,LongPrototype.le=LongPrototype.lessThanOrEqual,LongPrototype.greaterThan=function(e){return 0<this.comp(e)},LongPrototype.gt=LongPrototype.greaterThan,LongPrototype.greaterThanOrEqual=function(e){return 0<=this.comp(e)},LongPrototype.gte=LongPrototype.greaterThanOrEqual,LongPrototype.ge=LongPrototype.greaterThanOrEqual,LongPrototype.compare=function(e){if(isLong(e)||(e=fromValue(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},LongPrototype.comp=LongPrototype.compare,LongPrototype.negate=function(){return!this.unsigned&&this.eq(MIN_VALUE)?MIN_VALUE:this.not().add(ONE)},LongPrototype.neg=LongPrototype.negate,LongPrototype.add=function(e){isLong(e)||(e=fromValue(e));var k=0,j=0,G=0,q=0;return G+=(q+=(65535&this.low)+(65535&e.low))>>>16,j+=(G+=(this.low>>>16)+(e.low>>>16))>>>16,k+=(j+=(65535&this.high)+(65535&e.high))>>>16,k+=(this.high>>>16)+(e.high>>>16),fromBits((G&=65535)<<16|(q&=65535),(k&=65535)<<16|(j&=65535),this.unsigned)},LongPrototype.subtract=function(e){return isLong(e)||(e=fromValue(e)),this.add(e.neg())},LongPrototype.sub=LongPrototype.subtract,LongPrototype.multiply=function(e){if(this.isZero())return ZERO;if(isLong(e)||(e=fromValue(e)),wasm)return fromBits(wasm.mul(this.low,this.high,e.low,e.high),wasm.get_high(),this.unsigned);if(e.isZero())return ZERO;if(this.eq(MIN_VALUE))return e.isOdd()?MIN_VALUE:ZERO;if(e.eq(MIN_VALUE))return this.isOdd()?MIN_VALUE:ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(TWO_PWR_24)&&e.lt(TWO_PWR_24))return fromNumber(this.toNumber()*e.toNumber(),this.unsigned);var r=65535&this.high,d=this.low>>>16,m=65535&this.low,v=65535&e.high,w=e.low>>>16,k=65535&e.low,j=0,G=0,q=0,_t=0;return q+=(_t+=m*k)>>>16,G+=(q+=d*k)>>>16,q&=65535,G+=(q+=m*w)>>>16,j+=(G+=r*k)>>>16,G&=65535,j+=(G+=d*w)>>>16,G&=65535,j+=(G+=m*v)>>>16,j+=(this.high>>>16)*k+r*w+d*v+m*(e.high>>>16),fromBits((q&=65535)<<16|(_t&=65535),(j&=65535)<<16|(G&=65535),this.unsigned)},LongPrototype.mul=LongPrototype.multiply,LongPrototype.divide=function(e){if(isLong(e)||(e=fromValue(e)),e.isZero())throw Error("division by zero");var n,r,d;if(wasm)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?fromBits((this.unsigned?wasm.div_u:wasm.div_s)(this.low,this.high,e.low,e.high),wasm.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?UZERO:ZERO;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return UZERO;if(e.gt(this.shru(1)))return UONE;r=UZERO}else{if(this.eq(MIN_VALUE))return e.eq(ONE)||e.eq(NEG_ONE)?MIN_VALUE:e.eq(MIN_VALUE)?ONE:(d=this.shr(1).div(e).shl(1)).eq(ZERO)?e.isNegative()?ONE:NEG_ONE:(n=this.sub(e.mul(d)),r=d.add(n.div(e)));if(e.eq(MIN_VALUE))return this.unsigned?UZERO:ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();r=ZERO}for(n=this;n.gte(e);){d=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var m=Math.ceil(Math.log(d)/Math.LN2),g=m<=48?1:pow_dbl(2,m-48),v=fromNumber(d),w=v.mul(e);w.isNegative()||w.gt(n);)w=(v=fromNumber(d-=g,this.unsigned)).mul(e);v.isZero()&&(v=ONE),r=r.add(v),n=n.sub(w)}return r},LongPrototype.div=LongPrototype.divide,LongPrototype.modulo=function(e){return isLong(e)||(e=fromValue(e)),wasm?fromBits((this.unsigned?wasm.rem_u:wasm.rem_s)(this.low,this.high,e.low,e.high),wasm.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},LongPrototype.mod=LongPrototype.modulo,LongPrototype.rem=LongPrototype.modulo,LongPrototype.not=function(){return fromBits(~this.low,~this.high,this.unsigned)},LongPrototype.and=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low&e.low,this.high&e.high,this.unsigned)},LongPrototype.or=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low|e.low,this.high|e.high,this.unsigned)},LongPrototype.xor=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low^e.low,this.high^e.high,this.unsigned)},LongPrototype.shiftLeft=function(e){return isLong(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):fromBits(0,this.low<<e-32,this.unsigned)},LongPrototype.shl=LongPrototype.shiftLeft,LongPrototype.shiftRight=function(e){return isLong(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):fromBits(this.high>>e-32,0<=this.high?0:-1,this.unsigned)},LongPrototype.shr=LongPrototype.shiftRight,LongPrototype.shiftRightUnsigned=function(e){if(isLong(e)&&(e=e.toInt()),0==(e&=63))return this;var n=this.high;return e<32?fromBits(this.low>>>e|n<<32-e,n>>>e,this.unsigned):fromBits(32===e?n:n>>>e-32,0,this.unsigned)},LongPrototype.shru=LongPrototype.shiftRightUnsigned,LongPrototype.shr_u=LongPrototype.shiftRightUnsigned,LongPrototype.toSigned=function(){return this.unsigned?fromBits(this.low,this.high,!1):this},LongPrototype.toUnsigned=function(){return this.unsigned?this:fromBits(this.low,this.high,!0)},LongPrototype.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},LongPrototype.toBytesLE=function(){var e=this.high,n=this.low;return[255&n,n>>>8&255,n>>>16&255,n>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},LongPrototype.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,n>>>24,n>>>16&255,n>>>8&255,255&n]},Long.fromBytes=function(e,n,r){return r?Long.fromBytesLE(e,n):Long.fromBytesBE(e,n)},Long.fromBytesLE=function(e,n){return new Long(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)},Long.fromBytesBE=function(e,n){return new Long(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};var aspromise=asPromise;function asPromise(e,n){for(var r=new Array(arguments.length-1),d=0,m=2,g=!0;m<arguments.length;)r[d++]=arguments[m++];return new Promise(function(v,w){r[d]=function(k){if(g)if(g=!1,k)w(k);else{for(var j=new Array(arguments.length-1),G=0;G<j.length;)j[G++]=arguments[G];v.apply(null,j)}};try{e.apply(n||null,r)}catch(k){g&&(g=!1,w(k))}})}var base64_1=createCommonjsModule(function(e,n){var r=n;r.length=function(w){var k=w.length;if(!k)return 0;for(var j=0;1<--k%4&&"="===w.charAt(k);)++j;return Math.ceil(3*w.length)/4-j};for(var d=new Array(64),m=new Array(123),g=0;g<64;)m[d[g]=g<26?g+65:g<52?g+71:g<62?g-4:g-59|43]=g++;r.encode=function(w,k,j){for(var G,q=null,_t=[],_r=0,_s=0;k<j;){var ga=w[k++];switch(_s){case 0:_t[_r++]=d[ga>>2],G=(3&ga)<<4,_s=1;break;case 1:_t[_r++]=d[G|ga>>4],G=(15&ga)<<2,_s=2;break;case 2:_t[_r++]=d[G|ga>>6],_t[_r++]=d[63&ga],_s=0}8191<_r&&((q=q||[]).push(String.fromCharCode.apply(String,_t)),_r=0)}return _s&&(_t[_r++]=d[G],_t[_r++]=61,1===_s&&(_t[_r++]=61)),q?(_r&&q.push(String.fromCharCode.apply(String,_t.slice(0,_r))),q.join("")):String.fromCharCode.apply(String,_t.slice(0,_r))};var v="invalid encoding";r.decode=function(w,k,j){for(var G,q=j,_t=0,_r=0;_r<w.length;){var _s=w.charCodeAt(_r++);if(61===_s&&1<_t)break;if(void 0===(_s=m[_s]))throw Error(v);switch(_t){case 0:G=_s,_t=1;break;case 1:k[j++]=G<<2|(48&_s)>>4,G=_s,_t=2;break;case 2:k[j++]=(15&G)<<4|(60&_s)>>2,G=_s,_t=3;break;case 3:k[j++]=(3&G)<<6|_s,_t=0}}if(1===_t)throw Error(v);return j-q},r.test=function(w){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(w)}}),eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(e,n,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:n,ctx:r||this}),this},EventEmitter.prototype.off=function(e,n){if(void 0===e)this._listeners={};else if(void 0===n)this._listeners[e]=[];else for(var r=this._listeners[e],d=0;d<r.length;)r[d].fn===n?r.splice(d,1):++d;return this},EventEmitter.prototype.emit=function(e){var n=this._listeners[e];if(n){for(var r=[],d=1;d<arguments.length;)r.push(arguments[d++]);for(d=0;d<n.length;)n[d].fn.apply(n[d++].ctx,r)}return this};var float_1=factory(factory);function factory(e){function n(_h,ad,ey,sy){var ly,dy=ad<0?1:0;dy&&(ad=-ad),0===ad?_h(0<1/ad?0:2147483648,ey,sy):isNaN(ad)?_h(2143289344,ey,sy):_h(34028234663852886e22<ad?(dy<<31|2139095040)>>>0:ad<11754943508222875e-54?(dy<<31|Math.round(ad/1401298464324817e-60))>>>0:(dy<<31|(ly=Math.floor(Math.log(ad)/Math.LN2))+127<<23|8388607&Math.round(ad*Math.pow(2,-ly)*8388608))>>>0,ey,sy)}function r(_h,ad,ey){var sy=_h(ad,ey),ly=2*(sy>>31)+1,dy=sy>>>23&255,vy=8388607&sy;return 255==dy?vy?NaN:1/0*ly:0==dy?1401298464324817e-60*ly*vy:ly*Math.pow(2,dy-150)*(8388608+vy)}function d(_h,ad,ey){w[0]=_h,ad[ey]=k[0],ad[ey+1]=k[1],ad[ey+2]=k[2],ad[ey+3]=k[3]}function m(_h,ad,ey){w[0]=_h,ad[ey]=k[3],ad[ey+1]=k[2],ad[ey+2]=k[1],ad[ey+3]=k[0]}function g(_h,ad){return k[0]=_h[ad],k[1]=_h[ad+1],k[2]=_h[ad+2],k[3]=_h[ad+3],w[0]}function v(_h,ad){return k[3]=_h[ad],k[2]=_h[ad+1],k[1]=_h[ad+2],k[0]=_h[ad+3],w[0]}var w,k,j,G,q,_t;function _r(_h,ad,ey,sy,ly,dy){var vy,Ay,Sy=sy<0?1:0;Sy&&(sy=-sy),0===sy?(_h(0,ly,dy+ad),_h(0<1/sy?0:2147483648,ly,dy+ey)):isNaN(sy)?(_h(0,ly,dy+ad),_h(2146959360,ly,dy+ey)):17976931348623157e292<sy?(_h(0,ly,dy+ad),_h((Sy<<31|2146435072)>>>0,ly,dy+ey)):sy<22250738585072014e-324?(_h((vy=sy/5e-324)>>>0,ly,dy+ad),_h((Sy<<31|vy/4294967296)>>>0,ly,dy+ey)):(1024===(Ay=Math.floor(Math.log(sy)/Math.LN2))&&(Ay=1023),_h(4503599627370496*(vy=sy*Math.pow(2,-Ay))>>>0,ly,dy+ad),_h((Sy<<31|Ay+1023<<20|1048576*vy&1048575)>>>0,ly,dy+ey))}function _s(_h,ad,ey,sy,ly){var dy=_h(sy,ly+ad),vy=_h(sy,ly+ey),Ay=2*(vy>>31)+1,Sy=vy>>>20&2047,jy=4294967296*(1048575&vy)+dy;return 2047==Sy?jy?NaN:1/0*Ay:0==Sy?5e-324*Ay*jy:Ay*Math.pow(2,Sy-1075)*(jy+4503599627370496)}function ga(_h,ad,ey){G[0]=_h,ad[ey]=q[0],ad[ey+1]=q[1],ad[ey+2]=q[2],ad[ey+3]=q[3],ad[ey+4]=q[4],ad[ey+5]=q[5],ad[ey+6]=q[6],ad[ey+7]=q[7]}function _c(_h,ad,ey){G[0]=_h,ad[ey]=q[7],ad[ey+1]=q[6],ad[ey+2]=q[5],ad[ey+3]=q[4],ad[ey+4]=q[3],ad[ey+5]=q[2],ad[ey+6]=q[1],ad[ey+7]=q[0]}function _u(_h,ad){return q[0]=_h[ad],q[1]=_h[ad+1],q[2]=_h[ad+2],q[3]=_h[ad+3],q[4]=_h[ad+4],q[5]=_h[ad+5],q[6]=_h[ad+6],q[7]=_h[ad+7],G[0]}function _f(_h,ad){return q[7]=_h[ad],q[6]=_h[ad+1],q[5]=_h[ad+2],q[4]=_h[ad+3],q[3]=_h[ad+4],q[2]=_h[ad+5],q[1]=_h[ad+6],q[0]=_h[ad+7],G[0]}return typeof Float32Array<"u"?(w=new Float32Array([-0]),k=new Uint8Array(w.buffer),e.writeFloatLE=(j=128===k[3])?d:m,e.writeFloatBE=j?m:d,e.readFloatLE=j?g:v,e.readFloatBE=j?v:g):(e.writeFloatLE=n.bind(null,writeUintLE),e.writeFloatBE=n.bind(null,writeUintBE),e.readFloatLE=r.bind(null,readUintLE),e.readFloatBE=r.bind(null,readUintBE)),typeof Float64Array<"u"?(G=new Float64Array([-0]),q=new Uint8Array(G.buffer),e.writeDoubleLE=(_t=128===q[7])?ga:_c,e.writeDoubleBE=_t?_c:ga,e.readDoubleLE=_t?_u:_f,e.readDoubleBE=_t?_f:_u):(e.writeDoubleLE=_r.bind(null,writeUintLE,0,4),e.writeDoubleBE=_r.bind(null,writeUintBE,4,0),e.readDoubleLE=_s.bind(null,readUintLE,0,4),e.readDoubleBE=_s.bind(null,readUintBE,4,0)),e}function writeUintLE(e,n,r){n[r]=255&e,n[r+1]=e>>>8&255,n[r+2]=e>>>16&255,n[r+3]=e>>>24}function writeUintBE(e,n,r){n[r]=e>>>24,n[r+1]=e>>>16&255,n[r+2]=e>>>8&255,n[r+3]=255&e}function readUintLE(e,n){return(e[n]|e[n+1]<<8|e[n+2]<<16|e[n+3]<<24)>>>0}function readUintBE(e,n){return(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}var utf8_1=createCommonjsModule(function(e,n){var r=n;r.length=function(d){for(var m=0,g=0,v=0;v<d.length;++v)(g=d.charCodeAt(v))<128?m+=1:g<2048?m+=2:55296==(64512&g)&&56320==(64512&d.charCodeAt(v+1))?(++v,m+=4):m+=3;return m},r.read=function(d,m,g){if(g-m<1)return"";for(var v,w=null,k=[],j=0;m<g;)(v=d[m++])<128?k[j++]=v:191<v&&v<224?k[j++]=(31&v)<<6|63&d[m++]:239<v&&v<365?(v=((7&v)<<18|(63&d[m++])<<12|(63&d[m++])<<6|63&d[m++])-65536,k[j++]=55296+(v>>10),k[j++]=56320+(1023&v)):k[j++]=(15&v)<<12|(63&d[m++])<<6|63&d[m++],8191<j&&((w=w||[]).push(String.fromCharCode.apply(String,k)),j=0);return w?(j&&w.push(String.fromCharCode.apply(String,k.slice(0,j))),w.join("")):String.fromCharCode.apply(String,k.slice(0,j))},r.write=function(d,m,g){for(var v,w,k=g,j=0;j<d.length;++j)(v=d.charCodeAt(j))<128?m[g++]=v:(v<2048?m[g++]=v>>6|192:(55296==(64512&v)&&56320==(64512&(w=d.charCodeAt(j+1)))?(++j,m[g++]=(v=65536+((1023&v)<<10)+(1023&w))>>18|240,m[g++]=v>>12&63|128):m[g++]=v>>12|224,m[g++]=v>>6&63|128),m[g++]=63&v|128);return g-k}}),pool_1=pool;function pool(e,n,r){var d=r||8192,m=d>>>1,g=null,v=d;return function(w){if(w<1||m<w)return e(w);d<v+w&&(g=e(d),v=0);var k=n.call(g,v,v+=w);return 7&v&&(v=1+(7|v)),k}}var longbits=LongBits;function LongBits(e,n){this.lo=e>>>0,this.hi=n>>>0}var zero=LongBits.zero=new LongBits(0,0);zero.toNumber=function(){return 0},zero.zzEncode=zero.zzDecode=function(){return this},zero.length=function(){return 1};var zeroHash=LongBits.zeroHash="\0\0\0\0\0\0\0\0";LongBits.fromNumber=function(e){if(0===e)return zero;var n=e<0;n&&(e=-e);var r=e>>>0,d=(e-r)/4294967296>>>0;return n&&(d=~d>>>0,r=~r>>>0,4294967295<++r&&(r=0,4294967295<++d&&(d=0))),new LongBits(r,d)},LongBits.from=function(e){if("number"==typeof e)return LongBits.fromNumber(e);if(minimal.isString(e)){if(!minimal.Long)return LongBits.fromNumber(parseInt(e,10));e=minimal.Long.fromString(e)}return e.low||e.high?new LongBits(e.low>>>0,e.high>>>0):zero},LongBits.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var n=1+~this.lo>>>0,r=~this.hi>>>0;return n||(r=r+1>>>0),-(n+4294967296*r)}return this.lo+4294967296*this.hi},LongBits.prototype.toLong=function(e){return minimal.Long?new minimal.Long(0|this.lo,0|this.hi,!!e):{low:0|this.lo,high:0|this.hi,unsigned:!!e}};var charCodeAt=String.prototype.charCodeAt;LongBits.fromHash=function(e){return e===zeroHash?zero:new LongBits((charCodeAt.call(e,0)|charCodeAt.call(e,1)<<8|charCodeAt.call(e,2)<<16|charCodeAt.call(e,3)<<24)>>>0,(charCodeAt.call(e,4)|charCodeAt.call(e,5)<<8|charCodeAt.call(e,6)<<16|charCodeAt.call(e,7)<<24)>>>0)},LongBits.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},LongBits.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},LongBits.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},LongBits.prototype.length=function(){var e=this.lo,n=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0==r?0==n?e<16384?e<128?1:2:e<2097152?3:4:n<16384?n<128?5:6:n<2097152?7:8:r<128?9:10};var minimal=createCommonjsModule(function(e,n){var r=n;function d(g,v,w){for(var k=Object.keys(v),j=0;j<k.length;++j)void 0!==g[k[j]]&&w||(g[k[j]]=v[k[j]]);return g}function m(g){function v(w,k){if(!(this instanceof v))return new v(w,k);Object.defineProperty(this,"message",{get:function(){return w}}),Error.captureStackTrace?Error.captureStackTrace(this,v):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),k&&d(this,k)}return(v.prototype=Object.create(Error.prototype)).constructor=v,Object.defineProperty(v.prototype,"name",{get:function(){return g}}),v.prototype.toString=function(){return this.name+": "+this.message},v}r.asPromise=aspromise,r.base64=base64_1,r.EventEmitter=eventemitter,r.float=float_1,r.inquire=inquire_1,r.utf8=utf8_1,r.pool=pool_1,r.LongBits=longbits,r.isNode=!!(void 0!==commonjsGlobal&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),r.global=r.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(g){return"number"==typeof g&&isFinite(g)&&Math.floor(g)===g},r.isString=function(g){return"string"==typeof g||g instanceof String},r.isObject=function(g){return g&&"object"==typeof g},r.isset=r.isSet=function(g,v){var w=g[v];return!(null==w||!g.hasOwnProperty(v))&&("object"!=typeof w||0<(Array.isArray(w)?w.length:Object.keys(w).length))},r.Buffer=function(){try{var g=r.inquire("buffer").Buffer;return g.prototype.utf8Write?g:null}catch{return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(g){return"number"==typeof g?r.Buffer?r._Buffer_allocUnsafe(g):new r.Array(g):r.Buffer?r._Buffer_from(g):typeof Uint8Array>"u"?g:new Uint8Array(g)},r.Array=typeof Uint8Array<"u"?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(g){return g?r.LongBits.from(g).toHash():r.LongBits.zeroHash},r.longFromHash=function(g,v){var w=r.LongBits.fromHash(g);return r.Long?r.Long.fromBits(w.lo,w.hi,v):w.toNumber(!!v)},r.merge=d,r.lcFirst=function(g){return g.charAt(0).toLowerCase()+g.substring(1)},r.newError=m,r.ProtocolError=m("ProtocolError"),r.oneOfGetter=function(g){for(var v={},w=0;w<g.length;++w)v[g[w]]=1;return function(){for(var k=Object.keys(this),j=k.length-1;-1<j;--j)if(1===v[k[j]]&&null!=this[k[j]])return k[j]}},r.oneOfSetter=function(g){return function(v){for(var w=0;w<g.length;++w)g[w]!==v&&delete this[g[w]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var g=r.Buffer;g?(r._Buffer_from=g.from!==Uint8Array.from&&g.from||function(v,w){return new g(v,w)},r._Buffer_allocUnsafe=g.allocUnsafe||function(v){return new g(v)}):r._Buffer_from=r._Buffer_allocUnsafe=null}}),writer=Writer,BufferWriter,LongBits$1=minimal.LongBits,base64=minimal.base64,utf8=minimal.utf8;function Op(e,n,r){this.fn=e,this.len=n,this.next=void 0,this.val=r}function noop(){}function State(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function Writer(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create=function(){return minimal.Buffer?function(){return(Writer.create=function(){return new BufferWriter})()}:function(){return new Writer}};function writeByte(e,n,r){n[r]=255&e}function writeVarint32(e,n,r){for(;127<e;)n[r++]=127&e|128,e>>>=7;n[r]=e}function VarintOp(e,n){this.len=e,this.next=void 0,this.val=n}function writeVarint64(e,n,r){for(;e.hi;)n[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;127<e.lo;)n[r++]=127&e.lo|128,e.lo=e.lo>>>7;n[r++]=e.lo}function writeFixed32(e,n,r){n[r]=255&e,n[r+1]=e>>>8&255,n[r+2]=e>>>16&255,n[r+3]=e>>>24}Writer.create=create(),Writer.alloc=function(e){return new minimal.Array(e)},minimal.Array!==Array&&(Writer.alloc=minimal.pool(Writer.alloc,minimal.Array.prototype.subarray)),Writer.prototype._push=function(e,n,r){return this.tail=this.tail.next=new Op(e,n,r),this.len+=n,this},VarintOp.prototype=Object.create(Op.prototype),VarintOp.prototype.fn=writeVarint32,Writer.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},Writer.prototype.int32=function(e){return e<0?this._push(writeVarint64,10,LongBits$1.fromNumber(e)):this.uint32(e)},Writer.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},Writer.prototype.uint64=function(e){var n=LongBits$1.from(e);return this._push(writeVarint64,n.length(),n)},Writer.prototype.int64=Writer.prototype.uint64,Writer.prototype.sint64=function(e){var n=LongBits$1.from(e).zzEncode();return this._push(writeVarint64,n.length(),n)},Writer.prototype.bool=function(e){return this._push(writeByte,1,e?1:0)},Writer.prototype.fixed32=function(e){return this._push(writeFixed32,4,e>>>0)},Writer.prototype.sfixed32=Writer.prototype.fixed32,Writer.prototype.fixed64=function(e){var n=LongBits$1.from(e);return this._push(writeFixed32,4,n.lo)._push(writeFixed32,4,n.hi)},Writer.prototype.sfixed64=Writer.prototype.fixed64,Writer.prototype.float=function(e){return this._push(minimal.float.writeFloatLE,4,e)},Writer.prototype.double=function(e){return this._push(minimal.float.writeDoubleLE,8,e)};var writeBytes=minimal.Array.prototype.set?function(e,n,r){n.set(e,r)}:function(e,n,r){for(var d=0;d<e.length;++d)n[r+d]=e[d]};Writer.prototype.bytes=function(e){var n,r=e.length>>>0;return r?(minimal.isString(e)&&(n=Writer.alloc(r=base64.length(e)),base64.decode(e,n,0),e=n),this.uint32(r)._push(writeBytes,r,e)):this._push(writeByte,1,0)},Writer.prototype.string=function(e){var n=utf8.length(e);return n?this.uint32(n)._push(utf8.write,n,e):this._push(writeByte,1,0)},Writer.prototype.fork=function(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this},Writer.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this},Writer.prototype.ldelim=function(){var e=this.head,n=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=n,this.len+=r),this},Writer.prototype.finish=function(){for(var e=this.head.next,n=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,n,r),r+=e.len,e=e.next;return n},Writer._configure=function(e){BufferWriter=e,Writer.create=create(),BufferWriter._configure()};var writer_buffer=BufferWriter$1;function BufferWriter$1(){writer.call(this)}function writeStringBuffer(e,n,r){e.length<40?minimal.utf8.write(e,n,r):n.utf8Write?n.utf8Write(e,r):n.write(e,r)}(BufferWriter$1.prototype=Object.create(writer.prototype)).constructor=BufferWriter$1,BufferWriter$1._configure=function(){BufferWriter$1.alloc=minimal._Buffer_allocUnsafe,BufferWriter$1.writeBytesBuffer=minimal.Buffer&&minimal.Buffer.prototype instanceof Uint8Array&&"set"===minimal.Buffer.prototype.set.name?function(e,n,r){n.set(e,r)}:function(e,n,r){if(e.copy)e.copy(n,r,0,e.length);else for(var d=0;d<e.length;)n[r++]=e[d++]}},BufferWriter$1.prototype.bytes=function(e){minimal.isString(e)&&(e=minimal._Buffer_from(e,"base64"));var n=e.length>>>0;return this.uint32(n),n&&this._push(BufferWriter$1.writeBytesBuffer,n,e),this},BufferWriter$1.prototype.string=function(e){var n=minimal.Buffer.byteLength(e);return this.uint32(n),n&&this._push(writeStringBuffer,n,e),this},BufferWriter$1._configure();var reader=Reader,BufferReader,LongBits$2=minimal.LongBits,utf8$1=minimal.utf8;function indexOutOfRange(e,n){return RangeError("index out of range: "+e.pos+" + "+(n||1)+" > "+e.len)}function Reader(e){this.buf=e,this.pos=0,this.len=e.length}var create_array=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Reader(e);throw Error("illegal buffer")},create$1=function(){return minimal.Buffer?function(e){return(Reader.create=function(n){return minimal.Buffer.isBuffer(n)?new BufferReader(n):create_array(n)})(e)}:create_array},fU;function readLongVarint(){var e=new LongBits$2(0,0),n=0;if(!(4<this.len-this.pos)){for(;n<3;++n){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*n)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*n)>>>0,e}for(;n<4;++n)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*n)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(n=0,4<this.len-this.pos){for(;n<5;++n)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*n+3)>>>0,this.buf[this.pos++]<128)return e}else for(;n<5;++n){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*n+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function readFixed32_end(e,n){return(e[n-4]|e[n-3]<<8|e[n-2]<<16|e[n-1]<<24)>>>0}function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits$2(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader.create=create$1(),Reader.prototype._slice=minimal.Array.prototype.subarray||minimal.Array.prototype.slice,Reader.prototype.uint32=(fU=4294967295,function(){if(fU=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(fU=(fU|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(fU=(fU|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(fU=(fU|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(fU=(fU|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return fU;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return fU}),Reader.prototype.int32=function(){return 0|this.uint32()},Reader.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},Reader.prototype.bool=function(){return 0!==this.uint32()},Reader.prototype.fixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.sfixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return 0|readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.float=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=minimal.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},Reader.prototype.double=function(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=minimal.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},Reader.prototype.bytes=function(){var e=this.uint32(),n=this.pos,r=this.pos+e;if(r>this.len)throw indexOutOfRange(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(n,r):n===r?new this.buf.constructor(0):this._slice.call(this.buf,n,r)},Reader.prototype.string=function(){var e=this.bytes();return utf8$1.read(e,0,e.length)},Reader.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw indexOutOfRange(this)}while(128&this.buf[this.pos++]);return this},Reader.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},Reader._configure=function(e){BufferReader=e,Reader.create=create$1(),BufferReader._configure();var n=minimal.Long?"toLong":"toNumber";minimal.merge(Reader.prototype,{int64:function(){return readLongVarint.call(this)[n](!1)},uint64:function(){return readLongVarint.call(this)[n](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[n](!1)},fixed64:function(){return readFixed64.call(this)[n](!0)},sfixed64:function(){return readFixed64.call(this)[n](!1)}})};var reader_buffer=BufferReader$1;function BufferReader$1(e){reader.call(this,e)}(BufferReader$1.prototype=Object.create(reader.prototype)).constructor=BufferReader$1,BufferReader$1._configure=function(){minimal.Buffer&&(BufferReader$1.prototype._slice=minimal.Buffer.prototype.slice)},BufferReader$1.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},BufferReader$1._configure();var service=Service;function Service(e,n,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");minimal.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=!!n,this.responseDelimited=!!r}(Service.prototype=Object.create(minimal.EventEmitter.prototype)).constructor=Service,Service.prototype.rpcCall=function e(n,r,d,m,g){if(!m)throw TypeError("request must be specified");var v=this;if(!g)return minimal.asPromise(e,v,n,r,d,m);if(v.rpcImpl)try{return v.rpcImpl(n,r[v.requestDelimited?"encodeDelimited":"encode"](m).finish(),function(w,k){if(w)return v.emit("error",w,n),g(w);if(null!==k){if(!(k instanceof d))try{k=d[v.responseDelimited?"decodeDelimited":"decode"](k)}catch(j){return v.emit("error",j,n),g(j)}return v.emit("data",k,n),g(null,k)}v.end(!0)})}catch(w){return v.emit("error",w,n),void setTimeout(function(){g(w)},0)}else setTimeout(function(){g(Error("already ended"))},0)},Service.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};var rpc_1=createCommonjsModule(function(e,n){n.Service=service}),roots={},indexMinimal=createCommonjsModule(function(e,n){var r=n;r.build="minimal",r.Writer=writer,r.BufferWriter=writer_buffer,r.Reader=reader,r.BufferReader=reader_buffer,r.util=minimal,r.rpc=rpc_1,r.roots=roots,(r.configure=function d(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)})()}),minimal$1=indexMinimal;minimal$1.util.Long=long_1,minimal$1.configure(),VectorTileFeature$1.prototype.loadGeometry=function(e){var n=this._pbf;n.pos=this._geometry;for(var r,d,m=n.readVarint()+n.pos,g=1,v=0,w=0,k=0,j=[];n.pos<m;)if(v<=0&&(g=7&(d=n.readVarint()),v=d>>3),v--,1===g||2===g)w+=n.readSVarint(),k+=n.readSVarint(),1===g&&(r&&j.push(r),r=[]),r.push([w*e,k*e]);else{if(7!==g)throw new Error("unknown command "+g);r&&r.push(r[0].slice())}return r&&j.push(r),j};var MAX_SAFE_INTEGER=long_1.fromNumber(Number.MAX_SAFE_INTEGER,!0),MIN_SAFE_INTEGER=long_1.fromNumber(Number.MIN_SAFE_INTEGER,!1);function readLong(e,n,r){n.pos=e.pos;var d=r.call(n);return e.pos=n.pos,long_1.isLong(d)?0<d.comp(MAX_SAFE_INTEGER)||d.comp(MIN_SAFE_INTEGER)<0?d.toString():d.toNumber():d}var VectorTileLayer=function(){function e(n,r){_classCallCheck(this,e),this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=n,this._keys=[],this._values=[],this._features=[],this._protobufjsReader=minimal$1.Reader.create(n.buf),n.readFields(readLayer,this,r),this.length=this._features.length}return _createClass(e,[{key:"feature",value:function(n){if(n<0||n>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[n];var r=this._pbf.readVarint()+this._pbf.pos;return new VectorTileFeature$1(this._pbf,r,this.extent,this._keys,this._values)}}]),e}();function readLayer(e,n,r){15===e?n.version=r.readVarint():1===e?n.name=r.readString():5===e?n.extent=r.readVarint():2===e?n._features.push(r.pos):3===e?n._keys.push(r.readString()):4===e&&n._values.push(readValueMessage(r,n._protobufjsReader))}function readValueMessage(e,n){for(var m=null,r=e.readVarint()+e.pos;e.pos<r;){var d=e.readVarint()>>3;m=1==d?e.readString():2==d?e.readFloat():3==d?e.readDouble():4==d?readLong(e,n,n.int64):5==d?readLong(e,n,n.uint64):6==d?readLong(e,n,n.sint64):7==d?e.readBoolean():null}return m}var VectorTile=function e(n,r){_classCallCheck(this,e),this.layers=n.readFields(readTile,{},r)};function readTile(e,n,r){var d;3!==e||(d=new VectorTileLayer(r,r.readVarint()+r.pos)).length&&(n[d.name]=d)}function getLayersFromMVT(e){var n={};for(var r in e.layers){for(var d=e.layers[r],m=[],g=Geo$1.tile_scale/d.extent,v=0,w=d.length;v<w;v++){var k=d.feature(v),j=VectorTileFeature$1.types[k.type],G=k.loadGeometry(g),q=null;switch(j){case"Point":q=decodePoint({coordinates:G});break;case"LineString":q=1===G.length?{type:j,coordinates:G[0]}:{type:"MultiLineString",coordinates:G};break;case"Polygon":q=decodeMultiPolygon({coordinates:G})}q&&q.coordinates&&m.push({type:"Feature",geometry:q,properties:k.properties})}n[r]={type:"FeatureCollection",features:m}}return n}var GeomType={UNKNOWN:0,POINT:1,LINESTRING:2,POLYGON:3};function parseGeoJSONVectorTile(e){var n=[],r=e&&e.features;if(r)for(var d=0,m=r.length;d<m;d++){var g=r[d],v=g.type,w=void 0;switch(v){case GeomType.POINT:w={type:"MultiPoint",coordinates:g.geometry.map(function(k){return k.slice()})};break;case GeomType.LINESTRING:case GeomType.POLYGON:if(w={type:"MultiLineString",coordinates:g.geometry.map(function(k){return k.map(function(j){return j.slice()})})},v===GeomType.POLYGON&&null==(w=decodeMultiPolygon(w)))continue;break;default:continue}n.push({id:g.id,type:"Feature",geometry:w,properties:g.tags})}return{type:"FeatureCollection",features:n}}function decodeMultiPolygon(e){for(var n,r=[],d=[],m=0,g=e.coordinates.length;m<g;m++){var v=e.coordinates[m],w=Geo$1.ringWinding(v);null!=w&&(w===(n=n||w)&&d.length&&(r.push(d),d=[]),d.push(v))}return 0<d.length&&r.push(d),1===r.length?(e.type="Polygon",e.coordinates=r[0]):1<r.length?(e.type="MultiPolygon",e.coordinates=r):e=null,e}function decodePoint(e){var n=e.coordinates.length;if(1<n){e.type="MultiPoint";for(var r=[],d=0;d<n;d++)r.push(e.coordinates[d][0]);e.coordinates=r}else e.type="Point",e.coordinates=e.coordinates[0][0];return e}var EMPTY_FEATURE_COLLECTION={type:"FeatureCollection",features:[]},MVTSource=function(){_inherits(n,MapsJsSource);var e=_createSuper(n);function n(r,d){return _classCallCheck(this,n),r.tiled=!0,e.call(this,r,d)}return _createClass(n,[{key:"fetchTile",value:function(r,d,m){return this.provider?this.provider.requestTileAsPromise(r,d,m).then(function(g){return g.data}):Promise.resolve()}},{key:"_load",value:function(r){var d=this,m=Geo$1.wrapTile(r.coords,{x:!0,y:!0});return WorkerBroker.postMessage(this.target_name+".fetchTile",m.x,m.y,m.z).then(function(k){var j;return k instanceof ArrayBuffer?(j=new pbf(new Uint8Array(k)),r.source_data.layers=getLayersFromMVT(new VectorTile(j))):k?r.source_data.error=k:r.source_data.layers={_default:EMPTY_FEATURE_COLLECTION},d._postProcessTile(r),r})}},{key:"onReady",value:function(){this.dispatchUpdate()}}]),n}();DataSource.register(MVTSource,"MVT"),DataSource.register(MVTSource,"OMV");var csscolorparser=createCommonjsModule(function(e,n){var r={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function d(k){return(k=Math.round(k))<0?0:255<k?255:k}function g(k){return d("%"===k[k.length-1]?parseFloat(k)/100*255:parseInt(k))}function v(k){return function m(k){return k<0?0:1<k?1:k}("%"===k[k.length-1]?parseFloat(k)/100:parseFloat(k))}function w(k,j,G){return G<0?G+=1:1<G&&--G,6*G<1?k+(j-k)*G*6:2*G<1?j:3*G<2?k+(j-k)*(2/3-G)*6:k}try{n.parseCSSColor=function(k){var j,G=k.replace(/ /g,"").toLowerCase();if(G in r)return r[G].slice();if("#"===G[0])return 4===G.length?0<=(j=parseInt(G.substr(1),16))&&j<=4095?[(3840&j)>>4|(3840&j)>>8,240&j|(240&j)>>4,15&j|(15&j)<<4,1]:null:7===G.length&&0<=(j=parseInt(G.substr(1),16))&&j<=16777215?[(16711680&j)>>16,(65280&j)>>8,255&j,1]:null;var q=G.indexOf("("),_t=G.indexOf(")");if(-1!==q&&_t+1===G.length){var _r=G.substr(0,q),_s=G.substr(q+1,_t-(q+1)).split(","),ga=1;switch(_r){case"rgba":if(4!==_s.length)return null;ga=v(_s.pop());case"rgb":return 3!==_s.length?null:[g(_s[0]),g(_s[1]),g(_s[2]),ga];case"hsla":if(4!==_s.length)return null;ga=v(_s.pop());case"hsl":if(3!==_s.length)return null;var _c=(parseFloat(_s[0])%360+360)%360/360,_u=v(_s[1]),_f=v(_s[2]),_h=_f<=.5?_f*(_u+1):_f+_u-_f*_u,ad=2*_f-_h;return[d(255*w(ad,_h,_c+1/3)),d(255*w(ad,_h,_c)),d(255*w(ad,_h,_c-1/3)),ga];default:return null}}return null}}catch{}}),csscolorparser_1=csscolorparser.parseCSSColor,StyleParser={},clampPositive=function(e){return Math.max(e,0)},noNaN=function(e){return isNaN(e)?0:e},parseNumber=function(e){return Array.isArray(e)?e.map(parseFloat).map(noNaN):noNaN(parseFloat(e))},parsePositiveNumber=function(e){return Array.isArray(e)?e.map(parseNumber).map(clampPositive):clampPositive(parseNumber(e))};Object.assign(StyleParser,{clampPositive,noNaN,parseNumber,parsePositiveNumber}),StyleParser.wrapFunction=function(e){return"\n        var feature = context.feature.properties;\n        var global = context.global;\n        var $zoom = context.zoom;\n        var $layer = context.layer;\n        var $source = context.source;\n        var sources = context.sources;\n        var $geometry = context.geometry;\n        var $meters_per_pixel = context.meters_per_pixel;\n\n        var val = (function(){ ".concat(e," }());\n\n        if (typeof val === 'number' && isNaN(val)) {\n            val = null; // convert NaNs to nulls\n        }\n\n        return val;\n    ")},StyleParser.zeroPair=Object.freeze([0,0]),StyleParser.defaults={color:[1,1,1,1],width:1,size:1,extrude:!1,height:20,min_height:0,order:0,z:0,outline:{color:[0,0,0,0],width:0},material:{ambient:1,diffuse:1}},StyleParser.macros={"Style.color.pseudoRandomColor":function(){return[parseInt(feature.id,16)/100%1*.7,parseInt(feature.id,16)/1e4%1*.7,parseInt(feature.id,16)/1e6%1*.7,1]},"Style.color.randomColor":function(){return[.7*Math.random(),.7*Math.random(),.7*Math.random(),1]}},StyleParser.getFeatureParseContext=function(e,n,r,d){return{feature:e,tile:n,global:r,sources:d,zoom:n.style_zoom,geometry:Geo$1.geometryType(e.geometry.type),meters_per_pixel:n.meters_per_pixel,meters_per_pixel_sq:n.meters_per_pixel_sq,units_per_meter_overzoom:n.units_per_meter_overzoom}};var CACHE_TYPE={STATIC:0,DYNAMIC:1,ZOOM:2};StyleParser.CACHE_TYPE=CACHE_TYPE,StyleParser.createPropertyCache=function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(null!=e){if(e.value)return{value:e.value,zoom:e.zoom?{}:null,type:e.type};var r={value:e,type:CACHE_TYPE.STATIC};return Array.isArray(r.value)&&Array.isArray(r.value[0])?(r.zoom={},r.type=CACHE_TYPE.ZOOM):"function"==typeof r.value&&(r.type=CACHE_TYPE.DYNAMIC),"function"==typeof n&&(r.zoom?r.value=r.value.map(function(d,m){return[d[0],n(d[1],m)]}):"function"!=typeof r.value&&(r.value=n(r.value,0))),r}},StyleParser.createColorPropertyCache=function(e){return StyleParser.createPropertyCache(e,function(n){return"Style.color.pseudoRandomColor"===n?Utils$1.stringToFunction(StyleParser.wrapFunction(StyleParser.macros["Style.color.pseudoRandomColor"])):"Style.color.randomColor"===n?StyleParser.macros["Style.color.randomColor"]:n})};var isPercent=function(e){return"string"==typeof e&&"%"===e[e.length-1]},isRatio=function(e){return"auto"===e},isComputed=function(e){return isPercent(e)||isRatio(e)},dualRatioError="'size' can specify either width or height as derived from aspect ratio, but not both";StyleParser.createPointSizePropertyCache=function(e){var n=null,r=null;if(isPercent(e))n=[!0];else if(Array.isArray(e))if(Array.isArray(e[0])){if(e.some(function(d){return Array.isArray(d[1])?d[1].some(function(m){return isComputed(m)}):isPercent(d[1])})&&(n=e.map(function(d){return Array.isArray(d[1])?d[1].map(function(m){return isPercent(m)}):isPercent(d[1])}),(r=e.map(function(d){return Array.isArray(d[1])&&d[1].map(function(m){return isRatio(m)})})).some(function(d){return Array.isArray(d)&&d.every(function(m){return m})})))throw dualRatioError}else if(e.some(isComputed)&&(n=[e.map(isPercent)],(r=[e.map(isRatio)])[0].every(function(d){return d})))throw dualRatioError;return n?((e={value:e}).has_pct=n,e.has_ratio=r,e.sprites={}):e=StyleParser.createPropertyCache(e,parsePositiveNumber),e},StyleParser.evalCachedPointSizeProperty=function(e,n,r){return e.has_pct||e.has_ratio?n?(e.sprites[n.sprite]||(e.sprites[n.sprite]=StyleParser.createPropertyCache(e.value,function(d,m){return Array.isArray(d)?(d=d.map(function(g,v){return e.has_ratio[m][v]?g:parsePositiveNumber(g)}).map(function(g,v){return e.has_pct[m][v]?n.css_size[v]*g/100:g}),e.has_ratio[m][0]?d[0]=d[1]*n.aspect:e.has_ratio[m][1]&&(d[1]=d[0]/n.aspect)):(d=parsePositiveNumber(d),d=e.has_pct[m]?n.css_size.map(function(g){return g*d/100}):[d,d]),d})),StyleParser.evalCachedProperty(e.sprites[n.sprite],r)):void 0:StyleParser.evalCachedProperty(e,r)},StyleParser.evalCachedProperty=function(e,n){if(null!=e)return e.dynamic?e.dynamic(n):e.static?e.static:e.zoom&&e.zoom[n.zoom]?e.zoom[n.zoom]:"function"!=typeof e.value?Array.isArray(e.value)&&Array.isArray(e.value[0])?(e.zoom=e.zoom||{},e.zoom[n.zoom]=Utils$1.interpolate(n.zoom,e.value),e.zoom[n.zoom]):(e.static=e.value,e.static):(e.dynamic=e.value,e.dynamic(n))},StyleParser.convertUnits=function(e,n){if(null!=e.val)return"px"===e.units?e.val*Geo$1.metersPerPixel(n.zoom):e.val;if("string"==typeof e)"px"===e.trim().slice(-2)?(e=parseNumber(e),e*=Geo$1.metersPerPixel(n.zoom)):e=parseNumber(e);else if(Array.isArray(e))return Array.isArray(e[0])?e.map(function(r){return[r[0],StyleParser.convertUnits(r[1],n)]}):e.map(function(r){return StyleParser.convertUnits(r,n)});return e},StyleParser.parseUnits=function(e){var n={val:parseNumber(e)};return 0!==n.val&&"string"==typeof e&&"px"===e.trim().slice(-2)&&(n.units="px"),n},StyleParser.evalCachedDistanceProperty=function(e,n){return e.dynamic?e.dynamic(n):e.zoom&&e.zoom[n.zoom]?e.zoom[n.zoom]:"function"!=typeof e.value?e.zoom?(e.zoom[n.zoom]=Utils$1.interpolate(n.zoom,e.value,function(r){return StyleParser.convertUnits(r,n)}),e.zoom[n.zoom]):StyleParser.convertUnits(e.value,n):(e.dynamic=e.value,e.dynamic(n))},StyleParser.string_colors={},StyleParser.colorForString=function(e){if(StyleParser.string_colors[e])return StyleParser.string_colors[e];var n=null;return"none"!==e&&((n=csscolorparser.parseCSSColor(e))&&4===n.length?(n[0]/=255,n[1]/=255,n[2]/=255):n=StyleParser.defaults.color),StyleParser.string_colors[e]=n},StyleParser.evalCachedColorProperty=function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(e.dynamic){var r=e.dynamic(n);return"string"==typeof r&&(r=StyleParser.colorForString(r)),r&&null==r[3]&&(r[3]=1),r}if(e.static)return e.static;if(e.zoom&&e.zoom[n.zoom])return e.zoom[n.zoom];if("function"==typeof e.value){e.dynamic=e.value;var d=e.dynamic(n);return"string"==typeof d&&(d=StyleParser.colorForString(d)),d&&null==d[3]&&(d[3]=1),d}if("string"==typeof e.value)return e.static=StyleParser.colorForString(e.value),e.static;if(e.zoom){if(!e.zoom_preprocessed){for(var m=0;m<e.value.length;m++){var g=e.value[m];g&&"string"==typeof g[1]&&(g[1]=StyleParser.colorForString(g[1]))}e.zoom_preprocessed=!0}return e.zoom[n.zoom]=Utils$1.interpolate(n.zoom,e.value),e.zoom[n.zoom][3]=e.zoom[n.zoom][3]||1,e.zoom[n.zoom]}return e.static=e.value.map(function(v){return v}),e.static&&null==e.static[3]&&(e.static[3]=1),e.static},StyleParser.parseColor=function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("function"==typeof e&&(e=e(n)),"string"==typeof e)e=StyleParser.colorForString(e);else if(Array.isArray(e)&&Array.isArray(e[0])){for(var r=0;r<e.length;r++){var d=e[r];"string"==typeof d[1]&&(d[1]=StyleParser.colorForString(d[1]))}n.zoom&&(e=Utils$1.interpolate(n.zoom,e))}return Array.isArray(e)?null==(e=e.map(function(m){return m}))[3]&&(e[3]=1):e=[0,0,0,1],e},StyleParser.calculateOrder=function(e,n){return"function"==typeof e?e=e(n):"string"==typeof e&&(e=n.feature.properties[e]?n.feature.properties[e]:parsePositiveNumber(e)),e},StyleParser.evalProperty=function(e,n){return"function"==typeof e?e(n):e};var RepeatGroup=function(){function e(n,r){_classCallCheck(this,e),this.key=n,this.repeat_dist=r,this.repeat_dist_sq=this.repeat_dist*this.repeat_dist,this.positions=[]}return _createClass(e,[{key:"check",value:function(n){for(var r=n.position,d=0;d<this.positions.length;d++){var m=this.positions[d],g=r[0]-m[0],v=r[1]-m[1],w=g*g+v*v;if(w<this.repeat_dist_sq)return{dist_sq:w,repeat_dist_sq:this.repeat_dist_sq}}}},{key:"add",value:function(n){n&&n.position&&this.positions.push(n.position)}}],[{key:"clear",value:function(n){this.groups[n]={}}},{key:"check",value:function(n,r,d){if(r.repeat_distance&&r.repeat_group&&this.groups[d][r.repeat_group])return this.groups[d][r.repeat_group].check(n)}},{key:"add",value:function(n,r,d){r.repeat_distance&&r.repeat_group&&(null==this.groups[d][r.repeat_group]&&(this.groups[d][r.repeat_group]=new e(r.repeat_group,r.repeat_distance*r.repeat_scale)),this.groups[d][r.repeat_group].add(n))}}]),e}();RepeatGroup.groups={};var GridIndex=function(){function e(n,r,d){_classCallCheck(this,e);var m=this.boxCells=[],g=this.circleCells=[];this.xCellCount=Math.ceil(n/d),this.yCellCount=Math.ceil(r/d);for(var v=0;v<this.xCellCount*this.yCellCount;v++)m.push([]),g.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=r,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/r,this.boxUid=0,this.circleUid=0}return _createClass(e,[{key:"keysLength",value:function(){return this.boxKeys.length+this.circleKeys.length}},{key:"insert",value:function(n,r,d,m,g){this._forEachCell(r,d,m,g,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(r),this.bboxes.push(d),this.bboxes.push(m),this.bboxes.push(g)}},{key:"insertCircle",value:function(n,r,d,m){this._forEachCell(r-m,d-m,r+m,d+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(r),this.circles.push(d),this.circles.push(m)}},{key:"insertCircleList",value:function(n,r){for(var d=0;d<r.length-2;d+=3)this.insertCircle("".concat(n,"/").concat(d),r[d],r[d+1],r[d+2])}},{key:"_insertBoxCell",value:function(n,r,d,m,g,v){this.boxCells[g].push(v)}},{key:"_insertCircleCell",value:function(n,r,d,m,g,v){this.circleCells[g].push(v)}},{key:"_query",value:function(n,r,d,m,g,v){if(d<0||n>this.width||m<0||r>this.height)return!g&&[];var w=[];if(n<=0&&r<=0&&this.width<=d&&this.height<=m){if(g)return!0;for(var k=0;k<this.boxKeys.length;k++)w.push({key:this.boxKeys[k],x1:this.bboxes[4*k],y1:this.bboxes[4*k+1],x2:this.bboxes[4*k+2],y2:this.bboxes[4*k+3]});for(var j=0;j<this.circleKeys.length;j++){var G=this.circles[3*j],q=this.circles[3*j+1],_t=this.circles[3*j+2];w.push({key:this.circleKeys[j],x1:G-_t,y1:q-_t,x2:G+_t,y2:q+_t})}return v?w.filter(v):w}return this._forEachCell(n,r,d,m,this._queryCell,w,{hitTest:g,seenUids:{box:{},circle:{}}},v),g?0<w.length:w}},{key:"_queryCircle",value:function(n,r,d,m,g){var v=n-d,w=n+d,k=r-d,j=r+d;if(w<0||v>this.width||j<0||k>this.height)return!m&&[];var G=[];return this._forEachCell(v,k,w,j,this._queryCellCircle,G,{hitTest:m,circle:{x:n,y:r,radius:d},seenUids:{box:{},circle:{}}},g),m?0<G.length:G}},{key:"query",value:function(n,r,d,m,g){return this._query(n,r,d,m,!1,g)}},{key:"hitTest",value:function(n,r,d,m,g){return this._query(n,r,d,m,!0,g)}},{key:"hitTestCircle",value:function(n,r,d,m){return this._queryCircle(n,r,d,!0,m)}},{key:"hitTestCircleList",value:function(n,r){for(var d=0;d<n.length-2;d+=3)if(this.hitTestCircle(n[d],n[d+1],n[d+2],r))return!0;return!1}},{key:"_queryCell",value:function(n,r,d,m,g,v,w,k){var j=w.seenUids,G=this.boxCells[g];if(null!==G){var q,_t=this.bboxes,_r=_createForOfIteratorHelper(G);try{for(_r.s();!(q=_r.n()).done;){var _s=q.value;if(!j.box[_s]){j.box[_s]=!0;var ga=4*_s;if(n<=_t[2+ga]&&r<=_t[3+ga]&&d>=_t[0+ga]&&m>=_t[1+ga]&&(!k||k(this.boxKeys[_s]))){if(w.hitTest)return v.push(!0),!0;v.push({key:this.boxKeys[_s],x1:_t[ga],y1:_t[1+ga],x2:_t[2+ga],y2:_t[3+ga]})}}}}catch(vy){_r.e(vy)}finally{_r.f()}}var _c=this.circleCells[g];if(null!==_c){var _u,_f=this.circles,_h=_createForOfIteratorHelper(_c);try{for(_h.s();!(_u=_h.n()).done;){var ad=_u.value;if(!j.circle[ad]){j.circle[ad]=!0;var ey=3*ad;if(this._circleAndRectCollide(_f[ey],_f[1+ey],_f[2+ey],n,r,d,m)&&(!k||k(this.circleKeys[ad]))){if(w.hitTest)return v.push(!0),!0;var sy=_f[ey],ly=_f[1+ey],dy=_f[2+ey];v.push({key:this.circleKeys[ad],x1:sy-dy,y1:ly-dy,x2:sy+dy,y2:ly+dy})}}}}catch(vy){_h.e(vy)}finally{_h.f()}}}},{key:"_queryCellCircle",value:function(n,r,d,m,g,v,w,k){var j=w.circle,G=w.seenUids,q=this.boxCells[g];if(null!==q){var _t,_r=this.bboxes,_s=_createForOfIteratorHelper(q);try{for(_s.s();!(_t=_s.n()).done;){var ga=_t.value;if(!G.box[ga]){G.box[ga]=!0;var _c=4*ga;if(this._circleAndRectCollide(j.x,j.y,j.radius,_r[0+_c],_r[1+_c],_r[2+_c],_r[3+_c])&&(!k||k(this.boxKeys[ga])))return v.push(!0),!0}}}catch(ly){_s.e(ly)}finally{_s.f()}}var _u=this.circleCells[g];if(null!==_u){var _f,_h=this.circles,ad=_createForOfIteratorHelper(_u);try{for(ad.s();!(_f=ad.n()).done;){var ey=_f.value;if(!G.circle[ey]){G.circle[ey]=!0;var sy=3*ey;if(this._circlesCollide(_h[sy],_h[1+sy],_h[2+sy],j.x,j.y,j.radius)&&(!k||k(this.circleKeys[ey])))return v.push(!0),!0}}}catch(ly){ad.e(ly)}finally{ad.f()}}}},{key:"_forEachCell",value:function(n,r,d,m,g,v,w,k){for(var j=this._convertToXCellCoord(n),G=this._convertToYCellCoord(r),q=this._convertToXCellCoord(d),_t=this._convertToYCellCoord(m),_r=j;_r<=q;_r++)for(var _s=G;_s<=_t;_s++)if(g.call(this,n,r,d,m,this.xCellCount*_s+_r,v,w,k))return}},{key:"_convertToXCellCoord",value:function(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))}},{key:"_convertToYCellCoord",value:function(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))}},{key:"_circlesCollide",value:function(n,r,d,m,g,v){var w=m-n,k=g-r,j=d+v;return w*w+k*k<j*j}},{key:"_circleAndRectCollide",value:function(n,r,d,m,g,v,w){var k=(v-m)/2,j=Math.abs(n-(m+k));if(k+d<j)return!1;var G=(w-g)/2,q=Math.abs(r-(g+G));if(G+d<q)return!1;if(j<=k||q<=G)return!0;var _t=j-k,_r=q-G;return _t*_t+_r*_r<=d*d}}]),e}(),CollisionUtils={toDiscardLabel:function(e,n,r,d){var m;if(d&&(m=function(ly){return ly!==d.id}),!n){if("point"===e.type&&!e.angle){var g=e.getAABB();if(r.hitTest(g.left,-g.top,g.right,-g.bottom,m)){if(Array.isArray(e.layout.anchor))for(var G=1;G<e.layout.anchor.length;G++){e.setAnchor(e.layout.anchor[G]);var q=e.getAABB();if(!r.hitTest(q.left,-q.top,q.right,-q.bottom,m))return!1}return!0}return!1}var _c=e.getBoundingCircles();return r.hitTestCircleList(_c,m)}if(n){if("point"===e.type&&!e.isFlat()){var _u=e.getScreenSpaceBoundingBox();return r.hitTest(_u.left,_u.top,_u.right,_u.bottom,m)}var sy=e.getBoundingCircles();return r.hitTestCircleList(sy,m)}return!1},addLabel:function(e,n,r){var d,m,g,j,G,q,ga=e.id;e.placed=!0,n||("point"!==e.type||e.angle?(d=e.getBoundingCircles(),r.insertCircleList(ga,d)):(g=(m=e.getAABB()).left,r.insert(ga,g,-m.top,m.right,-m.bottom))),n&&("point"!==e.type||e.isFlat()?(j=e.getBoundingCircles(),r.insertCircleList(ga,j)):(q=(G=e.getScreenSpaceBoundingBox()).left,r.insert(ga,q,G.top,G.right,G.bottom)))}},Collision={tiles:{},startTile:function(e,n){var r=1<arguments.length&&void 0!==n?n:{},d=r.apply_repeat_groups,m=void 0===d||d,g=r.return_hidden,v=void 0!==g&&g,w=r.grid_index,j=this.tiles[e]={grid_index:(void 0===w?null:w)||new GridIndex(Geo$1.tile_scale,Geo$1.tile_scale,240),objects:{},labels:{},styles:{},repeat:m,return_hidden:v};null==j.complete&&(j.complete=new Promise(function(G,q){j.resolve=G,j.reject=q}))},resetTile:function(e){delete this.tiles[e]},abortTile:function(e){this.tiles[e]&&this.tiles[e].resolve&&this.tiles[e].resolve([]),this.resetTile(e)},addStyle:function(e,n){this.tiles[n].styles[e]=!0},collide:function(e,n,r){var d=this.tiles[r];if(!d)return Promise.resolve([]);for(var m=d.objects,g=0;g<e.length;g++){var v=e[g],w=v.label.layout.priority;m[w]=m[w]||{},m[w][n]=m[w][n]||[],m[w][n].push(v)}return delete d.styles[n],0===Object.keys(d.styles).length&&this.endTile(r),d.complete.then(function(){return d.resolve=null,d.labels[n]||[]})},endTile:function(e){var n=this.tiles[e],r=n.labels;n.repeat&&RepeatGroup.clear(e);for(var d=Object.keys(n.objects).sort(function(G,q){return G-q}),m=0;m<d.length;m++){var g=n.objects[d[m]];if(g)for(var v in g){var w=g[v];r[v]=r[v]||[];for(var k=0;k<w.length;k++){var j=w[k];this.canBePlaced(j,e,j.linked,n)?j.linked?this.canBePlaced(j.linked,e,j,n)?(j.show=!0,(j.label.breach||j.linked.label.breach)&&(j.label.breach=!0,j.linked.label.breach=!0),r[v].push(j),this.place(j,e,n),this.place(j.linked,e,n)):n.return_hidden&&(j.show=!1,r[v].push(j)):(j.show=!0,r[v].push(j),this.place(j,e,n)):n.return_hidden&&(j.show=!1,r[v].push(j))}}}delete this.tiles[e],n.resolve()},canBePlaced:function(e,n,r,d){var m=2<arguments.length&&void 0!==r?r:null,g=(3<arguments.length&&void 0!==d?d:{}).repeat,v=void 0===g||g,w=e.label,k=e.label.layout;if(null!==w.placed)return w.placed;if(k.collide&&CollisionUtils.toDiscardLabel(w,"main"===n,this.tiles[n].grid_index,m&&m.label))k.collide&&(w.placed=!1);else{if(!v||!RepeatGroup.check(w,k,n))return!0;w.placed=!1}return w.placed},place:function(e,n,r){var d=e.label,m=r.repeat;null===d.placed&&((void 0===m||m)&&RepeatGroup.add(d,d.layout,n),CollisionUtils.addLabel(d,"main"===n,this.tiles[n].grid_index))}},Task={id:0,queue:[],max_time:20,start_time:null,state:{},ignore_user_moving_view:!1,_ignoreViewMoveWithDebounce:debounce(function(){Task.ignore_user_moving_view=!0},0,500),add:function(e){e.id=Task.id++,e.max_time=e.max_time||Task.max_time,e.pause_factor=e.pause_factor||1;var n=new Promise(function(r,d){e.resolve=r,e.reject=d});return e.promise=n,e.total_elapsed=0,e.stats={calls:0},this.queue.push(e),this.start_time=this.start_time||performance.now(),this.elapsed=performance.now()-this.start_time,this.elapsed<Task.max_time&&this.process(e),e.promise},remove:function(e){var n=this.queue.indexOf(e);-1<n&&this.queue.splice(n,1)},process:function(e){if(!this.state.user_moving_view||!1!==e.user_moving_view||this.ignore_user_moving_view)return e.pause?(e.pause--,!0):(e.stats.calls++,e.start_time=performance.now(),e.run(e));Task._ignoreViewMoveWithDebounce()},processAll:function(){this.start_time=this.start_time||performance.now(),this.ignore_user_moving_view&&!this.hasPendingTasks()&&(this.ignore_user_moving_view=!1);for(var e=0;e<this.queue.length;e++){var n=this.queue[e];if(!0!==this.process(n)&&(n.pause||(n.pause=n.elapsed>n.max_time?n.pause_factor:0),n.total_elapsed+=n.elapsed),this.elapsed=performance.now()-this.start_time,this.elapsed>=Task.max_time){this.start_time=null;break}}},finish:function(e,n){return e.elapsed=performance.now()-e.start_time,e.total_elapsed+=e.elapsed,this.remove(e),e.resolve(n),e.promise},cancel:function(e){var n;e.cancel instanceof Function&&(n=e.cancel(e)),e.resolve(n||{})},shouldContinue:function(e){return e.elapsed=performance.now()-e.start_time,this.elapsed=performance.now()-this.start_time,e.elapsed<e.max_time&&this.elapsed<Task.max_time},removeForTile:function(e){for(var n=this.queue.length-1;0<=n;n--)this.queue[n].tile_id===e&&(this.cancel(this.queue[n]),this.queue.splice(n,1))},setState:function(e){this.state=e},hasPendingTasks:function(){return!!this.queue.length}};function sliceOptions(e){return{coords:e.coords,uid:e.uid,filtering:e.filtering,sprites:e.sprites,url:e.url,element:e.element,data:e.data,width:e.width,height:e.height,density:e.density,repeat:e.repeat,TEXTURE_WRAP_S:e.TEXTURE_WRAP_S,TEXTURE_WRAP_T:e.TEXTURE_WRAP_T,UNPACK_FLIP_Y_WEBGL:e.UNPACK_FLIP_Y_WEBGL,UNPACK_PREMULTIPLY_ALPHA_WEBGL:e.UNPACK_PREMULTIPLY_ALPHA_WEBGL}}var Texture=function(){function e(n,r,d){var m=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};_classCallCheck(this,e),m=sliceOptions(m),this.gl=n,this.texture=n.createTexture(),this.texture&&(this.valid=!0),this.manager=d,this.bind(),this.name=r,this.retain_count=0,this.config_type=null,this.loading=null,this.loaded=!1,this.filtering=m.filtering,this.density=m.density||1,this.sprites=m.sprites,this.texcoords={},this.sizes={},this.css_sizes={},this.aspects={},this._byte_length=0,this.setData(1,1,new Uint8Array([0,0,0,0]),{filtering:"nearest"}),this.loaded=!1,this.manager.textures[this.name]&&(this.retain_count=this.manager.textures[this.name].retain_count,this.manager.textures[this.name].retain_count=0,this.manager.textures[this.name].destroy()),(this.manager.textures[this.name]=this).manager.texture_configs[this.name]=JSON.stringify(Object.assign({name:r},m)),this.load(m),log("trace","creating Texture ".concat(this.name))}return _createClass(e,[{key:"destroy",value:function(n){0<this.retain_count&&!(0<arguments.length&&void 0!==n?n:{}).force?log("error","Texture '".concat(this.name,"': destroying texture with retain count of '").concat(this.retain_count,"'")):this.valid&&(this.gl.deleteTexture(this.texture),this.texture=null,delete this.data,this.data=null,delete this.manager.textures[this.name],delete this.manager.texture_configs[this.name],this.valid=!1,this._byte_length=0,log("trace","destroying Texture ".concat(this.name)))}},{key:"retain",value:function(){this.retain_count++}},{key:"release",value:function(){this.retain_count<=0&&log("error","Texture '".concat(this.name,"': releasing texture with retain count of '").concat(this.retain_count,"'")),this.retain_count--,this.retain_count<=0&&this.destroy()}},{key:"bind",value:function(n){var r=0<arguments.length&&void 0!==n?n:0;this.valid&&(this.manager.activeUnit!==r&&(this.gl.activeTexture(this.gl.TEXTURE0+r),this.manager.activeUnit=r,this.manager.boundTexture=null),this.manager.boundTexture!==this.texture&&(this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.manager.boundTexture=this.texture))}},{key:"load",value:function(n){var r=this;return n?(this.loading=null,"string"==typeof n.url?(this.config_type="url",this.setUrl(n.url,n)):n.element?(this.config_type="element",this.setElement(n.element,n)):n.data&&n.width&&n.height&&(this.config_type="data",this.setData(n.width,n.height,n.data,n)),this.loading=this.loading&&this.loading.then(function(){return r.calculateSprites(),r})||Promise.resolve(this),this.loading):this.loading||Promise.resolve(this)}},{key:"setUrl",value:function(n,r){var d=this,m=1<arguments.length&&void 0!==r?r:{};if(this.valid)return this.url=n,this.loading=new Promise(function(g,v){var w=new Image;w.onload=function(){try{d.setElement(w,m)}catch(k){d.loaded=!1,log("warn","Texture '".concat(d.name,"': failed to load url: '").concat(d.url,"'"),k,m),d.manager.trigger("warning",{message:"Failed to load texture from ".concat(d.url),error:k,texture:m})}d.loaded=!0,g(d)},w.onerror=function(k){d.loaded=!1,log("warn","Texture '".concat(d.name,"': failed to load url: '").concat(d.url,"'"),k,m),d.manager.trigger("warning",{message:"Failed to load texture from ".concat(d.url),error:k,texture:m}),g(d)},Utils$1.isSafari()&&"data:"===d.url.slice(0,5)||(w.crossOrigin="anonymous"),w.src=d.url}),this.loading}},{key:"setData",value:function(n,r,d,m){var g=3<arguments.length&&void 0!==m?m:{};return this.width=n,this.height=r,Array.isArray(d)&&(d=new Uint8Array(d)),this.update(d,g),this.setFiltering(g),this.loaded=!0,this.loading=Promise.resolve(this),this.loading}},{key:"setElement",value:function(n,r){var d,m=n;return"string"==typeof n&&(n=document.querySelector(n)),n instanceof HTMLCanvasElement||n instanceof HTMLImageElement||n instanceof HTMLVideoElement?(this.update(n,r),this.setFiltering(r)):(this.loaded=!1,d="the 'element' parameter (`element: ".concat(JSON.stringify(m),"`) must be a CSS "),d+="selector string, or a <canvas>, <image> or <video> object",log("warn","Texture '".concat(this.name,"': ").concat(d),r),this.manager.trigger("warning",{message:"Failed to load texture because ".concat(d),texture:r})),this.loaded=!0,this.loading=Promise.resolve(this),this.loading}},{key:"update",value:function(n,r){var d=1<arguments.length&&void 0!==r?r:{};this.valid&&(this.bind(),n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof HTMLImageElement&&n.complete?(this.width=n.width,this.height=n.height,this._byte_length=this.width*this.height*4,this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1!==d.UNPACK_FLIP_Y_WEBGL),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,d.UNPACK_PREMULTIPLY_ALPHA_WEBGL||!1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,n)):(this._byte_length=n?n.byteLength:0,this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.width,this.height,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,n)),this.manager.trigger("update",this))}},{key:"getByteLength",value:function(){return this._byte_length}},{key:"setFiltering",value:function(n){var r,d=0<arguments.length&&void 0!==n?n:{};this.valid&&(d.filtering=d.filtering||"linear",r=this.gl,this.bind(),Utils$1.isPowerOf2(this.width)&&Utils$1.isPowerOf2(this.height)?(this.power_of_2=!0,r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,d.TEXTURE_WRAP_S||d.repeat&&r.REPEAT||r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,d.TEXTURE_WRAP_T||d.repeat&&r.REPEAT||r.CLAMP_TO_EDGE),"mipmap"===d.filtering?(this.filtering="mipmap",r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR_MIPMAP_LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.generateMipmap(r.TEXTURE_2D)):"linear"===d.filtering?(this.filtering="linear",r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR)):"nearest"===d.filtering&&(this.filtering="nearest",r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST))):(this.power_of_2=!1,r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),"nearest"===d.filtering?(this.filtering="nearest",r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST)):(this.filtering="linear",r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR))),this.manager.trigger("update",this))}},{key:"calculateSprites",value:function(){if(this.sprites)for(var n in this.sprites){var r=this.sprites[n];this.texcoords[n]=this.manager.getTexcoordsForSprite([r[0],r[1]],[r[2],r[3]],[this.width,this.height]),this.sizes[n]=[r[2],r[3]],this.css_sizes[n]=[r[2]/this.density,r[3]/this.density],this.aspects[n]=r[2]/r[3]}}}]),e}();function subscribeMixin(e){var n=[];return Object.assign(e,{subscribe:function(r){-1===n.indexOf(r)&&n.push(r)},unsubscribe:function(r){var d=n.indexOf(r);-1<d&&n.splice(d,1)},unsubscribeAll:function(){n=[]},trigger:function(r){for(var d=arguments.length,m=new Array(1<d?d-1:0),g=1;g<d;g++)m[g-1]=arguments[g];n.forEach(function(v){if("function"==typeof v[r])try{v[r].apply(v,m)}catch(w){log("warn","Caught exception in listener for event '".concat(r,"':"),w)}})},hasSubscribersFor:function(r){var d=!1;return n.forEach(function(m){"function"==typeof m[r]&&(d=!0)}),d}})}var TextureManager=function(){function e(n){_classCallCheck(this,e),this.default=e.DEFAULT_TEXTURE_NAME,this.textures={},this.texture_configs={},this.boundTexture=null,this.activeUnit=null,this.scene_id=n,WorkerBroker.addTarget("Texture"+this.scene_id,this),subscribeMixin(this)}return _createClass(e,[{key:"create",value:function(n,r,d){for(var m=e.matchers_,g=0;g<m.length;g++){var v=m[g][0],w=m[g][1];if(w&&w(d))return new v(n,r,this,d)}return new Texture(n,r,this,d)}},{key:"retain",value:function(n){this.textures[n]&&this.textures[n].retain()}},{key:"release",value:function(n){this.textures[n]&&this.textures[n].release()}},{key:"getRetainCount",value:function(n){if(this.textures[n])return this.textures[n].retain_count}},{key:"getByteLength",value:function(n){if(this.textures[n])return this.textures[n].getByteLength()}},{key:"destroy",value:function(n){var r=this;Object.keys(this.textures).forEach(function(d){var m=r.textures[d];d!==r.default&&m.gl===n&&m.destroy({force:!0})})}},{key:"getSpriteInfo",value:function(n,r){var d=this.textures[n];return d&&{size:d.sizes[r],css_size:d.css_sizes[r],aspect:d.aspects[r],texcoords:d.texcoords[r]}}},{key:"getTexcoordsForSprite",value:function(n,r,d){var m=d[1]-n[1]-r[1];return[n[0]/d[0],m/d[1],(r[0]+n[0])/d[0],(r[1]+m)/d[1]]}},{key:"createFromObject",value:function(n,r){var d=[];if(r)for(var m in r){var g,v=r[m];this.changed(m,v)&&(g=this.create(n,m,v),d.push(g.loading))}return Promise.all(d)}},{key:"createDefault",value:function(n){return this.create(n,this.default)}},{key:"changed",value:function(n,r){var d=this.textures[n];if(d){if("element"===d.config_type||null!=r.element)return!0;if(r=sliceOptions(r),this.texture_configs[n]===JSON.stringify(Object.assign({name:n},r)))return!1}return!0}},{key:"getInfo",value:function(n){var r=this;if(n=n||Object.keys(this.textures),Array.isArray(n))return Promise.all(n.map(function(m){return r.getInfo(m)}));var d=this.textures[n];return d?(d.loading||Promise.resolve(d)).then(function(){return{name:d.name,width:d.width,height:d.height,density:d.density,sprites:d.sprites,texcoords:d.texcoords,sizes:d.sizes,css_sizes:d.css_sizes,aspects:d.aspects,filtering:d.filtering,power_of_2:d.power_of_2,valid:d.valid}}):Promise.resolve(null)}},{key:"syncTexturesToWorker",value:function(n){var r=this;return Thread.is_main?Promise.all(n.map(function(d){var m=r.textures[d];return m&&m.loading||Promise.resolve()})).then(function(){return r.textures}):WorkerBroker.postMessage("Texture"+this.scene_id+".getInfo",n).then(function(d){return d.forEach(function(m){r.textures[m.name]=m}),r.textures})}},{key:"getMaxTextureSize",value:function(n){return n.getParameter(n.MAX_TEXTURE_SIZE)}}],[{key:"register",value:function(n,r){var d=e.matchers_;if(!(n instanceof Function&&r instanceof Function))throw"Invalid texture constructor or matcher";this.deRegister(n),d.push([n,r])}},{key:"deRegister",value:function(n){for(var r=e.matchers_,d=0;d<r.length;d++)r[d][0]===n&&r.splice(d,1)}}]),e}();TextureManager.DEFAULT_TEXTURE_NAME="__default",TextureManager.matchers_=[];var Registry={};function getTextureManager(e){return Registry[e]||(Registry[e]=new TextureManager(e)),Registry[e]}var transformMat4_1=transformMat4;function transformMat4(e,n,r){var d=n[0],m=n[1],g=n[2],v=(v=r[3]*d+r[7]*m+r[11]*g+r[15])||1;return e[0]=(r[0]*d+r[4]*m+r[8]*g+r[12])/v,e[1]=(r[1]*d+r[5]*m+r[9]*g+r[13])/v,e[2]=(r[2]*d+r[6]*m+r[10]*g+r[14])/v,e}var normalFromMat4_1=normalFromMat4;function normalFromMat4(e,n){var r=n[0],d=n[1],m=n[2],g=n[3],v=n[4],w=n[5],k=n[6],j=n[7],G=n[8],q=n[9],_t=n[10],_r=n[11],_s=n[12],ga=n[13],_c=n[14],_u=n[15],_f=r*w-d*v,_h=r*k-m*v,ad=r*j-g*v,ey=d*k-m*w,sy=d*j-g*w,ly=m*j-g*k,dy=G*ga-q*_s,vy=G*_c-_t*_s,Ay=G*_u-_r*_s,Sy=q*_c-_t*ga,jy=q*_u-_r*ga,Qy=_t*_u-_r*_c,Ny=_f*Qy-_h*jy+ad*Sy+ey*Ay-sy*vy+ly*dy;return Ny?(e[0]=(w*Qy-k*jy+j*Sy)*(Ny=1/Ny),e[1]=(k*Ay-v*Qy-j*vy)*Ny,e[2]=(v*jy-w*Ay+j*dy)*Ny,e[3]=(m*jy-d*Qy-g*Sy)*Ny,e[4]=(r*Qy-m*Ay+g*vy)*Ny,e[5]=(d*Ay-r*jy-g*dy)*Ny,e[6]=(ga*ly-_c*sy+_u*ey)*Ny,e[7]=(_c*ad-_s*ly-_u*_h)*Ny,e[8]=(_s*sy-ga*ad+_u*_f)*Ny,e):null}var invert_1=invert;function invert(e,n){var r=n[0],d=n[1],m=n[2],g=n[3],v=n[4],w=n[5],k=n[6],j=n[7],G=n[8],q=G*v-w*j,_t=-G*g+w*k,_r=j*g-v*k,_s=r*q+d*_t+m*_r;return _s?(e[0]=q*(_s=1/_s),e[1]=(-G*d+m*j)*_s,e[2]=(w*d-m*v)*_s,e[3]=_t*_s,e[4]=(G*r-m*k)*_s,e[5]=(-w*r+m*g)*_s,e[6]=_r*_s,e[7]=(-j*r+d*k)*_s,e[8]=(v*r-d*g)*_s,e):null}var identity_1=identity;function identity(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}var multiply_1=multiply;function multiply(e,n,r){var d=n[0],m=n[1],g=n[2],v=n[3],w=n[4],k=n[5],j=n[6],G=n[7],q=n[8],_t=n[9],_r=n[10],_s=n[11],ga=n[12],_c=n[13],_u=n[14],_f=n[15],_h=r[0],ad=r[1],ey=r[2],sy=r[3];return e[0]=_h*d+ad*w+ey*q+sy*ga,e[1]=_h*m+ad*k+ey*_t+sy*_c,e[2]=_h*g+ad*j+ey*_r+sy*_u,e[3]=_h*v+ad*G+ey*_s+sy*_f,e[4]=(_h=r[4])*d+(ad=r[5])*w+(ey=r[6])*q+(sy=r[7])*ga,e[5]=_h*m+ad*k+ey*_t+sy*_c,e[6]=_h*g+ad*j+ey*_r+sy*_u,e[7]=_h*v+ad*G+ey*_s+sy*_f,e[8]=(_h=r[8])*d+(ad=r[9])*w+(ey=r[10])*q+(sy=r[11])*ga,e[9]=_h*m+ad*k+ey*_t+sy*_c,e[10]=_h*g+ad*j+ey*_r+sy*_u,e[11]=_h*v+ad*G+ey*_s+sy*_f,e[12]=(_h=r[12])*d+(ad=r[13])*w+(ey=r[14])*q+(sy=r[15])*ga,e[13]=_h*m+ad*k+ey*_t+sy*_c,e[14]=_h*g+ad*j+ey*_r+sy*_u,e[15]=_h*v+ad*G+ey*_s+sy*_f,e}var translate_1=translate;function translate(e,n,r){var d,m,g,v,w,k,j,G,q,_t,_r,_s,ga=r[0],_c=r[1],_u=r[2];return n===e?(e[12]=n[0]*ga+n[4]*_c+n[8]*_u+n[12],e[13]=n[1]*ga+n[5]*_c+n[9]*_u+n[13],e[14]=n[2]*ga+n[6]*_c+n[10]*_u+n[14],e[15]=n[3]*ga+n[7]*_c+n[11]*_u+n[15]):(m=n[1],g=n[2],v=n[3],w=n[4],k=n[5],j=n[6],G=n[7],q=n[8],_t=n[9],_r=n[10],_s=n[11],e[0]=d=n[0],e[1]=m,e[2]=g,e[3]=v,e[4]=w,e[5]=k,e[6]=j,e[7]=G,e[8]=q,e[9]=_t,e[10]=_r,e[11]=_s,e[12]=d*ga+w*_c+q*_u+n[12],e[13]=m*ga+k*_c+_t*_u+n[13],e[14]=g*ga+j*_c+_r*_u+n[14],e[15]=v*ga+G*_c+_s*_u+n[15]),e}var scale_1=scale;function scale(e,n,r){var d=r[0],m=r[1],g=r[2];return e[0]=n[0]*d,e[1]=n[1]*d,e[2]=n[2]*d,e[3]=n[3]*d,e[4]=n[4]*m,e[5]=n[5]*m,e[6]=n[6]*m,e[7]=n[7]*m,e[8]=n[8]*g,e[9]=n[9]*g,e[10]=n[10]*g,e[11]=n[11]*g,e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e}var perspective_1=perspective;function perspective(e,n,r,d,m){var g=1/Math.tan(n/2),v=1/(d-m);return e[0]=g/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=g,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(m+d)*v,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*m*d*v,e[15]=0,e}var identity_1$1=identity$1;function identity$1(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}var lookAt_1=lookAt;function lookAt(e,n,r,d){var m,g,v,w,k,j,G,q,_t,_r,_s=n[0],ga=n[1],_c=n[2],_u=d[0],_f=d[1],_h=d[2],ad=r[0],ey=r[1],sy=r[2];return Math.abs(_s-ad)<1e-6&&Math.abs(ga-ey)<1e-6&&Math.abs(_c-sy)<1e-6?identity_1$1(e):(G=_s-ad,q=ga-ey,_t=_c-sy,m=_f*(_t*=_r=1/Math.sqrt(G*G+q*q+_t*_t))-_h*(q*=_r),g=_h*(G*=_r)-_u*_t,v=_u*q-_f*G,(_r=Math.sqrt(m*m+g*g+v*v))?(m*=_r=1/_r,g*=_r,v*=_r):v=g=m=0,w=q*v-_t*g,k=_t*m-G*v,j=G*g-q*m,(_r=Math.sqrt(w*w+k*k+j*j))?(w*=_r=1/_r,k*=_r,j*=_r):j=k=w=0,e[0]=m,e[1]=w,e[2]=G,e[3]=0,e[4]=g,e[5]=k,e[6]=q,e[7]=0,e[8]=v,e[9]=j,e[10]=_t,e[11]=0,e[12]=-(m*_s+g*ga+v*_c),e[13]=-(w*_s+k*ga+j*_c),e[14]=-(G*_s+q*ga+_t*_c),e[15]=1,e)}var copy_1=copy;function copy(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e}var invert_1$1=invert$1;function invert$1(e,n){var r=n[0],d=n[1],m=n[2],g=n[3],v=n[4],w=n[5],k=n[6],j=n[7],G=n[8],q=n[9],_t=n[10],_r=n[11],_s=n[12],ga=n[13],_c=n[14],_u=n[15],_f=r*w-d*v,_h=r*k-m*v,ad=r*j-g*v,ey=d*k-m*w,sy=d*j-g*w,ly=m*j-g*k,dy=G*ga-q*_s,vy=G*_c-_t*_s,Ay=G*_u-_r*_s,Sy=q*_c-_t*ga,jy=q*_u-_r*ga,Qy=_t*_u-_r*_c,Ny=_f*Qy-_h*jy+ad*Sy+ey*Ay-sy*vy+ly*dy;return Ny?(e[0]=(w*Qy-k*jy+j*Sy)*(Ny=1/Ny),e[1]=(m*jy-d*Qy-g*Sy)*Ny,e[2]=(ga*ly-_c*sy+_u*ey)*Ny,e[3]=(_t*sy-q*ly-_r*ey)*Ny,e[4]=(k*Ay-v*Qy-j*vy)*Ny,e[5]=(r*Qy-m*Ay+g*vy)*Ny,e[6]=(_c*ad-_s*ly-_u*_h)*Ny,e[7]=(G*ly-_t*ad+_r*_h)*Ny,e[8]=(v*jy-w*Ay+j*dy)*Ny,e[9]=(d*Ay-r*jy-g*dy)*Ny,e[10]=(_s*sy-ga*ad+_u*_f)*Ny,e[11]=(q*ad-G*sy-_r*_f)*Ny,e[12]=(w*vy-v*Sy-k*dy)*Ny,e[13]=(r*Sy-d*vy+m*dy)*Ny,e[14]=(ga*_h-_s*ey-_c*_f)*Ny,e[15]=(G*ey-q*_h+_t*_f)*Ny,e):null}var transformMat4_1$1=transformMat4$1;function transformMat4$1(e,n,r){var d=n[0],m=n[1],g=n[2],v=n[3];return e[0]=r[0]*d+r[4]*m+r[8]*g+r[12]*v,e[1]=r[1]*d+r[5]*m+r[9]*g+r[13]*v,e[2]=r[2]*d+r[6]*m+r[10]*g+r[14]*v,e[3]=r[3]*d+r[7]*m+r[11]*g+r[15]*v,e}var normalize_1=normalize$1;function normalize$1(e,n){var r=n[0],d=n[1],m=n[2],g=n[3],v=r*r+d*d+m*m+g*g;return 0<v&&(v=1/Math.sqrt(v),e[0]=r*v,e[1]=d*v,e[2]=m*v,e[3]=g*v),e}var scale_1$1=scale$1;function scale$1(e,n,r){return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=n[3]*r,e}var vec3={fromValues:function(e,n,r){var d=new Float64Array(3);return d[0]=e,d[1]=n,d[2]=r,d},transformMat4:transformMat4_1},mat3={normalFromMat4:normalFromMat4_1,invert:invert_1,identity:identity_1},mat4={multiply:multiply_1,translate:translate_1,scale:scale_1,perspective:perspective_1,lookAt:lookAt_1,identity:identity_1$1,copy:copy_1,invert:invert_1$1},vec4={transformMat4:transformMat4_1$1,normalize:normalize_1,scale:scale_1$1},FeatureSelection=function(){function e(n,r){_classCallCheck(this,e),this._gl=n,this._requests={},this._pixels=null,this._has_dirty_buffer=!1,this._fbo=this._gl.createFramebuffer(),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fbo),this._fbo_size={width:256,height:256};var d=getTextureManager(r).create(this._gl,"selection_fbo",{filtering:"nearest"});d.setData(this._fbo_size.width,this._fbo_size.height,null,{filtering:"nearest"}),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,d.texture,0);var m=this._gl.createRenderbuffer();this._gl.bindRenderbuffer(this._gl.RENDERBUFFER,m),this._gl.renderbufferStorage(this._gl.RENDERBUFFER,this._gl.DEPTH_COMPONENT16,this._fbo_size.width,this._fbo_size.height),this._gl.framebufferRenderbuffer(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.RENDERBUFFER,m),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null)}return _createClass(e,[{key:"destroy",value:function(){this._gl&&this._fbo&&(this._gl.deleteFramebuffer(this._fbo),this._fbo=null,this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null))}},{key:"bind",value:function(){var n;this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fbo),this._gl.viewport(0,0,this._fbo_size.width,this._fbo_size.height),(n=this._gl).clearColor.apply(n,_toConsumableArray(e.defaultColor))}},{key:"getFeatureAt",value:function(n,r,d){var m=r.radius,g=r.top_most_only,v=void 0===g||g;!n||n.x<0||n.y<0||1<n.x||1<n.y?d({features:null}):(this.selection_request_id=this.selection_request_id+1||0,this._requests[this.selection_request_id]={id:this.selection_request_id,point:n,radius:m,top_most_only:v,ttl:v?1:e.MAX_PICKING_TRIES,callback:d})}},{key:"hasPendingRequests",value:function(){return 0<Object.keys(this._requests).length}},{key:"clearPendingRequests",value:function(){for(var n in this._requests)this._requests[n].callback(new Error("cleared")),delete this._requests[n];this._pending_deep_request=null}},{key:"read",value:function(n){if(this.hasPendingRequests()){var r=this._gl;for(var d in r.bindFramebuffer(r.FRAMEBUFFER,this._fbo),this._pending_deep_request&&this.processRequest(this._pending_deep_request,n),this._requests)if(this.processRequest(this._requests[d],n))break;r.bindFramebuffer(r.FRAMEBUFFER,null)}}},{key:"processRequest",value:function(n,r){var d,m,g,v=this._gl,w=255,k=n.point,j=n.radius,G=(g=j?(m=Math.min(this._fbo_size.width,this._fbo_size.height),{x:Math.min(Math.ceil(2*j.x*this._fbo_size.width),m),y:Math.min(Math.ceil(2*j.y*this._fbo_size.height),m)}):(j={x:0,y:0},{x:1,y:1})).x*g.y*4;if(null==this._pixels||this._pixels.byteLength<G)this._pixels=new Uint8Array(G);else if(this._pixels.fill instanceof Function)this._pixels.fill(0,0,G);else for(var q=0;q<G;q++)this._pixels[q]=0;v.readPixels(Math.round((k.x-j.x)*this._fbo_size.width),Math.round((1-k.y-j.y)*this._fbo_size.height),g.x,g.y,v.RGBA,v.UNSIGNED_BYTE,this._pixels),n.ttl--;var _t=Math.floor(g.x/2),_r=Math.floor(g.y/2),ga=this._pixels.slice(_s=4*(_r*g.x+_t),_s+4),_c=ga[0]+(ga[1]<<8)+(ga[2]<<16);if(0<_c)d=_c+(ga[3]<<24)>>>0,w=ga[3];else if(4<G)for(var _u=1/0,_s=0,_f=0;_f<g.y;_f++)for(var _h,ad=0;ad<g.x;ad++,_s+=4)0<(_c=(ga=this._pixels.slice(_s,_s+4))[0]+(ga[1]<<8)+(ga[2]<<16))&&(_h=Math.pow(ad-_t,2)+Math.pow(_f-_r,2))<_u&&(d=_c+(ga[3]<<24)>>>0,w=ga[3],_u=_h);if(255!==w){var ey=this._getFeatureByKey(d,r);if(n.features||(n.features=[]),!ey)return void this._finishRead(n);if(n.features.every(function(sy){return sy.id!==ey.id})&&n.features.push(ey),n.ttl)return this._pending_deep_request=n,e._discardColor(ga),this._has_dirty_buffer=!0;this._finishRead(n)}else this._finishRead(n)}},{key:"_finishRead",value:function(n){var r=n.features||e.EMPTY_ARRAY;n.top_most_only||(this._pending_deep_request=null,e._resetDiscardedColors()),delete this._requests[n.id],n.callback({features:r})}},{key:"_getFeatureByKey",value:function(n,r){for(var d=null,m=0;m<r.length;m++){var g=r[m];if(g.selection_data&&(d=g.selection_data[n])){d.tile={coords:g.coords};break}}return d}},{key:"setupDiscards",value:function(n){for(var r=e.MAX_PICKING_TRIES;r--;)n.uniform("4fv","u_selection_discard".concat(r),e._discarded_colors[r]||e.defaultColor)}},{key:"has_dirty_buffer",get:function(){return this._has_dirty_buffer},set:function(){this._has_dirty_buffer=!!this._pending_deep_request}}],[{key:"makeEntry",value:function(){this.map_entry++;var n=255&this.map_entry,r=this.map_entry>>8&255,d=this.map_entry>>16&255,m=this.map_prefix;return{key:n+(r<<8)+(d<<16)+(m<<24)>>>0,color:[n/255,r/255,d/255,m/255]}}},{key:"reset",value:function(){this.map_entry=0}},{key:"setPrefix",value:function(n){this.map_prefix=n}},{key:"_discardColor",value:function(n){this._discarded_colors.push([n[0]/255,n[1]/255,n[2]/255,n[3]/255])}},{key:"_resetDiscardedColors",value:function(){this._discarded_colors.length=0}}]),e}();FeatureSelection._discarded_colors=[],FeatureSelection.map_entry=0,FeatureSelection.map_prefix=0,FeatureSelection.defaultColor=[0,0,0,1],FeatureSelection.MAX_PICKING_TRIES=10,FeatureSelection.EMPTY_ARRAY=Object.freeze([]);var GLSL={parseUniforms:function(e){var n=[];for(var r in e){var d,m=r,g=e[r];if("number"==typeof g)n.push({type:"float",method:"1f",name:r,value:g,key:m,uniforms:e});else if(Array.isArray(g)){if("number"==typeof g[0])2<=g.length&&g.length<=4?n.push({type:"vec"+g.length,method:g.length+"fv",name:r,value:g,key:m,uniforms:e}):4<g.length&&n.push({type:"float[]",method:"1fv",name:r+"[0]",value:g,key:m,uniforms:e});else if("string"==typeof g[0])for(d=0;d<g.length;d++)n.push({type:"sampler2D",method:"1i",name:r+"["+d+"]",value:g[d],key:d,uniforms:g});else if(Array.isArray(g[0])&&"number"==typeof g[0][0]&&2<=g[0].length&&g[0].length<=4)for(d=0;d<g.length;d++)n.push({type:"vec"+g[0].length,method:g[d].length+"fv",name:r+"["+d+"]",value:g[d],key:d,uniforms:g})}else"boolean"==typeof g?n.push({type:"bool",method:"1i",name:r,value:g,key:m,uniforms:e}):"string"==typeof g&&n.push({type:"sampler2D",method:"1i",name:r,value:g,key:m,uniforms:e})}return n},defineVariable:function(e,n){var r,d;if("number"==typeof n)r="float";else if(Array.isArray(n))"number"==typeof n[0]?2<=n.length&&n.length<=4?r="vec"+n.length:(r="float",d=n.length):"string"==typeof n[0]&&(r="sampler2D",d=n.length);else if("boolean"==typeof n)r="bool";else{if("string"!=typeof n)return;r="sampler2D"}var m="";return m+="".concat(r," ").concat(e),d&&(m+="[".concat(d,"]")),m+";\n"},defineUniform:function(e,n){var r=GLSL.defineVariable(e,n);if(r)return"uniform "+r},isUniformDefined:function(e,n){var r=new RegExp("uniform[^;]+(?:{[\\s\\S]*})?[^;]*\\b"+e+"\\b","g");return!!n.match(r)},isSymbolReferenced:function(e,n){var r=new RegExp("\\b"+e+"\\b","g");return 0<=n.search(r)},expandVec3:function(e){var n,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(Array.isArray(e)){if(2!==e.length)return e;n=[].concat(_toConsumableArray(e),[r]).map(parseFloat)}else n=[e,e,e].map(parseFloat);if(n&&n.every(function(d){return"number"==typeof d&&!isNaN(d)}))return n},expandVec4:function(e){var n,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(Array.isArray(e)){if(3!==e.length)return e;n=[].concat(_toConsumableArray(e),[r]).map(parseFloat)}else n=[e,e,e,r].map(parseFloat);if(n&&n.every(function(d){return"number"==typeof d&&!isNaN(d)}))return n}},extensions=[];function getExtension(e,n){var r=extensions.filter(function(d){return d[0]===e})[0];return(r=r&&r[1])||(extensions.push([e,{}]),r=extensions[extensions.length-1][1]),r[n]||(r[n]=e.getExtension(n)),r[n]}function hashString(e){var n,r,d=0;if(0===e.length)return d;for(n=0,r=e.length;n<r;n++)d=(d<<5)-d+e.charCodeAt(n),d|=0;return d}var stripComments=createCommonjsModule(function(e){var n="(.|[\\r\\n]|\\n)*?\\*\\/\\n?\\n?",r=/(^|[^\S\n])(?:\/\/)([\s\S]+?)$/gm,d=/(^|[^\S\n])(?:\/\/[^!])([\s\S]+?)$/gm,m=e.exports=function(g,v){return g?m.block(m.line(g,v),v):""};m.block=function(g,v){v=v||{};var w=new RegExp("\\/\\*"+n,"gm");return v.safe&&(w=new RegExp("\\/\\*(?!\\*?\\!)"+n,"gm")),g?g.replace(w,""):""},m.line=function(g,v){var w=r;return(v=v||{}).safe&&(w=d),g?g.replace(w,""):""}}),glShaderErrors=parseErrors;function parseErrors(e){e=String(e);for(var n,r=[];n=e.match(/ERROR\:([^\n]+)/);){e=e.slice(n.index+1);var d=(v=n[1].trim()).split(":"),m=d.slice(2).join(":").trim(),g=parseInt(d[0],10),v=parseInt(d[1],10);r.push({message:m,file:g,line:v})}return r}var re_pragma=/^\s*#pragma.*$/gm,re_continue_line=/\\\s*\n/gm,ShaderProgram=function(){function e(n,r,d,m,g){if(_classCallCheck(this,e),g=g||{},this.textureManager=getTextureManager(m),this.gl=n,this.program=null,this.compiled=!1,this.compiling=!1,this.error=null,!e.polyfills[m]){e.polyfills[m]={};try{this.gl.uniformMatrix3fv(null,!1,new Float64Array(9))}catch{e.polyfills[m].uniformMatrix3fv=this.gl.uniformMatrix3fv,this.gl.uniformMatrix3fv=function(w,k,j){e.polyfills[m].uniformMatrix3fv.call(this,w,k,new Float32Array(j))}}try{this.gl.uniformMatrix4fv(null,!1,new Float64Array(16))}catch{e.polyfills[m].uniformMatrix4fv=this.gl.uniformMatrix4fv,this.gl.uniformMatrix4fv=function(w,k,j){e.polyfills[m].uniformMatrix4fv.call(this,w,k,new Float32Array(j))}}}this.defines=Object.assign({},g.defines||{}),this.blocks=Object.assign({},g.blocks||{}),this.block_scopes=Object.assign({},g.block_scopes||{}),this.extensions=g.extensions||[],this.dependent_uniforms=g.uniforms,this.uniforms={},this.attribs={},this.vertex_source=r,this.fragment_source=d,this.id=e.id++,this.name=g.name}return _createClass(e,[{key:"destroy",value:function(){this.gl.useProgram(null),this.gl.deleteProgram(this.program),this.program=null,this.uniforms={},this.attribs={},this.compiled=!1}},{key:"use",value:function(){this.compiled&&(e.current!==this&&this.gl.useProgram(this.program),e.current=this)}},{key:"compile",value:function(){var n=this;if(this.compiling)throw new Error("ShaderProgram.compile(): skipping for ".concat(this.id," (").concat(this.name,") because already compiling"));this.compiling=!0,this.compiled=!1,this.error=null,this.computed_vertex_source=this.vertex_source,this.computed_fragment_source=this.fragment_source;var r,d=this.checkExtensions(),m=this.buildDefineList(),g=this.buildShaderBlockList();for(var v in g){var w,k,j,G=g[v];!G||Array.isArray(G)&&0===G.length||(r=new RegExp("^\\s*#pragma\\s+tangram:\\s+"+v+"\\s*$","m"),w=this.computed_vertex_source.match(r),k=this.computed_fragment_source.match(r),null==w&&null==k||(j="",G.forEach(function(_r){var _s="".concat(_r.scope,", ").concat(_r.key,", ").concat(_r.num);j+="\n// tangram-block-start: ".concat(_s,"\n"),j+=_r.source,j+="\n// tangram-block-end: ".concat(_s,"\n")}),null!=w&&(this.computed_vertex_source=this.computed_vertex_source.replace(r,j)),null!=k&&(this.computed_fragment_source=this.computed_fragment_source.replace(r,j)),m["TANGRAM_BLOCK_"+v.replace(/[\s-]+/g,"_").toUpperCase()]=!0))}this.computed_vertex_source=this.computed_vertex_source.replace(re_pragma,""),this.computed_fragment_source=this.computed_fragment_source.replace(re_pragma,""),this.ensureUniforms(this.dependent_uniforms);var q=this.gl.getShaderPrecisionFormat(this.gl.FRAGMENT_SHADER,this.gl.HIGH_FLOAT),_t=q&&0<q.precision?"precision highp float;\n":"precision mediump float;\n";m.TANGRAM_VERTEX_SHADER=!0,m.TANGRAM_FRAGMENT_SHADER=!1,this.computed_vertex_source=_t+e.buildDefineString(m)+this.computed_vertex_source,m.TANGRAM_VERTEX_SHADER=!1,m.TANGRAM_FRAGMENT_SHADER=!0,this.computed_fragment_source=e.buildExtensionString(d)+_t+e.buildDefineString(m)+this.computed_fragment_source,this.computed_vertex_source=this.computed_vertex_source.replace(re_continue_line,""),this.computed_fragment_source=this.computed_fragment_source.replace(re_continue_line,"");try{this.program=e.updateProgram(this.gl,this.program,this.computed_vertex_source,this.computed_fragment_source),this.compiled=!0,this.compiling=!1}catch(_r){throw this.program=null,this.compiled=!1,this.compiling=!1,"vertex"!==(this.error=_r).type&&"fragment"!==_r.type||(this.shader_errors=_r.errors,this.shader_errors.forEach(function(_s){_s.type=_r.type,_s.block=n.block(_r.type,_s.line)})),_r}this.computed_vertex_source=null,this.computed_fragment_source=null,this.use(),this.refreshUniforms(),this.refreshAttributes()}},{key:"buildDefineList",value:function(){var n,r={};for(n in e.defines)r[n]=e.defines[n];for(n in this.defines)r[n]=this.defines[n];return r}},{key:"buildShaderBlockList",value:function(){var n,r,d={};for(n in e.blocks)d[n]=[],Array.isArray(e.blocks[n])?(r=d[n]).push.apply(r,_toConsumableArray(e.blocks[n].map(function(k,j){return{key:n,source:k,num:j,scope:"ShaderProgram"}}))):d[n]=[{key:n,source:e.blocks[n],num:0,scope:"ShaderProgram"}];for(n in this.blocks)if(d[n]=d[n]||[],Array.isArray(this.blocks[n]))for(var m=this.block_scopes&&this.block_scopes[n]||[],g=null,v=0,w=0;w<this.blocks[n].length;w++)m[w]!==g&&(g=m[w],v=0),d[n].push({key:n,source:this.blocks[n][w],num:v,scope:g||this.name}),v++;else d[n].push({key:n,source:this.blocks[n],num:0,scope:this.name});return d}},{key:"ensureUniforms",value:function(n){if(n){var r,d=stripComments(this.computed_vertex_source),m=stripComments(this.computed_fragment_source),g=[],v=[];for(var w in n){var k=GLSL.isUniformDefined(w,d),j=GLSL.isUniformDefined(w,m);if(!k||!j){if(!(r=GLSL.defineUniform(w,n[w])))continue;k||(log("trace","Program ".concat(this.name,": ").concat(w," not defined in vertex shader, injecting: '").concat(r,"'")),g.push(r)),j||(log("trace","Program ".concat(this.name,": ").concat(w," not defined in fragment shader, injecting: '").concat(r,"'")),v.push(r))}}0<g.length&&(this.computed_vertex_source=g.join("\n")+this.computed_vertex_source),0<v.length&&(this.computed_fragment_source=v.join("\n")+this.computed_fragment_source)}}},{key:"setUniforms",value:function(n,r){if(this.compiled){(!(1<arguments.length&&void 0!==r)||r)&&(this.texture_unit=0);for(var m=GLSL.parseUniforms(n),g=0;g<m.length;g++){var v=m[g];"sampler2D"===v.type?this.setTextureUniform(v.name,v.value):this.uniform(v.method,v.name,v.value)}}}},{key:"saveUniforms",value:function(n){var r=n||this.uniforms;for(var d in r){var m=this.uniforms[d];m&&(m.saved_value=m.value)}this.saved_texture_unit=this.texture_unit||0}},{key:"restoreUniforms",value:function(n){var r=n||this.uniforms;for(var d in r){var m=this.uniforms[d];m&&m.saved_value&&(m.value=m.saved_value,this.updateUniform(m))}this.texture_unit=this.saved_texture_unit||0}},{key:"setTextureUniform",value:function(n,r){var d=this.textureManager.textures[r];null!=d?(d.bind(this.texture_unit),this.uniform("1i",n,this.texture_unit),this.texture_unit++):log("warn","Cannot find texture '".concat(r,"'"))}},{key:"uniform",value:function(n,r,d){var m;this.compiled&&(this.uniforms[r]=this.uniforms[r]||{},(m=this.uniforms[r]).name=r,void 0===m.location&&(m.location=this.gl.getUniformLocation(this.program,r)),m.method=n,m.value=d,this.updateUniform(m))}},{key:"updateUniform",value:function(n){this.compiled&&n&&null!=n.location&&(this.use(),this.commitUniform(n))}},{key:"commitUniform",value:function(n){var r=n.location,d=n.value;switch(n.method){case"1i":this.gl.uniform1i(r,d);break;case"1f":this.gl.uniform1f(r,d);break;case"2f":this.gl.uniform2f(r,d[0],d[1]);break;case"3f":this.gl.uniform3f(r,d[0],d[1],d[2]);break;case"4f":this.gl.uniform4f(r,d[0],d[1],d[2],d[3]);break;case"1iv":this.gl.uniform1iv(r,d);break;case"3iv":this.gl.uniform3iv(r,d);break;case"1fv":this.gl.uniform1fv(r,d);break;case"2fv":this.gl.uniform2fv(r,d);break;case"3fv":this.gl.uniform3fv(r,d);break;case"4fv":this.gl.uniform4fv(r,d);break;case"Matrix3fv":this.gl.uniformMatrix3fv(r,!1,d);break;case"Matrix4fv":this.gl.uniformMatrix4fv(r,!1,d)}}},{key:"refreshUniforms",value:function(){if(this.compiled)for(var n in this.uniforms){var r=this.uniforms[n];r.location=this.gl.getUniformLocation(this.program,n),this.updateUniform(r)}}},{key:"refreshAttributes",value:function(){this.attribs={}}},{key:"attribute",value:function(n){if(this.compiled){var r=this.attribs[n]=this.attribs[n]||{};return null!=r.location||(r.name=n,r.location=this.gl.getAttribLocation(this.program,n)),r}}},{key:"source",value:function(n){return"vertex"===n?this.computed_vertex_source:"fragment"===n?this.computed_fragment_source:void 0}},{key:"lines",value:function(n){var r=this.source(n);return r?r.split("\n"):[]}},{key:"line",value:function(n,r){var d=this.lines(n);if(d)return d[r]}},{key:"block",value:function(n,r){for(var d,m=this.lines(n),g=0;g<r&&g<m.length;g++){var v=m[g],w=v.match(/\/\/ tangram-block-start: ([A-Za-z0-9_-]+), ([A-Za-z0-9_-]+), (\d+)/);w&&1<w.length?d={scope:w[1],name:w[2],num:w[3]}:(w=v.match(/\/\/ tangram-block-end: ([A-Za-z0-9_-]+), ([A-Za-z0-9_-]+), (\d+)/))&&1<w.length&&(d=null),d&&(d.line=null==d.line?-1:d.line+1,d.source=v)}return d}},{key:"checkExtensions",value:function(){var n=this,r=[];return this.extensions.forEach(function(d){var m=getExtension(n.gl,d),g="TANGRAM_EXTENSION_".concat(d);n.defines[g]=null!=m,m?r.push(d):log("debug","Could not enable extension '".concat(d,"'"))}),r}}]),e}();ShaderProgram.polyfills={},ShaderProgram.id=0,ShaderProgram.current=null,ShaderProgram.defines={},ShaderProgram.blocks={},ShaderProgram.reset=function(){ShaderProgram.programs_by_source={},ShaderProgram.shaders_by_source={}},ShaderProgram.reset(),ShaderProgram.buildDefineString=function(e){var n="";for(var r in e)null!=e[r]&&!1!==e[r]&&("boolean"==typeof e[r]&&!0===e[r]?n+="#define "+r+"\n":"number"==typeof e[r]&&Math.floor(e[r])===e[r]?n+="#define "+r+" "+e[r].toFixed(1)+"\n":n+="#define "+r+" "+e[r]+"\n");return n},ShaderProgram.buildExtensionString=function(e){var n="";return(e=e||[]).forEach(function(r){n+="#ifdef GL_".concat(r,"\n#extension GL_").concat(r," : enable\n#endif\n")}),n},ShaderProgram.addBlock=function(e){var n;ShaderProgram.blocks[e]=ShaderProgram.blocks[e]||[];for(var r=arguments.length,d=new Array(1<r?r-1:0),m=1;m<r;m++)d[m-1]=arguments[m];(n=ShaderProgram.blocks[e]).push.apply(n,d)},ShaderProgram.removeBlock=function(e){ShaderProgram.blocks[e]=[]},ShaderProgram.replaceBlock=function(e){ShaderProgram.removeBlock(e);for(var n=arguments.length,r=new Array(1<n?n-1:0),d=1;d<n;d++)r[d-1]=arguments[d];ShaderProgram.addBlock.apply(ShaderProgram,[e].concat(r))},ShaderProgram.updateProgram=function(e,n,r,d){var m=hashString(e._tangram_id+"::"+r+"::"+d);if(ShaderProgram.programs_by_source[m])return log("trace","Reusing identical source GL program object"),ShaderProgram.programs_by_source[m];var g=ShaderProgram.createShader(e,r,e.VERTEX_SHADER),v=ShaderProgram.createShader(e,d,e.FRAGMENT_SHADER);if(e.useProgram(null),null!=n)for(var w=e.getAttachedShaders(n),k=0;k<w.length;k++)e.detachShader(n,w[k]);else n=e.createProgram();if(null==g||null==v)return n;if(e.attachShader(n,g),e.attachShader(n,v),e.linkProgram(n),e.getProgramParameter(n,e.LINK_STATUS))return ShaderProgram.programs_by_source[m]=n;var j=new Error("WebGL program error:\n            VALIDATE_STATUS: ".concat(e.getProgramParameter(n,e.VALIDATE_STATUS),"\n            ERROR: ").concat(e.getError(),"\n            --- Vertex Shader ---\n            ").concat(r,"\n            --- Fragment Shader ---\n            ").concat(d));throw Object.assign(new Error(j),{type:"program"})},ShaderProgram.createShader=function(e,n,r){var d=hashString(e._tangram_id+"::"+n);if(ShaderProgram.shaders_by_source[d])return log("trace","Reusing identical source GL shader object"),ShaderProgram.shaders_by_source[d];var m=e.createShader(r);if(e.shaderSource(m,n),e.compileShader(m),e.getShaderParameter(m,e.COMPILE_STATUS))return ShaderProgram.shaders_by_source[d]=m;var g=r===e.VERTEX_SHADER?"vertex":"fragment",v=e.getShaderInfoLog(m),w=glShaderErrors(v);throw Object.assign(new Error(v),{type:g,errors:w})};var VertexArrayObject={disabled:!1,bound_vao:[],init:function(e){var n;!0!==this.disabled&&(n=getExtension(e,"OES_vertex_array_object")),null!=n?log("info","Vertex Array Object extension available"):log("warn",!0!==this.disabled?"Vertex Array Object extension NOT available":"Vertex Array Object extension force disabled")},create:function(e,n,r){var d={};d.setup=n,d.teardown=r;var m=getExtension(e,"OES_vertex_array_object");return null!=m&&(d._vao=m.createVertexArrayOES(),m.bindVertexArrayOES(d._vao)),d.setup(!0),d},getCurrentBinding:function(e){var n=this.bound_vao.filter(function(r){return r[0]===e})[0];return n&&n[1]},setCurrentBinding:function(e,n){var r=this.bound_vao,d=r.filter(function(m){return m[0]===e})[0];null==d?r.push([e,n]):d[1]=n},bind:function(e,n){var r,d=getExtension(e,"OES_vertex_array_object");null!=n?null!=d&&null!=n._vao?(d.bindVertexArrayOES(n._vao),this.setCurrentBinding(e,n)):n.setup(!1):(r=this.getCurrentBinding(e),null!=d?d.bindVertexArrayOES(null):null!=r&&"function"==typeof r.teardown&&r.teardown(),this.setCurrentBinding(e,null))},destroy:function(e,n){var r=getExtension(e,"OES_vertex_array_object");null!=r&&null!=n&&null!=n._vao&&(r.deleteVertexArrayOES(n._vao),n._vao=null)}},VBOMesh=function(){function e(n,r,d,m,g,v){_classCallCheck(this,e),v=v||{},this.textureManager=getTextureManager(g),this.gl=n,this.vertex_data=r,this.element_data=d,this.vertex_layout=m,this.vertex_buffer=this.gl.createBuffer(),this.buffer_size=this.vertex_data.byteLength,this.draw_mode=v.draw_mode||this.gl.TRIANGLES,this.data_usage=v.data_usage||this.gl.STATIC_DRAW,this.vertices_per_geometry=3,this.uniforms=v.uniforms,this.textures=v.textures,this.retain=v.retain||!1,this.created_at=+new Date,this.fade_in_time=v.fade_in_time||0,this.vertex_count=this.vertex_data.byteLength/this.vertex_layout.stride,this.element_count=0,this.vaos={},this.toggle_element_array=!1,this.element_data?(this.toggle_element_array=!0,this.element_count=this.element_data.length,this.geometry_count=this.element_count/this.vertices_per_geometry,this.element_type=this.element_data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT,this.element_buffer=this.gl.createBuffer(),this.buffer_size+=this.element_data.byteLength,this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.element_buffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.element_data,this.data_usage)):this.geometry_count=this.vertex_count/this.vertices_per_geometry,this.upload(),this.retain||(delete this.vertex_data,delete this.element_data),this.valid=!0}return _createClass(e,[{key:"render",value:function(n){if(!this.valid)return!1;var d=(0<arguments.length&&void 0!==n?n:{}).program||ShaderProgram.current;d.use(),this.uniforms&&(d.saveUniforms(this.uniforms),d.setUniforms(this.uniforms,!1));var m=(new Date-this.created_at)/1e3;return d.uniform("1f","u_visible_time",m),this.bind(d),this.toggle_element_array?this.gl.drawElements(this.draw_mode,this.element_count,this.element_type,0):this.gl.drawArrays(this.draw_mode,0,this.vertex_count),VertexArrayObject.bind(this.gl,null),this.uniforms&&d.restoreUniforms(this.uniforms),m<this.fade_in_time}},{key:"bind",value:function(n){var r=this,d=this.vaos[n.id];d?VertexArrayObject.bind(this.gl,d):this.vaos[n.id]=VertexArrayObject.create(this.gl,function(m){r.gl.bindBuffer(r.gl.ARRAY_BUFFER,r.vertex_buffer),r.toggle_element_array&&r.gl.bindBuffer(r.gl.ELEMENT_ARRAY_BUFFER,r.element_buffer),r.vertex_layout.enable(r.gl,n,m)})}},{key:"upload",value:function(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertex_buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.vertex_data,this.data_usage)}},{key:"destroy",value:function(){var n=this;if(!this.valid)return!1;for(var r in this.valid=!1,this.vaos)VertexArrayObject.destroy(this.gl,this.vaos[r]);return this.gl.deleteBuffer(this.vertex_buffer),this.vertex_buffer=null,this.element_buffer&&(this.gl.deleteBuffer(this.element_buffer),this.element_buffer=null),delete this.vertex_data,delete this.element_data,this.textures&&this.textures.forEach(function(d){return n.textureManager.release(d)}),!0}}]),e}(),shaderSrc_material="/*Defines globals:materiallight_accumulator_**/struct Material{\n#ifdef TANGRAM_MATERIAL_EMISSION\nvec4 emission;\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE\nvec3 emissionScale;\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT\nvec4 ambient;\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE\nvec3 ambientScale;\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE\nvec4 diffuse;\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE\nvec3 diffuseScale;\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR\nvec4 specular;float shininess;\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE\nvec3 specularScale;\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE\nvec3 normalScale;float normalAmount;\n#endif\n};uniform Material u_material;Material material;\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE\nuniform sampler2D u_material_emission_texture;\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE\nuniform sampler2D u_material_ambient_texture;\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE\nuniform sampler2D u_material_diffuse_texture;\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE\nuniform sampler2D u_material_specular_texture;\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE\nuniform sampler2D u_material_normal_texture;\n#endif\nvec4 light_accumulator_ambient=vec4(vec3(0.0),1.);vec4 light_accumulator_diffuse=vec4(vec3(0.0),1.);\n#ifdef TANGRAM_MATERIAL_SPECULAR\nvec4 light_accumulator_specular=vec4(vec3(0.0),1.);\n#endif\n#ifdef TANGRAM_MATERIAL_TEXTURE_SPHEREMAP\nvec4 getSphereMap(in sampler2D _tex,in vec3 _eyeToPoint,in vec3 _normal,in vec2 _skew){vec3 eye=normalize(_eyeToPoint);eye.xy-=_skew;eye=normalize(eye);vec3 r=reflect(eye,_normal);r.z+=1.0;float m=2.*length(r);vec2 uv=r.xy/m+.5;return texture2D(_tex,uv);}\n#endif\n#ifdef TANGRAM_MATERIAL_TEXTURE_TRIPLANAR\nvec3 getTriPlanarBlend(in vec3 _normal){vec3 blending=abs(_normal);blending=normalize(max(blending,0.00001));float b=(blending.x+blending.y+blending.z);return blending/b;}vec4 getTriPlanar(in sampler2D _tex,in vec3 _pos,in vec3 _normal,in vec3 _scale){vec3 blending=getTriPlanarBlend(_normal);vec4 xaxis=texture2D(_tex,fract(_pos.yz*_scale.x));vec4 yaxis=texture2D(_tex,fract(_pos.xz*_scale.y));vec4 zaxis=texture2D(_tex,fract(_pos.xy*_scale.z));return xaxis*blending.x+yaxis*blending.y+zaxis*blending.z;}\n#endif\n#ifdef TANGRAM_MATERIAL_TEXTURE_PLANAR\nvec4 getPlanar(in sampler2D _tex,in vec3 _pos,in vec2 _scale){return texture2D(_tex,fract(_pos.xy*_scale.x));}\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE\nvoid calculateNormal(inout vec3 _normal){\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_UV\n_normal+=texture2D(u_material_normal_texture,fract(v_texcoord*material.normalScale.xy)).rgb*2.0-1.0;\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_PLANAR\nvec3 normalTex=getPlanar(u_material_normal_texture,v_world_position.xyz,material.normalScale.xy).rgb*2.0-1.0;_normal+=normalTex;\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_TRIPLANAR\nvec3 normalTex=getTriPlanar(u_material_normal_texture,v_world_position.xyz,_normal,material.normalScale).rgb*2.0-1.0;_normal+=normalTex;\n#endif\n_normal=normalize(_normal);}\n#endif\nvoid calculateMaterial(in vec3 _eyeToPoint,inout vec3 _normal){\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_UV\nmaterial.emission*=texture2D(u_material_emission_texture,v_texcoord);\n#endif\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_PLANAR\nmaterial.emission*=getPlanar(u_material_emission_texture,v_world_position.xyz,material.emissionScale.xy);\n#endif\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_TRIPLANAR\nmaterial.emission*=getTriPlanar(u_material_emission_texture,v_world_position.xyz,_normal,material.emissionScale);\n#endif\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_SPHEREMAP\nmaterial.emission*=getSphereMap(u_material_emission_texture,_eyeToPoint,_normal,u_center_offset);\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_UV\nmaterial.ambient*=texture2D(u_material_ambient_texture,v_texcoord);\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_PLANAR\nmaterial.ambient*=getPlanar(u_material_ambient_texture,v_world_position.xyz,material.ambientScale.xy);\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_TRIPLANAR\nmaterial.ambient*=getTriPlanar(u_material_ambient_texture,v_world_position.xyz,_normal,material.ambientScale);\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_SPHEREMAP\nmaterial.ambient*=getSphereMap(u_material_ambient_texture,_eyeToPoint,_normal,u_center_offset);\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_UV\nmaterial.diffuse*=texture2D(u_material_diffuse_texture,v_texcoord);\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_PLANAR\nmaterial.diffuse*=getPlanar(u_material_diffuse_texture,v_world_position.xyz,material.diffuseScale.xy);\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_TRIPLANAR\nmaterial.diffuse*=getTriPlanar(u_material_diffuse_texture,v_world_position.xyz,_normal,material.diffuseScale);\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_SPHEREMAP\nmaterial.diffuse*=getSphereMap(u_material_diffuse_texture,_eyeToPoint,_normal,u_center_offset);\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_UV\nmaterial.specular*=texture2D(u_material_specular_texture,v_texcoord);\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_PLANAR\nmaterial.specular*=getPlanar(u_material_specular_texture,v_world_position.xyz,material.specularScale.xy);\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_TRIPLANAR\nmaterial.specular*=getTriPlanar(u_material_specular_texture,v_world_position.xyz,_normal,material.specularScale);\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_SPHEREMAP\nmaterial.specular*=getSphereMap(u_material_specular_texture,_eyeToPoint,_normal,u_center_offset);\n#endif\n#endif\n}",material_props=["emission","ambient","diffuse","specular"],Material=function(){function e(n){var r=this;_classCallCheck(this,e),n=n||{},material_props.forEach(function(d){var m=n[d];null!=m&&(r[d]=m.texture?{texture:m.texture,mapping:m.mapping||"spheremap",scale:GLSL.expandVec3(null!=m.scale?m.scale:1),amount:GLSL.expandVec4(null!=m.amount?m.amount:1)}:"number"==typeof m||Array.isArray(m)?{amount:GLSL.expandVec4(m)}:"string"==typeof m?{amount:StyleParser.parseColor(m)}:m)}),this.specular&&(this.specular.shininess=n.shininess?parseFloat(n.shininess):.2),null!=n.normal&&(this.normal={texture:n.normal.texture,mapping:n.normal.mapping||"triplanar",scale:GLSL.expandVec3(null!=n.normal.scale?n.normal.scale:1),amount:null!=n.normal.amount?n.normal.amount:1})}return _createClass(e,[{key:"inject",value:function(n){var r=this;material_props.forEach(function(d){var m="TANGRAM_MATERIAL_".concat(d.toUpperCase()),g=m+"_TEXTURE";n.defines[m]=null!=r[d],r[d]&&r[d].texture&&(n.defines[g]=!0,n.defines[g+"_"+r[d].mapping.toUpperCase()]=!0,n.defines["TANGRAM_MATERIAL_TEXTURE_".concat(r[d].mapping.toUpperCase())]=!0,n.texcoords=n.texcoords||"uv"===r[d].mapping)}),this.normal&&this.normal.texture&&(n.defines.TANGRAM_MATERIAL_NORMAL_TEXTURE=!0,n.defines["TANGRAM_MATERIAL_NORMAL_TEXTURE_"+this.normal.mapping.toUpperCase()]=!0,n.defines["TANGRAM_MATERIAL_TEXTURE_".concat(this.normal.mapping.toUpperCase())]=!0,n.texcoords=n.texcoords||"uv"===this.normal.mapping),n.replaceShaderBlock(e.block,shaderSrc_material,"Material"),n.addShaderBlock("setup","\nmaterial = u_material;\n","Material")}},{key:"setupProgram",value:function(n){var r=this;material_props.forEach(function(d){r[d]&&(r[d].texture?(n.setTextureUniform("u_material_".concat(d,"_texture"),r[d].texture),n.uniform("3fv","u_material.".concat(d,"Scale"),r[d].scale),n.uniform("4fv","u_material.".concat(d),r[d].amount)):r[d].amount&&n.uniform("4fv","u_material.".concat(d),r[d].amount))}),this.specular&&n.uniform("1f","u_material.shininess",this.specular.shininess),this.normal&&this.normal.texture&&(n.setTextureUniform("u_material_normal_texture",this.normal.texture),n.uniform("3fv","u_material.normalScale",this.normal.scale),n.uniform("1f","u_material.normalAmount",this.normal.amount))}}],[{key:"isValid",value:function(n){return null!=n&&(null!=n.emission||null!=n.ambient||null!=n.diffuse||null!=n.specular)}}]),e}(),Vector;Material.block="material";var Vector$1=Vector={};Vector.copy=function(e){for(var n=[],r=e.length,d=0;d<r;d++)n[d]=e[d];return n},Vector.neg=function(e){for(var n=[],r=e.length,d=0;d<r;d++)n[d]=-e[d];return n},Vector.add=function(e,n){for(var r=[],d=Math.min(e.length,n.length),m=0;m<d;m++)r[m]=e[m]+n[m];return r},Vector.sub=function(e,n){for(var r=[],d=Math.min(e.length,n.length),m=0;m<d;m++)r[m]=e[m]-n[m];return r},Vector.signed_area=function(e,n,r){return(n[0]-e[0])*(r[1]-e[1])-(r[0]-e[0])*(n[1]-e[1])},Vector.mult=function(e,n){var r,d=[],m=e.length;if("number"==typeof n)for(r=0;r<m;r++)d[r]=e[r]*n;else for(m=Math.min(e.length,n.length),r=0;r<m;r++)d[r]=e[r]*n[r];return d},Vector.multMatrix=function(e,n){return[e[0][0]*n[0]+e[0][1]*n[1],e[1][0]*n[0]+e[1][1]*n[1]]},Vector.div=function(e,n){var r=[];if("number"==typeof n)for(m=0;m<e.length;m++)r[m]=e[m]/n;else for(var d=Math.min(e.length,n.length),m=0;m<d;m++)r[m]=e[m]/n[m];return r},Vector.perp=function(e,n){return[n[1]-e[1],e[0]-n[0]]},Vector.rot=function(e,n){var r=Math.cos(n),d=Math.sin(n);return[e[0]*r-e[1]*d,e[0]*d+e[1]*r]},Vector.angle=function(e){var n=_slicedToArray(e,2);return Math.atan2(n[1],n[0])},Vector.angleBetween=function(e,n){var r=Vector.dot(Vector.normalize(Vector.copy(e)),Vector.normalize(Vector.copy(n)));return 1<r&&(r=1),Math.acos(r)},Vector.signedAngleBetween=function(e,n){return Math.atan2(e[0]*n[1]-e[1]*n[0],e[0]*n[0]+e[1]*n[1])},Vector.isEqual=function(e,n){for(var r=e.length,d=0;d<r;d++)if(e[d]!==n[d])return!1;return!0},Vector.lengthSq=function(e){return 2===e.length?e[0]*e[0]+e[1]*e[1]:3<=e.length?e[0]*e[0]+e[1]*e[1]+e[2]*e[2]:0},Vector.length=function(e){return Math.sqrt(Vector.lengthSq(e))},Vector.normalize=function(e){var n;if(2===e.length){if(1==(n=e[0]*e[0]+e[1]*e[1]))return e;0!==(n=Math.sqrt(n))?(e[0]/=n,e[1]/=n):(e[0]=0,e[1]=0)}else if(3<=e.length){if(1==(n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2]))return e;0!==(n=Math.sqrt(n))?(e[0]/=n,e[1]/=n,e[2]/=n):(e[0]=0,e[1]=0,e[2]=0)}return e},Vector.cross=function(e,n){return 2===e.length?e[0]*n[1]-e[1]*n[0]:3===e.length?[e[1]*n[2]-e[2]*n[1],e[2]*n[0]-e[0]*n[2],e[0]*n[1]-e[1]*n[0]]:void 0},Vector.dot=function(e,n){for(var r=0,d=Math.min(e.length,n.length),m=0;m<d;m++)r+=e[m]*n[m];return r};var shaderSrc_ambientLight="/*Expected globals:light_accumulator_**/struct AmbientLight{vec3 ambient;};void calculateLight(in AmbientLight _light,in vec3 _eyeToPoint,in vec3 _normal){light_accumulator_ambient.rgb+=_light.ambient;}",shaderSrc_directionalLight="/*Expected globals:materiallight_accumulator_**/struct DirectionalLight{vec3 ambient;vec3 diffuse;vec3 specular;vec3 direction;};void calculateLight(in DirectionalLight _light,in vec3 _eyeToPoint,in vec3 _normal){light_accumulator_ambient.rgb+=_light.ambient;float nDotVP=clamp(dot(_normal,-_light.direction),0.0,1.0);\n#ifdef TANGRAM_MATERIAL_DIFFUSE\nlight_accumulator_diffuse.rgb+=_light.diffuse*nDotVP;\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR\nfloat pf=0.0;if(nDotVP>0.0){vec3 reflectVector=reflect(_light.direction,_normal);float eyeDotR=max(dot(normalize(_eyeToPoint),reflectVector),0.0);pf=pow(eyeDotR,material.shininess);}light_accumulator_specular.rgb+=_light.specular*pf;\n#endif\n}",shaderSrc_pointLight="/*Expected globals:materiallight_accumulator_**/struct PointLight{vec3 ambient;vec3 diffuse;vec3 specular;vec4 position;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\nfloat attenuationExponent;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nfloat innerRadius;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat outerRadius;\n#endif\n};void calculateLight(in PointLight _light,in vec3 _eyeToPoint,in vec3 _normal){float dist=length(_light.position.xyz-_eyeToPoint);vec3 VP=(_light.position.xyz-_eyeToPoint)/dist;float nDotVP=clamp(dot(VP,_normal),0.0,1.0);float attenuation=1.0;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\nfloat Rin=1.0;float e=_light.attenuationExponent;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nRin=_light.innerRadius;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-(pow(d,e));\n#else\nfloat d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/(pow(d,e)),0.0,1.0);\n#endif\n#else\nfloat Rin=0.0;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nRin=_light.innerRadius;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-d*d;\n#else\nfloat d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/d,0.0,1.0);\n#endif\n#else\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat d=clamp(dist/_light.outerRadius,0.0,1.0);attenuation=1.0-d*d;\n#else\nattenuation=1.0;\n#endif\n#endif\n#endif\nlight_accumulator_ambient.rgb+=_light.ambient*attenuation;\n#ifdef TANGRAM_MATERIAL_DIFFUSE\nlight_accumulator_diffuse.rgb+=_light.diffuse*nDotVP*attenuation;\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR\nfloat pf=0.0;if(nDotVP>0.0){vec3 reflectVector=reflect(-VP,_normal);float eyeDotR=max(0.0,dot(-normalize(_eyeToPoint),reflectVector));pf=pow(eyeDotR,material.shininess);}light_accumulator_specular.rgb+=_light.specular*pf*attenuation;\n#endif\n}",shaderSrc_spotLight="/*Expected globals:materiallight_accumulator_**/struct SpotLight{vec3 ambient;vec3 diffuse;vec3 specular;vec4 position;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\nfloat attenuationExponent;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nfloat innerRadius;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat outerRadius;\n#endif\nvec3 direction;float spotCosCutoff;float spotExponent;};void calculateLight(in SpotLight _light,in vec3 _eyeToPoint,in vec3 _normal){float dist=length(_light.position.xyz-_eyeToPoint);vec3 VP=(_light.position.xyz-_eyeToPoint)/dist;float nDotVP=clamp(dot(_normal,VP),0.0,1.0);float attenuation=1.0;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\nfloat Rin=1.0;float e=_light.attenuationExponent;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nRin=_light.innerRadius;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-(pow(d,e));\n#else\nfloat d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/(pow(d,e)),0.0,1.0);\n#endif\n#else\nfloat Rin=0.0;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nRin=_light.innerRadius;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-d*d;\n#else\nfloat d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/d,0.0,1.0);\n#endif\n#else\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat d=clamp(dist/_light.outerRadius,0.0,1.0);attenuation=1.0-d*d;\n#else\nattenuation=1.0;\n#endif\n#endif\n#endif\nfloat spotAttenuation=0.0;float spotDot=clamp(dot(-VP,_light.direction),0.0,1.0);if(spotDot>=_light.spotCosCutoff){spotAttenuation=pow(spotDot,_light.spotExponent);}light_accumulator_ambient.rgb+=_light.ambient*attenuation*spotAttenuation;\n#ifdef TANGRAM_MATERIAL_DIFFUSE\nlight_accumulator_diffuse.rgb+=_light.diffuse*nDotVP*attenuation*spotAttenuation;\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR\nfloat pf=0.0;if(nDotVP>0.0){vec3 reflectVector=reflect(-VP,_normal);float eyeDotR=max(dot(-normalize(_eyeToPoint),reflectVector),0.0);pf=pow(eyeDotR,material.shininess);}light_accumulator_specular.rgb+=_light.specular*pf*attenuation*spotAttenuation;\n#endif\n}",Light=function(){function e(n,r){_classCallCheck(this,e),this.name=r.name,this.view=n,this.ambient=null==r.ambient||"number"==typeof r.ambient?GLSL.expandVec3(r.ambient||0):StyleParser.parseColor(r.ambient).slice(0,3),this.diffuse=null==r.diffuse||"number"==typeof r.diffuse?GLSL.expandVec3(null!=r.diffuse?r.diffuse:1):StyleParser.parseColor(r.diffuse).slice(0,3),this.specular=null==r.specular||"number"==typeof r.specular?GLSL.expandVec3(r.specular||0):StyleParser.parseColor(r.specular).slice(0,3)}return _createClass(e,[{key:"inject",value:function(){var n="\n            uniform ".concat(this.struct_name," u_").concat(this.name,";\n            ").concat(this.struct_name," ").concat(this.name,";\n            "),r="\n            ".concat(this.name," = u_").concat(this.name,";\n\n        ");ShaderProgram.addBlock(e.block,n),ShaderProgram.addBlock("setup",r)}},{key:"update",value:function(){}},{key:"setupProgram",value:function(n){n.uniform("3fv","u_".concat(this.name,".ambient"),this.ambient),n.uniform("3fv","u_".concat(this.name,".diffuse"),this.diffuse),n.uniform("3fv","u_".concat(this.name,".specular"),this.specular)}}],[{key:"create",value:function(n,r){if(e.types[r.type])return new e.types[r.type](n,r)}},{key:"setMode",value:function(n,r){!0===n&&(n="fragment"),r.defines.TANGRAM_LIGHTING_FRAGMENT="fragment"===(n=e.enabled&&(n??"fragment")),r.defines.TANGRAM_LIGHTING_VERTEX="vertex"===n}},{key:"inject",value:function(n){if(ShaderProgram.removeBlock(e.block),e.enabled){var r="";if(n&&0<Object.keys(n).length){var d={};for(var m in n)d[n[m].type]=!0;for(var g in d)e.types[g].inject();for(var v in n)n[v].inject(),r+="calculateLight(".concat(v,", _eyeToPoint, _normal);\n")}var w="\n            vec4 calculateLighting(in vec3 _eyeToPoint, in vec3 _normal, in vec4 _color) {\n\n                // Do initial material calculations over normal, emission, ambient, diffuse and specular values\n                calculateMaterial(_eyeToPoint,_normal);\n\n                // Un roll the loop of individual ligths to calculate\n                ".concat(r,"\n\n                //  Final light intensity calculation\n                vec4 color = vec4(vec3(0.), _color.a); // start with vertex color alpha\n\n                #ifdef TANGRAM_MATERIAL_EMISSION\n                    color.rgb = material.emission.rgb;\n                    color.a *= material.emission.a;\n                #endif\n\n                #ifdef TANGRAM_MATERIAL_AMBIENT\n                    color.rgb += light_accumulator_ambient.rgb * _color.rgb * material.ambient.rgb;\n                    color.a *= material.ambient.a;\n                #else\n                    #ifdef TANGRAM_MATERIAL_DIFFUSE\n                        color.rgb += light_accumulator_ambient.rgb * _color.rgb * material.diffuse.rgb;\n                    #endif\n                #endif\n\n                #ifdef TANGRAM_MATERIAL_DIFFUSE\n                    color.rgb += light_accumulator_diffuse.rgb * _color.rgb * material.diffuse.rgb;\n                    color.a *= material.diffuse.a;\n                #endif\n\n                #ifdef TANGRAM_MATERIAL_SPECULAR\n                    color.rgb += light_accumulator_specular.rgb * material.specular.rgb;\n                    color.a *= material.specular.a;\n                #endif\n\n                // Clamp final color\n                color = clamp(color, 0.0, 1.0);\n\n                return color;\n            }");ShaderProgram.addBlock(e.block,w)}}}]),e}();Light.types={},Light.block="lighting",Light.enabled=!0;var AmbientLight=function(){_inherits(n,Light);var e=_createSuper(n);function n(r,d){var m;return _classCallCheck(this,n),(m=e.call(this,r,d)).type="ambient",m.struct_name="AmbientLight",m}return _createClass(n,[{key:"setupProgram",value:function(r){r.uniform("3fv","u_".concat(this.name,".ambient"),this.ambient)}}],[{key:"inject",value:function(){ShaderProgram.addBlock(Light.block,shaderSrc_ambientLight)}}]),n}();Light.types.ambient=AmbientLight;var DirectionalLight=function(){_inherits(n,Light);var e=_createSuper(n);function n(r,d){var m,g;return _classCallCheck(this,n),(m=e.call(this,r,d)).type="directional",m.struct_name="DirectionalLight",d.direction?m._direction=d.direction:(g=Math.sin(60*Math.PI/180),m._direction=[Math.cos(135*Math.PI/180)*g,Math.sin(135*Math.PI/180)*g,-.5]),null==d.ambient&&(m.ambient=GLSL.expandVec3(.5)),m.direction=m._direction.map(parseFloat),m._initial_direction=[m.direction[0],m.direction[1],m.direction[2]],m}return _createClass(n,[{key:"update",value:function(){vec3.transformMat4(this.direction,this._initial_direction,this.view.lookAtManipulator.getTransformationMatrix())}},{key:"setupProgram",value:function(r){_get(_getPrototypeOf(n.prototype),"setupProgram",this).call(this,r),r.uniform("3fv","u_".concat(this.name,".direction"),this.direction)}},{key:"direction",get:function(){return this._direction},set:function(r){this._direction=Vector$1.normalize(Vector$1.copy(r))}}],[{key:"inject",value:function(){ShaderProgram.addBlock(Light.block,shaderSrc_directionalLight)}}]),n}();Light.types.directional=DirectionalLight;var PointLight=function(){_inherits(n,Light);var e=_createSuper(n);function n(r,d){var m;return _classCallCheck(this,n),(m=e.call(this,r,d)).type="point",m.struct_name="PointLight",m.position=d.position||[0,0,"100px"],m.position_eye=[],m.origin=d.origin||"ground",m.attenuation=isNaN(parseFloat(d.attenuation))?0:parseFloat(d.attenuation),m.radius=d.radius?Array.isArray(d.radius)&&2===d.radius.length?d.radius:[null,d.radius]:null,m}return _createClass(n,[{key:"inject",value:function(){_get(_getPrototypeOf(n.prototype),"inject",this).call(this),ShaderProgram.defines.TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT=0!==this.attenuation,ShaderProgram.defines.TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS=null!=this.radius&&null!=this.radius[0],ShaderProgram.defines.TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS=null!=this.radius}},{key:"update",value:function(){var r,d,m,g=this.view.lookAtManipulator.getLookAtData().zoom;"world"===this.origin?(d=(r=_slicedToArray(Geo$1.latLngToMeters(this.position),2))[0],m=r[1],this.position_eye[0]=d-this.view.lookAtManipulator.getLookAtData().position[0],this.position_eye[1]=m-this.view.lookAtManipulator.getLookAtData().position[1],this.position_eye[2]=StyleParser.convertUnits(this.position[2],{zoom:g,meters_per_pixel:Geo$1.metersPerPixel(g)}),this.position_eye[2]=this.position_eye[2]-this.view.lookAtManipulator.getLookAtData().distance):"ground"!==this.origin&&"camera"!==this.origin||(this.position_eye=StyleParser.convertUnits(this.position,{zoom:g,meters_per_pixel:Geo$1.metersPerPixel(g)}),"ground"===this.origin&&(this.position_eye[2]=this.position_eye[2]-this.view.lookAtManipulator.getLookAtData().distance)),this.position_eye[3]=1}},{key:"setupProgram",value:function(r){_get(_getPrototypeOf(n.prototype),"setupProgram",this).call(this,r),r.uniform("4fv","u_".concat(this.name,".position"),this.position_eye),ShaderProgram.defines.TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT&&r.uniform("1f","u_".concat(this.name,".attenuationExponent"),this.attenuation);var d=this.view.lookAtManipulator.getLookAtData().zoom;ShaderProgram.defines.TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS&&r.uniform("1f","u_".concat(this.name,".innerRadius"),StyleParser.convertUnits(this.radius[0],{zoom:d,meters_per_pixel:Geo$1.metersPerPixel(d)})),ShaderProgram.defines.TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS&&r.uniform("1f","u_".concat(this.name,".outerRadius"),StyleParser.convertUnits(this.radius[1],{zoom:d,meters_per_pixel:Geo$1.metersPerPixel(d)}))}}],[{key:"inject",value:function(){ShaderProgram.addBlock(Light.block,shaderSrc_pointLight)}}]),n}();Light.types.point=PointLight;var SpotLight=function(){_inherits(n,PointLight);var e=_createSuper(n);function n(r,d){var m;return _classCallCheck(this,n),(m=e.call(this,r,d)).type="spotlight",m.struct_name="SpotLight",m.direction=m._direction=(d.direction||[0,0,-1]).map(parseFloat),m._initial_direction=[m.direction[0],m.direction[1],m.direction[2]],m.exponent=d.exponent?parseFloat(d.exponent):.2,m.angle=d.angle?parseFloat(d.angle):20,m}return _createClass(n,[{key:"setupProgram",value:function(r){_get(_getPrototypeOf(n.prototype),"setupProgram",this).call(this,r),r.uniform("3fv","u_".concat(this.name,".direction"),this.direction),r.uniform("1f","u_".concat(this.name,".spotCosCutoff"),Math.cos(3.14159*this.angle/180)),r.uniform("1f","u_".concat(this.name,".spotExponent"),this.exponent)}},{key:"update",value:function(){_get(_getPrototypeOf(n.prototype),"update",this).call(this),vec3.transformMat4(this.direction,this._initial_direction,this.view.lookAtManipulator.getTransformationMatrix())}},{key:"direction",get:function(){return this._direction},set:function(r){this._direction=Vector$1.normalize(Vector$1.copy(r))}}],[{key:"inject",value:function(){ShaderProgram.addBlock(Light.block,shaderSrc_spotLight)}}]),n}();function mergeObjects(e){for(var n=0;n<(arguments.length<=1?0:arguments.length-1);n++){var r=n+1<1||arguments.length<=n+1?void 0:arguments[n+1];if(r)for(var d in r){var m=r[d];null===m||"object"!==_typeof(m)||Array.isArray(m)?void 0!==m&&(e[d]=m):e[d]=null===e[d]||"object"!==_typeof(e[d])||Array.isArray(e[d])?mergeObjects({},m):mergeObjects(e[d],m)}}return e}Light.types.spotlight=SpotLight;var shaderSrc_selectionFragment="\n#ifdef TANGRAM_FEATURE_SELECTION\nvarying vec4 v_selection_color;\n#endif\nvoid main(void){\n#ifdef TANGRAM_FEATURE_SELECTION\ngl_FragColor=v_selection_color;\n#else\ngl_FragColor=vec4(0.,0.,0.,1.);\n#endif\n}",shaderSrc_selectionCropFragment="\n#pragma tangram: utils\n#ifdef TANGRAM_FEATURE_SELECTION\nuniform float u_meters_per_pixel;varying vec4 v_selection_color;varying vec4 v_local_space_position;\n#endif\nvoid main(void){\n#ifdef TANGRAM_FEATURE_SELECTION\nif(isLocalSpacePixelOutsideTile(v_local_space_position,TANGRAM_TILE_SCALE.x)){discard;}else{gl_FragColor=v_selection_color;}\n#else\ngl_FragColor=vec4(0.,0.,0.,1.);\n#endif\n}",shaderSrc_rasters="#ifdef TANGRAM_FRAGMENT_SHADER\nuniform sampler2D u_raster;uniform vec3 u_raster_offset;\n#define sampleRaster() (texture2D(u_raster, v_modelpos_base_zoom.xy * u_raster_offset.z + u_raster_offset.xy))\n#endif\n",Style={init:function(e){var n=0<arguments.length&&void 0!==e?e:{},r=n.generation,d=n.styles,m=n.sources,g=void 0===m?{}:m,v=n.introspection,w=n.id,k=void 0!==w?w+"/":"";this.scene_id=w,this.textureManager=getTextureManager(w),this.main_thread_target="".concat(k,"Style/").concat(this.name),this.setGeneration(r),this.styles=d,this.sources=g,this.defines=this.hasOwnProperty("defines")&&this.defines||{},this.shaders=this.hasOwnProperty("shaders")&&this.shaders||{},this.introspection=v||!1,this.selection=this.selection||this.introspection||!1,this.compile_setup=!1,this.program=null,this.selection_program=null,this.feature_style={},this.vertex_template=[],this.tile_data={},this.defines.TANGRAM_WORLD_POSITION_WRAP=1e5,this.blend=this.blend||"opaque",this.defines["TANGRAM_BLEND_".concat(this.blend.toUpperCase())]=!0,null==this.blend_order&&(this.blend_order=-1),this.removeShaderBlock("setup"),this.material instanceof Material||(Material.isValid(this.material)||(this.material=StyleParser.defaults.material),this.material=new Material(this.material)),this.material.inject(this),Light.setMode(this.lighting,this),this.setupRasters(),this.initialized=!0},destroy:function(){this.program&&(this.program.destroy(),this.program=null),this.selection_program&&(this.selection_program.destroy(),this.selection_program=null),WorkerBroker.removeTarget(this.main_thread_target),this.gl=null,this.initialized=!1},reset:function(){},baseStyle:function(){return this.base||this.name},setGeneration:function(e){this.generation=e,Thread.is_main&&WorkerBroker.addTarget(this.main_thread_target,this)},fillVertexTemplate:function(e,n,r,d){var m=d.size,g=void 0===(g=d.offset)?0:g,v=e.index[n];if(void 0!==v)for(var w=0;w<m;++w)this.vertex_template[v+w+g]=r.length>w?r[w]:r;else log("warn","Style: in style '".concat(this.name,"', no index found in vertex layout for attribute '").concat(n,"'"))},startData:function(e){this.tile_data[e.id]=this.tile_data[e.id]||{meshes:{},uniforms:{},textures:[]}},endData:function(e){var n=this.tile_data[e.id];if(this.tile_data[e.id]=null,n&&0<Object.keys(n.meshes).length){for(var r in n.meshes){var d=n.meshes[r];0!==d.vertex_data.vertex_count?(d.vertex_data.end(),d.vertex_elements=d.vertex_data.element_buffer,d.vertex_data=d.vertex_data.vertex_buffer):delete n.meshes[r]}return e.mesh_data[this.name]=n,this.buildRasterTextures(e,n).then(function(m){return m})}return Promise.resolve(null)},hasDataForTile:function(e){return null!=this.tile_data[e.id]},getTileMesh:function(e,n){var r=this.tile_data[e.id].meshes;return null==r[n.key]&&(r[n.key]={variant:n,vertex_data:this.vertexLayoutForMeshVariant(n).createVertexData()}),r[n.key]},vertexLayoutForMeshVariant:function(){return this.vertex_layout},default_mesh_variant:{key:0},style_mesh_variants:{default:{variants:{0:{variant:{key:0},times_unref:0}}}},addMeshVariantForDraw:function(e,n){this.style_mesh_variants[e]||(this.style_mesh_variants[e]={variants:{}});var r=this.computeVariantForDraw(n);return this.style_mesh_variants[e].variants[r.key]={variant:r,times_unref:0},this.style_mesh_variants[e].variants[r.key].variant},getMeshVariantTypeForDraw:function(e){return this.getMeshVariantType(this.base,e)},getMeshVariantType:function(e,n){void 0===e&&(e="default");var r=this.style_mesh_variants[e];if(void 0===n.variantKey||!r||!r.variants[n.variantKey])return this.addMeshVariantForDraw(e,n);var m=r.variants[n.variantKey];return m.times_unref=0,m.variant},updateMeshVariantTypeCache:function(e){for(var n in this.style_mesh_variants){var r=this.style_mesh_variants[n].variants;for(var d in r){var m=r[d];m.times_unref++,m.times_unref>e&&("default"!==n||0!=+d)&&(delete r[d],0===Object.keys(r).length&&delete this.style_mesh_variants[n])}}},computeVariantForDraw:function(){return this.default_mesh_variant},addFeature:function(e,n,r){var d=r.tile;this.tile_data[d.id]||this.startData(d);var m,g,v,w,k=this.parseFeature(e,n,r);k&&(m=this.getMeshVariantTypeForDraw("lines"===this.base?n:k),v=(g=this.getTileMesh(d,m)).vertex_data.offset,w=g.vertex_data.vertex_count,0<this.buildGeometry(e.geometry,k,g,r)?e.generation=this.generation:g.vertex_data.vertex_count>w&&(g.vertex_data.vertex_buffer.fill(0,v,g.vertex_data.offset),g.vertex_data.vertex_count=w,g.vertex_data.offset=v))},buildGeometry:function(e,n,r,d){var m;return"Polygon"===e.type?m=this.buildPolygons([e.coordinates],n,r,d):"MultiPolygon"===e.type?m=this.buildPolygons(e.coordinates,n,r,d):"LineString"===e.type?m=this.buildLines([e.coordinates],n,r,d):"MultiLineString"===e.type?m=this.buildLines(e.coordinates,n,r,d):"Point"===e.type?m=this.buildPoints([e.coordinates],n,r,d):"MultiPoint"===e.type&&(m=this.buildPoints(e.coordinates,n,r,d)),m},parseFeature:function(e,n,r){try{var d,m,g,v=this.feature_style;if(v.order=this.parseOrder(n.order,r),null==v.order&&"overlay"!==this.blend){var w="Layer '".concat(n.layers.join(", "),"', draw group '").concat(n.group,"': ");return w+="'order' parameter is required unless blend mode is 'overlay'",null!=n.order&&(w+="; 'order' was set to a dynamic value (e.g. string tied to feature property, ",w+="or JS function), but evaluated to null for one or more features"),void log({level:"warn",once:!0},w)}return(v=this._parseFeature(e,n,r))?(v.interactive=!!this.selection&&StyleParser.evalProperty(this.introspection||n.interactive,r),!0===v.interactive?(m=(d=FeatureSelection.makeEntry()).color,g=d.key,v.selection_color=m,r.tile.selection_data||(r.tile.selection_data={}),r.tile.selection_data[g]={id:e.id||g,properties:e.properties,source_name:r.source,source_layer:r.layer,layers:r.layers}):v.selection_color=FeatureSelection.defaultColor,v):void 0}catch(k){log("error","Style.parseFeature: style parsing error",e,v,k.stack)}},_parseFeature:function(){return this.feature_style},preprocess:function(e,n){if(!e.preprocessed){if(this.draw)for(var r in this.draw){var d=this.draw[r];"object"!==_typeof(d)||Array.isArray(d)?null==e[r]&&(e[r]=d):e[r]=mergeObjects({},d,e[r])}if(!(e=this._preprocess(e,n||"")))return;e.preprocessed=!0}return e},_preprocess:function(e){return e},parseOrder:function(e,n){return"number"!=typeof e?StyleParser.calculateOrder(e,n):e},scaleOrder:function(e){return 2*e},parseColor:function(e,n){return e?StyleParser.evalCachedColorProperty(e,n):this.shaders.blocks.color||this.shaders.blocks.filter?StyleParser.defaults.color:void 0},buildPolygons:function(){return 0},buildLines:function(){return 0},buildPoints:function(){return 0},setGL:function(e){this.gl=e,this.max_texture_size=this.textureManager.getMaxTextureSize(this.gl)},makeMesh:function(e,n,r){var d=2<arguments.length&&void 0!==r?r:{},m=this.vertexLayoutForMeshVariant(d.variant);return new VBOMesh(this.gl,e,n,m,this.scene_id,d)},render:function(e){return e.render()},getProgram:function(e){var n=0<arguments.length&&void 0!==e?e:"program";this.compileSetup();var r=this[n];if(r&&!r.error){if(!r.compiled)try{r.compile()}catch(d){log("error","Style: error compiling program for style '".concat(this.name,"' (program key '").concat(n,"')"),this,d.stack)}return r}},compileSetup:function(){if(!this.compile_setup){if(!this.gl)throw new Error("style.compile(): skipping for ".concat(this.name," because no GL context"));var e,n=this.buildDefineList();this.selection&&((e=Object.assign({},n)).TANGRAM_FEATURE_SELECTION=!0);var r=this.shaders&&this.shaders.blocks,d=this.shaders&&this.shaders.block_scopes,m=Object.assign({},this.shaders&&this.shaders.uniforms);for(var g in m)null==m[g]&&log({level:"warn",once:!0},"Style '".concat(this.name,"' has invalid uniform '").concat(g,"': uniform values must be non-null"));var v=this.shaders&&this.shaders.extensions;"string"==typeof v&&(v=[v]),this.program=new ShaderProgram(this.gl,this.vertex_shader_src,this.fragment_shader_src,this.scene_id,{name:this.name,defines:n,uniforms:m,blocks:r,block_scopes:d,extensions:v}),this.selection_program=this.selection?new ShaderProgram(this.gl,this.vertex_shader_src,this.crop_by_tile?shaderSrc_selectionCropFragment:shaderSrc_selectionFragment,this.scene_id,{name:this.name+" (selection)",defines:e,uniforms:m,blocks:r,block_scopes:d,extensions:v}):null,this.compile_setup=!0}},addShaderBlock:function(e,n,r){var d=2<arguments.length&&void 0!==r?r:null;this.shaders.blocks=this.shaders.blocks||{},this.shaders.blocks[e]=this.shaders.blocks[e]||[],this.shaders.blocks[e].push(n),this.shaders.block_scopes=this.shaders.block_scopes||{},this.shaders.block_scopes[e]=this.shaders.block_scopes[e]||[],this.shaders.block_scopes[e].push(d)},removeShaderBlock:function(e){this.shaders.blocks&&(this.shaders.blocks[e]=null)},replaceShaderBlock:function(e,n,r){var d=2<arguments.length&&void 0!==r?r:null;this.removeShaderBlock(e),this.addShaderBlock(e,n,d)},buildDefineList:function(){var e={};if(null!=this.defines)for(var n in this.defines)e[n]=this.defines[n];if(null!=this.shaders&&null!=this.shaders.defines)for(n in this.shaders.defines)e[n]=this.shaders.defines[n];return e},hasRasters:function(){return-1<["color","normal","custom"].indexOf(this.raster)},setupRasters:function(){if(!Thread.is_main||!this.hasRasters())return!1;"color"===this.raster?this.defines.TANGRAM_RASTER_TEXTURE_COLOR=!0:"normal"===this.raster&&(this.defines.TANGRAM_RASTER_TEXTURE_NORMAL=!0);var e=!1;for(var n in this.sources)if(this.sources[n]instanceof RasterTileSource){e=!0;break}return!!e&&(this.defines.TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING=!0,this.replaceShaderBlock("raster",shaderSrc_rasters,"Raster"),!0)},buildRasterTextures:function(e,n){var r=this;if(!this.hasRasters())return Promise.resolve(n);var d={};return e.rasters.map(function(m){return r.sources[m]}).filter(function(m){return m}).forEach(function(m,g){var v;m instanceof RasterTileSource&&(v=m.tileTexture(e),d[v.url]=v)}),0===Object.keys(d).length?Promise.resolve(n):WorkerBroker.postMessage(this.main_thread_target+".loadTextures",d).then(function(m){if(!m||m.length<1)return log("trace","Missing texture info for tile ".concat(e.key)),null;if(m.some(function(j){return!j.loaded}))return null;n.uniforms=n.uniforms||{},n.textures=n.textures||[];var v,w=m[0].name,k=d[w].coords;return n.uniforms.u_raster=w,n.textures.push(w),e.coords.z>k.z?(v=Math.pow(2,e.coords.z-k.z),n.uniforms.u_raster_offset=[(e.coords.x%v+v)%v/v,(v-1-e.coords.y%v)/v,1/v]):n.uniforms.u_raster_offset=[0,0,1],n})},loadTextures:function(e){var n=this;return this.textureManager.createFromObject(this.gl,e).then(function(){return Promise.all(Object.keys(e).map(function(r){return n.textureManager.textures[r]&&n.textureManager.textures[r].load()}).filter(function(r){return r}))}).then(function(r){return r.forEach(function(d){return d.retain()}),r.map(function(d){return{name:d.name,width:d.width,height:d.height,loaded:d.loaded}})})},setup:function(){this.setUniforms(),this.material.setupProgram(ShaderProgram.current)},setUniforms:function(){var e=ShaderProgram.current;e&&e.setUniforms(this.shaders&&this.shaders.uniforms,!0)},render_states:{opaque:{depth_test:!0,depth_write:!0},translucent:{depth_test:!0,depth_write:!0},add:{depth_test:!0,depth_write:!1},multiply:{depth_test:!0,depth_write:!1},inlay:{depth_test:!0,depth_write:!1},overlay:{depth_test:!1,depth_write:!1}},default_blend_orders:{opaque:0,add:1,multiply:2,inlay:3,translucent:4,overlay:5},sortByBlendOrderWithinLayers:function(e){var n=[],r={};for(var d in e.forEach(function(m){var g=parseInt(m.name,10)||0;r[g]||(r[g]=[]),r[g].push(m)}),r)n.push.apply(n,_toConsumableArray(r[d].sort(Style.blendOrderSort)));return n},blendOrderSort:function(e,n){return"opaque"===e.blend||"opaque"===n.blend?"opaque"===e.blend&&"opaque"===n.blend?e.name<n.name?-1:1:"opaque"===e.blend?-1:1:e.blend_order<n.blend_order||!(e.blend_order>n.blend_order)&&(Style.default_blend_orders[e.blend]<Style.default_blend_orders[n.blend]||!(Style.default_blend_orders[e.blend]>Style.default_blend_orders[n.blend])&&e.name<n.name)?-1:1}},id$1=0,build_id=0,Tile=function(){function e(n){var r=n.coords,d=n.style_zoom,m=n.source,g=n.worker,v=n.view,w=n.sceneId;_classCallCheck(this,e),this.textureManager=getTextureManager(w),this.id=id$1++,this.worker=g,this.view=v,this.source=m,this.generation=null,this.valid=!0,this.proxy_for=null,this.proxy_depth=0,this.proxied_as=null,this.fade_in=!0,this.loading=!1,this.loaded=!1,this.built=!1,this.labeled=!1,this.error=null,this.style_zoom=d,this.coords=e.normalizedCoordinate(r,this.source,this.style_zoom),this.key=e.key(this.coords,this.source,this.style_zoom),this.overzoom=Math.max(this.style_zoom-this.coords.z,0),this.overzoom2=Math.pow(2,this.overzoom),this.min=Geo$1.metersForTile(this.coords),this.max=Geo$1.metersForTile({x:this.coords.x+1,y:this.coords.y+1,z:this.coords.z}),this.span={x:this.max.x-this.min.x,y:this.max.y-this.min.y},this.bounds={sw:{x:this.min.x,y:this.max.y},ne:{x:this.max.x,y:this.min.y}},this.center_dist=0,this.meters_per_pixel=Geo$1.metersPerPixel(this.style_zoom),this.meters_per_pixel_sq=this.meters_per_pixel*this.meters_per_pixel,this.units_per_pixel=Geo$1.units_per_pixel/this.overzoom2,this.units_per_meter_overzoom=Geo$1.unitsPerMeter(this.coords.z)*this.overzoom2,this.meshes={},this.new_mesh_styles=[]}return _createClass(e,[{key:"freeResources",value:function(){for(var n in this.meshes)this.meshes[n].forEach(function(r){return r.destroy()});this.meshes={}}},{key:"destroy",value:function(){Task.removeForTile(this.id),this.workerMessage("self.removeTile",this.id),this.freeResources(),this.worker=null,this.valid=!1}},{key:"buildAsMessage",value:function(){return{id:this.id,key:this.key,source:this.source.name,coords:this.coords,min:this.min,max:this.max,units_per_pixel:this.units_per_pixel,meters_per_pixel:this.meters_per_pixel,meters_per_pixel_sq:this.meters_per_pixel_sq,units_per_meter_overzoom:this.units_per_meter_overzoom,style_zoom:this.style_zoom,overzoom:this.overzoom,overzoom2:this.overzoom2,generation:this.generation}}},{key:"workerMessage",value:function(){for(var n=arguments.length,r=new Array(n),d=0;d<n;d++)r[d]=arguments[d];return WorkerBroker.postMessage.apply(WorkerBroker,[this.worker].concat(r))}},{key:"build",value:function(n,r){var d=(1<arguments.length&&void 0!==r?r:{}).fade_in,m=void 0===d||d;return this.generation=n,this.fade_in=m,this.loaded||(this.loading=!0,this.built=!1,this.labeled=!1),this.workerMessage("self.buildTile",{tile:this.buildAsMessage()})}},{key:"buildMeshes",value:function(n,r){if(!this.error){this.build_id=build_id++;var d={},m=this.mesh_data;if(m)for(var g in m){for(var v in m[g].meshes){var w=m[g].meshes[v];if(w.vertex_data){if(!n[g]){log("warn","Could not create mesh because style '".concat(g,"' not found, for tile ").concat(this.key,", aborting tile"));break}var k=Object.assign({},m[g]);k.uniforms=Object.assign({},k.uniforms,w.uniforms),k.variant=w.variant,w.textures&&(k.textures=w.textures),w.labels&&(k.retain=!0);var j=n[g].makeMesh(w.vertex_data,w.vertex_elements,k);j.variant=k.variant,j.labels=w.labels,d[g]=d[g]||[],d[g].push(j),null==j.variant.order&&(j.variant.order=d[g].length-1)}}d[g]&&d[g].sort(function(_t,_r){var _s=_t.variant.order,ga=_r.variant.order;return null!=_s&&(null==ga||_s<ga)?-1:1})}for(var G in delete this.mesh_data,d)this.meshes[G]&&this.meshes[G].forEach(function(_t){return _t.destroy()}),this.meshes[G]=d[G],this.new_mesh_styles.push(G);if(r.done){for(var q in this.meshes)-1===this.new_mesh_styles.indexOf(q)&&(this.meshes[q].forEach(function(_t){return _t.destroy()}),delete this.meshes[q]);this.new_mesh_styles=[]}}}},{key:"setProxyFor",value:function(n){n?(this.proxy_for=this.proxy_for||[],this.proxy_for.push(n),this.proxy_depth=1,n.proxied_as=n.style_zoom>this.style_zoom?"child":"parent"):(this.proxy_for=null,this.proxy_depth=0)}},{key:"isProxy",value:function(){return null!=this.proxy_for}},{key:"shouldProxyForStyle",value:function(n){return!this.proxy_for||this.proxy_for.some(function(r){return null==r.meshes[n]})}},{key:"setupProgram",value:function(n,r){var d=n.model,m=n.model32;r.uniform("4fv","u_tile_origin",[this.min.x,this.min.y,this.style_zoom,this.coords.z]),r.uniform("1f","u_tile_proxy_depth",this.proxy_depth),mat4.identity(d),mat4.translate(d,d,vec3.fromValues(this.min.x,this.min.y,0)),mat4.scale(d,d,vec3.fromValues(this.span.x/Geo$1.tile_scale,-1*this.span.y/Geo$1.tile_scale,1)),mat4.copy(m,d),r.uniform("Matrix4fv","u_model",m),r.uniform("1i","u_tile_fade_in",this.fade_in&&"child"!==this.proxied_as)}},{key:"merge",value:function(n){return this.loading=n.loading,this.loaded=n.loaded,this.generation=n.generation,this.error=n.error,this.mesh_data=n.mesh_data,this.selection_data?Object.assign(this.selection_data,n.selection_data):this.selection_data=n.selection_data,this}}],[{key:"coord",value:function(n){return{x:n.x,y:n.y,z:n.z,key:e.coordKey(n)}}},{key:"coordKey",value:function(n){return n.x+"/"+n.y+"/"+n.z}},{key:"key",value:function(n,r,d){if(!(n.y<0||n.y>=1<<n.z||n.z<0))return[r.name,d,n.x,n.y,n.z].join("/")}},{key:"normalizedKey",value:function(n,r,d){return e.key(e.normalizedCoordinate(n,r,d),r,d)}},{key:"normalizedCoordinate",value:function(n,r){return r.zoom_bias&&(n=e.coordinateAtZoom(n,Math.max(0,n.z-r.zoom_bias))),e.coordinateWithMaxZoom(n,r.max_zoom)}},{key:"coordinateAtZoom",value:function(n,r){var d,m=n.x,g=n.y,v=n.z;return v!==r&&(d=Math.pow(2,v-r),m=Math.floor(m/d),g=Math.floor(g/d),v=r),e.coord({x:m,y:g,z:v})}},{key:"coordinateWithMaxZoom",value:function(n,r){var d=n.x,m=n.y,g=n.z;return void 0!==r&&r<g?e.coordinateAtZoom({x:d,y:m,z:g},r):e.coord({x:d,y:m,z:g})}},{key:"childrenForCoordinate",value:function(n){var r=n.x,d=n.y,m=n.z,g=n.key;return e.coord_children[g]||(m++,e.coord_children[g]=[e.coord({x:r*=2,y:d*=2,z:m}),e.coord({x:r+1,y:d,z:m}),e.coord({x:r,y:d+1,z:m}),e.coord({x:r+1,y:d+1,z:m})]),e.coord_children[g]}},{key:"isDescendant",value:function(n,r){if(r.z>n.z){var d=e.coordinateAtZoom(r,n.z);return n.x===d.x&&n.y===d.y}return!1}},{key:"cancel",value:function(n){n&&(n.canceled=!0,n.source_data&&n.source_data.request_id&&(Utils$1.cancelRequest(n.source_data.request_id),n.source_data.request_id=null),e.abortBuild(n))}},{key:"buildGeometry",value:function(n,r){var d=r.scene_id,m=r.layers,g=r.styles,v=r.global,w=r.sources,k=r.meshVariantMaxLife,j=n.source_data;for(var G in Collision.startTile(n.id,{apply_repeat_groups:!0}),m){var q=m[G];if(q&&q.config_data){if(q.config_data.source===n.source)for(var _t=e._getDataForSource(j,q.config_data,G),_r=0;_r<_t.length;_r++){var _s=_t[_r],ga=_s.geom;if(ga)for(var _c=0;_c<ga.features.length;_c++){var _u=ga.features[_c];if(null!=_u.geometry){var _f=StyleParser.getFeatureParseContext(_u,n,v,w);_f.winding=n.default_winding,_f.source=n.source,_f.layer=_s.layer;var _h=q.buildDrawGroups(_f,!0);if(_h)for(var ad in _h){var ey=_h[ad],sy=ey.style||ad,ly=g[sy];ly?null!=(ey=ly.preprocess(ey,n.source))&&!1!==ey.visible&&(_f.layers=ey.layers,ly.addFeature(_u,ey,_f)):log("warn","Style '".concat(sy,"' not found, skipping layer '").concat(G,"':"),ey,_u)}}}}}else log("warn","Layer ".concat(G," was defined without a geometry data source and will not be rendered."))}var dy=e._stylesForTile(n,g);e._sendStyleGroups(n,dy,{scene_id:d,meshVariantMaxLife:k},function(vy){return vy.collision?"collision":"non-collision"})}},{key:"_stylesForTile",value:function(n,r){var d=[];for(var m in r)r[m].hasDataForTile(n)&&d.push(r[m]);return d}},{key:"_sendStyleGroups",value:function(n,r,d,m){var g=d.scene_id,v=d.meshVariantMaxLife,w={};r.forEach(function(k){var j=m(k);w[j]=w[j]||[],w[j].push(k)}),0<Object.keys(w).length?function(){var k={start:!0};for(var j in n.mesh_data={},w)!function(G){Promise.all(w[G].map(function(_t){return _t.endData(n)})).then(function(){log("trace","Finished style group '".concat(G,"' for tile ").concat(n.key)),w[G]=[],Object.keys(w).every(function(_t){return 0===w[_t].length})&&(k.done=!0),WorkerBroker.postMessage("TileManager_".concat(g,".buildTileStylesCompleted"),WorkerBroker.withTransferables({tile:e.slice(n,["mesh_data","selection_data"]),progress:k})),k.start=null,n.mesh_data={},n.selection_data={},k.done&&Collision.resetTile(n.id)},function(_t){log("error","Error for style group '".concat(G,"' for tile ").concat(n.key),_t)})}(j);Style.updateMeshVariantTypeCache(v)}():(WorkerBroker.postMessage("TileManager_".concat(g,".buildTileStylesCompleted"),WorkerBroker.withTransferables({tile:e.slice(n),progress:{start:!0,done:!0}})),Collision.resetTile(n.id))}},{key:"_getDataForSource",value:function(n,r,d){var m=2<arguments.length&&void 0!==d?d:null,g=[];return null!=r&&null!=n&&null!=n.layers&&(!r.layer&&n.layers._default||"string"==typeof r.layer&&!n.layers[r.layer]&&new RegExp("^\\d+_"+r.layer+"$").test(m)&&n.layers._default?g.push({geom:n.layers._default}):!r.layer&&m?g.push({layer:m,geom:n.layers[m]}):"string"==typeof r.layer?g.push({layer:r.layer,geom:n.layers[r.layer]}):Array.isArray(r.layer)&&r.layer.forEach(function(v){n.layers[v]&&n.layers[v].features&&g.push({layer:v,geom:n.layers[v]})})),g}},{key:"abortBuild",value:function(n,r){if(Task.removeForTile(n.id),Collision.abortTile(n.id),n.mesh_data)for(var d in n.mesh_data){var m=n.mesh_data[d].textures;m&&m.forEach(function(g){var v=getTextureManager(r).textures[g];v&&(log("trace","releasing texture ".concat(g," for tile ").concat(n.key)),v.release())})}}},{key:"slice",value:function(n,r){var d=["id","key","loading","loaded","generation","error","debug"];Array.isArray(r)&&d.push.apply(d,_toConsumableArray(r));for(var m={},g=0;g<d.length;g++){var v=d[g];m[v]=n[v]}return m}}]),e}();Tile.coord_children={};var RasterTileSource=function(){_inherits(n,NetworkTileSource);var e=_createSuper(n);function n(r,d){var m;return _classCallCheck(this,n),-1===(m=e.call(this,r,d)).rasters.indexOf(m.name)&&m.rasters.unshift(m.name),m.filtering=r.filtering,m.textures={},m}return _createClass(n,[{key:"load",value:function(r){r.source_data={},r.source_data.layers={},r.pad_scale=this.pad_scale,r.rasters=_toConsumableArray(this.rasters);var d=Geo$1.tile_scale;return r.source_data.layers={_default:{type:"FeatureCollection",features:[{geometry:{type:"Polygon",coordinates:[[[0,0],[d,0],[d,-d],[0,-d],[0,0]]]},properties:{}}]}},r.default_winding="CW",Promise.resolve(r)}},{key:"tileTexture",value:function(r){var d,m,g=r.coords.key;return this.textures[g]||(d=Tile.coordinateWithMaxZoom(r.coords,this.max_zoom),m=this.formatUrl(this.url,{coords:d}),this.textures[g]={url:m,filtering:this.filtering,coords:d}),this.textures[g]}}]),n}(),ArrayUtils;DataSource.register(RasterTileSource,"Raster");var ArrayUtils$1=ArrayUtils={};function simplify(e,n,r,d){for(var m,g=d,v=r-n>>1,w=r-n,k=e[n],j=e[n+1],G=e[r],q=e[r+1],_t=n+3;_t<r;_t+=3){var _r,_s=getSqSegDist(e[_t],e[_t+1],k,j,G,q);g<_s?(m=_t,g=_s):_s!==g||(_r=Math.abs(_t-v))<w&&(m=_t,w=_r)}d<g&&(3<m-n&&simplify(e,n,m,d),e[m+2]=g,3<r-m&&simplify(e,m,r,d))}function getSqSegDist(e,n,r,d,m,g){var v,w=m-r,k=g-d;return 0===w&&0===k||(1<(v=((e-r)*w+(n-d)*k)/(w*w+k*k))?(r=m,d=g):0<v&&(r+=w*v,d+=k*v)),(w=e-r)*w+(k=n-d)*k}function createFeature(e,n,r,d){var m={id:void 0===e?null:e,type:n,geometry:r,tags:d,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return calcBBox(m),m}function calcBBox(e){var n=e.geometry,r=e.type;if("Point"===r||"MultiPoint"===r||"LineString"===r)calcLineBBox(e,n);else if("Polygon"===r||"MultiLineString"===r)for(var d=0;d<n.length;d++)calcLineBBox(e,n[d]);else if("MultiPolygon"===r)for(d=0;d<n.length;d++)for(var m=0;m<n[d].length;m++)calcLineBBox(e,n[d][m])}function calcLineBBox(e,n){for(var r=0;r<n.length;r+=3)e.minX=Math.min(e.minX,n[r]),e.minY=Math.min(e.minY,n[r+1]),e.maxX=Math.max(e.maxX,n[r]),e.maxY=Math.max(e.maxY,n[r+1])}function convert(e,n){var r=[];if("FeatureCollection"===e.type)for(var d=0;d<e.features.length;d++)convertFeature(r,e.features[d],n,d);else convertFeature(r,"Feature"===e.type?e:{geometry:e},n);return r}function convertFeature(e,n,r,d){if(n.geometry){var m=n.geometry.coordinates,g=n.geometry.type,v=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2),w=[],k=n.id;if(r.promoteId?k=n.properties[r.promoteId]:r.generateId&&(k=d||0),"Point"===g)convertPoint(m,w);else if("MultiPoint"===g)for(var j=0;j<m.length;j++)convertPoint(m[j],w);else if("LineString"===g)convertLine(m,w,v,!1);else if("MultiLineString"===g){if(r.lineMetrics){for(j=0;j<m.length;j++)convertLine(m[j],w=[],v,!1),e.push(createFeature(k,"LineString",w,n.properties));return}convertLines(m,w,v,!1)}else if("Polygon"===g)convertLines(m,w,v,!0);else{if("MultiPolygon"!==g){if("GeometryCollection"!==g)throw new Error("Input data is not a valid GeoJSON object.");for(j=0;j<n.geometry.geometries.length;j++)convertFeature(e,{id:k,geometry:n.geometry.geometries[j],properties:n.properties},r,d);return}for(j=0;j<m.length;j++){var G=[];convertLines(m[j],G,v,!0),w.push(G)}}e.push(createFeature(k,g,w,n.properties))}}function convertPoint(e,n){n.push(projectX(e[0])),n.push(projectY(e[1])),n.push(0)}function convertLine(e,n,r,d){for(var m,g,v=0,w=0;w<e.length;w++){var k=projectX(e[w][0]),j=projectY(e[w][1]);n.push(k),n.push(j),n.push(0),0<w&&(v+=d?(m*j-k*g)/2:Math.sqrt(Math.pow(k-m,2)+Math.pow(j-g,2))),m=k,g=j}var G=n.length-3;n[2]=1,simplify(n,0,G,r),n[2+G]=1,n.size=Math.abs(v),n.start=0,n.end=n.size}function convertLines(e,n,r,d){for(var m=0;m<e.length;m++){var g=[];convertLine(e[m],g,r,d),n.push(g)}}function projectX(e){return e/360+.5}function projectY(e){var n=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+n)/(1-n))/Math.PI;return r<0?0:1<r?1:r}function clip(e,n,r,d,m,g,v,w){if(d/=n,(r/=n)<=g&&v<d)return e;if(v<r||d<=g)return null;for(var k=[],j=0;j<e.length;j++){var G=e[j],q=G.geometry,_t=G.type,_r=0===m?G.minX:G.minY,_s=0===m?G.maxX:G.maxY;if(r<=_r&&_s<d)k.push(G);else if(!(_s<r||d<=_r)){var ga=[];if("Point"===_t||"MultiPoint"===_t)clipPoints(q,ga,r,d,m);else if("LineString"===_t)clipLine(q,ga,r,d,m,!1,w.lineMetrics);else if("MultiLineString"===_t)clipLines(q,ga,r,d,m,!1);else if("Polygon"===_t)clipLines(q,ga,r,d,m,!0);else if("MultiPolygon"===_t)for(var _c=0;_c<q.length;_c++){var _u=[];clipLines(q[_c],_u,r,d,m,!0),_u.length&&ga.push(_u)}if(ga.length){if(w.lineMetrics&&"LineString"===_t){for(_c=0;_c<ga.length;_c++)k.push(createFeature(G.id,_t,ga[_c],G.tags));continue}"LineString"!==_t&&"MultiLineString"!==_t||(1===ga.length?(_t="LineString",ga=ga[0]):_t="MultiLineString"),"Point"!==_t&&"MultiPoint"!==_t||(_t=3===ga.length?"Point":"MultiPoint"),k.push(createFeature(G.id,_t,ga,G.tags))}}}return k.length?k:null}function clipPoints(e,n,r,d,m){for(var g=0;g<e.length;g+=3){var v=e[g+m];r<=v&&v<=d&&(n.push(e[g]),n.push(e[g+1]),n.push(e[g+2]))}}function clipLine(e,n,r,d,m,g,v){for(var w,k,j=newSlice(e),G=0===m?intersectX:intersectY,q=e.start,_t=0;_t<e.length-3;_t+=3){var _h=e[_t],ad=e[_t+1],ey=e[_t+2],_r=e[_t+3],_s=e[_t+4],ga=0===m?_h:ad,_c=0===m?_r:_s,_u=!1;v&&(w=Math.sqrt(Math.pow(_h-_r,2)+Math.pow(ad-_s,2))),ga<r?r<_c&&(k=G(j,_h,ad,_r,_s,r),v&&(j.start=q+w*k)):d<ga?_c<d&&(k=G(j,_h,ad,_r,_s,d),v&&(j.start=q+w*k)):addPoint(j,_h,ad,ey),_c<r&&r<=ga&&(k=G(j,_h,ad,_r,_s,r),_u=!0),d<_c&&ga<=d&&(k=G(j,_h,ad,_r,_s,d),_u=!0),!g&&_u&&(v&&(j.end=q+w*k),n.push(j),j=newSlice(e)),v&&(q+=w)}var _f=e.length-3;_h=e[_f],ad=e[_f+1],ey=e[_f+2],r<=(ga=0===m?_h:ad)&&ga<=d&&addPoint(j,_h,ad,ey),_f=j.length-3,g&&3<=_f&&(j[_f]!==j[0]||j[_f+1]!==j[1])&&addPoint(j,j[0],j[1],j[2]),j.length&&n.push(j)}function newSlice(e){var n=[];return n.size=e.size,n.start=e.start,n.end=e.end,n}function clipLines(e,n,r,d,m,g){for(var v=0;v<e.length;v++)clipLine(e[v],n,r,d,m,g,!1)}function addPoint(e,n,r,d){e.push(n),e.push(r),e.push(d)}function intersectX(e,n,r,d,m,g){var v=(g-n)/(d-n);return e.push(g),e.push(r+(m-r)*v),e.push(1),v}function intersectY(e,n,r,d,m,g){var v=(g-r)/(m-r);return e.push(n+(d-n)*v),e.push(g),e.push(1),v}function wrap(e,n){var r=n.buffer/n.extent,d=e,m=clip(e,1,-1-r,r,0,-1,2,n),g=clip(e,1,1-r,2+r,0,-1,2,n);return(m||g)&&(d=clip(e,1,-r,1+r,0,-1,2,n)||[],m&&(d=shiftFeatureCoords(m,1).concat(d)),g&&(d=d.concat(shiftFeatureCoords(g,-1)))),d}function shiftFeatureCoords(e,n){for(var r=[],d=0;d<e.length;d++){var m,g=e[d],v=g.type;if("Point"===v||"MultiPoint"===v||"LineString"===v)m=shiftCoords(g.geometry,n);else if("MultiLineString"===v||"Polygon"===v){m=[];for(var w=0;w<g.geometry.length;w++)m.push(shiftCoords(g.geometry[w],n))}else if("MultiPolygon"===v)for(m=[],w=0;w<g.geometry.length;w++){for(var k=[],j=0;j<g.geometry[w].length;j++)k.push(shiftCoords(g.geometry[w][j],n));m.push(k)}r.push(createFeature(g.id,v,m,g.tags))}return r}function shiftCoords(e,n){var r=[];r.size=e.size,void 0!==e.start&&(r.start=e.start,r.end=e.end);for(var d=0;d<e.length;d+=3)r.push(e[d]+n,e[d+1],e[d+2]);return r}function transformTile(e,n){if(e.transformed)return e;for(var r,d=1<<e.z,m=e.x,g=e.y,v=0;v<e.features.length;v++){var w=e.features[v],k=w.geometry,j=w.type;if(w.geometry=[],1===j)for(r=0;r<k.length;r+=2)w.geometry.push(transformPoint(k[r],k[r+1],n,d,m,g));else for(r=0;r<k.length;r++){for(var G=[],q=0;q<k[r].length;q+=2)G.push(transformPoint(k[r][q],k[r][q+1],n,d,m,g));w.geometry.push(G)}}return e.transformed=!0,e}function transformPoint(e,n,r,d,m,g){return[Math.round(r*(e*d-m)),Math.round(r*(n*d-g))]}function createTile(e,n,r,d,m){for(var g=n===m.maxZoom?0:m.tolerance/((1<<n)*m.extent),v={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:d,z:n,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},w=0;w<e.length;w++){v.numFeatures++,addFeature(v,e[w],g,m);var k=e[w].minX,j=e[w].minY,G=e[w].maxX,q=e[w].maxY;k<v.minX&&(v.minX=k),j<v.minY&&(v.minY=j),G>v.maxX&&(v.maxX=G),q>v.maxY&&(v.maxY=q)}return v}function addFeature(e,n,r,d){var m=n.geometry,g=n.type,v=[];if("Point"===g||"MultiPoint"===g)for(var w=0;w<m.length;w+=3)v.push(m[w]),v.push(m[w+1]),e.numPoints++,e.numSimplified++;else if("LineString"===g)addLine(v,m,e,r,!1,!1);else if("MultiLineString"===g||"Polygon"===g)for(w=0;w<m.length;w++)addLine(v,m[w],e,r,"Polygon"===g,0===w);else if("MultiPolygon"===g)for(var k=0;k<m.length;k++){var j=m[k];for(w=0;w<j.length;w++)addLine(v,j[w],e,r,!0,0===w)}if(v.length){var G=n.tags||null;if("LineString"===g&&d.lineMetrics){for(var q in G={},n.tags)G[q]=n.tags[q];G.mapbox_clip_start=m.start/m.size,G.mapbox_clip_end=m.end/m.size}var _t={geometry:v,type:"Polygon"===g||"MultiPolygon"===g?3:"LineString"===g||"MultiLineString"===g?2:1,tags:G};null!==n.id&&(_t.id=n.id),e.features.push(_t)}}function addLine(e,n,r,d,m,g){var v=d*d;if(0<d&&n.size<(m?v:d))r.numPoints+=n.length/3;else{for(var w=[],k=0;k<n.length;k+=3)(0===d||n[k+2]>v)&&(r.numSimplified++,w.push(n[k]),w.push(n[k+1])),r.numPoints++;m&&rewind(w,g),e.push(w)}}function rewind(e,n){for(var r=0,d=0,m=e.length,g=m-2;d<m;g=d,d+=2)r+=(e[d]-e[g])*(e[d+1]+e[g+1]);if(0<r===n)for(d=0,m=e.length;d<m/2;d+=2){var v=e[d],w=e[d+1];e[d]=e[m-2-d],e[d+1]=e[m-1-d],e[m-2-d]=v,e[m-1-d]=w}}ArrayUtils.deepClone=function(e){return Array.isArray(e)?e.map(ArrayUtils.deepClone):e};var defaults={maxZoom:14,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1};function createGeoJsonTile(e,n,r,d,m){var g=Object.assign({},defaults,m),v=convert(e,g),w=getBBox(v=wrap(v,g)),j=w.minY,q=w.maxY,_t=1<<n,_r=g.buffer/g.extent,_s=1+_r;return v=clip(v,_t,r-_r,r+_s,0,w.minX,w.maxX,g)||[],transformTile(createTile(v=clip(v,_t,d-_r,d+_s,1,j,q,g)||[],n,r,d,g),g.extent)}function getBBox(e){var n,r=2,d=-1,m=1,g=0,v=_createForOfIteratorHelper(e);try{for(v.s();!(n=v.n()).done;){var w=n.value;w.minX<r&&(r=w.minX),w.maxX>d&&(d=w.maxX),w.minY<m&&(m=w.minY),w.maxY>g&&(g=w.maxY)}}catch(k){v.e(k)}finally{v.f()}return{minX:r,maxX:d,minY:m,maxY:g}}function PackingSmith(e,n){this.items=[],this.algorithm=e;var r=void 0===(n=n||{}).sort||n.sort;this.sort=r}PackingSmith.prototype={addItem:function(e){this.items.push(e)},normalizeCoordinates:function(){var e=this.items,n=1/0,r=1/0;e.forEach(function(d){var m=d;n=Math.min(n,m.x),r=Math.min(r,m.y)}),e.forEach(function(d){var m=d;m.x-=n,m.y-=r})},getStats:function(){var e=this.items.map(function(g){return g}),n=e.map(function(g){return g.x}),r=e.map(function(g){return g.y}),d=e.map(function(g){return g.x+g.width}),m=e.map(function(g){return g.y+g.height});return{minX:Math.max.apply(Math,n),minY:Math.max.apply(Math,r),maxX:Math.max.apply(Math,d),maxY:Math.max.apply(Math,m)}},getItems:function(){return this.items},processItems:function(){var e=this.items;return this.sort&&(e=this.algorithm.sort(e)),e=this.algorithm.placeItems(e),this.items=e},exportItems:function(){return this.processItems(),this.normalizeCoordinates(),this.items},export:function(){var e=this.exportItems(),n=this.getStats();return{height:n.maxY,width:n.maxX,items:e}}};var packing_smith=PackingSmith,lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,inited=!1;function init(){inited=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0;n<64;++n)lookup[n]=e[n],revLookup[e.charCodeAt(n)]=n;revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63}function toByteArray(e){var n,r,d,m;inited||init();var g=e.length;if(0<g%4)throw new Error("Invalid string. Length must be a multiple of 4");m=new Arr(3*g/4-(d="="===e[g-2]?2:"="===e[g-1]?1:0)),n=0<d?g-4:g;for(var v=0,w=0;w<n;w+=4,0)r=revLookup[e.charCodeAt(w)]<<18|revLookup[e.charCodeAt(w+1)]<<12|revLookup[e.charCodeAt(w+2)]<<6|revLookup[e.charCodeAt(w+3)],m[v++]=r>>16&255,m[v++]=r>>8&255,m[v++]=255&r;return 2==d?(r=revLookup[e.charCodeAt(w)]<<2|revLookup[e.charCodeAt(w+1)]>>4,m[v++]=255&r):1==d&&(r=revLookup[e.charCodeAt(w)]<<10|revLookup[e.charCodeAt(w+1)]<<4|revLookup[e.charCodeAt(w+2)]>>2,m[v++]=r>>8&255,m[v++]=255&r),m}function tripletToBase64(e){return lookup[e>>18&63]+lookup[e>>12&63]+lookup[e>>6&63]+lookup[63&e]}function encodeChunk(e,n,r){for(var m=[],g=n;g<r;g+=3)m.push(tripletToBase64((e[g]<<16)+(e[g+1]<<8)+e[g+2]));return m.join("")}function fromByteArray(e){var n;inited||init();for(var r=e.length,d=r%3,m="",g=[],v=0,w=r-d;v<w;v+=16383)g.push(encodeChunk(e,v,w<v+16383?w:v+16383));return 1==d?(m+=lookup[(n=e[r-1])>>2],m+=lookup[n<<4&63],m+="=="):2==d&&(m+=lookup[(n=(e[r-2]<<8)+e[r-1])>>10],m+=lookup[n>>4&63],m+=lookup[n<<2&63],m+="="),g.push(m),g.join("")}var base64$1=Object.freeze({toByteArray,fromByteArray});function read$1(e,n,r,d,m){var g,v,w=8*m-d-1,k=(1<<w)-1,j=k>>1,G=-7,q=r?m-1:0,_t=r?-1:1,_r=e[n+q];for(q+=_t,g=_r&(1<<-G)-1,_r>>=-G,G+=w;0<G;g=256*g+e[n+q],q+=_t,G-=8);for(v=g&(1<<-G)-1,g>>=-G,G+=d;0<G;v=256*v+e[n+q],q+=_t,G-=8);if(0===g)g=1-j;else{if(g===k)return v?NaN:1/0*(_r?-1:1);v+=Math.pow(2,d),g-=j}return(_r?-1:1)*v*Math.pow(2,g-d)}function write$1(e,n,r,d,m,g){var v,w,k,j=8*g-m-1,G=(1<<j)-1,q=G>>1,_t=23===m?Math.pow(2,-24)-Math.pow(2,-77):0,_r=d?0:g-1,_s=d?1:-1,ga=n<0||0===n&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(w=isNaN(n)?1:0,v=G):(v=Math.floor(Math.log(n)/Math.LN2),n*(k=Math.pow(2,-v))<1&&(v--,k*=2),2<=(n+=1<=v+q?_t/k:_t*Math.pow(2,1-q))*k&&(v++,k/=2),G<=v+q?(w=0,v=G):1<=v+q?(w=(n*k-1)*Math.pow(2,m),v+=q):(w=n*Math.pow(2,q-1)*Math.pow(2,m),v=0));8<=m;e[r+_r]=255&w,_r+=_s,w/=256,m-=8);for(v=v<<m|w,j+=m;0<j;e[r+_r]=255&v,_r+=_s,v/=256,j-=8);e[r+_r-_s]|=128*ga}var toString$1={}.toString,isArray=Array.isArray||function(e){return"[object Array]"==toString$1.call(e)},INSPECT_MAX_BYTES=50;Buffer.TYPED_ARRAY_SUPPORT=void 0===global$1.TYPED_ARRAY_SUPPORT||global$1.TYPED_ARRAY_SUPPORT;var _kMaxLength=kMaxLength();function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(e,n){if(kMaxLength()<n)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(n)).__proto__=Buffer.prototype:(null===e&&(e=new Buffer(n)),e.length=n),e}function Buffer(e,n,r){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(e,n,r);if("number"!=typeof e)return from(this,e,n,r);if("string"==typeof n)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,e)}function from(e,n,r,d){if("number"==typeof n)throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer?fromArrayBuffer(e,n,r,d):"string"==typeof n?fromString$1(e,n,r):fromObject(e,n)}function assertSize(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function alloc(e,n,r,d){return assertSize(n),n<=0||void 0===r?createBuffer(e,n):"string"==typeof d?createBuffer(e,n).fill(r,d):createBuffer(e,n).fill(r)}function allocUnsafe(e,n){if(assertSize(n),e=createBuffer(e,n<0?0:0|checked(n)),!Buffer.TYPED_ARRAY_SUPPORT)for(var r=0;r<n;++r)e[r]=0;return e}function fromString$1(e,n,r){if("string"==typeof r&&""!==r||(r="utf8"),!Buffer.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var d=0|byteLength(n,r),m=(e=createBuffer(e,d)).write(n,r);return m!==d&&(e=e.slice(0,m)),e}function fromArrayLike(e,n){var r=n.length<0?0:0|checked(n.length);e=createBuffer(e,r);for(var d=0;d<r;d+=1)e[d]=255&n[d];return e}function fromArrayBuffer(e,n,r,d){if(r<0||n.byteLength<r)throw new RangeError("'offset' is out of bounds");if(n.byteLength<r+(d||0))throw new RangeError("'length' is out of bounds");return n=void 0===r&&void 0===d?new Uint8Array(n):void 0===d?new Uint8Array(n,r):new Uint8Array(n,r,d),Buffer.TYPED_ARRAY_SUPPORT?(e=n).__proto__=Buffer.prototype:e=fromArrayLike(e,n),e}function fromObject(e,n){if(internalIsBuffer(n)){var r=0|checked(n.length);return 0===(e=createBuffer(e,r)).length||n.copy(e,0,0,r),e}if(n){if(typeof ArrayBuffer<"u"&&n.buffer instanceof ArrayBuffer||"length"in n)return"number"!=typeof n.length||isnan(n.length)?createBuffer(e,0):fromArrayLike(e,n);if("Buffer"===n.type&&isArray(n.data))return fromArrayLike(e,n.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(e){if(e>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|e}function SlowBuffer(e){return+e!=e&&(e=0),Buffer.alloc(+e)}function internalIsBuffer(e){return null!=e&&e._isBuffer}function byteLength(e,n){if(internalIsBuffer(e))return e.length;if(typeof ArrayBuffer<"u"&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var d=!1;;)switch(n){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return utf8ToBytes(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return base64ToBytes(e).length;default:if(d)return utf8ToBytes(e).length;n=(""+n).toLowerCase(),d=!0}}function slowToString(e,n,r){var d=!1;if((void 0===n||n<0)&&(n=0),n>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0)||(r>>>=0)<=(n>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return hexSlice(this,n,r);case"utf8":case"utf-8":return utf8Slice(this,n,r);case"ascii":return asciiSlice(this,n,r);case"latin1":case"binary":return latin1Slice(this,n,r);case"base64":return base64Slice(this,n,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,n,r);default:if(d)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),d=!0}}function swap(e,n,r){var d=e[n];e[n]=e[r],e[r]=d}function bidirectionalIndexOf(e,n,r,d,m){if(0===e.length)return-1;if("string"==typeof r?(d=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=m?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(m)return-1;r=e.length-1}else if(r<0){if(!m)return-1;r=0}if("string"==typeof n&&(n=Buffer.from(n,d)),internalIsBuffer(n))return 0===n.length?-1:arrayIndexOf$1(e,n,r,d,m);if("number"==typeof n)return n&=255,Buffer.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?m?Uint8Array.prototype.indexOf.call(e,n,r):Uint8Array.prototype.lastIndexOf.call(e,n,r):arrayIndexOf$1(e,[n],r,d,m);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf$1(e,n,r,d,m){var g=1,v=e.length,w=n.length;if(void 0!==d&&("ucs2"===(d=String(d).toLowerCase())||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(e.length<2||n.length<2)return-1;v/=g=2,w/=2,r/=2}function k(_r,_s){return 1===g?_r[_s]:_r.readUInt16BE(_s*g)}if(m)for(var j=-1,G=r;G<v;G++)if(k(e,G)===k(n,-1===j?0:G-j)){if(-1===j&&(j=G),G-j+1===w)return j*g}else-1!==j&&(G-=G-j),j=-1;else for(v<r+w&&(r=v-w),G=r;0<=G;G--){for(var q=!0,_t=0;_t<w;_t++)if(k(e,G+_t)!==k(n,_t)){q=!1;break}if(q)return G}return-1}function hexWrite(e,n,r,d){r=Number(r)||0;var m=e.length-r;(!d||m<(d=Number(d)))&&(d=m);var g=n.length;if(g%2!=0)throw new TypeError("Invalid hex string");g/2<d&&(d=g/2);for(var v=0;v<d;++v){var w=parseInt(n.substr(2*v,2),16);if(isNaN(w))return v;e[r+v]=w}return v}function utf8Write(e,n,r,d){return blitBuffer(utf8ToBytes(n,e.length-r),e,r,d)}function asciiWrite(e,n,r,d){return blitBuffer(asciiToBytes(n),e,r,d)}function latin1Write(e,n,r,d){return asciiWrite(e,n,r,d)}function base64Write(e,n,r,d){return blitBuffer(base64ToBytes(n),e,r,d)}function ucs2Write(e,n,r,d){return blitBuffer(utf16leToBytes(n,e.length-r),e,r,d)}function base64Slice(e,n,r){return fromByteArray(0===n&&r===e.length?e:e.slice(n,r))}function utf8Slice(e,n,r){r=Math.min(e.length,r);for(var d=[],m=n;m<r;){var g,v,w,k,j=e[m],G=null,q=239<j?4:223<j?3:191<j?2:1;if(m+q<=r)switch(q){case 1:j<128&&(G=j);break;case 2:128==(192&(g=e[m+1]))&&127<(k=(31&j)<<6|63&g)&&(G=k);break;case 3:v=e[m+2],128==(192&(g=e[m+1]))&&128==(192&v)&&2047<(k=(15&j)<<12|(63&g)<<6|63&v)&&(k<55296||57343<k)&&(G=k);break;case 4:v=e[m+2],w=e[m+3],128==(192&(g=e[m+1]))&&128==(192&v)&&128==(192&w)&&65535<(k=(15&j)<<18|(63&g)<<12|(63&v)<<6|63&w)&&k<1114112&&(G=k)}null===G?(G=65533,q=1):65535<G&&(d.push((G-=65536)>>>10&1023|55296),G=56320|1023&G),d.push(G),m+=q}return decodeCodePointsArray(d)}Buffer.poolSize=8192,Buffer._augment=function(e){return e.__proto__=Buffer.prototype,e},Buffer.from=function(e,n,r){return from(null,e,n,r)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array),Buffer.alloc=function(e,n,r){return alloc(null,e,n,r)},Buffer.allocUnsafe=function(e){return allocUnsafe(null,e)},Buffer.allocUnsafeSlow=function(e){return allocUnsafe(null,e)},Buffer.isBuffer=isBuffer,Buffer.compare=function(e,n){if(!internalIsBuffer(e)||!internalIsBuffer(n))throw new TypeError("Arguments must be Buffers");if(e===n)return 0;for(var r=e.length,d=n.length,m=0,g=Math.min(r,d);m<g;++m)if(e[m]!==n[m]){r=e[m],d=n[m];break}return r<d?-1:d<r?1:0},Buffer.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(e,n){if(!isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Buffer.alloc(0);if(void 0===n)for(m=n=0;m<e.length;++m)n+=e[m].length;for(var r=Buffer.allocUnsafe(n),d=0,m=0;m<e.length;++m){var g=e[m];if(!internalIsBuffer(g))throw new TypeError('"list" argument must be an Array of Buffers');g.copy(r,d),d+=g.length}return r},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<e;n+=2)swap(this,n,n+1);return this},Buffer.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<e;n+=4)swap(this,n,n+3),swap(this,n+1,n+2);return this},Buffer.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<e;n+=8)swap(this,n,n+7),swap(this,n+1,n+6),swap(this,n+2,n+5),swap(this,n+3,n+4);return this},Buffer.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?utf8Slice(this,0,e):slowToString.apply(this,arguments)},Buffer.prototype.equals=function(e){if(!internalIsBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Buffer.compare(this,e)},Buffer.prototype.inspect=function(){var e="",n=INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},Buffer.prototype.compare=function(e,n,r,d,m){if(!internalIsBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=0),void 0===r&&(r=e?e.length:0),void 0===d&&(d=0),void 0===m&&(m=this.length),n<0||r>e.length||d<0||m>this.length)throw new RangeError("out of range index");if(m<=d&&r<=n)return 0;if(m<=d)return-1;if(r<=n)return 1;if(this===e)return 0;for(var g=(m>>>=0)-(d>>>=0),v=(r>>>=0)-(n>>>=0),w=Math.min(g,v),k=this.slice(d,m),j=e.slice(n,r),G=0;G<w;++G)if(k[G]!==j[G]){g=k[G],v=j[G];break}return g<v?-1:v<g?1:0},Buffer.prototype.includes=function(e,n,r){return-1!==this.indexOf(e,n,r)},Buffer.prototype.indexOf=function(e,n,r){return bidirectionalIndexOf(this,e,n,r,!0)},Buffer.prototype.lastIndexOf=function(e,n,r){return bidirectionalIndexOf(this,e,n,r,!1)},Buffer.prototype.write=function(e,n,r,d){if(void 0===n)d="utf8",r=this.length,n=0;else if(void 0===r&&"string"==typeof n)d=n,r=this.length,n=0;else{if(!isFinite(n))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");n|=0,isFinite(r)?(r|=0,void 0===d&&(d="utf8")):(d=r,r=void 0)}var m=this.length-n;if((void 0===r||m<r)&&(r=m),0<e.length&&(r<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");d=d||"utf8";for(var g=!1;;)switch(d){case"hex":return hexWrite(this,e,n,r);case"utf8":case"utf-8":return utf8Write(this,e,n,r);case"ascii":return asciiWrite(this,e,n,r);case"latin1":case"binary":return latin1Write(this,e,n,r);case"base64":return base64Write(this,e,n,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,e,n,r);default:if(g)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),g=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(e){var n=e.length;if(n<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,e);for(var r="",d=0;d<n;)r+=String.fromCharCode.apply(String,e.slice(d,d+=MAX_ARGUMENTS_LENGTH));return r}function asciiSlice(e,n,r){var d="";r=Math.min(e.length,r);for(var m=n;m<r;++m)d+=String.fromCharCode(127&e[m]);return d}function latin1Slice(e,n,r){var d="";r=Math.min(e.length,r);for(var m=n;m<r;++m)d+=String.fromCharCode(e[m]);return d}function hexSlice(e,n,r){var d=e.length;(!n||n<0)&&(n=0),(!r||r<0||d<r)&&(r=d);for(var m="",g=n;g<r;++g)m+=toHex(e[g]);return m}function utf16leSlice(e,n,r){for(var d=e.slice(n,r),m="",g=0;g<d.length;g+=2)m+=String.fromCharCode(d[g]+256*d[g+1]);return m}function checkOffset(e,n,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(r<e+n)throw new RangeError("Trying to access beyond buffer length")}function checkInt(e,n,r,d,m,g){if(!internalIsBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(m<n||n<g)throw new RangeError('"value" argument is out of bounds');if(r+d>e.length)throw new RangeError("Index out of range")}function objectWriteUInt16(e,n,r,d){n<0&&(n=65535+n+1);for(var m=0,g=Math.min(e.length-r,2);m<g;++m)e[r+m]=(n&255<<8*(d?m:1-m))>>>8*(d?m:1-m)}function objectWriteUInt32(e,n,r,d){n<0&&(n=4294967295+n+1);for(var m=0,g=Math.min(e.length-r,4);m<g;++m)e[r+m]=n>>>8*(d?m:3-m)&255}function checkIEEE754(e,n,r,d,m,g){if(r+d>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function writeFloat(e,n,r,d,m){return m||checkIEEE754(e,n,r,4,34028234663852886e22,-34028234663852886e22),write$1(e,n,r,d,23,4),r+4}function writeDouble(e,n,r,d,m){return m||checkIEEE754(e,n,r,8,17976931348623157e292,-17976931348623157e292),write$1(e,n,r,d,52,8),r+8}Buffer.prototype.slice=function(e,n){var r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(n=void 0===n?r:~~n)<0?(n+=r)<0&&(n=0):r<n&&(n=r),n<e&&(n=e),Buffer.TYPED_ARRAY_SUPPORT)(m=this.subarray(e,n)).__proto__=Buffer.prototype;else for(var d=n-e,m=new Buffer(d,void 0),g=0;g<d;++g)m[g]=this[g+e];return m},Buffer.prototype.readUIntLE=function(e,n,r){e|=0,n|=0,r||checkOffset(e,n,this.length);for(var d=this[e],m=1,g=0;++g<n&&(m*=256);)d+=this[e+g]*m;return d},Buffer.prototype.readUIntBE=function(e,n,r){e|=0,n|=0,r||checkOffset(e,n,this.length);for(var d=this[e+--n],m=1;0<n&&(m*=256);)d+=this[e+--n]*m;return d},Buffer.prototype.readUInt8=function(e,n){return n||checkOffset(e,1,this.length),this[e]},Buffer.prototype.readUInt16LE=function(e,n){return n||checkOffset(e,2,this.length),this[e]|this[e+1]<<8},Buffer.prototype.readUInt16BE=function(e,n){return n||checkOffset(e,2,this.length),this[e]<<8|this[e+1]},Buffer.prototype.readUInt32LE=function(e,n){return n||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Buffer.prototype.readUInt32BE=function(e,n){return n||checkOffset(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Buffer.prototype.readIntLE=function(e,n,r){e|=0,n|=0,r||checkOffset(e,n,this.length);for(var d=this[e],m=1,g=0;++g<n&&(m*=256);)d+=this[e+g]*m;return(m*=128)<=d&&(d-=Math.pow(2,8*n)),d},Buffer.prototype.readIntBE=function(e,n,r){e|=0,n|=0,r||checkOffset(e,n,this.length);for(var d=n,m=1,g=this[e+--d];0<d&&(m*=256);)g+=this[e+--d]*m;return(m*=128)<=g&&(g-=Math.pow(2,8*n)),g},Buffer.prototype.readInt8=function(e,n){return n||checkOffset(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Buffer.prototype.readInt16LE=function(e,n){n||checkOffset(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt16BE=function(e,n){n||checkOffset(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt32LE=function(e,n){return n||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Buffer.prototype.readInt32BE=function(e,n){return n||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Buffer.prototype.readFloatLE=function(e,n){return n||checkOffset(e,4,this.length),read$1(this,e,!0,23,4)},Buffer.prototype.readFloatBE=function(e,n){return n||checkOffset(e,4,this.length),read$1(this,e,!1,23,4)},Buffer.prototype.readDoubleLE=function(e,n){return n||checkOffset(e,8,this.length),read$1(this,e,!0,52,8)},Buffer.prototype.readDoubleBE=function(e,n){return n||checkOffset(e,8,this.length),read$1(this,e,!1,52,8)},Buffer.prototype.writeUIntLE=function(e,n,r,d){e=+e,n|=0,r|=0,d||checkInt(this,e,n,r,Math.pow(2,8*r)-1,0);var m=1,g=0;for(this[n]=255&e;++g<r&&(m*=256);)this[n+g]=e/m&255;return n+r},Buffer.prototype.writeUIntBE=function(e,n,r,d){e=+e,n|=0,r|=0,d||checkInt(this,e,n,r,Math.pow(2,8*r)-1,0);var m=r-1,g=1;for(this[n+m]=255&e;0<=--m&&(g*=256);)this[n+m]=e/g&255;return n+r},Buffer.prototype.writeUInt8=function(e,n,r){return e=+e,n|=0,r||checkInt(this,e,n,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[n]=255&e,n+1},Buffer.prototype.writeUInt16LE=function(e,n,r){return e=+e,n|=0,r||checkInt(this,e,n,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8):objectWriteUInt16(this,e,n,!0),n+2},Buffer.prototype.writeUInt16BE=function(e,n,r){return e=+e,n|=0,r||checkInt(this,e,n,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=255&e):objectWriteUInt16(this,e,n,!1),n+2},Buffer.prototype.writeUInt32LE=function(e,n,r){return e=+e,n|=0,r||checkInt(this,e,n,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[n+3]=e>>>24,this[n+2]=e>>>16,this[n+1]=e>>>8,this[n]=255&e):objectWriteUInt32(this,e,n,!0),n+4},Buffer.prototype.writeUInt32BE=function(e,n,r){return e=+e,n|=0,r||checkInt(this,e,n,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e):objectWriteUInt32(this,e,n,!1),n+4},Buffer.prototype.writeIntLE=function(e,n,r,d){var m;e=+e,n|=0,d||checkInt(this,e,n,r,(m=Math.pow(2,8*r-1))-1,-m);var g=0,v=1,w=0;for(this[n]=255&e;++g<r&&(v*=256);)e<0&&0===w&&0!==this[n+g-1]&&(w=1),this[n+g]=(e/v>>0)-w&255;return n+r},Buffer.prototype.writeIntBE=function(e,n,r,d){var m;e=+e,n|=0,d||checkInt(this,e,n,r,(m=Math.pow(2,8*r-1))-1,-m);var g=r-1,v=1,w=0;for(this[n+g]=255&e;0<=--g&&(v*=256);)e<0&&0===w&&0!==this[n+g+1]&&(w=1),this[n+g]=(e/v>>0)-w&255;return n+r},Buffer.prototype.writeInt8=function(e,n,r){return e=+e,n|=0,r||checkInt(this,e,n,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[n]=255&e,n+1},Buffer.prototype.writeInt16LE=function(e,n,r){return e=+e,n|=0,r||checkInt(this,e,n,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8):objectWriteUInt16(this,e,n,!0),n+2},Buffer.prototype.writeInt16BE=function(e,n,r){return e=+e,n|=0,r||checkInt(this,e,n,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=255&e):objectWriteUInt16(this,e,n,!1),n+2},Buffer.prototype.writeInt32LE=function(e,n,r){return e=+e,n|=0,r||checkInt(this,e,n,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=255&e,this[n+1]=e>>>8,this[n+2]=e>>>16,this[n+3]=e>>>24):objectWriteUInt32(this,e,n,!0),n+4},Buffer.prototype.writeInt32BE=function(e,n,r){return e=+e,n|=0,r||checkInt(this,e,n,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Buffer.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=255&e):objectWriteUInt32(this,e,n,!1),n+4},Buffer.prototype.writeFloatLE=function(e,n,r){return writeFloat(this,e,n,!0,r)},Buffer.prototype.writeFloatBE=function(e,n,r){return writeFloat(this,e,n,!1,r)},Buffer.prototype.writeDoubleLE=function(e,n,r){return writeDouble(this,e,n,!0,r)},Buffer.prototype.writeDoubleBE=function(e,n,r){return writeDouble(this,e,n,!1,r)},Buffer.prototype.copy=function(e,n,r,d){if(r=r||0,d||0===d||(d=this.length),n>=e.length&&(n=e.length),0<d&&d<r&&(d=r),d===r||0===e.length||0===this.length)return 0;if((n=n||0)<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(d<0)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),e.length-n<d-r&&(d=e.length-n+r);var m,g=d-r;if(this===e&&r<n&&n<d)for(m=g-1;0<=m;--m)e[m+n]=this[m+r];else if(g<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(m=0;m<g;++m)e[m+n]=this[m+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+g),n);return g},Buffer.prototype.fill=function(e,n,r,d){if("string"==typeof e){var m;if("string"==typeof n?(d=n,n=0,r=this.length):"string"==typeof r&&(d=r,r=this.length),1!==e.length||(m=e.charCodeAt(0))<256&&(e=m),void 0!==d&&"string"!=typeof d)throw new TypeError("encoding must be a string");if("string"==typeof d&&!Buffer.isEncoding(d))throw new TypeError("Unknown encoding: "+d)}else"number"==typeof e&&(e&=255);if(n<0||this.length<n||this.length<r)throw new RangeError("Out of range index");if(r<=n)return this;if(n>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(e=e||0))for(w=n;w<r;++w)this[w]=e;else for(var g=internalIsBuffer(e)?e:utf8ToBytes(new Buffer(e,d).toString()),v=g.length,w=0;w<r-n;++w)this[w+n]=g[w%v];return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function base64clean(e){if((e=stringtrim(e).replace(INVALID_BASE64_RE,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function stringtrim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function toHex(e){return e<16?"0"+e.toString(16):e.toString(16)}function utf8ToBytes(e,n){var r;n=n||1/0;for(var d=e.length,m=null,g=[],v=0;v<d;++v){if(55295<(r=e.charCodeAt(v))&&r<57344){if(!m){if(56319<r){-1<(n-=3)&&g.push(239,191,189);continue}if(v+1===d){-1<(n-=3)&&g.push(239,191,189);continue}m=r;continue}if(r<56320){-1<(n-=3)&&g.push(239,191,189),m=r;continue}r=65536+(m-55296<<10|r-56320)}else m&&-1<(n-=3)&&g.push(239,191,189);if(m=null,r<128){if(--n<0)break;g.push(r)}else if(r<2048){if((n-=2)<0)break;g.push(r>>6|192,63&r|128)}else if(r<65536){if((n-=3)<0)break;g.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((n-=4)<0)break;g.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return g}function asciiToBytes(e){for(var n=[],r=0;r<e.length;++r)n.push(255&e.charCodeAt(r));return n}function utf16leToBytes(e,n){for(var r,d,g=[],v=0;v<e.length&&!((n-=2)<0);++v)d=(r=e.charCodeAt(v))>>8,g.push(r%256),g.push(d);return g}function base64ToBytes(e){return toByteArray(base64clean(e))}function blitBuffer(e,n,r,d){for(var m=0;m<d&&!(m+r>=n.length||m>=e.length);++m)n[m+r]=e[m];return m}function isnan(e){return e!=e}function isBuffer(e){return null!=e&&(!!e._isBuffer||isFastBuffer(e)||isSlowBuffer(e))}function isFastBuffer(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function isSlowBuffer(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&isFastBuffer(e.slice(0,0))}var bufferEs6=Object.freeze({INSPECT_MAX_BYTES,kMaxLength:_kMaxLength,Buffer,SlowBuffer,isBuffer}),performance$1=global$1.performance||{},performanceNow=performance$1.now||performance$1.mozNow||performance$1.msNow||performance$1.oNow||performance$1.webkitNow||function(){return(new Date).getTime()},inherits,inherits="function"==typeof Object.create?function(e,n){e.super_=n,e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,n){function r(){}e.super_=n,r.prototype=n.prototype,e.prototype=new r,e.prototype.constructor=e},inherits$1=inherits;function inspect(e,n){var r={seen:[],stylize:stylizeNoColor};return 3<=arguments.length&&(r.depth=arguments[2]),4<=arguments.length&&(r.colors=arguments[3]),isBoolean(n)?r.showHidden=n:n&&_extend(r,n),isUndefined(r.showHidden)&&(r.showHidden=!1),isUndefined(r.depth)&&(r.depth=2),isUndefined(r.colors)&&(r.colors=!1),isUndefined(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=stylizeWithColor),formatValue(r,e,r.depth)}function stylizeWithColor(e,n){var r=inspect.styles[n];return r?"\x1b["+inspect.colors[r][0]+"m"+e+"\x1b["+inspect.colors[r][1]+"m":e}function stylizeNoColor(e,n){return e}function arrayToHash(e){var n={};return e.forEach(function(r,d){n[r]=!0}),n}function formatValue(e,n,r){if(e.customInspect&&n&&isFunction(n.inspect)&&n.inspect!==inspect&&(!n.constructor||n.constructor.prototype!==n)){var d=n.inspect(r,e);return isString(d)||(d=formatValue(e,d,r)),d}var m=formatPrimitive(e,n);if(m)return m;var g=Object.keys(n),v=arrayToHash(g);if(e.showHidden&&(g=Object.getOwnPropertyNames(n)),isError(n)&&(0<=g.indexOf("message")||0<=g.indexOf("description")))return formatError(n);if(0===g.length){if(isFunction(n))return e.stylize("[Function"+(n.name?": "+n.name:"")+"]","special");if(isRegExp(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(isDate(n))return e.stylize(Date.prototype.toString.call(n),"date");if(isError(n))return formatError(n)}var k,j="",G=!1,q=["{","}"];return isArray$1(n)&&(G=!0,q=["[","]"]),isFunction(n)&&(j=" [Function"+(n.name?": "+n.name:"")+"]"),isRegExp(n)&&(j=" "+RegExp.prototype.toString.call(n)),isDate(n)&&(j=" "+Date.prototype.toUTCString.call(n)),isError(n)&&(j=" "+formatError(n)),0!==g.length||G&&0!=n.length?r<0?isRegExp(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),k=G?formatArray(e,n,r,v,g):g.map(function(_t){return formatProperty(e,n,r,v,_t,G)}),e.seen.pop(),reduceToSingleString(k,j,q)):q[0]+j+q[1]}function formatPrimitive(e,n){if(isUndefined(n))return e.stylize("undefined","undefined");if(isString(n)){var r="'"+JSON.stringify(n).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return isNumber(n)?e.stylize(""+n,"number"):isBoolean(n)?e.stylize(""+n,"boolean"):isNull(n)?e.stylize("null","null"):void 0}function formatError(e){return"["+Error.prototype.toString.call(e)+"]"}function formatArray(e,n,r,d,m){for(var g=[],v=0,w=n.length;v<w;++v)hasOwnProperty$1(n,String(v))?g.push(formatProperty(e,n,r,d,String(v),!0)):g.push("");return m.forEach(function(k){k.match(/^\d+$/)||g.push(formatProperty(e,n,r,d,k,!0))}),g}function formatProperty(e,n,r,d,m,g){var v,w,k=Object.getOwnPropertyDescriptor(n,m)||{value:n[m]};if(k.get?w=e.stylize(k.set?"[Getter/Setter]":"[Getter]","special"):k.set&&(w=e.stylize("[Setter]","special")),hasOwnProperty$1(d,m)||(v="["+m+"]"),w||(e.seen.indexOf(k.value)<0?-1<(w=isNull(r)?formatValue(e,k.value,null):formatValue(e,k.value,r-1)).indexOf("\n")&&(w=g?w.split("\n").map(function(j){return"  "+j}).join("\n").substr(2):"\n"+w.split("\n").map(function(j){return"   "+j}).join("\n")):w=e.stylize("[Circular]","special")),isUndefined(v)){if(g&&m.match(/^\d+$/))return w;v=(v=JSON.stringify(""+m)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(v=v.substr(1,v.length-2),e.stylize(v,"name")):(v=v.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),e.stylize(v,"string"))}return v+": "+w}function reduceToSingleString(e,n,r){return 60<e.reduce(function(d,m){return m.indexOf("\n"),d+m.replace(/\u001b\[\d\d?m/g,"").length+1},0)?r[0]+(""===n?"":n+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+n+" "+e.join(", ")+" "+r[1]}function isArray$1(e){return Array.isArray(e)}function isBoolean(e){return"boolean"==typeof e}function isNull(e){return null===e}function isNumber(e){return"number"==typeof e}function isString(e){return"string"==typeof e}function isUndefined(e){return void 0===e}function isRegExp(e){return isObject$1(e)&&"[object RegExp]"===objectToString$1(e)}function isObject$1(e){return"object"==typeof e&&null!==e}function isDate(e){return isObject$1(e)&&"[object Date]"===objectToString$1(e)}function isError(e){return isObject$1(e)&&("[object Error]"===objectToString$1(e)||e instanceof Error)}function isFunction(e){return"function"==typeof e}function isPrimitive(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function objectToString$1(e){return Object.prototype.toString.call(e)}function _extend(e,n){if(!n||!isObject$1(n))return e;for(var r=Object.keys(n),d=r.length;d--;)e[r[d]]=n[r[d]];return e}function hasOwnProperty$1(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function compare(e,n){if(e===n)return 0;for(var r=e.length,d=n.length,m=0,g=Math.min(r,d);m<g;++m)if(e[m]!==n[m]){r=e[m],d=n[m];break}return r<d?-1:d<r?1:0}inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var hasOwn=Object.prototype.hasOwnProperty,objectKeys$1=Object.keys||function(e){var n=[];for(var r in e)hasOwn.call(e,r)&&n.push(r);return n},pSlice=Array.prototype.slice,_functionsHaveNames;function functionsHaveNames(){return void 0!==_functionsHaveNames?_functionsHaveNames:_functionsHaveNames="foo"===function(){}.name}function pToString(e){return Object.prototype.toString.call(e)}function isView(e){if(!isBuffer(e)&&"function"==typeof global$1.ArrayBuffer){if("function"==typeof ArrayBuffer.isView)return ArrayBuffer.isView(e);if(e)return e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer)}}function assert(e,n){e||fail(e,!0,n,"==",ok)}var regex=/\s*function\s+([^\(\s]*)\s*/;function getName(e){if(isFunction(e)){if(functionsHaveNames())return e.name;var n=e.toString().match(regex);return n&&n[1]}}function AssertionError(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=getMessage(this),this.generatedMessage=!0);var n,r,d,m,g,v=e.stackStartFunction||fail;Error.captureStackTrace?Error.captureStackTrace(this,v):(n=new Error).stack&&(g=n.stack,r=getName(v),0<=(d=g.indexOf("\n"+r))&&(m=g.indexOf("\n",d+1),g=g.substring(m+1)),this.stack=g)}function truncate(e,n){return"string"!=typeof e||e.length<n?e:e.slice(0,n)}function inspect$1(e){if(functionsHaveNames()||!isFunction(e))return inspect(e);var n=getName(e);return"[Function"+(n?": "+n:"")+"]"}function getMessage(e){return truncate(inspect$1(e.actual),128)+" "+e.operator+" "+truncate(inspect$1(e.expected),128)}function fail(e,n,r,d,m){throw new AssertionError({message:r,actual:e,expected:n,operator:d,stackStartFunction:m})}function ok(e,n){e||fail(e,!0,n,"==",ok)}function equal(e,n,r){e!=n&&fail(e,n,r,"==",equal)}function notEqual(e,n,r){e==n&&fail(e,n,r,"!=",notEqual)}function deepEqual(e,n,r){_deepEqual(e,n,!1)||fail(e,n,r,"deepEqual",deepEqual)}function deepStrictEqual(e,n,r){_deepEqual(e,n,!0)||fail(e,n,r,"deepStrictEqual",deepStrictEqual)}function _deepEqual(e,n,r,d){if(e===n)return!0;if(isBuffer(e)&&isBuffer(n))return 0===compare(e,n);if(isDate(e)&&isDate(n))return e.getTime()===n.getTime();if(isRegExp(e)&&isRegExp(n))return e.source===n.source&&e.global===n.global&&e.multiline===n.multiline&&e.lastIndex===n.lastIndex&&e.ignoreCase===n.ignoreCase;if(null!==e&&"object"==typeof e||null!==n&&"object"==typeof n){if(isView(e)&&isView(n)&&pToString(e)===pToString(n)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===compare(new Uint8Array(e.buffer),new Uint8Array(n.buffer));if(isBuffer(e)!==isBuffer(n))return!1;var m=(d=d||{actual:[],expected:[]}).actual.indexOf(e);return-1!==m&&m===d.expected.indexOf(n)||(d.actual.push(e),d.expected.push(n),objEquiv(e,n,r,d))}return r?e===n:e==n}function isArguments(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function objEquiv(e,n,r,d){if(null==e||null==n)return!1;if(isPrimitive(e)||isPrimitive(n))return e===n;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(n))return!1;var m=isArguments(e),g=isArguments(n);if(m&&!g||!m&&g)return!1;if(m)return _deepEqual(e=pSlice.call(e),n=pSlice.call(n),r);var v,w,k=objectKeys$1(e),j=objectKeys$1(n);if(k.length!==j.length)return!1;for(k.sort(),j.sort(),w=k.length-1;0<=w;w--)if(k[w]!==j[w])return!1;for(w=k.length-1;0<=w;w--)if(!_deepEqual(e[v=k[w]],n[v],r,d))return!1;return!0}function notDeepEqual(e,n,r){_deepEqual(e,n,!1)&&fail(e,n,r,"notDeepEqual",notDeepEqual)}function notDeepStrictEqual(e,n,r){_deepEqual(e,n,!0)&&fail(e,n,r,"notDeepStrictEqual",notDeepStrictEqual)}function strictEqual(e,n,r){e!==n&&fail(e,n,r,"===",strictEqual)}function notStrictEqual(e,n,r){e===n&&fail(e,n,r,"!==",notStrictEqual)}function expectedException(e,n){if(e&&n){if("[object RegExp]"==Object.prototype.toString.call(n))return n.test(e);try{if(e instanceof n)return 1}catch{}if(!Error.isPrototypeOf(n))return!0===n.call({},e)}}function _tryBlock(e){var n;try{e()}catch(r){n=r}return n}function _throws(e,n,r,d){var m;if("function"!=typeof n)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(d=r,r=null),m=_tryBlock(n),d=(r&&r.name?" ("+r.name+").":".")+(d?" "+d:"."),e&&!m&&fail(m,r,"Missing expected exception"+d);var g="string"==typeof d,v=!e&&m&&!r;if((!e&&isError(m)&&g&&expectedException(m,r)||v)&&fail(m,r,"Got unwanted exception"+d),e&&m&&r&&!expectedException(m,r)||!e&&m)throw m}function throws(e,n,r){_throws(!0,e,n,r)}function doesNotThrow(e,n,r){_throws(!1,e,n,r)}function ifError(e){if(e)throw e}assert.AssertionError=AssertionError,inherits$1(AssertionError,Error),assert.fail=fail,assert.ok=ok,assert.equal=equal,assert.notEqual=notEqual,assert.deepEqual=deepEqual,assert.deepStrictEqual=deepStrictEqual,assert.notDeepEqual=notDeepEqual,assert.notDeepStrictEqual=notDeepStrictEqual,assert.strictEqual=strictEqual,assert.notStrictEqual=notStrictEqual,assert.throws=throws,assert.doesNotThrow=doesNotThrow,assert.ifError=ifError;var sort=function(e){return e.sort(function(n,r){return n.height-r.height}),e},placeItems=function(e){var n=0;return e.forEach(function(r){r.x=0,r.y=n,n+=r.height}),e},topDown_algorithm={sort,placeItems},sort$1=function(e){return e.sort(function(n,r){return n.width-r.width}),e},placeItems$1=function(e){var n=0;return e.forEach(function(r){r.x=n,r.y=0,n+=r.width}),e},leftRight_algorithm={sort:sort$1,placeItems:placeItems$1},sort$2=function(e){return e.sort(function(n,r){return Math.sqrt(Math.pow(n.height,2)+Math.pow(n.width,2))-Math.sqrt(Math.pow(r.height,2)+Math.pow(r.width,2))}),e},placeItems$2=function(e){var n=0,r=0;return e.forEach(function(d){d.x=n,d.y=r,n+=d.width,r+=d.height}),e},diagonal_algorithm={sort:sort$2,placeItems:placeItems$2},sort$3=function(e){return e.sort(function(n,r){return Math.sqrt(Math.pow(n.height,2)+Math.pow(n.width,2))-Math.sqrt(Math.pow(r.height,2)+Math.pow(r.width,2))}),e},placeItems$3=function(e){var n=0,r=0;return e.forEach(function(d){var m=d.width;d.x=n-m,d.y=r,n-=m,r+=d.height}),e},altDiagonal_algorithm={sort:sort$3,placeItems:placeItems$3},GrowingPacker=function(){};GrowingPacker.prototype={fit:function(e){var n,r,d,m,g=e.length;for(this.root={x:0,y:0,width:0<g?e[0].width:0,height:0<g?e[0].height:0},n=0;n<g;n++)m=(r=this.findNode(this.root,(d=e[n]).width,d.height))?this.splitNode(r,d.width,d.height):this.growNode(d.width,d.height),d.x=m.x,d.y=m.y},findNode:function(e,n,r){return e.used?this.findNode(e.right,n,r)||this.findNode(e.down,n,r):n<=e.width&&r<=e.height?e:null},splitNode:function(e,n,r){return e.used=!0,e.down={x:e.x,y:e.y+r,width:e.width,height:e.height-r},e.right={x:e.x+n,y:e.y,width:e.width-n,height:r},e},growNode:function(e,n){var r=e<=this.root.width,d=n<=this.root.height,g=r&&this.root.width>=this.root.height+n;return d&&this.root.height>=this.root.width+e?this.growRight(e,n):g?this.growDown(e,n):d?this.growRight(e,n):r?this.growDown(e,n):null},growRight:function(e,n){var r;return this.root={used:!0,x:0,y:0,width:this.root.width+e,height:this.root.height,down:this.root,right:{x:this.root.width,y:0,width:e,height:this.root.height}},(r=this.findNode(this.root,e,n))?this.splitNode(r,e,n):null},growDown:function(e,n){var r;return this.root={used:!0,x:0,y:0,width:this.root.width,height:this.root.height+n,down:{x:0,y:this.root.height,width:this.root.width,height:n},right:this.root},(r=this.findNode(this.root,e,n))?this.splitNode(r,e,n):null}};var packer_growing=GrowingPacker,binPack=function(e,n){n=n||{};var r=new packer_growing,d=n.inPlace||!1,m=(m=e.map(function(v){return d?v:{width:v.width,height:v.height,item:v}})).sort(function(v,w){return w.width*w.height-v.width*v.height});r.fit(m);var g={width:m.reduce(function(v,w){return Math.max(v,w.x+w.width)},0),height:m.reduce(function(v,w){return Math.max(v,w.y+w.height)},0)};return d||(g.items=m),g},sort$4=function(e){return e},placeItems$4=function(e){return binPack(e,{inPlace:!0}),e},binaryTree_algorithm={sort:sort$4,placeItems:placeItems$4},algorithms={};function Layout(e,n){var r=e||"top-down";return"string"==typeof r&&assert(r=algorithms[e],"Sorry, the '"+e+"' algorithm could not be loaded."),new packing_smith(r,n)}function addAlgorithm(e,n){algorithms[e]=n}Layout.PackingSmith=packing_smith,Layout.addAlgorithm=addAlgorithm,Layout.algorithms=algorithms,addAlgorithm("top-down",topDown_algorithm),addAlgorithm("left-right",leftRight_algorithm),addAlgorithm("diagonal",diagonal_algorithm),addAlgorithm("alt-diagonal",altDiagonal_algorithm),addAlgorithm("binary-tree",binaryTree_algorithm);var layout=Layout;function isTainting(e){var n;try{e.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,1,1)}catch(r){n=r.message}return n}function bitmapToCanvas(e,n,r){var d;return e instanceof HTMLImageElement&&((d=e.ownerDocument.createElement("canvas")).width=n,d.height=r,d.getContext("2d").drawImage(e,0,0,n,r),e=d),e}var MAX_LNG_LAT=Geo$1.metersToLatLng([Geo$1.half_circumference_meters,Geo$1.half_circumference_meters]),TILE_EXPONENT=Math.log(Geo$1.tile_size)/Math.LN2,ICON_READY=1,DOM_MARKER_TYPE=8,GROUP_TYPE=16,TILE_MARGIN=100,AFFECTED_BBOX_CALC_THRESHOLD=10,ObjectSource=function(){_inherits(n,MapsJsSource);var e=_createSuper(n);function n(r,d){var m;return _classCallCheck(this,n),m=e.call(this,r,d),Thread.is_worker&&(m._quad_tree=new ns.H.geo.QuadTree,m._marker_quad_tree=new ns.H.geo.QuadTree,m._tree_entries_by_object_id={},m._groups_by_id={},m._layersCache=new ns.H.util.Cache(100)),Thread.is_main&&(m._objects_by_id={},m._commands=[],m._sendCommands=debounce(m._sendCommands,100,200),m.dispatchUpdate=m.dispatchUpdate.bind(_assertThisInitialized(m))),m}return _createClass(n,[{key:"hasLabeledData",value:function(){return!1}},{key:"onReady",value:function(){this._synced_at=this.provider.getInvalidations().getMark();var r,d,m=this.provider.getRootGroup(),g=m.getObjects(!0),v=[];for(g.push(m),r=g.length;r--;)this._isObjectSupported(d=g[r])&&this._shouldBeStored(d)&&(this._objects_by_id[d.getId()]=d,v.push(d.forWorkerMessage()));this._sendImmediateCommands([{method_name:"addObjects",arguments:[v]}])}},{key:"onProviderUpdate",value:function(r){var d,m,g,v,w=r.target,k=r.currentTarget.getInvalidations(w.type);this._isObjectSupported(w)&&(d=this._synced_at,m=w.getId(),k.isRemove(d)?(delete this._objects_by_id[m],this._commands.push({method_name:"removeObjectsByIds",arguments:[[m],!0]})):k.isAdd(d)?this._shouldBeStored(w)&&(this._objects_by_id[m]=w,this._commands.push({method_name:"addObjects",arguments:[[w.forWorkerMessage()]]})):k.isSpatial(d)||k.isZOrder(d)?this._shouldBeStored(w)&&(g=[{method_name:"removeObjectsByIds",arguments:[[m],!0]},{method_name:"addObjects",arguments:[[(this._objects_by_id[m]=w).forWorkerMessage()]]}],this.has_volatile_data&&!this.hasPendingCommands()?this._sendImmediateCommands(g):this._commands.push(g[0],g[1])):k.isVisual(d)?this._shouldBeStored(w)&&(v={method_name:"updateObjectProperties",arguments:[(this._objects_by_id[m]=w).forWorkerMessage()]},this.has_volatile_data&&!this.hasPendingCommands()?this._sendImmediateCommands([v]):this._commands.push(v)):k.isVolatility(d)&&(delete this._objects_by_id[m],this._commands.push({method_name:"removeObjectsByIds",arguments:[[m],!0]}),this._shouldBeStored(w)&&(this._objects_by_id[m]=w,this._commands.push({method_name:"addObjects",arguments:[[w.forWorkerMessage()]]}))),this._commands.length&&this._sendCommands()),this._synced_at=k.getMark()}},{key:"_shouldBeStored",value:function(r){return r.type===GROUP_TYPE||(!r.getIcon||r.getIcon().getState()===ICON_READY)&&this._hasSameVolatility(r)}},{key:"_hasSameVolatility",value:function(r){return r.getVolatility(!0)===this.has_volatile_data}},{key:"hasPendingCommands",value:function(){return 0<this._commands.length}},{key:"_sendCommands",value:function(){this._sendImmediateCommands(this._commands),this._commands=[]}},{key:"_sendImmediateCommands",value:function(r){r.length&&WorkerBroker.postMessage(this.worker,this.target_name+".executeCommands",r).then(this.dispatchUpdate)}},{key:"_isObjectSupported",value:function(r){return r.forWorkerMessage&&r.type!==DOM_MARKER_TYPE}},{key:"getSyncedAt",value:function(){return this._synced_at}},{key:"getMapObjectById",value:function(r){return this._objects_by_id[r]}},{key:"getIconBitmapByObjectId",value:function(r,d){var m=this.getMapObjectById(r);if(m){var g=m.getIcon();if(g.uid===d&&g.getState()===ICON_READY){var v=g.getSize();return bitmapToCanvas(g.getBitmap(),v.w,v.h)}}}},{key:"_getRastersForMarkers",value:function(r){for(var d={},m=layout("binary-tree"),g=0;g<r.length;g++){var v=r[g],w=v.properties.icon;d[w.id]||(m.addItem({width:w.size.w,height:w.size.h,meta:{objectId:v.id,id:w.id}}),d[w.id]=!0)}return m.export()}},{key:"fetchFeaturesForTile",value:function(r){var d=[],m=[],g=[],v=[],w=[],k=this._marker_quad_tree.intersectBoundingBox(Geo$1.getTileBoundingBox(r.coords,this.tile_size));r.source_data.error=null;for(var j=0;j<k.length;j++){var G={id:k[j].$feature$.id,properties:Object.assign({},k[j].$feature$.properties),geometry:{type:k[j].$feature$.geometry.type,coordinates:ArrayUtils$1.deepClone(k[j].$feature$.geometry.coordinates)}};d.push(G)}k=this._quad_tree.intersectBoundingBox(Geo$1.getTileBoundingBox(r.coords,this.tile_size,TILE_MARGIN));for(var q=0;q<k.length;q++){var _t,_r={id:k[q].$feature$.id,properties:Object.assign({},k[q].$feature$.properties),geometry:{type:k[q].$feature$.geometry.type,coordinates:ArrayUtils$1.deepClone(k[q].$feature$.geometry.coordinates)}};_r.properties.overlay?m.push(_r):_r.geometry.type.includes("LineString")?g.push(_r):_r.geometry.type.includes("Polygon")&&(v.push(_r),_t={id:_r.id,properties:_r.properties,geometry:{type:_r.geometry.type,coordinates:ArrayUtils$1.deepClone(_r.geometry.coordinates)}},w.push(_t))}d.sort(n._compareZInfo),v.sort(n._compareZInfo),m.sort(n._compareZInfo);var _s=this.has_volatile_data?4096:0;w.sort(n._compareZInfo);for(var ga=0;ga<w.length;ga++)w[ga].properties.effectiveZIdx=_s++;g.sort(n._compareZInfo);for(var _c=0;_c<g.length;_c++)g[_c].properties.effectiveZIdx=_s++;r.source_data.layers.markers={type:"FeatureCollection",features:d},r.source_data.layers.polylines={type:"FeatureCollection",features:g},r.source_data.layers.polygons={type:"FeatureCollection",features:v},r.source_data.layers.outlines={type:"FeatureCollection",features:w},r.source_data.layers.overlays={type:"FeatureCollection",features:m}}},{key:"tileTexture",value:function(r){var d=r.source_data.layers.overlays;if(d){var m=this.name+"_"+r.coords.key,g=Tile.coordinateWithMaxZoom(r.coords,this.max_zoom);return{name:m,filtering:this.filtering,coords:g,width:Geo$1.tile_size,height:Geo$1.tile_size,overlays_config:d.features[0].properties.overlays_config,source:this.name}}}},{key:"_load",value:function(r){var d=Geo$1.wrapTile(r.coords,{x:!0}),m=d.z,g=d.x,v=d.y,w="".concat(m,"_").concat(g,"_").concat(v),k=this._layersCache.get(w),j=!1;if(k)r.source_data.layers=k;else{this.fetchFeaturesForTile(r);var G={maxZoom:this.max_zoom,tolerance:1.5,extent:Geo$1.tile_scale},q=r.source_data.layers.overlays;q.features.length&&delete r.source_data.layers.overlays;var _t=r.source_data.layers.markers;for(var _r in _t.features.length&&delete r.source_data.layers.markers,r.source_data.layers){var _s,ga=r.source_data.layers[_r];ga.features.length&&(G.buffer=_r.includes("lines")?TILE_MARGIN*Geo$1.units_per_pixel:0,_s=createGeoJsonTile(ga,m,g,v,G),r.source_data.layers[_r]=parseGeoJSONVectorTile(_s))}r.source_data.layers.overlays=this._processOverlays(r,q);for(var _c=r.source_data.layers.overlays.features.length;_c--;)if(!r.source_data.layers.overlays.features[_c].id){j=!0,this._layersCache.drop(w);break}r.source_data.layers.markers=this._processMarkers(r,_t),this._postProcessTile(r),j||this._layersCache.add(w,r.source_data.layers,1)}return r.rasters=this._getRastersForMarkers(r.source_data.layers.markers.features),Promise.resolve(r)}},{key:"_processMarkers",value:function(r,d){var m=d.features.length;if(m){for(var g=Geo$1.unitsPerMeter(r.coords.z),v=Geo$1.wrapTile(r.coords,{x:!0}),w=Geo$1.metersForTile(v),k=Geo$1.isLastTile(v),j=Geo$1.wrapMeters(r.min),G=Geo$1.wrapMeters(r.max),q=function(_u){DataSource.coordsToMeters(_u);var _f=_slicedToArray(_u,2),_h=_f[0],ad=_f[1],ey=_h>=j.x&&(k.column||_h<G.x)&&ad>=G.y&&(k.row||!r.coords.y||ad<j.y);return DataSource.metersToTileUnits(g,w,_u),ey},_t=[],_r=0;_r<m;_r++){var _s,ga=d.features[_r].geometry,_c=!1;"Point"===ga.type?q(_s=ga.coordinates)?ga.coordinates=_s:_c=!0:"MultiPoint"===ga.type&&(ga.coordinates=ga.coordinates.filter(q),0===ga.coordinates.length&&(_c=!0)),_c||_t.push(d.features[_r])}d.features=_t}return d}},{key:"_processOverlays",value:function(r,d){var m=this;if(!d.features.length)return d;var g={coords:r.coords,min:Geo$1.metersForTile(Geo$1.wrapTile(r.coords,{x:!0}))},v={coords:r.coords,source_data:{layers:{_default:{type:"FeatureCollection",features:d.features}}}},w=Math.pow(2,r.coords.z+TILE_EXPONENT);MapsJsSource.projectData(v.source_data),MapsJsSource.scaleData(v.source_data,g);var k=d.features.map(function(G){var q=G.geometry.coordinates[0],_t=q[0],_r=q[5===q.length?2:3],_s=Math.floor(_t[0]/Geo$1.tile_scale*Geo$1.tile_size),ga=Math.floor(_t[1]/Geo$1.tile_scale*Geo$1.tile_size),_c=Math.floor(_r[0]/Geo$1.tile_scale*Geo$1.tile_size),_u=Math.floor(_r[1]/Geo$1.tile_scale*Geo$1.tile_size)-ga,_f=_c<=_s,_h=_f?w-(_s-_c):_c-_s,ad=[];return _s<=Geo$1.tile_size&&ad.push([_s,ga,_h,_u]),_f&&0<_c&&ad.push([_s-w,ga,_h,_u]),{id:G.id,properties:G.properties,texcoords:ad}}).filter(function(G){return m._isVisible(G.properties)&&m.isInMinMaxRange(G.properties,r.style_zoom)}),j=Geo$1.tile_scale;return r.pad_scale=this.pad_scale,r.default_winding="CW",d.features=k.length?[{geometry:{type:"Polygon",coordinates:[[[0,0],[j,0],[j,j],[0,j],[0,0]]]},properties:{overlays_config:k}}]:k,d}},{key:"executeCommands",value:function(r){for(var d,m=r.length<AFFECTED_BBOX_CALC_THRESHOLD,g=0;g<r.length;g++){var v=r[g];v.arguments.push(m);var w=this[v.method_name].apply(this,v.arguments);m&&(w&&d?d.mergeRect(w,!0,d):w&&(d=w))}return d?d.forWorkerMessage():void 0}},{key:"_getClampedGeoRectForFeature",value:function(r){var d=r.geometry.boundingBox;return new ns.H.geo.Rect(MathUtils$1.clamp(d[0],-MAX_LNG_LAT[1],MAX_LNG_LAT[1]),d[1],MathUtils$1.clamp(d[2],-MAX_LNG_LAT[1],MAX_LNG_LAT[1]),d[3])}},{key:"addObjects",value:function(r,d){for(var m,g=1<arguments.length&&void 0!==d&&d,v=0;v<r.length;v++){var w,k,j,G=r[v];"Group"===G.type?(G.$children_ids$={},this._groups_by_id[G.id]=G):(n._preprocessGeometry(G.geometry),w=this._getClampedGeoRectForFeature(G),g&&(m?m.mergeRect(w,!0,m):m=w),(j=(k=-1!==G.geometry.type.indexOf("Point")?this._marker_quad_tree:this._quad_tree).insertBoundingBox(w)).$tree=k,j.$feature$=G,this._tree_entries_by_object_id[G.id]=j)}for(var q=0;q<r.length;q++){var _t=r[q];_t.properties.parent&&(this._groups_by_id[_t.properties.parent].$children_ids$[_t.id]=_t.id),_t.properties.ref={effectiveVisibility:this._isVisible(_t.properties),zInfo:this._getZInfo([],_t)}}return this._layersCache.removeAll(),m}},{key:"removeObjectsByIds",value:function(r,d,m){for(var g,v=2<arguments.length&&void 0!==m&&m,w=0;w<r.length;w++){var k,j=r[w],G=void 0,q=void 0;(G=this._tree_entries_by_object_id[j])?(v&&(k=this._getClampedGeoRectForFeature(G.$feature$),g?g.mergeRect(k,!0,g):g=k),delete this._groups_by_id[G.$feature$.properties.parent].$children_ids$[j],G.$tree.remove(G),delete this._tree_entries_by_object_id[j]):(q=this._groups_by_id[j])&&(q.properties.parent&&delete this._groups_by_id[q.properties.parent].$children_ids$[j],d&&this.removeObjectsByIds(Object.keys(q.$children_ids$),!0),delete this._groups_by_id[j])}return this._layersCache.removeAll(),g}},{key:"updateObjectProperties",value:function(r,d){var m,g=1<arguments.length&&void 0!==d&&d;return"Group"===r.type?(mergeObjects(this._groups_by_id[r.id].properties,r.properties),this._groups_by_id[r.id].properties.ref.effectiveVisibility=this._isVisible(r.properties)):(this._tree_entries_by_object_id[r.id]||this.addObjects([r]),mergeObjects(this._tree_entries_by_object_id[r.id].$feature$.properties,r.properties),this._tree_entries_by_object_id[r.id].$feature$.properties.ref.effectiveVisibility=this._isVisible(r.properties),g&&(m=this._getClampedGeoRectForFeature(r))),m}},{key:"_getZInfo",value:function(r,d){var m=d.properties.zIdx,g=d.properties.sIdx;return r[0]|=void 0!==m,r.splice(1,0,m||0,g<0?d.id:g),0===d.properties.parent?r:this._getZInfo(r,this._groups_by_id[d.properties.parent])}},{key:"_isVisible",value:function(r){var d=r.visible,m=!r.parent||this._isVisible(this._groups_by_id[r.parent].properties);return d&&m}},{key:"isInMinMaxRange",value:function(r,d){var m=r.min<=d&&r.max>=d,g=!r.parent||this.isInMinMaxRange(this._groups_by_id[r.parent].properties,d);return m&&g}},{key:"dispose",value:function(){this._commands=[],_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}],[{key:"_compareZInfo",value:function(r,d){for(var m,g=r.properties.ref.zInfo,v=d.properties.ref.zInfo,w=g.length,k=v.length,j=Math.min(w,k),G=1;G<j;G++)if(m=g[G]-v[G])return m;return w-k}},{key:"_preprocessGeometry",value:function(r){var d=r.type;r.coordinates="Point"===d?n._processPointCoordinates(r.coordinates):"MultiPoint"===d?r.coordinates.map(n._processPointCoordinates):"LineString"===d?n._processLineStringCoordinates(r.coordinates):"MultiLineString"===d?r.coordinates.map(n._processLineStringCoordinates):"Polygon"===d?r.coordinates.map(n._processPolygonCoordinates):"MultiPolygon"===d?r.coordinates.map(n._processMultiPolygonCoordinates):[]}},{key:"_processPointCoordinates",value:function(r){return[r[1],r[0],r[2]]}},{key:"_processLineStringCoordinates",value:function(r){return n._latLngAltArrayToLineString(r,!1)}},{key:"_processPolygonCoordinates",value:function(r){return n._latLngAltArrayToLineString(r,!0)}},{key:"_processMultiPolygonCoordinates",value:function(r){return r.map(n._processPolygonCoordinates)}},{key:"_latLngAltArrayToLineString",value:function(r,d){for(var m=[],g=r.length,v=0;v<g;v+=3)m.push([r[v+1],r[v]]);return d&&m.push([r[1],r[0]]),m}}]),n}();MapsJsSource.register(ObjectSource,"ObjectSource");var GEOMETRY_TYPE={POLYGON:1,POLYLINE:2,OUTLINE:3},IconMap=function(){function e(){_classCallCheck(this,e),this._map={}}return _createClass(e,[{key:"set",value:function(n,r,d){var m;this._map[n]?this._map[n].accumulator.add(d):((m=new Set).add(d),this._map[n]={value:r,accumulator:m})}},{key:"get",value:function(n){return this._map[n]&&this._map[n].value}},{key:"delete",value:function(n,r){var d=this._map[n];d&&d.accumulator&&(d.accumulator.delete(r),0===d.accumulator.size&&delete this._map[n])}}]),e}(),ObjectTileSource=function(){_inherits(n,MapsJsSource);var e=_createSuper(n);function n(r,d){var m;return _classCallCheck(this,n),m=e.call(this,r,d),Thread.is_worker||(m._icons=new IconMap),m}return _createClass(n,[{key:"onProviderUpdate",value:function(r){r.target instanceof H.map.provider.Tile?this.dispatchUpdate(r.target,r.data):this.dispatchUpdate(void 0,r.data)}},{key:"onReady",value:function(){var r=this.provider;r.setTileCanvasRendering&&r.setTileCanvasRendering(!1),r.providesMarkers()&&(this._onCacheDrop=this._onCacheDrop.bind(this),r.getCache().registerOnDrop(this._onCacheDrop)),this.dispatchUpdate()}},{key:"dispose",value:function(){_get(_getPrototypeOf(n.prototype),"dispose",this).call(this);var r=this.provider;r.providesMarkers()&&r.getCache().deRegisterOnDrop(this._onCacheDrop)}},{key:"_onCacheDrop",value:function(r,d){this.provider.cacheFilter(r)&&this._deleteIcons(r,d.data)}},{key:"_deleteIcons",value:function(r,d){for(var m=0,g=d.length;m<g;m++){var v=d[m].getIcon();this._icons.delete(v.uid,r)}}},{key:"getIconBitmapByObjectId",value:function(r,d){var m=this._icons.get(d);return m&&m.getBitmap()}},{key:"requestMarkerTile",value:function(r){var d=this;return new Promise(function(m,g){d.provider?d.provider.requestTileAsPromise(r.x,r.y,r.z,!1).then(function(v){var w,k,j=[];if(v.data)for(k=(w=v.data).length;k--;){var G=w[k],q=G.getIcon();d._icons.set(q.uid,q,v.key),j.push(G.forWorkerMessage())}m(j)}):m([])})}},{key:"requestSpatialTile",value:function(r){var d=this;return new Promise(function(m,g){d.provider?d.provider.requestTileAsPromise(r.x,r.y,r.z,!1).then(function(v){var w,k=[];if(v.getObjects){w=v.getObjects();for(var j=0;j<w.length;j++){var G=w[j];k.push({id:G.getId(),geometries:G.getGeometriesForTile(v),isClosed:G.isClosed(),style:G.getStyle().forWorkerMessage()})}}m(k)}):m([])})}},{key:"_pointToArray",value:function(r){var d=Geo$1.tile_scale/this.tile_size;return[r.x*d,r.y*d]}},{key:"_getGeoJsonMultiPolygon",value:function(r){for(var d=r.geometries,m=d.length,g=[],v={coordinates:g,type:"MultiPolygon"},w=0;w<m;w++){var k=d[w],j=k.paths,G=j.length,q=k.interiorsIndex,_t=k.outlinesIndex,_r=Math.min(q,_t,G),_s=void 0,ga=void 0;for(ga=0;ga<_r;ga++)_s=[j[ga].map(this._pointToArray,this)],g.push(_s);if(1===_r)for(_r=Math.min(_t,G),ga=q;ga<_r;ga++)_s.push(j[ga].map(this._pointToArray,this))}return v}},{key:"_getGeoJsonMultiLineString",value:function(r,d){for(var m=1<arguments.length&&void 0!==d&&d,g={coordinates:[],type:"MultiLineString"},v=r.geometries,w=0;w<v.length;w++)for(var k=v[w],j=m?k.outlinesIndex:0,G=m?k.paths.length:Math.min(k.interiorsIndex,k.outlinesIndex,k.paths.length),q=j;q<G;q++){var _t=k.paths[q].map(this._pointToArray,this);g.coordinates.push(_t)}return g}},{key:"_getGeoJsonGeometry",value:function(r,d){var m=d===GEOMETRY_TYPE.POLYGON?this._getGeoJsonMultiPolygon(r):this._getGeoJsonMultiLineString(r,d===GEOMETRY_TYPE.OUTLINE);return m.coordinates.length?m:null}},{key:"_load",value:function(r){var d=this;return new Promise(function(m,g){var v=WorkerBroker.postMessage(d.target_name+".requestMarkerTile",r.coords).then(d._prepareTileData.bind(d,r)),w=new Promise(function(k,j){WorkerBroker.postMessage(d.target_name+".requestSpatialTile",r.coords).then(function(G){for(var q=[],_t=[],_r=[],_s=0;_s<G.length;_s++){var ga,_c=G[_s],_u=void 0,_f=_c.isClosed?(_u=_t,GEOMETRY_TYPE.POLYGON):(_u=q,GEOMETRY_TYPE.POLYLINE),_h=d._getGeoJsonGeometry(_c,_f);_h&&(ga={id:_c.id,type:"Feature",properties:{height:0,style:_c.style},geometry:_h},_f===GEOMETRY_TYPE.POLYLINE&&(ga.properties.effectiveZIdx=q.length),_u.push(ga));var ad=d._getGeoJsonGeometry(_c,GEOMETRY_TYPE.OUTLINE);ad&&_r.push({id:_c.id,type:"Feature",properties:{height:0,style:_c.style,effectiveZIdx:_r.length},geometry:ad})}r.source_data.layers.polylines={type:"FeatureCollection",features:q},r.source_data.layers.polygons={type:"FeatureCollection",features:_t},r.source_data.layers.outlines={type:"FeatureCollection",features:_r},k(r)})});Promise.all([v,w]).then(function(k){d._postProcessTile(r),m(r)})})}},{key:"_prepareTileData",value:function(r,d){var m=Geo$1.wrapTile(r.coords,{x:!0,y:!0}),g=Geo$1.metersForTile(m);r.source_data.layers={markers:{features:d,type:"FeatureCollection"}};var v={coords:m,min:g},w=r.source_data,k=layout("binary-tree"),j={};for(var G in w.layers)for(var q=w.layers[G].features.length,_t=0;_t<q;_t++){var _r=w.layers[G].features[_t],_s=_r.properties.icon;j[_s.id]||(k.addItem({width:_s.size.w,height:_s.size.h,meta:{objectId:_r.id,id:_s.id}}),j[_s.id]=!0),Geo$1.transformGeometry(_r.geometry,function(ga){var _c=ga[0];ga[0]=ga[1],ga[1]=_c})}return r.rasters=k.export(),MapsJsSource.projectData(r.source_data),MapsJsSource.scaleData(r.source_data,v),r}}]),n}();MapsJsSource.register(ObjectTileSource,"ObjectTileSource");var RemoteRasterTileSource=function(){_inherits(n,RasterTileSource);var e=_createSuper(n);function n(r,d){var m;return _classCallCheck(this,n),(m=e.call(this,r,d)).uid_=r.uid,m}return _createClass(n,[{key:"initialize",value:function(r,d){this.provider=r,this._on_update=d,this._onProviderUpdate=this._onProviderUpdate.bind(this),r.addEventListener("update",this._onProviderUpdate)}},{key:"_onProviderUpdate",value:function(){this._on_update(this.name)}},{key:"tileTexture",value:function(r){return Object.assign(_get(_getPrototypeOf(n.prototype),"tileTexture",this).call(this,r),{uid:this.uid_,url:this.uid_+"_"+r.coords.key,coords:r.coords})}},{key:"dispose",value:function(){this.provider.removeEventListener("update",this._onProviderUpdate)}}]),n}();function geojsonvt(e,n){return new GeoJSONVT(e,n)}function GeoJSONVT(e,n){var r=(n=this.options=extend(Object.create(this.options),n)).debug;if(r&&console.time("preprocess data"),n.maxZoom<0||24<n.maxZoom)throw new Error("maxZoom should be in the 0-24 range");if(n.promoteId&&n.generateId)throw new Error("promoteId and generateId cannot be used together.");var d=convert(e,n);this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",n.indexMaxZoom,n.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(d=wrap(d,n)).length&&this.splitTile(d,0,0,0),r&&(d.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function toID(e,n,r){return 32*((1<<e)*r+n)+e}function extend(e,n){for(var r in n)e[r]=n[r];return e}DataSource.register(RemoteRasterTileSource,"RemoteRasterTileSource"),GeoJSONVT.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},GeoJSONVT.prototype.splitTile=function(e,n,r,d,m,g,v){for(var w=[e,n,r,d],k=this.options,j=k.debug;w.length;){d=w.pop(),r=w.pop(),n=w.pop(),e=w.pop();var G,q,_t,_r,_s,ga,_c,_u,_f,_h,ad,ey=1<<n,sy=toID(n,r,d),ly=this.tiles[sy];if(ly||(1<j&&console.time("creation"),ly=this.tiles[sy]=createTile(e,n,r,d,k),this.tileCoords.push({z:n,x:r,y:d}),j&&(1<j&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",n,r,d,ly.numFeatures,ly.numPoints,ly.numSimplified),console.timeEnd("creation")),this.stats[G="z"+n]=(this.stats[G]||0)+1,this.total++)),ly.source=e,m){if(n===k.maxZoom||n===m)continue;var dy=1<<m-n;if(r!==Math.floor(g/dy)||d!==Math.floor(v/dy))continue}else if(n===k.indexMaxZoom||ly.numPoints<=k.indexMaxPoints)continue;ly.source=null,0!==e.length&&(1<j&&console.time("clipping"),_t=.5-(q=.5*k.buffer/k.extent),_s=1+q,_f=ga=_c=_u=null,_h=clip(e,ey,r-q,r+(_r=.5+q),0,ly.minX,ly.maxX,k),ad=clip(e,ey,r+_t,r+_s,0,ly.minX,ly.maxX,k),e=null,_h&&(_f=clip(_h,ey,d-q,d+_r,1,ly.minY,ly.maxY,k),ga=clip(_h,ey,d+_t,d+_s,1,ly.minY,ly.maxY,k),_h=null),ad&&(_c=clip(ad,ey,d-q,d+_r,1,ly.minY,ly.maxY,k),_u=clip(ad,ey,d+_t,d+_s,1,ly.minY,ly.maxY,k),ad=null),1<j&&console.timeEnd("clipping"),w.push(_f||[],n+1,2*r,2*d),w.push(ga||[],n+1,2*r,2*d+1),w.push(_c||[],n+1,2*r+1,2*d),w.push(_u||[],n+1,2*r+1,2*d+1))}},GeoJSONVT.prototype.getTile=function(e,n,r){var d=this.options,m=d.extent,g=d.debug;if(e<0||24<e)return null;var v=1<<e,w=toID(e,n=(n%v+v)%v,r);if(this.tiles[w])return transformTile(this.tiles[w],m);1<g&&console.log("drilling down to z%d-%d-%d",e,n,r);for(var k,j=e,G=n,q=r;!k&&0<j;)j--,G=Math.floor(G/2),q=Math.floor(q/2),k=this.tiles[toID(j,G,q)];return k&&k.source?(1<g&&console.log("found parent tile z%d-%d-%d",j,G,q),1<g&&console.time("drilling down"),this.splitTile(k.source,j,G,q,e,n,r),1<g&&console.timeEnd("drilling down"),this.tiles[w]?transformTile(this.tiles[w],m):null):null};var EMPTY_FEATURE_COLLECTION$1={type:"FeatureCollection",features:[]},GeoJSONTileSource=function(){_inherits(n,MapsJsSource);var e=_createSuper(n);function n(r,d){return _classCallCheck(this,n),r.tiled=!0,r.url="",e.call(this,r,d)}return _createClass(n,[{key:"fetchTile",value:function(r,d,m){return this.provider?this.provider.requestTileAsPromise(r,d,m).then(function(g){return g.data}):Promise.resolve(EMPTY_FEATURE_COLLECTION$1)}},{key:"_load",value:function(r){var d=this,m=Geo$1.wrapTile(r.coords,{x:!0,y:!0}),g={indexMaxZoom:0,maxZoom:this.max_zoom,tolerance:1.5,extent:Geo$1.tile_scale};return WorkerBroker.postMessage(this.target_name+".fetchTile",m.x,m.y,m.z).then(function(v){for(var w in r.source_data.layers="FeatureCollection"===v.type?{_default:v}:v,r.source_data.layers){var k=geojsonvt(r.source_data.layers[w],g).getTile(m.z,m.x,m.y);r.source_data.layers[w]=parseGeoJSONVectorTile(k)}return d._postProcessTile(r),r})}},{key:"onReady",value:function(){this.dispatchUpdate()}}]),n}();DataSource.register(GeoJSONTileSource,"GeoJSONTileSource");var DEFAULT_RESPONSE={layers:{_default:{type:"FeatureCollection",features:[{type:"Point",geometry:{}}]}}},SkyBoxSource=function(){_inherits(n,DataSource);var e=_createSuper(n);function n(r,d){return _classCallCheck(this,n),r.max_zoom=0,e.call(this,r,d)}return _createClass(n,[{key:"load",value:function(r){return r.source_data="0/0/0"===r.coords.key?DEFAULT_RESPONSE:void 0,Promise.resolve(r)}}]),n}(),debugSettings;DataSource.register(SkyBoxSource,"SkyBox");var debugSettings$1=debugSettings={draw_label_collision_boxes:!1,draw_label_texture_boxes:!1,suppress_label_fade_in:!1,suppress_snap_animation:!1,show_hidden_labels:!1,layer_stats:!1};function mergeDebugSettings(e){Object.assign(debugSettings,e)}var WorkerType={NATIVE:0,FAKE:1},Context;function sliceObject(e,n){var r={};return n.forEach(function(d){return r[d]=e[d]}),r}var Context$1=Context={},context_id=0,gl;Context.getContext=function(e,n){var r=!1;null==e&&((e=document.createElement("canvas")).style.position="absolute",e.style.top=0,e.style.left=0,e.style.zIndex=-1,document.body.appendChild(e),r=!0);var d=e.getContext("webgl",n)||e.getContext("experimental-webgl",n);if(!d)throw new Error("Couldn't create WebGL context.");return d._tangram_id=context_id++,r?(Context.resize(d,window.innerWidth,window.innerHeight,n.device_pixel_ratio),window.addEventListener("resize",function(){Context.resize(d,window.innerWidth,window.innerHeight,n.device_pixel_ratio)})):Context.resize(d,parseFloat(e.style.width),parseFloat(e.style.height),n.device_pixel_ratio),d},Context.resize=function(e,n,r,d){e.canvas.style.width=n+"px",e.canvas.style.height=r+"px",e.canvas.width=Math.round(n*d),e.canvas.height=Math.round(r*d),e.bindFramebuffer(e.FRAMEBUFFER,null),e.viewport(0,0,e.canvas.width,e.canvas.height)};var gl$1=gl={};gl.BYTE=5120,gl.UNSIGNED_BYTE=5121,gl.SHORT=5122,gl.UNSIGNED_SHORT=5123,gl.INT=5124,gl.UNSIGNED_INT=5125,gl.FLOAT=5126;var MAX_VALUE$1=Math.pow(2,16)-1,DEFAULT_SIZE=1024,HAS_ELEMENT_INDEX_UINT=!1,VertexElements=function(){function e(n){_classCallCheck(this,e),this.size_=n||DEFAULT_SIZE,this.position_=0,this.ArrayType_=Uint16Array,this.buffer_=new this.ArrayType_(this.size_),this.overflows_=!1}return _createClass(e,[{key:"push",value:function(n){if(!this.overflows_||HAS_ELEMENT_INDEX_UINT){if(MAX_VALUE$1<n){if(this.overflows_=!0,!HAS_ELEMENT_INDEX_UINT)return;this.ArrayType_===Uint16Array&&(this.ArrayType_=Uint32Array,this.buffer_=new this.ArrayType_(this.buffer_))}this.position_===this.size_&&this.expand_(),this.buffer_[this.position_]=n,this.position_+=1}}},{key:"end",value:function(){if(0===this.position_)return!1;var n=this.buffer_,r=this.position_;return this.buffer_=new this.ArrayType_(this.size_),this.position_=0,this.overflows_=!1,n.subarray(0,r)}},{key:"expand_",value:function(){this.size_=this.size_<<1;var n=new this.ArrayType_(this.size_);n.set(this.buffer_),this.buffer_=n}}]),e}(),_array_types;VertexElements.setElementIndexUint=function(e){HAS_ELEMENT_INDEX_UINT=e};var array_types=(_array_types={},_defineProperty(_array_types,gl$1.FLOAT,Float32Array),_defineProperty(_array_types,gl$1.BYTE,Int8Array),_defineProperty(_array_types,gl$1.UNSIGNED_BYTE,Uint8Array),_defineProperty(_array_types,gl$1.INT,Int32Array),_defineProperty(_array_types,gl$1.UNSIGNED_INT,Uint32Array),_defineProperty(_array_types,gl$1.SHORT,Int16Array),_defineProperty(_array_types,gl$1.UNSIGNED_SHORT,Uint16Array),_array_types),VertexData=function(){function e(n){var r=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).prealloc,d=void 0===r?500:r;_classCallCheck(this,e),this.vertex_layout=n,this.vertex_elements=new VertexElements,this.stride=this.vertex_layout.stride,0<e.array_pool.length?(this.vertex_buffer=e.array_pool.pop(),this.byte_length=this.vertex_buffer.byteLength,this.size=Math.floor(this.byte_length/this.stride),log("trace","VertexData: reused buffer of bytes ".concat(this.byte_length,", ").concat(this.size," vertices"))):(this.size=d,this.byte_length=this.stride*this.size,this.vertex_buffer=new Uint8Array(this.byte_length)),this.offset=0,this.vertex_count=0,this.realloc_count=0,this.setBufferViews(),this.setAddVertexFunction()}return _createClass(e,[{key:"setBufferViews",value:function(){var n=this;this.views={},this.views[gl$1.UNSIGNED_BYTE]=this.vertex_buffer,this.vertex_layout.dynamic_attribs.forEach(function(r){null==n.views[r.type]&&(n.views[r.type]=new(0,array_types[r.type])(n.vertex_buffer.buffer))})}},{key:"checkBufferSize",value:function(){var n;this.offset+this.stride>this.byte_length&&(this.size=Math.floor(1.5*this.size),this.size-=this.size%4,this.byte_length=this.stride*this.size,(n=new Uint8Array(this.byte_length)).set(this.vertex_buffer),e.array_pool.push(this.vertex_buffer),this.vertex_buffer=n,this.setBufferViews(),this.realloc_count++)}},{key:"setAddVertexFunction",value:function(){this.vertexLayoutAddVertex=this.vertex_layout.getAddVertexFunction()}},{key:"addVertex",value:function(n){this.checkBufferSize(),this.vertexLayoutAddVertex(n,this.views,this.offset),this.offset+=this.stride,this.vertex_count++}},{key:"end",value:function(){return this.vertex_buffer=this.vertex_buffer.subarray(0,this.offset),this.element_buffer=this.vertex_elements.end(),log("trace","VertexData: ".concat(this.size," vertices total, realloc count ").concat(this.realloc_count)),this}}]),e}();VertexData.array_pool=[];var VertexLayout=function(){function e(n){_classCallCheck(this,e),this.attribs=n,this.dynamic_attribs=this.attribs.filter(function(j){return!j.static}),this.components=[],this.index={},this.offset={};for(var r=this.stride=0,d=0,m=0;m<this.attribs.length;m++){var g=this.attribs[m];if(null==g.static){g.offset=this.stride,g.byte_size=g.size;var v=0;switch(g.type){case gl$1.FLOAT:case gl$1.INT:case gl$1.UNSIGNED_INT:g.byte_size*=4,v=2;break;case gl$1.SHORT:case gl$1.UNSIGNED_SHORT:g.byte_size*=2,v=1}3&g.byte_size&&(g.byte_size+=4-(3&g.byte_size)),this.stride+=g.byte_size;for(var w=g.offset>>v,k=0;k<g.size;k++)this.components.push({type:g.type,shift:v,offset:w++,index:d++});this.index[g.name]=r,r+=g.size,this.offset[g.name]=g.offset}else g.static=Array.isArray(g.static)?g.static:[g.static],g.method="vertexAttrib".concat(g.static.length,"fv")}}return _createClass(e,[{key:"enable",value:function(n,r,d){for(var m,g,v=0;v<this.attribs.length;v++)-1!==(g=r.attribute((m=this.attribs[v]).name).location)&&(null==m.static?(e.enabled_attribs[g]&&!d||n.enableVertexAttribArray(g),n.vertexAttribPointer(g,m.size,m.type,m.normalized,this.stride,m.offset),e.enabled_attribs[g]=r):n[m.method]instanceof Function&&(n.enableVertexAttribArray(g),n[m.method](g,m.static),n.disableVertexAttribArray(g),delete e.enabled_attribs[g]));for(g in e.enabled_attribs)this.disableUnusedAttribute(n,g,r)}},{key:"disableUnusedAttribute",value:function(n,r,d){e.enabled_attribs[r]!==d&&(n.disableVertexAttribArray(r),delete e.enabled_attribs[r])}},{key:"createVertexData",value:function(){return new VertexData(this)}},{key:"getAddVertexFunction",value:function(){return null==this.addVertex&&this.createAddVertexFunction(),this.addVertex}},{key:"createAddVertexFunction",value:function(){var n=hashString(JSON.stringify(this.attribs));if(null==e.add_vertex_funcs[n]){var r,d=["var t, o;"],m=_toConsumableArray(this.components);m.sort(function(k,j){return k.type!==j.type?k.type-j.type:k.index-j.index});for(var g=0;g<m.length;g++){var v=m[g];r!==v.type&&(d.push("t = vs[".concat(v.type,"];")),d.push("o = off".concat(v.shift?" >> "+v.shift:"",";")),r=v.type),d.push("t[o + ".concat(v.offset,"] = v[").concat(v.index,"];"))}d=d.join("\n");var w=new Function("v","vs","off",d);e.add_vertex_funcs[n]=w}this.addVertex=e.add_vertex_funcs[n]}}]),e}();VertexLayout.enabled_attribs={},VertexLayout.add_vertex_funcs={};var tile_bounds=[{x:0,y:0},{x:Geo$1.tile_scale,y:-Geo$1.tile_scale}],default_uvs=[0,0,1,1];function outsideTile(e,n,r){var d=tile_bounds[0],m=tile_bounds[1];return e[0]<=d.x+r&&n[0]<=d.x+r||e[0]>=m.x-r&&n[0]>=m.x-r||e[1]>=d.y-r&&n[1]>=d.y-r||e[1]<=m.y+r&&n[1]<=m.y+r}function isCoordOutsideTile(e,n){var r=tile_bounds[0],d=tile_bounds[1];return e[0]<=r.x+(n=n||0)||e[0]>=d.x-n||e[1]>=r.y-n||e[1]<=d.y+n}var earcut_1=earcut;function earcut(e,n,r){r=r||2;var d,m,g,v,w,k,j,G=n&&n.length,q=G?n[0]*r:e.length,_t=linkedList(e,0,q,r,!0),_r=[];if(!_t)return _r;if(G&&(_t=eliminateHoles(e,n,_t,r)),e.length>80*r){d=g=e[0],m=v=e[1];for(var _s=r;_s<q;_s+=r)(w=e[_s])<d&&(d=w),(k=e[_s+1])<m&&(m=k),g<w&&(g=w),v<k&&(v=k);j=Math.max(g-d,v-m)}return earcutLinked(_t,_r,r,d,m,j),_r}function linkedList(e,n,r,d,m){var g,v;if(m===0<signedArea$1(e,n,r,d))for(g=n;g<r;g+=d)v=insertNode(g,e[g],e[g+1],v);else for(g=r-d;n<=g;g-=d)v=insertNode(g,e[g],e[g+1],v);return v&&equals(v,v.next)&&(removeNode(v),v=v.next),v}function filterPoints(e,n){if(!e)return e;n=n||e;var r,d=e;do{if(r=!1,d.steiner||!equals(d,d.next)&&0!==area(d.prev,d,d.next))d=d.next;else{if(removeNode(d),(d=n=d.prev)===d.next)return null;r=!0}}while(r||d!==n);return n}function earcutLinked(e,n,r,d,m,g,v){if(e){!v&&g&&indexCurve(e,d,m,g);for(var w,k,j=e;e.prev!==e.next;)if(w=e.prev,k=e.next,g?isEarHashed(e,d,m,g):isEar(e))n.push(w.i/r),n.push(e.i/r),n.push(k.i/r),removeNode(e),e=k.next,j=k.next;else if((e=k)===j){v?1===v?earcutLinked(e=cureLocalIntersections(e,n,r),n,r,d,m,g,2):2===v&&splitEarcut(e,n,r,d,m,g):earcutLinked(filterPoints(e),n,r,d,m,g,1);break}}}function isEar(e){var n=e.prev,r=e,d=e.next;if(!(0<=area(n,r,d))){for(var m=e.next.next;m!==e.prev;){if(pointInTriangle(n.x,n.y,r.x,r.y,d.x,d.y,m.x,m.y)&&0<=area(m.prev,m,m.next))return;m=m.next}return 1}}function isEarHashed(e,n,r,d){var m=e.prev,g=e,v=e.next;if(!(0<=area(m,g,v))){for(var j=m.x>g.x?m.x>v.x?m.x:v.x:g.x>v.x?g.x:v.x,G=m.y>g.y?m.y>v.y?m.y:v.y:g.y>v.y?g.y:v.y,q=zOrder(m.x<g.x?m.x<v.x?m.x:v.x:g.x<v.x?g.x:v.x,m.y<g.y?m.y<v.y?m.y:v.y:g.y<v.y?g.y:v.y,n,r,d),_t=zOrder(j,G,n,r,d),_r=e.nextZ;_r&&_r.z<=_t;){if(_r!==e.prev&&_r!==e.next&&pointInTriangle(m.x,m.y,g.x,g.y,v.x,v.y,_r.x,_r.y)&&0<=area(_r.prev,_r,_r.next))return;_r=_r.nextZ}for(_r=e.prevZ;_r&&_r.z>=q;){if(_r!==e.prev&&_r!==e.next&&pointInTriangle(m.x,m.y,g.x,g.y,v.x,v.y,_r.x,_r.y)&&0<=area(_r.prev,_r,_r.next))return;_r=_r.prevZ}return 1}}function cureLocalIntersections(e,n,r){var d=e;do{var m=d.prev,g=d.next.next;!equals(m,g)&&intersects(m,d,d.next,g)&&locallyInside(m,g)&&locallyInside(g,m)&&(n.push(m.i/r),n.push(d.i/r),n.push(g.i/r),removeNode(d),removeNode(d.next),d=e=g),d=d.next}while(d!==e);return d}function splitEarcut(e,n,r,d,m,g){var v=e;do{for(var w=v.next.next;w!==v.prev;){if(v.i!==w.i&&isValidDiagonal(v,w)){var k=splitPolygon(v,w);return v=filterPoints(v,v.next),k=filterPoints(k,k.next),earcutLinked(v,n,r,d,m,g),void earcutLinked(k,n,r,d,m,g)}w=w.next}v=v.next}while(v!==e)}function eliminateHoles(e,n,r,d){for(var m,g=[],v=0,w=n.length;v<w;v++)(m=linkedList(e,n[v]*d,v<w-1?n[v+1]*d:e.length,d,!1))===m.next&&(m.steiner=!0),g.push(getLeftmost(m));for(g.sort(compareX),v=0;v<g.length;v++)eliminateHole(g[v],r),r=filterPoints(r,r.next);return r}function compareX(e,n){return e.x-n.x}function eliminateHole(e,n){var r;(n=findHoleBridge(e,n))&&filterPoints(r=splitPolygon(n,e),r.next)}function findHoleBridge(e,n){var r,d=n,m=e.x,g=e.y,v=-1/0;do{if(g<=d.y&&g>=d.next.y){var w=d.x+(g-d.y)*(d.next.x-d.x)/(d.next.y-d.y);if(w<=m&&v<w){if((v=w)===m){if(g===d.y)return d;if(g===d.next.y)return d.next}r=d.x<d.next.x?d:d.next}}d=d.next}while(d!==n);if(!r)return null;if(m===v)return r.prev;var k,j=r,G=r.x,q=r.y,_t=1/0;for(d=r.next;d!==j;)m>=d.x&&d.x>=G&&pointInTriangle(g<q?m:v,g,G,q,g<q?v:m,g,d.x,d.y)&&((k=Math.abs(g-d.y)/(m-d.x))<_t||k===_t&&d.x>r.x)&&locallyInside(d,e)&&(r=d,_t=k),d=d.next;return r}function indexCurve(e,n,r,d){for(var m=e;null===m.z&&(m.z=zOrder(m.x,m.y,n,r,d)),m.prevZ=m.prev,m.nextZ=m.next,(m=m.next)!==e;);m.prevZ.nextZ=null,m.prevZ=null,sortLinked(m)}function sortLinked(e){var n,r,d,m,g,v,w,k,j=1;do{for(r=e,g=e=null,v=0;r;){for(v++,d=r,n=w=0;n<j&&(w++,d=d.nextZ);n++);for(k=j;0<w||0<k&&d;)0!==w&&(0===k||!d||r.z<=d.z)?(r=(m=r).nextZ,w--):(d=(m=d).nextZ,k--),g?g.nextZ=m:e=m,m.prevZ=g,g=m;r=d}g.nextZ=null,j*=2}while(1<v);return e}function zOrder(e,n,r,d,m){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)/m)|e<<8))|e<<4))|e<<2))|e<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-d)/m)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function getLeftmost(e){for(var n=e,r=e;n.x<r.x&&(r=n),(n=n.next)!==e;);return r}function pointInTriangle(e,n,r,d,m,g,v,w){return 0<=(m-v)*(n-w)-(e-v)*(g-w)&&0<=(e-v)*(d-w)-(r-v)*(n-w)&&0<=(r-v)*(g-w)-(m-v)*(d-w)}function isValidDiagonal(e,n){return e.next.i!==n.i&&e.prev.i!==n.i&&!intersectsPolygon(e,n)&&locallyInside(e,n)&&locallyInside(n,e)&&middleInside(e,n)}function area(e,n,r){return(n.y-e.y)*(r.x-n.x)-(n.x-e.x)*(r.y-n.y)}function equals(e,n){return e.x===n.x&&e.y===n.y}function intersects(e,n,r,d){return equals(e,n)&&equals(r,d)||equals(e,d)&&equals(r,n)||0<area(e,n,r)!=0<area(e,n,d)&&0<area(r,d,e)!=0<area(r,d,n)}function intersectsPolygon(e,n){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==n.i&&r.next.i!==n.i&&intersects(r,r.next,e,n))return 1;r=r.next}while(r!==e)}function locallyInside(e,n){return area(e.prev,e,e.next)<0?0<=area(e,n,e.next)&&0<=area(e,e.prev,n):area(e,n,e.prev)<0||area(e,e.next,n)<0}function middleInside(e,n){for(var r=e,d=!1,m=(e.x+n.x)/2,g=(e.y+n.y)/2;r.y>g!=r.next.y>g&&m<(r.next.x-r.x)*(g-r.y)/(r.next.y-r.y)+r.x&&(d=!d),(r=r.next)!==e;);return d}function splitPolygon(e,n){var r=new Node(e.i,e.x,e.y),d=new Node(n.i,n.x,n.y),m=e.next,g=n.prev;return(e.next=n).prev=e,(r.next=m).prev=r,(d.next=r).prev=d,(g.next=d).prev=g,d}function insertNode(e,n,r,d){var m=new Node(e,n,r);return d?(m.next=d.next,(m.prev=d).next.prev=m,d.next=m):(m.prev=m).next=m,m}function removeNode(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Node(e,n,r){this.i=e,this.x=n,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea$1(e,n,r,d){for(var m=0,g=n,v=r-d;g<r;g+=d)m+=(e[v]-e[g])*(e[g+1]+e[v+1]),v=g;return m}earcut.deviation=function(e,n,r,d){var m=n&&n.length,v=Math.abs(signedArea$1(e,0,m?n[0]*r:e.length,r));if(m)for(var w=0,k=n.length;w<k;w++)v-=Math.abs(signedArea$1(e,n[w]*r,w<k-1?n[w+1]*r:e.length,r));var q=0;for(w=0;w<d.length;w+=3){var _t=d[w]*r,_r=d[w+1]*r,_s=d[w+2]*r;q+=Math.abs((e[_t]-e[_s])*(e[1+_r]-e[1+_t])-(e[_t]-e[_r])*(e[1+_s]-e[1+_t]))}return 0===v&&0===q?0:Math.abs((q-v)/v)},earcut.flatten=function(e){for(var n=e[0][0].length,r={vertices:[],holes:[],dimensions:n},d=0,m=0;m<e.length;m++){for(var g=0;g<e[m].length;g++)for(var v=0;v<n;v++)r.vertices.push(e[m][g][v]);0<m&&r.holes.push(d+=e[m-1].length)}return r};var up_vec3=[0,0,1];function buildPolygons(e,n,r,d){var m,g,v,w,k,j=d.texcoord_index,q=d.texcoord_normalize,_t=n.vertex_elements;j&&(q=q||1,g=(m=_slicedToArray(d.texcoord_scale||default_uvs,4))[0],v=m[1],w=m[2],k=m[3]);for(var _r=0,_s=e.length,ga=0;ga<_s;ga++){var _c,_u,_f,_h,ad,ey=n.vertex_count,sy=e[ga];j&&(_u=(_c=_slicedToArray(Geo$1.findBoundingBox(sy),4))[0],_h=(w-g)/(_c[2]-_u),ad=(k-v)/(_c[3]-(_f=_c[1])));for(var ly=0;ly<sy.length;ly++)for(var dy=sy[ly],vy=0;vy<dy.length;vy++){var Ay=dy[vy];r[0]=Ay[0],r[1]=Ay[1],j&&(r[j+0]=((Ay[0]-_u)*_h+g)*q,r[j+1]=((Ay[1]-_f)*ad+v)*q),n.addVertex(r)}for(var Sy=triangulatePolygon(earcut_1.flatten(sy)),jy=0;jy<Sy.length;jy++)_t.push(ey+Sy[jy]);_r+=Sy.length/3}return _r}function buildExtrudedPolygons(e,n,r,d,m,g,v,w,k){var j=k.remove_tile_edges,G=k.tile_edge_tolerance,q=k.texcoord_index,_t=k.texcoord_scale,_r=k.texcoord_normalize,_s=k.winding,ga=n+(d||0),_c=n+r;g[2]=_c;var _u,_f,_h,ad,ey,sy,ly=buildPolygons(e,m,g,{texcoord_index:q,texcoord_scale:_t,texcoord_normalize:_r}),dy=m.vertex_elements,vy=m.vertex_count;q&&(_r=_r||1,sy=[[_f=(_u=_slicedToArray(_t||default_uvs,4))[0],ey=_u[3]],[_f,_h=_u[1]],[ad=_u[2],_h],[ad,ey]]);for(var Ay=e.length,Sy=0;Sy<Ay;Sy++)for(var jy=e[Sy],Qy=0;Qy<jy.length;Qy++)for(var Ny=jy[Qy],P_=0;P_<Ny.length-1;P_++)if(!j||!outsideTile(Ny[P_],Ny[P_+1],G)){var K_,l_=void 0,p_=[[Ny[K_="CCW"===_s?(l_=P_)+1:(l_=P_+1,P_)][0],Ny[K_][1],_c],[Ny[K_][0],Ny[K_][1],ga],[Ny[l_][0],Ny[l_][1],ga],[Ny[l_][0],Ny[l_][1],_c]],qy=Vector$1.normalize([Ny[K_][0]-Ny[l_][0],Ny[K_][1]-Ny[l_][1],0]),I_=Vector$1.cross(up_vec3,qy);g[v+0]=I_[0]*w,g[v+1]=I_[1]*w,g[v+2]=I_[2]*w;for(var S0=0;S0<p_.length;S0++)g[0]=p_[S0][0],g[1]=p_[S0][1],g[2]=p_[S0][2],q&&(g[q+0]=sy[S0][0]*_r,g[q+1]=sy[S0][1]*_r),m.addVertex(g);dy.push(vy+0),dy.push(vy+1),dy.push(vy+2),dy.push(vy+2),dy.push(vy+3),dy.push(vy+0),vy+=4,ly+=2}return ly}function triangulatePolygon(e){return earcut_1(e.vertices,e.holes,e.dimensions)}var shaderSrc_polygonsVertex="uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_tile_proxy_depth;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform mat4 u_model;uniform mat4 u_modelView;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;attribute vec4 a_position;attribute vec4 a_color;\n#ifdef TANGRAM_NORMAL_ATTRIBUTE\nattribute vec3 a_normal;\n#define TANGRAM_NORMAL a_normal\n#else\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n#endif\n#ifdef TANGRAM_EXTRUDE_LINES\nattribute vec2 a_extrude;attribute vec2 a_offset;attribute vec2 a_scaling;uniform float u_v_scale_adjust;\n#endif\nvarying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;\n#if defined(TANGRAM_TEXTURE_COORDS) || defined(TANGRAM_EXTRUDE_LINES)\nattribute vec2 a_texcoord;varying vec2 v_texcoord;\n#endif\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nvarying vec4 v_modelpos_base_zoom;\n#endif\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvarying vec4 v_lighting;\n#endif\n#define UNPACK_SCALING(x) (x / 1024.)\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\nvoid main(){\n#pragma tangram: setup\n#ifdef TANGRAM_TEXTURE_COORDS\nv_texcoord=a_texcoord;\n#ifdef TANGRAM_EXTRUDE_LINES\nv_texcoord.y*=u_v_scale_adjust;\n#endif\n#endif\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nv_modelpos_base_zoom=modelPositionBaseZoom();\n#endif\nvec4 position=vec4(a_position.xy,a_position.z/TANGRAM_HEIGHT_SCALE,1.);\n#ifdef TANGRAM_EXTRUDE_LINES\nvec2 extrude=a_extrude.xy;vec2 offset=a_offset.xy;float dz=clamp(u_map_position.z-u_tile_origin.z,0.,4.);dz+=step(1.,dz)*(1.-dz)+mix(0.,2.,clamp((dz-2.)/2.,0.,1.));float mdz=(dz-0.5)*2.;extrude-=extrude*UNPACK_SCALING(a_scaling.x)*mdz;float dwdz=UNPACK_SCALING(a_scaling.y);float sdwdz=sign(step(0.,dwdz)-0.5);offset-=offset*abs(dwdz)*((1.-step(0.,sdwdz))-(dz*-sdwdz));float ssz=exp2(-dz-(u_tile_origin.z-u_tile_origin.w));extrude*=ssz;offset*=ssz;\n#ifdef TANGRAM_BLOCK_WIDTH\nfloat width=1.;\n#pragma tangram: width\nextrude*=width;\n#endif\nposition.xy+=extrude+offset;\n#endif\nv_world_position=wrapWorldPosition(u_model*position);v_local_space_position=position;position=u_modelView*position;\n#pragma tangram: position\nv_position=position;v_normal=normalize(u_normalMatrix*TANGRAM_NORMAL);v_color=a_color;\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvec3 normal=v_normal;\n#pragma tangram: normal\nv_lighting=calculateLighting(position.xyz-u_eye,normal,vec4(1.));\n#endif\ncameraProjection(position);applyLayerOrder(a_position.w+u_tile_proxy_depth+1.,position);\n#if defined(SNAP_TO_PIXEL_GRID)\nsnapToPixelGrid(position);\n#endif\ngl_Position=position;}",shaderSrc_polygonsFragment="uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;\n#ifdef TANGRAM_EXTRUDE_LINES\nuniform bool u_has_line_texture;uniform sampler2D u_texture;uniform float u_texture_ratio;uniform vec4 u_dash_background_color;\n#endif\n#define TANGRAM_NORMAL v_normal\n#if defined(TANGRAM_TEXTURE_COORDS) || defined(TANGRAM_EXTRUDE_LINES)\nvarying vec2 v_texcoord;\n#endif\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nvarying vec4 v_modelpos_base_zoom;\n#endif\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvarying vec4 v_lighting;\n#endif\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\n#pragma tangram: utils\nvoid main(void){\n#pragma tangram: setup\nvec4 color=v_color;vec3 normal=TANGRAM_NORMAL;\n#ifdef TANGRAM_CROP_BY_TILE\nif(isLocalSpacePixelOutsideTile(v_local_space_position,TANGRAM_TILE_SCALE.x)){discard;}\n#endif\n#ifdef TANGRAM_RASTER_TEXTURE_COLOR\ncolor*=sampleRaster();\n#endif\n#ifdef TANGRAM_EXTRUDE_LINES\nif(u_has_line_texture){vec2 _line_st=vec2(v_texcoord.x,fract(v_texcoord.y/u_texture_ratio));vec4 _line_color=texture2D(u_texture,_line_st);if(_line_color.a<TANGRAM_ALPHA_TEST){\n#if !defined(TANGRAM_BLEND_OVERLAY) && !defined(TANGRAM_BLEND_INLAY)\nif(u_dash_background_color.a==0.){discard;}color=u_dash_background_color;\n#else\ncolor=vec4(u_dash_background_color.rgb,color.a*step(TANGRAM_EPSILON,u_dash_background_color.a));\n#endif\n}else{color*=_line_color;}}\n#endif\n#ifdef TANGRAM_RASTER_TEXTURE_NORMAL\nnormal=normalize(sampleRaster().rgb*2.-1.);\n#endif\n#if defined(TANGRAM_LIGHTING_FRAGMENT) && defined(TANGRAM_MATERIAL_NORMAL_TEXTURE)\ncalculateNormal(normal);\n#endif\n#if !defined(TANGRAM_LIGHTING_VERTEX)\n#pragma tangram: normal\n#endif\n#pragma tangram: color\n#if defined(TANGRAM_LIGHTING_FRAGMENT)\ncolor=calculateLighting(v_position.xyz-u_eye,normal,color);\n#elif defined(TANGRAM_LIGHTING_VERTEX)\ncolor*=v_lighting;\n#endif\n#pragma tangram: filter\ngl_FragColor=color;}",Polygons=Object.create(Style);Object.assign(Polygons,{name:"polygons",built_in:!0,vertex_shader_src:shaderSrc_polygonsVertex,fragment_shader_src:shaderSrc_polygonsFragment,selection:!0,init:function(){Style.init.apply(this,arguments),this.defines.TANGRAM_NORMAL_ATTRIBUTE=!0,this.defines.TANGRAM_LAYER_ORDER=!0,this.defines.TANGRAM_CROP_BY_TILE=this.crop_by_tile,this.texcoords&&(this.defines.TANGRAM_TEXTURE_COORDS=!0)},vertexLayoutForMeshVariant:function(){var e;return this.vertex_layout||(e=[{name:"a_position",size:4,type:gl$1.SHORT,normalized:!1},{name:"a_normal",size:3,type:gl$1.BYTE,normalized:!0},{name:"a_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_selection_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0}],this.texcoords&&e.push({name:"a_texcoord",size:2,type:gl$1.UNSIGNED_SHORT,normalized:!0}),this.vertex_layout=new VertexLayout(e)),this.vertex_layout},_parseFeature:function(e,n,r){var d=this.feature_style;return d.color=this.parseColor(n.color,r),d.color?(d.z=n.z&&StyleParser.evalCachedDistanceProperty(n.z,r)||StyleParser.defaults.z,d.z*=Geo$1.height_scale,d.extrude=StyleParser.evalProperty(n.extrude,r),d.extrude&&(!0===d.extrude?(d.height=void 0!==e.properties.height?e.properties.height:StyleParser.defaults.height,d.min_height=void 0!==e.properties.min_height?e.properties.min_height:StyleParser.defaults.min_height):"number"==typeof d.extrude?(d.height=d.extrude,d.min_height=0):Array.isArray(d.extrude)&&(d.min_height=d.extrude[0],d.height=d.extrude[1]),d.height*=Geo$1.height_scale,d.min_height*=Geo$1.height_scale),d.tile_edges=n.tile_edges,d):null},_preprocess:function(e){return e.color=StyleParser.createColorPropertyCache(e.color),e.z=StyleParser.createPropertyCache(e.z,StyleParser.parseUnits),e},makeVertexTemplate:function(e){var n=0;return this.vertex_template[n++]=0,this.vertex_template[n++]=0,this.vertex_template[n++]=e.z||0,this.vertex_template[n++]=this.scaleOrder(e.order),this.vertex_template[n++]=0,this.vertex_template[n++]=0,this.vertex_template[n++]=127,this.vertex_template[n++]=255*e.color[0],this.vertex_template[n++]=255*e.color[1],this.vertex_template[n++]=255*e.color[2],this.vertex_template[n++]=255*e.color[3],this.selection&&(this.vertex_template[n++]=255*e.selection_color[0],this.vertex_template[n++]=255*e.selection_color[1],this.vertex_template[n++]=255*e.selection_color[2],this.vertex_template[n++]=255*e.selection_color[3]),this.texcoords&&(this.vertex_template[n++]=0,this.vertex_template[n++]=0),this.vertex_template},buildPolygons:function(e,n,r,d){var m=this.makeVertexTemplate(n),g={texcoord_index:this.vertex_layout.index.a_texcoord,texcoord_normalize:65535,remove_tile_edges:!n.tile_edges,tile_edge_tolerance:Geo$1.tile_scale*d.tile.pad_scale*4,winding:d.winding};return n.extrude&&n.height?buildExtrudedPolygons(e,n.z,n.height,n.min_height,r.vertex_data,m,this.vertex_layout.index.a_normal,127,g):buildPolygons(e,r.vertex_data,m,g)}});var zero_vec2=[0,0],CAP_TYPE={butt:0,square:1,round:2},JOIN_TYPE={miter:0,bevel:1,round:2},DEFAULT={MITER_LIMIT:3,TEXCOORD_NORMALIZE:1,TEXCOORD_RATIO:1,MIN_FAN_WIDTH:5},v_scale_adjust=Geo$1.tile_scale,zero_v=[0,0],one_v=[1,0],mid_v=[.5,0];function buildPolylines(e,n,r,d,m){var g,v,G=m.texcoord_index,q=m.texcoord_width,_t=m.texcoord_ratio,_r=m.texcoord_normalize,_c=m.join,_u=m.cap,_f=m.miter_limit,sy=_c?JOIN_TYPE[_c]:JOIN_TYPE.miter;sy===JOIN_TYPE.miter&&(g=(_f=_f||DEFAULT.MITER_LIMIT)*_f),G&&(_r=_r||DEFAULT.TEXCOORD_NORMALIZE,v=1/(q*(_t=_t||DEFAULT.TEXCOORD_RATIO)*v_scale_adjust));for(var ly={closed_polygon:m.closed_polygon,remove_tile_edges:m.remove_tile_edges,tile_edge_tolerance:m.tile_edge_tolerance,miter_len_sq:g,join_type:sy,cap_type:_u?CAP_TYPE[_u]:CAP_TYPE.butt,vertex_data:r,vertex_template:d,half_width:n/2,extrude_index:m.extrude_index,offset_index:m.offset_index,v_scale:v,texcoord_index:G,texcoord_width:q,texcoord_normalize:_r,offset:m.offset,geom_count:0,crop_by_tile:m.crop_by_tile},dy=0;dy<e.length;dy++)buildPolyline(e[dy],ly);if(ly.extra_lines)for(var vy=0;vy<ly.extra_lines.length;vy++)buildPolyline(ly.extra_lines[vy],ly);return ly.geom_count}function buildPolyline(e,n){if(!(e.length<2)){var r,d,m=n.join_type,g=n.cap_type,v=n.closed_polygon,w=n.remove_tile_edges,k=n.tile_edge_tolerance,j=n.v_scale,G=n.miter_len_sq,q=n.crop_by_tile,_t=null!=n.texcoord_index,_r=0;if(v&&m===JOIN_TYPE.miter){var _s=getTileBoundaryIndex(e);if(0!==_s){var ga=permuteLine(e,_s);return n.extra_lines=n.extra_lines||[],void n.extra_lines.push(ga)}}var _c=0,_u=e.length-1,_f=0;for(ly=e[_c],dy=e[_c+1];Vector$1.isEqual(ly,dy);)if(ly=dy,dy=e[1+ ++_c],_f++,_c===e.length-1)return;for(;Vector$1.isEqual(e[_u],e[_u-1]);)if(_f++,0==--_u)return;if(!(e.length<2+_f))if(d=Vector$1.normalize(Vector$1.perp(ly,dy)),w&&outsideTile(ly,dy,k)){var _h=getNextNonBoundarySegment(e,_c,k);_h&&(n.extra_lines=n.extra_lines||[],n.extra_lines.push(_h))}else{v?startPolygon(ly,r=Vector$1.normalize(Vector$1.perp(e[_u-1],ly)),d,m,n):(!q&&isCoordOutsideTile(ly)||(addCap(ly,_r,d,g,!0,n),_t&&g!==CAP_TYPE.butt&&(_r+=.5*j*n.texcoord_width)),addVertex(ly,d,d,1,_r,n,1),addVertex(ly,d,d,0,_r,n,-1)),_t&&(_r+=j*Vector$1.length(Vector$1.sub(dy,ly)));for(var ad=_c+1;ad<_u;ad++){var ey=ad,ly=e[ey],dy=e[ad+1];if(!Vector$1.isEqual(ly,dy)){if(w&&outsideTile(ly,dy,k)){addVertex(ly,d,d,1,_r,n,1),addVertex(ly,d,d,0,_r,n,-1),indexPairs(1,n);var vy=getNextNonBoundarySegment(e,ey+1,k);return void(vy&&(n.extra_lines=n.extra_lines||[],n.extra_lines.push(vy)))}r=d,d=Vector$1.normalize(Vector$1.perp(ly,dy)),m===JOIN_TYPE.miter?addMiter(_r,ly,r,d,G,!1,n):addJoin(m,_r,ly,r,d,!1,n),_t&&(_r+=j*Vector$1.length(Vector$1.sub(dy,ly)))}}ly=dy,r=d,v?endPolygon(ly,r,d=Vector$1.normalize(Vector$1.perp(ly,e[1])),m,_r,n):(addVertex(ly,r,d,1,_r,n,1),addVertex(ly,r,d,0,_r,n,-1),indexPairs(1,n),!q&&isCoordOutsideTile(ly)||addCap(ly,_r,r,g,!1,n))}}}function getTileBoundaryIndex(e){if(isCoordOutsideTile(e[0]))return 0;for(var n=0;n<e.length;n++)if(isCoordOutsideTile(e[e.length-1-n]))return e.length-1-n;return 0}function getNextNonBoundarySegment(e,n,r){for(var d=n;e[d+1]&&outsideTile(e[d],e[d+1],r);)d++;return 2<=e.length-d&&e.slice(d)}function startPolygon(e,n,r,d,m){void 0===d||isCoordOutsideTile(e)&&!m.crop_by_tile?(addVertex(e,r,r,1,0,m,1),addVertex(e,r,r,0,0,m,-1)):d===JOIN_TYPE.miter?addMiter(0,e,n,r,m.miter_len_sq,!0,m):addJoin(d,0,e,n,r,!0,m)}function endPolygon(e,n,r,d,m,g){var v;isCoordOutsideTile(e)&&!g.crop_by_tile?(addVertex(e,n,n,1,m,g,1),addVertex(e,n,n,0,m,g,-1)):(v=createMiterVec(n,r),d===JOIN_TYPE.miter&&Vector$1.lengthSq(v)>g.miter_len_sq&&(d=JOIN_TYPE.bevel),d===JOIN_TYPE.miter?(addVertex(e,v,n,1,m,g,1),addVertex(e,v,n,0,m,g,-1)):(addVertex(e,n,n,1,m,g,1),addVertex(e,n,n,0,m,g,-1))),indexPairs(1,g)}function createMiterVec(e,n){var r=Vector$1.normalize(Vector$1.add(e,n)),d=2/(1+Math.abs(Vector$1.dot(e,r)));return Vector$1.mult(r,d*d)}function addMiter(e,n,r,d,m,g,v){var w=createMiterVec(r,d);Vector$1.lengthSq(w)>m?addJoin(JOIN_TYPE.bevel,e,n,r,d,g,v):(addVertex(n,w,w,1,e,v,1),addVertex(n,w,w,0,e,v,-1),g||indexPairs(1,v))}function addJoin(e,n,r,d,m,g,v){var w=createMiterVec(d,m),k=0<m[0]*d[1]-m[1]*d[0];null!=v.texcoord_index&&(zero_v[1]=n,one_v[1]=n),k?(addVertex(r,w,w,1,n,v,1),addVertex(r,d,w,0,n,v,-1),g||indexPairs(1,v),addFan(r,Vector$1.neg(d),w,Vector$1.neg(m),w,zero_v,one_v,zero_v,!1,e===JOIN_TYPE.bevel,v),addVertex(r,w,w,1,n,v,1),addVertex(r,m,w,0,n,v,-1)):(addVertex(r,d,w,1,n,v,1),addVertex(r,w,w,0,n,v,-1),g||indexPairs(1,v),addFan(r,d,Vector$1.neg(w),m,w,one_v,zero_v,one_v,!1,e===JOIN_TYPE.bevel,v),addVertex(r,m,w,1,n,v,1),addVertex(r,w,w,0,n,v,-1))}function indexPairs(e,n){for(var r=n.vertex_data.vertex_elements,d=n.vertex_data.vertex_count-2*e-2,m=0;m<e;m++)r.push(d+2*m+2),r.push(d+2*m+1),r.push(d+2*m),r.push(d+2*m+2),r.push(d+2*m+3),r.push(d+2*m+1),n.geom_count+=2}function addVertex(e,n,r,d,m,g,v){var w=g.vertex_template,k=g.vertex_data;w[0]=e[0],w[1]=e[1];var j=g.half_width*v;w[g.extrude_index+0]=n[0]*j,w[g.extrude_index+1]=n[1]*j,g.offset&&(w[g.offset_index+0]=r[0]*g.offset,w[g.offset_index+1]=r[1]*g.offset),null!=g.texcoord_index&&(w[g.texcoord_index+0]=d*g.texcoord_normalize,w[g.texcoord_index+1]=m*g.texcoord_normalize),k.addVertex(w)}var uvCurr=[0,0];function addFan(e,n,r,d,m,g,v,w,k,j,G){for(var q=n[0]*d[1]-n[1]*d[0],_t=Vector$1.dot(n,d),_r=Math.atan2(q,_t);_r>=Math.PI;)_r-=2*Math.PI;if(j)_s=1;else{var _s=trianglesPerArc(_r,G.half_width);if(_s<1)return}var ga=G.vertex_data.vertex_count,_c=G.vertex_data.vertex_elements;addVertex(e,r,m,v[0],v[1],G,1),addVertex(e,n,m,g[0],g[1],G,1);var _u,_f,_h=n,ad=null!=G.texcoord_index;ad&&(k?_u=Vector$1.sub(g,v):(uvCurr=Vector$1.copy(g),_f=Vector$1.div(Vector$1.sub(w,g),_s)));for(var ey,sy=_r/_s,ly=_r<0?-1:1,dy=0<q?(ey=2,1):(ey=1,2),vy=0;vy<_s;vy++)0===vy&&_r<0&&(_h=Vector$1.neg(_h)),_h=Vector$1.rot(_h,sy),ad&&(k?(_u=Vector$1.rot(_u,sy),uvCurr[0]=_u[0]+v[0],uvCurr[1]=_u[1]*G.texcoord_width*G.v_scale+v[1]):uvCurr=Vector$1.add(uvCurr,_f)),addVertex(e,_h,m,uvCurr[0],uvCurr[1],G,ly),_c.push(ga+vy+ey),_c.push(ga),_c.push(ga+vy+dy)}function addCap(e,n,r,d,m,g){var v,w=Vector$1.neg(r),k=null!=g.texcoord_index;switch(d){case CAP_TYPE.square:m?(addVertex(e,Vector$1.add(r,v=[r[1],-r[0]]),r,1,n,g,1),addVertex(e,Vector$1.add(w,v),r,0,n,g,1),k&&(n+=.5*g.texcoord_width*g.v_scale),addVertex(e,r,r,1,n,g,1),addVertex(e,w,r,0,n,g,1)):(v=[-r[1],r[0]],addVertex(e,r,r,1,n,g,1),addVertex(e,w,r,0,n,g,1),k&&(n+=.5*g.texcoord_width*g.v_scale),addVertex(e,Vector$1.add(r,v),r,1,n,g,1),addVertex(e,Vector$1.add(w,v),r,0,n,g,1)),indexPairs(1,g);break;case CAP_TYPE.round:var j,G,q=zero_v,_t=one_v,_r=mid_v;m?(j=r,G=w,k&&(n+=.5*g.texcoord_width*g.v_scale,q=one_v,_t=zero_v,_r=mid_v)):(j=w,G=r),k&&(zero_v[1]=n,one_v[1]=n,mid_v[1]=n),addFan(e,j,zero_vec2,G,r,q,_r,_t,!0,!1,g);break;case CAP_TYPE.butt:return}}function trianglesPerArc(e,n){e<0&&(e=-e);var r=n>2*DEFAULT.MIN_FAN_WIDTH?Math.log2(n/DEFAULT.MIN_FAN_WIDTH):1;return Math.ceil(e/Math.PI*r)}function permuteLine(e,n){for(var r=[],d=0;d<e.length;d++){var m=(d+n)%e.length;0!=m&&r.push(e[m])}return r.push(r[0]),r}var default_dash_color=[255,255,255,255],default_background_color=[0,0,0,0];function renderDashArray(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=n.dash_color||default_dash_color,d=n.background_color||default_background_color,m=e,g=n.scale||1;m.length%2==1&&Array.prototype.push.apply(m,m);for(var v=!0,w=[],k=0;k<m.length;k++){for(var j=Math.floor(m[k]*g),G=0;G<j;G++)Array.prototype.push.apply(w,v?r:d);v=!v}return{pixels:w=new Uint8Array(w),length:w.length/4}}var Lines=Object.create(Style);Lines.vertex_layouts=[[],[]],Lines.dash_textures={};var DASH_SCALE=20;function buildPolylines$1(e,n,r,d,m,g){for(var v={closed:g,vertex_data:r,vertex_template:d,half_width:n/2,vertex_layout_index:m,geom_count:0},w=0,k=e.length;w<k;w++)buildPolyline$1(e[w],v);return v.geom_count}function buildPolyline$1(e,n){if(!(e.length<2)){for(var r,d,m=[e[0]],g=0,v=[],w=[],k=1,j=e.length;k<j;k++)e[k][0]===e[k-1][0]&&e[k][1]===e[k-1][1]||(m.push(e[k]),r=Vector$1.sub(e[k],e[k-1]),d=Vector$1.length(r),v.push(r),w.push([g,g+d]),g+=d);if(!(m.length<2)){var G=0,q=v[v.length-1],_t=v[0],_r=v[1],_s=[0,0];2<m.length&&(n.closed&&(_s[0]=Vector$1.signedAngleBetween(q,_t)),_s[1]=Vector$1.signedAngleBetween(_t,_r));var ga=m[0],_c=w[0];n.closed?(addVertex$1(ga,n,G++,_c,g,_s,[q,_t]),addVertex$1(ga,n,G++,_c,g,_s,[q,_t])):(addVertex$1(ga,n,G++,_c,g,_s,[_t,_t]),addVertex$1(ga,n,G++,_c,g,_s,[_t,_t]));for(var _u=1,_f=m.length-1;_u<_f;_u++)_r=v[_u+1],addVertex$1(ga=m[_u],n,G++,_c=w[_u-1],g,_s,[q=v[_u-1],_t=v[_u]]),addVertex$1(ga,n,G++,_c,g,_s,[q,_t]),triangulate(n),_c=w[_u],_s[0]=_s[1],_s[1]=_u!==_f-1?Vector$1.signedAngleBetween(_t,_r):n.closed?Vector$1.signedAngleBetween(_t,v[0]):0,addVertex$1(ga,n,G++,_c,g,_s,[q,_t]),addVertex$1(ga,n,G++,_c,g,_s,[q,_t]);ga=m[m.length-1],_c=w[w.length-1],_t=v[v.length-1],n.closed?(addVertex$1(ga,n,G++,_c,g,_s,[_t,v[0]]),addVertex$1(ga,n,G++,_c,g,_s,[_t,v[0]])):(addVertex$1(ga,n,G++,_c,g,_s,[_t,_t]),addVertex$1(ga,n,G++,_c,g,_s,[_t,_t])),triangulate(n)}}}function triangulate(e){var n=e.vertex_data.vertex_elements,r=e.vertex_data.vertex_count-4;n.push(2+r),n.push(1+r),n.push(r),n.push(2+r),n.push(3+r),n.push(1+r),e.geom_count+=2}Object.assign(Lines,{name:"lines",built_in:!0,vertex_shader_src:shaderSrc_polygonsVertex,fragment_shader_src:shaderSrc_polygonsFragment,selection:!0,init:function(){Style.init.apply(this,arguments),this.styles=this.styles||{},this.defines.TANGRAM_LAYER_ORDER=!0,this.defines.TANGRAM_EXTRUDE_LINES=!0,this.defines.TANGRAM_CROP_BY_TILE=this.crop_by_tile,this.defines.TANGRAM_TEXTURE_COORDS=!0,this.outline_feature_style={},this.inline_feature_style=this.feature_style},calcDistance:function(e,n){return e&&StyleParser.evalCachedDistanceProperty(e,n)||0},calcDistanceNextZoom:function(e,n){n.zoom++;var r=this.calcDistance(e,n);return n.zoom--,r},calcWidth:function(e,n,r){var d=this.calcDistance(e.width,r);if(!(d<0)){var m,g=e.next_width?this.calcDistanceNextZoom(e.next_width,r):d/2;return!(0===d&&0===g||g<0||(n.width_unscaled=d,n.next_width_unscaled=g,e.next_width?(m=.5*(d+(g*=2)),n.width=m*r.units_per_meter_overzoom,n.width_scale=1-g/m):(n.width=d*r.units_per_meter_overzoom,n.width_scale=0),e.texcoords&&(n.texcoord_width=e.inline_texcoord_width?e.inline_texcoord_width:(n.width_unscaled||n.next_width_unscaled)*r.units_per_meter_overzoom/r.tile.overzoom2),0))}},calcOffset:function(e,n,r){var d,m;e.offset_precalc?(n.offset=e.offset_precalc,n.offset_scale=e.offset_scale_precalc):e.offset?(d=this.calcDistance(e.offset,r),e.next_offset?(m=2*this.calcDistanceNextZoom(e.next_offset,r),Math.abs(d)>=Math.abs(m)?(n.offset=d*r.units_per_meter_overzoom,n.offset_scale=0!==d?1-m/d:0):(n.offset=m*r.units_per_meter_overzoom,n.offset_scale=0!=m?-1*(1-d/m):0)):(n.offset=d*r.units_per_meter_overzoom,n.offset_scale=0)):(n.offset=0,n.offset_scale=0),StyleParser.evalProperty(e.offset_reverse,r)&&(n.offset*=-1)},_parseFeature:function(e,n,r){var d,m,g=this.feature_style;if(!1!==this.calcWidth(n,g,r)&&(this.calcOffset(n,g,r),g.color=this.parseColor(n.color,r),g.color))return g.variantKey=n.variantKey,g.z=n.z&&StyleParser.evalCachedDistanceProperty(n.z||0,r)||StyleParser.defaults.z,g.height=e.properties.height||StyleParser.defaults.height,g.extrude=StyleParser.evalProperty(n.extrude,r),g.extrude&&("number"==typeof g.extrude?g.height=g.extrude:Array.isArray(g.extrude)&&(g.height=g.extrude[1])),g.extrude&&g.height&&(g.z+=g.height),g.z*=Geo$1.height_scale,g.height*=Geo$1.height_scale,g.cap=StyleParser.evalProperty(n.cap,r),g.join=StyleParser.evalProperty(n.join,r),g.miter_limit=StyleParser.evalProperty(n.miter_limit,r),g.tile_edges=n.tile_edges,g.outline=g.outline||{width:{},next_width:{},preprocessed:!0},n.outline&&!1!==n.outline.visible&&n.outline.color&&n.outline.width?(d=2*this.calcDistance(n.outline.width,r),m=2*this.calcDistanceNextZoom(n.outline.next_width,r),0==d&&0==m||d<0||m<0?(g.outline.width.value=null,g.outline.next_width.value=null,g.outline.color=null,g.outline.inline_texcoord_width=null,g.outline.texcoords=!1):(g.outline.width.value=d+g.width_unscaled,g.outline.next_width.value=m+g.next_width_unscaled,g.outline.inline_texcoord_width=g.texcoord_width,g.outline.offset_precalc=g.offset,g.outline.offset_scale_precalc=g.offset_scale,g.outline.color=n.outline.color,g.outline.cap=n.outline.cap,g.outline.join=n.outline.join,g.outline.miter_limit=n.outline.miter_limit,g.outline.texcoords=n.outline.texcoords,g.outline.style=n.outline.style,g.outline.variantKey=n.outline.variantKey,g.outline.order=n.outline.order?this.parseOrder(n.outline.order,r):g.order,g.outline.order>g.order&&(g.outline.order=g.order),g.outline.order-=.5,g.outline.variant_order=0)):(g.outline.width.value=null,g.outline.next_width.value=null,g.outline.color=null,g.outline.inline_texcoord_width=null),g},_preprocess:function(e,n){var r,d=this.sources[n]?this.sources[n].config.uid:"";return e.color=StyleParser.createColorPropertyCache(e.color),e.width=StyleParser.createPropertyCache(e.width,StyleParser.parseUnits),e.width&&e.width.type!==StyleParser.CACHE_TYPE.STATIC&&(e.next_width=StyleParser.createPropertyCache(e.width,StyleParser.parseUnits)),e.offset=e.offset&&StyleParser.createPropertyCache(e.offset,StyleParser.parseUnits),e.offset&&e.offset.type!==StyleParser.CACHE_TYPE.STATIC&&(e.next_offset=StyleParser.createPropertyCache(e.offset,StyleParser.parseUnits)),e.z=StyleParser.createPropertyCache(e.z,StyleParser.parseUnits),e.dash=void 0!==e.dash?e.dash:this.dash,e.dash_key=e.dash&&this.dashTextureKey(e.dash,d),e.dash_background_color=void 0!==e.dash_background_color?e.dash_background_color:this.dash_background_color,e.dash_background_color=e.dash_background_color&&StyleParser.parseColor(e.dash_background_color),e.texture_merged=e.dash_key||(void 0!==e.texture?e.texture:this.texture),e.texcoords=this.texcoords||e.texture_merged?1:0,this.addMeshVariantForDraw(this.base,e),e.outline&&(e.outline.style=e.outline.style||this.name,e.outline.color=StyleParser.createColorPropertyCache(e.outline.color),e.outline.width=StyleParser.createPropertyCache(e.outline.width,StyleParser.parseUnits),e.outline.next_width=StyleParser.createPropertyCache(e.outline.width,StyleParser.parseUnits),e.outline.cap=e.outline.cap||e.cap,e.outline.join=e.outline.join||e.join,e.outline.miter_limit=e.outline.miter_limit||e.miter_limit,e.outline.offset=e.offset,(r=this.styles[e.outline.style])?(e.outline.dash=void 0!==e.outline.dash?e.outline.dash:r.dash,e.outline.texture=void 0!==e.outline.texture?e.outline.texture:r.texture,null!=e.outline.dash?(e.outline.dash_key=e.outline.dash&&this.dashTextureKey(e.outline.dash,d),e.outline.texture_merged=e.outline.dash_key):null===e.outline.dash||null!=e.outline.texture?(e.outline.dash_key=null,e.outline.texture_merged=e.outline.texture):(e.outline.dash=e.dash,e.outline.dash_key=e.outline.dash&&this.dashTextureKey(e.outline.dash,d),e.outline.texture_merged=e.outline.dash_key),e.outline.dash_background_color=void 0!==e.outline.dash_background_color?e.outline.dash_background_color:r.dash_background_color,e.outline.dash_background_color=void 0!==e.outline.dash_background_color?e.outline.dash_background_color:e.dash_background_color,e.outline.dash_background_color=e.outline.dash_background_color&&StyleParser.parseColor(e.outline.dash_background_color),e.outline.texcoords=r.texcoords||e.outline.texture_merged?1:0,this.addMeshVariantForDraw(this.base,e.outline)):(log({level:"warn",once:!0},"Layer '".concat(e.layers[e.layers.length-1],"': ")+"line 'outline' specifies non-existent draw style '".concat(e.outline.style,"' (or maybe the style is ")+"defined but is missing a 'base' or has another error), skipping outlines in layer"),e.outline=null)),e},dashTextureKey:function(e,n){return"__dash_"+n+"_"+this.scene_id+"_"+JSON.stringify(e)},getDashTexture:function(e,n){var r,d=this.dashTextureKey(e,this.sources[n].config.uid);null==Lines.dash_textures[d]&&(Lines.dash_textures[d]=!0,r=renderDashArray(e,{scale:DASH_SCALE}),this.textureManager.create(this.gl,d,{data:r.pixels,height:r.length,width:1,filtering:"nearest"}))},endData:function(e){var n=this;return Style.endData.call(this,e).then(function(r){if(r){r.uniforms.u_has_line_texture=!1,r.uniforms.u_texture=n.textureManager.default,r.uniforms.u_v_scale_adjust=Geo$1.tile_scale;var d=[];for(var m in r.meshes)!function(g){var v,w,k=r.meshes[g].variant;k.texture&&((v=r.meshes[g].uniforms=r.meshes[g].uniforms||{}).u_has_line_texture=!0,v.u_texture=k.texture,v.u_texture_ratio=1,k.dash&&(v.u_v_scale_adjust=Geo$1.tile_scale*DASH_SCALE,v.u_dash_background_color=k.dash_background_color||[0,0,0,0]),k.dash_key&&null==Lines.dash_textures[k.dash_key]&&(Lines.dash_textures[k.dash_key]=!0,WorkerBroker.postMessage(n.main_thread_target+".getDashTexture",k.dash,e.source)),null==n.textureManager.textures[k.texture]?d.push(n.textureManager.syncTexturesToWorker([k.texture]).then(function(j){var G=j[k.texture];G&&(v.u_texture_ratio=G.height/G.width)})):v.u_texture_ratio=(w=n.textureManager.textures[k.texture]).height/w.width)}(m);return e.mesh_data[n.name]=r,Promise.all(d).then(function(){return r})}return r})},computeVariantForDraw:function(e){var n=e.offset?1:0;return e.dash_key&&(n+=e.dash_key,e.dash_background_color&&(n+=e.dash_background_color)),e.texture_merged&&(n+=e.texture_merged),n=hashString(n+="/"+e.texcoords),{key:e.variantKey=n,order:e.variant_order,offset:e.offset?1:0,texcoords:e.texcoords,texture:e.texture_merged,dash:e.dash,dash_key:e.dash_key,dash_background_color:e.dash_background_color}},vertexLayoutForMeshVariant:function(e){return null==Lines.vertex_layouts[e.key]&&(Lines.vertex_layouts[e.key]=new VertexLayout([{name:"a_position",size:4,type:gl$1.SHORT,normalized:!1},{name:"a_extrude",size:2,type:gl$1.SHORT,normalized:!1},{name:"a_offset",size:2,type:gl$1.SHORT,normalized:!1,static:e.offset?null:[0,0]},{name:"a_scaling",size:2,type:gl$1.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:gl$1.UNSIGNED_SHORT,normalized:!0,static:e.texcoords?null:[0,0]},{name:"a_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_selection_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0}])),Lines.vertex_layouts[e.key]},makeVertexTemplate:function(e,n){var r=0;return this.vertex_template[r++]=0,this.vertex_template[r++]=0,this.vertex_template[r++]=e.z||0,this.vertex_template[r++]=this.scaleOrder(e.order),this.vertex_template[r++]=0,this.vertex_template[r++]=0,n.variant.offset&&(this.vertex_template[r++]=0,this.vertex_template[r++]=0),this.vertex_template[r++]=1024*e.width_scale,this.vertex_template[r++]=1024*e.offset_scale,n.variant.texcoords&&(this.vertex_template[r++]=0,this.vertex_template[r++]=0),this.vertex_template[r++]=255*e.color[0],this.vertex_template[r++]=255*e.color[1],this.vertex_template[r++]=255*e.color[2],this.vertex_template[r++]=255*e.color[3],this.selection&&(this.vertex_template[r++]=255*e.selection_color[0],this.vertex_template[r++]=255*e.selection_color[1],this.vertex_template[r++]=255*e.selection_color[2],this.vertex_template[r++]=255*e.selection_color[3]),this.vertex_template},buildLines:function(e,n,r,d,m){var g;this.feature_style=this.outline_feature_style,!n.outline||null==n.outline.color||null==n.outline.width.value||(g=this.styles[n.outline.style])&&g.addFeature(d.feature,n.outline,d),this.feature_style=this.inline_feature_style;var v=r.vertex_data,w=v.vertex_layout,k=this.makeVertexTemplate(n,r);return buildPolylines(e,n.width,v,k,{cap:n.cap,join:n.join,miter_limit:n.miter_limit,extrude_index:w.index.a_extrude,offset_index:w.index.a_offset,texcoord_index:w.index.a_texcoord,texcoord_width:n.texcoord_width,texcoord_normalize:65535,closed_polygon:m&&m.closed_polygon,remove_tile_edges:!n.tile_edges&&m&&m.remove_tile_edges,tile_edge_tolerance:Geo$1.tile_scale*d.tile.pad_scale*2,offset:n.offset,crop_by_tile:this.crop_by_tile})},buildPolygons:function(e,n,r,d){for(var m=0,g=0;g<e.length;g++)m+=this.buildLines(e[g],n,r,d,{closed_polygon:!0,remove_tile_edges:!this.crop_by_tile});return m}});var TEX_COORDS=[[1,1],[1,-1],[-1,1],[-1,-1]];function addVertex$1(e,n,r,d,m,g,v){var w,k=n.vertex_template,j=n.vertex_data;setAttribute(n,"a_position",e),setAttribute(n,"a_width",n.half_width),n.vertex_layout_index.a_barycentric&&((w=[0,0,0])[r%3]=1,setAttribute(n,"a_barycentric",w)),setAttribute(n,"a_tangents",v[0].concat(v[1])),setAttribute(n,"a_segment",d),setAttribute(n,"a_texcoord",TEX_COORDS[r%4]),setAttribute(n,"a_length",m),setAttribute(n,"a_closed",n.closed?1:0),setAttribute(n,"a_angles",g),j.addVertex(k)}function setAttribute(e,n,r){var d=r.length,m=e.vertex_template,g=e.vertex_layout_index[n],v=0;if(d)for(;v!==d;)m[g+v]=r[v],v++;else m[g+v]=r}function buildPatternBuffer(e,n){for(var r=e.reduce(function(_t,_r){return _t+_r}),d=0,m=[],g=0,v=e.length;g<=v;g+=2){var w=Math.max(1e-4,e[g%v]),k=Math.max(1e-4,e[(g+1)%v]);m.push(d,d+w),d+=w+k}for(var j=new Uint8Array(4*n),G=0,q=0;q<n;q++)!function(_t){var _r=r*_t/(n-1),_s=minIdx(m.map(function(_f){return Math.abs(_f-_r)})),ga=void 0,_c=void 0,_u=_s%2==0?(ga=_r<=m[_s]?1:0,_c=m[_s],m[_s+1]):(ga=_r>m[_s]?2:0,_c=m[_s-1],m[_s]);j[G++]=m[_s],j[G++]=ga,j[G++]=_c,j[G++]=_u}(q);return j}function minIdx(e){for(var n=e[0],r=0,d=1,m=e.length;d<m;d++)e[d]<n&&(n=e[r=d]);return r}var vertex_shader_src="uniform vec2 u_resolution;uniform vec4 u_tile_origin;uniform float u_tile_proxy_depth;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform sampler2D u_uniforms;uniform mat4 u_model;uniform mat4 u_modelView;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform vec3 u_map_position;uniform float u_antialias;uniform vec2 u_linecaps;uniform float u_linejoin;uniform float u_miter_limit;uniform float u_dash_index;uniform vec2 u_dash_caps;uniform float u_dash_phase;uniform float u_dash_period;attribute vec4 a_position;attribute vec4 a_color;attribute float a_width;\n#ifdef TANGRAM_DEBUG_TRIANGLES\nattribute vec3 a_barycentric;\n#endif\nattribute vec2 a_normal;attribute float a_length;attribute vec2 a_segment;attribute vec2 a_texcoord;attribute vec2 a_angles;attribute vec4 a_tangents;attribute float a_closed;varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;\n#ifdef TANGRAM_DEBUG_TRIANGLES\nvarying vec3 v_barycentric;\n#endif\nvarying vec2 v_segment;varying vec2 v_angles;varying vec2 v_texcoord;varying vec2 v_distances;varying vec2 v_miter;varying float v_length;varying float v_linewidth_and_closed;varying float v_joinIndicator;\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nvarying vec4 v_modelpos_base_zoom;\n#endif\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvarying vec4 v_lighting;\n#endif\n#ifndef TANGRAM_HEIGHT_SCALE\nfloat TANGRAM_HEIGHT_SCALE=16.0;\n#endif\n#define UNPACK_SCALING(x) (x / 1024.)\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: global\nconst float PI=3.141592653589793;const float THETA=15.0*PI/180.0;float cross(in vec2 v1,in vec2 v2){return v1.x*v2.y-v1.y*v2.x;}float signed_distance(in vec2 v1,in vec2 v2,in vec2 v3){return cross(v2-v1,v1-v3)/length(v2-v1);}void rotate(in vec2 v,in float angle,out vec2 result){float cosine=cos(angle);float sine=sin(angle);result=vec2(cosine*v.x-sine*v.y,sine*v.x+cosine*v.y);}void main(){\n#pragma tangram: setup\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nv_modelpos_base_zoom=modelPositionBaseZoom();\n#endif\nfloat linewidth=a_width*2.0;v_angles=a_angles;v_segment=a_segment;v_color=a_color;v_length=a_length;v_texcoord=a_texcoord;\n#ifdef TANGRAM_DEBUG_TRIANGLES\nv_barycentric=a_barycentric;\n#endif\nv_color.a=min(linewidth,v_color.a);linewidth=max(linewidth,1.0);linewidth/=exp2(u_map_position.z-u_tile_origin.w);v_linewidth_and_closed=linewidth*(a_closed>0.0 ?-1.0 : 1.0);if(v_color.a<=0.0){gl_Position=vec4(0.0,0.0,0.0,1.0);return;}float width=ceil(1.25*u_antialias+linewidth)/2.0;vec2 t1=normalize(a_tangents.xy);vec2 t2=normalize(a_tangents.zw);float u=a_texcoord.x;u*=-1.0;float v=a_texcoord.y;vec4 position=vec4(a_position.xy,a_position.z/TANGRAM_HEIGHT_SCALE,1.0);if(t1!=t2){float angle=a_texcoord.x==1.0 ? a_angles.x : a_angles.y;vec2 t=normalize(t1+t2);vec2 o=vec2(+t.y,-t.x);float segmentLength=a_segment.y-a_segment.x;float magnitude=width/cos(angle/2.0);float sqMagnitude=magnitude*magnitude;float seg1SqMagnitude=dot(a_tangents.xy,a_tangents.xy);float seg2SqMagnitude=dot(a_tangents.zw,a_tangents.zw);if((abs(magnitude)>linewidth)&&(sqMagnitude>=min(seg1SqMagnitude,seg2SqMagnitude))){if(u==1.0){o=vec2(-t2.y,+t2.x);}else{o=vec2(-t1.y,+t1.x);}magnitude=width;angle=0.0;v_angles.x=0.0;v_angles.y=0.0;}if(u_dash_index>0.0){if((abs(angle)>THETA)){position.xy+=v*width*o/cos(angle/2.0);float s=sign(angle);if(angle<0.0){if(u==+1.0){u=v_segment.y+v*width*tan(angle/2.0);if(v==1.0){position.xy-=2.0*width*t1/sin(angle);u-=2.0*width/sin(angle);}}else{u=v_segment.x-v*width*tan(angle/2.0);if(v==1.0){position.xy+=2.0*width*t2/sin(angle);u+=2.0*width/sin(angle);}}}else{if(u==+1.0){u=v_segment.y+v*width*tan(angle/2.0);if(v==-1.0){position.xy+=2.0*width*t1/sin(angle);u+=2.0*width/sin(angle);}}else{u=v_segment.x-v*width*tan(angle/2.0);if(v==-1.0){position.xy-=2.0*width*t2/sin(angle);u-=2.0*width/sin(angle);}}}}else{position.xy+=v*width*o/cos(angle/2.0);if(u==+1.0){u=v_segment.y;}else{u=v_segment.x;}}}else{position.xy+=v*o*magnitude;if(u==+1.0){u=v_segment.y+v*width*tan(angle/2.0);}else{u=v_segment.x-v*width*tan(angle/2.0);}}v_joinIndicator=(segmentLength+v*width*tan(angle/2.0))/segmentLength;}else{v_joinIndicator=-1.0;vec2 o=vec2(+t1.y,-t1.x);position.xy+=v*width*o;if(u==-1.0){u=v_segment.x-width;position.xy-=width*t1;}else{u=v_segment.y+width;position.xy+=width*t2;}}vec2 t;vec2 curr=a_position.xy;if(a_texcoord.x>=0.0){vec2 next=curr+t2*(v_segment.y-v_segment.x);rotate(t1,+a_angles.x/2.0,t);v_miter.x=signed_distance(curr,curr+t,position.xy);rotate(t2,+a_angles.y/2.0,t);v_miter.y=signed_distance(next,next+t,position.xy);}else{vec2 prev=curr-t1*(v_segment.y-v_segment.x);rotate(t1,-a_angles.x/2.0,t);v_miter.x=signed_distance(prev,prev+t,position.xy);rotate(t2,-a_angles.y/2.0,t);v_miter.y=signed_distance(curr,curr+t,position.xy);}v_distances=vec2(u,v*width);v_world_position=wrapWorldPosition(u_model*position);v_local_space_position=position;position=u_modelView*position;\n#pragma tangram: position\nv_position=position;v_normal=normalize(u_normalMatrix*TANGRAM_NORMAL);\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvec3 normal=v_normal;\n#pragma tangram: normal\nv_lighting=calculateLighting(position.xyz-u_eye,normal,vec4(1.));\n#endif\ncameraProjection(position);\n#ifdef TANGRAM_LAYER_ORDER\napplyLayerOrder(a_position.w+u_tile_proxy_depth+1.,position);\n#endif\ngl_Position=position;}",fragment_shader_src="uniform vec2 u_resolution;uniform vec4 u_tile_origin;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform sampler2D u_dash_atlas;uniform float u_antialias;uniform vec2 u_linecaps;uniform float u_linejoin;uniform float u_miter_limit;uniform float u_dash_phase;uniform float u_dash_period;uniform float u_dash_index;uniform vec2 u_dash_caps;varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;\n#ifdef TANGRAM_DEBUG_TRIANGLES\nvarying vec3 v_barycentric;\n#endif\nvarying vec2 v_segment;varying vec2 v_angles;varying vec2 v_texcoord;varying vec2 v_distances;varying vec2 v_miter;varying float v_length;varying float v_linewidth_and_closed;varying float v_joinIndicator;\n#define TANGRAM_NORMAL v_normal\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nvarying vec4 v_modelpos_base_zoom;\n#endif\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvarying vec4 v_lighting;\n#endif\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: global\n#pragma tangram: utils\nconst float PI=3.141592653589793;const float HALF_PI=PI/2.0;const float THETA=15.0*PI/180.0;/***Compute distance to cap.*@param{int}type The Type of the cap(see CAP_TYPE in pattern_lines)*@param{float}dx The distance of the pixel from the beginning of the line(not straight distance,but along the legs)*@param{float}dy The distance of the pixel from the midline(see v_distances in vertex shader,aka \xb11*half_line_width)*@param{float}aa_radius The distance from the mid-line from where antialiasing starts.*For example for a linewidth 10px width and 2px filter radius it is 10px/2-2px=3px.*@return{float}distance*/float cap(int type,float dx,float dy,float aa_radius){float dist=0.0;dx=abs(dx);dy=abs(dy);if(type==1)dist=sqrt(dx*dx+dy*dy);else if(type==3)dist=(dx+abs(dy));else if(type==2)dist=max(abs(dy),(aa_radius+dx-abs(dy)));else if(type==4)dist=max(dx,dy);else if(type==5)dist=max(dx+aa_radius,dy);return dist;}/***Compute distance to join.*@param{int}type The type of the join(see JOIN_TYPE in pattern_lines)*@param{vec2}segment Interpolated a_segment attribute from the vertex shader*@param{vec2}texcoord Pair of u/v coordinates to identify the 4 different extruded points of the segment.*@param{vec2}distances 2 component vector where:*x is the distance of the pixel from the beginning of the line(along the legs)*y is the  distance of the pixel from the midline(see v_distances in vertex shader,\xb11*half_line_width)*@param{vec2}miter Miter point coordiante*@param{float}miter_limit The miter limit*@param{float}linewidth The width of the line*@return{float}computed distance*/float join(in int type,in vec2 segment,in vec2 texcoord,in vec2 distances,in vec2 miter,in float miter_limit,in float linewidth){float dx=distances.x;float result=abs(distances.y);if((dx<segment.x)||(dx>segment.y)){if(type==1){float s=dx<segment.x ? segment.x : segment.y;result=max(result,length(distances-vec2(s,0.0)));}else{float m=abs(texcoord.x>=0.0 ? miter.x : miter.y);if(type==2){result=max(result,m);}else if(type==0){result=max(result,m-miter_limit*linewidth/2.0);}}}return result;}void main(void){\n#pragma tangram: setup\nvec4 color=v_color;vec3 normal=TANGRAM_NORMAL;\n#ifdef TANGRAM_CROP_BY_TILE\nif(isLocalSpacePixelOutsideTile(v_local_space_position,TANGRAM_TILE_SCALE.x)){discard;}\n#endif\n#if defined(TANGRAM_LIGHTING_FRAGMENT) && defined(TANGRAM_MATERIAL_NORMAL_TEXTURE)\ncalculateNormal(normal);\n#endif\n#if !defined(TANGRAM_LIGHTING_VERTEX)\n#pragma tangram: normal\n#endif\n#pragma tangram: color\n#if defined(TANGRAM_LIGHTING_FRAGMENT)\ncolor=calculateLighting(v_position.xyz-u_eye,normal,color);\n#elif defined(TANGRAM_LIGHTING_VERTEX)\ncolor*=v_lighting;\n#endif\n#pragma tangram: filter\nif(v_color.a<=0.0){discard;}bool solid=(u_dash_index==0.0);bool closed=v_linewidth_and_closed<0.0;float dx=v_distances.x;float dy=v_distances.y;float linewidth=abs(v_linewidth_and_closed);float aa_radius=linewidth/2.0-u_antialias;float dist=0.0;vec2 linecaps=u_linecaps;vec2 dash_caps=u_dash_caps;float line_start=0.0;float line_stop=v_length;if(solid){dist=abs(dy);bool potentialCap=!closed&&v_joinIndicator<0.0;if(potentialCap&&dx<line_start){dist=cap(int(u_linecaps.x),abs(dx),abs(dy),aa_radius);}else if(potentialCap&&dx>line_stop){dist=cap(int(u_linecaps.y),abs(dx)-line_stop,abs(dy),aa_radius);}else{dist=join(int(u_linejoin),v_segment,v_texcoord,v_distances,v_miter,u_miter_limit,linewidth);}}else{float segment_start=v_segment.x;float segment_stop=v_segment.y;float segment_center=(segment_start+segment_stop)/2.0;float freq=u_dash_period*linewidth;float dash_phase=u_dash_phase-1e-5;float u=mod(dx+dash_phase*linewidth,freq);vec4 tex=texture2D(u_dash_atlas,vec2(u/freq,u_dash_index));float dash_center=float(tex.x)*255.0*linewidth;float dash_type=floor(float(tex.y)*255.0+0.5);float _start=float(tex.z)*255.0*linewidth;float _stop=float(tex.a)*255.0*linewidth;float dash_start=dx-u+_start;float dash_stop=dx-u+_stop;if((dash_stop<segment_start)&&(dash_caps.x!=5.0)){float u=mod(segment_start+dash_phase*linewidth,freq);vec4 tex=texture2D(u_dash_atlas,vec2(u/freq,u_dash_index));dash_center=float(tex.x)*255.0*linewidth;float _start=float(tex.z)*255.0*linewidth;float _stop=float(tex.a)*255.0*linewidth;dash_start=segment_start-u+_start;dash_stop=segment_start-u+_stop;}else if((dash_start>segment_stop)&&(dash_caps.y!=5.0)){float u=mod(segment_stop+dash_phase*linewidth,freq);vec4 tex=texture2D(u_dash_atlas,vec2(u/freq,u_dash_index));dash_center=float(tex.x)*255.0*linewidth;float _start=float(tex.z)*255.0*linewidth;float _stop=float(tex.a)*255.0*linewidth;dash_start=segment_stop-u+_start;dash_stop=segment_stop-u+_stop;}bool discontinuous=((dx<segment_center)&&abs(v_angles.x)>THETA)||((dx>=segment_center)&&abs(v_angles.y)>THETA);float d_join=join(int(u_linejoin),v_segment,v_texcoord,v_distances,v_miter,u_miter_limit,linewidth);if(closed){line_start+=linewidth/2.0;line_stop-=linewidth/2.0;}if(dash_stop<=line_start){discard;}if(dash_start>=line_stop){discard;}if(discontinuous){if((dash_start>segment_stop)){discard;}if((dash_stop<segment_start)){discard;}if(dash_caps.x==1.0){if((u>_stop)&&(dash_stop>segment_stop)&&(abs(v_angles.y)<HALF_PI)){discard;}}if(dash_caps.y==1.0){if((u<_start)&&(dash_start<segment_start)&&(abs(v_angles.x)<HALF_PI)){discard;}}if((dash_caps.x!=1.0)&&(dash_caps.x!=5.0)){if((dash_start<segment_start)&&(abs(v_angles.x)<HALF_PI)){float a=v_angles.x/2.0;float cos_a=cos(a);float sin_a=sin(a);float x=(segment_start-dx)*cos_a-dy*sin_a;float y=(segment_start-dx)*sin_a+dy*cos_a;if(x>0.0){discard;}dash_caps.x=4.0;}}if((dash_caps.y!=1.0)&&(dash_caps.y!=5.0)){if((dash_stop>segment_stop)&&(abs(v_angles.y)<HALF_PI)){float a=v_angles.y/2.0;float cos_a=cos(a);float sin_a=sin(a);float x=(dx-segment_stop)*cos_a-dy*sin_a;float y=(dx-segment_stop)*sin_a+dy*cos_a;if(x>0.0){discard;}dash_caps.y=4.0;}}}if((dx<line_start)&&(dash_start<=line_start)&&(dash_stop>line_start)){dist=cap(int(linecaps.x),dx-line_start,dy,aa_radius);}else if((dx>line_stop)&&(dash_stop>line_stop)&&(dash_start<line_stop)){dist=cap(int(linecaps.y),dx-line_stop,dy,aa_radius);}else if(dash_type==1.0){dist=cap(int(dash_caps.x),abs(dash_center-u),dy,aa_radius);if((dx>line_start)&&(dx<line_stop)){dist=max(dist,d_join);}}else if(dash_type==0.0){dist=abs(dy);}else if(dash_type==2.0){dist=cap(int(dash_caps.y),abs(u-dash_center),dy,aa_radius);if((dx>line_start)&&(dx<line_stop)){dist=max(dist,d_join);}}if((dx>line_start)&&(dx<line_stop)){if((dx<=segment_start)&&(dash_start<=segment_start)&&(dash_stop>=segment_start)){dist=d_join;float angle=HALF_PI+v_angles.x;float f=abs((segment_start-dx)*cos(angle)-dy*sin(angle));dist=max(f,dist);}else if((dx>segment_stop)&&(dash_start<=segment_stop)&&(dash_stop>=segment_stop)){dist=d_join;float angle=HALF_PI+v_angles.y;float f=abs((dx-segment_stop)*cos(angle)-dy*sin(angle));dist=max(f,dist);}else if(dx<(segment_start-linewidth/2.)){discard;}else if(dx>(segment_stop+linewidth/2.)){discard;}}else if(dx<(segment_start-linewidth/2.)){discard;}else if(dx>(segment_stop+linewidth/2.)){discard;}}dist=dist-aa_radius;if(dist>=0.0){if(u_antialias==0.0){discard;}else{color=vec4(color.rgb,exp(-dist*dist)*color.a);}}\n#ifdef TANGRAM_DEBUG_TRIANGLES\nif(any(lessThan(v_barycentric,vec3(0.0085)))){color=vec4(0.0,1.0,0.0,1.0);}\n#endif\ngl_FragColor=color;}",PatternLines=Object.create(Style),CAP_TYPE$1={round:1,"arrow-tail":2,"arrow-head":3,square:4,butt:5},JOIN_TYPE$1={miter:0,round:1,bevel:2},PATTERN_MAX_WIDTH=1024,DEFAULT_LINE_CAP=CAP_TYPE$1.round,DEFAULT_JOIN_TYPE=JOIN_TYPE$1.miter,DEFAULT_DASH_PATTERN=[0,0],VARIANT_UNIQUE_PROP_NAMES="antialias join linecaps miter_limit dash_index dash dash_caps dash_phase".split(" ");function getHashForStyle(e){for(var n=[],r=0,d=VARIANT_UNIQUE_PROP_NAMES.length;r<d;r++){var m=e[VARIANT_UNIQUE_PROP_NAMES[r]];Array.isArray(m)?n.push(m.join("_")):"boolean"==typeof m?n.push(m?1:0):m&&n.push(m.toString())}return n.join("/")}Object.assign(PatternLines,{name:"pattern-lines",built_in:!0,vertex_shader_src,fragment_shader_src,selection:!0,init:function(){Style.init.apply(this,arguments),this.defines.TANGRAM_LAYER_ORDER=!0,this.defines.TANGRAM_CROP_BY_TILE=this.crop_by_tile,this.defines.TANGRAM_DEBUG_TRIANGLES=!1,this.defines.TANGRAM_DEBUG_NO_TEXTURE_FLOAT_SUPPORT=!1,this.styles=this.styles||{},PatternLines.vertex_layouts=[]},calcDistance:function(e,n){return e&&StyleParser.evalCachedDistanceProperty(e,n)||0},calcDash:function(e,n){var r=StyleParser.evalProperty(e.dash,n),d=0;return r&&((r=Array.isArray(r)&&r.length?r:DEFAULT_DASH_PATTERN).length%2==1&&(r=r.concat(r)),d=+(d=r.reduce(function(m,g){return m+g}))||0),{dash:r,dash_period:d}},calcWidth:function(e,n,r){var d=this.calcDistance(e.width,r);return!(d<0||(n.width=d*r.units_per_meter_overzoom,0))},getCapType:function(e,n,r){var d=StyleParser.evalProperty(e,n);return void 0!==CAP_TYPE$1[d]?CAP_TYPE$1[d]:r},_parseFeature:function(e,n,r){if(!1!==this.calcWidth(n,this.feature_style,r)){var d=this.parseColor(n.color,r);if(d&&0!==d[3]){var m=this.getCapType(n.cap,r,DEFAULT_LINE_CAP),g=StyleParser.evalProperty(n.join,r),v=+StyleParser.evalProperty(n.miter_limit,r),w=this.calcDash(n,r),k=w.dash,j=w.dash_period,G=Object.assign({color:d,antialias:n.antialias,linecaps:[this.getCapType(n.tail_cap,r,m),this.getCapType(n.head_cap,r,m)],join:void 0!==JOIN_TYPE$1[g]?JOIN_TYPE$1[g]:DEFAULT_JOIN_TYPE,miter_limit:0<=v?v:3,dash_index:0===j?0:1,dash:k,dash_caps:[this.getCapType(n.tail_cap,r,m),this.getCapType(n.head_cap,r,m)],dash_phase:+StyleParser.evalProperty(n.dash_phase,r)||0,dash_period:j},this.feature_style);return G.z=n.z&&StyleParser.evalCachedDistanceProperty(n.z||0,r)||StyleParser.defaults.z,G.z*=Geo$1.height_scale,G.extrude=StyleParser.evalProperty(n.extrude,r),G.extrude&&(!0===G.extrude?(G.height=void 0!==e.properties.height?e.properties.height:StyleParser.defaults.height,G.min_height=void 0!==e.properties.min_height?e.properties.min_height:StyleParser.defaults.min_height):"number"==typeof G.extrude?(G.height=G.extrude,G.min_height=0):Array.isArray(G.extrude)&&(G.min_height=G.extrude[0],G.height=G.extrude[1]),G.height*=Geo$1.height_scale,G.min_height*=Geo$1.height_scale),this.addMeshVariantForDraw(this.base,G),G}}},_preprocess:function(e){e.color=StyleParser.createColorPropertyCache(e.color),e.width=StyleParser.createPropertyCache(e.width,StyleParser.parseUnits),e.width&&e.width.type!==StyleParser.CACHE_TYPE.STATIC&&(e.next_width=StyleParser.createPropertyCache(e.width,StyleParser.parseUnits)),e.z=StyleParser.createPropertyCache(e.z,StyleParser.parseUnits);var n=+e.antialias;return e.antialias=isNaN(n)?0:n,e},buildRasterTextures:function(e,n){var r=[];for(var d in n.meshes){var m,g=this.getMeshVariantTypeForDraw({variantKey:d}),v=g.uniforms,w=g.pattern;v.u_dash_index&&(m="__dash_"+w.join("_")+"_"+e.key+"_"+e.id,r.push({name:m,data:buildPatternBuffer(w,PATTERN_MAX_WIDTH)}),v.u_dash_atlas=m,n.meshes[d].textures=[m]),n.meshes[d].uniforms=v}return n.uniforms=n.uniforms||{},r.length?WorkerBroker.postMessage(this.main_thread_target+".loadTextures",r).then(function(k){return n}):Promise.resolve(n)},loadTextures:function(e){for(var n=[],r=0;r<e.length;r++){var d=e[r],m=(m=this.textureManager.textures[d.name])||this.textureManager.create(this.gl,d.name,{filtering:"nearest",repeat:!0,width:PATTERN_MAX_WIDTH,height:1,data:d.data});n.push(m.loading)}return Promise.all(n).then(function(g){return g.map(function(v){return v.retain(),v.name})})},computeVariantForDraw:function(e){var n=getHashForStyle(e);return{key:e.variantKey=n,order:e.variant_order,uniforms:{u_antialias:e.antialias,u_linecaps:e.linecaps,u_linejoin:e.join,u_miter_limit:e.miter_limit,u_dash_index:e.dash_index,u_dash_caps:e.dash_caps,u_dash_phase:e.dash_phase,u_dash_period:e.dash_period},pattern:e.dash}},vertexLayoutForMeshVariant:function(e){var n;return null==PatternLines.vertex_layouts[e.key]&&(n=[{name:"a_position",size:4,type:gl$1.SHORT,normalized:!1},{name:"a_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_width",size:1,type:gl$1.FLOAT,normalized:!1},{name:"a_tangents",size:4,type:gl$1.FLOAT,normalized:!1},{name:"a_segment",size:2,type:gl$1.FLOAT,normalized:!1},{name:"a_angles",size:2,type:gl$1.FLOAT,normalized:!1},{name:"a_texcoord",size:2,type:gl$1.FLOAT,normalized:!0},{name:"a_length",size:1,type:gl$1.FLOAT,normalized:!1},{name:"a_closed",size:1,type:gl$1.FLOAT,normalized:!1},{name:"a_selection_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0}],this.defines.TANGRAM_DEBUG_TRIANGLES&&n.push({name:"a_barycentric",size:3,type:gl$1.SHORT,normalized:!1}),PatternLines.vertex_layouts[e.key]=new VertexLayout(n)),PatternLines.vertex_layouts[e.key]},makeVertexTemplate:function(e){var n=0;return this.vertex_template[n++]=0,this.vertex_template[n++]=0,this.vertex_template[n++]=e.z+e.height||0,this.vertex_template[n++]=this.scaleOrder(e.order),this.vertex_template[n++]=255*e.color[0],this.vertex_template[n++]=255*e.color[1],this.vertex_template[n++]=255*e.color[2],this.vertex_template[n++]=255*e.color[3],this.vertex_template[n++]=0,this.vertex_template[n++]=0,this.vertex_template[n++]=0,this.vertex_template[n++]=0,this.vertex_template[n++]=0,this.vertex_template[n++]=0,this.vertex_template[n++]=0,this.vertex_template[n++]=0,this.vertex_template[n++]=0,this.vertex_template[n++]=0,this.vertex_template[n++]=0,this.vertex_template[n++]=0,this.vertex_template[n++]=0,this.selection&&(this.vertex_template[n++]=255*e.selection_color[0],this.vertex_template[n++]=255*e.selection_color[1],this.vertex_template[n++]=255*e.selection_color[2],this.vertex_template[n++]=255*e.selection_color[3]),this.defines.TANGRAM_DEBUG_TRIANGLES&&(this.vertex_template[n++]=0,this.vertex_template[n++]=0,this.vertex_template[n++]=0),this.vertex_template},buildLines:function(e,n,r,d,m){var g=4<arguments.length&&void 0!==m&&m,v=r.vertex_data,w=v.vertex_layout,k=this.makeVertexTemplate(n,r);return buildPolylines$1(e,n.width,v,k,w.index,g)},buildPolygons:function(e,n,r,d){for(var m=0,g=0,v=e.length;g<v;g++)m+=this.buildLines(e[g],n,r,d,!0);return m}});var STICK_WIDTH=1;function buildQuadsForPoints(e,n,r,d){var m,g,v,w,k,j,Ny,G=d.quad,q=d.offset,_t=d.offsets,_r=d.offsets_alt,_s=d.pre_angles,ga=d.pre_angles_alt,_c=d.angle,_u=d.angles,_f=d.angles_alt,_h=d.is_flat,ad=d.elevate_by_altitude,ey=d.build_stick_points,sy=d.color,ly=d.stick_color,dy=d.curve,Ay=d.texcoord_normalize,Sy=d.pre_angles_normalize,jy=d.angles_normalize,Qy=d.offsets_normalize,P_=G[0]/2*(Ny=(Ny=d.quad_normalize)||1),l_=G[1]/2*Ny,K_=[[-P_,-l_],[P_,-l_],[P_,l_],[-P_,l_]],p_=n.vertex_elements,qy=n.vertex_count,I_=n.vertex_layout.index,S0=I_.a_texcoord,c1=I_.a_position,j_=I_.a_shape,G_=I_.a_offset,z1=I_.a_offsets,b0=I_.a_offsets_alt,k1=I_.a_pre_angles,X_=I_.a_pre_angles_alt,N_=I_.a_angles,o0=I_.a_angles_alt,c_=I_.a_is_flat,yx=I_.a_is_stick,u1=I_.a_color;S0&&(Ay=Ay||1,j=[[g=(m=_slicedToArray(d.texcoord_scale||default_uvs,4))[0],v=m[1]],[w=m[2],v],[w,k=m[3]],[g,k]]);for(var q0=0,bT=e.length,_1=0;_1<bT;_1++){var P0=e[_1];if(ey){for(var g1=STICK_WIDTH/2*Ny,xE=+Ny,JE=[[-g1,0],[+g1,0],[+g1,xE],[-g1,xE]],b1=0;b1<4;b1++)S0&&(r[S0+0]=j[b1][0]*Ay,r[S0+1]=j[b1][1]*Ay),r[c1+0]=P0[0],r[c1+1]=P0[1],ad&&(r[c1+2]=MathUtils$1.clamp(P0[2],0,32767)),r[j_+0]=JE[b1][0],r[j_+1]=JE[b1][1],r[j_+2]=0,r[u1+0]=ly[0],r[u1+1]=ly[1],r[u1+2]=ly[2],r[u1+3]=ly[3],r[yx+0]=255,n.addVertex(r);p_.push(qy+0),p_.push(qy+1),p_.push(qy+2),p_.push(qy+2),p_.push(qy+3),p_.push(qy+0),qy+=4,q0+=2}for(var H1=0;H1<4;H1++)S0&&(r[S0+0]=j[H1][0]*Ay,r[S0+1]=j[H1][1]*Ay),r[c1+0]=P0[0],r[c1+1]=P0[1],ad&&(r[c1+2]=MathUtils$1.clamp(P0[2],0,32767)),r[j_+0]=K_[H1][0],r[j_+1]=K_[H1][1],r[j_+2]=_c,r[u1+0]=sy[0],r[u1+1]=sy[1],r[u1+2]=sy[2],r[u1+3]=sy[3],r[G_+0]=q[0],r[G_+1]=q[1],r[c_+0]=_h?255:0,ey&&(r[yx+0]=0),dy&&(r[k1+0]=Sy*_s[0],r[k1+1]=Sy*_s[1],r[k1+2]=Sy*_s[2],r[k1+3]=Sy*_s[3],r[N_+0]=jy*_u[0],r[N_+1]=jy*_u[1],r[N_+2]=jy*_u[2],r[N_+3]=jy*_u[3],r[z1+0]=Qy*_t[0],r[z1+1]=Qy*_t[1],r[z1+2]=Qy*_t[2],r[z1+3]=Qy*_t[3],_r&&(r[b0+0]=Qy*_r[0],r[b0+1]=Qy*_r[1],r[b0+2]=Qy*_r[2],r[b0+3]=Qy*_r[3],r[X_+0]=Sy*ga[0],r[X_+1]=Sy*ga[1],r[X_+2]=Sy*ga[2],r[X_+3]=Sy*ga[3],r[o0+0]=jy*_f[0],r[o0+1]=jy*_f[1],r[o0+2]=jy*_f[2],r[o0+3]=jy*_f[3])),n.addVertex(r);p_.push(qy+0),p_.push(qy+1),p_.push(qy+2),p_.push(qy+2),p_.push(qy+3),p_.push(qy+0),qy+=4,q0+=2}return q0}var id$2=0,Label={id_prefix:"",nextLabelId:function(){return"".concat(Label.id_prefix,"/").concat(id$2++)}};function textLayoutToJSON(e){return{priority:e.priority,collide:e.collide,repeat_distance:e.repeat_distance,repeat_group:e.repeat_group,buffer:e.buffer,italic:e.italic}}var lefts=["left","top-left","bottom-left"],rights=["right","top-right","bottom-right"],tops=["top","top-left","top-right"],bottoms=["bottom","bottom-left","bottom-right"],PointAnchor,PointAnchor$1=PointAnchor={computeOffset:function(e,n,r,d){if(!r||"center"===r)return e;var m=[e[0],e[1]],g=(g=3<arguments.length&&void 0!==d?d:null)||this.default_buffer;return this.isLeftAnchor(r)?(m[0]-=n[0]/2,"left"===r&&(m[0]-=g[0])):this.isRightAnchor(r)&&(m[0]+=n[0]/2,"right"===r&&(m[0]+=g[1])),this.isTopAnchor(r)?(m[1]-=n[1]/2,"top"===r&&(m[1]-=g[2])):this.isBottomAnchor(r)&&(m[1]+=n[1]/2,"bottom"===r&&(m[1]+=g[3])),m},alignForAnchor:function(e){if(e&&"center"!==e){if(this.isLeftAnchor(e))return"right";if(this.isRightAnchor(e))return"left"}return"center"},isLeftAnchor:function(e){return-1<lefts.indexOf(e)},isRightAnchor:function(e){return-1<rights.indexOf(e)},isTopAnchor:function(e){return-1<tops.indexOf(e)},isBottomAnchor:function(e){return-1<bottoms.indexOf(e)},default_buffer:[2.5,2.5,1.5,.75],zero_buffer:[0,0,0,0]};function encircleLine(e,n,r,d,m){var g=[],v=r-e,w=d-n,k=MathUtils$1.getLineLength(e,n,r,d),j=2*m;if((G=k/j)<=1)g.push(e+v/2,n+w/2,m);else{var G,q=j/k,_t=v*q,_r=w*q;(G=k/m/2)%1&&g.push(r-_t/2,d-_r/2,m),G|=0;for(var _s=e+_t/2,ga=n+_r/2;G--;)g.push(_s,ga,m),_s+=_t,ga+=_r}return g}var LabelPoint=function(){function e(n,r,d,m){_classCallCheck(this,e),this.id=Label.nextLabelId(),this.position=[n[0],n[1]],void 0!==n[2]&&this.position.push(n[2]),this.size=r,this.layout=m,this.anchor=Array.isArray(this.layout.anchor)?this.layout.anchor[0]:this.layout.anchor,this.placed=null,this.type="point",this.parent=this.layout.parent,this.offset=this.computeOffset(),this.align=this.layout.align||PointAnchor$1.alignForAnchor(this.anchor),this._is_flat=d}return _createClass(e,[{key:"toJSON",value:function(){return{id:this.id,type:this.type,is_flat:this._is_flat,position:this.position,size:this.size,offset:this.offset,align:this.align,sides:this.getSides(),breach:!this.inTileBounds(),layout:textLayoutToJSON(this.layout)}}},{key:"inTileBounds",value:function(){var n=this.getAABB(),m=n.right,g=n.bottom;return Utils$1.pointInTile([n.left,n.top])&&Utils$1.pointInTile([m,g])}},{key:"isFlat",value:function(){return this._is_flat}},{key:"setAnchor",value:function(n){this._circles=void 0,this._aabb=void 0,this.anchor=n,this.offset=this.computeOffset()}},{key:"computeOffset",value:function(){var n,r=[this.layout.offset[0],this.layout.offset[1]];return this.parent&&(r=PointAnchor$1.computeOffset(r,(n=this.parent).size,n.anchor,PointAnchor$1.zero_buffer),r=PointAnchor$1.computeOffset(r,n.size,this.anchor,PointAnchor$1.zero_buffer),n.offset!==StyleParser.zeroPair&&(r===StyleParser.zeroPair?r=n.offset:(r[0]+=n.offset[0],r[1]+=n.offset[1]))),PointAnchor$1.computeOffset(r,this.size,this.anchor)}},{key:"getBoundingCircles",value:function(){return this.angle?(this._circles||(g=-(d=(r=this.size[0]/2*(n=this.layout.units_per_pixel))*Math.cos(this.angle)),v=-(m=r*Math.sin(this.angle)),k=(w=_slicedToArray(this.position,2))[0],j=w[1],m+=j*=-1,this._circles=encircleLine(d+=k,m,g+=k,v+=j,this.size[1]/2*n)),this._circles):[];var n,r,d,m,g,v,w,k,j}},{key:"getAABB",value:function(){var n,r,d,m,g;return this._aabb||(this._aabb={left:(m=this.position[0]+this.offset[0]*(n=this.layout.units_per_pixel))-(r=(this.size[0]/2+this.layout.buffer[0])*n),top:(g=this.position[1]-this.offset[1]*n)+(d=(this.size[1]/2+this.layout.buffer[1])*n),right:m+r,bottom:g-d}),this._aabb}},{key:"getSides",value:function(){var n=this.getAABB(),g=(n.top+n.bottom)/2;return[n.left,g,n.right,g]}}]),e}();LabelPoint.PLACEMENT={VERTEX:0,MIDPOINT:1,SPACED:2,CENTROID:3};var PLACEMENT=LabelPoint.PLACEMENT,default_spacing=80,TextSettings;function placePointsOnLine(e,n,r,d){var m=[],g=d.placement,v=Math.max(n[0],n[1])*d.placement_min_length_ratio*d.units_per_pixel;switch(g){case PLACEMENT.SPACED:var w=getPositionsAndAngles(e,v,d);if(!w)return[];for(var k=w.positions,j=w.angles,G=0;G<k.length;G++){var q,_t=k[G],_r=j[G];!0!==d.tile_edges&&isCoordOutsideTile(_t)||((q=new LabelPoint(_t,n,r,d)).angle=_r,m.push(q))}break;case PLACEMENT.VERTEX:for(var _s,ga,_c,_u=0;_u<e.length-1;_u++)_s=e[_u],ga=e[_u+1],!0!==d.tile_edges&&isCoordOutsideTile(_s)||((_c=new LabelPoint(_s,n,r,d)).angle=getAngle(_s,ga,d.angle),m.push(_c));(_c=new LabelPoint(ga,n,r,d)).angle=getAngle(_s,ga,d.angle),m.push(_c);break;case PLACEMENT.MIDPOINT:for(var _f=0;_f<e.length-1;_f++){var _h,ad=e[_f],ey=e[_f+1],sy=[.5*(ad[0]+ey[0]),.5*(ad[1]+ey[1])];!0!==d.tile_edges&&isCoordOutsideTile(sy)||(!v||norm(ad,ey)>v)&&((_h=new LabelPoint(sy,n,r,d)).angle=getAngle(ad,ey,d.angle),m.push(_h))}}return m}function getPositionsAndAngles(e,n,r){var m=(r.placement_spacing||default_spacing)*r.units_per_pixel,g=getLineLength(e);if(g<=n)return!1;for(var v=Math.max(Math.floor(g/m),1),w=[],k=[],j=.5*(g-(v-1)*m),G=0;G<v;G++){var q=interpolateLine(e,j,n,r),_t=q.position,_r=q.angle;null!=_t&&null!=_r&&(w.push(_t),k.push(_r)),j+=m}return{positions:w,angles:k}}function getAngle(e,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return"auto"===r?Math.atan2(n[0]-e[0],n[1]-e[1]):r}function getLineLength(e){for(var n=0,r=0;r<e.length-1;r++)n+=norm(e[r],e[r+1]);return n}function norm(e,n){return Math.sqrt(Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2))}function interpolateLine(e,n,r,d){for(var m,g,v=0,w=0;w<e.length-1;w++){var k=e[w],j=e[w+1],G=norm(k,j);if(!(G<=r)&&n<(v+=G)){m=interpolateSegment(k,j,v-n),g=getAngle(k,j,d.angle);break}}return{position:m,angle:g}}function interpolateSegment(e,n,r){var d=r/norm(e,n);return[d*e[0]+(1-d)*n[0],d*e[1]+(1-d)*n[1]]}var TextSettings$1=TextSettings={key:function(e){return[e.style,e.weight,e.family,e.px_size,e.fill,e.stroke,e.stroke_width,e.transform,e.text_wrap,e.max_lines,e.supersample,e.background_color,e.outline_color,e.outline_width,e.padding,Utils$1.device_pixel_ratio].join("/")},defaults:{style:"normal",weight:null,size:"12px",px_size:12,family:"Helvetica",fill:"white",text_wrap:15,max_lines:5,align:"center",stroke:null,stroke_width:0,background_color:null,outline_color:null,outline_width:0,padding:[0,0,0,0]},compute:function(e,n,r){var d={};if(n.font=n.font||this.defaults,d.can_articulate=n.can_articulate,d.fill=n.font.fill&&Utils$1.toCSSColor(StyleParser.evalCachedColorProperty(n.font.fill,r))||this.defaults.fill,d.style=n.font.style||this.defaults.style,d.weight=n.font.weight||this.defaults.weight,n.font.family?(d.family=n.font.family,d.family!==this.defaults.family&&(d.family+=", "+this.defaults.family)):d.family=this.defaults.family,d.transform=n.font.transform,d.size=n.font.size||this.defaults.size,d.supersample=n.supersample_text?1.5:1,d.px_size=StyleParser.evalCachedProperty(n.font.px_size,r)*d.supersample,0!==d.px_size){n.font.stroke&&n.font.stroke.color&&(d.stroke=Utils$1.toCSSColor(StyleParser.evalCachedColorProperty(n.font.stroke.color,r)||this.defaults.stroke),d.stroke_width=StyleParser.evalCachedProperty(n.font.stroke.width,r)||this.defaults.stroke_width),d.font_css=this.fontCSS(d);var m=n.text_wrap;return null==m&&"line"!==Geo$1.geometryType(e.geometry.type)&&(m=!0),!0===m&&(m=this.defaults.text_wrap),d.text_wrap=m,d.max_lines=n.max_lines||this.defaults.max_lines,d.background_color=n.background&&n.background.color&&!n.can_articulate?Utils$1.toCSSColor(StyleParser.evalCachedColorProperty(n.background.color,r)):this.defaults.background_color,d.outline_color=n.outline&&n.outline.color&&!n.can_articulate?Utils$1.toCSSColor(StyleParser.evalCachedColorProperty(n.outline.color,r)):this.defaults.outline_color,d.outline_width=n.outline&&n.outline.width&&!n.can_articulate?StyleParser.evalCachedProperty(n.outline.width,r):this.defaults.outline_width,d.padding=n.padding&&!n.can_articulate?StyleParser.evalCachedProperty(n.padding,r):this.defaults.padding,d}},fontCSS:function(e){return[e.style,e.weight,e.px_size+"px",e.family].filter(function(n){return n}).join(" ")}},fontfaceobserver_standalone=createCommonjsModule(function(e){function n(_t,_r){document.addEventListener?_t.addEventListener("scroll",_r,!1):_t.attachEvent("scroll",_r)}function r(_t){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(_t)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function d(_t,_r){_t.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;left:-999px;white-space:nowrap;font:"+_r+";"}function m(_t){var _r=_t.a.offsetWidth,_s=_r+100;return _t.f.style.width=_s+"px",_t.c.scrollLeft=_s,_t.b.scrollLeft=_t.b.scrollWidth+100,_t.g!==_r&&(_t.g=_r,1)}function g(_t,_r){function _s(){var _c=ga;m(_c)&&_c.a.parentNode&&_r(_c.g)}var ga=_t;n(_t.b,_s),n(_t.c,_s),m(_t)}function v(_t,_r){var _s=_r||{};this.family=_t,this.style=_s.style||"normal",this.weight=_s.weight||"normal",this.stretch=_s.stretch||"normal"}function w(_t,_r){return[_t.style,_t.weight,function(){if(null===G){var _s=document.createElement("div");try{_s.style.font="condensed 100px sans-serif"}catch{}G=""!==_s.style.font}return G}()?_t.stretch:"","100px",_r].join(" ")}var k,j,G,q;q=G=j=k=null,v.prototype.load=function(_t,_r){var _s=this,ga=_t||"BESbswy",_c=0,_u=_r||3e3,_f=(new Date).getTime();return new Promise(function(_h,ad){var ey,sy,ly;null===q&&(q=!!document.fonts),(ey=q)&&(null===j&&(j=/OS X.*Version\/10\..*Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)),ey=!j),ey?(ey=new Promise(function(dy,vy){!function Ay(){(new Date).getTime()-_f>=_u?vy():document.fonts.load(w(_s,'"'+_s.family+'"'),ga).then(function(Sy){1<=Sy.length?dy():setTimeout(Ay,25)},function(){vy()})}()}),sy=new Promise(function(dy,vy){_c=setTimeout(vy,_u)}),Promise.race([sy,ey]).then(function(){clearTimeout(_c),_h(_s)},function(){ad(_s)})):(ly=function(){function dy(){var qy;(qy=-1!=jy&&-1!=Qy||-1!=jy&&-1!=Ny||-1!=Qy&&-1!=Ny)&&((qy=jy!=Qy&&jy!=Ny&&Qy!=Ny)||(null===k&&(qy=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),k=!!qy&&(parseInt(qy[1],10)<536||536===parseInt(qy[1],10)&&parseInt(qy[2],10)<=11)),qy=k&&(jy==P_&&Qy==P_&&Ny==P_||jy==l_&&Qy==l_&&Ny==l_||jy==K_&&Qy==K_&&Ny==K_)),qy=!qy),qy&&(p_.parentNode&&p_.parentNode.removeChild(p_),clearTimeout(_c),_h(_s))}var vy=new r(ga),Ay=new r(ga),Sy=new r(ga),jy=-1,Qy=-1,Ny=-1,P_=-1,l_=-1,K_=-1,p_=document.createElement("div");p_.dir="ltr",d(vy,w(_s,"sans-serif")),d(Ay,w(_s,"serif")),d(Sy,w(_s,"monospace")),p_.appendChild(vy.a),p_.appendChild(Ay.a),p_.appendChild(Sy.a),document.body.appendChild(p_),P_=vy.a.offsetWidth,l_=Ay.a.offsetWidth,K_=Sy.a.offsetWidth,function qy(){var I_;(new Date).getTime()-_f>=_u?(p_.parentNode&&p_.parentNode.removeChild(p_),ad(_s)):(!0!==(I_=document.hidden)&&void 0!==I_||(jy=vy.a.offsetWidth,Qy=Ay.a.offsetWidth,Ny=Sy.a.offsetWidth,dy()),_c=setTimeout(qy,50))}(),g(vy,function(qy){jy=qy,dy()}),d(vy,w(_s,'"'+_s.family+'",sans-serif')),g(Ay,function(qy){Qy=qy,dy()}),d(Ay,w(_s,'"'+_s.family+'",serif')),g(Sy,function(qy){Ny=qy,dy()}),d(Sy,w(_s,'"'+_s.family+'",monospace'))},document.body?ly():document.addEventListener?document.addEventListener("DOMContentLoaded",function dy(){document.removeEventListener("DOMContentLoaded",dy),ly()}):document.attachEvent("onreadystatechange",function dy(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",dy),ly())}))})},e.exports=v}),FontManager={fonts_loaded:Promise.resolve(),last_loaded:null,loadFonts:function(e){var n=this,r=JSON.stringify(e)===this.last_loaded;return e&&!r&&function(){var d=[];for(var m in e)!function(g){Array.isArray(e[g])?e[g].forEach(function(v){return d.push(n.loadFontFace(g,v))}):d.push(n.loadFontFace(g,e[g]))}(m);n.last_loaded=JSON.stringify(e),n.fonts_loaded=Promise.all(d.filter(function(g){return g}))}(),this.fonts_loaded},loadFontFace:function(e,n){if(null!=n&&("object"===_typeof(n)||"external"===n)){var r={family:e},d=Promise.resolve();"object"===_typeof(n)&&(Object.assign(r,n),"string"==typeof n.url&&(d=this.injectFontFace(r)));var m=new fontfaceobserver_standalone(e,r);return d.then(function(){return m.load()}).then(function(){log("debug","Font face '".concat(e,"' is available"),r)},function(){log("debug","Font face '".concat(e,"' is NOT available"),r)})}},injectFontFace:function(e){var n=this,r=e.family,d=e.url,m=e.weight,g=e.style;void 0===this.supports_native_font_loading&&(this.supports_native_font_loading=void 0!==window.FontFace);var v=Promise.resolve(d);return"blob:"===d.slice(0,5)&&(v=Utils$1.io(d,6e4,"arraybuffer").then(function(w){var k=new Uint8Array(w);if(n.supports_native_font_loading)return k;for(var j="",G=0;G<k.length;G++)j+=String.fromCharCode(k[G]);return"data:font/opentype;base64,"+btoa(j)})),v.then(function(w){var k,j,G;n.supports_native_font_loading?("string"==typeof w?k=new FontFace(r,"url(".concat(encodeURI(w),")"),{weight:m,style:g}):w instanceof Uint8Array&&(k=new FontFace(r,w,{weight:m,style:g})),document.fonts.add(k),log("trace","Adding FontFace to document.fonts:",k)):(j="\n                    @font-face {\n                        font-family: '".concat(r,"';\n                        font-weight: ").concat(m||"normal",";\n                        font-style: ").concat(g||"normal",";\n                        src: url(").concat(encodeURI(w),");\n                    }\n                "),(G=document.createElement("style")).appendChild(document.createTextNode("")),document.head.appendChild(G),G.sheet.insertRule(j,0),log("trace","Injecting CSS font face:",j))})}},CanvasText=function(){function e(){_classCallCheck(this,e),this.vertical_text_buffer=1,this.horizontal_text_buffer=1,this.layout=layout("binary-tree")}return _createClass(e,[{key:"createCanvas",value:function(n,r){var d=document.createElement("canvas");return n&&r&&(d.width=n,d.height=r),d.style.backgroundColor="transparent",d}},{key:"setFont",value:function(n,r){var d=r.font_css,m=r.fill,g=r.stroke,v=r.stroke_width,k=r.supersample;this.px_size=r.px_size;var j=Utils$1.device_pixel_ratio*k;g&&0<v&&(n.strokeStyle=g,n.lineWidth=v*j),n.fillStyle=m,n.textBaseline="bottom",n.font=d,n.miterLimit=2}},{key:"textSizes",value:function(n,r,d){var m=this;return FontManager.loadFonts().then(function(){return Task.add({type:"textSizes",run:m.processTextSizesTask.bind(m),texts:r,tile_id:n,cursor:{ctx:d,styles:Object.keys(r),texts:null,style_idx:null,text_idx:null}})})}},{key:"processTextSizesTask",value:function(n){var r=n.cursor,d=n.texts,m=r.ctx;for(r.style_idx=r.style_idx||0;r.style_idx<r.styles.length;){var g=r.styles[r.style_idx];null==r.text_idx&&(r.text_idx=0,r.texts=Object.keys(d[g]));for(var v=d[g],w=!0;r.text_idx<r.texts.length;){var k=r.texts[r.text_idx],j=v[k],G=j.text_settings;if(w&&(this.setFont(m,G),w=!1),j.size=this.textSize(m,g,k,G).size,G.can_articulate){var q=!1,_t=!1;if(isTextRTL(k)&&(isTextNeutral(k)?q=!0:_t=!0),j.isRTL=q,j.no_curving=_t||isTextCurveBlacklisted(k),j.vertical_buffer=this.vertical_text_buffer+G.outline_width+(G.padding[0]+G.padding[2])/2,j.segment_sizes=[],!j.no_curving){var _r=splitLabelText(k,q);j.segments=_r;for(var _s=0;_s<_r.length;_s++)j.segment_sizes.push(this.textSize(m,g,_r[_s],G).size)}}if(r.text_idx++,!Task.shouldContinue(n))return!1}r.text_idx=null,r.style_idx++}return Task.finish(n,{texts:d}),!0}},{key:"textSize",value:function(n,r,d,m){var g=m.transform,v=m.text_wrap,w=m.max_lines,k=m.stroke_width,j=void 0===k?0:k,G=m.supersample,q=m.padding,_t=m.outline_width,_r=m.can_articulate;if((e.cache.text[r]=e.cache.text[r]||{})[d])return e.cache.stats.text_hits++,e.cache.text[r][d];e.cache.stats.text_misses++,e.cache.text_count++;var _s=Utils$1.device_pixel_ratio*G,ga=this.applyTextTransform(d,g),_c=_s*(this.vertical_text_buffer+_t+(q[0]+q[2])/2),_u=_s*(this.horizontal_text_buffer+_t+j+(q[1]+q[3])/2),_h=this.px_size+2*_s,ad=MultiLine.parse(ga,v,w,_h,n),ey=ad.height,sy=ad.width,ly=ad.lines,dy=[sy/_s,ey/_s];_r||(dy[0]+=2*_u/_s,dy[1]+=2*_c/_s);var vy=[sy+2*_u,ey+2*_c];return e.cache.text[r][d]={lines:ly,size:{collision_size:dy,texture_size:vy,logical_size:[vy[0]/_s,vy[1]/_s],line_height:_h}}}},{key:"drawTextMultiLine",value:function(n,r,d,m,g,v){var w=_slicedToArray(d,2),k=w[0],j=w[1],G=Utils$1.device_pixel_ratio*g.supersample,q=g.stroke_width||0,_t=g.stroke;g.background_color&&(n.fillStyle=g.background_color,n.fillRect(k,j,m.texture_size[0],m.texture_size[1]));var _r=g.outline_width*G,_s=g.outline_color;_r&&_s&&(n.strokeStyle=_s,n.lineWidth=_r,n.strokeRect(k+_r/2,j+_r/2,m.texture_size[0]-_r,m.texture_size[1]-_r)),(g.background_color||_r&&_s)&&this.setFont(n,g);for(var ga,_c,_u,_f,_h=m.line_height,ad=j,ey=0;ey<r.length;ey++)this.drawTextLine(n,r[ey],[k,ad],m,g,v),ad+=_h;debugSettings$1.draw_label_collision_boxes&&(n.save(),ga=G*(this.horizontal_text_buffer+g.outline_width+q+(g.padding[1]+g.padding[3])/2),_c=G*(this.vertical_text_buffer+g.outline_width+(g.padding[0]+g.padding[2])/2),_u=m.collision_size,n.strokeStyle="blue",n.lineWidth=2,n.strokeRect(k+ga,j+_c,G*_u[0],G*_u[1]),"curved"===v&&_t&&0<q&&n.strokeRect(k+m.texture_size[0]+ga,j+_c,G*_u[0],G*_u[1]),n.restore()),debugSettings$1.draw_label_texture_boxes&&(n.save(),_f=m.texture_size,n.strokeStyle="green",n.lineWidth=2,n.strokeRect(k+2,j+2,_f[0]-4,_f[1]-4),"curved"===v&&_t&&0<q&&n.strokeRect(k+2+m.texture_size[0],j+2,_f[0]-4,_f[1]-4),n.restore())}},{key:"drawTextLine",value:function(n,r,d,m,g,v){var w,k=_slicedToArray(d,2),j=k[0],G=k[1],q=g.stroke,_t=g.stroke_width,_r=void 0===_t?0:_t,_c=g.padding,_u=g.outline_width,_f=Utils$1.device_pixel_ratio*g.supersample,_h=(_h=g.align)||"center",ad=m.texture_size,ey=m.line_height,sy=_f*(this.vertical_text_buffer+_u),ly=_f*(this.horizontal_text_buffer+_u+_r),dy=this.applyTextTransform(r.text,g.transform);"left"===_h?w=j+ly+_c[3]*_f:"center"===_h?w=j+ad[0]/2-r.width/2-(_c[1]-_c[3])*_f/2:"right"===_h&&(w=j+ad[0]-r.width-ly-_c[1]*_f);var Ay=G+sy+ey+_c[0]*_f;q&&0<_r&&n.strokeText(dy,w+("curved"===v?ad[0]:0),Ay),n.fillText(dy,w,Ay)}},{key:"rasterize",value:function(n,r,d,m,g,v){return Task.removeForTile(d),Task.add({type:"rasterizeLabels",run:this.processRasterizeTask.bind(this),cancel:e.returnNoTextures,pause_factor:2,user_moving_view:!1,texts:n,textures:r,texture_prefix:m,gl:g,tile_id:d,texture_manager:v,cursor:{styles:Object.keys(n),texts:null,style_idx:0,text_idx:null,texture_idx:0,texture_names:[]}})}},{key:"processRasterizeTask",value:function(n){if(!Task.shouldContinue(n))return!1;for(var r=n.cursor,d=n.texts,m=n.textures;r.texture_idx<n.textures.length;){for(var g=!1,v=m[r.texture_idx],w=this.createCanvas.apply(this,_toConsumableArray(v.texture_size)),k=w.getContext("2d");r.style_idx<r.styles.length;){var j=r.styles[r.style_idx];null==r.text_idx&&(r.text_idx=0,r.texts=Object.keys(d[j]));for(var G=d[j],q=!0;r.text_idx<r.texts.length;){var _t=r.texts[r.text_idx],_r=G[_t],_s=_r.text_settings;if(q&&(this.setFont(k,_s),q=!1),_s.can_articulate){_r.texcoords=_r.texcoords||{};for(var ga=0;ga<_r.type.length;ga++){var _c=_r.type[ga];switch(_c){case"straight":if(_r.textures[ga]!==r.texture_idx)continue;var _u,_f,_h,ey=_r.isRTL?_t.split().reverse().join():_t,sy=v.texcoord_cache[j][ey],ly=void 0;sy.texcoord?ly=sy.texcoord:(_u=sy.texture_position,_h=(_f=this.textSize(k,j,ey,_s)).size,this.drawTextMultiLine(k,_f.lines,_u,_h,_s,_c),ly=n.texture_manager.getTexcoordsForSprite(_u,_h.texture_size,v.texture_size),sy.texcoord=ly),_r.texcoords[_c]={texcoord:ly,texture_id:sy.texture_id};break;case"curved":var dy=_r.segments;_r.texcoords.curved=[],_r.texcoords_stroke=[];for(var vy,Ay,Sy,jy,Qy,Ny,P_,K_=0;K_<dy.length;K_++)_r.textures[ga][K_]===r.texture_idx&&(jy=Sy=void 0,(Ay=v.texcoord_cache[j][vy=dy[K_]]).texcoord&&Ay.texcoord_stroke?(Sy=Ay.texcoord,jy=Ay.texcoord_stroke):(Qy=Ay.texture_position,P_=(Ny=this.textSize(k,j,vy,_s)).size,this.drawTextMultiLine(k,Ny.lines,Qy,P_,_s,_c),Sy=n.texture_manager.getTexcoordsForSprite(Qy,P_.texture_size,v.texture_size),jy=_s.stroke&&0<_s.stroke_width?n.texture_manager.getTexcoordsForSprite([Qy[0]+P_.texture_size[0],Qy[1]],P_.texture_size,v.texture_size):(g=!0,n.texture_manager.getTexcoordsForSprite([v.texture_size[0],v.texture_size[1]],[0,0],v.texture_size)),Ay.texcoord=Sy,Ay.texcoord_stroke=jy),_r.texcoords_stroke.push(jy),_r.texcoords.curved.push({texcoord:Sy,texture_id:Ay.texture_id}))}}}else{var p_=this.textSize(k,j,_t,_s).lines;for(var qy in _r.align)_r.align[qy].texture_id===r.texture_idx&&(this.drawTextMultiLine(k,p_,_r.align[qy].texture_position,_r.size,{stroke:_s.stroke,stroke_width:_s.stroke_width,transform:_s.transform,supersample:_s.supersample,align:qy,background_color:_s.background_color,outline_width:_s.outline_width,outline_color:_s.outline_color,padding:_s.padding,fill:_s.fill,font_css:_s.font_css,px_size:_s.px_size}),_r.align[qy].texcoords=n.texture_manager.getTexcoordsForSprite(_r.align[qy].texture_position,_r.size.texture_size,v.texture_size))}r.text_idx++}r.text_idx=null,r.style_idx++}!0===g&&(k.fillStyle="rgba(0, 0, 0, 0)",k.fillRect(w.width-1,w.height-1,1,1));var I_=n.texture_prefix+r.texture_idx;n.texture_manager.create(n.gl,I_,{element:w,filtering:"linear",UNPACK_PREMULTIPLY_ALPHA_WEBGL:!0}),r.texture_names.push(I_),r.texture_idx++,r.style_idx=0,w.width=0,w.height=0}return Task.finish(n,r.texture_names),!0}},{key:"setTextureTextPositions",value:function(n){var r={texture_id:0,texcoord_cache:{}},d=[];for(var m in n){var g=n[m];for(var v in g){var w=g[v],k=w.text_settings,j=k.can_articulate,G=k.stroke,q=k.stroke_width;if(j){w.textures=[],r.texcoord_cache[m]=r.texcoord_cache[m]||{};for(var _t=0;_t<w.type.length;_t++)switch(w.type[_t]){case"straight":var _r,_s=w.isRTL?v.split().reverse().join():v;r.texcoord_cache[m][_s]||(_r=w.size.texture_size,r.texcoord_cache[m][_s]={},this.placeText(_r[0],_r[1],{can_articulate:j,style:m,word:_s})),w.textures[_t]=r.texture_id;break;case"curved":w.textures[_t]=[];for(var ga=0;ga<w.segment_sizes.length;ga++){var _c,_u,_f=w.segments[ga];r.texcoord_cache[m][_f]||(_u=(_c=w.segment_sizes[ga].texture_size)[0],G&&0<q&&(_u*=2),r.texcoord_cache[m][_f]={},this.placeText(_u,_c[1],{can_articulate:j,style:m,word:_f})),w.textures[_t].push(r.texture_id)}}}else{var _h=w.size.texture_size;this.placeText(_h[0],_h[1],{can_articulate:j,text_info:w})}}}var ad=this.layout.export(),ey=ad.items,sy=ad.width,ly=ad.height;r.texcoord_cache={};for(var dy=0,vy=ey.length;dy<vy;dy++){var Ay=ey[dy],Sy=Ay.x,jy=Ay.y;if(Ay.meta.can_articulate){var P_=Ay.meta,l_=P_.style,K_=P_.word;r.texcoord_cache[l_]=r.texcoord_cache[l_]||{},r.texcoord_cache[l_][K_]||(r.texcoord_cache[l_][K_]={texture_id:r.texture_id,texture_position:[Sy,jy]})}else{var Qy=Ay.meta.text_info;for(var Ny in Qy.align)Qy.align[Ny].texture_id=r.texture_id,Qy.align[Ny].texture_position=[Sy,jy]}}return 0<sy&&0<ly&&(d[r.texture_id]={texture_size:[sy,ly],texcoord_cache:r.texcoord_cache}),d}},{key:"placeText",value:function(n,r,d){this.layout.addItem({width:n+this.vertical_text_buffer,height:r+this.vertical_text_buffer,meta:d})}},{key:"applyTextTransform",value:function(n,r){return"capitalize"===r?n.replace(/\w\S*/g,function(d){return d.charAt(0).toUpperCase()+d.substr(1)}):"uppercase"===r?n.toUpperCase():"lowercase"===r?n.toLowerCase():n}}],[{key:"fontPixelSize",value:function(n){if(null!=n){var r=_slicedToArray((n="string"==typeof n?n:String(n)).match(e.font_size_re)||[],3),d=r[1],m=r[2];return"em"===(m=m||"px")?d*=16:"pt"===m?d/=.75:"%"===m&&(d/=6.25),(d=StyleParser.parsePositiveNumber(d))*Utils$1.device_pixel_ratio}}},{key:"pruneTextCache",value:function(){e.cache.text_count>e.cache.text_count_max&&(e.cache.text={},e.cache.text_count=0,log("debug","CanvasText: pruning text cache")),Object.keys(e.cache.segment).length>e.cache.segment_count_max&&(e.cache.segment={},log("debug","CanvasText: pruning segment cache"))}}]),e}();CanvasText.font_size_re=/((?:[0-9]*\.)?[0-9]+)\s*(px|pt|em|%)?/,CanvasText.cache={text:{},text_count:0,text_count_max:2e3,segment:{},segment_count_max:2e3,stats:{text_hits:0,text_misses:0,segment_hits:0,segment_misses:0}},CanvasText.EMPTY_TEXTURES_ARR=[],CanvasText.returnNoTextures=function(){return CanvasText.EMPTY_TEXTURES_ARR};var rtlDirCheck=new RegExp("[\u0591-\u07ff\u200f\u202b\u202e\ufb1d-\ufdfd\ufe70-\ufefc]");function isTextRTL(e){return rtlDirCheck.test(e)}var neutral_chars="\0-/:-@[-`{-\xbf\xd7\xf7\u02b9-\u02ff\u2000-\u2bff\u2010-\u2029\u202c\u202f-\u2bff",neutralDirCheck=new RegExp("["+neutral_chars+"]+");function isTextNeutral(e){return neutralDirCheck.test(e)}var markRTL="\u200f",arabic_range=new RegExp("^["+neutral_chars+"\u0600-\u06ff]+"),arabic_splitters=new RegExp("["+neutral_chars+"\u0622-\u0625\u0627\u062f-\u0632\u0648\u0671-\u0677\u0688-\u0699\u06c4-\u06cb\u06cf\u06d2\u06d3\u06ee\u06ef]"),arabic_vowels=new RegExp("^[\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed]+"),accents_and_vowels="[\u0300-\u036f\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u07a6-\u07b0\u0900-\u0903\u093a-\u094c\u094e\u094f\u0951-\u0957\u0962\u0963\u0981-\u0983\u09bc\u09be-\u09cc\u09d7\u09e2\u09e3\u0a01-\u0a03\u0a3c-\u0a4c\u0a51\u0a81-\u0a83\u0abc\u0abe-\u0acc\u0ae2\u0ae3\u0b01-\u0b03\u0b3c\u0b3e-\u0b4c\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe-\u0bcd\u0bd7\u0c00-\u0c03\u0c3e-\u0c4c\u0c55\u0c56\u0c62\u0c63\u0c81-\u0c83\u0cbc\u0cbe-\u0ccc\u0cd5\u0cd6\u0ce2\u0ce3\u0d01-\u0d03\u0d3e-\u0d4c\u0d4e\u0d57\u0d62\u0d63\u0d82\u0d83\u0dca-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f83\u0f86\u0f87\u0f8d-\u0fbc\u0fc6\u102b-\u1038\u103a-\u103e\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f\u109a-\u109d\u17b4-\u17d1\u17d3\u1a55-\u1a5e\u1a61-\u1a7c\u1dc0-\u1dff\u20d0-\u20ff]",combo_characters="[\u094d\u09cd\u0a4d\u0acd\u0b4d\u0c4d\u0ccd\u0d4d\u0f84\u1039\u17d2\u1a60\u1a7f]",graphemeRegex=new RegExp("^.(?:"+accents_and_vowels+"+)?("+combo_characters+"\\W(?:"+accents_and_vowels+"+)?)*"),curve_blacklist={Mongolian:"\u1800-\u18af"},curve_blacklist_range=Object.keys(curve_blacklist).map(function(e){return curve_blacklist[e]}).join(""),curve_blacklist_test=new RegExp("["+curve_blacklist_range+"]");function isTextCurveBlacklisted(e){return curve_blacklist_test.test(e)}var default_segment_length=2;function splitLabelText(e,n){var r=n?1:default_segment_length;if(e.length<r)return[e];var d=e;if(CanvasText.cache.segment[d])return CanvasText.cache.stats.segment_hits++,CanvasText.cache.segment[d];var m=[];if(arabic_range.exec(e)){m=e.split(arabic_splitters);for(var g,v=-1,w=0;w<m.length-1;w++)0<w&&(g=arabic_vowels.exec(m[w]))&&(m[w]=m[w].substring(g[0].length),m[w-1]+=g[0],v+=g[0].length),m[w]+=e.slice(v+=1+m[w].length,v+1);e=""}for(;e.length;){for(var k="",j=e,G=0;G<r&&j.length;G++){var q=(graphemeRegex.exec(j)||j)[0];k+=q,j=j.substring(q.length)}m.push(k),e=e.substring(k.length)}return n&&m.reverse(),CanvasText.cache.stats.segment_misses++,CanvasText.cache.segment[d]=m}var MultiLine=function(){function e(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1/0,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1/0;_classCallCheck(this,e),this.width=0,this.height=0,this.lines=[],this.max_lines=r,this.text_wrap=d,this.context=n}return _createClass(e,[{key:"createLine",value:function(n){return this.lines.length<this.max_lines&&new Line(n,this.text_wrap)}},{key:"push",value:function(n){if(this.lines.length<this.max_lines){var r=this.context.measureText(n.text).width;return(n.width=r)>this.width&&(this.width=Math.ceil(r)),this.lines.push(n),this.height+=n.height,!0}return this.addEllipsis(),!1}},{key:"advance",value:function(n,r){return!!this.push(n)&&this.createLine(r)}},{key:"addEllipsis",value:function(){var n=this.lines[this.lines.length-1],r=Math.ceil(this.context.measureText(e.ellipsis).width);n.append(e.ellipsis),n.width+=r,n.width>this.width&&(this.width=n.width)}},{key:"finish",value:function(n){n?this.push(n):this.addEllipsis()}}],[{key:"parse",value:function(n,r,d,m,g){for(var v="number"==typeof r?n.split(" "):[n],w=new e(g,d,r),k=w.createLine(m),j=0;j<v.length;j++){for(var G=v[j].split("\n"),q=0===j,_t=0;_t<G.length&&k;_t++){var _r=G[_t];isTextRTL(_r)&&isTextNeutral(_r[_r.length-1])&&(_r+=markRTL);var _s=q?_r:" "+_r;if(r&&0<j&&k.exceedsTextwrap(_s)){if(!(k=w.advance(k,m)))break;k.append(_r),q=!0}else k.append(_s);_t<G.length-1&&(k=w.advance(k,m),q=!0)}j===v.length-1&&w.finish(k)}return w}}]),e}();MultiLine.ellipsis="...";var Line=function(){function e(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,e),this.chars=0,this.text="",this.height=Math.ceil(n),this.text_wrap=r}return _createClass(e,[{key:"append",value:function(n){this.chars+=n.length,this.text+=n}},{key:"exceedsTextwrap",value:function(n){return n.length+this.chars>this.text_wrap}}]),e}(),TextLabels={resetText:function(){this.texts={}},freeText:function(e){delete this.texts[e.id]},parseTextFeature:function(e,n,r,d){var m=this.parseTextSource(e,n,r);if(null!=m&&""!==m){var g=TextSettings$1.compute(e,n,r);if(g){var v=TextSettings$1.key(g);this.texts[d.id]=this.texts[d.id]||{};var w=this.texts[d.id][v]=this.texts[d.id][v]||{};if(m instanceof Object){var k=[],j=m.left+"-"+m.right;for(var G in m){var q,_t=m[G];_t&&(q=this.computeTextLayout({},e,n,r,d,_t,g,j,G),w[_t]||(w[_t]={text_settings:g,ref:0}),k.push({draw:n,text:_t,text_settings_key:v,layout:q}))}return 0<k.length&&k}var _r=this.computeTextLayout({},e,n,r,d,m,g);return w[m]||(w[m]={text_settings:g,ref:0}),{draw:n,text:m,text_settings_key:v,layout:_r}}}},parseTextSource:function(e,n,r){var d,m=n.text_source||"name";if(null!=m&&"object"===_typeof(m))for(var g in d={},m)d[g]=this.parseTextSourceValue(m[g],e,r);else d=this.parseTextSourceValue(m,e,r);return d},parseTextSourceValue:function(e,n,r){var d;if(Array.isArray(e)){for(var m=0;m<e.length;m++)if("string"==typeof e[m]?d=n.properties[e[m]]:"function"==typeof e[m]&&(d=e[m](r)),d)return d}else"string"==typeof e?d=n.properties[e]:e instanceof Function&&(d=e(r));return d},prepareTextLabels:function(e,n,r){var d=this;return 0===Object.keys(this.texts[e.id]||{}).length?Promise.resolve([]):WorkerBroker.postMessage(this.main_thread_target+".calcTextSizes",e.id,this.texts[e.id]).then(function(m){var g=m.texts;return e.canceled?(log("trace","Style ".concat(d.name,": stop tile build because tile was canceled: ").concat(e.key,", post-calcTextSizes()")),[]):(d.texts[e.id]=g||[],g?d.buildTextLabels(e,r):(Collision.abortTile(e.id),[]))})},collideAndRenderTextLabels:function(e,n,r){var d=this;return this.prepareTextLabels(e,n,r).then(function(m){return 0===m.length?(Collision.collide([],n,e.id),Promise.resolve({})):Collision.collide(m,n,e.id).then(function(g){if(e.canceled)return log("trace","stop tile build because tile was canceled: ".concat(e.key,", post-collide()")),{};var v=d.texts[e.id];return null==v||0===g.length?{}:(d.cullTextStyles(v,g),g.forEach(function(w){var k=w.text_settings_key,j=v[k]&&v[k][w.text];j.text_settings.can_articulate?(j.type||(j.type=[]),-1===j.type.indexOf(w.label.type)&&j.type.push(w.label.type)):(j.align=j.align||{},j.align[w.label.align]={})}),{labels:g,texts:v,textures:[]})})})},cullTextStyles:function(e,n){for(var r=0;r<n.length;r++){var d=n[r];e[d.text_settings_key][d.text].ref++}for(var m in e)for(var g in e[m])e[m][g].ref<1&&delete e[m][g];for(var v in e)0===Object.keys(e[v]).length&&delete e[v]},calcTextSizes:function(e,n){return this._canvas_text||(this._canvas_text=new CanvasText,this._canvas_ctx_for_sizes=this._canvas_text.createCanvas().getContext("2d")),this._canvas_text.textSizes(e,n,this._canvas_ctx_for_sizes)},preprocessText:function(e){if(e&&e.font&&"object"===_typeof(e.font))return e.font.fill=StyleParser.createPropertyCache(e.font.fill),e.font.stroke&&(e.font.stroke.color=StyleParser.createPropertyCache(e.font.stroke.color)),e.background&&e.background.color&&(e.background.color=StyleParser.createPropertyCache(e.background.color)),e.outline&&(e.outline.color&&(e.outline.color=StyleParser.createPropertyCache(e.outline.color)),e.outline.width&&(e.outline.width=StyleParser.createPropertyCache(e.outline.width,StyleParser.parsePositiveNumber))),e.padding&&(Array.isArray(e.padding)?2===e.padding.length&&(e.padding=[e.padding[0],e.padding[1],e.padding[0],e.padding[1]]):e.padding=Array(4).fill(e.padding),e.padding=StyleParser.createPropertyCache(e.padding,function(n){return n.map(StyleParser.parsePositiveNumber)})),e.font.px_size=StyleParser.createPropertyCache(e.font.size||TextSettings$1.defaults.size,CanvasText.fontPixelSize),e.font.stroke&&null!=e.font.stroke.width&&(e.font.stroke.width=StyleParser.createPropertyCache(e.font.stroke.width,StyleParser.parsePositiveNumber)),e.offset=StyleParser.createPropertyCache(e.offset,function(n){return Array.isArray(n)&&n.map(StyleParser.parseNumber)}),e.buffer=StyleParser.createPropertyCache(e.buffer,function(n){return(Array.isArray(n)?n:[n,n]).map(StyleParser.parsePositiveNumber)}),e.repeat_distance=StyleParser.createPropertyCache(e.repeat_distance||Geo$1.tile_size,StyleParser.parsePositiveNumber),e},computeTextLayout:function(e,n,r,d,m,g,v,w,k){var j=e||{};return(j=this.computeLayout(j,n,r,d,m)).repeat_distance&&(w&&(j.repeat_group+="/"+w),j.repeat_group+="/"+g),j.subdiv=m.overzoom2,j.align=r.align,j.italic="normal"!==v.style,"right"===k?j.orientation=1:"left"===k&&(j.orientation=-1),j}};function degToRad(e){return e*Math.PI/180}var PI_OVER_180=Math.PI/180,HORIZON_THRESHOLD_MULTIPLIER=.75,ZOOM_FOR_BOUNDS_EPSILON=.001,NEAR_PLANE=1,LookAtManipulator=function(){function e(n,r){_classCallCheck(this,e),this._min_zoom=H.util.constants.DEFAULT_MIN_ZOOM_LEVEL,this._max_zoom=H.util.constants.DEFAULT_MAX_ZOOM_LEVEL,this._viewport=n,this._center_offset=[],this._center_offset_normalized=[],this._viewport_aspect_ratio=1,this._focal_length=[[16,2],[17,2.5],[18,3],[19,4],[20,6]],this._view_matrix=new Float64Array(16),this._projection_matrix=new Float64Array(16),this._heading_matrix=new Float64Array(16),this._tilt_matrix=new Float64Array(16),this._transformation_matrix=new Float64Array(16),this._camera_matrix=new Float64Array(16),this._lookAtData={position:[0,0,0],zoom:0,tile_level:0,tetragon:void 0,bounds:void 0,unpadded_bounds:void 0,distance:void 0,tilt:0,incline:0,heading:180},this._zoom_direction=0,this._horizon=0,this.handleViewportUpdate(!0),r?this.setLookAtData(r):this._updateMatrices(),ShaderProgram.replaceBlock("camera","\n            uniform mat4 u_projection;\n            uniform vec3 u_eye;\n            uniform vec2 u_center_offset;\n\n            void cameraProjection (inout vec4 position) {\n                position = u_projection * position;\n            }")}return _createClass(e,[{key:"getZoomForBounds",value:function(n,r,d,m){var g,v=this.clone(),w=this._max_zoom,k=this._min_zoom,j=(w-k)/2,G=w-j,q=r,_t=MathUtils$1.getBBoxCenter(MathUtils$1.getBBox(n));for(void 0===q?q=_t:(g=_t[0]-q[0],Math.abs(g)>Geo$1.half_circumference_meters+1e-8&&(q[0]+=Math.round(g/Geo$1.circumference_meters)*Geo$1.circumference_meters));ZOOM_FOR_BOUNDS_EPSILON<j;)!function(){v.setLookAtData({zoom:G,position:q,tilt:d,heading:m});var _r,_s,_f=v.getLookAtData().bounds;n.every(function(_h){return MathUtils$1.isPointInsidePolygon(_h,_f)})?k=G:(_s=(_r=_slicedToArray(MathUtils$1.getBBox(_f),4))[0],_r[2]-_s+1e-8>=Geo$1.circumference_meters&&_r[3]-_r[1]+1e-8>=Geo$1.circumference_meters?k=G:w=G),G=w-(j=(w-k)/2)}();return k}},{key:"setZoomConstraints",value:function(n,r){this._min_zoom=n,this._max_zoom=r,this.setLookAtData(this.getLookAtData())}},{key:"setLookAtData",value:function(n,r){var d,m,g,v,w,k=n.position,j=n.zoom;k===d&&n.bounds!==d&&(k=MathUtils$1.getBBoxCenter(MathUtils$1.getBBox(n.bounds))),j===d&&n.bounds!==d&&(j=this.getZoomForBounds(n.bounds,k,n.tilt,n.heading)),r!==d&&(m=k||this.screenToWorld(r)),j!==d&&(j=MathUtils$1.clamp(j,this._min_zoom,this._max_zoom),(g=Utils$1.zoomToTileLevel(j))!==(v=this._lookAtData.tile_level)&&(this._zoom_direction=v<g?1:-1),this._lookAtData.zoom=j,this._lookAtData.tile_level=g),n.tilt!==d&&(this._lookAtData.tilt=n.tilt),n.heading!==d&&(this._lookAtData.heading=n.heading),r!==d?(this._updateMatrices(),w=this.screenToWorld(r),this._lookAtData.position[0]-=w[0]-m[0],this._lookAtData.position[1]-=w[1]-m[1]):k&&(this._lookAtData.position=k),this._lookAtData.position[2]=0,this._lookAtData.position[1]=MathUtils$1.clamp(this._lookAtData.position[1],-Geo$1.half_circumference_meters,Geo$1.half_circumference_meters),this._updateMatrices(),this._updateVisibleBounds()}},{key:"getZoomDirection",value:function(){return this._zoom_direction}},{key:"resetZoomDirection",value:function(){this._zoom_direction=0}},{key:"getLookAtData",value:function(){return this._lookAtData}},{key:"handleViewportUpdate",value:function(n){var r=0<arguments.length&&void 0!==n&&n,d=this._viewport,m=d.width,g=d.height;this._viewport_aspect_ratio=m/g;var v=this._viewport.center.x-(m/2<<0),w=this._viewport.center.y-(g/2<<0);this._center_offset[0]=v,this._center_offset[1]=w,this._center_offset_normalized[0]=v/m,this._center_offset_normalized[1]=w/-g,r||(this._updateMatrices(),this._updateVisibleBounds())}},{key:"setupMatrices",value:function(n,r){mat4.multiply(n.model_view32,this._view_matrix,n.model),r.uniform("Matrix4fv","u_modelView",n.model_view32),mat3.normalFromMat4(n.normal32,n.model_view32),mat3.invert(n.inverse_normal32,n.normal32),r.uniform("Matrix3fv","u_normalMatrix",n.normal32),r.uniform("Matrix3fv","u_inverseNormalMatrix",n.inverse_normal32)}},{key:"_updateMatrices",value:function(){var n=this._viewport.height*Geo$1.metersPerPixel(this._lookAtData.zoom),r=Utils$1.interpolate(this._lookAtData.zoom,this._focal_length);this._lookAtData.distance=n/2*r;var d=this._lookAtData.position[0],m=this._lookAtData.position[1];mat4.lookAt(this._view_matrix,vec3.fromValues(d,m,0),vec3.fromValues(d,m,-1),vec3.fromValues(0,1,0)),this._heading_matrix=mat4.identity(this._heading_matrix);var g=180-this._lookAtData.heading;g*=PI_OVER_180,this._heading_matrix[0]=Math.cos(g),this._heading_matrix[1]=-Math.sin(g),this._heading_matrix[4]=Math.sin(g),this._heading_matrix[5]=Math.cos(g),this._tilt_matrix=mat4.identity(this._tilt_matrix),g=0<(g=this._lookAtData.tilt?this._lookAtData.tilt*PI_OVER_180:0)?-g:g,this._tilt_matrix[5]=Math.cos(g),this._tilt_matrix[6]=Math.sin(g),this._tilt_matrix[9]=-Math.sin(g),this._tilt_matrix[10]=Math.cos(g),mat4.multiply(this._transformation_matrix,this._tilt_matrix,this._heading_matrix),mat4.multiply(this._view_matrix,this._transformation_matrix,this._view_matrix);var v=2*Math.atan(1/r),w=2*this._lookAtData.distance;this._depth_buffer_adjustment=2/Math.log(w/NEAR_PLANE),mat4.perspective(this._projection_matrix,v,this._viewport_aspect_ratio,NEAR_PLANE,w),this._projection_matrix[8]=2*-this._center_offset_normalized[0],this._projection_matrix[9]=2*-this._center_offset_normalized[1],mat4.translate(this._projection_matrix,this._projection_matrix,vec3.fromValues(0,0,-this._lookAtData.distance)),this._camera_matrix=mat4.multiply(this._camera_matrix,this._projection_matrix,this._view_matrix)}},{key:"_updateVisibleBounds",value:function(){var n,r,d,m,g,v=this._viewport,w=v.width,k=v.height,j=v.padding,G=degToRad(this._lookAtData.tilt);this._horizon=Math.max((j.top+k)/2-Math.cos(G)*(j.top*(1-Math.sin(G))+k*HORIZON_THRESHOLD_MULTIPLIER),0),this._lookAtData.tetragon=[this.screenToWorld([0,this._horizon]),this.screenToWorld([w,this._horizon]),this.screenToWorld([w,k]),this.screenToWorld([0,k])],this._lookAtData.unpadded_bounds=this._clipAgainstGeoBounds(this._lookAtData.tetragon),0===j.left&&0===j.top&&0===j.right&&0===j.bottom?this._lookAtData.bounds=this._lookAtData.unpadded_bounds:(n=j.left,r=Math.max(this._horizon,j.top),d=w-j.right,m=k-j.bottom,g=[this.screenToWorld([n,r]),this.screenToWorld([d,r]),this.screenToWorld([d,m]),this.screenToWorld([n,m])],this._lookAtData.bounds=this._clipAgainstGeoBounds(g))}},{key:"_clipAgainstGeoBounds",value:function(n){var r,k,G,d=_slicedToArray(MathUtils$1.getBBox(n),4),m=Geo$1.half_circumference_meters,v=MathUtils$1.clipPolygon([[(k=d[0])-1,+m],[(G=d[2])+1,+m],[G+1,-m],[k-1,-m]],n)[0],w=_slicedToArray(MathUtils$1.getBBox(v),4),j=w[1],q=w[3];(G=w[2])-(k=w[0])>=Geo$1.circumference_meters&&(v=[[(r=(G-k)/2)-m,q],[r+m,q],[r+m,j],[r-m,j]]);var _t=[];return v&&(_t=MathUtils$1.splitLegs(v,m)),_t}},{key:"applyPxOffset",value:function(n){var r=_slicedToArray(n,2),d=r[0],m=r[1],g=Math.PI-this._lookAtData.heading*PI_OVER_180,v=Geo$1.metersPerPixel(this._lookAtData.zoom);this._lookAtData.position[0]+=(d*Math.cos(g)+m*Math.sin(g))*v,this._lookAtData.position[1]-=(m*Math.cos(g)-d*Math.sin(g))*v,this._lookAtData.position[1]=MathUtils$1.clamp(this._lookAtData.position[1],-Geo$1.half_circumference_meters,Geo$1.half_circumference_meters),this._updateMatrices(),this._updateVisibleBounds()}},{key:"screenToWorld",value:function(n){var r=_slicedToArray(n,2),d=r[0],m=r[1],g=this._viewport,v=g.width,w=g.height;return 0===v||0===w?[0,0]:this._clipCoordsToWorldPlaneCoords([2*((d-=v/2)+v/2)/v-1,1-2*((m-=w/2)+w/2)/w,-1,1])}},{key:"_clipToScreenCoords",value:function(n){var r=this._viewport,m=r.height;return[(.5*n[0]+.5)*r.width,m-(.5*n[1]+.5)*m]}},{key:"_isScreenPointInViewPort",value:function(n){var r=this._viewport;return 0<=n[0]&&n[0]<=r.width&&0<=n[1]&&n[1]<=r.height}},{key:"worldToScreen",value:function(n,r){var d,m,g,v,w,k,j=1<arguments.length&&void 0!==r&&r;return n[2]||(n[2]=0),j?(d=this._worldToClipCoords(n),w=this._clipToScreenCoords(d)):(m=Math.sign(this._lookAtData.position[0]),g=Math.trunc(this._lookAtData.position[0]/Geo$1.circumference_meters+m/2),n[0]+=Geo$1.circumference_meters*g,v=this._worldToClipCoords(n),k=w=this._clipToScreenCoords(v),this._isScreenPointInViewPort(w)||(v=this._worldToClipCoords([n[0]+Geo$1.circumference_meters,n[1],n[2]]),w=this._clipToScreenCoords(v),this._isScreenPointInViewPort(w)||(v=this._worldToClipCoords([n[0]-Geo$1.circumference_meters,n[1],n[2]]),w=this._clipToScreenCoords(v)),this._isScreenPointInViewPort(w)||(w=k))),w}},{key:"getHorizon",value:function(){return this._horizon}},{key:"_clipCoordsToWorldPlaneCoords",value:function(n){var r=[],d=this._lookAtData.distance,m=this._lookAtData.position,g=[0,0,d,0],v=0,w=d*Math.sin(PI_OVER_180*this._lookAtData.tilt)*Math.cos(PI_OVER_180*this._lookAtData.heading),k=d*Math.sin(PI_OVER_180*this._lookAtData.tilt)*Math.sin(PI_OVER_180*this._lookAtData.heading),j=new Float64Array(16),G=new Float64Array(16);return mat4.invert(j,this._projection_matrix),vec4.transformMat4(r,n,j),r[2]=-1,r[3]=0,mat4.invert(G,this._view_matrix),vec4.transformMat4(r,r,G),vec4.normalize(r,r),vec4.transformMat4(g,g,this._transformation_matrix),0!==r[2]&&(v=-g[2]/r[2]),vec4.scale(r,r,v),[m[0]+(r[0]+k),m[1]+(r[1]+w)]}},{key:"_worldToClipCoords",value:function(n){var r=[n[0],n[1],n[2],1];return vec4.transformMat4(r,r,this._view_matrix),vec4.transformMat4(r,r,this._projection_matrix),vec4.scale(r,r,1/r[3]),r}},{key:"setupProgram",value:function(n){n.uniform("Matrix4fv","u_projection",this._projection_matrix),n.uniform("3f","u_eye",[0,0,this._lookAtData.distance]),n.uniform("2fv","u_center_offset",this._center_offset_normalized),n.uniform("1f","u_tilt",this._lookAtData.tilt*PI_OVER_180),n.uniform("1f","u_heading",this._lookAtData.heading*PI_OVER_180),n.uniform("1f","u_near_plane",NEAR_PLANE),n.uniform("1f","u_depth_buffer_adjustment",this._depth_buffer_adjustment)}},{key:"getTransformationMatrix",value:function(){return this._transformation_matrix}},{key:"getCameraMatrix",value:function(){return this._camera_matrix}},{key:"clone",value:function(){var n=new e(this._viewport,this._lookAtData);return n.setZoomConstraints(this._min_zoom,this._max_zoom),n}},{key:"getViewport",value:function(){return this._viewport}}]),e}();function getX(e){return void 0===e.x?e[0]:e.x}function getY(e){return void 0===e.y?e[1]:e.y}function xAscendingComparator(e,n){return getX(e)-getX(n)}function yAscendingComparator(e,n){return getY(e)-getY(n)}function sortByX(e){return e.sort(xAscendingComparator)}function sortByY(e){return e.sort(yAscendingComparator)}function getMinMax(e,n){for(var r,d=e[0],m=d,g=0;g<e.length;g+=1)n(r=e[g],d)<0?d=r:0<n(r,m)&&(m=r);return[d,m]}function groupByCoord(e,n){return Object.values(n.reduce(function(r,d){var m=d[+e];return r[m]||(r[m]=[]),r[m].push(d),r},{}))}function groupByX(e){return groupByCoord(!1,e)}function groupByY(e){return groupByCoord(!0,e)}function createTileRangeByCoord(e,n,r){var d=+e,m=n[d],g=r[d];if(g<m)return[];var v=[n];if(g<m)return v;for(var w=n[(1+d)%2],k=e?function(G){return v.push([w,G])}:function(G){return v.push([G,w])},j=m+1;j<g;j+=1)k(j);return v.push(r),v}function createTileRangeByX(e,n){return createTileRangeByCoord(!1,e,n)}function createTileRangeByY(e,n){return createTileRangeByCoord(!0,e,n)}function deduplicate(e){var n={},r=[];return e.forEach(function(d){var m=d.key||(Array.isArray(d)?"".concat(d[0],"/").concat(d[1]):"".concat(d.x,"/").concat(d.y));n[m]||(n[m]=!0,r.push(d))}),r}function flat(e){return e.reduce(function(n,r){return n.concat(r)})}function applyMargin(e,n){return n<=0?e:deduplicate((r=groupByY(flat(groupByX(e).map(function(g){var v=_slicedToArray(getMinMax(g,yAscendingComparator),2),w=v[0],k=v[1],G=[k[0],k[1]+n];return g.concat(createTileRangeByY([w[0],w[1]-n],w),createTileRangeByY(k,G))}))),flat(r.map(function(g){var v=_slicedToArray(getMinMax(g,xAscendingComparator),2),w=v[0],k=v[1],G=[k[0]+n,k[1]];return g.concat(createTileRangeByX([w[0]-n,w[1]],w),createTileRangeByX(k,G))}))));var r}function constructTiles(e,n,r){return e.map(function(d){var m=_slicedToArray(d,2);return Tile.coord(Geo$1.wrapTile({x:m[0],y:m[1],z:n},{x:!r,y:!0}))})}function getTileGrid(e,n,r){function d(m){return Object.values(Geo$1.metersToExactTileCoords(m,e.tile_level))}return deduplicate(constructTiles(applyMargin(rasterizeTetragon(d(e.tetragon[0]),d(e.tetragon[1]),d(e.tetragon[3]),d(e.tetragon[2])),n),e.tile_level,r))}function rasterizeTetragon(e,n,r,d){var m=rasterizeTriangle(n,e,r),g=rasterizeTriangle(r,d,n);return deduplicate(m.concat(g))}function rasterizeTriangle(e,n,r){var d=_slicedToArray(sliceTriangle.apply(void 0,_toConsumableArray(sortByY([e,n,r]))),2),g=d[1];return deduplicate(rasterizeBottomFlatTriangle.apply(void 0,_toConsumableArray(d[0])).concat(rasterizeTopFlatTriangle.apply(void 0,_toConsumableArray(g))))}function sliceTriangle(e,n,r){var d=_slicedToArray(e,2),m=d[0],g=d[1],v=_slicedToArray(n,2),w=v[0],k=v[1],j=_slicedToArray(r,2),G=j[0],q=j[1],_t=m+(k-g)/(q-g)*(G-m);return[[[m,g]].concat(_toConsumableArray(sortByX([[w,k],[_t,k]]))),[].concat(_toConsumableArray(sortByX([[w,k],[_t,k]])),[[G,q]])]}function rasterizeBottomFlatTriangle(e,n,r){var d=_slicedToArray(e,2),m=d[0],g=d[1],v=_slicedToArray(n,2),k=v[1];return scanFlatTriangle(m,v[0],_slicedToArray(r,1)[0],g,k)}function rasterizeTopFlatTriangle(e,n,r){var d=_slicedToArray(e,2),m=d[0],g=d[1],v=_slicedToArray(n,1)[0],w=_slicedToArray(r,2);return scanFlatTriangle(w[0],m,v,w[1],g)}var scanStepStatic=.125;function getScanStep(e,n){return scanStepStatic*(n-e)/(Math.ceil(n)-Math.floor(e))}function scanFlatTriangle(e,n,r,d,m){var g=Math.min(e,n),v=Math.max(e,r),w=Math.min(d,m),k=Math.max(d,m);if(Math.floor(d)===Math.floor(m))return scanRow(g,v,d);if(k-w<scanStepStatic)return scanRectangle([g,w],[v,k]);function j(_h){_s=_s.concat(scanRow(ga,_c,Math.floor(_h))),ga+=_t,_c+=_r}var G=getScanStep(w,k),q=(k-w)/G,_t=(n-e)/q,_r=(r-e)/q,_s=[],ga=e,_c=e;if(d<m)for(var _u=w;_u<=k;_u+=G)j(_u);else for(var _f=k;w<=_f;_f-=G)j(_f);return deduplicate(_s)}function xCoordsToPoints(e,n){return e.map(function(r){return[r,n]})}function createCoordRange(e,n){var r=Math.floor(e),d=Math.floor(n);if(d<r)return[];if(r===d)return[r];for(var m=[],g=r;g<=d;g+=1)m.push(g);return m}function scanRow(e,n,r){return xCoordsToPoints(createCoordRange(e,n),r)}function scanRectangle(e,n){var r=_slicedToArray(e,2),d=r[0],m=r[1],g=_slicedToArray(n,2),w=g[1],k=createCoordRange(d,g[0]),j=xCoordsToPoints(k,m),G=xCoordsToPoints(k,w);return j.concat(G)}var VIEW_PAN_SNAP_TIME=.5,Z_PRECISION=1e5,View=function(){function e(n,r){_classCallCheck(this,e),subscribeMixin(this),this.scene=n,this.createMatrices(),this.bounds=null,this.center_tile=null,this.panning=!1,this.panning_stop_at=0,this.pan_snap_timer=0,this.user_input_at=0,this.user_input_timeout=50,this.user_input_active=!1,this.size={},this.buffer=0,this.wrap=!1!==r.wrapView,this.preserve_tiles_within_zoom=1,this.lookAtManipulator=new LookAtManipulator(r.viewport),this._viewport=r.viewport,this._offset_buffer=[0,0],this.handleViewportUpdate(!0)}return _createClass(e,[{key:"update",value:function(){this.pan_snap_timer=(new Date-this.panning_stop_at)/1e3,this.user_input_active=new Date-this.user_input_at<this.user_input_timeout,this.scene.tile_manager.updateTilesVisibilityCounters()}},{key:"handleViewportUpdate",value:function(n){var r=0<arguments.length&&void 0!==n&&n,d=this._viewport,m=d.width,g=d.height;this.size.css={width:m,height:g},this.size.device={width:Math.round(m*Utils$1.device_pixel_ratio),height:Math.round(g*Utils$1.device_pixel_ratio)},this.lookAtManipulator.handleViewportUpdate(),r||this.updateBounds()}},{key:"setLookAtData",value:function(n,r){e._setLookAtDataForManipulator(this.lookAtManipulator,n,r),this.updateBounds()}},{key:"getLookAtData",value:function(n){return e._getLookAtDataFromManipulator(this.lookAtManipulator,0<arguments.length&&void 0!==n&&n)}},{key:"getBestLookAtData",value:function(n,r,d){var m=2<arguments.length&&void 0!==d&&d,g=this.lookAtManipulator.clone();return e._setLookAtDataForManipulator(g,n,r),e._getLookAtDataFromManipulator(g,m)}},{key:"getTileLevel",value:function(){return this.lookAtManipulator.getLookAtData().tile_level}},{key:"applyPxOffset",value:function(n){var r=this._offset_buffer;r[0]+=n[0],r[1]+=n[1];var d,m,g=Math.abs(r[0]),v=Math.abs(r[1]);(1<=g||1<=v)&&(d=~~r[0],m=~~r[1],this.lookAtManipulator.applyPxOffset([g<1?0:d,v<1?0:m]),1<=g&&(r[0]-=d),1<=v&&(r[1]-=m),this.updateBounds())}},{key:"setPanning",value:function(n){this.panning=n,this.panning||(this.panning_stop_at=+new Date)}},{key:"markUserInput",value:function(){this.user_input_at=+new Date}},{key:"ready",value:function(){return"number"==typeof this.size.css.width&&"number"==typeof this.size.css.height}},{key:"updateBounds",value:function(){var n,r;this.markUserInput(),this.ready()&&(this.center_tile=Geo$1.tileForMeters(this.lookAtManipulator.getLookAtData().position,this.lookAtManipulator.getLookAtData().tile_level),n=this.lookAtManipulator.screenToWorld([0,this.size.css.height]),r=this.lookAtManipulator.screenToWorld([this.size.css.width,0]),this.bounds={sw:{x:n[0],y:n[1]},ne:{x:r[0],y:r[1]}},this.scene.tile_manager.updateTilesForView(!0),this.trigger("move"),this.scene.requestRedraw())}},{key:"getTileGridFlatForBBox",value:function(n,r,d,m,g,v){var w,k=4<arguments.length&&void 0!==g?g:0,j=!(5<arguments.length&&void 0!==v)||v,G=this.lookAtManipulator.getLookAtData().tile_level,q=Geo$1.tileForMeters([r,n],G),_t=Geo$1.tileForMeters([m,d],G);q.x-=k,q.y-=k,_t.x+=k,_t.y+=k,!1===j&&(w=(1<<G)-1,q.x=Math.min(Math.max(0,q.x),w),q.y=Math.min(Math.max(0,q.y),w),_t.x=Math.min(Math.max(0,_t.x),w),_t.y=Math.min(Math.max(0,_t.y),w));for(var _r=[],_s={},ga=q.x;ga<=_t.x;ga++)for(var _c=q.y;_c<=_t.y;_c++){var _u=Tile.coord(Geo$1.wrapTile({x:ga,y:_c,z:G},{x:!j,y:!0}));_s[_u.key]||(_s[_u.key]=!0,_r.push(_u))}return _r}},{key:"getTileGridFlat",value:function(){return this.getTileGridFlatForBBox(this.bounds.ne.y,this.bounds.sw.x,this.bounds.sw.y,this.bounds.ne.x,this.buffer,this.wrap)}},{key:"getTileGridDistorted",value:function(){return getTileGrid(this.lookAtManipulator.getLookAtData(),this.buffer,this.wrap)}},{key:"findVisibleTileCoordinates",value:function(){if(!this.bounds)return[];var n=this.lookAtManipulator.getLookAtData();return 0===n.tilt&&180===n.heading?this.getTileGridFlat():this.getTileGridDistorted()}},{key:"createMatrices",value:function(){this.matrices={},this.matrices.model=new Float64Array(16),this.matrices.model32=new Float32Array(16),this.matrices.model_view=new Float64Array(16),this.matrices.model_view32=new Float32Array(16),this.matrices.normal=new Float64Array(9),this.matrices.normal32=new Float32Array(9),this.matrices.inverse_normal32=new Float32Array(9)}},{key:"setupTile",value:function(n,r){n.setupProgram(this.matrices,r),this.lookAtManipulator.setupMatrices(this.matrices,r)}},{key:"setupProgram",value:function(n){var r=this.lookAtManipulator.getLookAtData();n.uniform("2fv","u_resolution",[this.size.device.width,this.size.device.height]),n.uniform("3fv","u_map_position",[r.position[0],r.position[1],Math.trunc(r.zoom*Z_PRECISION)/Z_PRECISION]),n.uniform("1f","u_meters_per_pixel",Geo$1.metersPerPixel(r.zoom)),n.uniform("1f","u_device_pixel_ratio",Utils$1.device_pixel_ratio),n.uniform("1f","u_view_pan_snap_timer",this.pan_snap_timer),n.uniform("1i","u_view_panning",this.panning),n.uniform("1f","u_horizon",this.lookAtManipulator.getHorizon()/(this.size.css.height/2)),this.lookAtManipulator.setupProgram(n)}},{key:"isAnimating",value:function(){return this.pan_snap_timer<=VIEW_PAN_SNAP_TIME}},{key:"xyToGeo",value:function(n,r){var d=this.lookAtManipulator.screenToWorld([n,r]),m=_slicedToArray(Geo$1.metersToLatLng(d),2);return{lat:m[1],lng:m[0]}}},{key:"geoToPixel",value:function(n){var r=Geo$1.latLngToMeters([n.lng,n.lat]);r.push(n.alt||0);var d=this.lookAtManipulator.worldToScreen(r);return{x:Math.floor(d[0]),y:Math.floor(d[1])}}},{key:"geoToMeters",value:function(n){var r=_slicedToArray(Geo$1.latLngToMeters([n.lng,n.lat]),2);return{x:r[0],y:r[1],z:n.alt||0}}},{key:"metersToGeo",value:function(n){var r=_slicedToArray(Geo$1.metersToLatLng([n.x,n.y]),2);return{lat:r[1],lng:r[0],alt:n.z||0}}},{key:"setZoomConstraints",value:function(n,r){this.lookAtManipulator.setZoomConstraints(n,r)}}],[{key:"_setLookAtDataForManipulator",value:function(n,r,d){var m=r.position,k=r.bounds,j={zoom:r.zoom,tilt:r.tilt,heading:r.heading};if(m&&"number"==typeof m.lng&&"number"==typeof m.lat&&(j.position=Geo$1.latLngToMeters([m.lng,m.lat])),k){var G=k.getExterior().getLatLngAltArray(),q=G.length/3,_t=Array(q);if(k.getBoundingBox().isCDB())for(var _r=G[1],_s=0,ga=0;ga<q;ga++){var _u=G[3*ga+1];0<ga&&180<Math.abs(_u-_r)&&(_s+=_r<_u?-360:360),_r=_u,_t[ga]=Geo$1.latLngToMeters([_u+_s,G[3*ga]])}else for(var _f=0;_f<q;_f++)_t[_f]=Geo$1.latLngToMeters([G[3*_f+1],G[3*_f]]);j.bounds=_t}n.setLookAtData(j,d)}},{key:"_getLookAtDataFromManipulator",value:function(n,r){var d=1<arguments.length&&void 0!==r&&r,m=n.getLookAtData(),g=m.heading,v=m.incline,w=m.tilt,k=m.zoom,j=m.position,G=m.bounds,q=m.unpadded_bounds,_t=_slicedToArray(Geo$1.metersToLatLng(j),2),_r=_t[0],_s=_t[1],ga=new H.geo.LineString;return(d?q:G).forEach(function(_c){var _u=Geo$1.metersToLatLng(_c);ga.pushLatLngAlt(_u[1],_u[0],0)}),{heading:g,incline:v,tilt:w,zoom:k,bounds:new H.geo.Polygon(ga),position:{lat:_s,lng:_r,alt:j[2]}}}}]),e}(),shaderSrc_pointsVertex="uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_tile_proxy_depth;uniform bool u_tile_fade_in;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform float u_visible_time;uniform bool u_view_panning;uniform float u_tilt;uniform mat4 u_model;uniform mat4 u_modelView;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform float u_heading;uniform float u_near_plane;uniform float u_depth_buffer_adjustment;attribute vec4 a_position;attribute vec4 a_shape;attribute vec4 a_color;attribute vec2 a_texcoord;attribute vec2 a_offset;uniform float u_point_type;attribute float a_is_flat;\n#ifdef TANGRAM_IS_TEXT_STYLE\nattribute vec4 a_offsets_alt;attribute vec4 a_pre_angles_alt;attribute vec4 a_angles_alt;attribute vec4 a_offsets;attribute vec4 a_pre_angles;attribute vec4 a_angles;\n#endif\n#ifdef TANGRAM_POINT_DRAW_STICK\nattribute float a_is_stick;attribute float a_stick_height;varying float v_is_stick;\n#endif\nvarying vec4 v_color;varying vec2 v_texcoord;varying vec4 v_world_position;varying float v_alpha_factor;\n#ifdef TANGRAM_HAS_SHADER_POINTS\nattribute float a_outline_edge;attribute vec4 a_outline_color;varying float v_outline_edge;varying vec4 v_outline_color;varying float v_aa_offset;\n#endif\n#ifdef TANGRAM_SHOW_HIDDEN_LABELS\nvarying float v_label_hidden;\n#endif\n#define PI 3.14159265359\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\nvec2 rotate2D(vec2 _st,float _angle){return mat2(cos(_angle),-sin(_angle),sin(_angle),cos(_angle))*_st;}vec3 rotateX3D(vec3 _st,float _angle){return mat3(1.,0.,0.,0.,cos(_angle),sin(_angle),0.,-sin(_angle),cos(_angle))*_st;}vec3 rotateZ3D(vec3 _st,float _angle){return mat3(cos(_angle),sin(_angle),0.,-sin(_angle),cos(_angle),0.,0.,0.,1.)*_st;}\n#ifdef TANGRAM_IS_TEXT_STYLE\nfloat mix4linear(float a,float b,float c,float d,float x){return mix(mix(a,b,3.*x),mix(b,mix(c,d,3.*(max(x,.66)-.66)),3.*(clamp(x,.33,.66)-.33)),step(0.33,x));}\n#endif\nvoid main(){\n#pragma tangram: setup\n#ifndef TANGRAM_SHOW_HIDDEN_LABELS\nif(a_shape.w==0.){gl_Position=vec4(0.,0.,0.,1.);return;}\n#else\nif(a_shape.w==0.){v_label_hidden=1.;}else{v_label_hidden=0.;}\n#endif\nv_alpha_factor=1.0;v_color=a_color;v_texcoord=a_texcoord;\n#ifdef TANGRAM_HAS_SHADER_POINTS\nv_outline_color=a_outline_color;v_outline_edge=a_outline_edge;if(u_point_type==TANGRAM_POINT_TYPE_SHADER){v_outline_color=a_outline_color;v_outline_edge=a_outline_edge;float size=abs(a_shape.x/128.);v_texcoord=sign(a_shape.xy)*(size+1.0)/size;size+=2.0;v_aa_offset=2.0/size;}\n#endif\nvec4 position=u_modelView*vec4(a_position.xyz,1.);vec4 shape=vec4(a_shape.xy,0.,0.);vec2 offset=vec2(a_offset.x,-a_offset.y);\n#ifdef TANGRAM_POINT_DRAW_STICK\nv_is_stick=a_is_stick;float scaled_stick_height=(sin(u_tilt+(1.5*PI))+1.0)*a_stick_height;offset.y+=(1.0-a_is_stick)*scaled_stick_height;\n#endif\nfloat zoom=clamp(u_map_position.z-u_tile_origin.z,0.,1.);float theta=a_shape.z/4096.;float heading=u_heading;float delta=(heading-PI);float new_theta=theta-delta;float reversed=abs(new_theta)>PI/2. ? 1. : 0.;if(a_is_flat==1.0){\n#ifdef TANGRAM_IS_TEXT_STYLE\nif(a_offsets[0]!=0.){vec4 angles_scaled;vec4 pre_angles_scaled;vec4 offsets_scaled;if(reversed==1.){offsets_scaled=a_offsets_alt*4.;angles_scaled=(PI/16384.)*a_angles_alt;pre_angles_scaled=(PI/128.)*a_pre_angles_alt;}else{offsets_scaled=a_offsets*4.;angles_scaled=(PI/16384.)*a_angles;pre_angles_scaled=(PI/128.)*a_pre_angles;}float pre_angle=mix4linear(pre_angles_scaled[0],pre_angles_scaled[1],pre_angles_scaled[2],pre_angles_scaled[3],zoom);float angle=mix4linear(angles_scaled[0],angles_scaled[1],angles_scaled[2],angles_scaled[3],zoom);float offset_curve=mix4linear(offsets_scaled[0],offsets_scaled[1],offsets_scaled[2],offsets_scaled[3],zoom);shape.xy=rotate2D(shape.xy,pre_angle+PI*reversed);shape.x+=offset_curve;shape.xy=rotate2D(shape.xy,angle);shape.xy+=rotate2D(offset,theta);}else{shape.xy=rotate2D(shape.xy+offset*256.,theta+(PI*reversed));}\n#else\nshape.xy=rotate2D(shape.xy+offset*256.,theta);\n#endif\nshape.xy/=pow(2.,4.+(u_map_position.z-u_tile_origin.w));shape=u_modelView*shape;position+=shape;}else{shape.xy/=256.;\n#ifdef TANGRAM_POINT_DRAW_STICK\nshape.y*=1.0+(scaled_stick_height-1.0)*a_is_stick;\n#endif\nshape.xy=rotate2D(shape.xy+offset,theta);}\n#ifdef TANGRAM_FADE_IN_RATE\nif(u_tile_fade_in){v_alpha_factor*=clamp(u_visible_time*TANGRAM_FADE_IN_RATE,0.,1.);}\n#endif\n#ifdef TANGRAM_FADE_ON_ZOOM_OUT\nv_alpha_factor*=clamp(1.+TANGRAM_FADE_ON_ZOOM_OUT_RATE*(u_map_position.z-u_tile_origin.z),0.,1.);\n#endif\nv_world_position=u_model*position;v_world_position.xy+=shape.xy*u_meters_per_pixel;v_world_position=wrapWorldPosition(v_world_position);\n#pragma tangram: position\ncameraProjection(position);\n#ifdef TANGRAM_LAYER_ORDER\napplyLayerOrder(a_position.w+u_tile_proxy_depth+1.,position);/***Due to the precision loss on depth buffer,we had a z-fighting of translucent points when the distance to the camera was big.*For more information about the problem see: https:*For more information about the fix see: https:*position.z=(2.0*log(position.w/u_near_plane)/log(u_far_plane/u_near_plane)-1.0)*position.w;*/position.z=(log(position.w/u_near_plane)*u_depth_buffer_adjustment-1.0)*position.w;\n#endif\nif(a_is_flat!=1.){position.xy+=shape.xy*position.w*2.*u_device_pixel_ratio/u_resolution;}\n#ifdef TANGRAM_HAS_SHADER_POINTS\nif(u_point_type==TANGRAM_POINT_TYPE_SHADER){position.xy+=sign(shape.xy)*position.w*u_device_pixel_ratio/u_resolution;}\n#endif\nif(!u_view_panning){snapToPixelGrid(position);}gl_Position=position;}",shaderSrc_pointsFragment="uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform float u_visible_time;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform sampler2D u_texture;uniform float u_point_type;uniform bool u_apply_color_blocks;varying vec4 v_color;varying vec2 v_texcoord;varying vec4 v_world_position;varying float v_alpha_factor;\n#ifdef TANGRAM_HAS_SHADER_POINTS\nvarying vec4 v_outline_color;varying float v_outline_edge;varying float v_aa_offset;\n#endif\n#ifdef TANGRAM_SHOW_HIDDEN_LABELS\nvarying float v_label_hidden;\n#endif\n#ifdef TANGRAM_POINT_DRAW_STICK\nvarying float v_is_stick;\n#endif\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\n#ifdef TANGRAM_HAS_SHADER_POINTS\nfloat _tangram_antialias(float l,float R){float low=R-v_aa_offset;float high=R+v_aa_offset;return 1.-smoothstep(low,high,l);}\n#endif\nvoid mixTextureColor(inout vec4 color){\n#ifdef TANGRAM_HAS_SHADER_POINTS\nif(u_point_type==TANGRAM_POINT_TYPE_TEXTURE){color*=texture2D(u_texture,v_texcoord);}else if(u_point_type==TANGRAM_POINT_TYPE_LABEL){color=texture2D(u_texture,v_texcoord);color.rgb/=max(color.a,0.001);}else if(u_point_type==TANGRAM_POINT_TYPE_SHADER){float outline_edge=v_outline_edge;vec4 outlineColor=v_outline_color;float l=length(v_texcoord);float outer_alpha=_tangram_antialias(l,1.);float fill_alpha=_tangram_antialias(l,1.-v_outline_edge*0.5)*color.a;float stroke_alpha=(outer_alpha-_tangram_antialias(l,1.-v_outline_edge))*outlineColor.a;\n#ifdef TANGRAM_BLEND_ADD\ncolor.a=stroke_alpha+fill_alpha;color.rgb=color.rgb*fill_alpha+outlineColor.rgb*stroke_alpha;\n#else\ncolor.a=stroke_alpha+fill_alpha*(1.-stroke_alpha);color.rgb=mix(color.rgb*fill_alpha,outlineColor.rgb,stroke_alpha)/max(color.a,0.001);\n#endif\n}\n#else\ncolor=texture2D(u_texture,v_texcoord);color.rgb/=max(color.a,0.001);\n#endif\nif(u_apply_color_blocks){\n#pragma tangram: color\n#pragma tangram: filter\n}color.a*=v_alpha_factor;\n#ifdef TANGRAM_SHOW_HIDDEN_LABELS\nif(v_label_hidden>0.){color.a*=0.5;color.rgb=vec3(1.,0.,0.);}\n#endif\n#if !defined(TANGRAM_BLEND_OVERLAY) && !defined(TANGRAM_BLEND_INLAY) && !defined(TANGRAM_BLEND_ADD)\nif(color.a<TANGRAM_ALPHA_TEST){discard;}\n#endif\n}void main(void){\n#pragma tangram: setup\nvec4 color=v_color;\n#ifdef TANGRAM_POINT_DRAW_STICK\nif(v_is_stick==0.0){mixTextureColor(color);}\n#else\nmixTextureColor(color);\n#endif\ngl_FragColor=color;}",PLACEMENT$1=LabelPoint.PLACEMENT,pre_angles_normalize=128/Math.PI,angles_normalize=16384/Math.PI,offsets_normalize=64,texcoord_normalize=65535,Points=Object.create(Style),TANGRAM_POINT_TYPE_TEXTURE=1,TANGRAM_POINT_TYPE_LABEL=2,TANGRAM_POINT_TYPE_SHADER=3,DEFAULT_POINT_SIZE=16;Object.assign(Points,TextLabels),Object.assign(Points,{name:"points",built_in:!0,vertex_shader_src:shaderSrc_pointsVertex,fragment_shader_src:shaderSrc_pointsFragment,selection:!0,collision:!0,blend:"overlay",init:function(e){Style.init.call(this,0<arguments.length&&void 0!==e?e:{}),this.setupDefines(),this.defines.TANGRAM_HAS_SHADER_POINTS=!0,this.defines.TANGRAM_POINT_TYPE_TEXTURE=TANGRAM_POINT_TYPE_TEXTURE,this.defines.TANGRAM_POINT_TYPE_LABEL=TANGRAM_POINT_TYPE_LABEL,this.defines.TANGRAM_POINT_TYPE_SHADER=TANGRAM_POINT_TYPE_SHADER,this.defines.TANGRAM_POINT_DRAW_STICK=!!this.stick,this.collision_group_points=this.name+"-points",this.collision_group_text=this.name+"-text",this.reset()},setupDefines:function(){"overlay"!==this.blend&&(this.defines.TANGRAM_LAYER_ORDER=!0),this.defines.TANGRAM_FADE_ON_ZOOM_OUT=!0,this.defines.TANGRAM_FADE_ON_ZOOM_OUT_RATE=2,debugSettings$1.suppress_label_fade_in||this.suppress_fade?(this.fade_in_time=0,this.defines.TANGRAM_FADE_IN_RATE=null):(this.fade_in_time=.15,this.defines.TANGRAM_FADE_IN_RATE=1/this.fade_in_time),debugSettings$1.suppress_snap_animation||(this.defines.TANGRAM_VIEW_PAN_SNAP_RATE=1/VIEW_PAN_SNAP_TIME),debugSettings$1.show_hidden_labels&&(this.defines.TANGRAM_SHOW_HIDDEN_LABELS=!0)},reset:function(){this.queues={},this.resetText(),this.texture_missing_sprites={}},addFeature:function(e,n,r){var d,m,g,v=r.tile,w={};if(w.color=this.parseColor(n.color,r),w.texture=n.texture,w.label_texture=null,w.color||w.texture){if(this.hasSprites(w)){if(!(d=this.parseSprite(w,n,r)))return;w.texcoords=d.texcoords}if(w.size=n.size,w.size){if(w.size=StyleParser.evalCachedPointSizeProperty(n.size,d,r),null==w.size)return void log({level:"warn",once:!0},"Layer '".concat(n.layers[n.layers.length-1],"': ")+"'size' includes % and/or ratio-based scaling (".concat(JSON.stringify(n.size.value),"); ")+"these can only applied to sprites, but no sprite was specified, skipping features in layer");"number"==typeof w.size&&(w.size=[w.size,w.size])}else w.size=d&&d.css_size||[DEFAULT_POINT_SIZE,DEFAULT_POINT_SIZE];n.outline&&(w.outline_width=StyleParser.evalCachedProperty(n.outline.width,r)||StyleParser.defaults.outline.width,w.outline_color=this.parseColor(n.outline.color,r)),w.outline_edge_pct=0,w.outline_width&&w.outline_color&&(w.size[0]+=m=w.outline_width,w.size[1]+=m,w.outline_edge_pct=m/Math.min(w.size[0],w.size[1])*2),w.size[0]=Math.min(w.size[0],256),w.size[1]=Math.min(w.size[1],256),w.placement=n.placement,w.placement_min_length_ratio=StyleParser.evalCachedProperty(n.placement_min_length_ratio,r),w.placement===PLACEMENT$1.SPACED&&n.placement_spacing&&(w.placement_spacing=StyleParser.evalCachedProperty(n.placement_spacing,r)),w.angle=StyleParser.evalProperty(n.angle,r)||0,w.elevate_by_altitude=!!n.elevate_by_altitude,w.z=n.z?MathUtils$1.clamp(StyleParser.evalCachedDistanceProperty(n.z,r),0,32767):StyleParser.defaults.z,w.flat=n.flat,w.tile_edges=n.tile_edges,this.computeLayout(w,e,n,r,v),n.stick&&!w.flat&&(g=StyleParser.parseNumber(StyleParser.evalProperty(n.stick.height,r)),w.stick={color:this.parseColor(n.stick.color,r)||StyleParser.defaults.color,height:g?Math.max(g,0):0});var k=n.text&&!1!==StyleParser.evalProperty(n.text.visible,r)&&this.parseTextFeature(e,n.text,r,v);Array.isArray(k)&&log({level:"warn",once:!(k=null)},"Layer '".concat(n.layers[n.layers.length-1],"': ")+"cannot use boundary labels (e.g. 'text_source: { left: ..., right: ... }') for 'text' labels attached to 'points'; "+"provided 'text_source' value was ".concat(JSON.stringify(n.text.text_source))),k&&(k.layout.parent=w,k.layout.priority=n.text.priority?Math.max(k.layout.priority,w.priority+.5):w.priority+.5,k.layout.move_into_tile=!1,Collision.addStyle(this.collision_group_text,v.id)),this.queueFeature({feature:e,draw:n,context:r,style:w,text_feature:k},v),Collision.addStyle(this.collision_group_points,v.id)}},hasSprites:function(e){return e.texture&&this.textureManager.textures[e.texture]&&this.textureManager.textures[e.texture].sprites},getSpriteInfo:function(e,n){var r=this.textureManager.textures[e.texture].sprites[n]&&this.textureManager.getSpriteInfo(e.texture,n);return n&&!r?(this.texture_missing_sprites[e.texture]=this.texture_missing_sprites[e.texture]||{},this.texture_missing_sprites[e.texture][n]||(log("debug","Style: in style '".concat(this.name,"', could not find sprite '").concat(n,"' for texture '").concat(e.texture,"'")),this.texture_missing_sprites[e.texture][n]=!0)):r&&(r.sprite=n),r},parseSprite:function(e,n,r){var d=StyleParser.evalProperty(n.sprite,r);return this.getSpriteInfo(e,d)||this.getSpriteInfo(e,n.sprite_default)},queueFeature:function(e,n){this.tile_data[n.id]&&this.queues[n.id]||this.startData(n),this.queues[n.id]=this.queues[n.id]||[],this.queues[n.id].push(e)},endData:function(e){var n=this;if(e.canceled)return log("trace","Style ".concat(this.name,": stop tile build because tile was canceled: ").concat(e.key)),Promise.resolve();var r=this.queues[e.id];delete this.queues[e.id];var d=[],m=[];return r.forEach(function(g){for(var v=g.style,w=g.feature,j=n.buildLabels(v.size,w.geometry,v),G=0;G<j.length;G++){var q,_t=j[G],_r={feature:w,draw:g.draw,context:g.context,style:v,label:_t};m.push(_r),g.text_feature&&(d.push(q={feature:w,draw:g.text_feature.draw,context:g.context,text:g.text_feature.text,text_settings_key:g.text_feature.text_settings_key,layout:g.text_feature.layout,point_label:_t,linked:_r}),g.draw.text.optional||(_r.linked=q))}}),Promise.all([Collision.collide(m,this.collision_group_points,e.id).then(function(g){g.forEach(function(v){n.feature_style=v.style,n.feature_style.label=v.label,n.feature_style.linked=v.linked,Style.addFeature.call(n,v.feature,v.draw,v.context)})}),this.collideAndRenderTextLabels(e,this.collision_group_text,d)]).then(function(g){var v=_slicedToArray(g,2)[1],w=v.labels,k=v.texts;return w&&k&&w.forEach(function(j){var G=j.text_settings_key,q=k[G]&&k[G][j.text],_t=n.feature_style;_t.label=j.label,_t.linked=j.linked,_t.size=q.size.logical_size,_t.angle=0,j.label.text_data={text_info:q,text_settings_key:G,text:j.text},_t.label_texture=n.textureManager.default,Style.addFeature.call(n,j.feature,j.draw,j.context)}),n.freeText(e),Style.endData.call(n,e)})},_preprocess:function(e){e.color=StyleParser.createColorPropertyCache(e.color),e.texture=void 0!==e.texture?e.texture:this.texture,e.outline&&(e.outline.color=StyleParser.createColorPropertyCache(e.outline.color),e.outline.width=StyleParser.createPropertyCache(e.outline.width,StyleParser.parsePositiveNumber)),e.z=StyleParser.createPropertyCache(e.z,StyleParser.parseUnits);try{e.size=StyleParser.createPointSizePropertyCache(e.size)}catch(n){return log({level:"warn",once:!0},"Layer '".concat(e.layers[e.layers.length-1],"': ")+"".concat(n," (").concat(JSON.stringify(e.size),"), skipping features in layer")),null}return e.offset=StyleParser.createPropertyCache(e.offset,function(n){return Array.isArray(n)&&n.map(StyleParser.parseNumber)}),e.buffer=StyleParser.createPropertyCache(e.buffer,function(n){return(Array.isArray(n)?n:[n,n]).map(StyleParser.parsePositiveNumber)}),e.repeat_distance=StyleParser.createPropertyCache(e.repeat_distance,StyleParser.parseNumber),null==e.repeat_group&&(e.repeat_group=e.layers.join("-")),e.placement=PLACEMENT$1[e.placement&&e.placement.toUpperCase()],null==e.placement&&(e.placement=PLACEMENT$1.VERTEX),e.placement_spacing=null!=e.placement_spacing?e.placement_spacing:80,e.placement_spacing=StyleParser.createPropertyCache(e.placement_spacing,StyleParser.parsePositiveNumber),e.placement_min_length_ratio=null!=e.placement_min_length_ratio?e.placement_min_length_ratio:1,e.placement_min_length_ratio=StyleParser.createPropertyCache(e.placement_min_length_ratio,StyleParser.parsePositiveNumber),e.angle="number"==typeof e.angle?e.angle*Math.PI/180:e.angle||0,e.text=this.preprocessText(e.text),e.text&&(e.text.variantKey=e.variantKey,e.text.group=e.group,e.text.layers=e.layers,e.text.order=e.order,e.text.repeat_group=e.text.repeat_group||e.repeat_group,e.text.anchor=e.text.anchor||this.default_anchor,e.text.optional="boolean"==typeof e.text.optional&&e.text.optional,e.text.interactive=e.text.interactive||e.interactive),e.stick&&(e.stick.color=StyleParser.createColorPropertyCache(e.stick.color)),e},default_anchor:["bottom","top","right","left"],computeLayout:function(e,n,r,d,m){var g=e||{};g.id=n,g.units_per_pixel=m.units_per_pixel||1,g.collide=!1!==r.collide,g.anchor=r.anchor,g.offset=StyleParser.evalCachedProperty(r.offset,d)||StyleParser.zeroPair,g.buffer=StyleParser.evalCachedProperty(r.buffer,d)||StyleParser.zeroPair,g.repeat_distance=StyleParser.evalCachedProperty(r.repeat_distance,d),g.repeat_distance&&(g.repeat_distance*=g.units_per_pixel,g.repeat_scale=1,g.repeat_group="function"==typeof r.repeat_group?r.repeat_group(d):r.repeat_group);var v=r.priority;return null!=v?"function"==typeof v&&(v=v(d)):v=4294967295,g.priority=v,g},buildTextLabels:function(e,n){for(var r=[],d=0;d<n.length;d++){var m=n[d];m.label=new LabelPoint(m.point_label.position,this.texts[e.id][m.text_settings_key][m.text].size.collision_size,m.point_label.isFlat(),m.layout),r.push(m)}return r},buildLabels:function(e,n,r){var d=!!r.flat,m=[];if("Point"===n.type)m.push(new LabelPoint(n.coordinates,e,d,r));else if("MultiPoint"===n.type)for(var g=n.coordinates,v=0;v<g.length;++v)m.push(new LabelPoint(g[v],e,d,r));else if("LineString"===n.type)for(var k=placePointsOnLine(n.coordinates,e,d,r),j=0;j<k.length;++j)m.push(k[j]);else if("MultiLineString"===n.type)for(var G=n.coordinates,q=0;q<G.length;q++)for(var _t=placePointsOnLine(G[q],e,d,r),_r=0;_r<_t.length;++_r)m.push(_t[_r]);else if("Polygon"===n.type)if(r.placement===PLACEMENT$1.CENTROID){var _s=Geo$1.centroid(n.coordinates);m.push(new LabelPoint(_s,e,d,r))}else for(var ga=n.coordinates,_c=0;_c<ga.length;_c++)for(var _u=placePointsOnLine(ga[_c],e,d,r),_f=0;_f<_u.length;++_f)m.push(_u[_f]);else if("MultiPolygon"===n.type)if(r.placement===PLACEMENT$1.CENTROID){var _h=Geo$1.multiCentroid(n.coordinates);m.push(new LabelPoint(_h,e,d,r))}else for(var ad=n.coordinates,ey=0;ey<ad.length;ey++)for(var sy=ad[ey],ly=0;ly<sy.length;ly++)for(var dy=placePointsOnLine(sy[ly],e,d,r),vy=0;vy<dy.length;++vy)m.push(dy[vy]);return m},makeVertexTemplate:function(e,n){var d=e.color||StyleParser.defaults.color,m=n.vertex_data.vertex_layout;return this.fillVertexTemplate(m,"a_position",0,{size:2}),this.fillVertexTemplate(m,"a_position",e.z||0,{size:1,offset:2}),this.fillVertexTemplate(m,"a_position",this.scaleOrder(e.order),{size:1,offset:3}),this.fillVertexTemplate(m,"a_shape",0,{size:4}),this.fillVertexTemplate(m,"a_shape",e.label.layout.collide?0:1,{size:1,offset:3}),this.fillVertexTemplate(m,"a_texcoord",0,{size:2}),this.fillVertexTemplate(m,"a_offset",0,{size:2}),this.fillVertexTemplate(m,"a_color",Vector$1.mult(d,255),{size:4}),this.defines.TANGRAM_HAS_SHADER_POINTS&&n.variant.shader_point&&(this.fillVertexTemplate(m,"a_outline_color",Vector$1.mult(e.outline_color||StyleParser.defaults.outline.color,255),{size:4}),this.fillVertexTemplate(m,"a_outline_edge",e.outline_edge_pct||StyleParser.defaults.outline.width,{size:1})),this.selection&&this.fillVertexTemplate(m,"a_selection_color",Vector$1.mult(e.selection_color,255),{size:4}),this.fillVertexTemplate(m,"a_is_flat",0,{size:1}),this.defines.TANGRAM_POINT_DRAW_STICK&&e.stick&&(this.fillVertexTemplate(m,"a_is_stick",0,{size:1}),this.fillVertexTemplate(m,"a_stick_height",e.stick.height,{size:1})),this.vertex_template},buildQuad:function(e,n,r,d,m,g,v,w,k,j,G,q,_t,_r,_s,ga,_c,_u,_f){return n[0]<=0||n[1]<=0?0:buildQuadsForPoints(e,_s,ga,{quad:n,quad_normalize:256,offset:w,offsets:k,offsets_alt:j,pre_angles:g,pre_angles_alt:v,angle:4096*r,angles:d,angles_alt:m,is_flat:_t,elevate_by_altitude:_r,build_stick_points:_c,stick_color:_c&&Vector$1.mult(_u,255),color:Vector$1.mult(_f||StyleParser.defaults.color,255),curve:q,texcoord_scale:G,texcoord_normalize,pre_angles_normalize,angles_normalize,offsets_normalize})},build:function(e,n,r){var d=e.label;return"curved"===d.type?this.buildCurvedLabel(d,e,n,r):this.buildStraightLabel(d,e,n,r)},buildStraightLabel:function(e,n,r,d){var m,g=this.makeVertexTemplate(n,r),v=e.angle||n.angle,w="point"!==e.type?(m=n.size[e.type],default_uvs):(m=n.size,n.texcoords||default_uvs);r.uniforms=r.uniforms||{},n.label_texture?(r.uniforms.u_texture=n.label_texture,r.uniforms.u_point_type=TANGRAM_POINT_TYPE_LABEL,r.uniforms.u_apply_color_blocks=!1):(n.texture?(r.uniforms.u_texture=n.texture,r.uniforms.u_point_type=TANGRAM_POINT_TYPE_TEXTURE):(r.uniforms.u_texture=this.textureManager.default,r.uniforms.u_point_type=TANGRAM_POINT_TYPE_SHADER),r.uniforms.u_apply_color_blocks=!0);var j=this.defines.TANGRAM_POINT_DRAW_STICK&&!n.label_texture&&n.stick&&0<n.stick.height,G=this.buildQuad([e.position],m,v,null,null,null,null,e.offset,null,null,w,!1,e.isFlat(),n.elevate_by_altitude,r.vertex_data,g,j,j&&n.stick.color,n.color);return this.trackLabel(e,n.linked&&n.linked.label.id,r,G,d,j),G},buildCurvedLabel:function(e,n,r,d){for(var m=this.makeVertexTemplate(n,r),g=e.angle,v=0,w=0;w<2;w++)for(var k=0;k<e.num_segments;k++){var j=n.size[e.type][k],G=default_uvs,q=this.getTileMesh(d.tile,this.getMeshVariantTypeForDraw(n));q.uniforms=q.uniforms||{},q.uniforms.u_texture=n.label_texture,q.uniforms.u_point_type=TANGRAM_POINT_TYPE_LABEL,q.uniforms.u_apply_color_blocks=!1;var _u=e.num_segments-k-1,ey=this.buildQuad([e.position],j,g,e.angles[k],e.alt_angles[_u],e.pre_angles[k],e.alt_pre_angles[_u],e.offset||[0,0],e.offsets[k],e.alt_offsets[_u],G,!0,e.isFlat(),n.elevate_by_altitude,q.vertex_data,m,!1,!1,n.color);v+=ey,this.trackLabel(e,n.linked&&n.linked.label.id,r,ey,d,!1)}return v},trackLabel:function(e,n,r,d,m,g){var v=5<arguments.length&&void 0!==g&&g;r.labels=r.labels||{},r.labels.collision=r.labels.collision||{},r.labels["non-collision"]=r.labels["non-collision"]||{};var w=e.layout.collide?r.labels.collision:r.labels["non-collision"];w[e.id]=w[e.id]||{container:{label:e.text_data?Object.assign(e.toJSON(),{text_data:e.text_data}):e.toJSON(),linked:n},ranges:[]};var k=2*d;w[e.id].ranges.push([r.vertex_data.offset-r.vertex_data.stride*k,k,v])},buildLines:function(e,n,r,d){return this.build(n,r,d)},buildPoints:function(e,n,r,d){return this.build(n,r,d)},buildPolygons:function(e,n,r,d){return this.build(n,r,d)},vertexLayoutForMeshVariant:function(e){var n;return this.vertex_layout||(n=[{name:"a_position",size:4,type:gl$1.SHORT,normalized:!1},{name:"a_shape",size:4,type:gl$1.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:gl$1.UNSIGNED_SHORT,normalized:!0},{name:"a_offset",size:2,type:gl$1.SHORT,normalized:!1},{name:"a_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_outline_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0,static:[0,0,0,0]},{name:"a_outline_edge",size:1,type:gl$1.FLOAT,normalized:!1,static:0},{name:"a_selection_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_is_flat",size:1,type:gl$1.UNSIGNED_BYTE,normalized:!0}],this.defines&&this.defines.TANGRAM_POINT_DRAW_STICK&&n.push({name:"a_is_stick",size:1,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_stick_height",size:1,type:gl$1.FLOAT,normalized:!1}),this.vertex_layout=new VertexLayout(n),(n=n.map(function(r){return Object.assign({},r)})).forEach(function(r){"a_outline_color"!==r.name&&"a_outline_edge"!==r.name||(r.static=null)}),this.vertex_layout_shader_point=new VertexLayout(n)),e.shader_point?this.vertex_layout_shader_point:this.vertex_layout},computeVariantForDraw:function(e){var n=e.label_texture||e.texture||this.default_mesh_variant.key;return{key:n,shader_point:n===this.default_mesh_variant.key,order:e.label_texture?1:0}},makeMesh:function(e,n,r){var d=2<arguments.length&&void 0!==r?r:{};return d=Object.assign({},d,{fade_in_time:this.fade_in_time}),Style.makeMesh.call(this,e,n,d)}});var STOPS=[0,.33,.66,.99],LINE_EXCEED_STRAIGHT=1.5,LINE_EXCEED_STRAIGHT_NO_CURVE=1.8,LINE_EXCEED_STAIGHT_LOOSE=2.3,STRAIGHT_ANGLE_TOLERANCE=.1,CURVE_MIN_TOTAL_COST=1.3,CURVE_MIN_AVG_COST=.4,CURVE_MAX_ANGLE=1,ORIENTED_LABEL_OFFSET_FACTOR=1.2,VERTICAL_ANGLE_TOLERANCE=.01,LabelLine={create:function(e,n,r,d,m){for(var g=[{type:"straight",tolerance:m.no_curving?LINE_EXCEED_STRAIGHT_NO_CURVE:LINE_EXCEED_STRAIGHT},{type:"curved"},{type:"straight",tolerance:LINE_EXCEED_STAIGHT_LOOSE}],v=0;v<g.length;v++){var w=g[v],k=void 0;if("straight"===w.type?k=new LabelLineStraight(n,r,d,m,w.tolerance):"curved"===w.type&&!m.no_curving&&2<r.length&&(k=new LabelLineCurved(e,r,d,m)),k&&!k.throw_away)return k}return!1}},LabelLineBase=function(){function e(n,r){_classCallCheck(this,e),this.id=Label.nextLabelId(),this.layout=r,this.position=[],this.angle=0,this.offset=r.offset.slice(),this.unit_scale=this.layout.units_per_pixel,this.type="",this.throw_away=!1,this._is_flat=n,this._circles=void 0,this.placed=null}return _createClass(e,[{key:"toJSON",value:function(){return{id:this.id,type:this.type,is_flat:this._is_flat,position:this.position,size:this.size,offset:this.offset,angle:this.angle,breach:this.breach,layout:textLayoutToJSON(this.layout),circles:this.getBoundingCircles()}}},{key:"inTileBounds",value:function(){var n=this.getAABB(),m=n.right,g=n.bottom;return Utils$1.pointInTile([n.left,n.top])&&Utils$1.pointInTile([m,g])}},{key:"getAABBForSegment",value:function(n,r,d,m){var g,v=this.unit_scale,w=r/2,k=d/2,j=_slicedToArray(n,2),G=j[0],q=j[1];0===this.offset[0]&&0===this.offset[1]||(G+=(g=Vector$1.rot(this.offset,this.angle))[0]*v,q-=g[1]*v);var _t=[[Math.cos(m),-Math.sin(m)],[Math.sin(m),Math.cos(m)]],_r=Vector$1.multMatrix(_t,[-w,-k]),_s=Vector$1.multMatrix(_t,[w,-k]),ga=Vector$1.multMatrix(_t,[w,k]),_c=Vector$1.multMatrix(_t,[-w,k]);return{left:G+Math.min(_r[0],_s[0],ga[0],_c[0]),top:q+Math.max(_r[1],_s[1],ga[1],_c[1]),right:G+Math.max(_r[0],_s[0],ga[0],_c[0]),bottom:q+Math.min(_r[1],_s[1],ga[1],_c[1])}}},{key:"isFlat",value:function(){return this._is_flat}},{key:"getBoundingCircles",value:function(){}},{key:"getAABB",value:function(){}}],[{key:"splitLineByOrientation",value:function(n){for(var r=[n[0]],d=0,m=0,g=0,v=r,w=!1,k=1;k<n.length;k++){var j=n[k],G=n[k-1],q=Vector$1.length(Vector$1.sub(j,G));j[0]>G[0]?1===g?(r.push(j),m<(d+=q)&&(v=r,m=d,w=!1)):(r=[G,j],m<(d=q)&&(v=r,m=d,w=!1),g=1):j[0]<G[0]?-1===g?(r.unshift(j),m<(d+=q)&&(v=r,m=d,w=!0)):(r=[j,G],m<(d=q)&&(v=r,m=d,w=!0),g=-1):(-1===g?r.unshift(j):(r.push(j),g=1),m<(d+=q)&&(v=r,m=d,w=-1===g))}return[v,w]}}]),e}(),LabelLineStraight=function(){_inherits(n,LabelLineBase);var e=_createSuper(n);function n(r,d,m,g,v){var w;return _classCallCheck(this,n),(w=e.call(this,m,g)).type="straight",w.size=r,w.throw_away=!w.fit(r,d,g,v),w}return _createClass(n,[{key:"fit",value:function(r,d,m,g){var v,w=this.unit_scale,k=_slicedToArray(LabelLineBase.splitLineByOrientation(d),2);d=k[0],v=k[1],"number"==typeof m.orientation&&(this.offset[1]+=ORIENTED_LABEL_OFFSET_FACTOR*(r[1]-m.vertical_buffer),v&&(this.offset[1]*=-1),-1===m.orientation&&(this.offset[1]*=-1));for(var j=getLineLengths(d),G=r[0]*w,q=0;q<d.length-1;q++)for(var _t=d[q],_r=0,_s=0,ga=q+1,_c=void 0;ga<d.length;){var _f=d[ga],_h=getAngleForSegment(d[ga-1],_f);if(ga!==q+1&&(_r+=getAbsAngleDiff(_h,_c)),Math.abs(_r)>STRAIGHT_ANGLE_TOLERANCE)break;if(calcFitness(_s+=j[ga-1],G)<g){var ad=Vector$1.mult(Vector$1.add(_t,_f),.5);return this.angle=-_h,Math.abs(this.angle-Math.PI/2)<VERTICAL_ANGLE_TOLERANCE&&(this.angle=-Math.PI/2,"number"==typeof m.orientation&&(this.offset[1]*=-1)),this.position=ad,this.breach=!this.inTileBounds(),!0}_c=_h,ga++}return!1}},{key:"getBoundingCircles",value:function(){var r,d,m,g,v,w,k,j,G,q,_t,_r,_s;return this._circles||(v=-(m=(d=this.size[0]/2*(r=this.unit_scale))*Math.cos(this.angle)),w=-(g=d*Math.sin(this.angle)),k=this.offset[0]*r,j=this.offset[1]*r,q=(G=_slicedToArray(this.position,2))[0],_t=G[1],_t*=-1,k&&(Vector$1.normalize(_r=[m,g]),_r[0]*=k,_r[1]*=k,q+=_r[0],_t+=_r[1]),j&&(Vector$1.normalize(_s=[g,-m]),_s[0]*=j,_s[1]*=j,q-=_s[0],_t-=_s[1]),this._circles=encircleLine(m+=q,g+=_t,v+=q,w+=_t,this.size[1]/2*r)),this._circles}},{key:"getAABB",value:function(){var r,d,m;return this._aabb||(this._aabb=this.getAABBForSegment(this.position,((d=this.size)[0]+2*(m=this.layout.buffer)[0])*(r=this.unit_scale),(d[1]+2*m[1])*r,this.angle)),this._aabb}}]),n}(),LabelLineCurved=function(){_inherits(n,LabelLineBase);var e=_createSuper(n);function n(r,d,m,g){var v;return _classCallCheck(this,n),(v=e.call(this,m,g)).type="curved",v.positions=[],v.angles=[],v._aabbs=[],v.pre_angles=[],v.offsets=[],v.num_segments=r.length,v.sizes=r,v.alt_angles=[],v.alt_pre_angles=[],v.alt_offsets=[],v.throw_away=!v.fit(v.sizes,d,g),v}return _createClass(n,[{key:"toJSON",value:function(){return{id:this.id,type:this.type,is_flat:this._is_flat,position:this.position,breach:this.breach,layout:textLayoutToJSON(this.layout),circles:this.getBoundingCircles()}}},{key:"fit",value:function(r,d,m){var g,v=this.unit_scale,w=Math.max.apply(Math,_toConsumableArray(r.map(function(N_){return N_[1]}))),k=w*v,j=_slicedToArray(LabelLineBase.splitLineByOrientation(d),2);d=j[0],g=j[1],"number"==typeof m.orientation&&(this.offset[1]+=ORIENTED_LABEL_OFFSET_FACTOR*(w-m.vertical_buffer),g&&(this.offset[1]*=-1),-1===m.orientation&&(this.offset[1]*=-1));var G=getLineLengths(d),q=r.map(function(N_){return N_[0]*v}),_t=G.reduce(function(N_,o0){return N_+o0},0),_r=q.reduce(function(N_,o0){return N_+o0},0);if(_t<_r)return!1;var _s=d.length-1;if(_s<2)return!1;var ga=n.curvaturePlacement(d,_t,G,_r,0,_s);if(-1===ga||_s-ga<2)return!1;this.position=d[ga];for(var _u=0;_u<q.length;_u++){this.positions[_u]=[],this.offsets[_u]=[],this.angles[_u]=[],this.pre_angles[_u]=[];for(var _f=0;_f<STOPS.length;_f++){var _h=STOPS[_f],ad=_slicedToArray(n.scaleLine(_h,d),2),ly=n.placeAtIndex(ga,ad[0],ad[1],q),dy=ly.positions,Ay=ly.angles,Sy=ly.pre_angles,jy=ly.offsets.map(function(o0){return Math.sqrt(o0[0]*o0[0]+o0[1]*o0[1])/v});if(0===_h){this.angle=1/Ay.length*Ay.reduce(function(o0,c_){return o0+c_});for(var Qy=0;Qy<dy.length;Qy++)this._aabbs.push(this.getAABBForSegment(dy[Qy],q[Qy],k,Sy[Qy]+Ay[Qy]))}this.positions[_u].push(dy[_u]),this.offsets[_u].push(jy[_u]),this.angles[_u].push(Ay[_u]),this.pre_angles[_u].push(Sy[_u])}}q=r.slice().reverse().map(function(o0){return o0[0]*v});for(var p_=0;p_<q.length;p_++){this.alt_offsets[p_]=[],this.alt_angles[p_]=[],this.alt_pre_angles[p_]=[];for(var qy=0;qy<STOPS.length;qy++){var I_=STOPS[qy],S0=_slicedToArray(n.scaleLine(I_,d),2),c1=S0[0],G_=n.placeAtIndex(ga,c1,S0[1],q),b0=G_.angles,k1=G_.pre_angles,X_=G_.offsets.map(function(o0){return Math.sqrt(o0[0]*o0[0]+o0[1]*o0[1])/v});0===I_&&(this.alt_angle=1/b0.length*b0.reduce(function(o0,c_){return o0+c_})),this.alt_offsets[p_].push(X_[p_]),this.alt_angles[p_].push(b0[p_]),this.alt_pre_angles[p_].push(k1[p_])}}return!0}},{key:"getBoundingCircles",value:function(){if(!this._circles){for(var r=[],d=this.unit_scale,m=0;m<this.positions.length;m++){var g=this.sizes[m],v=this.angles[m][0],w=this.positions[m][0],k=g[0]/2*d,j=k*Math.cos(v),G=k*Math.sin(v),q=-j,_t=-G,_r=_slicedToArray(w,2),_s=_r[0],ga=_r[1],_c=encircleLine(j+=_s,G+=ga*=-1,q+=_s,_t+=ga,g[1]/2*d);Array.prototype.push.apply(r,_c)}this._circles=r}return this._circles}},{key:"getAABB",value:function(){if(!this._aabb){for(var m=1/0,g=-1/0,v=-1/0,w=1/0,r=0;r<this._aabbs.length;r++){var d=this._aabbs[r];m=Math.min(m,d.left),g=Math.max(g,d.top),v=Math.max(v,d.right),w=Math.min(w,d.bottom)}this._aabb={left:m,top:g,right:v,bottom:w}}return this._aabb}}],[{key:"curvaturePlacement",value:function(r,d,m,g,v,w){w=w||r.length-1;for(var k=[],j=(v=v||0)+1;j<w;j++){var q=r[j],_t=r[j+1],_r=Vector$1.perp(q,r[j-1]),_s=Vector$1.perp(_t,q),ga=Vector$1.angleBetween(_r,_s);CURVE_MAX_ANGLE<ga&&(ga=1/0),k.push(ga)}k.push(1/0);for(var _c=[],_u=[],_f=v,_h=0,ad=0;ad<v;ad++)_h+=m[ad];for(;_h+g<d;){for(var ey=_h+g,sy=_h,ly=_f,dy=0;ly<w&&sy+m[ly]<ey&&(dy+=k[ly])!==1/0;)sy+=m[ly],ly++;if(0===dy)return _f;var vy=dy/(ly-_f);_c.push(dy),_u.push(vy),_h+=m[_f],_f++}if(0===_c.length)return-1;var Ay=Math.min.apply(null,_c),Sy=_u[_c.indexOf(Ay)];return Ay<CURVE_MIN_TOTAL_COST&&Sy<CURVE_MIN_AVG_COST?_c.indexOf(Ay):-1}},{key:"scaleLine",value:function(r,d){var m=[d[0]],g=[];return d.forEach(function(v,w){var k,j;w!==d.length-1&&(k=Vector$1.sub(d[w+1],d[w]),j=Vector$1.mult(k,1+r),m.push(Vector$1.add(m[w],j)),g.push(Vector$1.length(j)))}),[m,g]}},{key:"placeAtIndex",value:function(r,d,m,g){var v=d[r],w=_slicedToArray(n.getIndicesAndOffsets(r,m,g),2),k=w[0],G=n.getPositionsFromIndicesAndOffsets(d,k,w[1]),q=_slicedToArray(n.getAnglesFromIndicesAndOffsets(v,k,d,G),3);return{positions:G,offsets:q[0],angles:q[1],pre_angles:q[2]}}},{key:"getIndicesAndOffsets",value:function(r,d,m){for(var g=m.length,v=[],w=[],k=0,j=0,G=0;k<g;){for(var q=m[k];k<g&&j+.5*q<=G+d[r];)w.push(j-G+.5*q),v.push(r),j+=q,q=m[++k];G+=d[r],r++}return[v,w]}},{key:"getPositionsFromIndicesAndOffsets",value:function(r,d,m){for(var g=[],v=0;v<d.length;v++){var w=d[v],k=m[v],j=getAngleForSegment(r[w],r[w+1]),G=Vector$1.rot([k,0],j),q=Vector$1.add(r[w],G);g.push(q)}return g}},{key:"getAnglesFromIndicesAndOffsets",value:function(r,d,m,g){for(var v=[],w=[],k=[],j=0;j<g.length;j++){var G,q,_r=d[j],_s=Vector$1.sub(g[j],r),ga=-Vector$1.angle(_s),_c=getTextAngleForSegment(m[_r],m[_r+1])-ga;0<j&&(G=v[j-1],q=w[j-1],Math.abs(ga-G)>Math.PI&&(ga+=G<ga?-2*Math.PI:2*Math.PI),Math.abs(q-_c)>Math.PI&&(_c+=q<_c?-2*Math.PI:2*Math.PI)),v.push(ga),w.push(_c),k.push(_s)}return[k,v,w]}}]),n}();function calcFitness(e,n){return n/e}function getAngleForSegment(e,n){var r=Vector$1.sub(n,e);return Vector$1.angle(r)}function getTextAngleForSegment(e,n){return-getAngleForSegment(e,n)}function getLineLengths(e){for(var n=[],r=0;r<e.length-1;r++){var d=e[r],m=e[r+1],g=Math.hypot(d[0]-m[0],d[1]-m[1]);n.push(g)}return n}function getAbsAngleDiff(e,n){for(var r,d=n<e?(r=n,e):(r=e,n);d-r>Math.PI;)r+=2*Math.PI;return Math.abs(d-r)}var TextStyle=Object.create(Points);Object.assign(TextStyle,{name:"text",super:Points,built_in:!0,init:function(e){Style.init.call(this,0<arguments.length&&void 0!==e?e:{}),this.setupDefines(),this.defines.TANGRAM_HAS_SHADER_POINTS=!1,this.defines.TANGRAM_IS_TEXT_STYLE=!0,this.reset()},makeVertexTemplate:function(e,n){this.super.makeVertexTemplate.apply(this,arguments);var r=n.vertex_data.vertex_layout;return this.fillVertexTemplate(r,"a_pre_angles",0,{size:4}),this.fillVertexTemplate(r,"a_offsets",0,{size:4}),this.fillVertexTemplate(r,"a_angles",0,{size:4}),this.fillVertexTemplate(r,"a_offsets_alt",0,{size:4}),this.fillVertexTemplate(r,"a_pre_angles_alt",0,{size:4}),this.fillVertexTemplate(r,"a_angles_alt",0,{size:4}),this.vertex_template},reset:function(){this.queues={},this.resetText()},addFeature:function(e,n,r){var d=this,m=r.tile,g=e.geometry.type;n.can_articulate="LineString"===g||"MultiLineString"===g,n.supersample_text="LineString"===g||"MultiLineString"===g;var v=this.parseTextFeature(e,n,r,m);v&&(v instanceof Array?v.forEach(function(w){w.feature=e,w.context=r,w.layout.vertex=!1,d.queueFeature(w,m)}):(v.feature=e,v.context=r,v.layout.vertex=!1,this.queueFeature(v,m)),Collision.addStyle(this.name,m.id))},endData:function(e){var n=this,r=this.queues[e.id];return delete this.queues[e.id],this.collideAndRenderTextLabels(e,this.name,r).then(function(d){var m=d.labels,g=d.texts;return m&&g&&(n.texts[e.id]=g,m.forEach(function(v){var w=v.text_settings_key,k=n.texts[e.id][w]&&n.texts[e.id][w][v.text],j=n.feature_style;j.label=v.label,v.label.text_data={text_info:k,text_settings_key:w,text:v.text},j.label_texture=n.textureManager.default,k.text_settings.can_articulate?(j.size={},"straight"===v.label.type?j.size.straight=k.size.logical_size:j.size.curved=k.segment_sizes.map(function(G){return G.logical_size})):j.size=k.size.logical_size,Style.addFeature.call(n,v.feature,v.draw,v.context)})),n.freeText(e),Style.endData.call(n,e).then(function(v){if(v){for(var w in v.meshes)v.meshes[w].uniforms.u_apply_color_blocks=!0;e.mesh_data[n.name]=v}return v})})},_preprocess:function(e){return this.preprocessText(e)},buildTextLabels:function(e,n){for(var r=[],d=0;d<n.length;d++){var m,w,g=n[d],v=this.texts[e.id][g.text_settings_key][g.text];g.layout.vertical_buffer=v.vertical_buffer,w=v.text_settings.can_articulate?(m=v.segment_sizes.map(function(G){return G.collision_size}),g.layout.no_curving=v.no_curving,this.buildLabels(m,g.feature.geometry,g.layout,v.size.collision_size)):this.buildLabels(v.size.collision_size,g.feature.geometry,g.layout);for(var k=0;k<w.length;k++){var j=Object.create(g);j.label=w[k],r.push(j)}}return r},buildLabels:function(e,n,r,d){var m,g,v="Point"!==n.type,w=[];if("LineString"===n.type)Array.prototype.push.apply(w,this.buildLineLabels(n.coordinates,e,v,r,d));else if("MultiLineString"===n.type)for(var k=n.coordinates,j=0;j<k.length;++j)Array.prototype.push.apply(w,this.buildLineLabels(k[j],e,v,r,d));else if("Point"===n.type)w.push(new LabelPoint(n.coordinates,e,v,r));else if("MultiPoint"===n.type)for(var G=n.coordinates,q=0;q<G.length;++q)w.push(new LabelPoint(G[q],e,v,r));else"Polygon"===n.type?(m=Geo$1.centroid(n.coordinates),w.push(new LabelPoint(m,e,v,r))):"MultiPolygon"===n.type&&(g=Geo$1.multiCentroid(n.coordinates),w.push(new LabelPoint(g,e,v,r)));return w},buildLineLabels:function(e,n,r,d,m){var g,v=[],w=Math.min(d.subdiv,e.length-1);if(1<w)for(var k=(e.length-1)/w,j=0;j<w;j++){var G=Math.floor(j*k),q=Math.floor((j+1)*k)+1,_t=e.slice(G,q),_r=LabelLine.create(n,m,_t,r,d);_r&&v.push(_r)}return v.length<w&&(g=LabelLine.create(n,m,e,r,d))&&v.push(g),v},vertexLayoutForMeshVariant:function(){return this.vertex_layout||(this.vertex_layout=new VertexLayout([{name:"a_position",size:4,type:gl$1.SHORT,normalized:!1},{name:"a_shape",size:4,type:gl$1.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:gl$1.UNSIGNED_SHORT,normalized:!0},{name:"a_offset",size:2,type:gl$1.SHORT,normalized:!1},{name:"a_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_angles",size:4,type:gl$1.SHORT,normalized:!1},{name:"a_offsets",size:4,type:gl$1.UNSIGNED_SHORT,normalized:!1},{name:"a_pre_angles",size:4,type:gl$1.BYTE,normalized:!1},{name:"a_selection_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_is_flat",size:1,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_offsets_alt",size:4,type:gl$1.UNSIGNED_SHORT,normalized:!1},{name:"a_pre_angles_alt",size:4,type:gl$1.BYTE,normalized:!1},{name:"a_angles_alt",size:4,type:gl$1.SHORT,normalized:!1}])),this.vertex_layout},getMeshVariantTypeForDraw:Points.getMeshVariantTypeForDraw}),TextStyle.texture_id=0;var RasterStyle=Object.create(Polygons);Object.assign(RasterStyle,{name:"raster",super:Polygons,built_in:!0,init:function(){this.raster=this.raster||"color",this.super.init.apply(this,arguments),this.selection=!1,this.defines.SNAP_TO_PIXEL_GRID=!0},_preprocess:function(e){return e.color=e.color||StyleParser.defaults.color,this.super._preprocess.apply(this,arguments)}});var CustomIcons=Object.create(Points);Object.assign(CustomIcons,{name:"custom_icons",collision:!1,init:function(e){Points.init.call(this,0<arguments.length&&void 0!==e?e:{})},loadTexture:function(e,n,r){var d,m=e.width,g=e.height,v=e.items,w=document.createElement("canvas"),k=Utils$1.device_pixel_ratio,j=this.sources[n],G={sprites:{}};if(w.width=m*k,w.height=g*k,j){var q,_t=v.length,_r=w.getContext("2d");for(_r.scale(k,k);q=v[--_t];){var _s,ga=j.getIconBitmapByObjectId(q.meta.objectId,q.meta.id);ga&&((_s=isTainting(ga))?log("error",_s):(_r.drawImage(ga,q.x,q.y,q.width,q.height),G.sprites[q.meta.id]=[q.x,q.y,q.width,q.height]))}}return G.element=w,(d=this.textureManager.create(this.gl,r,G)).retain(),d.loading.then(function(_c){return _c.name})},buildRasterTextures:function(e,n){return WorkerBroker.postMessage(this.main_thread_target+".loadTexture",e.rasters,e.source,e.texture_name).then(function(r){return n.textures.push(r),n})},addFeature:function(e,n,r){var d=r.tile.rasters,m={};d.items.forEach(function(w){m[w.meta.id]=[w.x,w.y,w.width,w.height]});var g="".concat(r.tile.source,"_dyn_").concat(r.tile.coords.key,"_").concat(this.generation,"_").concat(r.tile.id);n.texture=r.tile.texture_name=g;var v=Object.assign({},DEFAULT_TEXTURE_INFO,{name:g,width:d.width,height:d.height,sprites:m,manager:this.textureManager});Texture.prototype.calculateSprites.apply(v),this.textureManager.textures[g]=v,Points.addFeature.apply(this,arguments),delete this.textureManager.textures[g]}});var DEFAULT_TEXTURE_INFO={filtering:"linear",density:1,valid:!0,power_of_2:!1,texcoords:{},sizes:{},css_sizes:{},aspects:{}},OverlayStyle=Object.create(Polygons);Object.assign(OverlayStyle,{name:"overlays",super:Polygons,init:function(e){this.selection=(0<arguments.length&&void 0!==e?e:{}).selection||!0,this.raster=this.raster||"color",this.super.init.apply(this,arguments)},setupRasters:function(){if(!Thread.is_main)return!1;if(this.super.setupRasters.call(this))return!0;var e=!1;for(var n in this.sources)if(this.sources[n]instanceof ObjectSource){e=!0;break}return!!e&&(this.defines.TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING=!0,this.replaceShaderBlock("raster",shaderSrc_rasters,"Raster"),!0)},loadTextures:function(e,n){var r,d,m,g=this.sources[n],v=e.name;if(e.overlays_config.forEach(function(j){var G,q=j.texcoords,_r=g.getMapObjectById(j.id),_s=_r.getBitmap();_s&&((G=isTainting(_s=bitmapToCanvas(_s,_s.width,_s.height)))?log("error",G):(r||((r=document.createElement("canvas")).width=e.width,r.height=e.height,d=r.getContext("2d")),d.save(),d.globalAlpha=_r.getOpacity(),q.forEach(function(ga){return d.drawImage(_s,ga[0],ga[1],ga[2],ga[3])}),d.restore(),m=!0))}),m){e.element=r;var w={};return w[v]=e,this.super.loadTextures.call(this,w)}var k=this.textureManager.textures[this.textureManager.default];return Promise.resolve([{name:k.name,width:k.width,height:k.height,loaded:k.loaded}])},buildRasterTextures:function(e,n){var r=this.sources[e.source].tileTexture(e);return r?WorkerBroker.postMessage(this.main_thread_target+".loadTextures",r,e.source).then(function(d){if(!d||d.length<1)return n;if(d.some(function(g){return!g.loaded}))return null;var m=d[0].name;return n.uniforms=n.uniforms||{},n.textures=n.textures||[],n.uniforms.u_raster=m,n.uniforms.u_raster_offset=[0,0,1],n.textures.push(m),n}):Promise.resolve(n)}});var shaderSrc_Vertex="uniform float u_horizon;uniform float u_tilt;uniform float u_zoom;attribute vec2 a_position;attribute float a_is_sky;attribute float a_is_top;attribute vec4 a_color;varying vec4 v_color;const float SIN_THRESHOLD_ANGLE=0.96126069082;void main(){v_color=a_color;float sin_tilt=sin(u_tilt);float sky_bottom_alpha=1.-max(sin_tilt-SIN_THRESHOLD_ANGLE,0.)*3.;if((a_position.y==1.&&a_is_sky==0.)||(a_position.y==0.&&a_is_sky==1.)){v_color.w=sky_bottom_alpha;}float fog_height=max((22.-u_zoom)*0.04,0.)*(sin_tilt-.7);float position_z=u_zoom<17. ? .942 : .9418;gl_Position=vec4(a_position.x,a_is_sky*(a_position.y+a_is_top)+1.0-u_horizon-(1.0-a_is_sky)*(1.0-a_position.y)*fog_height,position_z,1.0);}",shaderSrc_Fragment="varying vec4 v_color;void main(void){gl_FragColor=v_color;}",STYLE_NAME="skybox",SkyBox=Object.create(Style),positions=[-1,0,1,0,-1,1,-1,1,1,0,1,1,-1,0,1,0,-1,1,-1,1,1,0,1,1];Object.assign(SkyBox,{name:STYLE_NAME,built_in:!0,vertex_shader_src:shaderSrc_Vertex,fragment_shader_src:shaderSrc_Fragment,selection:!1,blend:"inlay",blend_order:1,init:function(){Style.init.apply(this,arguments),this.selection=!1},_preprocess:function(e){return e.color={top:StyleParser.createColorPropertyCache(e.color.zenith),bottom:StyleParser.createColorPropertyCache(e.color.horizon),fog:StyleParser.createColorPropertyCache(e.color.fog)},e},vertexLayoutForMeshVariant:function(){return this.vertex_layout||(this.vertex_layout=new VertexLayout([{name:"a_position",size:2,type:gl$1.FLOAT,normalized:!1},{name:"a_is_sky",size:1,type:gl$1.FLOAT,normalized:!0},{name:"a_color",size:4,type:gl$1.UNSIGNED_BYTE,normalized:!0},{name:"a_is_top",size:1,type:gl$1.FLOAT,normalized:!0}])),this.vertex_layout},makeVertexTemplate:function(){var e=0;return this.vertex_template[e++]=0,this.vertex_template[1]=0,this.vertex_template},parseFeature:function(e,n,r){var d=this.feature_style;return n.color&&n.color.top&&n.color.bottom&&(d.color_top=this.parseColor(n.color.top,r),d.color_bottom=this.parseColor(n.color.bottom,r),d.color_fog=this.parseColor(n.color.fog||"white",r),Array.isArray(d.color_fog)&&(d.color_fog=d.color_fog.slice(),d.color_fog[3]=0)),d},buildGeometry:function(e,n,r){for(var d=this.makeVertexTemplate(n),m=r.vertex_data,g=r.vertex_data.vertex_layout,v=m.vertex_layout.index.a_position,w={top:n.color_top,bottom:n.color_bottom},k={top:n.color_bottom,bottom:n.color_fog},j=0,G=positions.length-1;j<G;j+=2){d[v+0]=positions[j],d[v+1]=positions[j+1];var q=j<12,_t=0<positions[j+1],_r=q?w:k;this.fillVertexTemplate(g,"a_is_sky",q?1:0,{size:1}),this.fillVertexTemplate(g,"a_is_top",_t?1:0,{size:1}),this.fillVertexTemplate(g,"a_color",Vector$1.mult(_t?_r.top:_r.bottom,255),{size:4}),m.addVertex(d)}return 4}});var shaderSrc_accessors="#ifdef TANGRAM_VERTEX_SHADER\nvec4 modelPosition(){return vec4(a_position.xyz/TANGRAM_TILE_SCALE*exp2(u_tile_origin.z-u_tile_origin.w),1.)+vec4(0.,1.,0.,0.);}vec4 modelPositionBaseZoom(){return vec4(a_position.xyz/TANGRAM_TILE_SCALE,1.)+vec4(0.,1.,0.,0.);}\n#endif\nvec4 worldPosition(){return v_world_position;}\n#ifdef TANGRAM_VERTEX_SHADER\nvec4 wrapWorldPosition(vec4 world_position){\n#if defined(TANGRAM_WORLD_POSITION_WRAP)\nvec2 anchor=u_tile_origin.xy-mod(u_tile_origin.xy,TANGRAM_WORLD_POSITION_WRAP);world_position.xy-=anchor;\n#endif\nreturn world_position;}\n#endif\n#if defined(TANGRAM_VERTEX_SHADER)\nvec3 worldNormal(){return TANGRAM_NORMAL;}\n#elif defined(TANGRAM_FRAGMENT_SHADER)\nvec3 worldNormal(){return u_inverseNormalMatrix*TANGRAM_NORMAL;}\n#endif\n",shaderSrc_layerOrder="void applyLayerOrder(float layer,inout vec4 position){position.z-=layer*TANGRAM_LAYER_DELTA*position.w;}",shaderSrc_selectionGlobals="\n#if defined(TANGRAM_FEATURE_SELECTION) && defined(TANGRAM_VERTEX_SHADER)\nattribute vec4 a_selection_color;varying vec4 v_selection_color;uniform vec4 u_selection_discard0;uniform vec4 u_selection_discard1;uniform vec4 u_selection_discard2;uniform vec4 u_selection_discard3;uniform vec4 u_selection_discard4;uniform vec4 u_selection_discard5;uniform vec4 u_selection_discard6;uniform vec4 u_selection_discard7;uniform vec4 u_selection_discard8;uniform vec4 u_selection_discard9;\n#endif\n",shaderSrc_selectionVertex="\n#if defined(TANGRAM_FEATURE_SELECTION) && defined(TANGRAM_VERTEX_SHADER)\nif(a_selection_color.rgb==vec3(0.)||a_selection_color==u_selection_discard0||a_selection_color==u_selection_discard1||a_selection_color==u_selection_discard2||a_selection_color==u_selection_discard3||a_selection_color==u_selection_discard4||a_selection_color==u_selection_discard5||a_selection_color==u_selection_discard6||a_selection_color==u_selection_discard7||a_selection_color==u_selection_discard8||a_selection_color==u_selection_discard9){gl_Position=vec4(0.,0.,0.,1.);return;}v_selection_color=a_selection_color;\n#endif\n",shaderSrc_utils="#ifndef UTILS\n#define UTILS\nbool isLocalSpacePixelOutsideTile(vec4 pixel_local_space_position,float tile_scale){return pixel_local_space_position.x<0.||pixel_local_space_position.x>=tile_scale||pixel_local_space_position.y>0.||pixel_local_space_position.y<=-tile_scale;}\n#endif\n",shaderSrc_snapToPixelGrid="uniform float u_view_pan_snap_timer;void snapToPixelGrid(inout vec4 position){vec2 position_fract=fract((((position.xy/position.w)+1.)*.5)*u_resolution);vec2 position_snap=position.xy+((step(0.5,position_fract)-position_fract)*position.w*2./u_resolution);\n#ifdef TANGRAM_VIEW_PAN_SNAP_RATE\nposition.xy=mix(position.xy,position_snap,clamp(u_view_pan_snap_timer*TANGRAM_VIEW_PAN_SNAP_RATE,0.,1.));\n#else\nposition.xy=position_snap;\n#endif\n}",StyleManager=function(){function e(){_classCallCheck(this,e),this.styles={},this.base_styles={},this.register(Object.create(Polygons)),this.register(Object.create(Lines)),this.register(Object.create(PatternLines)),this.register(Object.create(Points)),this.register(Object.create(TextStyle)),this.register(Object.create(RasterStyle)),this.register(Object.create(CustomIcons)),this.register(Object.create(OverlayStyle)),this.register(Object.create(SkyBox))}return _createClass(e,[{key:"init",value:function(){ShaderProgram.removeBlock("global"),ShaderProgram.removeBlock("setup"),ShaderProgram.addBlock("global",shaderSrc_accessors),ShaderProgram.addBlock("global",shaderSrc_layerOrder),ShaderProgram.addBlock("global",shaderSrc_selectionGlobals),ShaderProgram.addBlock("global",shaderSrc_snapToPixelGrid),ShaderProgram.replaceBlock("utils",shaderSrc_utils),ShaderProgram.replaceBlock("setup",shaderSrc_selectionVertex),ShaderProgram.defines.TANGRAM_EPSILON=1e-5,ShaderProgram.defines.TANGRAM_LAYER_DELTA=1/16384,ShaderProgram.defines.TANGRAM_TILE_SCALE="vec3(".concat(Geo$1.tile_scale,"., ").concat(Geo$1.tile_scale,"., u_meters_per_pixel * ").concat(Geo$1.tile_size,".)"),ShaderProgram.defines.TANGRAM_HEIGHT_SCALE=Geo$1.height_scale,ShaderProgram.defines.TANGRAM_ALPHA_TEST=.1,Lines.dash_textures={}}},{key:"destroy",value:function(n){var r=this;Object.keys(this.styles).forEach(function(d){var m=r.styles[d];m.gl===n&&(log("trace","StyleManager.destroy: destroying render style ".concat(m.name)),m.base&&r.remove(m.name),m.destroy())})}},{key:"register",value:function(n){this.styles[n.name]=n,this.base_styles[n.name]=n}},{key:"remove",value:function(n){delete this.styles[n]}},{key:"mix",value:function(n,r){if(n.mixed)return n;n.mixed={};var d=[];n.mix&&(Array.isArray(n.mix)?d.push.apply(d,_toConsumableArray(n.mix)):d.push(n.mix),(d=d.map(function(g){return r[g]}).filter(function(g){return g&&g!==n})).forEach(function(g){return n.mixed[g.name]=!0})),d.push(n),n.animated=d.some(function(g){return g&&g.animated}),n.texcoords=d.some(function(g){return g&&g.texcoords}),n.base=d.map(function(g){return g.base}).filter(function(g){return g}).pop(),n.lighting=d.map(function(g){return g.lighting}).filter(function(g){return null!=g}).pop(),n.texture=d.map(function(g){return g.texture}).filter(function(g){return g}).pop(),n.raster=d.map(function(g){return g.raster}).filter(function(g){return null!=g}).pop(),n.dash=d.map(function(g){return g.dash}).filter(function(g){return null!=g}).pop(),n.dash_background_color=d.map(function(g){return g.dash_background_color}).filter(function(g){return null!=g}).pop(),d.some(function(g){return g.hasOwnProperty("blend")&&g.blend})&&(n.blend=d.map(function(g){return g.hasOwnProperty("blend")&&g.blend}).filter(function(g){return g}).pop()),n.blend_order=d.map(function(g){return g.blend_order}).filter(function(g){return null!=g}).pop(),n.defines=Object.assign.apply(Object,[{}].concat(_toConsumableArray(d.map(function(g){return g.defines}).filter(function(g){return g})))),n.material=Object.assign.apply(Object,[{}].concat(_toConsumableArray(d.map(function(g){return g.material}).filter(function(g){return g}))));var m=d.map(function(g){return g.draw}).filter(function(g){return g});return 0<m.length&&(n.draw=mergeObjects.apply(void 0,[{}].concat(_toConsumableArray(m)))),this.mixShaders(n,r,d),n}},{key:"mixShaders",value:function(n,r,d){var m={},g=d.map(function(G){return G.shaders}).filter(function(G){return G});if(m.defines=Object.assign.apply(Object,[{}].concat(_toConsumableArray(g.map(function(G){return G.defines}).filter(function(G){return G})))),m.uniforms={},m._uniforms=n.shaders&&n.shaders.uniforms||{},m._uniform_scopes={},d.filter(function(G){return G.shaders&&G.shaders.uniforms}).forEach(function(G){for(var q in G.shaders.uniforms)!function(_t){m._uniform_scopes[_t]=G.name,Object.defineProperty(m.uniforms,_t,{enumerable:!0,configurable:!0,get:function(){return void 0!==m._uniforms[_t]?m._uniforms[_t]:r[m._uniform_scopes[_t]].shaders.uniforms!==m.uniforms?r[m._uniform_scopes[_t]].shaders.uniforms[_t]:void 0},set:function(_r){m._uniforms[_t]=_r}})}(q)}),m.extensions=Object.keys(g.map(function(G){return G.extensions}).filter(function(G){return G}).reduce(function(G,q){return"string"==typeof q?G[q]=!0:q.forEach(function(_t){return G[_t]=!0}),G},{})||{}),n.shaders&&n.shaders.blocks)for(var v in n.shaders.block_scopes=n.shaders.block_scopes||{},n.shaders.blocks){var w,k=n.shaders.blocks[v];n.shaders.block_scopes[v]=n.shaders.block_scopes[v]||[],Array.isArray(k)?(w=n.shaders.block_scopes[v]).push.apply(w,_toConsumableArray(k.map(function(){return n.name}))):n.shaders.block_scopes[v].push(n.name)}var j={};return g.forEach(function(G){if(G.blocks){m.blocks=m.blocks||{},m.block_scopes=m.block_scopes||{};var q={};for(var _t in G.blocks){var _r=G.blocks[_t],_s=G.block_scopes[_t];m.blocks[_t]=m.blocks[_t]||[],m.block_scopes[_t]=m.block_scopes[_t]||[],_r=Array.isArray(_r)?_r:[_r],_s=Array.isArray(_s)?_s:[_s];for(var ga=0;ga<_r.length;ga++)j[_s[ga]]||(q[_s[ga]]=!0,m.blocks[_t].push(_r[ga]),m.block_scopes[_t].push(_s[ga]))}Object.assign(j,q)}}),Object.assign(n.mixed,j),n.shaders=m,n}},{key:"create",value:function(n,r,d){var m=2<arguments.length&&void 0!==d?d:{},g=mergeObjects({},r);return g.name=n,(g=this.mix(g,m)).base&&this.base_styles[g.base]?this.styles[n]=g=Object.assign(Object.create(this.base_styles[g.base]),g):g.base=null,g}},{key:"build",value:function(n){var r=this,d=Object.keys(n).sort(function(v,w){return r.inheritanceDepth(v,n)-r.inheritanceDepth(w,n)});for(var m in this.styles)this.base_styles[m]?this.styles[m].reset():delete this.styles[m];var g={};return d.forEach(function(v){g[v]=r.create(v,n[v],g)}),this.styles}},{key:"initStyles",value:function(n){var r=0<arguments.length&&void 0!==n?n:{};for(var d in this.styles)this.styles[d].init(r)}},{key:"inheritanceDepth",value:function(n,r){for(var d=this,m=0;;){var g=r[n];if(!g||!g.mix)break;if(m++,Array.isArray(g.mix)){m+=Math.max.apply(Math,_toConsumableArray(g.mix.map(function(v){if(n!==v)return d.inheritanceDepth(v,r)})));break}if(n===g.mix)break;n=g.mix}return m}}]),e}();function isNothing(e){return null==e}function isObject$2(e){return"object"==typeof e&&null!==e}function toArray(e){return Array.isArray(e)?e:isNothing(e)?[]:[e]}function extend$1(e,n){var r,d,m,g;if(n)for(r=0,d=(g=Object.keys(n)).length;r<d;r+=1)e[m=g[r]]=n[m];return e}function repeat(e,n){for(var r="",d=0;d<n;d+=1)r+=e;return r}function isNegativeZero(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e}var isNothing_1=isNothing,isObject_1=isObject$2,toArray_1=toArray,repeat_1=repeat,isNegativeZero_1=isNegativeZero,extend_1=extend$1,common={isNothing:isNothing_1,isObject:isObject_1,toArray:toArray_1,repeat:repeat_1,isNegativeZero:isNegativeZero_1,extend:extend_1};function YAMLException(e,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||"",this.name="YAMLException",this.reason=e,this.mark=n,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():"")}YAMLException.prototype=Object.create(Error.prototype),YAMLException.prototype.constructor=YAMLException,YAMLException.prototype.toString=function(e){var n=this.name+": ";return n+=this.reason||"(unknown reason)",!e&&this.mark&&(n+=" "+this.mark.toString()),n};var exception=YAMLException;function Mark(e,n,r,d,m){this.name=e,this.buffer=n,this.position=r,this.line=d,this.column=m}Mark.prototype.getSnippet=function(e,n){var r,d,m,g,v;if(!this.buffer)return null;for(e=e||4,n=n||75,r="",d=this.position;0<d&&-1==="\0\r\n\x85\u2028\u2029".indexOf(this.buffer.charAt(d-1));)if(--d,this.position-d>n/2-1){r=" ... ",d+=5;break}for(m="",g=this.position;g<this.buffer.length&&-1==="\0\r\n\x85\u2028\u2029".indexOf(this.buffer.charAt(g));)if((g+=1)-this.position>n/2-1){m=" ... ",g-=5;break}return v=this.buffer.slice(d,g),common.repeat(" ",e)+r+v+m+"\n"+common.repeat(" ",e+this.position-d+r.length)+"^"},Mark.prototype.toString=function(e){var n,r="";return this.name&&(r+='in "'+this.name+'" '),r+="at line "+(this.line+1)+", column "+(this.column+1),e||(n=this.getSnippet())&&(r+=":\n"+n),r};var mark=Mark,TYPE_CONSTRUCTOR_OPTIONS=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],YAML_NODE_KINDS=["scalar","sequence","mapping"];function compileStyleAliases(e){var n={};return null!==e&&Object.keys(e).forEach(function(r){e[r].forEach(function(d){n[String(d)]=r})}),n}function Type(e,n){if(n=n||{},Object.keys(n).forEach(function(r){if(-1===TYPE_CONSTRUCTOR_OPTIONS.indexOf(r))throw new exception('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.tag=e,this.kind=n.kind||null,this.resolve=n.resolve||function(){return!0},this.construct=n.construct||function(r){return r},this.instanceOf=n.instanceOf||null,this.predicate=n.predicate||null,this.represent=n.represent||null,this.defaultStyle=n.defaultStyle||null,this.styleAliases=compileStyleAliases(n.styleAliases||null),-1===YAML_NODE_KINDS.indexOf(this.kind))throw new exception('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var type=Type;function compileList(e,n,r){var d=[];return e.include.forEach(function(m){r=compileList(m,n,r)}),e[n].forEach(function(m){r.forEach(function(g,v){g.tag===m.tag&&d.push(v)}),r.push(m)}),r.filter(function(m,g){return-1===d.indexOf(g)})}function compileMap(){var e,n,r={};function d(m){r[m.tag]=m}for(e=0,n=arguments.length;e<n;e+=1)arguments[e].forEach(d);return r}function Schema(e){this.include=e.include||[],this.implicit=e.implicit||[],this.explicit=e.explicit||[],this.implicit.forEach(function(n){if(n.loadKind&&"scalar"!==n.loadKind)throw new exception("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=compileList(this,"implicit",[]),this.compiledExplicit=compileList(this,"explicit",[]),this.compiledTypeMap=compileMap(this.compiledImplicit,this.compiledExplicit)}Schema.DEFAULT=null,Schema.create=function(e,n){var r,d;switch(arguments.length){case 1:r=Schema.DEFAULT,d=e;break;case 2:r=e,d=n;break;default:throw new exception("Wrong number of arguments for Schema.create function")}if(r=common.toArray(r),d=common.toArray(d),!r.every(function(m){return m instanceof Schema}))throw new exception("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!d.every(function(m){return m instanceof type}))throw new exception("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new Schema({include:r,explicit:d})};var schema=Schema,str=new type("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}}),seq=new type("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}}),map=new type("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}}),failsafe=new schema({explicit:[str,seq,map]});function resolveYamlNull(e){if(null===e)return!0;var n=e.length;return 1===n&&"~"===e||4===n&&("null"===e||"Null"===e||"NULL"===e)}function constructYamlNull(){return null}function isNull$1(e){return null===e}var _null=new type("tag:yaml.org,2002:null",{kind:"scalar",resolve:resolveYamlNull,construct:constructYamlNull,predicate:isNull$1,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"});function resolveYamlBoolean(e){if(null===e)return!1;var n=e.length;return 4===n&&("true"===e||"True"===e||"TRUE"===e)||5===n&&("false"===e||"False"===e||"FALSE"===e)}function constructYamlBoolean(e){return"true"===e||"True"===e||"TRUE"===e}function isBoolean$1(e){return"[object Boolean]"===Object.prototype.toString.call(e)}var bool=new type("tag:yaml.org,2002:bool",{kind:"scalar",resolve:resolveYamlBoolean,construct:constructYamlBoolean,predicate:isBoolean$1,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function isHexCode(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function isOctCode(e){return 48<=e&&e<=55}function isDecCode(e){return 48<=e&&e<=57}function resolveYamlInteger(e){if(null===e)return!1;var n,r=e.length,d=0,m=!1;if(!r)return!1;if("-"!==(n=e[d])&&"+"!==n||(n=e[++d]),"0"===n){if(d+1===r)return!0;if("b"===(n=e[++d])){for(d++;d<r;d++)if("_"!==(n=e[d])){if("0"!==n&&"1"!==n)return!1;m=!0}return m}if("x"===n){for(d++;d<r;d++)if("_"!==(n=e[d])){if(!isHexCode(e.charCodeAt(d)))return!1;m=!0}return m}for(;d<r;d++)if("_"!==(n=e[d])){if(!isOctCode(e.charCodeAt(d)))return!1;m=!0}return m}for(;d<r;d++)if("_"!==(n=e[d])){if(":"===n)break;if(!isDecCode(e.charCodeAt(d)))return!1;m=!0}return!!m&&(":"!==n||/^(:[0-5]?[0-9])+$/.test(e.slice(d)))}function constructYamlInteger(e){var n,r,d=e,m=1,g=[];return-1!==d.indexOf("_")&&(d=d.replace(/_/g,"")),"-"!==(n=d[0])&&"+"!==n||("-"===n&&(m=-1),n=(d=d.slice(1))[0]),"0"===d?0:"0"===n?"b"===d[1]?m*parseInt(d.slice(2),2):"x"===d[1]?m*parseInt(d,16):m*parseInt(d,8):-1!==d.indexOf(":")?(d.split(":").forEach(function(v){g.unshift(parseInt(v,10))}),d=0,r=1,g.forEach(function(v){d+=v*r,r*=60}),m*d):m*parseInt(d,10)}function isInteger(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!common.isNegativeZero(e)}var int_1=new type("tag:yaml.org,2002:int",{kind:"scalar",resolve:resolveYamlInteger,construct:constructYamlInteger,predicate:isInteger,represent:{binary:function(e){return"0b"+e.toString(2)},octal:function(e){return"0"+e.toString(8)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return"0x"+e.toString(16).toUpperCase()}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),YAML_FLOAT_PATTERN=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)\\.[0-9_]*(?:[eE][-+][0-9]+)?|\\.[0-9_]+(?:[eE][-+][0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function resolveYamlFloat(e){return null!==e&&!!YAML_FLOAT_PATTERN.test(e)}function constructYamlFloat(e){var n,r=e.replace(/_/g,"").toLowerCase(),d="-"===r[0]?-1:1,m=[];return 0<="+-".indexOf(r[0])&&(r=r.slice(1)),".inf"===r?1==d?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===r?NaN:0<=r.indexOf(":")?(r.split(":").forEach(function(g){m.unshift(parseFloat(g,10))}),r=0,n=1,m.forEach(function(g){r+=g*n,n*=60}),d*r):d*parseFloat(r,10)}var SCIENTIFIC_WITHOUT_DOT=/^[-+]?[0-9]+e/;function representYamlFloat(e,n){var r;if(isNaN(e))switch(n){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(n){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(n){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(common.isNegativeZero(e))return"-0.0";return r=e.toString(10),SCIENTIFIC_WITHOUT_DOT.test(r)?r.replace("e",".e"):r}function isFloat(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||common.isNegativeZero(e))}var float_1$1=new type("tag:yaml.org,2002:float",{kind:"scalar",resolve:resolveYamlFloat,construct:constructYamlFloat,predicate:isFloat,represent:representYamlFloat,defaultStyle:"lowercase"}),json=new schema({include:[failsafe],implicit:[_null,bool,int_1,float_1$1]}),core=new schema({include:[json]}),YAML_TIMESTAMP_REGEXP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?)?$");function resolveYamlTimestamp(e){return null!==e&&null!==YAML_TIMESTAMP_REGEXP.exec(e)}function constructYamlTimestamp(e){var n,r,d,m,g,v,w,k=0,j=null,G=YAML_TIMESTAMP_REGEXP.exec(e);if(null===G)throw new Error("Date resolve error");if(n=+G[1],r=G[2]-1,d=+G[3],!G[4])return new Date(Date.UTC(n,r,d));if(m=+G[4],g=+G[5],v=+G[6],G[7]){for(k=G[7].slice(0,3);k.length<3;)k+="0";k=+k}return G[9]&&(j=6e4*(60*+G[10]+ +(G[11]||0)),"-"===G[9]&&(j=-j)),w=new Date(Date.UTC(n,r,d,m,g,v,k)),j&&w.setTime(w.getTime()-j),w}function representYamlTimestamp(e){return e.toISOString()}var timestamp=new type("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:resolveYamlTimestamp,construct:constructYamlTimestamp,instanceOf:Date,represent:representYamlTimestamp});function resolveYamlMerge(e){return"<<"===e||null===e}var merge=new type("tag:yaml.org,2002:merge",{kind:"scalar",resolve:resolveYamlMerge}),NodeBuffer=bufferEs6.Buffer,BASE64_MAP="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";function resolveYamlBinary(e){if(null===e)return!1;for(var n,r=0,d=e.length,m=BASE64_MAP,g=0;g<d;g++)if(!(64<(n=m.indexOf(e.charAt(g))))){if(n<0)return!1;r+=6}return r%8==0}function constructYamlBinary(e){for(var n,r=e.replace(/[\r\n=]/g,""),d=r.length,m=BASE64_MAP,g=0,v=[],w=0;w<d;w++)w%4==0&&w&&(v.push(g>>16&255),v.push(g>>8&255),v.push(255&g)),g=g<<6|m.indexOf(r.charAt(w));return 0==(n=d%4*6)?(v.push(g>>16&255),v.push(g>>8&255),v.push(255&g)):18==n?(v.push(g>>10&255),v.push(g>>2&255)):12==n&&v.push(g>>4&255),NodeBuffer?new NodeBuffer(v):v}function representYamlBinary(e){for(var n,r="",d=0,m=e.length,g=BASE64_MAP,v=0;v<m;v++)v%3==0&&v&&(r+=g[d>>18&63],r+=g[d>>12&63],r+=g[d>>6&63],r+=g[63&d]),d=(d<<8)+e[v];return 0==(n=m%3)?(r+=g[d>>18&63],r+=g[d>>12&63],r+=g[d>>6&63],r+=g[63&d]):2==n?(r+=g[d>>10&63],r+=g[d>>4&63],r+=g[d<<2&63],r+=g[64]):1==n&&(r+=g[d>>2&63],r+=g[d<<4&63],r+=g[64],r+=g[64]),r}function isBinary(e){return NodeBuffer&&NodeBuffer.isBuffer(e)}var binary=new type("tag:yaml.org,2002:binary",{kind:"scalar",resolve:resolveYamlBinary,construct:constructYamlBinary,predicate:isBinary,represent:representYamlBinary}),_hasOwnProperty=Object.prototype.hasOwnProperty,_toString=Object.prototype.toString;function resolveYamlOmap(e){if(null===e)return!0;for(var n,r,d,m=[],g=e,v=0,w=g.length;v<w;v+=1){if(d=!1,"[object Object]"!==_toString.call(n=g[v]))return!1;for(r in n)if(_hasOwnProperty.call(n,r)){if(d)return!1;d=!0}if(!d||-1!==m.indexOf(r))return!1;m.push(r)}return!0}function constructYamlOmap(e){return null!==e?e:[]}var omap=new type("tag:yaml.org,2002:omap",{kind:"sequence",resolve:resolveYamlOmap,construct:constructYamlOmap}),_toString$1=Object.prototype.toString;function resolveYamlPairs(e){if(null===e)return!0;for(var n,r,d=e,m=new Array(d.length),g=0,v=d.length;g<v;g+=1){if("[object Object]"!==_toString$1.call(n=d[g])||1!==(r=Object.keys(n)).length)return!1;m[g]=[r[0],n[r[0]]]}return!0}function constructYamlPairs(e){if(null===e)return[];for(var n,r,d=e,m=new Array(d.length),g=0,v=d.length;g<v;g+=1)n=d[g],r=Object.keys(n),m[g]=[r[0],n[r[0]]];return m}var pairs=new type("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:resolveYamlPairs,construct:constructYamlPairs}),_hasOwnProperty$1=Object.prototype.hasOwnProperty;function resolveYamlSet(e){if(null===e)return!0;var n,r=e;for(n in r)if(_hasOwnProperty$1.call(r,n)&&null!==r[n])return!1;return!0}function constructYamlSet(e){return null!==e?e:{}}var set$2=new type("tag:yaml.org,2002:set",{kind:"mapping",resolve:resolveYamlSet,construct:constructYamlSet}),default_safe=new schema({include:[core],implicit:[timestamp,merge],explicit:[binary,omap,pairs,set$2]});function resolveJavascriptUndefined(){return!0}function constructJavascriptUndefined(){}function representJavascriptUndefined(){return""}function isUndefined$1(e){return void 0===e}var _undefined=new type("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:resolveJavascriptUndefined,construct:constructJavascriptUndefined,predicate:isUndefined$1,represent:representJavascriptUndefined});function resolveJavascriptRegExp(e){if(null===e||0===e.length)return!1;var n=e,r=/\/([gim]*)$/.exec(e),d="";return!("/"===n[0]&&(r&&(d=r[1]),3<d.length||"/"!==n[n.length-d.length-1]))}function constructJavascriptRegExp(e){var n=e,r=/\/([gim]*)$/.exec(e),d="";return"/"===n[0]&&(r&&(d=r[1]),n=n.slice(1,n.length-d.length-1)),new RegExp(n,d)}function representJavascriptRegExp(e){var n="/"+e.source+"/";return e.global&&(n+="g"),e.multiline&&(n+="m"),e.ignoreCase&&(n+="i"),n}function isRegExp$1(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var regexp=new type("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:resolveJavascriptRegExp,construct:constructJavascriptRegExp,predicate:isRegExp$1,represent:representJavascriptRegExp}),esprima;try{var _require=commonjsRequire,esprima=_require("esprima")}catch(e){typeof window<"u"&&(esprima=window.esprima)}function resolveJavascriptFunction(e){if(null===e)return!1;try{var r=esprima.parse("("+e+")",{range:!0});return!("Program"!==r.type||1!==r.body.length||"ExpressionStatement"!==r.body[0].type||"FunctionExpression"!==r.body[0].expression.type)}catch{return!1}}function constructJavascriptFunction(e){var n,r="("+e+")",d=esprima.parse(r,{range:!0}),m=[];if("Program"!==d.type||1!==d.body.length||"ExpressionStatement"!==d.body[0].type||"FunctionExpression"!==d.body[0].expression.type)throw new Error("Failed to resolve function");return d.body[0].expression.params.forEach(function(g){m.push(g.name)}),n=d.body[0].expression.body.range,new Function(m,r.slice(n[0]+1,n[1]-1))}function representJavascriptFunction(e){return e.toString()}function isFunction$1(e){return"[object Function]"===Object.prototype.toString.call(e)}var _function=new type("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:resolveJavascriptFunction,construct:constructJavascriptFunction,predicate:isFunction$1,represent:representJavascriptFunction}),default_full=schema.DEFAULT=new schema({include:[default_safe],explicit:[_undefined,regexp,_function]}),_hasOwnProperty$2=Object.prototype.hasOwnProperty,CONTEXT_FLOW_IN=1,CONTEXT_FLOW_OUT=2,CONTEXT_BLOCK_IN=3,CONTEXT_BLOCK_OUT=4,CHOMPING_CLIP=1,CHOMPING_STRIP=2,CHOMPING_KEEP=3,PATTERN_NON_PRINTABLE=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,PATTERN_NON_ASCII_LINE_BREAKS=/[\x85\u2028\u2029]/,PATTERN_FLOW_INDICATORS=/[,\[\]\{\}]/,PATTERN_TAG_HANDLE=/^(?:!|!!|![a-z\-]+!)$/i,PATTERN_TAG_URI=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function is_EOL(e){return 10===e||13===e}function is_WHITE_SPACE(e){return 9===e||32===e}function is_WS_OR_EOL(e){return 9===e||32===e||10===e||13===e}function is_FLOW_INDICATOR(e){return 44===e||91===e||93===e||123===e||125===e}function fromHexCode(e){var n;return 48<=e&&e<=57?e-48:97<=(n=32|e)&&n<=102?n-97+10:-1}function escapedHexLen(e){return 120===e?2:117===e?4:85===e?8:0}function fromDecimalCode(e){return 48<=e&&e<=57?e-48:-1}function simpleEscapeSequence(e){return 48===e?"\0":97===e?"\x07":98===e?"\b":116===e||9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"\x1b":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"\x85":95===e?"\xa0":76===e?"\u2028":80===e?"\u2029":""}function charFromCodepoint(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var simpleEscapeCheck=new Array(256),simpleEscapeMap=new Array(256),i=0;i<256;i++)simpleEscapeCheck[i]=simpleEscapeSequence(i)?1:0,simpleEscapeMap[i]=simpleEscapeSequence(i);function State$1(e,n){this.input=e,this.filename=n.filename||null,this.schema=n.schema||default_full,this.onWarning=n.onWarning||null,this.legacy=n.legacy||!1,this.json=n.json||!1,this.listener=n.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function generateError(e,n){return new exception(n,new mark(e.filename,e.input,e.position,e.line,e.position-e.lineStart))}function throwError(e,n){throw generateError(e,n)}function throwWarning(e,n){e.onWarning&&e.onWarning.call(null,generateError(e,n))}var directiveHandlers={YAML:function(e,n,r){var d,m,g;null!==e.version&&throwError(e,"duplication of %YAML directive"),1!==r.length&&throwError(e,"YAML directive accepts exactly one argument"),null===(d=/^([0-9]+)\.([0-9]+)$/.exec(r[0]))&&throwError(e,"ill-formed argument of the YAML directive"),m=parseInt(d[1],10),g=parseInt(d[2],10),1!==m&&throwError(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=g<2,1!==g&&2!==g&&throwWarning(e,"unsupported YAML version of the document")},TAG:function(e,n,r){var d,m;2!==r.length&&throwError(e,"TAG directive accepts exactly two arguments"),m=r[1],PATTERN_TAG_HANDLE.test(d=r[0])||throwError(e,"ill-formed tag handle (first argument) of the TAG directive"),_hasOwnProperty$2.call(e.tagMap,d)&&throwError(e,'there is a previously declared suffix for "'+d+'" tag handle'),PATTERN_TAG_URI.test(m)||throwError(e,"ill-formed tag prefix (second argument) of the TAG directive"),e.tagMap[d]=m}};function captureSegment(e,n,r,d){var m,g,v,w;if(n<r){if(w=e.input.slice(n,r),d)for(m=0,g=w.length;m<g;m+=1)9===(v=w.charCodeAt(m))||32<=v&&v<=1114111||throwError(e,"expected valid JSON character");else PATTERN_NON_PRINTABLE.test(w)&&throwError(e,"the stream contains non-printable characters");e.result+=w}}function mergeMappings(e,n,r,d){var m,g,v,w;for(common.isObject(r)||throwError(e,"cannot merge mappings; the provided source object is unacceptable"),v=0,w=(m=Object.keys(r)).length;v<w;v+=1)_hasOwnProperty$2.call(n,g=m[v])||(n[g]=r[g],d[g]=!0)}function storeMappingPair(e,n,r,d,m,g){var v,w;if(m=String(m),null===n&&(n={}),"tag:yaml.org,2002:merge"===d)if(Array.isArray(g))for(v=0,w=g.length;v<w;v+=1)mergeMappings(e,n,g[v],r);else mergeMappings(e,n,g,r);else e.json||_hasOwnProperty$2.call(r,m)||!_hasOwnProperty$2.call(n,m)||throwError(e,"duplicated mapping key"),n[m]=g,delete r[m];return n}function readLineBreak(e){var n=e.input.charCodeAt(e.position);10===n?e.position++:13===n?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):throwError(e,"a line break is expected"),e.line+=1,e.lineStart=e.position}function skipSeparationSpace(e,n,r){for(var d=0,m=e.input.charCodeAt(e.position);0!==m;){for(;is_WHITE_SPACE(m);)m=e.input.charCodeAt(++e.position);if(n&&35===m)for(;10!==(m=e.input.charCodeAt(++e.position))&&13!==m&&0!==m;);if(!is_EOL(m))break;for(readLineBreak(e),m=e.input.charCodeAt(e.position),d++,e.lineIndent=0;32===m;)e.lineIndent++,m=e.input.charCodeAt(++e.position)}return-1!==r&&0!==d&&e.lineIndent<r&&throwWarning(e,"deficient indentation"),d}function testDocumentSeparator(e){var n=e.position,r=e.input.charCodeAt(n);return 45!==r&&46!==r||r!==e.input.charCodeAt(n+1)||r!==e.input.charCodeAt(n+2)||0!==(r=e.input.charCodeAt(n+=3))&&!is_WS_OR_EOL(r)?void 0:1}function writeFoldedLines(e,n){1===n?e.result+=" ":1<n&&(e.result+=common.repeat("\n",n-1))}function readPlainScalar(e,n,r){var d,m,g,v,w,k,j,G=e.kind,q=e.result,_t=e.input.charCodeAt(e.position);if(!is_WS_OR_EOL(_t)&&!is_FLOW_INDICATOR(_t)&&35!==_t&&38!==_t&&42!==_t&&33!==_t&&124!==_t&&62!==_t&&39!==_t&&34!==_t&&37!==_t&&64!==_t&&96!==_t&&(63!==_t&&45!==_t||!(is_WS_OR_EOL(d=e.input.charCodeAt(e.position+1))||r&&is_FLOW_INDICATOR(d)))){for(e.kind="scalar",e.result="",m=g=e.position,v=!1;0!==_t;){if(58===_t){if(is_WS_OR_EOL(d=e.input.charCodeAt(e.position+1))||r&&is_FLOW_INDICATOR(d))break}else if(35===_t){if(is_WS_OR_EOL(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&testDocumentSeparator(e)||r&&is_FLOW_INDICATOR(_t))break;if(is_EOL(_t)){if(w=e.line,k=e.lineStart,j=e.lineIndent,skipSeparationSpace(e,!1,-1),e.lineIndent>=n){v=!0,_t=e.input.charCodeAt(e.position);continue}e.position=g,e.line=w,e.lineStart=k,e.lineIndent=j;break}}v&&(captureSegment(e,m,g,!1),writeFoldedLines(e,e.line-w),m=g=e.position,v=!1),is_WHITE_SPACE(_t)||(g=e.position+1),_t=e.input.charCodeAt(++e.position)}if(captureSegment(e,m,g,!1),e.result)return 1;e.kind=G,e.result=q}}function readSingleQuotedScalar(e,n){var r,d,m=e.input.charCodeAt(e.position);if(39===m){for(e.kind="scalar",e.result="",e.position++,r=d=e.position;0!==(m=e.input.charCodeAt(e.position));)if(39===m){if(captureSegment(e,r,e.position,!0),39!==(m=e.input.charCodeAt(++e.position)))return 1;r=d=e.position,e.position++}else is_EOL(m)?(captureSegment(e,r,d,!0),writeFoldedLines(e,skipSeparationSpace(e,!1,n)),r=d=e.position):e.position===e.lineStart&&testDocumentSeparator(e)?throwError(e,"unexpected end of the document within a single quoted scalar"):(e.position++,d=e.position);throwError(e,"unexpected end of the stream within a single quoted scalar")}}function readDoubleQuotedScalar(e,n){var r,d,m,g,v,w=e.input.charCodeAt(e.position);if(34===w){for(e.kind="scalar",e.result="",e.position++,r=d=e.position;0!==(w=e.input.charCodeAt(e.position));){if(34===w)return captureSegment(e,r,e.position,!0),e.position++,1;if(92===w){if(captureSegment(e,r,e.position,!0),is_EOL(w=e.input.charCodeAt(++e.position)))skipSeparationSpace(e,!1,n);else if(w<256&&simpleEscapeCheck[w])e.result+=simpleEscapeMap[w],e.position++;else if(0<(v=escapedHexLen(w))){for(m=v,g=0;0<m;m--)0<=(v=fromHexCode(w=e.input.charCodeAt(++e.position)))?g=(g<<4)+v:throwError(e,"expected hexadecimal character");e.result+=charFromCodepoint(g),e.position++}else throwError(e,"unknown escape sequence");r=d=e.position}else is_EOL(w)?(captureSegment(e,r,d,!0),writeFoldedLines(e,skipSeparationSpace(e,!1,n)),r=d=e.position):e.position===e.lineStart&&testDocumentSeparator(e)?throwError(e,"unexpected end of the document within a double quoted scalar"):(e.position++,d=e.position)}throwError(e,"unexpected end of the stream within a double quoted scalar")}}function readFlowCollection(e,n){var r,d,m,g,v,w,k,j,G,q=!0,_t=e.tag,_r=e.anchor,_s={},ga=e.input.charCodeAt(e.position);if(91===ga)w=!(m=93),d=[];else{if(123!==ga)return;m=125,w=!0,d={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=d),ga=e.input.charCodeAt(++e.position);0!==ga;){if(skipSeparationSpace(e,!0,n),(ga=e.input.charCodeAt(e.position))===m)return e.position++,e.tag=_t,e.anchor=_r,e.kind=w?"mapping":"sequence",e.result=d,1;q||throwError(e,"missed comma between flow collection entries"),G=null,g=v=!1,63===ga&&is_WS_OR_EOL(e.input.charCodeAt(e.position+1))&&(g=v=!0,e.position++,skipSeparationSpace(e,!0,n)),r=e.line,composeNode(e,n,CONTEXT_FLOW_IN,!1,!0),j=e.tag,k=e.result,skipSeparationSpace(e,!0,n),ga=e.input.charCodeAt(e.position),!v&&e.line!==r||58!==ga||(g=!0,ga=e.input.charCodeAt(++e.position),skipSeparationSpace(e,!0,n),composeNode(e,n,CONTEXT_FLOW_IN,!1,!0),G=e.result),w?storeMappingPair(e,d,_s,j,k,G):d.push(g?storeMappingPair(e,null,_s,j,k,G):k),skipSeparationSpace(e,!0,n),44===(ga=e.input.charCodeAt(e.position))?(q=!0,ga=e.input.charCodeAt(++e.position)):q=!1}throwError(e,"unexpected end of the stream within a flow collection")}function readBlockScalar(e,n){var r,d,m,g=CHOMPING_CLIP,v=!1,w=n,k=0,j=!1,G=e.input.charCodeAt(e.position);if(124===G)d=!1;else{if(62!==G)return;d=!0}for(e.kind="scalar",e.result="";0!==G;)if(43===(G=e.input.charCodeAt(++e.position))||45===G)CHOMPING_CLIP===g?g=43===G?CHOMPING_KEEP:CHOMPING_STRIP:throwError(e,"repeat of a chomping mode identifier");else{if(!(0<=(m=fromDecimalCode(G))))break;0===m?throwError(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):v?throwError(e,"repeat of an indentation width identifier"):(w=n+m-1,v=!0)}if(is_WHITE_SPACE(G)){for(;is_WHITE_SPACE(G=e.input.charCodeAt(++e.position)););if(35===G)for(;!is_EOL(G=e.input.charCodeAt(++e.position))&&0!==G;);}for(;0!==G;){for(readLineBreak(e),e.lineIndent=0,G=e.input.charCodeAt(e.position);(!v||e.lineIndent<w)&&32===G;)e.lineIndent++,G=e.input.charCodeAt(++e.position);if(!v&&e.lineIndent>w&&(w=e.lineIndent),is_EOL(G))k++;else{if(e.lineIndent<w){g===CHOMPING_KEEP?e.result+=common.repeat("\n",k):g===CHOMPING_CLIP&&v&&(e.result+="\n");break}for(d?is_WHITE_SPACE(G)?(j=!0,e.result+=common.repeat("\n",k+1)):j?(j=!1,e.result+=common.repeat("\n",k+1)):0===k?v&&(e.result+=" "):e.result+=common.repeat("\n",k):e.result+=common.repeat("\n",v?k+1:k),v=!0,k=0,r=e.position;!is_EOL(G)&&0!==G;)G=e.input.charCodeAt(++e.position);captureSegment(e,r,e.position,!1)}}return 1}function readBlockSequence(e,n){var r,d,m=e.tag,g=e.anchor,v=[],w=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=v),d=e.input.charCodeAt(e.position);0!==d&&45===d&&is_WS_OR_EOL(e.input.charCodeAt(e.position+1));)if(w=!0,e.position++,skipSeparationSpace(e,!0,-1)&&e.lineIndent<=n)v.push(null),d=e.input.charCodeAt(e.position);else if(r=e.line,composeNode(e,n,CONTEXT_BLOCK_IN,!1,!0),v.push(e.result),skipSeparationSpace(e,!0,-1),d=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>n)&&0!==d)throwError(e,"bad indentation of a sequence entry");else if(e.lineIndent<n)break;return!!w&&(e.tag=m,e.anchor=g,e.kind="sequence",e.result=v,!0)}function readBlockMapping(e,n,r){var d,m,g,v,w=e.tag,k=e.anchor,j={},G={},q=null,_t=null,_r=null,_s=!1,ga=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=j),v=e.input.charCodeAt(e.position);0!==v;){if(d=e.input.charCodeAt(e.position+1),g=e.line,63!==v&&58!==v||!is_WS_OR_EOL(d)){if(!composeNode(e,r,CONTEXT_FLOW_OUT,!1,!0))break;if(e.line===g){for(v=e.input.charCodeAt(e.position);is_WHITE_SPACE(v);)v=e.input.charCodeAt(++e.position);if(58===v)is_WS_OR_EOL(v=e.input.charCodeAt(++e.position))||throwError(e,"a whitespace character is expected after the key-value separator within a block mapping"),_s&&(storeMappingPair(e,j,G,q,_t,null),q=_t=_r=null),m=_s=!(ga=!0),q=e.tag,_t=e.result;else{if(!ga)return e.tag=w,e.anchor=k,1;throwError(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!ga)return e.tag=w,e.anchor=k,1;throwError(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===v?(_s&&(storeMappingPair(e,j,G,q,_t,null),q=_t=_r=null),m=_s=ga=!0):_s?m=!(_s=!1):throwError(e,"incomplete explicit mapping pair; a key node is missed"),e.position+=1,v=d;if((e.line===g||e.lineIndent>n)&&(composeNode(e,n,CONTEXT_BLOCK_OUT,!0,m)&&(_s?_t=e.result:_r=e.result),_s||(storeMappingPair(e,j,G,q,_t,_r),q=_t=_r=null),skipSeparationSpace(e,!0,-1),v=e.input.charCodeAt(e.position)),e.lineIndent>n&&0!==v)throwError(e,"bad indentation of a mapping entry");else if(e.lineIndent<n)break}return _s&&storeMappingPair(e,j,G,q,_t,null),ga&&(e.tag=w,e.anchor=k,e.kind="mapping",e.result=j),ga}function readTagProperty(e){var n,r,d,m=!1,g=!1,v=e.input.charCodeAt(e.position);if(33===v){if(null!==e.tag&&throwError(e,"duplication of a tag property"),60===(v=e.input.charCodeAt(++e.position))?(m=!0,v=e.input.charCodeAt(++e.position)):33===v?(g=!0,r="!!",v=e.input.charCodeAt(++e.position)):r="!",n=e.position,m){for(;0!==(v=e.input.charCodeAt(++e.position))&&62!==v;);e.position<e.length?(d=e.input.slice(n,e.position),v=e.input.charCodeAt(++e.position)):throwError(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==v&&!is_WS_OR_EOL(v);)33===v&&(g?throwError(e,"tag suffix cannot contain exclamation marks"):(r=e.input.slice(n-1,e.position+1),PATTERN_TAG_HANDLE.test(r)||throwError(e,"named tag handle cannot contain such characters"),g=!0,n=e.position+1)),v=e.input.charCodeAt(++e.position);d=e.input.slice(n,e.position),PATTERN_FLOW_INDICATORS.test(d)&&throwError(e,"tag suffix cannot contain flow indicator characters")}return d&&!PATTERN_TAG_URI.test(d)&&throwError(e,"tag name cannot contain such characters: "+d),m?e.tag=d:_hasOwnProperty$2.call(e.tagMap,r)?e.tag=e.tagMap[r]+d:"!"===r?e.tag="!"+d:"!!"===r?e.tag="tag:yaml.org,2002:"+d:throwError(e,'undeclared tag handle "'+r+'"'),1}}function readAnchorProperty(e){var n,r=e.input.charCodeAt(e.position);if(38===r){for(null!==e.anchor&&throwError(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),n=e.position;0!==r&&!is_WS_OR_EOL(r)&&!is_FLOW_INDICATOR(r);)r=e.input.charCodeAt(++e.position);return e.position===n&&throwError(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(n,e.position),1}}function readAlias(e){var n,r,d=e.input.charCodeAt(e.position);if(42===d){for(d=e.input.charCodeAt(++e.position),n=e.position;0!==d&&!is_WS_OR_EOL(d)&&!is_FLOW_INDICATOR(d);)d=e.input.charCodeAt(++e.position);return e.position===n&&throwError(e,"name of an alias node must contain at least one character"),r=e.input.slice(n,e.position),e.anchorMap.hasOwnProperty(r)||throwError(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],skipSeparationSpace(e,!0,-1),1}}function composeNode(e,n,r,d,m){var g,v,w,k,j,G,q,_t,_r=1,_s=!1,ga=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,g=v=w=CONTEXT_BLOCK_OUT===r||CONTEXT_BLOCK_IN===r,d&&skipSeparationSpace(e,!0,-1)&&(_s=!0,e.lineIndent>n?_r=1:e.lineIndent===n?_r=0:e.lineIndent<n&&(_r=-1)),1===_r)for(;readTagProperty(e)||readAnchorProperty(e);)skipSeparationSpace(e,!0,-1)?(_s=!0,w=g,e.lineIndent>n?_r=1:e.lineIndent===n?_r=0:e.lineIndent<n&&(_r=-1)):w=!1;if(w=w&&(_s||m),1!==_r&&CONTEXT_BLOCK_OUT!==r||(q=CONTEXT_FLOW_IN===r||CONTEXT_FLOW_OUT===r?n:n+1,_t=e.position-e.lineStart,1===_r?w&&(readBlockSequence(e,_t)||readBlockMapping(e,_t,q))||readFlowCollection(e,q)?ga=!0:(v&&readBlockScalar(e,q)||readSingleQuotedScalar(e,q)||readDoubleQuotedScalar(e,q)?ga=!0:readAlias(e)?(ga=!0,null===e.tag&&null===e.anchor||throwError(e,"alias node should not have any properties")):readPlainScalar(e,q,CONTEXT_FLOW_IN===r)&&(ga=!0,null===e.tag&&(e.tag="?")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===_r&&(ga=w&&readBlockSequence(e,_t))),null!==e.tag&&"!"!==e.tag)if("?"===e.tag){for(k=0,j=e.implicitTypes.length;k<j;k+=1)if((G=e.implicitTypes[k]).resolve(e.result)){e.result=G.construct(e.result),e.tag=G.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else _hasOwnProperty$2.call(e.typeMap,e.tag)?(G=e.typeMap[e.tag],null!==e.result&&G.kind!==e.kind&&throwError(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+G.kind+'", not "'+e.kind+'"'),G.resolve(e.result)?(e.result=G.construct(e.result),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):throwError(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")):throwError(e,"unknown tag !<"+e.tag+">");return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||ga}function readDocument(e){var n,r,d,m,g=e.position,v=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap={},e.anchorMap={};0!==(m=e.input.charCodeAt(e.position))&&(skipSeparationSpace(e,!0,-1),m=e.input.charCodeAt(e.position),!(0<e.lineIndent||37!==m));){for(v=!0,m=e.input.charCodeAt(++e.position),n=e.position;0!==m&&!is_WS_OR_EOL(m);)m=e.input.charCodeAt(++e.position);for(d=[],(r=e.input.slice(n,e.position)).length<1&&throwError(e,"directive name must not be less than one character in length");0!==m;){for(;is_WHITE_SPACE(m);)m=e.input.charCodeAt(++e.position);if(35===m){for(;0!==(m=e.input.charCodeAt(++e.position))&&!is_EOL(m););break}if(is_EOL(m))break;for(n=e.position;0!==m&&!is_WS_OR_EOL(m);)m=e.input.charCodeAt(++e.position);d.push(e.input.slice(n,e.position))}0!==m&&readLineBreak(e),_hasOwnProperty$2.call(directiveHandlers,r)?directiveHandlers[r](e,r,d):throwWarning(e,'unknown document directive "'+r+'"')}skipSeparationSpace(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,skipSeparationSpace(e,!0,-1)):v&&throwError(e,"directives end mark is expected"),composeNode(e,e.lineIndent-1,CONTEXT_BLOCK_OUT,!1,!0),skipSeparationSpace(e,!0,-1),e.checkLineBreaks&&PATTERN_NON_ASCII_LINE_BREAKS.test(e.input.slice(g,e.position))&&throwWarning(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&testDocumentSeparator(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,skipSeparationSpace(e,!0,-1)):e.position<e.length-1&&throwError(e,"end of the stream or a document separator is expected")}function loadDocuments(e,n){n=n||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var r=new State$1(e,n);for(r.input+="\0";32===r.input.charCodeAt(r.position);)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)readDocument(r);return r.documents}function loadAll(e,n,r){for(var d=loadDocuments(e,r),m=0,g=d.length;m<g;m+=1)n(d[m])}function load(e,n){var r=loadDocuments(e,n);if(0!==r.length){if(1===r.length)return r[0];throw new exception("expected a single document in the stream, but found more")}}function safeLoadAll(e,n,r){loadAll(e,n,common.extend({schema:default_safe},r))}function safeLoad(e,n){return load(e,common.extend({schema:default_safe},n))}var loadAll_1=loadAll,load_1=load,safeLoadAll_1=safeLoadAll,safeLoad_1=safeLoad,loader={loadAll:loadAll_1,load:load_1,safeLoadAll:safeLoadAll_1,safeLoad:safeLoad_1},_toString$2=Object.prototype.toString,_hasOwnProperty$3=Object.prototype.hasOwnProperty,CHAR_TAB=9,CHAR_LINE_FEED=10,CHAR_CARRIAGE_RETURN=13,CHAR_SPACE=32,CHAR_EXCLAMATION=33,CHAR_DOUBLE_QUOTE=34,CHAR_SHARP=35,CHAR_PERCENT=37,CHAR_AMPERSAND=38,CHAR_SINGLE_QUOTE=39,CHAR_ASTERISK=42,CHAR_COMMA=44,CHAR_MINUS=45,CHAR_COLON=58,CHAR_GREATER_THAN=62,CHAR_QUESTION=63,CHAR_COMMERCIAL_AT=64,CHAR_LEFT_SQUARE_BRACKET=91,CHAR_RIGHT_SQUARE_BRACKET=93,CHAR_GRAVE_ACCENT=96,CHAR_LEFT_CURLY_BRACKET=123,CHAR_VERTICAL_LINE=124,CHAR_RIGHT_CURLY_BRACKET=125,ESCAPE_SEQUENCES={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},DEPRECATED_BOOLEANS_SYNTAX=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function compileStyleMap(e,n){var r,d,m,g,v,w,k;if(null===n)return{};for(r={},m=0,g=(d=Object.keys(n)).length;m<g;m+=1)v=d[m],w=String(n[v]),"!!"===v.slice(0,2)&&(v="tag:yaml.org,2002:"+v.slice(2)),(k=e.compiledTypeMap[v])&&_hasOwnProperty$3.call(k.styleAliases,w)&&(w=k.styleAliases[w]),r[v]=w;return r}function encodeHex(e){var n,r,d=e.toString(16).toUpperCase();if(e<=255)n="x",r=2;else if(e<=65535)n="u",r=4;else{if(!(e<=4294967295))throw new exception("code point within a string may not be greater than 0xFFFFFFFF");n="U",r=8}return"\\"+n+common.repeat("0",r-d.length)+d}function State$2(e){this.schema=e.schema||default_full,this.indent=Math.max(1,e.indent||2),this.skipInvalid=e.skipInvalid||!1,this.flowLevel=common.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=compileStyleMap(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function indentString(e,n){for(var r,d=common.repeat(" ",n),m=0,g=-1,v="",w=e.length;m<w;)m=-1===(g=e.indexOf("\n",m))?(r=e.slice(m),w):(r=e.slice(m,g+1),g+1),r.length&&"\n"!==r&&(v+=d),v+=r;return v}function generateNextLine(e,n){return"\n"+common.repeat(" ",e.indent*n)}function testImplicitResolving(e,n){for(var r=0,d=e.implicitTypes.length;r<d;r+=1)if(e.implicitTypes[r].resolve(n))return 1}function StringBuilder(e){this.source=e,this.result="",this.checkpoint=0}function writeScalar(e,n,r,d){var m,g,v,w,k,j,G,q,_t,_r,_s,ga,_c,_u,_f,_h,ad,ey,sy,ly;if(0!==n.length)if(-1===DEPRECATED_BOOLEANS_SYNTAX.indexOf(n)){for(m=!0,g=n.length?n.charCodeAt(0):0,v=CHAR_SPACE===g||CHAR_SPACE===n.charCodeAt(n.length-1),CHAR_MINUS!==g&&CHAR_QUESTION!==g&&CHAR_COMMERCIAL_AT!==g&&CHAR_GRAVE_ACCENT!==g||(m=!1),k=w=v||-1<e.flowLevel&&e.flowLevel<=r?(v&&(m=!1),!1):!d,j=!0,G=new StringBuilder(n),q=!1,_r=_t=0,-1===(ga=e.lineWidth)&&(ga=9007199254740991),(_s=e.indent*r)<40?ga-=_s:ga=40,_u=0;_u<n.length;_u++){if(_c=n.charCodeAt(_u),m){if(simpleChar(_c))continue;m=!1}j&&_c===CHAR_SINGLE_QUOTE&&(j=!1),_f=ESCAPE_SEQUENCES[_c],_h=needsHexEscape(_c),(_f||_h)&&(_c!==CHAR_LINE_FEED&&_c!==CHAR_DOUBLE_QUOTE&&_c!==CHAR_SINGLE_QUOTE?k=w=!1:_c===CHAR_LINE_FEED&&(j=!(q=!0),0<_u&&n.charCodeAt(_u-1)===CHAR_SPACE&&(w=k=!1),w&&(ad=_u-_t,_t=_u,_r<ad&&(_r=ad))),_c!==CHAR_DOUBLE_QUOTE&&(j=!1),G.takeUpTo(_u),G.escapeChar())}if(m&&testImplicitResolving(e,n)&&(m=!1),ey="",(w||k)&&(sy=0,n.charCodeAt(n.length-1)===CHAR_LINE_FEED&&(sy+=1,n.charCodeAt(n.length-2)===CHAR_LINE_FEED&&(sy+=1)),0===sy?ey="-":2===sy&&(ey="+")),(k&&_r<ga||null!==e.tag)&&(w=!1),q||(k=!1),m)e.dump=n;else if(j)e.dump="'"+n+"'";else if(w)ly=fold(n,ga),e.dump=">"+ey+"\n"+indentString(ly,_s);else if(k)ey||(n=n.replace(/\n$/,"")),e.dump="|"+ey+"\n"+indentString(n,_s);else{if(!G)throw new Error("Failed to dump scalar value");G.finish(),e.dump='"'+G.result+'"'}}else e.dump="'"+n+"'";else e.dump="''"}function fold(e,n){var r,d="",m=0,g=e.length,v=/\n+$/.exec(e);for(v&&(g=v.index+1);m<g;)m=g<(r=e.indexOf("\n",m))||-1===r?(d&&(d+="\n\n"),d+=foldLine(e.slice(m,g),n),g):(d&&(d+="\n\n"),d+=foldLine(e.slice(m,r),n),r+1);return v&&"\n"!==v[0]&&(d+=v[0]),d}function foldLine(e,n){if(""===e)return e;for(var r,d,m=/[^\s] [^\s]/g,g="",v=0,w=0,k=m.exec(e);k;)n<(r=k.index)-w&&(g&&(g+="\n"),g+=e.slice(w,d=v!==w?v:r),w=d+1),v=r+1,k=m.exec(e);return g&&(g+="\n"),g+(w!==v&&e.length-w>n?e.slice(w,v)+"\n"+e.slice(v+1):e.slice(w))}function simpleChar(e){return CHAR_TAB!==e&&CHAR_LINE_FEED!==e&&CHAR_CARRIAGE_RETURN!==e&&CHAR_COMMA!==e&&CHAR_LEFT_SQUARE_BRACKET!==e&&CHAR_RIGHT_SQUARE_BRACKET!==e&&CHAR_LEFT_CURLY_BRACKET!==e&&CHAR_RIGHT_CURLY_BRACKET!==e&&CHAR_SHARP!==e&&CHAR_AMPERSAND!==e&&CHAR_ASTERISK!==e&&CHAR_EXCLAMATION!==e&&CHAR_VERTICAL_LINE!==e&&CHAR_GREATER_THAN!==e&&CHAR_SINGLE_QUOTE!==e&&CHAR_DOUBLE_QUOTE!==e&&CHAR_PERCENT!==e&&CHAR_COLON!==e&&!ESCAPE_SEQUENCES[e]&&!needsHexEscape(e)}function needsHexEscape(e){return!(32<=e&&e<=126||133===e||160<=e&&e<=55295||57344<=e&&e<=65533||65536<=e&&e<=1114111)}function writeFlowSequence(e,n,r){for(var d="",m=e.tag,g=0,v=r.length;g<v;g+=1)writeNode(e,n,r[g],!1,!1)&&(0!==g&&(d+=", "),d+=e.dump);e.tag=m,e.dump="["+d+"]"}function writeBlockSequence(e,n,r,d){for(var m="",g=e.tag,v=0,w=r.length;v<w;v+=1)writeNode(e,n+1,r[v],!0,!0)&&(d&&0===v||(m+=generateNextLine(e,n)),m+="- "+e.dump);e.tag=g,e.dump=m||"[]"}function writeFlowMapping(e,n,r){for(var d,m,g,v="",w=e.tag,k=Object.keys(r),j=0,G=k.length;j<G;j+=1)g="",0!==j&&(g+=", "),m=r[d=k[j]],writeNode(e,n,d,!1,!1)&&(1024<e.dump.length&&(g+="? "),g+=e.dump+": ",writeNode(e,n,m,!1,!1)&&(v+=g+=e.dump));e.tag=w,e.dump="{"+v+"}"}function writeBlockMapping(e,n,r,d){var m,g,v,w,k,j,G="",q=e.tag,_t=Object.keys(r);if(!0===e.sortKeys)_t.sort();else if("function"==typeof e.sortKeys)_t.sort(e.sortKeys);else if(e.sortKeys)throw new exception("sortKeys must be a boolean or a function");for(m=0,g=_t.length;m<g;m+=1)j="",d&&0===m||(j+=generateNextLine(e,n)),w=r[v=_t[m]],writeNode(e,n+1,v,!0,!0,!0)&&((k=null!==e.tag&&"?"!==e.tag||e.dump&&1024<e.dump.length)&&(e.dump&&CHAR_LINE_FEED===e.dump.charCodeAt(0)?j+="?":j+="? "),j+=e.dump,k&&(j+=generateNextLine(e,n)),writeNode(e,n+1,w,!0,k)&&(e.dump&&CHAR_LINE_FEED===e.dump.charCodeAt(0)?j+=":":j+=": ",G+=j+=e.dump));e.tag=q,e.dump=G||"{}"}function detectType(e,n,r){for(var d,m,g,v=r?e.explicitTypes:e.implicitTypes,w=0,k=v.length;w<k;w+=1)if(((m=v[w]).instanceOf||m.predicate)&&(!m.instanceOf||"object"==typeof n&&n instanceof m.instanceOf)&&(!m.predicate||m.predicate(n))){if(e.tag=r?m.tag:"?",m.represent){if(g=e.styleMap[m.tag]||m.defaultStyle,"[object Function]"===_toString$2.call(m.represent))d=m.represent(n,g);else{if(!_hasOwnProperty$3.call(m.represent,g))throw new exception("!<"+m.tag+'> tag resolver accepts not "'+g+'" style');d=m.represent[g](n,g)}e.dump=d}return 1}}function writeNode(e,n,r,d,m,g){e.tag=null,e.dump=r,detectType(e,r,!1)||detectType(e,r,!0);var v=_toString$2.call(e.dump);d=d&&(e.flowLevel<0||e.flowLevel>n);var w,k,j="[object Object]"===v||"[object Array]"===v;if(j&&(k=-1!==(w=e.duplicates.indexOf(r))),(null!==e.tag&&"?"!==e.tag||k||2!==e.indent&&0<n)&&(m=!1),k&&e.usedDuplicates[w])e.dump="*ref_"+w;else{if(j&&k&&!e.usedDuplicates[w]&&(e.usedDuplicates[w]=!0),"[object Object]"===v)d&&0!==Object.keys(e.dump).length?(writeBlockMapping(e,n,e.dump,m),k&&(e.dump="&ref_"+w+e.dump)):(writeFlowMapping(e,n,e.dump),k&&(e.dump="&ref_"+w+" "+e.dump));else if("[object Array]"===v)d&&0!==e.dump.length?(writeBlockSequence(e,n,e.dump,m),k&&(e.dump="&ref_"+w+e.dump)):(writeFlowSequence(e,n,e.dump),k&&(e.dump="&ref_"+w+" "+e.dump));else{if("[object String]"!==v){if(e.skipInvalid)return;throw new exception("unacceptable kind of an object to dump "+v)}"?"!==e.tag&&writeScalar(e,e.dump,n,g)}null!==e.tag&&"?"!==e.tag&&(e.dump="!<"+e.tag+"> "+e.dump)}return 1}function getDuplicateReferences(e,n){var r,d,m=[],g=[];for(inspectNode(e,m,g),r=0,d=g.length;r<d;r+=1)n.duplicates.push(m[g[r]]);n.usedDuplicates=new Array(d)}function inspectNode(e,n,r){var d,m,g;if(null!==e&&"object"==typeof e)if(-1!==(m=n.indexOf(e)))-1===r.indexOf(m)&&r.push(m);else if(n.push(e),Array.isArray(e))for(m=0,g=e.length;m<g;m+=1)inspectNode(e[m],n,r);else for(m=0,g=(d=Object.keys(e)).length;m<g;m+=1)inspectNode(e[d[m]],n,r)}function dump(e,n){var r=new State$2(n=n||{});return r.noRefs||getDuplicateReferences(e,r),writeNode(r,0,e,!0,!0)?r.dump+"\n":""}function safeDump(e,n){return dump(e,common.extend({schema:default_safe},n))}StringBuilder.prototype.takeUpTo=function(e){var n;if(e<this.checkpoint)throw(n=new Error("position should be > checkpoint")).position=e,n.checkpoint=this.checkpoint,n;return this.result+=this.source.slice(this.checkpoint,e),this.checkpoint=e,this},StringBuilder.prototype.escapeChar=function(){var e=this.source.charCodeAt(this.checkpoint),n=ESCAPE_SEQUENCES[e]||encodeHex(e);return this.result+=n,this.checkpoint+=1,this},StringBuilder.prototype.finish=function(){this.source.length>this.checkpoint&&this.takeUpTo(this.source.length)};var dump_1=dump,safeDump_1=safeDump,dumper={dump:dump_1,safeDump:safeDump_1};function deprecated(e){return function(){throw new Error("Function "+e+" is deprecated and cannot be used.")}}var Type$1=type,Schema$1=schema,FAILSAFE_SCHEMA=failsafe,JSON_SCHEMA=json,CORE_SCHEMA=core,DEFAULT_SAFE_SCHEMA=default_safe,DEFAULT_FULL_SCHEMA=default_full,load$1=loader.load,loadAll$1=loader.loadAll,safeLoad$1=loader.safeLoad,safeLoadAll$1=loader.safeLoadAll,dump$1=dumper.dump,safeDump$1=dumper.safeDump,YAMLException$1=exception,MINIMAL_SCHEMA=failsafe,SAFE_SCHEMA=default_safe,DEFAULT_SCHEMA=default_full,scan=deprecated("scan"),parse=deprecated("parse"),compose=deprecated("compose"),addConstructor=deprecated("addConstructor"),jsYaml={Type:Type$1,Schema:Schema$1,FAILSAFE_SCHEMA,JSON_SCHEMA,CORE_SCHEMA,DEFAULT_SAFE_SCHEMA,DEFAULT_FULL_SCHEMA,load:load$1,loadAll:loadAll$1,safeLoad:safeLoad$1,safeLoadAll:safeLoadAll$1,dump:dump$1,safeDump:safeDump$1,YAMLException:YAMLException$1,MINIMAL_SCHEMA,SAFE_SCHEMA,DEFAULT_SCHEMA,scan,parse,compose,addConstructor},jsYaml$1=jsYaml,SceneBundle=function(){function e(n,r){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;_classCallCheck(this,e),this.url=n,this.path=!r||isRelativeURL(r)&&!isRelativeURL(this.url)?pathForURL(this.url):r,this.path_for_parent=r||this.path,this.parent=d,this.container=null,this.parent&&(this.parent.container?this.container=this.parent.container:this.parent.isContainer()&&(this.container=this.parent))}return _createClass(e,[{key:"load",value:function(){return loadResource(this.url)}},{key:"resourceFor",value:function(n){return{url:this.urlFor(n),path:this.pathFor(n),type:this.typeFor(n)}}},{key:"urlFor",value:function(n){return isGlobal(n)?n:isRelativeURL(n)&&this.container?this.parent.urlFor(this.path_for_parent+n):addBaseURL(n,this.path)}},{key:"pathFor",value:function(n){return pathForURL(n)}},{key:"typeFor",value:function(n){return extensionForURL(n)}},{key:"isContainer",value:function(){return!1}}]),e}();function createSceneBundle(e,n,r){return new SceneBundle(e,n,r)}function isGlobal(e){return!(!e||"global."!==e.slice(0,7))}function parseResource(e){var n;try{n=jsYaml$1.safeLoad(e,{json:!0})}catch(r){throw r}return n}function loadResource(e){return new Promise(function(n,r){"string"==typeof e?Utils$1.io(e).then(function(d){try{var m=parseResource(d);n(m)}catch(g){r(g)}},r):(e=Object.assign({},e),n(e))})}function notNull(e){return null!=e}function wrap$1(e){return"("+e+")"}function maybeQuote(e){return"string"==typeof e?'"'+e+'"':e}function lookUp(e){return"$"===e[0]?"context['"+e.substring(1)+"']":"context.feature.properties['"+e+"']"}function nullValue(e,n){return" true "}function propertyEqual(e,n){return wrap$1(maybeQuote(n)+" === "+lookUp(e))}function propertyOr(e,n){return wrap$1(n.map(function(r){return propertyEqual(e,r)}).join(" || "))}function printNested(e,n){return wrap$1(e.filter(notNull).map(function(r){return wrap$1(r.join(" && "))}).join(" "+n+" "))}function any(e,n,r){return n&&0<n.length?printNested(n.map(function(d){return parseFilter(d,r)}),"||"):"true"}function all(e,n,r){return n&&0<n.length?printNested(n.map(function(d){return parseFilter(d,r)}),"&&"):"true"}function not(e,n,r){return"!"+wrap$1(parseFilter(n,r).join(" && "))}function none(e,n,r){return"!"+wrap$1(any(null,n,r))}function propertyMatchesBoolean(e,n){return wrap$1(lookUp(e)+(n?" != ":" == ")+"null")}function rangeMatch(e,n,r){var d,m,g=[],v=r&&"function"==typeof r.rangeTransform&&r.rangeTransform;return n.max&&(d=v?v(n.max):n.max,g.push(lookUp(e)+" < "+d)),n.min&&(m=v?m=v(n.min):n.min,g.push(lookUp(e)+" >= "+m)),wrap$1(g.join(" && "))}function parseFilter(e,n){var r=[];if("function"==typeof e)return[wrap$1(e.toString()+"(context)")];if(Array.isArray(e))return[any(null,e,n)];if(null==e)return["true"];for(var d=Object.keys(e),m=0;m<d.length;m++){var g=d[m],v=e[g],w=_typeof(v);if("string"===w||"number"===w)r.push(propertyEqual(g,v));else if("boolean"===w)r.push(propertyMatchesBoolean(g,v));else if("not"===g)r.push(not(g,v,n));else if("any"===g)r.push(any(g,v,n));else if("all"===g)r.push(all(g,v,n));else if("none"===g)r.push(none(g,v,n));else if(Array.isArray(v))r.push(propertyOr(g,v));else if("object"===w&&null!=v)(v.max||v.min)&&r.push(rangeMatch(g,v,n));else{if(null!=v)throw new Error("Unknown Query syntax: "+v);r.push(nullValue(g,v))}}return 0===d.length?["true"]:r}function filterToString(e){return wrap$1(e.join(" && "))}function buildFilter(e,n){return null==e?function(){return!0}:new Function("context","return "+filterToString(parseFilter(e,n))+";")}var reserved=["filter","draw","visible","enabled","data"],layer_cache={};function cacheKey(e){if(1<e.length){for(var n=e[0],r=1;r<e.length;r++)n+="/"+e[r];return n}return e[0]}function mergeTrees(e,n){for(var r,d=0,m=0;m<e.length;m++)e[m].length>d&&(d=e[m].length);if(0===d)return null;for(var g={visible:!0},v=0;v<d;v++)!function(w){r=[],e.forEach(function(k){k[w]&&k[w][n]&&-1===r.indexOf(k[w][n])&&r.push(k[w][n])}),0!==r.length&&(r.sort(function(k,j){return(k&&k.layer_name)>(j&&j.layer_name)?1:-1}),mergeObjects.apply(void 0,[g].concat(_toConsumableArray(r))),delete g.layer_name)}(v);return!1===g.visible?null:g}var blacklist=["any","all","not","none"],Layer=function(){function e(n){var r,d=n.layer,m=n.name,g=n.parent,v=n.draw,w=n.visible,k=n.enabled,j=n.filter,G=n.styles;if(_classCallCheck(this,e),this.id=e.id++,this.config_data=d.data,this.parent=g,this.name=m,this.full_name=this.parent?this.parent.full_name+":"+this.name:this.name,this.draw=v,this.filter=j,this.styles=G,this.is_built=!1,k=void 0===k?w:k,this.enabled=(!this.parent||!1!==this.parent.visible)&&!1!==k,this.draw)for(var q in this.draw)this.draw[q]=null==this.draw[q]?{}:this.draw[q],"object"!==_typeof(this.draw[q])?(r="Draw group '".concat(q,"' for layer ").concat(this.full_name," is invalid, must be an object, "),log("warn",r+="but was set to `".concat(q,": ").concat(this.draw[q],"` instead")),delete this.draw[q]):this.draw[q].layer_name=this.full_name}return _createClass(e,[{key:"build",value:function(){log("trace","Building layer '".concat(this.full_name,"'")),this.buildFilter(),this.buildDraw(),this.is_built=!0}},{key:"buildDraw",value:function(){this.draw=Utils$1.stringsToFunctions(this.draw,StyleParser.wrapFunction),this.calculatedDraw=calculateDraw(this)}},{key:"buildFilter",value:function(){this.filter_original=this.filter,this.filter=Utils$1.stringsToFunctions(this.filter,StyleParser.wrapFunction);var n=_typeof(this.filter);if(null==this.filter||"object"===n||"function"===n)try{this.buildZooms(),this.buildPropMatches(),this.filter=null!=this.filter&&("function"==typeof this.filter||0<Object.keys(this.filter).length)?buildFilter(this.filter,FilterOptions):null}catch(m){var r="Filter for layer ".concat(this.full_name," is invalid, `filter: ").concat(JSON.stringify(this.filter),"` ");log("warn",r+="failed with error '".concat(m.message,"', stack trace: ").concat(m.stack))}else{var d="Filter for layer ".concat(this.full_name," is invalid, filter value must be an object or function, ");log("warn",d+="but was set to `filter: ".concat(this.filter,"` instead"))}}},{key:"buildZooms",value:function(){var n=this.filter&&this.filter.$zoom,r=_typeof(n);if(null!=n&&"function"!==r){if(this.zooms={},"number"===r)this.zooms[n]=!0;else if(Array.isArray(n))for(var d=0;d<n.length;d++)this.zooms[n[d]]=!0;else if("object"===r&&(null!=n.min||null!=n.max))for(var g=n.max||25,v=n.min||0;v<g;v++)this.zooms[v]=!0;delete this.filter.$zoom}}},{key:"buildPropMatches",value:function(){var n=this;this.filter&&!Array.isArray(this.filter)&&"function"!=typeof this.filter&&Object.keys(this.filter).forEach(function(r){if(-1===blacklist.indexOf(r)){var d=n.filter[r],m=_typeof(d),g=Array.isArray(d);if(!g&&"string"!==m&&"number"!==m)return;"$"===r[0]?(n.context_prop_matches=n.context_prop_matches||[],n.context_prop_matches.push([r.substring(1),g?d:[d]])):(n.feature_prop_matches=n.feature_prop_matches||[],n.feature_prop_matches.push([r,g?d:[d]])),delete n.filter[r]}})}},{key:"doPropMatches",value:function(n){if(this.feature_prop_matches)for(var r=0;r<this.feature_prop_matches.length;r++){var d=this.feature_prop_matches[r],m=n.feature.properties[d[0]];if(null==m||-1===d[1].indexOf(m))return!1}if(this.context_prop_matches)for(var g=0;g<this.context_prop_matches.length;g++){var v=this.context_prop_matches[g],w=n[v[0]];if(null==w||-1===v[1].indexOf(w))return!1}return!0}},{key:"doesMatch",value:function(n){if(!this.enabled||(this.is_built||this.build(),null!=this.zooms&&!this.zooms[n.zoom])||!this.doPropMatches(n))return!1;var r;if(this.filter instanceof Function)try{r=this.filter(n)}catch(m){var d="Filter for this ".concat(this.full_name,": `filter: ").concat(this.filter_original,"` ");log("error",d+="failed with error '".concat(m.message,"', stack trace: ").concat(m.stack),n.feature)}else r=null==this.filter;return!!r&&(this.children_to_parse&&(parseLayerChildren(this,this.children_to_parse,this.styles),delete this.children_to_parse),!0)}}]),e}();Layer.id=0;var LayerLeaf=function(){_inherits(n,Layer);var e=_createSuper(n);function n(r){var d;return _classCallCheck(this,n),(d=e.call(this,r)).is_leaf=!0,d}return n}(),LayerTree=function(){_inherits(n,Layer);var e=_createSuper(n);function n(r){var d;return _classCallCheck(this,n),(d=e.call(this,r)).is_tree=!0,d.layers=r.layers||[],d}return _createClass(n,[{key:"addLayer",value:function(r){this.layers.push(r)}},{key:"buildDrawGroups",value:function(r){var d=[],m=[];if(matchFeature(r,[this],d,m),0<d.length){var g=cacheKey(m);if(void 0===layer_cache[g]){for(var v=d.map(function(_s){return _s&&!1!==_s.visible&&_s.calculatedDraw}),w={},k=0;k<v.length;k++){var j=v[k];if(j)for(var G=0;G<j.length;G++){var q=j[G];for(var _t in q)w[_t]=!0}}for(var _r in w)layer_cache[g]=layer_cache[g]||{},layer_cache[g][_r]=mergeTrees(v,_r),layer_cache[g][_r]?(layer_cache[g][_r].key=g+"/"+_r,layer_cache[g][_r].layers=d.map(function(_s){return _s&&_s.full_name}),layer_cache[g][_r].group=_r):delete layer_cache[g][_r];layer_cache[g]&&0===Object.keys(layer_cache[g]).length&&(layer_cache[g]=null)}return layer_cache[g]}}}]),n}(),FilterOptions={rangeTransform:function(e){return"string"==typeof e&&"px2"===e.trim().slice(-3)?"".concat(parseFloat(e)," * context.meters_per_pixel_sq"):e}},SceneLoader;function isReserved(e){return-1<reserved.indexOf(e)}function isEmpty(e){return 0===Object.keys(e).length}function groupProps(e){var n={},r={};for(var d in e)isReserved(d)?n[d]=e[d]:r[d]=e[d];return[n,r]}function calculateDraw(e){var r=[];return e.parent&&r.push.apply(r,_toConsumableArray(e.parent.calculatedDraw||[])),r.push(e.draw),r}function parseLayerNode(e,n,r,d){var m={name:e,layer:n=n??{},parent:r,styles:d},g=_slicedToArray(groupProps(n),2),v=g[0],w=g[1],k=isEmpty(w),G=new(k&&null!=r?LayerLeaf:LayerTree)(Object.assign(m,v));return G.enabled&&(r&&r.addLayer(G),G.children_to_parse=k?null:w),G}function parseLayerChildren(e,n,r){for(var d in n){var m,g=n[d];"object"!==_typeof(g)||Array.isArray(g)?(m="Layer value must be an object: cannot create layer '".concat(d,": ").concat(JSON.stringify(g),"'"),m+=", under parent layer '".concat(e.full_name,"'."),r[e.name]&&(m+=" The parent name '".concat(e.name,"' is also the name of a style, did you mean to create a 'draw' group"),e.parent&&(m+=" under '".concat(e.parent.name,"'")),m+=" instead?"),log("warn",m)):parseLayerNode(d,g,e,r)}}function parseLayers(e,n){layer_cache={};var r={};for(var d in e){var m=e[d];m&&(r[d]=parseLayerNode(d,m,null,n))}return r}function matchFeature(e,n,r,d){var m=!1;if(0!==n.length){for(var g=0;g<n.length;g++){var v=n[g];v.is_leaf?v.doesMatch(e)&&(m=!0,r.push(v),d.push(v.id)):v.is_tree&&v.doesMatch(e)&&(m=!0,matchFeature(e,v.layers,r,d)||(r.push(v),d.push(v.id)))}return m}}var GLOBAL_PROP_RGX=/^global\.(.+)$/,SceneLoader$1=SceneLoader={loadScene:function(e,n){var r=this,d=1<arguments.length&&void 0!==n?n:{},v=[];return this.loadSceneRecursive({url:e,path:d.path,type:d.type},null,v).then(function(w){return r.finalize(w)}).then(function(w){var k=w.config,j=w.bundle;return k?(0<v.length&&v.forEach(function(G){var q="Failed to import scene: ".concat(G.url);log("error",q,G),r.trigger("error",{type:"scene_import",message:q,error:G,url:G.url})}),{config:k,bundle:j}):Promise.reject(v[0])})},loadSceneRecursive:function(e,n,r){var d=this,m=e.url,g=e.path,v=e.type,w=2<arguments.length&&void 0!==r?r:[];if(!m)return Promise.resolve({});var k=createSceneBundle(m,g,n,v);return k.load().then(function(j){if(null==j.import)return d.normalize(j,k),{config:j,bundle:k};Array.isArray(j.import)||(j.import=[j.import]);var G=[];return j.import.forEach(function(q){"object"===_typeof(q)&&(q=createObjectURL(new Blob([JSON.stringify(q)]))),G.push(k.resourceFor(q))}),delete j.import,Promise.all(G.map(function(q){return d.loadSceneRecursive(q,k,w)})).then(function(q){q.forEach(function(_r){return d.normalize(_r.config,_r.bundle)});var _t=q.map(function(_r){return _r.config});return j=mergeObjects.apply(void 0,_toConsumableArray(_t).concat([j])),d.normalize(j,k),{config:j,bundle:k}})}).catch(function(j){return j.url=m,w.push(j),{}})},normalize:function(e,n){return this.normalizeDataSources(e,n),this.normalizeFonts(e,n),this.normalizeTextures(e,n),this.hoistTextures(e,n),{config:e,bundle:n}},normalizeDataSources:function(e,n){for(var r in e.sources=e.sources||{},e.sources)this.normalizeDataSource(e.sources[r],n);return e},normalizeDataSource:function(e,n){if(e.url&&(e.url=n.urlFor(e.url)),e.scripts)for(var r in Array.isArray(e.scripts)&&(e.scripts=e.scripts.reduce(function(d,m){return d[m]=m,d},{})),e.scripts)e.scripts[r]=n.urlFor(e.scripts[r]);return e},normalizeFonts:function(e,n){for(var r in e.fonts=e.fonts||{},e.fonts){var d;Array.isArray(e.fonts[r])?e.fonts[r].forEach(function(m){m.url=m.url&&n.urlFor(m.url)}):(d=e.fonts[r]).url=d.url&&n.urlFor(d.url)}return e},normalizeTextures:function(e,n){if(e.textures=e.textures||{},e.textures)for(var r in e.textures){var d=e.textures[r];d.url&&(d.url=n.urlFor(d.url))}},hoistTextures:function(e,n){var r=this;if(e.styles)for(var d in e.styles)!function(q){var _t=e.styles[q],_r=_t.texture;"string"!=typeof _r||e.textures[_r]||(_t.texture=r.hoistTexture(_r,e,n)),_t.material&&["emission","ambient","diffuse","specular","normal"].forEach(function(_s){var ga=null!=_t.material[_s]&&_t.material[_s].texture;"string"!=typeof ga||e.textures[ga]||(_t.material[_s].texture=r.hoistTexture(ga,e,n))})}(d);if(this.hoistStyleShaderUniformTextures(e,n,{include_globals:!1}),e.layers)for(var m=[e.layers];0<m.length;){var g=m.pop();if("object"===_typeof(g)&&!Array.isArray(g))for(var v in g)if("draw"===v){var w,k,j=g[v];for(var G in j)j[G].texture&&("string"!=typeof(w=j[G].texture)||e.textures[w]||(j[G].texture=this.hoistTexture(w,e,n))),j[G].outline&&j[G].outline.texture&&("string"!=typeof(k=j[G].outline.texture)||e.textures[k]||(j[G].outline.texture=this.hoistTexture(k,e,n)))}else{if(isReserved(v))continue;m.push(g[v])}}},hoistStyleShaderUniformTextures:function(e,n,r){var d=this,m=r.include_globals;if(e.styles)for(var g in e.styles){var v=e.styles[g];v.shaders&&v.shaders.uniforms&&GLSL.parseUniforms(v.shaders.uniforms).forEach(function(w){var j=w.value,G=w.key,q=w.uniforms;"sampler2D"!==w.type||"string"!=typeof j||e.textures[j]||!m&&isGlobal(j)||(q[G]=d.hoistTexture(j,e,n))})}},hoistTexture:function(e,n,r){var d=isGlobal(e),m=d?e:r.urlFor(e),g=d?"texture-".concat(m):m;return n.textures[g]={url:m},g},applyGlobalProperties:function(e){if(!e.global||0===Object.keys(e.global).length)return e;var n=flattenProperties(e.global);return function r(d){if("string"==typeof d){var m=function w(k,j,G){var q=2<arguments.length&&void 0!==G?G:[];if(-1<q.indexOf(k))log({level:"warn",once:!0},"Global properties: cyclical reference detected",q);else{q.push(k);var _t=GLOBAL_PROP_RGX.exec(k);if(_t){var _r=_t[1];if(_r){var _s=j[_r];if(void 0!==_s)return"string"==typeof _s&&GLOBAL_PROP_RGX.exec(_s)?w(_s,j,q):_s;log({level:"warn",once:!0},"Global property not found: "+k)}else log({level:"warn",once:!0},"Invalid global property reference: "+k)}}}(d,n);void 0!==m&&(d=m)}else if(Array.isArray(d))for(var g=0;g<d.length;g++)d[g]=r(d[g]);else if("object"===_typeof(d))for(var v in d)d[v]=r(d[v]);return d}(e)},finalize:function(e){var n=e.config,r=e.bundle;return n?(n.global=n.global||{},n.scene=n.scene||{},n.cameras=n.cameras||{},n.lights=n.lights||{},n.styles=n.styles||{},n.layers=n.layers||{},n.camera&&(n.cameras.default=n.camera),0===Object.keys(n.cameras).length&&(n.cameras.default={}),0!==Object.keys(n.lights).length&&!Object.keys(n.lights).every(function(d){return!1===n.lights[d].visible})||(n.lights.default_light={type:"directional"}),{config:n,bundle:r}):{}}};function flattenProperties(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:".",r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},d=(d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)?d+n:"";for(var m in e){var g=d+m,v=e[m];"object"!==_typeof(r[g]=v)||Array.isArray(v)||flattenProperties(v,n,g,r)}return r}subscribeMixin(SceneLoader);var TilePyramid=function(){function e(){_classCallCheck(this,e),this.coords={},this.max_proxy_descendant_depth=6,this.max_proxy_ancestor_depth=10}return _createClass(e,[{key:"sourceTiles",value:function(n,r){return this.coords[n.key]&&this.coords[n.key].sources&&this.coords[n.key].sources[r.name]}},{key:"addTile",value:function(n){var r=n.coords.key,d=this.coords[r];(d=d||(this.coords[r]={descendants:0})).sources||(d.sources={}),d.sources[n.source.name]||(d.sources[n.source.name]={});for(var m=(d.sources[n.source.name][n.style_zoom]=n).coords.z-1;0<=m;m--){var g=Tile.coordinateAtZoom(n.coords,m);this.coords[g.key]||(this.coords[g.key]={descendants:0}),this.coords[g.key].descendants++}}},{key:"removeTile",value:function(n){var r=this.sourceTiles(n.coords,n.source),d=n.coords.key;r&&(delete r[n.style_zoom],0===Object.keys(r).length&&(delete this.coords[d].sources[n.source.name],0===Object.keys(this.coords[d].sources).length&&(delete this.coords[d].sources,0===this.coords[d].descendants&&delete this.coords[d])));for(var m=n.coords.z-1;0<=m;m--){var g=Tile.coordinateAtZoom(n.coords,m);this.coords[g.key]&&0<this.coords[g.key].descendants&&(this.coords[g.key].descendants--,0!==this.coords[g.key].descendants||this.coords[g.key].sources||delete this.coords[g.key])}}},{key:"getAncestor",value:function(n,r){var d=n.coords,m=n.style_zoom,g=n.source,v=1<arguments.length&&void 0!==r?r:1;if(!(v>this.max_proxy_ancestor_depth)){if(m>g.max_coord_zoom){var w=this.sourceTiles(d,g);if(w)for(var k=m-1;k>=g.max_coord_zoom;k--)if(w[k]&&w[k].loaded)return w[k];m=g.max_coord_zoom}m--;var j=Tile.coordinateAtZoom(d,d.z-1),G=this.sourceTiles(j,g);return G&&G[m]&&G[m].loaded?G[m]:0<j.z?this.getAncestor({coords:j,style_zoom:m,source:g},v+1):void 0}}},{key:"getDescendants",value:function(n,r){var d=n.coords,m=n.style_zoom,g=n.source,v=1<arguments.length&&void 0!==r?r:1,w=[];if(m>=g.max_coord_zoom){var k=this.sourceTiles(d,g);if(k)for(var j=Math.max(Geo$1.default_view_max_zoom,m+this.max_proxy_descendant_depth),G=m+1;G<=j;G++)if(k[G]&&k[G].loaded)return w.push(k[G]),w;return w}if(this.coords[d.key]&&0<this.coords[d.key].descendants){m++;for(var q=Tile.childrenForCoordinate(d),_t=0;_t<q.length;_t++){var _r=q[_t],_s=this.sourceTiles(_r,g);_s&&_s[m]&&_s[m].loaded?w.push(_s[m]):v<=this.max_proxy_descendant_depth&&_r.z<=g.max_coord_zoom&&w.push.apply(w,_toConsumableArray(this.getDescendants({coords:_r,source:g,style_zoom:m},v+1)))}}return w}}]),e}(),LabelMainPass=function(){function e(n,r,d,m){_classCallCheck(this,e),Object.assign(this,n),this.placed=null,this._tile=m;var g=Geo$1.unitsPerMeter(m.coords.z)*Math.pow(2,d-m.style_zoom);this.layout=Object.assign({},n.layout),this.layout.repeat_scale=.75,this.layout.repeat_distance=this.layout.repeat_distance||0,this.layout.repeat_distance/=g,this.position=Geo$1.tileSpaceToMeters(this.position,m.coords.z,m.min),this._worldToScreen=r,this._screenSpaceBoundingBox=void 0,this._boundingCircles=void 0}return _createClass(e,[{key:"getTile",value:function(){return this._tile}},{key:"isFlat",value:function(){return this.is_flat}},{key:"getScreenSpaceBoundingBox",value:function(){var n,r,d;return this._screenSpaceBoundingBox||((n=this._worldToScreen(this.position,!0))[0]+=this.offset[0],n[1]+=this.offset[1],this._screenSpaceBoundingBox={left:n[0]-(r=this.size[0]/2+this.layout.buffer[0]),bottom:n[1]+(d=this.size[1]/2+this.layout.buffer[1]),right:n[0]+r,top:n[1]-d}),this._screenSpaceBoundingBox}},{key:"getBoundingCircles",value:function(){return this._boundingCircles||(this._boundingCircles="point"===this.type?this._convertSidesToScreenSpaceCircles():this._convertCirclesToScreenSpace()),this._boundingCircles}},{key:"_convertSidesToScreenSpaceCircles",value:function(){var n=this._tile.coords.z,r=this._tile.min,d=Geo$1.tileSpaceToMeters([this.sides[0],this.sides[1]],n,r),m=Geo$1.tileSpaceToMeters([this.sides[2],this.sides[3]],n,r),g=_slicedToArray(this._worldToScreen(d,!0),2),v=g[0],w=g[1],k=_slicedToArray(this._worldToScreen(m,!0),2);return encircleLine(v,w,k[0],k[1],this.size[1]/2+this.layout.buffer[1])}},{key:"_convertCirclesToScreenSpace",value:function(){for(var n=[],r=this.circles,d=this._tile.coords.z,m=this._tile.min,g=0;g<r.length-2;g+=3){var v=Geo$1.tileSpaceToMeters([r[g],-r[g+1]],d,m),w=r[g+2]/Geo$1.unitsPerMeter(d),k=[v[0]+w,v[1]],j=this._worldToScreen(v,!0),G=this._worldToScreen(k,!0),q=MathUtils$1.getLineLength(j[0],j[1],G[0],G[1]);n.push(j[0],j[1],q)}return n}}]),e}(),labelsMainPass={mainThreadLabelCollisionPass},visible={},prev_visible={},IS_LITTLE_ENDIAN=120===new Uint8Array(new Uint32Array([305419896]).buffer)[0];function _createContainer(e,n,r,d,m){var g=e.container,w=g.linked,k=e.ranges;return{label:new LabelMainPass(g.label,r,d,m),linked:w,ranges:k,mesh:n}}function mainThreadLabelCollisionPass(e,n,r,d,m,g){prev_visible=visible,visible={};var v={},w={},k=[],j=r.worldToScreen.bind(r),G=new TextMeshHelper(g);for(var q in e.forEach(function(_c){for(var _u in _c.meshes)_c.meshes[_u].forEach(function(_f){if(_f.labels){for(var _h in G.trackMesh(_f),_f.labels["non-collision"]){var ad=_createContainer(_f.labels["non-collision"][_h],_f,j,n,_c);ad.label.text_data&&G.insertLabel(ad,_c)}for(var ey in _f.labels.collision){var sy;v[ey]||(sy=_createContainer(_f.labels.collision[ey],_f,j,n,_c),v[ey]=sy.label,w[ey]=sy)}}})}),w){var _t=w[q];_t.linked&&(_t.linked=w[_t.linked]),k.push(_t)}var _r=r.getViewport();return Collision.startTile("main",{apply_repeat_groups:!0,return_hidden:!0,grid_index:new GridIndex(_r.width,_r.height,30)}),Collision.addStyle("main","main"),Collision.collide(k,"main","main").then(function(_c){return _c.forEach(function(_u){var _f,_h,ad,ey,sy,ly,dy=_u.mesh,vy=_u.label.getTile();dy.valid&&(!(_f=0)!==_u.show||d&&_u.label.breach&&!prev_visible[_u.label.id]||(_f=1),_f&&(visible[_u.label.id]=!0),_u.label.text_data&&G.insertLabel(_u,vy),_h=dy.vertex_layout.offset.a_shape,ad=dy.vertex_layout.stride,sy=(ey=dy.vertex_layout.attribs.find(function(Ay){return"a_shape"===Ay.name})).byte_size/ey.size,_h+=3*sy,ly=!0,_u.ranges.forEach(function(Ay){if(ly){for(var Sy=0;Sy<Ay[1];Sy++){if(dy.vertex_data[Ay[0]+Sy*ad+_h]===_f)return void(ly=!1);dy.vertex_data[Ay[0]+Sy*ad+_h]=_f}G.trackMesh(dy)}}))}),G.createTextures(m).then(function(){return G.updateMeshes()})}).then(function(_c){_c.forEach(function(_u){return _u.valid&&_u.upload()}),e.forEach(function(_u){_u.labeled=!0}),k=[],w={},v={}})}var TextMeshHelper=function(){function e(n){_classCallCheck(this,e),this.textureManager=getTextureManager(n),this.tiles={},this.meshes=[],this.containers=[]}return _createClass(e,[{key:"insertLabel",value:function(n,r){var d=n.label.text_data,m=d.text_settings_key,g=d.text,v=d.text_info;this.containers.push(n);var w=this._ensureTextSection(r,m);w[g]?n.label.text_data.text_info=w[g]:w[g]=v}},{key:"trackMesh",value:function(n){-1===this.meshes.indexOf(n)&&this.meshes.push(n)}},{key:"updateMeshes",value:function(){var n=this;return this.containers.forEach(function(r){var d,m,g,v,w,j,G,q;r.label.text_data&&(d=r.label.getTile(),(m=r.mesh).valid?(g=r.label.type,v=r.label.text_data.text_info,n.tiles[d.id]&&n.tiles[d.id].textures&&(m.uniforms.u_texture=w=n.tiles[d.id].textures[0],-1===m.textures.indexOf(w)&&m.textures.push(w),"point"===g||"straight"===g?n.setTexCoords(m,r,"point"===g?v.align[r.label.align].texcoords:v.texcoords[g].texcoord):"curved"===g&&(j=v.segments.length,G=v.texcoords_stroke,q=v.texcoords.curved,n.setTexCoords(m,r,function(_r){return _r<j?G[_r]:q[_r-j].texcoord})))):n.tiles[d.id]&&n.tiles[d.id].textures&&n.textureManager.release(n.tiles[d.id].textures[0]))}),this.meshes}},{key:"setTexCoords",value:function(n,r,d){var m,g,v,w,k,j,G=d instanceof Function;G||(g=(m=_slicedToArray(d,4))[0],j=[[g,v=m[1]],[w=m[2],v],[w,k=m[3]],[g,k]]);var q=n.vertex_layout.stride,_t=new DataView(n.vertex_data.buffer),_r=n.vertex_layout.offset.a_texcoord;r.ranges.forEach(function(_s,ga){var _c,_u,_f,_h,ad,ey=_slicedToArray(_s,3),sy=ey[0],ly=ey[1],dy=ey[2];G&&(_u=(_c=_slicedToArray(d(ga),4))[0],j=[[_u,_f=_c[1]],[_h=_c[2],_f],[_h,ad=_c[3]],[_u,ad]]);for(var vy=dy?ly/2:0;vy<ly;vy++){var Ay=j[vy%4],Sy=sy+vy*q;_t.setUint16(Sy+_r,Ay[0]*texcoord_normalize,IS_LITTLE_ENDIAN),_t.setUint16(Sy+_r+2,Ay[1]*texcoord_normalize,IS_LITTLE_ENDIAN)}})}},{key:"createTextures",value:function(n){var r=this;return Promise.all(Object.values(this.tiles).map(function(d){var m=d.id;return r._createTexturesForTile(n,d.texts,"labels-".concat(d.key,"-").concat(m),m,r.textureManager).then(function(w){w.length&&(w.forEach(function(k){r.textureManager.retain(k),1<r.textureManager.getRetainCount(k)&&r.textureManager.release(k)}),r.tiles[m].textures=w)})}))}},{key:"_createTexturesForTile",value:function(n,r,d,m,g){var v=new CanvasText,w=v.setTextureTextPositions(r);return v.rasterize(r,w,m,d,n,g)}},{key:"_ensureTile",value:function(n){var r=n.id;return this.tiles[r]||(this.tiles[r]={id:r,key:n.key,texts:{}}),this.tiles[r]}},{key:"_ensureTextSection",value:function(n,r){var d=this._ensureTile(n).texts;return d[r]||(d[r]={}),d[r]}}]),e}(),TILE_VISIBILITY_COUNTER_THRESHOLD=30,TileManager=function(){function e(n){var r=this,d=n.scene,m=n.view;_classCallCheck(this,e),this._scene=d,this._view=m,this._visible_tiles={},this._pyramid=new TilePyramid,this._visible_coords={},this._building_tiles=null,this._renderable_tiles=[],this._active_styles=[],this._tile_visibility_counters={},this._update_labels_on_queue_check=!1,this._all_visible_tiles_are_cached=!1,this._debouncedUpdateLabels=debounce(this._updateLabels.bind(this),100,200),this._main_thread_target=["TileManager",this._scene.id].join("_"),WorkerBroker.addTarget(this._main_thread_target,this),this._keepCoordinate=this._keepCoordinate.bind(this),this._removeTilesFilter=this._removeTilesFilter.bind(this),this._removeCachedTilesFilter=this._removeCachedTilesFilter.bind(this),this._is_labeled=!1,this._tile_cache=new H.util.Cache(getMaxTileCacheSize(),function(g,v,w){r._visible_tiles[g]&&r._visible_tiles[g]===v||v.destroy()})}return _createClass(e,[{key:"destroy",value:function(){this._tile_cache.removeAll(),this.forEachVisibleTile(function(n){return n.destroy()}),this._visible_tiles={},this._pyramid=null,this._visible_coords={},this._scene=null,this._view=null}},{key:"keepTile",value:function(n){this._visible_tiles[n.key]=n,this._pyramid.addTile(n)}},{key:"hasTile",value:function(n){return void 0!==this._visible_tiles[n]}},{key:"_forgetTile",value:function(n){var r,d;this.hasTile(n)&&(this._pyramid.removeTile(r=this._visible_tiles[n]),delete this._visible_tiles[n],r.loaded?this._tile_cache.add(r.key,r,getTileByteLength(r)):(d=this._tile_cache.get(r.key))?this._tile_cache.drop(d.key):r.destroy(),this._tileBuildStop(r))}},{key:"removeTile",value:function(n){this._forgetTile(n),this._scene.requestRedraw()}},{key:"forEachVisibleTile",value:function(n){for(var r in this._visible_tiles)n(this._visible_tiles[r])}},{key:"removeTiles",value:function(n){for(var r in this._visible_tiles)n(this._visible_tiles[r])&&this.removeTile(r)}},{key:"removeCachedTiles",value:function(n){var r=this;this._tile_cache.forEach(function(d,m){n(m)&&r._tile_cache.drop(d)})}},{key:"updateTilesForView",value:function(n){var r=0<arguments.length&&void 0!==n&&n;this._visible_coords={};for(var d=this._view.findVisibleTileCoordinates(),m=0;m<d.length;m++){var g=d[m];this._visible_coords[g.key]=g}this.updateTileStates(r)}},{key:"updateTileStates",value:function(n){var r=0<arguments.length&&void 0!==n&&n;for(var d in this._all_visible_tiles_are_cached=!0,this._visible_coords)this._keepCoordinate(d,r);this._all_visible_tiles_are_cached&&(this._is_labeled=!1,this._debouncedUpdateLabels()),this._tile_cache.removeAll(this._removeCachedTilesFilter),this._updateProxyTiles(),this.removeTiles(this._removeTilesFilter),this._updateRenderableTiles(),this._updateActiveStyles()}},{key:"_removeTilesFilter",value:function(n){if(n.style_zoom===this._view.lookAtManipulator.getLookAtData().tile_level){if(this._visible_coords[n.coords.key])return!1;for(var r in this._visible_coords)if(Tile.isDescendant(n.coords,this._visible_coords[r]))return!1}return!n.isProxy()}},{key:"_updateLabels",value:function(){var n,r=this;this._building_tiles&&0!==Object.keys(this._building_tiles).length||(CanvasText.pruneTextCache(),n=this._renderable_tiles.sort(compareTileCoords),labelsMainPass.mainThreadLabelCollisionPass(n,roundPrecision(this._view.lookAtManipulator.getLookAtData().zoom,2),this._view.lookAtManipulator,this.isLoadingVisibleTiles(),this._scene.gl,this._scene.id).then(function(){r._is_labeled=!Task.hasPendingTasks(),r._scene&&r._scene.immediateRedraw(),r._update_labels_on_queue_check=!1}))}},{key:"_updateProxyTiles",value:function(){var n,r=this,d=this._view.lookAtManipulator.getZoomDirection();0!==d&&(n=!1,this.forEachVisibleTile(function(m){var g;if(m.setProxyFor(null),1===d)m.built||(g=r._pyramid.getAncestor(m))&&(g.setProxyFor(m),n=!0);else if(-1===d&&!m.built)for(var v=r._pyramid.getDescendants(m),w=0;w<v.length;w++)v[w].setProxyFor(m),n=!0}),n||this._view.lookAtManipulator.resetZoomDirection())}},{key:"getRenderableTiles",value:function(){return this._renderable_tiles}},{key:"_updateRenderableTiles",value:function(){for(var n in this._renderable_tiles=[],this._visible_tiles){var r=this._visible_tiles[n],d=this._tile_cache.get(n);r.loaded?(this._renderable_tiles.push(r),d&&d!==r&&this._tile_cache.drop(n)):d&&(d.generation===this._scene.generation?this._renderable_tiles.push(d):this._tile_cache.drop(n))}return this._renderable_tiles}},{key:"getWorkerForTile",value:function(n,r){return r.has_volatile_data?this._scene.getWorkers(WorkerType.FAKE)[0]:r.tiled?this._scene.getWorkers(WorkerType.NATIVE)[Math.abs(n.x+n.y+n.z)%this._scene.num_workers]:this._scene.getWorkers(WorkerType.NATIVE)[r.id%this._scene.num_workers]}},{key:"getActiveStyles",value:function(){return this._active_styles}},{key:"_updateActiveStyles",value:function(){for(var n=this._renderable_tiles,r={},d=0;d<n.length;d++)Object.keys(n[d].meshes).forEach(function(g){return r[g]=!0});return this._active_styles=Object.keys(r),this._active_styles}},{key:"isLoadingVisibleTiles",value:function(){var n=!1;for(var r in this._visible_tiles)if(!this._visible_tiles[r].built){n=!0;break}return n}},{key:"updateTilesVisibilityCounters",value:function(){var n=this;Object.keys(this._visible_coords).forEach(function(m){m in n._tile_visibility_counters||(n._tile_visibility_counters[m]=0)});var r=Object.keys(this._tile_visibility_counters),d=[];r.forEach(function(m){m in n._visible_coords?(n._tile_visibility_counters[m]++,n._tile_visibility_counters[m]>=TILE_VISIBILITY_COUNTER_THRESHOLD&&d.push(n._visible_coords[m])):(n._tile_visibility_counters[m]--,n._tile_visibility_counters[m]<=0&&delete n._tile_visibility_counters[m])}),d.length&&this.loadCoordinates(d)}},{key:"loadCoordinates",value:function(n){var r=this;n.sort(function(d,m){var g=r._view.lookAtManipulator.getLookAtData().position,v=Geo$1.metersPerTile(d.z)/2,w=Geo$1.metersForTile(d);w.x+=v,w.y-=v;var k=Geo$1.metersForTile(m);k.x+=v,k.y-=v;var j=Math.abs(g[0]-w.x)+Math.abs(g[1]-w.y),G=Math.abs(g[0]-k.x)+Math.abs(g[1]-k.y);return(d.center_dist=j)<(m.center_dist=G)?-1:G===j?0:1}),n.forEach(function(d){return r.loadCoordinate(d)})}},{key:"_keepCoordinate",value:function(n,r){var d=1<arguments.length&&void 0!==r&&r,m=this._visible_coords[n];if(m.z===this._view.center_tile.z)for(var g in this._scene.sources){var v,w,k,j=this._scene.sources[g];j.builds_geometry_tiles&&j.includesTile(m,this._view.lookAtManipulator.getLookAtData().tile_level)&&(v=Tile.normalizedKey(m,j,this._view.lookAtManipulator.getLookAtData().tile_level))&&!this.hasTile(v)&&((w=d&&this._tile_cache.get(v))||(this._all_visible_tiles_are_cached=!1),k=w||new Tile({source:j,coords:m,worker:this.getWorkerForTile(m,j),style_zoom:Utils$1.zoomToTileLevel(m.z),view:this._view,sceneId:this._scene.id}),"ObjectSource"===j.config.type&&(k.syncedAt=j.getSyncedAt()),this.keepTile(k))}}},{key:"loadCoordinate",value:function(n){if(n.z===this._view.center_tile.z)for(var r in this._scene.sources){var d,m=this._scene.sources[r];m.builds_geometry_tiles&&m.includesTile(n,this._view.lookAtManipulator.getLookAtData().tile_level)&&(d=Tile.normalizedKey(n,m,this._view.lookAtManipulator.getLookAtData().tile_level),this.hasTile(d)&&this.buildTile(this._visible_tiles[d]))}}},{key:"buildTile",value:function(n,r){this._building_tiles&&this._building_tiles[n.key]||n.built&&n.generation===this._scene.generation||(this._tileBuildStart(n.key),n.build(this._scene.generation,r))}},{key:"buildTileStylesCompleted",value:function(n){var r=n.tile,d=n.progress;if(null==this._visible_tiles[r.key])Tile.abortBuild(r,this._scene.id);else if(r.generation!==this._scene.generation)Tile.abortBuild(r,this._scene.id);else{if(r.id<this._visible_tiles[r.key].id)return void Tile.abortBuild(r,this._scene.id);r=this._visible_tiles[r.key].merge(r),d.done&&(r.built=!0),r.buildMeshes(this._scene.styles,d),this.updateTileStates(),this._scene.requestRedraw()}d.done&&this._tileBuildStop(r)}},{key:"buildTileError",value:function(n){this._forgetTile(n.key),Tile.abortBuild(n,this._scene.id)}},{key:"_tileBuildStart",value:function(n){this._is_labeled=!1,this._building_tiles=this._building_tiles||{},this._building_tiles[n]=!0}},{key:"_tileBuildStop",value:function(n){this._building_tiles&&(n.source&&n.source.hasLabeledData()&&(this._update_labels_on_queue_check=!0),delete this._building_tiles[n.key],Task.removeForTile(n.id),this.checkBuildQueue())}},{key:"isReady",value:function(){return this._is_labeled&&!this.isLoadingVisibleTiles()}},{key:"checkBuildQueue",value:function(){this._building_tiles&&0!==Object.keys(this._building_tiles).length||(this._building_tiles=null,this._update_labels_on_queue_check?this._updateLabels():(this._is_labeled=!Task.hasPendingTasks(),this._scene.immediateRedraw()))}},{key:"_removeCachedTilesFilter",value:function(n,r){var d=r.source;return!this._visible_tiles[n]&&(r.generation!==this._scene.generation||"ObjectSource"===d.config.type&&d.getSyncedAt()>r.syncedAt)}}]),e}();function compareTileCoords(e,n){var r=e.coords,d=n.coords;return r.z-d.z||r.x-d.x||r.y-d.y}function roundPrecision(e,n){var d=Math.pow(10,2<arguments.length&&void 0!==arguments[2]?arguments[2]:2);return Math.round(Math.floor(e*n)/n*d)/d}function getTileByteLength(e){var n=0;for(var r in e.meshes)for(var d=e.meshes[r],m=0;m<d.length;m++){var g=d[m];n+=g.buffer_size;for(var v=0;v<g.textures.length;v++)n+=e.textureManager.getByteLength(g.textures[v])}return n}function getMaxTileCacheSize(){var e=.1;return navigator&&navigator.deviceMemory?e=5*navigator.deviceMemory/100:window&&window.screen&&(e=window.screen.width/512*window.screen.height/512*.03*3,e=Math.min(e,1)),1024*e*1024*1024}var RenderState=function(){function e(n,r){_classCallCheck(this,e),r(n),this.value=n,this.setup=r}return _createClass(e,[{key:"get",value:function(){return this.value}},{key:"set",value:function(n){JSON.stringify(this.value)!==JSON.stringify(n)&&(this.setup(n),this.value=n)}}]),e}(),RenderStateManager=function e(n){_classCallCheck(this,e),this.defaults={},this.defaults.culling=!0,this.defaults.culling_face=n.BACK,this.defaults.blending=!1,this.defaults.blending_src=n.ONE_MINUS_SRC_ALPHA,this.defaults.blending_dst=n.ONE_MINUS_SRC_ALPHA,this.defaults.blending_src_alpha=n.ONE,this.defaults.blending_dst_alpha=n.ONE_MINUS_SRC_ALPHA,this.defaults.depth_write=!0,this.defaults.depth_test=!0,n.depthFunc(n.LESS),this.culling=new RenderState({cull:this.defaults.culling,face:this.defaults.culling_face},function(r){r.cull?(n.enable(n.CULL_FACE),n.cullFace(r.face)):n.disable(n.CULL_FACE)}),this.blending=new RenderState({blend:this.defaults.blending,src:this.defaults.blending_src,dst:this.defaults.blending_dst,src_alpha:this.defaults.blending_src_alpha,dst_alpha:this.defaults.blending_dst_alpha},function(r){r.blend?(n.enable(n.BLEND),r.src_alpha&&r.dst_alpha?n.blendFuncSeparate(r.src,r.dst,r.src_alpha,r.dst_alpha):n.blendFunc(r.src,r.dst)):n.disable(n.BLEND)}),this.depth_write=new RenderState({depth_write:this.defaults.depth_write},function(r){n.depthMask(r.depth_write)}),this.depth_test=new RenderState({depth_test:this.defaults.depth_test},function(r){r.depth_test?n.enable(n.DEPTH_TEST):n.disable(n.DEPTH_TEST)})},MediaCapture=function(){function e(){_classCallCheck(this,e),this.canvas=null,this.gl=null,this.screenshot_canvas=null,this.screenshot_context=null,this.queue_screenshot=null,this.video_capture=null}return _createClass(e,[{key:"setCanvas",value:function(n,r){this.canvas=n,this.gl=r}},{key:"screenshot",value:function(n){var r=this;return null!=this.queue_screenshot||(this.queue_screenshot={background:(0<arguments.length&&void 0!==n?n:{}).background},this.queue_screenshot.promise=new Promise(function(m,g){r.queue_screenshot.resolve=m,r.queue_screenshot.reject=g})),this.queue_screenshot.promise}},{key:"completeScreenshot",value:function(){if(null!=this.queue_screenshot){var n=this.canvas.width,r=this.canvas.height,d=new Uint8Array(n*r*4);this.gl.readPixels(0,0,n,r,this.gl.RGBA,this.gl.UNSIGNED_BYTE,d);for(var m=(m=this.queue_screenshot.background)&&"transparent"!==m?StyleParser.parseColor(m).slice(0,3).map(function(_h){return 255*_h}):null,g=new Uint8ClampedArray(n*r*4),v=0;v<r;v++)for(var w=0;w<n;w++){var k=4*((r-v-1)*n+w),j=4*(v*n+w),G=d[3+k];g[0+j]=255*d[0+k]/G,g[1+j]=255*d[1+k]/G,g[2+j]=255*d[2+k]/G,g[3+j]=G,m&&(g[0+j]=g[0+j]*(G/=255)+m[0]*(1-G),g[1+j]=g[1+j]*G+m[1]*(1-G),g[2+j]=g[2+j]*G+m[2]*(1-G),g[3+j]=255)}this.screenshot_canvas=this.screenshot_canvas||document.createElement("canvas");var q=this.screenshot_canvas;q.width=n,q.height=r,this.screenshot_context=this.screenshot_context||q.getContext("2d");var _t=this.screenshot_context,_r=new ImageData(g,n,r);_t.putImageData(_r,0,0);for(var _s=q.toDataURL("image/png"),ga=atob(_s.slice(22)),_c=new Uint8Array(ga.length),_u=0;_u<ga.length;++_u)_c[_u]=ga.charCodeAt(_u);var _f=new Blob([_c],{type:"image/png"});this.queue_screenshot.resolve({url:_s,blob:_f,type:"png"}),this.queue_screenshot=null}}},{key:"startVideoCapture",value:function(){var n=this;if("function"!=typeof window.MediaRecorder||!this.canvas||"function"!=typeof this.canvas.captureStream)return log("warn","Video capture (Canvas.captureStream and/or MediaRecorder APIs) not supported by browser"),!1;if(this.video_capture)return log("warn","Video capture already in progress, call Scene.stopVideoCapture() first"),!1;try{var r=this.video_capture={};r.chunks=[],r.stream=this.canvas.captureStream(),r.options={mimeType:"video/webm"},r.media_recorder=new MediaRecorder(r.stream,r.options),r.media_recorder.ondataavailable=function(d){var m,g;0<d.data.size&&r.chunks.push(d.data),r.resolve&&(g=createObjectURL(m=new Blob(r.chunks,{type:r.options.mimeType})),r.stream&&(r.stream.getTracks()||[]).forEach(function(v){v.stop(),r.stream.removeTrack(v)}),r.stream=null,r.media_recorder=null,n.video_capture=null,r.resolve({url:g,blob:m,type:"webm"}))},r.media_recorder.start()}catch(d){return this.video_capture=null,log("error","Scene video capture failed",d),!1}return!0}},{key:"stopVideoCapture",value:function(){var n=this;return this.video_capture?(this.video_capture.promise=new Promise(function(r,d){n.video_capture.resolve=r,n.video_capture.reject=d}),this.video_capture.media_recorder.stop(),this.video_capture.promise):(log("warn","No scene video capture in progress, call Scene.startVideoCapture() first"),Promise.resolve({}))}}]),e}(),SceneWorker=function(){function e(){_classCallCheck(this,e),this.sources={},this.styles={},this.layers={},this.tiles={},this._isConfigured=!1}return _createClass(e,[{key:"init",value:function(n,r,d,m,g,v,w){return this.setMeshVariantMaxLife(w),this.scene_id=n,this.textureManager=getTextureManager(n),this._worker_id=r,log.setLevel(d),Utils$1.device_pixel_ratio=m,VertexElements.setElementIndexUint(g),FeatureSelection.setPrefix(this._worker_id),this._style_manager=new StyleManager,this._importExternalScripts(v),Label.id_prefix=r,this._isConfigured=!1,r}},{key:"dispose",value:function(){this._last_config_sources=null,this._config_sources=null,this.sources=null,this._style_manager=null,this.styles=null,this.layers=null,this.tiles=null}},{key:"_importExternalScripts",value:function(n){var r;0!==n.length&&(log("debug","loading custom data source scripts in worker:",n),r=Object.getOwnPropertyNames(window),importScripts.apply(void 0,_toConsumableArray(n)),Object.getOwnPropertyNames(window).forEach(function(d){-1===r.indexOf(d)&&(self[d]=window[d])}))}},{key:"updateConfig",value:function(n,r){var g=n.config,d=n.generation,m=n.introspection;for(var v in g=JSON.parse(g),mergeDebugSettings(r),this._generation=d,this._isConfigured=!1,g.layers)g.layers[v]&&(g.layers[v].data=Utils$1.stringsToFunctions(g.layers[v].data));this.global=Utils$1.stringsToFunctions(g.global),this._createDataSources(g),g.styles=Utils$1.stringsToFunctions(g.styles,StyleParser.wrapFunction),this.styles=this._style_manager.build(g.styles),self.is_fake_worker=Thread.is_main,this._style_manager.initStyles({generation:this._generation,styles:this.styles,sources:this.sources,introspection:m,id:this.scene_id}),delete self.is_fake_worker,this.layers=parseLayers(g.layers,this._style_manager.styles),this._configuring=this._syncTextures(g.textures)}},{key:"setMeshVariantMaxLife",value:function(n){this.meshVariantMaxLife=n}},{key:"_createDataSources",value:function(n){var r=this;this._last_config_sources=this._config_sources||{},this._config_sources=n.sources;var d=this.sources,m=[];for(var g in n.sources=Utils$1.stringsToFunctions(n.sources),this.sources={},self.is_fake_worker=Thread.is_main,n.sources)if(JSON.stringify(this._last_config_sources[g])!==JSON.stringify(n.sources[g])){var v=void 0;try{v=DataSource.create(Object.assign({},n.sources[g],{name:g}),this.sources)}catch(w){log("error","Error creating source.",w.message,n.sources[g]);continue}v&&(this.sources[g]=v,m.push(g))}else this.sources[g]=d[g];delete self.is_fake_worker,m.forEach(function(w){for(var k in r.tiles)r.tiles[k].source===w&&delete r.tiles[k]})}},{key:"awaitConfiguration",value:function(){return this._configuring}},{key:"_onConfig",value:function(n){var r=this;if((this._isConfigured=!0)!==n.loaded)n.loading=!0,n.loaded=!1,n.error=null,this._loadTileSourceData(n).then(function(){if(r.getTile(n.id)){n.loading=!1,n.loaded=!0;try{Tile.buildGeometry(n,r)}catch(d){n.error=d.toString(),WorkerBroker.postMessage("TileManager_".concat(r.scene_id,".buildTileError"),Tile.slice(n))}}else log("trace","stop tile build after data source load because tile was removed. Key: ".concat(n.key,", id: ").concat(n.id))},function(d){n.loading=!1,n.loaded=!1,n.error=d.stack,log("error","tile load error for tile with key ".concat(n.key," and id ").concat(n.id,": ").concat(n.error)),WorkerBroker.postMessage("TileManager_".concat(r.scene_id,".buildTileError"),Tile.slice(n))});else{log("trace","used worker cache for tile with key ".concat(n.key," and id ").concat(n.id));try{Tile.buildGeometry(n,this)}catch(d){n.error=d.toString(),WorkerBroker.postMessage("TileManager_".concat(this.scene_id,".buildTileError"),Tile.slice(n))}}}},{key:"buildTile",value:function(n){var r,d=n.tile,m=this.getTile(d.id);m&&m.loading||(d=this.tiles[d.id]=Object.assign(m||{},d),this._isConfigured?this._onConfig(d):(r=this).awaitConfiguration().then(function(){return r._onConfig(d)}))}},{key:"_loadTileSourceData",value:function(n){return this.sources[n.source]?this.sources[n.source].load(n):(n.source_data={},Promise.resolve(n))}},{key:"getTile",value:function(n){return this.tiles[n]}},{key:"removeTile",value:function(n){var r=this.tiles[n];null!=r&&(!0===r.loading&&(log("trace","cancel tile load for tile id ".concat(n)),r.loading=!1,Tile.cancel(r)),delete this.tiles[n],log("trace","remove tile from cache, tile id: ".concat(n)))}},{key:"queryFeatures",value:function(n){var r=this,d=n.filter,m=n.visible,g=n.geometry,w=[],k=n.tile_ids.map(function(j){return r.tiles[j]}).filter(function(j){return j});return null!=d&&(d=-1<["{","["].indexOf(d[0])?JSON.parse(d):d,d=Utils$1.stringsToFunctions(d,StyleParser.wrapFunction)),d=buildFilter(d,FilterOptions),k.forEach(function(j){for(var G in j.source_data.layers)!function(q){j.source_data.layers[q].features.forEach(function(_t){var _r,_s;!0===m&&_t.generation!==r._generation||!1===m&&_t.generation===r._generation||((_r=StyleParser.getFeatureParseContext(_t,j,r.global)).source=j.source,_r.layer=q,d(_r)&&(_s={type:_t.type,properties:_t.properties},!0===g&&(_s.geometry=Geo$1.copyGeometry(_t.geometry),Geo$1.tileSpaceToLatlng(_s.geometry,j.coords.z,j.min)),w.push(_s)))})}(G)}),w}},{key:"resetFeatureSelection",value:function(){FeatureSelection.reset()}},{key:"_syncTextures",value:function(n){var r=[];return n&&r.push.apply(r,_toConsumableArray(Object.keys(n))),log("trace","sync textures to worker:",r),0<r.length?this.textureManager.syncTexturesToWorker(r):Promise.resolve()}},{key:"profile",value:function(n){console.profile("worker ".concat(this._worker_id,": ").concat(n))}},{key:"profileEnd",value:function(n){console.profileEnd("worker ".concat(this._worker_id,": ").concat(n))}},{key:"terminate",value:function(){this.dispose()}}]),e}();(Thread.is_worker||self.H&&self.H.DEBUG)&&WorkerBroker.addTarget("self",new SceneWorker);var Scene=function(){function e(n,r){_classCallCheck(this,e),r=r||{},subscribeMixin(this),this.id=e.id++,this.textureManager=getTextureManager(this.id),this.initialized=!1,this.initializing=null,this.sources={},this.view=new View(this,r),this.tile_manager=new TileManager({scene:this,view:this.view}),this.num_workers=r.numWorkers||2,!0===r.disableVertexArrayObjects&&(VertexArrayObject.disabled=!0),Utils$1.device_pixel_ratio=r.devicePixelRatio,this.config=null,this.config_source=n,this.config_bundle=null,this.last_valid_config_source=null,this.styles=null,this.style_manager=new StyleManager,this.building=null,this.dirty=!0,r.preUpdate&&this.subscribe({pre_update:r.preUpdate}),r.postUpdate&&this.subscribe({post_update:r.postUpdate}),this.render_loop=!r.disableRenderLoop,this.render_loop_active=!1,this.render_loop_stop=!1,this.render_count=0,this.last_render_count=0,this.render_count_changed=!1,this.frame=0,this.last_main_render=-1,this.last_selection_render=-1,this.media_capture=new MediaCapture,this.selection=null,this.introspection=!0===r.introspection,this.viewport=r.viewport,this.adjustMeshVariantMaxLife(),this.container=r.container,this.canvas=null,this.contextOptions=r.webGLContextOptions,this.lights=null,this.background=null,this.createListeners(),this.updating=0,this.generation=e.generation,this.last_complete_generation=e.generation,this.log_level=r.logLevel||"warn",log.setLevel(this.log_level),log.reset()}return _createClass(e,[{key:"load",value:function(n,r){var d=this,m=0<arguments.length&&void 0!==n?n:null,g=1<arguments.length&&void 0!==r?r:{};return this.initializing||(log.reset(),this.updating++,this.initialized=!1,this.initial_build_time=null,(g="string"==typeof g?{base_path:g}:g).blocking=void 0===g.blocking||g.blocking,!1!==this.render_loop&&this.setupRenderLoop(),this.createCanvas(),this.textureManager.destroy(this.gl),this.initializing=this.loadScene(m,g).then(function(){return d.createWorkers()}).then(function(){d.resetFeatureSelection();var v="object"===_typeof(d.config_source)||d.hasSubscribersFor("load"),w=d.updateConfig({serialize_funcs:v,normalize:!1,load_event:!0,fade_in:!0});if(!0===g.blocking)return w}).then(function(){d.updating--,d.initializing=null,d.initialized=!0,d.last_valid_config_source=d.config_source,d.last_valid_options={base_path:g.base_path,file_type:g.file_type},d.requestRedraw()}).catch(function(v){var w,k;if(d.initializing=null,d.updating=0,k="YAMLException"===v.name?(w="yaml","Error parsing scene YAML"):"Error initializing scene",d.trigger("error",{type:w,message:k,error:v,url:d.config_source}),k="Scene.load() failed to load ".concat(d.config_source,": ").concat(v.message),d.last_valid_config_source)return log("warn",k,v),log("info","Scene.load() reverting to last valid configuration"),d.load(d.last_valid_config_source,d.last_valid_base_path);throw log("error",k,v),v})),this.initializing}},{key:"destroy",value:function(){var n;this.initialized=!1,this.render_loop_stop=!0,this.destroyListeners(),this.canvas&&this.canvas.parentNode&&(this.canvas.parentNode.removeChild(this.canvas),this.canvas=null),this.container=null,this.selection&&this.selection.destroy(),this.gl&&(this.textureManager.destroy(this.gl),this.style_manager.destroy(this.gl),this.styles={},ShaderProgram.reset(),(n=this.gl.getExtension("WEBGL_lose_context"))&&n.loseContext(),this.gl=null),this.sources={},this.tile_manager.destroy(),this.tile_manager=null,this.destroyWorkers(),log.reset()}},{key:"createCanvas",value:function(){if(!this.canvas){this.container=this.container||document.body,this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.top=0,this.canvas.style.left=0,this.container.style.backgroundColor="transparent",this.container.appendChild(this.canvas);try{this.gl=Context$1.getContext(this.canvas,Object.assign({alpha:!0,premultipliedAlpha:!1,stencil:!0,device_pixel_ratio:Utils$1.device_pixel_ratio},this.contextOptions))}catch{throw new Error("Couldn't create WebGL context. Your browser may not support WebGL, or it's turned off? Visit http://webglreport.com/ for more info.")}this.handleViewportUpdate(),VertexArrayObject.init(this.gl),this.render_states=new RenderStateManager(this.gl),this.media_capture.setCanvas(this.canvas,this.gl)}}},{key:"getWorkerUrl",value:function(){var n,r;if(void 0!==__worker_src__&&(r="("+__worker_src__+")()",__worker_src_origin__&&""!==__worker_src_map__&&(r+="\n//# sourceMappingURL="+__worker_src_origin__.slice(0,__worker_src_origin__.lastIndexOf("/")+1)+__worker_src_map__),n=createObjectURL(new Blob([r],{type:"application/javascript"}))),!n)throw new Error("Couldn't find internal Tangram source variable (may indicate the library did not build correctly)");return n}},{key:"updateExternalScripts",value:function(){var n=_toConsumableArray(this.external_scripts||[]),r=[];if(this.config.scene.scripts)for(var d in this.config.scene.scripts)-1===r.indexOf(this.config.scene.scripts[d])&&r.push(this.config.scene.scripts[d]);for(var m in this.config.sources){var g=this.config.sources[m];if(g.scripts)for(var v in g.scripts)-1===r.indexOf(g.scripts[v])&&r.push(g.scripts[v])}return this.external_scripts=r,!(this.external_scripts.length===n.length&&this.external_scripts.every(function(w,k){return w===n[k]}))}},{key:"createWorkers",value:function(){return this.updateExternalScripts()&&this.destroyWorkers(),this._workers?Promise.resolve():this.makeWorkers(this.getWorkerUrl())}},{key:"makeWorkers",value:function(n){var r=this,d=!!this.gl.getExtension("OES_element_index_uint"),m=[];this._workers=[];for(var g=0;g<this.num_workers;g++)!function(){var w=new Worker(n);r._workers[g]=w,WorkerBroker.addWorker(w),log("debug","Scene.makeWorkers: initializing worker ".concat(g));var k=g;m.push(WorkerBroker.postMessage(w,"self.init",r.id,g,r.log_level,Utils$1.device_pixel_ratio,d,r.external_scripts,r.meshVariantMaxLife).then(function(j){return log("debug","Scene.makeWorkers: initialized worker ".concat(j)),j},function(j){return log("error","Scene.makeWorkers: failed to initialize worker ".concat(k,":"),j),Promise.reject(j)}))}();var v=new SceneWorker;return this._workers.push(v),m.push(v.init(this.id,g,this.log_level,Utils$1.device_pixel_ratio,d,[],this.meshVariantMaxLife)),this.next_worker=0,Promise.all(m).then(function(){log.setWorkers(r._workers.slice(0,r.num_workers)),revokeObjectURL(n)})}},{key:"getWorkers",value:function(n){return this._workers.filter(function(r){switch(n){case WorkerType.NATIVE:return r instanceof Worker;case WorkerType.FAKE:return r instanceof SceneWorker;default:return!0}})}},{key:"destroyWorkers",value:function(){this.selection=null,Array.isArray(this._workers)&&(log.setWorkers(null),this._workers.forEach(function(n){n.terminate()}),this._workers=null)}},{key:"ready",value:function(){return!(!this.view.ready()||0===Object.keys(this.sources).length)}},{key:"handleViewportUpdate",value:function(){var n=this.viewport,r=n.width,d=n.height;0<r&&0<d&&(this.dirty=!0,this.view.handleViewportUpdate(),this.gl&&Context$1.resize(this.gl,r,d,Utils$1.device_pixel_ratio)),this.adjustMeshVariantMaxLife()&&this.syncMeshVariantMaxLife()}},{key:"adjustMeshVariantMaxLife",value:function(){var n=this.viewport,m=Utils$1.device_pixel_ratio,v=Math.max(Math.ceil(n.width/m/256*(n.height/m/256)*2),8);if(this.meshVariantMaxLife!==v)return this.meshVariantMaxLife=v,!0}},{key:"syncMeshVariantMaxLife",value:function(){this._workers&&WorkerBroker.postMessage(this._workers,"self.setMeshVariantMaxLife",this.meshVariantMaxLife)}},{key:"requestRedraw",value:function(){this.dirty=!0}},{key:"immediateRedraw",value:function(){this.dirty=!0,this.update()}},{key:"renderLoop",value:function(){this.render_loop_active=!0,this.initialized&&this.update(),Task.setState({user_moving_view:this.view.user_input_active}),Task.processAll(),this.render_loop_stop?(this.render_loop_stop=!1,this.render_loop_active=!1):window.requestAnimationFrame(this.renderLoop.bind(this))}},{key:"setupRenderLoop",value:function(){var n=this;this.render_loop_active||setTimeout(function(){n.renderLoop()},0)}},{key:"update",value:function(){var n=this.dirty,r=!!this.selection&&this.selection.hasPendingRequests(),d=!(!1===n&&!1===r||!1===this.initialized||0<this.updating||!1===this.ready());return this.trigger("pre_update",d),this.view.update(),d&&(this.dirty=!1,this.render({main:n,selection:r}),this.updateViewComplete(),this.media_capture.completeScreenshot(),this.trigger("post_update",d),!0!==this.animated&&!this.view.isAnimating()||(this.dirty=!0),this.frame++,log("trace","Scene.render()"),!0)}},{key:"render",value:function(n){var r=this,d=n.main,m=n.selection,g=this.gl;if(Object.keys(this.lights).forEach(function(v){return r.lights[v].update()}),d&&(this.render_count=this.renderPass(),this.last_main_render=this.frame),m){if(this.view.panning||this.view.user_input_active)return void this.selection.clearPendingRequests();(this.last_selection_render<this.last_main_render||this.selection.has_dirty_buffer)&&(this.selection.bind(),this.renderPass("selection_program",{allow_blend:!1}),g.bindFramebuffer(g.FRAMEBUFFER,null),g.viewport(0,0,this.canvas.width,this.canvas.height),g.clearColor.apply(g,_toConsumableArray(this.background.color)),this.last_selection_render=this.frame,this.selection.has_dirty_buffer=!1),this.selection.read(this.tile_manager.getRenderableTiles()),this.selection.has_dirty_buffer&&this.render({main:!1,selection:m})}return this.render_count_changed=!1,this.render_count!==this.last_render_count&&(this.render_count_changed=!0),this.last_render_count=this.render_count,!0}},{key:"renderPass",value:function(n,r){var d=this,m=0<arguments.length&&void 0!==n?n:"program",g=this.gl,v=null==(v=(1<arguments.length&&void 0!==r?r:{}).allow_blend)||v;this.clearFrame();for(var w,k=Style.sortByBlendOrderWithinLayers(this.tile_manager.getActiveStyles().map(function(_u){return d.styles[_u]}).filter(function(_u){return _u})),j=0,G=0,q=0;q<k.length;q++){var _t,_r,_s=k[q],ga=G-(_t=parseInt(_s.name));(_s.clean_depth||ga)&&(this.render_states.depth_write.value.depth_write?g.clear(g.DEPTH_BUFFER_BIT):(g.depthMask(!0),g.clear(g.DEPTH_BUFFER_BIT),g.depthMask(!1)),ga&&(G=_t)),_s.blend!==w&&(_r=Object.assign({},Style.render_states[_s.blend],{blend:v&&_s.blend}),this.setRenderState(_r));var _c="translucent"===_s.blend&&"program"===m;_c&&(this.gl.colorMask(!1,!1,!1,!1),this.renderStyle(_s.name,m),this.gl.colorMask(!0,!0,!0,!0),this.gl.depthFunc(this.gl.EQUAL),this.gl.enable(this.gl.STENCIL_TEST),this.gl.clear(this.gl.STENCIL_BUFFER_BIT),this.gl.stencilFunc(this.gl.EQUAL,this.gl.ZERO,255),this.gl.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.INCR)),j+=this.renderStyle(_s.name,m),_c&&(this.gl.disable(this.gl.STENCIL_TEST),this.gl.depthFunc(this.gl.LESS)),w=_s.blend}return j}},{key:"renderStyle",value:function(n,r){for(var d,m=this,g=this.styles[n],v=!0,w=0,k=this.tile_manager.getRenderableTiles(),j=Math.max.apply(Math,_toConsumableArray(k.map(function(_t){return _t.meshes[n]?Math.max.apply(Math,_toConsumableArray(_t.meshes[n].map(function(_r){return _r.variant.order}))):-1}))),G=0;G<j+1;G++){var q=function(_t){for(var _r=0;_r<k.length;_r++){var _s=k[_r];if(null!=_s.meshes[n]&&_s.shouldProxyForStyle(n))for(var ga=_s.meshes[n].filter(function(_h){return _h.variant.order===_t}),_c=0,_u=ga.length;_c<_u;_c+=1){var _f=ga[_c];if(!0===v&&(v=!1,!(d=m.setupStyle(g,r))))return{v:0};m.view.setupTile(_s,d),m.selection.setupDiscards(d),g.render(_f)&&m.requestRedraw(),w+=_f.geometry_count}}}(G);if("object"===_typeof(q))return q.v}return w}},{key:"setupStyle",value:function(n,r){var d;try{if(!(d=n.getProgram(r)))return}catch{return void this.trigger("warning",{type:"styles",message:"Error compiling style ".concat(n.name),style:n,shader_errors:n.program&&n.program.shader_errors})}for(var m in d.use(),n.setup(),this.view.setupProgram(d),this.lights)this.lights[m].setupProgram(d);return d}},{key:"clearFrame",value:function(){this.initialized&&(this.render_states.depth_write.set({depth_write:!0}),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT|this.gl.STENCIL_BUFFER_BIT))}},{key:"setRenderState",value:function(n){var r,d,m=0<arguments.length&&void 0!==n?n:{},g=m.depth_test,v=m.depth_write,w=m.cull_face,k=m.blend;this.initialized&&(r=this.render_states,v=!1!==v&&r.defaults.depth_write,w=!1!==w&&r.defaults.culling,k=k??r.defaults.blending,d=this.gl,r.depth_test.set({depth_test:g=!1!==g&&r.defaults.depth_test}),r.depth_write.set({depth_write:v}),r.culling.set({cull:w,face:r.defaults.culling_face}),k&&"opaque"!==k?"overlay"===k||"inlay"===k||"translucent"===k?r.blending.set({blend:!0,src:d.SRC_ALPHA,dst:d.ONE_MINUS_SRC_ALPHA,src_alpha:d.ONE,dst_alpha:d.ONE_MINUS_SRC_ALPHA}):"add"===k?r.blending.set({blend:!0,src:d.ONE,dst:d.ONE}):"multiply"===k&&r.blending.set({blend:!0,src:d.ZERO,dst:d.SRC_COLOR}):r.blending.set({blend:!1}))}},{key:"getFeatureAt",value:function(n,r,d){var g=r.radius;this.initialized?this.selection.getFeatureAt({x:n.x/this.view.size.css.width,y:n.y/this.view.size.css.height},{radius:g=0<g?{x:g/this.view.size.css.width,y:g/this.view.size.css.height}:null,top_most_only:r.top_most_only},d):log("debug","Scene.getFeatureAt() called before scene was initialized")}},{key:"queryFeatures",value:function(n){var r=0<arguments.length&&void 0!==n?n:{},d=r.unique,m=void 0===d||d,g=r.group_by,v=void 0===g?null:g,w=r.visible,k=void 0===w?null:w,j=r.geometry,G=void 0!==j&&j,q=Utils$1.serializeWithFunctions(q=r.filter),_t=this.tile_manager.getRenderableTiles().map(function(_r){return _r.id});return WorkerBroker.postMessage(this._workers,"self.queryFeatures",{filter:q,visible:k,geometry:G,tile_ids:_t}).then(function(_r){var _s=[],ga={},_c={},_u=(m="string"==typeof m?[m]:m)&&function(_h){return JSON.stringify(Array.isArray(m)?sliceObject(_h,m):_h)},_f=(v=("string"==typeof v||Array.isArray(v))&&v)&&function(_h){return Array.isArray(v)?JSON.stringify(sliceObject(_h,v)):_h[v]};return _r.forEach(function(_h){return _h.forEach(function(ad){if(_u){var ey=_u(ad);if(ga[ey])return;ga[ey]=!0}var sy;_f?(sy=_f(ad.properties),_c[sy]=_c[sy]||[],_c[sy].push(ad)):_s.push(ad)})}),_f?_c:_s})}},{key:"loadScene",value:function(n,r){var d=this,g=1<arguments.length&&void 0!==r?r:{},v=g.base_path,w=g.file_type;return this.config_source=(0<arguments.length&&void 0!==n?n:null)||this.config_source,this.base_path=pathForURL("string"==typeof this.config_source?v||this.config_source:v),this.config_path=this.base_path,SceneLoader$1.loadScene(this.config_source,{path:this.base_path,type:w}).then(function(k){var G=k.bundle;return d.config=k.config,d.config_bundle=G,d.config})}},{key:"createDataSources",value:function(){var n=this,r=[],d=Object.keys(this.sources),m=0;for(var g in this.config.sources){var v=this.config.sources[g],w=this.sources[g];try{var k=Object.assign({},v,{name:g,id:m++});if(this.sources[g]=DataSource.create(k,this.sources),!this.sources[g])throw{}}catch(_t){delete this.sources[g];var j="Could not create data source: ".concat(_t.message);log("warn","Scene: ".concat(j),v),this.trigger("warning",{type:"sources",source:v,message:j})}DataSource.sameConfig(this.sources[g],w)||r.push(g)}for(var G in d.forEach(function(_t){n.config.sources[_t]||(delete n.sources[_t],r.push(_t))}),0<r.length&&this.tile_manager.removeTiles(function(_t){return-1<r.indexOf(_t.source.name)}),this.config.layers){var q=this.config.layers[G];!1!==q.enabled&&q.data&&this.sources[q.data.source]&&(this.sources[q.data.source].builds_geometry_tiles=!0)}}},{key:"loadTextures",value:function(){var n=this;return this.textureManager.createFromObject(this.gl,this.config.textures).then(function(){return n.textureManager.createDefault(n.gl)})}},{key:"updateStyles",value:function(){if(!this.initialized&&!this.initializing)throw new Error("Scene.updateStyles() called before scene was initialized");for(var n in this.styles=this.style_manager.build(this.config.styles),this.style_manager.initStyles(this),this.styles)this.styles[n].setGL(this.gl);this.dirty=!0}},{key:"createLights",value:function(){for(var n in this.lights={},this.config.lights){var r;this.config.lights[n]&&"object"===_typeof(this.config.lights[n])&&((r=this.config.lights[n]).name=n.replace("-","_"),r.visible=!1!==r.visible,r.visible&&(this.lights[r.name]=Light.create(this.view,r)))}Light.inject(this.lights)}},{key:"setBackground",value:function(){var n,r=this.config.scene.background;this.background={},r&&r.color&&(this.background.color=StyleParser.parseColor(r.color)),this.background.color||(this.background.color=[0,0,0,0]),this.canvas.style.backgroundColor=1===this.background.color[3]?"rgba(".concat(this.background.color.map(function(d){return Math.floor(255*d)}).join(", "),")"):"transparent",(n=this.gl).clearColor.apply(n,_toConsumableArray(this.background.color))}},{key:"setIntrospection",value:function(n){var r=this;return n!==this.introspection?(this.introspection=n||!1,this.updating++,this.updateConfig({normalize:!1}).then(function(){return r.updating--})):Promise.resolve()}},{key:"updateConfig",value:function(n){var r=0<arguments.length&&void 0!==n?n:{},d=r.load_event,m=void 0!==d&&d,g=r.serialize_funcs,v=r.normalize,w=void 0===v||v;this.generation=++e.generation,this.updating++,this.config=SceneLoader$1.applyGlobalProperties(this.config),w?SceneLoader$1.normalize(this.config,this.config_bundle):(SceneLoader$1.hoistStyleShaderUniformTextures(this.config,this.config_bundle,{include_globals:!0}),SceneLoader$1.normalizeTextures(this.config,this.config_bundle)),this.trigger(m?"load":"update",{config:this.config}),this.style_manager.init(),this.createLights(),this.createDataSources(),this.loadTextures(),this.setBackground(),FontManager.loadFonts(this.config.fonts),this.updateStyles();var k=this.syncConfigToWorker({serialize_funcs:g});return this.updating--,this.view.updateBounds(),this.requestRedraw(),k}},{key:"syncConfigToWorker",value:function(n){var r=(0<arguments.length&&void 0!==n?n:{}).serialize_funcs,d=void 0===r||r?Utils$1.serializeWithFunctions(this.config):JSON.stringify(this.config);return WorkerBroker.postMessage(this._workers,"self.updateConfig",{config:d,generation:this.generation,introspection:this.introspection},debugSettings$1)}},{key:"createListeners",value:function(){var n=this;this.listeners={},this.listeners.view={move:function(){return n.trigger("move")}},this.view.subscribe(this.listeners.view),this.listeners.texture={update:function(){return n.dirty=!0},warning:function(r){return n.trigger("warning",Object.assign({type:"textures"},r))}},this.textureManager.subscribe(this.listeners.texture),this.listeners.scene_loader={error:function(r){return n.trigger("error",Object.assign({type:"scene"},r))}},SceneLoader$1.subscribe(this.listeners.scene_loader)}},{key:"destroyListeners",value:function(){this.unsubscribeAll(),this.view.unsubscribe(this.listeners.view),this.textureManager.unsubscribe(this.listeners.texture),SceneLoader$1.unsubscribe(this.listeners.scene_loader),this.listeners=null}},{key:"resetFeatureSelection",value:function(){this.selection?this._workers&&WorkerBroker.postMessage(this._workers,"self.resetFeatureSelection"):this.selection=new FeatureSelection(this.gl,this.id)}},{key:"updateViewComplete",value:function(){(this.render_count_changed||this.generation!==this.last_complete_generation)&&this.tile_manager.isReady()&&(this.last_complete_generation=this.generation,this.trigger("view_complete"))}},{key:"resetViewComplete",value:function(){this.last_complete_generation=null}},{key:"screenshot",value:function(n){var r=(0<arguments.length&&void 0!==n?n:{}).background,d=void 0===r?"white":r;return this.requestRedraw(),this.media_capture.screenshot({background:d})}},{key:"pixelRatio",value:function(){return Utils$1.device_pixel_ratio}},{key:"startVideoCapture",value:function(){return this.requestRedraw(),this.media_capture.startVideoCapture()}},{key:"stopVideoCapture",value:function(){return this.media_capture.stopVideoCapture()}},{key:"_profile",value:function(n){console.profile("main thread: ".concat(n)),WorkerBroker.postMessage(this._workers,"self.profile",n)}},{key:"_profileEnd",value:function(n){console.profileEnd("main thread: ".concat(n)),WorkerBroker.postMessage(this._workers,"self.profileEnd",n)}},{key:"getCameraMatrix",value:function(){return this.view.lookAtManipulator.getCameraMatrix()}},{key:"animated",get:function(){var n=this;return void 0!==this.config.scene.animated?this.config.scene.animated:this.tile_manager.getActiveStyles().some(function(r){return n.styles[r]&&n.styles[r].animated})}}],[{key:"create",value:function(n,r){return new e(n,1<arguments.length&&void 0!==r?r:{})}}]),e}();Scene.id=0,Scene.generation=0;var RemoteTexture=function(){_inherits(n,Texture);var e=_createSuper(n);function n(r,d,m){var g=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};_classCallCheck(this,n);var v=Math.pow(2,g.coords.z),w=Math.abs(Math.floor(g.coords.x/v)),k=Math.abs(v*w-Math.abs(g.coords.x)),j=g.coords;return g.coords={x:k,y:j.y,z:j.z},e.call(this,r,d,m,g)}return _createClass(n,[{key:"load",value:function(r){var d=this;if(!r||!r.uid)return _get(_getPrototypeOf(n.prototype),"load",this).call(this,r);var m=r.coords,g=new Uint8Array([0,0,0,0]);return this.loading=new Promise(function(v,w){var k=H.map.DataModel.invoke(r.uid,"requestTileAsPromise",[m.x,m.y,m.z])||null;k?k.then(function(j){var G=j.data;d.loaded=!0,!G||G instanceof ArrayBuffer||"IMG"!==G.tagName.toUpperCase()&&"CANVAS"!==G.tagName.toUpperCase()?d.setData(1,1,g,{filtering:"nearest"}):d.setElement(G,r)},function(){d.loaded=!1}).then(v,function(j){return w(j)}):w(new Error("Unable to invoke on target "+r.uid))}),this.loading}}]),n}();TextureManager.register(RemoteTexture,function(e){return e&&e.uid}),self.H=self.H||{},self.H.gl={DataSource,Geo:Geo$1,MathUtils:MathUtils$1,Scene,Task,Tile,WorkerBroker,log,SceneLoader:SceneLoader$1,yaml:jsYaml$1}}()};f()}(),this.H=this.H||{},this.H.venues=function(e){function n(_l,_o){var _e,_i;_o=(_o=void 0===_o?{}:_o).insertAt,_l&&typeof document<"u"&&(_e=document.head||document.getElementsByTagName("head")[0],(_i=document.createElement("style")).type="text/css","top"===_o&&_e.firstChild?_e.insertBefore(_i,_e.firstChild):_e.appendChild(_i),_i.styleSheet?_i.styleSheet.cssText=_l:_i.appendChild(document.createTextNode(_l)))}function r(_l,Q){var _e,_i=Object.keys(_l);return Object.getOwnPropertySymbols&&(_e=Object.getOwnPropertySymbols(_l),Q&&(_e=_e.filter(function(_o){return Object.getOwnPropertyDescriptor(_l,_o).enumerable})),_i.push.apply(_i,_e)),_i}function d(_l){for(var Q=1;Q<arguments.length;Q++){var _e=null!=arguments[Q]?arguments[Q]:{};Q%2?r(Object(_e),!0).forEach(function(_i){G(_l,_i,_e[_i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_l,Object.getOwnPropertyDescriptors(_e)):r(Object(_e)).forEach(function(_i){Object.defineProperty(_l,_i,Object.getOwnPropertyDescriptor(_e,_i))})}return _l}function m(){m=function(){return _l};var _l={},Q=Object.prototype,_e=Q.hasOwnProperty,_i=(xy="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",_o=xy.asyncIterator||"@@asyncIterator",Fa=xy.toStringTag||"@@toStringTag";function bc(uy,Dy,zy){return Object.defineProperty(uy,Dy,{value:zy,enumerable:!0,configurable:!0,writable:!0}),uy[Dy]}try{bc({},"")}catch{bc=function(Dy,zy,Oy){return Dy[zy]=Oy}}function pd(uy,U_,zy,n0){var Wy,d_,Uy,e0;return U_=U_&&U_.prototype instanceof oy?U_:oy,U_=Object.create(U_.prototype),n0=new wy(n0||[]),U_._invoke=(Wy=uy,d_=zy,Uy=n0,e0="suspendedStart",function(z_,l0){if("executing"===e0)throw new Error("Generator is already running");if("completed"===e0){if("throw"===z_)throw l0;return{value:void 0,done:!0}}for(Uy.method=z_,Uy.arg=l0;;){var T_=Uy.delegate;if(T_&&(T_=function A_(I0,k_){var Y0=I0.iterator[k_.method];if(void 0===Y0){if(k_.delegate=null,"throw"===k_.method){if(I0.iterator.return&&(k_.method="return",k_.arg=void 0,A_(I0,k_),"throw"===k_.method))return _m;k_.method="throw",k_.arg=new TypeError("The iterator does not provide a 'throw' method")}return _m}return"throw"===(Y0=_p(Y0,I0.iterator,k_.arg)).type?(k_.method="throw",k_.arg=Y0.arg,k_.delegate=null,_m):(Y0=Y0.arg)?Y0.done?(k_[I0.resultName]=Y0.value,k_.next=I0.nextLoc,"return"!==k_.method&&(k_.method="next",k_.arg=void 0),k_.delegate=null,_m):Y0:(k_.method="throw",k_.arg=new TypeError("iterator result is not an object"),k_.delegate=null,_m)}(T_,Uy))){if(T_===_m)continue;return T_}if("next"===Uy.method)Uy.sent=Uy._sent=Uy.arg;else if("throw"===Uy.method){if("suspendedStart"===e0)throw e0="completed",Uy.arg;Uy.dispatchException(Uy.arg)}else"return"===Uy.method&&Uy.abrupt("return",Uy.arg);if(e0="executing","normal"===(T_=_p(Wy,d_,Uy)).type){if(e0=Uy.done?"completed":"suspendedYield",T_.arg===_m)continue;return{value:T_.arg,done:Uy.done}}"throw"===T_.type&&(e0="completed",Uy.method="throw",Uy.arg=T_.arg)}}),U_}function _p(uy,Dy,zy){try{return{type:"normal",arg:uy.call(Dy,zy)}}catch(Oy){return{type:"throw",arg:Oy}}}_l.wrap=pd;var _m={};function oy(){}function ry(){}function hy(){}var xy,By,My=(bc(xy={},_i,function(){return this}),(By=(By=Object.getPrototypeOf)&&By(By(ky([]))))&&By!==Q&&_e.call(By,_i)&&(xy=By),hy.prototype=oy.prototype=Object.create(xy));function $y(uy){["next","throw","return"].forEach(function(Dy){bc(uy,Dy,function(zy){return this._invoke(Dy,zy)})})}function Ly(uy,Dy){var zy;this._invoke=function(Oy,Wy){function d_(){return new Dy(function(Uy,e0){!function U_(I0,z_,l0,T_){var A_;if("throw"!==(I0=_p(uy[I0],uy,z_)).type)return(z_=(A_=I0.arg).value)&&"object"==typeof z_&&_e.call(z_,"__await")?Dy.resolve(z_.__await).then(function(k_){U_("next",k_,l0,T_)},function(k_){U_("throw",k_,l0,T_)}):Dy.resolve(z_).then(function(k_){A_.value=k_,l0(A_)},function(k_){return U_("throw",k_,l0,T_)});T_(I0.arg)}(Oy,Wy,Uy,e0)})}return zy=zy?zy.then(d_,d_):d_()}}function Ey(uy){var Dy={tryLoc:uy[0]};1 in uy&&(Dy.catchLoc=uy[1]),2 in uy&&(Dy.finallyLoc=uy[2],Dy.afterLoc=uy[3]),this.tryEntries.push(Dy)}function by(uy){var Dy=uy.completion||{};Dy.type="normal",delete Dy.arg,uy.completion=Dy}function wy(uy){this.tryEntries=[{tryLoc:"root"}],uy.forEach(Ey,this),this.reset(!0)}function ky(uy){if(uy){var Dy,zy=uy[_i];if(zy)return zy.call(uy);if("function"==typeof uy.next)return uy;if(!isNaN(uy.length))return Dy=-1,(zy=function Oy(){for(;++Dy<uy.length;)if(_e.call(uy,Dy))return Oy.value=uy[Dy],Oy.done=!1,Oy;return Oy.value=void 0,Oy.done=!0,Oy}).next=zy}return{next:_v}}function _v(){return{value:void 0,done:!0}}return bc(My,"constructor",ry.prototype=hy),bc(hy,"constructor",ry),ry.displayName=bc(hy,Fa,"GeneratorFunction"),_l.isGeneratorFunction=function(uy){return!!(uy="function"==typeof uy&&uy.constructor)&&(uy===ry||"GeneratorFunction"===(uy.displayName||uy.name))},_l.mark=function(uy){return Object.setPrototypeOf?Object.setPrototypeOf(uy,hy):(uy.__proto__=hy,bc(uy,Fa,"GeneratorFunction")),uy.prototype=Object.create(My),uy},_l.awrap=function(uy){return{__await:uy}},$y(Ly.prototype),bc(Ly.prototype,_o,function(){return this}),_l.AsyncIterator=Ly,_l.async=function(uy,Dy,zy,Oy,Wy){void 0===Wy&&(Wy=Promise);var d_=new Ly(pd(uy,Dy,zy,Oy),Wy);return _l.isGeneratorFunction(Dy)?d_:d_.next().then(function(Uy){return Uy.done?Uy.value:d_.next()})},$y(My),bc(My,Fa,"Generator"),bc(My,_i,function(){return this}),bc(My,"toString",function(){return"[object Generator]"}),_l.keys=function(uy){var Dy,zy=[];for(Dy in uy)zy.push(Dy);return zy.reverse(),function Oy(){for(;zy.length;){var Wy=zy.pop();if(Wy in uy)return Oy.value=Wy,Oy.done=!1,Oy}return Oy.done=!0,Oy}},_l.values=ky,wy.prototype={constructor:wy,reset:function(uy){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(by),!uy)for(var Dy in this)"t"===Dy.charAt(0)&&_e.call(this,Dy)&&!isNaN(+Dy.slice(1))&&(this[Dy]=void 0)},stop:function(){this.done=!0;var uy=this.tryEntries[0].completion;if("throw"===uy.type)throw uy.arg;return this.rval},dispatchException:function(uy){if(this.done)throw uy;var Dy=this;function zy(U_,n0){return d_.type="throw",d_.arg=uy,Dy.next=U_,n0&&(Dy.method="next",Dy.arg=void 0),!!n0}for(var Oy=this.tryEntries.length-1;0<=Oy;--Oy){var Wy=this.tryEntries[Oy],d_=Wy.completion;if("root"===Wy.tryLoc)return zy("end");if(Wy.tryLoc<=this.prev){var Uy=_e.call(Wy,"catchLoc"),e0=_e.call(Wy,"finallyLoc");if(Uy&&e0){if(this.prev<Wy.catchLoc)return zy(Wy.catchLoc,!0);if(this.prev<Wy.finallyLoc)return zy(Wy.finallyLoc)}else if(Uy){if(this.prev<Wy.catchLoc)return zy(Wy.catchLoc,!0)}else{if(!e0)throw new Error("try statement without catch or finally");if(this.prev<Wy.finallyLoc)return zy(Wy.finallyLoc)}}}},abrupt:function(uy,Dy){for(var zy=this.tryEntries.length-1;0<=zy;--zy){var Oy=this.tryEntries[zy];if(Oy.tryLoc<=this.prev&&_e.call(Oy,"finallyLoc")&&this.prev<Oy.finallyLoc){var Wy=Oy;break}}var d_=(Wy=Wy&&("break"===uy||"continue"===uy)&&Wy.tryLoc<=Dy&&Dy<=Wy.finallyLoc?null:Wy)?Wy.completion:{};return d_.type=uy,d_.arg=Dy,Wy?(this.method="next",this.next=Wy.finallyLoc,_m):this.complete(d_)},complete:function(uy,Dy){if("throw"===uy.type)throw uy.arg;return"break"===uy.type||"continue"===uy.type?this.next=uy.arg:"return"===uy.type?(this.rval=this.arg=uy.arg,this.method="return",this.next="end"):"normal"===uy.type&&Dy&&(this.next=Dy),_m},finish:function(uy){for(var Dy=this.tryEntries.length-1;0<=Dy;--Dy){var zy=this.tryEntries[Dy];if(zy.finallyLoc===uy)return this.complete(zy.completion,zy.afterLoc),by(zy),_m}},catch:function(uy){for(var Dy=this.tryEntries.length-1;0<=Dy;--Dy){var zy,Oy,Wy=this.tryEntries[Dy];if(Wy.tryLoc===uy)return"throw"===(zy=Wy.completion).type&&(Oy=zy.arg,by(Wy)),Oy}throw new Error("illegal catch attempt")},delegateYield:function(uy,Dy,zy){return this.delegate={iterator:ky(uy),resultName:Dy,nextLoc:zy},"next"===this.method&&(this.arg=void 0),_m}},_l}function g(_l){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Q){return typeof Q}:function(Q){return Q&&"function"==typeof Symbol&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q})(_l)}function v(_l,Q,_e,_i,_o,Fa,bc){try{var pd=_l[Fa](bc),_p=pd.value}catch(_m){return void _e(_m)}pd.done?Q(_p):Promise.resolve(_p).then(_i,_o)}function w(_l,Q){if(!(_l instanceof Q))throw new TypeError("Cannot call a class as a function")}function k(_l,Q){for(var _e=0;_e<Q.length;_e++){var _i=Q[_e];_i.enumerable=_i.enumerable||!1,_i.configurable=!0,"value"in _i&&(_i.writable=!0),Object.defineProperty(_l,_i.key,_i)}}function j(_l,Q,_e){return Q&&k(_l.prototype,Q),_e&&k(_l,_e),Object.defineProperty(_l,"prototype",{writable:!1}),_l}function G(_l,Q,_e){return Q in _l?Object.defineProperty(_l,Q,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_l[Q]=_e,_l}function q(_l,Q){if("function"!=typeof Q&&null!==Q)throw new TypeError("Super expression must either be null or a function");_l.prototype=Object.create(Q&&Q.prototype,{constructor:{value:_l,writable:!0,configurable:!0}}),Object.defineProperty(_l,"prototype",{writable:!1}),Q&&_r(_l,Q)}function _t(_l){return(_t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Q){return Q.__proto__||Object.getPrototypeOf(Q)})(_l)}function _r(_l,Q){return(_r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(_e,_i){return _e.__proto__=_i,_e})(_l,Q)}function _s(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ga(_l,Q,_e){return(ga=_s()?Reflect.construct.bind():function(_i,_o,Fa){var bc=[null];return bc.push.apply(bc,_o),_o=new(Function.bind.apply(_i,bc)),Fa&&_r(_o,Fa.prototype),_o}).apply(null,arguments)}function _u(_l){if(void 0===_l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _l}function _f(_l){var Q=_s();return function(){var _e,_i=_t(_l);if(_e=Q?(_e=_t(this).constructor,Reflect.construct(_i,arguments,_e)):_i.apply(this,arguments),_i=this,_e&&("object"==typeof _e||"function"==typeof _e))return _e;if(void 0!==_e)throw new TypeError("Derived constructors may only return object or undefined");return _u(_i)}}function _h(){return(_h=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(_l,Q,_e){var _i=function(_o,Fa){for(;!Object.prototype.hasOwnProperty.call(_o,Fa)&&null!==(_o=_t(_o)););return _o}(_l,Q);if(_i)return(_i=Object.getOwnPropertyDescriptor(_i,Q)).get?_i.get.call(arguments.length<3?_l:_e):_i.value}).apply(this,arguments)}function ad(_l,Q){return function(_e){if(Array.isArray(_e))return _e}(_l)||function(_e,_i){var _o=null==_e?null:typeof Symbol<"u"&&_e[Symbol.iterator]||_e["@@iterator"];if(null!=_o){var Fa,bc,pd=[],_p=!0,_m=!1;try{for(_o=_o.call(_e);!(_p=(Fa=_o.next()).done)&&(pd.push(Fa.value),!_i||pd.length!==_i);_p=!0);}catch(oy){_m=!0,bc=oy}finally{try{_p||null==_o.return||_o.return()}finally{if(_m)throw bc}}return pd}}(_l,Q)||sy(_l,Q)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ey(_l){return function(Q){if(Array.isArray(Q))return ly(Q)}(_l)||function(Q){if(typeof Symbol<"u"&&null!=Q[Symbol.iterator]||null!=Q["@@iterator"])return Array.from(Q)}(_l)||sy(_l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sy(_l,Q){if(_l){if("string"==typeof _l)return ly(_l,Q);var _e=Object.prototype.toString.call(_l).slice(8,-1);return"Map"===(_e="Object"===_e&&_l.constructor?_l.constructor.name:_e)||"Set"===_e?Array.from(_l):"Arguments"===_e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_e)?ly(_l,Q):void 0}}function ly(_l,Q){(null==Q||Q>_l.length)&&(Q=_l.length);for(var _e=0,_i=new Array(Q);_e<Q;_e++)_i[_e]=_l[_e];return _i}n(".H_l_right .venues-ui__drawings .trigger.button--active .arrow {\n  transform: rotate(90deg);\n}\n.H_l_right .venues-ui__drawings .drawings {\n  right: 45px;\n  left: initial;\n}");var dy=function(){q(Q,H.map.Feature);var _l=_f(Q);function Q(_e){var _i;return w(this,Q),(_i=_l.call(this)).id=_e.id,_i.model=_e,_i}return j(Q,[{key:"getData",value:function(){return this.model}},{key:"getAddress",value:function(){return this.model.getInternalAddress()}},{key:"getCenter",value:function(){var _e=(_i=ad(this.model.getCenter(),2))[0],_i=_i[1];return new H.geo.Point(_i,_e)}},{key:"getId",value:function(){return this.model.getId()}},{key:"getIdentifier",value:function(){return this.model.getIdentifier()}},{key:"getName",value:function(){return this.model.getDisplayName()}},{key:"toGeoJSON",value:function(){return this.model.toJSON()}},{key:"getLevel",value:function(){return this.getParentEventTarget()}},{key:"getVenue",value:function(){return this.getLevel().getDrawing().getParentEventTarget()}}]),Q}(),vy=function(){q(Q,H.map.Feature);var _l=_f(Q);function Q(_e){var _i;return w(this,Q),(_i=_l.call(this)).id=_e.id,_i.model=_e,_i}return j(Q,[{key:"getData",value:function(){return this.model}},{key:"getBoundingBox",value:function(){return ga(H.geo.Rect,ey(this.model.getBoundingBox()))}},{key:"getCenter",value:function(){var _e=(_i=ad(this.model.getCenter(),2))[0],_i=_i[1];return new H.geo.Point(_i,_e)}},{key:"getId",value:function(){return this.model.getId()}},{key:"getIdentifier",value:function(){return this.model.getIdentifier()}},{key:"getName",value:function(){return this.model.getDisplayName()}},{key:"getLevel",value:function(_e){return this.getLevels().find(function(_i){return _i.getIdentifier()===_e})}},{key:"getLevels",value:function(){var _e=this.getData().getLevels().map(function(_i){return _i.getIdentifier()});return this.getVenue().getLevels().filter(function(_i){return-1!==_e.indexOf(_i.id)})}},{key:"getMainLevel",value:function(){return this.getLevel(this.model.getMainLevel().getIdentifier())}},{key:"getVenue",value:function(){return this.getParentEventTarget()}}]),Q}(),Ay=function(){q(Q,H.map.Feature);var _l=_f(Q);function Q(_e){var _i;return w(this,Q),(_i=_l.call(this)).id=_e.id,_i.model=_e,_i}return j(Q,[{key:"getGeometry",value:function(_e){return this.getGeometries().find(function(_i){return _i.getIdentifier()===_e})}},{key:"getGeometries",value:function(){var _e=this.getData().getGeometries().map(function(_i){return _i.getIdentifier()});return this.getDrawing().getVenue().getGeometries().filter(function(_i){return-1!==_e.indexOf(_i.id)})}},{key:"getData",value:function(){return this.model}},{key:"getId",value:function(){return this.model.getId()}},{key:"getIdentifier",value:function(){return this.model.getIdentifier()}},{key:"getName",value:function(){return this.model.getDisplayName()}},{key:"getShortName",value:function(){return this.model.getShortName()}},{key:"getZIndex",value:function(){return this.model.getZIndex()}},{key:"isMain",value:function(){return this.model.isMain()}},{key:"getDrawing",value:function(){return this.getParentEventTarget()}},{key:"getVenue",value:function(){return this.getDrawing().getParentEventTarget()}}]),Q}();function Sy(_l,Q,_e,_i){for(var _o,Fa=_i,bc=_e-Q>>1,pd=_e-Q,_p=_l[Q],_m=_l[Q+1],oy=_l[_e],ry=_l[_e+1],hy=Q+3;hy<_e;hy+=3){var xy=(By=_l[hy],My=_l[hy+1],_v=void 0,wy=void 0,ky=void 0,ky=(by=ry)-(Ly=_m),0==(wy=(Ey=oy)-($y=_p))&&0===ky||(1<(_v=((By-$y)*wy+(My-Ly)*ky)/(wy*wy+ky*ky))?($y=Ey,Ly=by):0<_v&&($y+=wy*_v,Ly+=ky*_v)),(wy=By-$y)*wy+(ky=My-Ly)*ky);Fa<xy?(_o=hy,Fa=xy):xy===Fa&&(xy=Math.abs(hy-bc))<pd&&(_o=hy,pd=xy)}var By,My,$y,Ly,Ey,by,_v,wy,ky;_i<Fa&&(3<_o-Q&&Sy(_l,Q,_o,_i),_l[_o+2]=Fa,3<_e-_o&&Sy(_l,_o,_e,_i))}function jy(_o,pd,_e,_i){var Fa=_o={id:void 0===_o?null:_o,type:pd,geometry:_e,tags:_i,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},bc=Fa.geometry;if("Point"===(pd=Fa.type)||"MultiPoint"===pd||"LineString"===pd)Qy(Fa,bc);else if("Polygon"===pd||"MultiLineString"===pd)for(var _p=0;_p<bc.length;_p++)Qy(Fa,bc[_p]);else if("MultiPolygon"===pd)for(_p=0;_p<bc.length;_p++)for(var _m=0;_m<bc[_p].length;_m++)Qy(Fa,bc[_p][_m]);return _o}function Qy(_l,Q){for(var _e=0;_e<Q.length;_e+=3)_l.minX=Math.min(_l.minX,Q[_e]),_l.minY=Math.min(_l.minY,Q[_e+1]),_l.maxX=Math.max(_l.maxX,Q[_e]),_l.maxY=Math.max(_l.maxY,Q[_e+1])}function Ny(_l,Q,_e,_i){if(Q.geometry){var _o=Q.geometry.coordinates,Fa=Q.geometry.type,bc=Math.pow(_e.tolerance/((1<<_e.maxZoom)*_e.extent),2),pd=[],_p=Q.id;if(_e.promoteId?_p=Q.properties[_e.promoteId]:_e.generateId&&(_p=_i||0),"Point"===Fa)P_(_o,pd);else if("MultiPoint"===Fa)for(var _m=0;_m<_o.length;_m++)P_(_o[_m],pd);else if("LineString"===Fa)l_(_o,pd,bc,!1);else if("MultiLineString"===Fa){if(_e.lineMetrics){for(_m=0;_m<_o.length;_m++)l_(_o[_m],pd=[],bc,!1),_l.push(jy(_p,"LineString",pd,Q.properties));return}K_(_o,pd,bc,!1)}else if("Polygon"===Fa)K_(_o,pd,bc,!0);else{if("MultiPolygon"!==Fa){if("GeometryCollection"!==Fa)throw new Error("Input data is not a valid GeoJSON object.");for(_m=0;_m<Q.geometry.geometries.length;_m++)Ny(_l,{id:_p,geometry:Q.geometry.geometries[_m],properties:Q.properties},_e,_i);return}for(_m=0;_m<_o.length;_m++){var oy=[];K_(_o[_m],oy,bc,!0),pd.push(oy)}}_l.push(jy(_p,Fa,pd,Q.properties))}}function P_(_l,Q){Q.push(p_(_l[0])),Q.push(qy(_l[1])),Q.push(0)}function l_(_l,Q,_e,_i){for(var _o,Fa,bc=0,pd=0;pd<_l.length;pd++){var _p=p_(_l[pd][0]),_m=qy(_l[pd][1]);Q.push(_p),Q.push(_m),Q.push(0),0<pd&&(bc+=_i?(_o*_m-_p*Fa)/2:Math.sqrt(Math.pow(_p-_o,2)+Math.pow(_m-Fa,2))),_o=_p,Fa=_m}var oy=Q.length-3;Q[2]=1,Sy(Q,0,oy,_e),Q[2+oy]=1,Q.size=Math.abs(bc),Q.start=0,Q.end=Q.size}function K_(_l,Q,_e,_i){for(var _o=0;_o<_l.length;_o++){var Fa=[];l_(_l[_o],Fa,_e,_i),Q.push(Fa)}}function p_(_l){return _l/360+.5}function qy(_l){return _l=Math.sin(_l*Math.PI/180),(_l=.5-.25*Math.log((1+_l)/(1-_l))/Math.PI)<0?0:1<_l?1:_l}function I_(_l,Q,_e,_i,_o,Fa,bc,pd){if(_i/=Q,(_e/=Q)<=Fa&&bc<_i)return _l;if(bc<_e||_i<=Fa)return null;for(var _p=[],_m=0;_m<_l.length;_m++){var oy=_l[_m],ry=oy.geometry,hy=oy.type,xy=0===_o?oy.minX:oy.minY,By=0===_o?oy.maxX:oy.maxY;if(_e<=xy&&By<_i)_p.push(oy);else if(!(By<_e||_i<=xy)){var My=[];if("Point"===hy||"MultiPoint"===hy){_v=ky=Ly=void 0;for(var $y=ry,Ly=My,Ey=_e,by=_i,wy=_o,ky=0;ky<$y.length;ky+=3){var _v=$y[ky+wy];Ey<=_v&&_v<=by&&(Ly.push($y[ky]),Ly.push($y[ky+1]),Ly.push($y[ky+2]))}}else if("LineString"===hy)S0(ry,My,_e,_i,_o,!1,pd.lineMetrics);else if("MultiLineString"===hy)j_(ry,My,_e,_i,_o,!1);else if("Polygon"===hy)j_(ry,My,_e,_i,_o,!0);else if("MultiPolygon"===hy)for(var uy=0;uy<ry.length;uy++){var Dy=[];j_(ry[uy],Dy,_e,_i,_o,!0),Dy.length&&My.push(Dy)}if(My.length)if(pd.lineMetrics&&"LineString"===hy)for(uy=0;uy<My.length;uy++)_p.push(jy(oy.id,hy,My[uy],oy.tags));else"LineString"!==hy&&"MultiLineString"!==hy||(1===My.length?(hy="LineString",My=My[0]):hy="MultiLineString"),"Point"!==hy&&"MultiPoint"!==hy||(hy=3===My.length?"Point":"MultiPoint"),_p.push(jy(oy.id,hy,My,oy.tags))}}return _p.length?_p:null}function S0(_l,Q,_e,_i,_o,Fa,bc){for(var pd,_p,_m=c1(_l),oy=0===_o?z1:b0,ry=_l.start,hy=0;hy<_l.length-3;hy+=3){var by=_l[hy],wy=_l[hy+1],ky=_l[hy+2],xy=_l[hy+3],By=_l[hy+4],My=0===_o?by:wy,$y=0===_o?xy:By,Ly=!1;bc&&(pd=Math.sqrt(Math.pow(by-xy,2)+Math.pow(wy-By,2))),My<_e?_e<$y&&(_p=oy(_m,by,wy,xy,By,_e),bc&&(_m.start=ry+pd*_p)):_i<My?$y<_i&&(_p=oy(_m,by,wy,xy,By,_i),bc&&(_m.start=ry+pd*_p)):G_(_m,by,wy,ky),$y<_e&&_e<=My&&(_p=oy(_m,by,wy,xy,By,_e),Ly=!0),_i<$y&&My<=_i&&(_p=oy(_m,by,wy,xy,By,_i),Ly=!0),!Fa&&Ly&&(bc&&(_m.end=ry+pd*_p),Q.push(_m),_m=c1(_l)),bc&&(ry+=pd)}var Ey=_l.length-3;by=_l[Ey],wy=_l[1+Ey],ky=_l[2+Ey],_e<=(My=0===_o?by:wy)&&My<=_i&&G_(_m,by,wy,ky),Ey=_m.length-3,Fa&&3<=Ey&&(_m[Ey]!==_m[0]||_m[1+Ey]!==_m[1])&&G_(_m,_m[0],_m[1],_m[2]),_m.length&&Q.push(_m)}function c1(_l){var Q=[];return Q.size=_l.size,Q.start=_l.start,Q.end=_l.end,Q}function j_(_l,Q,_e,_i,_o,Fa){for(var bc=0;bc<_l.length;bc++)S0(_l[bc],Q,_e,_i,_o,Fa,!1)}function G_(_l,Q,_e,_i){_l.push(Q),_l.push(_e),_l.push(_i)}function z1(_l,Q,_e,_i,_o,Fa){return _i=(Fa-Q)/(_i-Q),_l.push(Fa),_l.push(_e+(_o-_e)*_i),_l.push(1),_i}function b0(_l,Q,_e,_i,_o,Fa){return _l.push(Q+(_i-Q)*(_o=(Fa-_e)/(_o-_e))),_l.push(Fa),_l.push(1),_o}function k1(_l,Q){for(var _e=[],_i=0;_i<_l.length;_i++){var _o=_l[_i],Fa=_o.type;if("Point"===Fa||"MultiPoint"===Fa||"LineString"===Fa)bc=X_(_o.geometry,Q);else if("MultiLineString"===Fa||"Polygon"===Fa)for(var bc=[],pd=0;pd<_o.geometry.length;pd++)bc.push(X_(_o.geometry[pd],Q));else if("MultiPolygon"===Fa)for(bc=[],pd=0;pd<_o.geometry.length;pd++){for(var _p=[],_m=0;_m<_o.geometry[pd].length;_m++)_p.push(X_(_o.geometry[pd][_m],Q));bc.push(_p)}_e.push(jy(_o.id,Fa,bc,_o.tags))}return _e}function X_(_l,Q){var _e=[];_e.size=_l.size,void 0!==_l.start&&(_e.start=_l.start,_e.end=_l.end);for(var _i=0;_i<_l.length;_i+=3)_e.push(_l[_i]+Q,_l[_i+1],_l[_i+2]);return _e}function N_(_l,Q){if(!_l.transformed){for(var _e,_i=1<<_l.z,_o=_l.x,Fa=_l.y,bc=0;bc<_l.features.length;bc++){var pd=_l.features[bc],_p=pd.geometry,_m=pd.type;if(pd.geometry=[],1===_m)for(_e=0;_e<_p.length;_e+=2)pd.geometry.push(o0(_p[_e],_p[_e+1],Q,_i,_o,Fa));else for(_e=0;_e<_p.length;_e++){for(var oy=[],ry=0;ry<_p[_e].length;ry+=2)oy.push(o0(_p[_e][ry],_p[_e][ry+1],Q,_i,_o,Fa));pd.geometry.push(oy)}}_l.transformed=!0}return _l}function o0(_l,Q,_e,_i,_o,Fa){return[Math.round(_e*(_l*_i-_o)),Math.round(_e*(Q*_i-Fa))]}function c_(_l,Q,_e,_i,_o){for(var Fa=Q===_o.maxZoom?0:_o.tolerance/((1<<Q)*_o.extent),bc={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:_e,y:_i,z:Q,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},pd=0;pd<_l.length;pd++){bc.numFeatures++,by=Ey=Ly=$y=My=By=xy=by=_p=void 0;var _p=bc,_m=_l[pd],oy=Fa,by=_o,ry=_m.geometry,hy=_m.type,xy=[];if("Point"===hy||"MultiPoint"===hy)for(var By=0;By<ry.length;By+=3)xy.push(ry[By]),xy.push(ry[By+1]),_p.numPoints++,_p.numSimplified++;else if("LineString"===hy)yx(xy,ry,_p,oy,!1,!1);else if("MultiLineString"===hy||"Polygon"===hy)for(By=0;By<ry.length;By++)yx(xy,ry[By],_p,oy,"Polygon"===hy,0===By);else if("MultiPolygon"===hy)for(var My=0;My<ry.length;My++){var $y=ry[My];for(By=0;By<$y.length;By++)yx(xy,$y[By],_p,oy,!0,0===By)}if(xy.length){var Ly=_m.tags||null;if("LineString"===hy&&by.lineMetrics){for(var Ey in Ly={},_m.tags)Ly[Ey]=_m.tags[Ey];Ly.mapbox_clip_start=ry.start/ry.size,Ly.mapbox_clip_end=ry.end/ry.size}by={geometry:xy,type:"Polygon"===hy||"MultiPolygon"===hy?3:"LineString"===hy||"MultiLineString"===hy?2:1,tags:Ly},null!==_m.id&&(by.id=_m.id),_p.features.push(by)}var wy=_l[pd].minY,ky=_l[pd].maxX,_v=_l[pd].maxY;(by=_l[pd].minX)<bc.minX&&(bc.minX=by),wy<bc.minY&&(bc.minY=wy),ky>bc.maxX&&(bc.maxX=ky),_v>bc.maxY&&(bc.maxY=_v)}return bc}function yx(_l,Q,_e,_i,_o,Fa){var bc=_i*_i;if(0<_i&&Q.size<(_o?bc:_i))_e.numPoints+=Q.length/3;else{for(var pd=[],_p=0;_p<Q.length;_p+=3)(0===_i||Q[_p+2]>bc)&&(_e.numSimplified++,pd.push(Q[_p]),pd.push(Q[_p+1])),_e.numPoints++;if(_o){for(var _m=pd,oy=(_o=Fa,0),ry=0,hy=_m.length,xy=hy-2;ry<hy;xy=ry,ry+=2)oy+=(_m[ry]-_m[xy])*(_m[ry+1]+_m[xy+1]);if(0<oy===_o)for(ry=0,hy=_m.length;ry<hy/2;ry+=2){var By=_m[ry],My=_m[ry+1];_m[ry]=_m[hy-2-ry],_m[ry+1]=_m[hy-1-ry],_m[hy-2-ry]=By,_m[hy-1-ry]=My}}_l.push(pd)}}function u1(_p,Q){var _i,_o,Fa,bc,pd,_e=(Q=this.options=function(_m,oy){for(var ry in oy)_m[ry]=oy[ry];return _m}(Object.create(this.options),Q)).debug;if(_e&&console.time("preprocess data"),Q.maxZoom<0||24<Q.maxZoom)throw new Error("maxZoom should be in the 0-24 range");if(Q.promoteId&&Q.generateId)throw new Error("promoteId and generateId cannot be used together.");_p=function(_m,oy){var ry=[];if("FeatureCollection"===_m.type)for(var hy=0;hy<_m.features.length;hy++)Ny(ry,_m.features[hy],oy,hy);else Ny(ry,"Feature"===_m.type?_m:{geometry:_m},oy);return ry}(_p,Q),this.tiles={},this.tileCoords=[],_e&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Q.indexMaxZoom,Q.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),bc=I_(Fa=_i=_p,1,-1-(_o=Q.buffer/Q.extent),_o,0,-1,2,Q),pd=I_(_i,1,1-_o,2+_o,0,-1,2,Q),(bc||pd)&&(Fa=I_(_i,1,-_o,1+_o,0,-1,2,Q)||[],bc&&(Fa=k1(bc,1).concat(Fa)),pd&&(Fa=Fa.concat(k1(pd,-1)))),(_p=Fa).length&&this.splitTile(_p,0,0,0),_e&&(_p.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function q0(_l,Q,_e){return 32*((1<<_l)*_e+Q)+_l}function _1(_l,Q,bc,_i,_o){var Fa;return(Fa=[])[0]=(_l[0]/_o+bc)/(Q=1<<Q),Fa[1]=(_l[1]/_o+_i)/Q,_o=(_l=bc={x:Fa[0],y:Fa[1]}).x,_l=_l.y,_o=360*(_o-.5),_i=Math.exp(Math.PI*(.5-_l)/.25)-1,_l=Math.exp(Math.PI*(.5-_l)/.25)+1,[_o,180*Math.asin(_i/_l)/Math.PI]}u1.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},u1.prototype.splitTile=function(_l,Q,_e,_i,_o,Fa,bc){for(var pd=[_l,Q,_e,_i],_p=this.options,_m=_p.debug;pd.length;){_i=pd.pop(),_e=pd.pop(),Q=pd.pop(),_l=pd.pop();var oy,ry,hy,xy,By,My,$y,Ly,Ey,by=1<<Q,wy=q0(Q,_e,_i),ky=this.tiles[wy];if(ky||(1<_m&&console.time("creation"),ky=this.tiles[wy]=c_(_l,Q,_e,_i,_p),this.tileCoords.push({z:Q,x:_e,y:_i}),_m&&(1<_m&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Q,_e,_i,ky.numFeatures,ky.numPoints,ky.numSimplified),console.timeEnd("creation")),this.stats[wy="z"+Q]=(this.stats[wy]||0)+1,this.total++)),ky.source=_l,_o){if(Q===_p.maxZoom||Q===_o)continue;if(wy=1<<_o-Q,_e!==Math.floor(Fa/wy)||_i!==Math.floor(bc/wy))continue}else if(Q===_p.indexMaxZoom||ky.numPoints<=_p.indexMaxPoints)continue;ky.source=null,0!==_l.length&&(1<_m&&console.time("clipping"),oy=.5-(wy=.5*_p.buffer/_p.extent),hy=1+wy,$y=xy=By=My=null,Ly=I_(_l,by,_e-wy,_e+(ry=.5+wy),0,ky.minX,ky.maxX,_p),Ey=I_(_l,by,_e+oy,_e+hy,0,ky.minX,ky.maxX,_p),_l=null,Ly&&($y=I_(Ly,by,_i-wy,_i+ry,1,ky.minY,ky.maxY,_p),xy=I_(Ly,by,_i+oy,_i+hy,1,ky.minY,ky.maxY,_p),Ly=null),Ey&&(By=I_(Ey,by,_i-wy,_i+ry,1,ky.minY,ky.maxY,_p),My=I_(Ey,by,_i+oy,_i+hy,1,ky.minY,ky.maxY,_p),Ey=null),1<_m&&console.timeEnd("clipping"),pd.push($y||[],Q+1,2*_e,2*_i),pd.push(xy||[],Q+1,2*_e,2*_i+1),pd.push(By||[],Q+1,2*_e+1,2*_i),pd.push(My||[],Q+1,2*_e+1,2*_i+1))}},u1.prototype.getTile=function(_l,Q,_e){var _i=(_o=this.options).extent,_o=_o.debug;if(_l<0||24<_l)return null;var Fa=q0(_l,Q=(Q%(Fa=1<<_l)+Fa)%Fa,_e);if(this.tiles[Fa])return N_(this.tiles[Fa],_i);1<_o&&console.log("drilling down to z%d-%d-%d",_l,Q,_e);for(var bc,pd=_l,_p=Q,_m=_e;!bc&&0<pd;)pd--,_p=Math.floor(_p/2),_m=Math.floor(_m/2),bc=this.tiles[q0(pd,_p,_m)];return bc&&bc.source?(1<_o&&console.log("found parent tile z%d-%d-%d",pd,_p,_m),1<_o&&console.time("drilling down"),this.splitTile(bc.source,pd,_p,_m,_l,Q,_e),1<_o&&console.timeEnd("drilling down"),this.tiles[Fa]?N_(this.tiles[Fa],_i):null):null};var P0_POINT="Point",P0_POLYGON="Polygon",P0_MULTI_POINT="MultiPoint",P0_MULTI_LINESTRING="MultiLineString",P0_MULTI_POLYGON="MultiPolygon",g1={fillColor:"#e0e0e0",outlineColor:"#829DB4",outlineWidth:1},JE={fillColor:"#F2F285",outlineColor:"#0088BF",outlineWidth:1.2},v0={FOOTPRINT:"FOOTPRINT",ICON:"ICON",TEXT:"TEXT",VECTOR:"VECTOR"},QE=Object.freeze({v1:1,v2:2}),Jb=function(_l){return 0<(_l=function(Q){for(var _e=0,_i=Q.length,_o=0;_o<_i-1;_o+=1){var Fa=Q[_o],bc=Q[_o+1];_e+=Fa[0]*bc[1]-bc[0]*Fa[1]}return _e+(Q[_i-1][0]*Q[0][1]-Q[0][0]*Q[_i-1][1])}(_l))?"CW":_l<0?"CCW":void 0};!function(_l){function Q(_o){if(_i[_o])return _i[_o].exports;var Fa=_i[_o]={i:_o,l:!1,exports:{}};return _e[_o].call(Fa.exports,Fa,Fa.exports,Q),Fa.l=!0,Fa.exports}var _e,_i;_l.exports=(_e=[function(_o,Fa,ry){function pd(hy){return(pd="function"==typeof Symbol&&"symbol"==g(Symbol.iterator)?function(xy){return g(xy)}:function(xy){return xy&&"function"==typeof Symbol&&xy.constructor===Symbol&&xy!==Symbol.prototype?"symbol":g(xy)})(hy)}var _p=ry(1),_m=(ry=ry(7)).get,oy=ry.isArray;ry=function(){function hy(Ly,A_){var by=void 0===(by=A_.location)?0:by,wy=void 0===(wy=A_.distance)?100:wy,ky=void 0===(ky=A_.threshold)?.6:ky,_v=void 0===(_v=A_.maxPatternLength)?32:_v,uy=void 0!==(uy=A_.caseSensitive)&&uy,Dy=void 0===(Dy=A_.tokenSeparator)?/ +/g:Dy,zy=void 0!==(zy=A_.findAllMatches)&&zy,Oy=void 0===(Oy=A_.minMatchCharLength)?1:Oy,Wy=void 0===(Wy=A_.id)?null:Wy,d_=void 0===(d_=A_.keys)?[]:d_,Uy=void 0===(Uy=A_.shouldSort)||Uy,e0=void 0===(e0=A_.getFn)?_m:e0,U_=void 0===(U_=A_.sortFn)?function(I0,k_){return I0.score-k_.score}:U_,n0=void 0!==(n0=A_.tokenize)&&n0,z_=void 0!==(z_=A_.matchAllTokens)&&z_,l0=void 0!==(l0=A_.includeMatches)&&l0,T_=void 0!==(T_=A_.includeScore)&&T_;if(A_=void 0!==(A_=A_.verbose)&&A_,!(this instanceof hy))throw new TypeError("Cannot call a class as a function");this.options={location:by,distance:wy,threshold:ky,maxPatternLength:_v,isCaseSensitive:uy,tokenSeparator:Dy,findAllMatches:zy,minMatchCharLength:Oy,id:Wy,keys:d_,includeMatches:l0,includeScore:T_,shouldSort:Uy,getFn:e0,sortFn:U_,verbose:A_,tokenize:n0,matchAllTokens:z_},this.setCollection(Ly),this._processKeys(d_)}for(var xy=hy.prototype,By=[{key:"setCollection",value:function(Ly){return this.list=Ly}},{key:"_processKeys",value:function(Ly){if(this._keyWeights={},this._keyNames=[],Ly.length&&"string"==typeof Ly[0])for(var Ey=0,by=Ly.length;Ey<by;Ey+=1){var wy=Ly[Ey];this._keyWeights[wy]=1,this._keyNames.push(wy)}else{for(var ky=null,_v=null,uy=0,Dy=0,zy=Ly.length;Dy<zy;Dy+=1){var Oy=Ly[Dy];if(!Oy.hasOwnProperty("name"))throw new Error('Missing "name" property in key object');var Wy=Oy.name;if(this._keyNames.push(Wy),!Oy.hasOwnProperty("weight"))throw new Error('Missing "weight" property in key object');if((Oy=Oy.weight)<0||1<Oy)throw new Error('"weight" property in key must bein the range of [0, 1)');_v=null==_v?Oy:Math.max(_v,Oy),ky=null==ky?Oy:Math.min(ky,Oy),uy+=this._keyWeights[Wy]=Oy}if(1<uy)throw new Error("Total of weights cannot exceed 1")}}},{key:"search",value:function(by){var Ey=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{limit:!1},wy=(this._log('---------\nSearch pattern: "'.concat(by,'"')),by=this._prepareSearchers(by),this._search(wy=by.tokenSearchers,by=by.fullSearcher));return this._computeScore(wy),this.options.shouldSort&&this._sort(wy),Ey.limit&&"number"==typeof Ey.limit&&(wy=wy.slice(0,Ey.limit)),this._format(wy)}},{key:"_prepareSearchers",value:function(){var Ly=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",Ey=[];if(this.options.tokenize)for(var by=Ly.split(this.options.tokenSeparator),wy=0,ky=by.length;wy<ky;wy+=1)Ey.push(new _p(by[wy],this.options));return{tokenSearchers:Ey,fullSearcher:new _p(Ly,this.options)}}},{key:"_search",value:function(){var Ly=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],Ey=1<arguments.length?arguments[1]:void 0,by=this.list,wy={},ky=[];if("string"==typeof by[0])for(var _v=0,uy=by.length;_v<uy;_v+=1)this._analyze({key:"",value:by[_v],record:_v,index:_v},{resultMap:wy,results:ky,tokenSearchers:Ly,fullSearcher:Ey});else for(var Dy=0,zy=by.length;Dy<zy;Dy+=1)for(var Oy=by[Dy],Wy=0,d_=this._keyNames.length;Wy<d_;Wy+=1){var Uy=this._keyNames[Wy];this._analyze({key:Uy,value:this.options.getFn(Oy,Uy),record:Oy,index:Dy},{resultMap:wy,results:ky,tokenSearchers:Ly,fullSearcher:Ey})}return ky}},{key:"_analyze",value:function(Dy,Ey){var d_,by=this,wy=Dy.key,ky=Dy.arrayIndex,zy=void 0===(d_=Ey.tokenSearchers)?[]:d_,Oy=Ey.fullSearcher,Wy=void 0===(d_=Ey.resultMap)?{}:d_,Uy=void 0===(d_=Ey.results)?[]:d_;!function e0(U_,n0,z_,l0){if(null!=n0)if("string"==typeof n0){var T_=!1,A_=-1,I0=0,k_=(by._log("\nKey: ".concat(""===wy?"--":wy)),Oy.search(n0));if(by._log('Full text: "'.concat(n0,'", score: ').concat(k_.score)),by.options.tokenize){for(var Y0=n0.split(by.options.tokenSeparator),Kx=Y0.length,Rx=[],Ex=0,r2=zy.length;Ex<r2;Ex+=1){var Py=zy[Ex];by._log('\nPattern: "'.concat(Py.pattern,'"'));for(var OS=!1,Ry=0;Ry<Kx;Ry+=1){var Xx=Y0[Ry],CT=Py.search(Xx),DE={};CT.isMatch?(DE[Xx]=CT.score,OS=T_=!0,Rx.push(CT.score)):(DE[Xx]=1,by.options.matchAllTokens||Rx.push(1)),by._log('Token: "'.concat(Xx,'", score: ').concat(DE[Xx]))}OS&&(I0+=1)}A_=Rx[0];for(var vM=Rx.length,RS=1;RS<vM;RS+=1)A_+=Rx[RS];by._log("Token score average:",A_/=vM)}var yA=k_.score,x1=(by._log("Score average:",yA=-1<A_?(yA+A_)/2:yA),!by.options.tokenize||!by.options.matchAllTokens||I0>=zy.length);by._log("\nCheck Matches: ".concat(x1)),(T_||k_.isMatch)&&x1&&(x1={key:wy,arrayIndex:U_,value:n0,score:yA},by.options.includeMatches&&(x1.matchedIndices=k_.matchedIndices),(U_=Wy[l0])?U_.output.push(x1):(Wy[l0]={item:z_,output:[x1]},Uy.push(Wy[l0])))}else if(oy(n0))for(var P1=0,E1=n0.length;P1<E1;P1+=1)e0(P1,n0[P1],z_,l0)}(void 0===ky?-1:ky,Dy.value,Dy.record,Dy=Dy.index)}},{key:"_computeScore",value:function(Ly){this._log("\n\nComputing score:\n");for(var Ey=this._keyWeights,by=!!Object.keys(Ey).length,wy=0,ky=Ly.length;wy<ky;wy+=1){for(var _v=Ly[wy],uy=_v.output,Dy=uy.length,zy=1,Oy=0;Oy<Dy;Oy+=1){var Wy=uy[Oy],Uy=Wy.key,d_=by?Ey[Uy]:1;Uy=0===Wy.score&&Ey&&0<Ey[Uy]?Number.EPSILON:Wy.score,zy*=Math.pow(Uy,d_)}_v.score=zy,this._log(_v)}}},{key:"_sort",value:function(Ly){this._log("\n\nSorting...."),Ly.sort(this.options.sortFn)}},{key:"_format",value:function(Ly){var Ey,by=[],wy=(this.options.verbose&&(Ey=[],this._log("\n\nOutput:\n\n",JSON.stringify(Ly,function(Wy,d_){if("object"===pd(d_)&&null!==d_){if(-1!==Ey.indexOf(d_))return;Ey.push(d_)}return d_},2)),Ey=null),[]);this.options.includeMatches&&wy.push(function(Wy,d_){var Uy=Wy.output;d_.matches=[];for(var e0=0,U_=Uy.length;e0<U_;e0+=1){var n0,z_=Uy[e0];0!==z_.matchedIndices.length&&(n0={indices:z_.matchedIndices,value:z_.value},z_.key&&(n0.key=z_.key),z_.hasOwnProperty("arrayIndex")&&-1<z_.arrayIndex&&(n0.arrayIndex=z_.arrayIndex),d_.matches.push(n0))}}),this.options.includeScore&&wy.push(function(Wy,d_){d_.score=Wy.score});for(var ky=0,_v=Ly.length;ky<_v;ky+=1){var uy=Ly[ky];if(this.options.id&&(uy.item=this.options.getFn(uy.item,this.options.id)[0]),wy.length){for(var Dy={item:uy.item},zy=0,Oy=wy.length;zy<Oy;zy+=1)wy[zy](uy,Dy);by.push(Dy)}else by.push(uy.item)}return by}},{key:"_log",value:function(){var Ly;this.options.verbose&&(Ly=console).log.apply(Ly,arguments)}}],My=0;My<By.length;My++){var $y=By[My];$y.enumerable=$y.enumerable||!1,$y.configurable=!0,"value"in $y&&($y.writable=!0),Object.defineProperty(xy,$y.key,$y)}return hy}(),_o.exports=ry},function(_o,Fa,oy){var pd=oy(2),_p=oy(3),_m=oy(6);oy=function(){function ry($y,Oy){var Ey=void 0===(Ey=Oy.location)?0:Ey,by=void 0===(by=Oy.distance)?100:by,wy=void 0===(wy=Oy.threshold)?.6:wy,ky=void 0===(ky=Oy.maxPatternLength)?32:ky,_v=void 0!==(_v=Oy.isCaseSensitive)&&_v,uy=void 0===(uy=Oy.tokenSeparator)?/ +/g:uy,Dy=void 0!==(Dy=Oy.findAllMatches)&&Dy,zy=void 0===(zy=Oy.minMatchCharLength)?1:zy;if(Oy=void 0!==(Oy=Oy.includeMatches)&&Oy,!(this instanceof ry))throw new TypeError("Cannot call a class as a function");this.options={location:Ey,distance:by,threshold:wy,maxPatternLength:ky,isCaseSensitive:_v,tokenSeparator:uy,findAllMatches:Dy,includeMatches:Oy,minMatchCharLength:zy},this.pattern=_v?$y:$y.toLowerCase(),this.pattern.length<=ky&&(this.patternAlphabet=_m(this.pattern))}for(var hy=ry.prototype,xy=[{key:"search",value:function($y){var Ey=(Ly=this.options).isCaseSensitive,Ly=Ly.includeMatches;if(Ey||($y=$y.toLowerCase()),this.pattern===$y)return Ey={isMatch:!0,score:0},Ly&&(Ey.matchedIndices=[[0,$y.length-1]]),Ey;var _v=(Ey=this.options).maxPatternLength;return Ey=Ey.tokenSeparator,this.pattern.length>_v?pd($y,this.pattern,Ey):_p($y,this.pattern,this.patternAlphabet,{location:Ey=(_v=this.options).location,distance:_v.distance,threshold:_v.threshold,findAllMatches:_v.findAllMatches,minMatchCharLength:_v=_v.minMatchCharLength,includeMatches:Ly})}}],By=0;By<xy.length;By++){var My=xy[By];My.enumerable=My.enumerable||!1,My.configurable=!0,"value"in My&&(My.writable=!0),Object.defineProperty(hy,My.key,My)}return ry}(),_o.exports=oy},function(_o,Fa){var bc=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;_o.exports=function(pd,_m){var ry=2<arguments.length&&void 0!==arguments[2]?arguments[2]:/ +/g,oy=(_m=new RegExp(_m.replace(bc,"\\$&").replace(ry,"|")),pd.match(_m)),hy=[];if(ry=!!oy)for(var xy=0,By=oy.length;xy<By;xy+=1){var My=oy[xy];hy.push([pd.indexOf(My),My.length-1])}return{score:ry?.5:1,isMatch:ry,matchedIndices:hy}}},function(_o,Fa,bc){var pd=bc(4),_p=bc(5);_o.exports=function(_m,oy,ry,hy){for(var xy=hy.location,By=void 0===(My=hy.distance)?100:My,My=hy.threshold,$y=void 0!==(Ly=hy.findAllMatches)&&Ly,Ly=void 0===(Ly=hy.minMatchCharLength)?1:Ly,Ey=(hy=void 0!==(hy=hy.includeMatches)&&hy,void 0===xy?0:xy),by=_m.length,wy=void 0===My?.6:My,ky=_m.indexOf(oy,Ey),_v=oy.length,uy=[],Dy=0;Dy<by;Dy+=1)uy[Dy]=0;-1!==ky&&(xy=pd(oy,{errors:0,currentLocation:ky,expectedLocation:Ey,distance:By}),wy=Math.min(xy,wy),-1!==(ky=_m.lastIndexOf(oy,Ey+_v))&&(My=pd(oy,{errors:0,currentLocation:ky,expectedLocation:Ey,distance:By}),wy=Math.min(My,wy))),ky=-1;for(var zy=[],Oy=1,Wy=_v+by,d_=1<<(_v<=31?_v-1:30),Uy=0;Uy<_v;Uy+=1){for(var e0=0,U_=Wy;e0<U_;)pd(oy,{errors:Uy,currentLocation:Ey+U_,expectedLocation:Ey,distance:By})<=wy?e0=U_:Wy=U_,U_=Math.floor((Wy-e0)/2+e0);Wy=U_;var n0=Math.max(1,Ey-U_+1),z_=$y?by:Math.min(Ey+U_,by)+_v,l0=Array(z_+2);l0[z_+1]=(1<<Uy)-1;for(var T_=z_;n0<=T_;--T_){var A_=T_-1,I0=ry[_m.charAt(A_)];if(I0&&(uy[A_]=1),l0[T_]=(l0[T_+1]<<1|1)&I0,0!==Uy&&(l0[T_]|=(zy[T_+1]|zy[T_])<<1|1|zy[T_+1]),l0[T_]&d_&&(Oy=pd(oy,{errors:Uy,currentLocation:A_,expectedLocation:Ey,distance:By}))<=wy){if(wy=Oy,(ky=A_)<=Ey)break;n0=Math.max(1,2*Ey-ky)}}if(pd(oy,{errors:Uy+1,currentLocation:Ey,expectedLocation:Ey,distance:By})>wy)break;zy=l0}return xy={isMatch:0<=ky,score:0===Oy?.001:Oy},hy&&(xy.matchedIndices=_p(uy,Ly)),xy}},function(_o,Fa){_o.exports=function(hy,oy){var ry=oy.errors,_p=oy.currentLocation,_m=oy.expectedLocation;return oy=void 0===(oy=oy.distance)?100:oy,ry=(void 0===ry?0:ry)/hy.length,hy=Math.abs((void 0===_m?0:_m)-(void 0===_p?0:_p)),oy?ry+hy/oy:hy?1:ry}},function(_o,Fa){_o.exports=function(){for(var bc=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],pd=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,_p=[],_m=-1,oy=0,ry=bc.length;oy<ry;oy+=1){var hy=bc[oy];hy&&-1===_m?_m=oy:hy||-1===_m||((hy=oy-1)-_m+1>=pd&&_p.push([_m,hy]),_m=-1)}return bc[oy-1]&&pd<=oy-_m&&_p.push([_m,oy-1]),_p}},function(_o,Fa){_o.exports=function(bc){for(var pd={},_p=bc.length,_m=0;_m<_p;_m+=1)pd[bc.charAt(_m)]=0;for(var oy=0;oy<_p;oy+=1)pd[bc.charAt(oy)]|=1<<_p-oy-1;return pd}},function(_o,Fa){function bc(oy){return Array.isArray?Array.isArray(oy):"[object Array]"===Object.prototype.toString.call(oy)}function pd(oy){if(null==oy)return"";if("string"==typeof oy)return oy;var ry=oy+"";return"0"==ry&&1/oy==-1/0?"-0":ry}function _p(oy){return"string"==typeof oy}function _m(oy){return"number"==typeof oy}_o.exports={get:function(oy,ry){var hy=[];return function xy(By,My){if(My){var $y=My.indexOf("."),Ly=My,Ey=null,by=(-1!==$y&&(Ly=My.slice(0,$y),Ey=My.slice($y+1)),By[Ly]);if(null!=by)if(Ey||!_p(by)&&!_m(by))if(bc(by))for(var wy=0,ky=by.length;wy<ky;wy+=1)xy(by[wy],Ey);else Ey&&xy(by,Ey);else hy.push(pd(by))}else hy.push(By)}(oy,ry),hy},isArray:bc,isString:_p,isNum:_m,toString:pd}}],_i={},Q.m=_e,Q.c=_i,Q.d=function(_o,Fa,bc){Q.o(_o,Fa)||Object.defineProperty(_o,Fa,{enumerable:!0,get:bc})},Q.r=function(_o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(_o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_o,"__esModule",{value:!0})},Q.t=function(_o,Fa){if(1&Fa&&(_o=Q(_o)),8&Fa||4&Fa&&"object"==g(_o)&&_o&&_o.__esModule)return _o;var bc=Object.create(null);if(Q.r(bc),Object.defineProperty(bc,"default",{enumerable:!0,value:_o}),2&Fa&&"string"!=typeof _o)for(var pd in _o)Q.d(bc,pd,function(_p){return _o[_p]}.bind(null,pd));return bc},Q.n=function(_o){var Fa=_o&&_o.__esModule?function(){return _o.default}:function(){return _o};return Q.d(Fa,"a",Fa),Fa},Q.o=function(_o,Fa){return Object.prototype.hasOwnProperty.call(_o,Fa)},Q.p="",Q(Q.s=0))}(m_={exports:{}});var B_=(u_=m_=m_.exports)&&u_.__esModule&&Object.prototype.hasOwnProperty.call(u_,"default")?u_.default:u_,_x=j(function _l(bc){var _e=void 0===(_e=bc.addressList)?[]:_e,_i=void 0===(_i=bc.geometries)?[]:_i,_o=void 0===(_o=bc.entity)?null:_o,Fa=void 0===(Fa=bc.name)?"":Fa;bc=void 0===(bc=bc.icon)?"":bc,w(this,_l),this.addressList=_e,this.geometries=_i,this.icon=bc,this.entity=_o,this.name=Fa}),Gy={keys:[{name:"name",weight:.6},{name:"addressList",weight:.4}],threshold:.2},tT=function(){function _l(Q){w(this,_l),this.fuseSearch=null,this.levels_=null,this.searchListEntities_=[],this.searchListIcons_=[],this.searchList_=[],this.venueModel=Q,this.init()}return j(_l,[{key:"init",value:function(){var Q=this.venueModel.getGeometries().reduce(function(_e,_i){return _e[_i.getId()]=_i,_e},{});this.initEntityList(this.venueModel.getOccupant()),this.initIconList(Q),this.levels_=this.venueModel.getLevels().map(function(_e){return{levelId:_e.getId(),levelName:_e.getName(),drawingId:_e.getDrawing().getId(),drawingName:_e.getDrawing().getName()}}),Q=[].concat(ey(this.searchListEntities_),ey(this.searchListIcons_)),this.searchList_=Q.sort(function(_e,_i){return _e.name.localeCompare(_i.name)}),this.fuseSearch_=new B_(this.searchList_,Gy)}},{key:"initEntityList",value:function(){var Q=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).map(function(_e){return _e.spaceIds?new _x({geometries:_e.space,addressList:_e.spaceIds||[],name:_e.properties.name||"",entity:_e}):null}).filter(function(_e){return null!==_e});this.searchListEntities_=Q}},{key:"initIconList",value:function(){this.searchListIcons_=Object.values(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).filter(function(Q){return Q.isIcon()}).map(function(Q){var _e=Q.getIcon();return new _x({geometries:[Q],icon:_e,name:Q.properties.name||""})})}},{key:"all",value:function(){return this.searchList_}},{key:"allIconTypes",value:function(){var Q=this.searchListIcons_.reduce(function(_e,_i){return _e[_i.name]=_i.name,_e},{});return Object.keys(Q)}},{key:"find",value:function(){var Q=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return""===Q?this.searchList_:this.fuseSearch_.search(Q)}}]),_l}(),tx=Object.freeze({SITE:"SITE",IMAGES:"IMAGES",THEME:"THEME"}),EE="indoor.Site",TE="indoor.Occupant",Yx="indoor.Space",wT="Address",hA="indoor.Level",nT="indoor.Entrance",AE="SPACE_TYPE_NAME",rT="SPACE_CATEGORY_NAME",SE="Point",t1="LineString",T0="Polygon",CE="MultiPoint",ME="MultiLineString",W0="MultiPolygon",wx=Object.freeze({STANDARD:"STANDARD",FLATTEN:"FLATTEN",OUTDOOR_MAIN:"OUTDOOR_MAIN",INDOOR_MAIN:"INDOOR_MAIN",NO_OUTDOORS:"NO_OUTDOORS",FLATTEN_INDOOR_MAIN:"FLATTEN_INDOOR_MAIN",FLATTEN_OUTDOOR_COPY:"FLATTEN_OUTDOOR_COPY"}),AT="9999999999999",_g="https://interactive.data.api.platform.here.com/interactive/v1/catalogs",u_=Object.freeze({THEME:"THEME",THEME_MAP:"THEME_MAP",PRESETS:"PRESETS",SDK_STRINGS:"SDK_STRINGS",ICON_FILE:"ICON_FILE",INPUT_COLORS:"INPUT_COLORS",BASE_MAP_INFO:"BASE_MAP_INFO",CONFIG_PROFILE:"CONFIG_PROFILE",NAV_THEME:"NAV_THEME",NAV_NAME_THEME:"NAV_NAME_THEME",NAV_PROP_MAP:"NAV_PROP_MAP",NAV_STRINGS:"NAV_STRINGS",NAV_THEME_MAP:"NAV_THEME_MAP",NAV_NAME_THEME_MAP:"NAV_NAME_THEME_MAP",V4_THEME_FAMILY:"V4_THEME_FAMILY",V4_MAPTYPE_THEME:"V4_MAPTYPE_THEME",ICON:"ICON",MARKER:"MARKER",PERMISSIONS:"PERMISSIONS",NAICS_ARRAY:"NAICS_ARRAY",NAICS_MAP:"NAICS_MAP"}),ty=(Object.freeze((G(m_={},u_.THEME,"themeUrls"),G(m_,u_.THEME_MAP,"themeMapUrl"),G(m_,u_.PRESETS,"presetsUrl"),G(m_,u_.SDK_STRINGS,"stringsUrl"),m_)),Object.freeze((G(m_={},u_.THEME,"themeOverrides"),G(m_,u_.THEME_MAP,"themeMapOverrides"),G(m_,u_.PRESETS,"presetOverrides"),G(m_,u_.SDK_STRINGS,"stringsOverrides"),G(m_,u_.INPUT_COLORS,"inputColorOverrides"),m_)),Object.freeze((G(m_={},u_.THEME,["Modern","Standard","Factory","Navteq","TheBase","Westfield_noLabels","Westfield","TDM_noLabel"]),G(m_,u_.SDK_STRINGS,["Standard","SDK","sdk/standard"]),G(m_,u_.V4_THEME_FAMILY,["modern","standard"]),G(m_,u_.V4_MAPTYPE_THEME,["Airport Terminal","Airport","Casino","College Building","College Campus","Convention","General","Hospital","Outdoor","Retail","School Building","School Campus","Shopping Mall","Traffic","Train Station"]),G(m_,u_.NAV_THEME,["Factory","MapEditor"]),G(m_,u_.ICON,["Multicolor","Standard","TheBase","Factory"]),m_)),Object.freeze((G(m_={},u_.THEME,"Modern"),G(m_,u_.THEME_MAP,"Standard"),G(m_,u_.PRESETS,"Standard"),G(m_,u_.SDK_STRINGS,"Standard"),G(m_,u_.ICON_FILE,"Standard"),G(m_,u_.INPUT_COLORS,"Standard"),G(m_,u_.BASE_MAP_INFO,"Standard"),G(m_,u_.CONFIG_PROFILE,"factory"),G(m_,u_.NAV_THEME,"Factory"),G(m_,u_.NAV_NAME_THEME,"FactoryName"),G(m_,u_.NAV_PROP_MAP,"Standard"),G(m_,u_.NAV_STRINGS,"Standard"),G(m_,u_.NAV_THEME_MAP,"Standard"),G(m_,u_.NAV_NAME_THEME_MAP,"StandardName"),G(m_,u_.V4_THEME_FAMILY,"Standard"),G(m_,u_.V4_MAPTYPE_THEME,"Standard"),G(m_,u_.ICON,"Multicolor"),G(m_,u_.MARKER,"Standard"),m_)),u_=Object.freeze({GEO_JSON:"GEO_JSON",V5_MAP:"V5_MAP",V5_NAV:"V5_NAV",V5_INFO:"V5_INFO",KML:"KML",SVG:"SVG",PNG:"PNG"}),Object.freeze(G({},u_.GEO_JSON,{COMMUNITY_MAP:"COMMUNITY_MAP",COMMUNITY_ENTITY:"COMMUNITY_ENTITY",PATH_LEVEL_GEOMETRY:"PATH_LEVEL_GEOMETRY",GEOJSON_LEVEL_GEOMETRY:"GEOJSON_LEVEL_GEOMETRY"})),Object.freeze({ACCOUNT_API:"ACCOUNT_API",DEFAULT_COLLECTION:"DEFAULT_COLLECTION",CATALOG_LAYER:"CATALOG_LAYER"})),ny=Object.freeze((G(m_={},ty.ACCOUNT_API,{BASE_URL:"https://account.api.here.com/authorization/v1.1/projects/me"}),G(m_,ty.DEFAULT_COLLECTION,{BASE_URL:"https://config.data.api.platform.here.com/config/v1/catalogs",PARAMS:{CREATED_BY:"created",COLLECTION:"-collection"}}),G(m_,ty.CATALOG_LAYER,{BASE_URL:"https://interactive.data.api.platform.here.com/interactive/v1/catalogs",MOMDATA_LAYER:"9999999999999",ICON_LAYER:"icons",THEMERULE_LAYER:"config",COLLECTION_LAYER:"layers/9999999999999/search",PARAMS:{FEATURE_TYPE:{KEY:"p.featureType",VALUE:"indoor.Site"}}}),m_)),cy=Object.freeze({isIconsEnabled:!0,isMetaEnabled:!0,metaOptions:{},iconOptions:{}}),Cy=Object.freeze({GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE",PATCH:"PATCH",OPTIONS:"OPTIONS",HEAD:"HEAD"});function yy(){}function Iy(){Iy.init.call(this)}function Ky(_l){return void 0===_l._maxListeners?Iy.defaultMaxListeners:_l._maxListeners}function o_(_l,Q,_e,_i){var _o,Fa;if("function"!=typeof _e)throw new TypeError('"listener" argument must be a function');return(_o=_l._events)?(_o.newListener&&(_l.emit("newListener",Q,_e.listener||_e),_o=_l._events),Fa=_o[Q]):(_o=_l._events=new yy,_l._eventsCount=0),Fa?("function"==typeof Fa?Fa=_o[Q]=_i?[_e,Fa]:[Fa,_e]:_i?Fa.unshift(_e):Fa.push(_e),Fa.warned||(_i=Ky(_l))&&0<_i&&Fa.length>_i&&(Fa.warned=!0,(_i=new Error("Possible EventEmitter memory leak detected. "+Fa.length+" "+Q+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",_i.emitter=_l,_i.type=Q,_i.count=Fa.length,"function"==typeof console.warn?console.warn(_i):console.log(_i))):(Fa=_o[Q]=_e,++_l._eventsCount),_l}function i_(_l,Q,_e){var _i=!1;function _o(){_l.removeListener(Q,_o),_i||(_i=!0,_e.apply(_l,arguments))}return _o.listener=_e,_o}function L_(_l){var Q=this._events;if(Q){if("function"==typeof(Q=Q[_l]))return 1;if(Q)return Q.length}return 0}function V_(_l,Q){for(var _e=new Array(Q);Q--;)_e[Q]=_l[Q];return _e}function g0(_l,Q,_e){return _e===gA.ObjectType.SEGMENT_START_MARKER?0===_l?R1:null:_e===gA.ObjectType.SEGMENT_FINISH_MARKER?1===Q.length||_l===Q.length-1?BN:null:"indoor"===Q[_l].departure.place.type?n2:mA}yy.prototype=Object.create(null),(Iy.EventEmitter=Iy).usingDomains=!1,Iy.prototype.domain=void 0,Iy.prototype._events=void 0,Iy.prototype._maxListeners=void 0,Iy.defaultMaxListeners=10,Iy.init=function(){this.domain=null,Iy.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new yy,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Iy.prototype.setMaxListeners=function(_l){if("number"!=typeof _l||_l<0||isNaN(_l))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=_l,this},Iy.prototype.getMaxListeners=function(){return Ky(this)},Iy.prototype.emit=function(_l){var Q,_e,_i,_o="error"===_l,Fa=this._events;if(Fa)_o=_o&&null==Fa.error;else if(!_o)return!1;if(bc=this.domain,_o){var bc;if(_o=arguments[1],bc)return(_o=_o||new Error('Uncaught, unspecified "error" event')).domainEmitter=this,_o.domain=bc,_o.domainThrown=!1,bc.emit("error",_o),!1;throw _o instanceof Error?_o:((bc=new Error('Uncaught, unspecified "error" event. ('+_o+")")).context=_o,bc)}if(!(Q=Fa[_l]))return!1;var pd,_p="function"==typeof Q;switch(pd=arguments.length){case 1:var By=Q;if(xy=_p)By.call(this);else for(var oy=By.length,ry=V_(By,oy),hy=0;hy<oy;++hy)ry[hy].call(this);break;case 2:var xy=Q,$y=arguments[1];if(By=_p)xy.call(this,$y);else for(var Ly=xy.length,Ey=V_(xy,Ly),by=0;by<Ly;++by)Ey[by].call(this,$y);break;case 3:var Wy=Q,ky=arguments[1],_v=arguments[2];if(Oy=_p)Wy.call(this,ky,_v);else for(var uy=Wy.length,Dy=V_(Wy,uy),zy=0;zy<uy;++zy)Dy[zy].call(this,ky,_v);break;case 4:var Oy=Q,Uy=arguments[1],e0=arguments[2],U_=arguments[3];if(Wy=_p)Oy.call(this,Uy,e0,U_);else for(var n0=Oy.length,z_=V_(Oy,n0),l0=0;l0<n0;++l0)z_[l0].call(this,Uy,e0,U_);break;default:for(_e=new Array(pd-1),_i=1;_i<pd;_i++)_e[_i-1]=arguments[_i];var T_=Q,k_=_e;if(_p)T_.apply(this,k_);else for(var Y0=T_.length,Kx=V_(T_,Y0),Rx=0;Rx<Y0;++Rx)Kx[Rx].apply(this,k_)}return!0},Iy.prototype.on=Iy.prototype.addListener=function(_l,Q){return o_(this,_l,Q,!1)},Iy.prototype.prependListener=function(_l,Q){return o_(this,_l,Q,!0)},Iy.prototype.once=function(_l,Q){if("function"!=typeof Q)throw new TypeError('"listener" argument must be a function');return this.on(_l,i_(this,_l,Q)),this},Iy.prototype.prependOnceListener=function(_l,Q){if("function"!=typeof Q)throw new TypeError('"listener" argument must be a function');return this.prependListener(_l,i_(this,_l,Q)),this},Iy.prototype.removeListener=function(_l,Q){var _e,_i,_o,Fa,bc;if("function"!=typeof Q)throw new TypeError('"listener" argument must be a function');if((_i=this._events)&&(_e=_i[_l]))if(_e===Q||_e.listener&&_e.listener===Q)0==--this._eventsCount?this._events=new yy:(delete _i[_l],_i.removeListener&&this.emit("removeListener",_l,_e.listener||Q));else if("function"!=typeof _e){for(_o=-1,Fa=_e.length;0<Fa--;)if(_e[Fa]===Q||_e[Fa].listener&&_e[Fa].listener===Q){bc=_e[Fa].listener,_o=Fa;break}if(_o<0)return this;if(1===_e.length){if(_e[0]=void 0,0==--this._eventsCount)return this._events=new yy,this;delete _i[_l]}else{for(var pd=_e,_p=_o,_m=_p+1,oy=pd.length;_m<oy;_p+=1,_m+=1)pd[_p]=pd[_m];pd.pop()}_i.removeListener&&this.emit("removeListener",_l,bc||Q)}return this},Iy.prototype.removeAllListeners=function(_l){var Q,_e=this._events;if(_e){if(!_e.removeListener)return 0===arguments.length?(this._events=new yy,this._eventsCount=0):_e[_l]&&(0==--this._eventsCount?this._events=new yy:delete _e[_l]),this;if(0===arguments.length){for(var _i,_o=Object.keys(_e),Fa=0;Fa<_o.length;++Fa)"removeListener"!==(_i=_o[Fa])&&this.removeAllListeners(_i);return this.removeAllListeners("removeListener"),this._events=new yy,this._eventsCount=0,this}if("function"==typeof(Q=_e[_l]))this.removeListener(_l,Q);else if(Q)for(;this.removeListener(_l,Q[Q.length-1]),Q[0];);}return this},Iy.prototype.listeners=function(_e){var Q=this._events;return Q&&(Q=Q[_e])?"function"==typeof Q?[Q.listener||Q]:function(_i){for(var _o=new Array(_i.length),Fa=0;Fa<_o.length;++Fa)_o[Fa]=_i[Fa].listener||_i[Fa];return _o}(Q):[]},Iy.listenerCount=function(_l,Q){return"function"==typeof _l.listenerCount?_l.listenerCount(Q):L_.call(_l,Q)},Iy.prototype.listenerCount=L_,Iy.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]};var e_="venues-ui-button--active",a_="venues-ui-button",r_="venues-ui__drawings",E_="data-drawing",q_=function(){function _l(Q,_e,bc){var _o=this,Fa=(w(this,_l),this.clickHandler=bc,this.containerDiv=document.createElement("div"),this.containerDiv.setAttribute("class",r_),document.createElement("div"));(Fa.setAttribute("class","trigger ".concat(a_)),bc=document.createElement("div")).setAttribute("class","arrow arrow--down"),Fa.appendChild(bc),Fa.addEventListener("click",function(){Fa.classList.toggle(e_),_o.containerButtons.classList.toggle("drawings--open")}),this.containerDiv.appendChild(Fa),this.containerButtons=document.createElement("div"),this.containerButtons.setAttribute("class","drawings"),this.containerDiv.appendChild(this.containerButtons),_e&&this.update(_e),Q.appendChild(this.containerDiv)}return j(_l,[{key:"drawButton",value:function(Q,_e,bc){var _o=this,Fa=document.createElement("div");bc=Number(bc)===Number(Q),Fa.setAttribute("class",bc?"".concat(a_," ").concat(e_):a_),Fa.innerHTML=_e,Fa.setAttribute(E_,Q),Fa.addEventListener("click",function(){_o.switch(Q),_o.clickHandler(Q)}),this.containerButtons.appendChild(Fa)}},{key:"switch",value:function(Q){this.containerButtons.querySelectorAll(".".concat(r_," .").concat(e_)).forEach(function(_e){return _e.setAttribute("class",a_)}),(Q=this.containerButtons.querySelector("[".concat(E_,"='").concat(Q,"']")))&&Q.setAttribute("class","".concat(a_," ").concat(e_))}},{key:"update",value:function(Q){var _o,_e=this,_i=(this.containerButtons.innerHTML="",_o=(_o=Q).getDrawings(),new Map(_o.map(function(Fa){var bc=Fa.getDisplayName()||Fa.getName();return[Fa.getId(),bc]})));0<_i.size&&_i.forEach(function(_o,Fa){return _e.drawButton(Fa,_o,Q.getRootDrawing().getId())})}}]),_l}(),s0="venues-ui-button--active",W_="venues-ui-button",Z_="data-level",F_="venues-ui__levels",$1=function(){function _l(Q,_e,_i,_o){var Fa=4<arguments.length&&void 0!==arguments[4]?arguments[4]:4;w(this,_l),this.clickHandler=_o,this.levelButtonCount=Fa,this.currentScrollIndex=0,this.containerUI=document.createElement("div"),this.containerUI.setAttribute("class","".concat(F_)),this.containerButtons=document.createElement("div"),this.containerButtons.setAttribute("class","levels"),this.containerUI.appendChild(this.containerButtons),_e&&this.update(_e,_i),Q.appendChild(this.containerUI)}return j(_l,[{key:"clear",value:function(){this.containerButtons.innerHTML="",this.buttonScrollUp&&(this.containerUI.removeChild(this.buttonScrollUp),this.buttonScrollUp=null),this.buttonScrollDown&&(this.containerUI.removeChild(this.buttonScrollDown),this.buttonScrollDown=null)}},{key:"drawLevelButton",value:function(Q,_e){var _i=this,_o=document.createElement("div");_o.innerHTML=_e,_o.style.fontSize="".concat(Math.max(Math.min(28.8/_e.length,11.52),10),"px"),_o.style.display="block",_o.setAttribute("class",W_),_o.setAttribute(Z_,Q),_o.addEventListener("click",function(){_i.switch(Q),_i.clickHandler(Q)}),this.containerButtons.appendChild(_o)}},{key:"drawScrollButtons",value:function(){var _e,Q=this;((this.buttonScrollUp=document.createElement("div"),this.buttonScrollUp.setAttribute("class","".concat(W_," ").concat(W_,"--up")),_e=document.createElement("div")).setAttribute("class","arrow arrow--up"),this.buttonScrollUp.appendChild(_e),this.buttonScrollUp.addEventListener("click",function(){return Q.scroll(1)}),this.containerUI.insertBefore(this.buttonScrollUp,this.containerButtons),this.buttonScrollDown=document.createElement("div"),this.buttonScrollDown.setAttribute("class","".concat(W_," ").concat(W_,"--down")),_e=document.createElement("div")).setAttribute("class","arrow arrow--down"),this.buttonScrollDown.appendChild(_e),this.buttonScrollDown.addEventListener("click",function(){return Q.scroll(-1)}),this.containerUI.appendChild(this.buttonScrollDown)}},{key:"scroll",value:function(){var Q,_e,_i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,_o=Array.from(this.containerButtons.querySelectorAll(".".concat(W_))).reverse(),Fa=[];0<=_i?(this.currentScrollIndex=Math.min(this.currentScrollIndex+_i,_o.length-this.levelButtonCount),Q=Math.min(this.currentScrollIndex,_o.length-this.levelButtonCount),_e=Math.min(this.currentScrollIndex+this.levelButtonCount,_o.length),Fa=_o.slice(Q,_e)):_i<0&&(this.currentScrollIndex=Math.max(this.currentScrollIndex+_i,0),Q=Math.max(0,this.currentScrollIndex),_e=Math.min(_o.length,this.currentScrollIndex+this.levelButtonCount),Fa=_o.slice(Q,_e)),_o.forEach(function(bc){bc.style.display=-1!==Fa.indexOf(bc)?"block":"none"}),this.buttonScrollDown&&(0===this.currentScrollIndex?this.buttonScrollDown.setAttribute("disabled","disabled"):this.buttonScrollDown.removeAttribute("disabled")),this.buttonScrollUp&&(this.currentScrollIndex===_o.length-this.levelButtonCount?this.buttonScrollUp.setAttribute("disabled","disabled"):this.buttonScrollUp.removeAttribute("disabled"))}},{key:"switch",value:function(_i){var _e;this.containerButtons.querySelectorAll(".".concat(s0)).forEach(function(_o){return _o.setAttribute("class",W_)}),(_i=this.containerButtons.querySelector(".".concat(F_," [").concat(Z_,"='").concat(_i,"']")))&&(_e=Array.from(this.containerButtons.querySelectorAll(".".concat(W_))).reverse(),_i.setAttribute("class","".concat(W_," ").concat(s0)),((_e=_e.indexOf(_i))<this.currentScrollIndex||_e>=this.currentScrollIndex+4)&&this.scroll(_e-this.currentScrollIndex))}},{key:"update",value:function(Q,Fa){var _i,_o=this,bc=(Fa=function(){return new Map((0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).map(function(pd){return[pd.getZIndex(),pd.getShortName()||pd.getDisplayName()||pd.getName()]}))}((_i=Q,(Fa===wx.FLATTEN?(Fa=_i.getVenueModel().getLevelMapFlattenedByZIndex_(),Object.values(Fa).map(function(pd){return pd[0]})):_i.getLevels()).sort(function(pd,_p){return _p.getZIndex()-pd.getZIndex()}))),Q.getMainLevel().getZIndex());this.clear(),Fa.forEach(function(pd,_p){return _o.drawLevelButton(_p,pd)}),Fa.size>this.levelButtonCount&&(this.currentScrollIndex=Fa.size>this.levelButtonCount+1?Math.min(Array.from(Fa).reverse().findIndex(function(pd){return pd[0]===bc}),Fa.size-this.levelButtonCount):0,this.drawScrollButtons(),this.scroll(0)),this.switch(bc)}}]),_l}(),N0=function(){function _l(Q,_e){w(this,_l),this.baseTheme=Q,this.metaInformation=_e,this.labelStyleMap={},this.styleMap={},this.setStyleMap()}return j(_l,[{key:"setStyleMap",value:function(){this.styleMap.ENTRANCE=this.baseTheme.entranceRules.default.styleProperties,this.labelStyleMap.ENTRANCE=this.baseTheme.entranceRules.default.textLabelStyleProperties;for(var Q=0,_e=Object.entries(this.baseTheme.spaceRules);Q<_e.length;Q++){var _o,_i=(_o=ad(_e[Q],2))[0],Fa=(_o=_o[1]).properties.behavioralAppearance.default.styleProperties,bc=_o.properties.behavioralAppearance.default.textLabelStyleProperties;if(this.styleMap[_i]=Fa,this.labelStyleMap[_i]=bc,_o.spaceTypes)for(var pd=0,_p=Object.entries(_o.spaceTypes);pd<_p.length;pd++){var _m=(ry=ad(_p[pd],2))[0],oy=(ry=ry[1]).behavioralAppearance.default.styleProperties,ry=ry.behavioralAppearance.default.textLabelStyleProperties;this.styleMap["".concat(_i,"_").concat(_m)]=oy&&0!==Object.keys(oy)?oy:Fa,this.labelStyleMap["".concat(_i,"_").concat(_m)]=ry&&0!==Object.keys(ry)?ry:bc}}}},{key:"getBaseTheme",value:function(){return this.baseTheme}},{key:"getStyleMap",value:function(){return this.styleMap}},{key:"getGeometryStyle",value:function(Q){return this.styleMap&&Object.getOwnPropertyNames(this.styleMap)?this.styleMap[Q]:null}},{key:"getLabelStyle",value:function(Q){return this.labelStyleMap&&Object.getOwnPropertyNames(this.labelStyleMap)?this.labelStyleMap[Q]:null}}],[{key:"getGeometryDefaultStyle",value:function(){return{fill:"#e5e5e5",fillOpacity:1,stroke:"#6c7a89",strokeOpacity:1,strokeWidth:2}}},{key:"getLabelDefaultStyle",value:function(){return{stroke:"#6c7a89",zmin:15}}}]),_l}(),u0=function(){function _l(){w(this,_l),this.config=Object.seal({emitEventOnOverrideUpdate:!0}),this.imageCache={},this.releaseSettings_={displayOptions:{},mom:[]},this.theme={}}return j(_l,[{key:"getMomData",value:function(){return this.releaseSettings_.mom}},{key:"getTheme",value:function(){return this.theme||{}}},{key:"getStyle",value:function(bc){var _e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],_i=this.getTheme(),_o=N0.getGeometryDefaultStyle(),Fa=bc.properties.spaceType,pd=bc=bc.properties.spaceCategory;return Fa&&(pd="".concat(bc,"_").concat(Fa)),{m:(bc=(bc=_i.getGeometryStyle(pd))&&!_e?bc:_o).fill&&bc.fill.toLowerCase()||"#fff",w:bc.strokeWidth/10||.1,o:bc.stroke&&bc.stroke.toLowerCase()||"#fff",l:"Dark"}}},{key:"getLabelStyle",value:function(Q){this.getTheme();var _e=N0.getLabelDefaultStyle();return{fill:_e.stroke,zmin:_e.zmin}}}]),_l}(),q1=Math.PI/180,s_=180/Math.PI,w1=function(){function _l(){w(this,_l)}return j(_l,null,[{key:"toRadians",value:function(Q){return Q*q1}},{key:"toDegrees",value:function(Q){return Q*s_}},{key:"getBoundingBox",value:function(Q,_e){var _i=[];switch(Q){case SE:_i=[_e,_e];break;case CE:case t1:_i=_e;break;case ME:case T0:_i=_e.reduce(function(_o,Fa){return _o.concat(Fa)},[]);break;case W0:_i=_e.reduce(function(_o,Fa){return _o.concat(Fa)},[]).reduce(function(_o,Fa){return _o.concat(Fa)},[])}return _l.getBoundingBoxVertices(_i)}},{key:"getInverseTransform",value:function(Q){var _e;return(_e=[Q[3]/(_e=Q[0]*Q[3]-Q[1]*Q[2]),-Q[1]/_e,-Q[2]/_e,Q[0]/_e,0,0])[4]=-(_e[0]*Q[4]+_e[2]*Q[5]),_e[5]=-(_e[1]*Q[4]+_e[3]*Q[5]),_e}},{key:"applyTransformToPoint",value:function(Q,_e){return[_e[0]*Q[0]+_e[1]*Q[2]+Q[4],_e[0]*Q[1]+_e[1]*Q[3]+Q[5]]}},{key:"transformProduct",value:function(Q,_e){var _i=[0,0,0,0,0,0];return _i[0]=_e[0]*Q[0]+_e[2]*Q[1],_i[1]=_e[1]*Q[0]+_e[3]*Q[1],_i[2]=_e[0]*Q[2]+_e[2]*Q[3],_i[3]=_e[1]*Q[2]+_e[3]*Q[3],_i[4]=_e[0]*Q[4]+_e[2]*Q[5]+_e[4],_i[5]=_e[1]*Q[4]+_e[3]*Q[5]+_e[5],_i}},{key:"convertLonLatToMerc",value:function(_i){var _e=_i[0]*q1;return _i=_i[1]*q1,_i=Math.sin(_i),[.5+_e/(2*Math.PI),.5-Math.log((1+_i)/(1-_i))/(4*Math.PI)]}},{key:"convertMercToLatLon",value:function(_i){var _e=2*Math.PI*(_i[0]-.5);return _i=Math.atan(Math.sinh(2*Math.PI*(.5-_i[1]))),[_e/q1,_i/q1]}},{key:"getTransformScale",value:function(Q){return Math.sqrt(Q[0]*Q[3]-Q[1]*Q[2])}},{key:"getLonLatToMercTransform",value:function(_o){var _e=[.002777777777777778,0,0,-1/(360*Math.cos(_o[1]*q1)),0,0],_i=_l.applyTransformToPoint(_e,_o);return _o=_l.convertLonLatToMerc(_o),_e[4]=_o[0]-_i[0],_e[5]=_o[1]-_i[1],_e}},{key:"getNatToMercTransform",value:function(Q){var _e=_l.getLonLatToMercTransform(_e=[Q[4],Q[5]]);return _l.transformProduct(Q,_e)}},{key:"convertMxMy2LonLat",value:function(Q,_e){return Q.length&&_e.length?_l.applyTransformToPoint(Q,_e):[]}},{key:"convertLonLat2MxMy",value:function(Q,_e){return Q.length&&_e.length?(Q=_l.getInverseTransform(Q),_l.applyTransformToPoint(Q,_e)):[]}},{key:"getFlattenedQuadraticBezierCurve",value:function(Q,_e,_i){var _o=[],Fa=3<arguments.length&&void 0!==arguments[3]?arguments[3]:10;Fa<1&&(Fa=6);for(var bc=0;bc<=Fa;bc+=1){var _p,oy,pd=2*(_p=bc/Fa)*(1-_p);_o.push([(oy=(1-_p)*(1-_p))*Q[0]+pd*_e[0]+(_p*=_p)*_i[0],oy=oy*Q[1]+pd*_e[1]+_p*_i[1]])}return _o}},{key:"getFlattenedCubicBezierCurve",value:function(Q,_e,_i,_o){var Fa=[],bc=4<arguments.length&&void 0!==arguments[4]?arguments[4]:10;bc<1&&(bc=6);for(var pd=0;pd<=bc;pd+=1){var oy,hy,_p=3*(oy=pd/bc)*(1-oy)*(1-oy),_m=3*oy*oy*(1-oy);Fa.push([(hy=(1-oy)*(1-oy)*(1-oy))*Q[0]+_p*_e[0]+_m*_i[0]+(oy*=oy*oy)*_o[0],hy=hy*Q[1]+_p*_e[1]+_m*_i[1]+oy*_o[1]])}return Fa}},{key:"getRectangularCoordinatesOfLabelArea",value:function(oy,_e){var _i=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],_o=(_p=ad(oy,6))[0],Fa=_p[1],bc=_p[2],pd=_p[3],_p=_p[5],_m=_l.getDeltaLonLatForMeterAtGivenLonLat(_o,Fa);return oy=oy[4],_i?(_p&&(oy*=-1),null!=_e&&(oy=(oy+=_e<0?2*Math.PI+_e:_e)<0?2*Math.PI+oy:oy)):oy=0,_l.getRectVerticesFromSignatureRectRepresentation([_o,Fa],{xLength:bc,yLength:pd},oy,_m)}},{key:"getRotatedPoint",value:function(_p,bc){var _m,_i=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],_o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[0,0],Fa=Math.cos(bc),pd=(bc=Math.sin(bc),_p[0]-_o[0]);return _p=_p[1]-_o[1],[(_m=_i?[pd*Fa+_p*bc,_p*Fa-pd*bc]:[pd*Fa-_p*bc,_p*Fa+pd*bc])[0]+_o[0],_m[1]+_o[1]]}},{key:"getRectVerticesFromSignatureRectRepresentation",value:function(hy,bc,_i,_o){var Fa=bc.xLength,pd=(bc=bc.yLength,!(4<arguments.length&&void 0!==arguments[4])||arguments[4]),_p=(hy=ad(hy,2))[0],_m=hy[1],oy=Fa/2,ry=bc/2,xy=(hy=ad(_o,2))[0],By=hy[1];return[[1,1],[-1,1],[-1,-1],[1,-1]].map(function(My){return[My[0]*oy,My[1]*ry]}).map(function(My){return _l.getRotatedPoint(My,_i,pd)}).map(function(My){return[My[0]*xy,My[1]*By]}).map(function(My){return[My[0]+_p,My[1]+_m]})}},{key:"getScaleFactorForRectInSpace",value:function(Q,_e,_i,_o){return Q/=_i,(_i=_e/_o)<Q?_i:Q}},{key:"getDeltaLonLatForMeterAtGivenLonLat",value:function(Q,_e){return[1/6371e3*(180/Math.PI)/Math.cos(_e*Math.PI/180),1/6371e3*(180/Math.PI)]}},{key:"getBoundingBoxVertices",value:function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(_i,_o){return[[Math.min(_o[0],_i[0][0]),Math.min(_o[1],_i[0][1])],[Math.max(_o[0],_i[1][0]),Math.max(_o[1],_i[1][1])]]},[[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY]])}},{key:"isPointInBoundingBox",value:function(Q,_e){var _i,_o,Fa,bc;if(Q&&_e)return _i=(Q=ad(Q,2))[0],Q=Q[1],_e=ad(_e,2),_o=(Fa=ad(_e[0],2))[0],Fa=Fa[1],bc=(_e=ad(_e[1],2))[0],_e=_e[1],_i<=bc&&_o<=_i&&Q<=_e&&Fa<=Q}},{key:"isPointOnLineSegment",value:function(Fa,pd,_m){var _o=(Fa=ad(Fa,2))[0],bc=(Fa=Fa[1],(pd=ad(pd,2))[0]),_p=(pd=pd[1],(_m=ad(_m,2))[0]),oy=(pd-Fa)*((_m=_m[1])-Fa)<=0;return bc===_p?bc===_o&&oy:Fa-_m==(_m-pd)/(_p-bc)*(_o-_p)&&oy}},{key:"rayIntersectLineSegment",value:function(Fa,pd,_m){var _o=(Fa=ad(Fa,2))[0],bc=(Fa=Fa[1],(pd=ad(pd,2))[0]),_p=(pd=pd[1],(_m=ad(_m,2))[0]);return _m=_m[1],bc!==_p&&0<=(_o=(_o-bc)/(_p-bc))&&_o<1&&Fa<(_m-pd)*_o+pd}},{key:"isPointInPolygon",value:function(Fa,_e){var _i=(Fa=ad(Fa,2))[0],_o=Fa[1];if((Fa=_e.length)<3)return!1;var bc=0,pd=_e[Fa-1];return _e.forEach(function(_p){_l.rayIntersectLineSegment([_i,_o],pd,_p)&&(bc+=1),pd=_p}),bc%2!=0}},{key:"isPointOnLineString",value:function(_i,_e){var _o=(_i=ad(_i,2))[0],Fa=_i[1],bc=_e.length;if(!(bc<2))for(var pd=_e[bc-1],_p=0;_p<bc;_p+=1){if(_l.isPointOnLineSegment([_o,Fa],pd,_e[_p]))return!0;pd=_e[_p]}return!1}},{key:"getAreaOfPolygon",value:function(Q){var _e=Q.length;if(_e<3)return null;var _i=0,_o=Q[_e-1];return Q.forEach(function(Fa){var bc,pd,_p;_i+=.5*(pd=Fa,_p=(bc=ad(bc=_o,2))[0],bc=bc[1],_p*(pd=ad(pd,2))[1]-bc*pd[0]),_o=Fa}),_i}},{key:"getDistanceBetweenPoints",value:function(Fa,_i){var _o=(Fa=ad(Fa,2))[0];return Fa=Fa[1],_o-=(_i=ad(_i,2))[0],Fa-=_i[1],Math.sqrt(_o*_o+Fa*Fa)}}]),_l}(),fA=function(){function _l(){w(this,_l),this.spaceRules={}}return j(_l,null,[{key:"getDataEntriesOne",value:function(_o,_e){var _i;return _o=[_o,""],null!==_e&&Array.isArray(_e)?_o[1]=_e.toString():null!==_e&&"object"===g(_e)?0<(_i=Object.entries(_e)).length&&(_i=this.getDataEntriesOne(_i[0][0],_i[0][1]),_o[0]="".concat(_o[0],".").concat(_i[0]),_o[1]=_i[1]):_o[1]=_e,_o}},{key:"getDataEntriesAll",value:function(Q){for(var _e=[],_i=0,_o=Object.entries(Q);_i<_o.length;_i++){var Fa=ad(_o[_i],2),bc=this.getDataEntriesOne(bc=Fa[0],Fa=Fa[1]);_e.push(bc)}return _e}},{key:"doFindComboMatch",value:function(Q,_e){var _i="";if(Q&&Q.configuration&&Q.configuration.combinations)for(var _o=this.getDataEntriesAll(_e),Fa=(_e=Object.entries(Q.configuration.combinations),0),bc=0,pd=_e;bc<pd.length;bc++)!function(){var _m=pd[bc],oy=Object.keys(_m[1]).filter(function(ry){return _o.some(function(hy){return ry===hy[0]&&_m[1][ry]===hy[1]})});oy.length===Object.keys(_m[1]).length&&oy.length>Fa&&(_i=_m[0],Fa=oy.length)}();return _i}},{key:"getIconFromCombinations",value:function(Q,_e){if(Q&&Q.configuration.combinations&&_e&&0<Object.keys(_e).length&&Q.behavioralAppearance.combinations&&0<Object.keys(Q.behavioralAppearance.combinations).length){if(""===(_e=this.doFindComboMatch(Q,_e))||!Q.behavioralAppearance.combinations[_e].labelIcon)return"";if(Q.behavioralAppearance.combinations&&Q.behavioralAppearance.combinations[_e]&&Q.behavioralAppearance.combinations[_e].labelIcon)return Q.behavioralAppearance.combinations[_e].labelIcon.referenceUri}return""}},{key:"findSpace",value:function(Q,_e){if(_e.spaceTypes&&_e.spaceTypes[Q])return _e.spaceTypes[Q]}},{key:"findCategory",value:function(Q){if(this.spaceRules[Q])return this.spaceRules[Q]}},{key:"setSpaceRules",value:function(Q){this.spaceRules=Q}},{key:"getSpaceIcon",value:function(Q,bc,_i){var _o,Fa="";return(bc=this.findCategory(bc))&&(Q=this.findSpace(Q,bc))&&(_o="",(_o=_i?this.getIconFromCombinations(Q,_i):_o)&&""!==_o?Fa=_o:Q.behavioralAppearance.default.labelIcon?Fa=Q.behavioralAppearance.default.labelIcon.referenceUri:bc.properties.behavioralAppearance.default.labelIcon&&(Fa=bc.properties.behavioralAppearance.default.labelIcon.referenceUri)),Fa}}]),_l}(),D0=function(){function _l(){w(this,_l),this.themeRule={},this.svgList={},this.defaultLang="ENG"}return j(_l,null,[{key:"getNumberFromAlphaNumeric",value:function(Q){try{var _e=Q.split("").reverse().join("").replace(/[^0-9]/g,"").substr(0,6);return parseInt(_e,10)}catch{return null}}},{key:"extractNumFromSting",value:function(Q){try{var _e=Q.replace(/[^0-9]/g,"");return parseInt(_e,10)}catch{return console.warn("Exception in converting string to Id"),this.getNumberFromAlphaNumeric(Q)}}},{key:"getVenueId",value:function(Q){var _e;return"number"!=typeof Q?(_e=Q.substr(Q.length-6),parseInt(_e,10)):Q}},{key:"getStringFormatIdentifier",value:function(Q){return"number"==typeof Q||Q.length<13?"indoormap-00000000-0000-4000-a000-".concat(Q.toString().padStart(12,"0")):Q}},{key:"setSite",value:function(_o,_e){var _i=this.getName(_o);return(_o={id:this.getStringFormatIdentifier(_e),location:_o.referencePoint,properties:_o.properties,geometry:_o.geometry,map_version:_o.properties.indoorSiteMetadata.legacyVersion.mapVersion,identifier:this.getVenueId(_e),obj_type:"CommunityMap"}).properties.name=_i,_o.properties.display_name=_i,_o}},{key:"setEntrance",value:function(Q){var _e=this.themeRule.entranceRules.default.labelIcon.referenceUri,_i=this.extractNumFromSting(Q.id),_o=this.getName(Q),Fa=Q.properties;return Fa.icon=!0,Fa.svg=this.svgList[_e.toLowerCase()],Fa.name=_o||"entrance",Fa.display_name=_o||"entrance",Fa.level={id:Q.properties.level.id},{id:Q.id,levelId:Q.properties.level.id,momType:nT,geometry:Q.geometry,location:Q.geometry,properties:Fa,identifier:_i,label_area:[Q.referencePoint.coordinates[0],Q.referencePoint.coordinates[1],50,50,180]}}},{key:"setStructure",value:function(Q){var _e=this.extractNumFromSting(Q.id),_i=this.getName(Q),_o=Q.properties;return _o.is_root=0===Q.properties.drawOrder,_o.display_name=_i,_o.map_type=Q.properties.structureType,_o.name=_i,{id:Q.id,obj_type:"Drawing",identifier:_e,properties:_o}}},{key:"getNameByPriority",value:function(Q,_e){for(var _i,Fa="",bc=0;bc<Q.length;bc++){var pd=Q[bc];if(("OFFICIAL"===(_i=pd).nameType&&_i.languageCode&&_i.languageCode===this.defaultLang||"OFFICIAL"===_i.nameType)&&(_e&&_e===pd.nameType||!_e)){Fa=pd.name;break}if("ABBREVIATION"===pd.nameType&&(_e&&_e===pd.nameType||!_e)){Fa=pd.name;break}if("UNCLASSIFIED"===pd.nameType&&(_e&&_e===pd.nameType||!_e)){Fa=pd.name;break}if(!pd.nameType&&pd.name){Fa=pd.name;break}}return Fa}},{key:"getName",value:function(Q,_e){return Q.properties&&Q.properties.names?this.getNameByPriority(Q.properties.names,_e):Q.properties.placeProperties&&Q.properties.placeProperties&&Q.properties.placeProperties.names?this.getNameByPriority(Q.properties.placeProperties.names,_e):Q.properties.locationDetails&&Q.properties.locationDetails[0]&&Q.properties.locationDetails[0].names?this.getNameByPriority(Q.properties.locationDetails[0].names,_e):""}},{key:"setLevel",value:function(Q){var _e=this.extractNumFromSting(Q.id),_i=Q.properties.names,_o=Q.properties;return _o["short name"]=this.getNameByPriority(_i,_i&&1!==_i.length?"ABBREVIATION":""),_o.name=this.getNameByPriority(_i,_i&&1!==_i.length?"ABBREVIATION":""),{id:Q.id,obj_type:"Level",identifier:_e,properties:_o}}},{key:"setLevelConnector",value:function(Q){var _e=this.extractNumFromSting(Q.id);return{id:Q.id,obj_type:"LevelConnector",properties:Q.properties,geometry:Q.geometry,identifier:_e,location:Q.geometry}}},{key:"setOccupant",value:function(Q){var _e=this.getName(Q),_i=this.extractNumFromSting(Q.id),_o=Q.properties;return _o.occupantName=_e,_o.email=Q.properties.placeProperties&&Q.properties.placeProperties.contacts&&Q.properties.placeProperties.contacts.find(function(Fa){return"EMAIL"===Fa.contactType})&&Q.properties.placeProperties.contacts.find(function(Fa){return"EMAIL"===Fa.contactType}).value,_o.name=_e,_o.tags=Q.properties.attributes&&Q.properties.attributes.tags,{geometry:Q.geometry,id:Q.id,obj_type:"Geometry",properties:_o,identifier:_i,spaceIds:Q.properties.spaces||[],type:"Feature",momType:TE}}},{key:"getIcon",value:function(Q){var _e=!1,_i="";return this.svgList[Q]&&(_e=!0,_i=this.svgList[Q]),{icon:_e,svg:_i}}},{key:"setSpace",value:function(Q){var _i=fA.getSpaceIcon(Q.properties.spaceType,Q.properties.spaceCategory,Q.properties.spaceTypeProperties),pd=this.getName(Q),_e=(_i=this.getIcon(_i)).icon,_o=(_i=_i.svg,this.extractNumFromSting(Q.id)),Fa=(Q.properties.level.id.includes("out"),Q.properties.level.id),bc=Q.properties;return bc.spaceName=pd,bc[Q.properties.spaceCategory]=Q.properties.spaceType,bc.spaceType=Q.properties.spaceType,bc.spaceCategory=Q.properties.spaceCategory,bc.icon=_e,bc.svg=_i,pd={geometry:Q.geometry,id:Q.id,levelId:Fa,label_area:[Q.referencePoint.coordinates[0],Q.referencePoint.coordinates[1],50,50,180],location:Q.referencePoint,obj_type:"Geometry",identifier:_o,properties:bc,momType:Yx,type:"Feature"},Q.properties.spaceAddress&&Q.properties.spaceAddress.id&&(pd.addressId=Q.properties.spaceAddress.id),pd}},{key:"setSpaceGroups",value:function(Q){var _e=this.extractNumFromSting(Q.id);return{id:Q.id,obj_type:"SpaceGroups",properties:Q.properties,geometry:Q.geometry,location:Q.referencePoint,identifier:_e}}},{key:"setTopology",value:function(Q){var _e=this.extractNumFromSting(Q.id);return{id:Q.id,obj_type:"Topology",properties:Q.properties,geometry:Q.geometry,identifier:_e}}},{key:"setAddress",value:function(Q){var _e=this.extractNumFromSting(Q.id),_i=this.getName(Q),_o=Q.properties;return _o.addressName=_i,_o.name=_i,{id:Q.id,properties:_o,obj_type:"Address",identifier:_e}}},{key:"manageSvgDimensions",value:function(Q){for(var _e={},_i=0,_o=Object.entries(Q);_i<_o.length;_i++){var Fa,bc,_p,pd=(_p=ad(_o[_i],2))[0];"string"==typeof(_p=_p[1])&&(Fa=-1!==_p.indexOf("<g")&&_p.indexOf("<g")||_p.indexOf("<p"),bc=_p.indexOf("</s"),Fa&&bc&&(_p=_p.substring(Fa-1,bc-1),_e[pd]="<svg width='64' height='64' viewBox='0 0 24 32' fill='none' xmlns='http://www.w3.org/2000/svg'>".concat(_p,"</svg>")))}return _e}},{key:"getSiteBoundingBox",value:function(Q){if(Q){var _e=(Q=ad(w1.getBoundingBox(Q.geometry.type,Q.geometry.coordinates),2))[0];if(Q=Q[1],_e)return"".concat(_e[0],",").concat(_e[1],",").concat(Q[0],",").concat(Q[1])}return"null, null, null, null"}}]),_l}(),iT=function(){function _l(){w(this,_l)}return j(_l,null,[{key:"get",value:function(Q){return fetch(Q,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{method:"GET"}).then(function(_e){return _e.ok?_e.json():Promise.reject(new Error("Call failed for ".concat(Q," : ").concat(_e.status," ").concat(_e.statusText)))})}},{key:"getFormattedIndoorMapId",value:function(Q){return"number"==typeof Q?"indoormap-00000000-0000-4000-a000-".concat(Q.toString().padStart(12,"0")):Q.includes("indoormap")?Q:"indoormap-00000000-0000-4000-a000-".concat(Q.padStart(12,"0"))}},{key:"getConfigUrl",value:function(Q,_e,_p){var _o=_p.apiKey,pd=_p.url,Fa=_p.token,bc=(_p=_p.hrn,{method:"GET",mode:"cors",cache:"default"});return pd="".concat(pd||_g,"/").concat(_p),_p="",_e===tx.SITE&&(_p="".concat(pd,"/layers/").concat(AT,"/search?p.featureType=indoor.Site&p.indoorMapId='").concat(this.getFormattedIndoorMapId(Q),"'")),_e===tx.IMAGES&&(_p="".concat(pd,"/layers/").concat("icons","/features/svg")),_e===tx.Theme&&(_p="".concat(pd,"/layers/").concat("config","/features/indoorMapRules")),Fa?bc.headers={Authorization:"Bearer ".concat(Fa)}:_p=_p.concat("".concat(_e===tx.SITE?"&":"?","apiKey=").concat(_o)),this.get(_p,bc)}},{key:"getMomData",value:function(pd,bc){var _i=bc.apiKey,_p=bc.url,_o=bc.token,Fa=(bc=bc.hrn,{method:"GET",mode:"cors",cache:"default"});return _p="".concat(_p||_g,"/").concat(bc),bc=pd&&pd.features&&pd.features.find(function(_m){return _m.momType===EE}),pd=D0.getSiteBoundingBox(bc),_p="".concat(_p,"/layers/").concat(AT,"/bbox?bbox=").concat(pd,"&f.momType=indoor.Level,indoor.Space,indoor.Site,indoor.Structure,indoor.Occupant,indoor.SpaceGroups,Address,indoor.Entrance"),_o?Fa.headers={Authorization:"Bearer ".concat(_o)}:_p=_p.concat("&apiKey=".concat(_i)),{mom:this.get(_p,Fa),site:bc}}},{key:"getDefaultCollection",value:function(_e){_e=_e.token;var _i=(_o=ny[ty.DEFAULT_COLLECTION]).PARAMS,_o=_o.BASE_URL;return _o=encodeURI("".concat(_o,"?sortBy=").concat(_i.CREATED_BY,"&q=").concat(_i.COLLECTION)),_e?(_i={method:"GET",headers:{Authorization:"Bearer ".concat(_e)}},this.get(_o,_i)):Promise.reject(new Error("Please provide valid token"))}},{key:"getProjectAccountDetails",value:function(_e){var _i=ny[ty.ACCOUNT_API].BASE_URL;return(_e=_e.token)?(_e={method:"GET",mode:"cors",headers:{Authorization:"Bearer ".concat(_e)}},this.get(_i,_e)):Promise.reject(new Error("Please provide valid token"))}},{key:"fetchIndoorMapList",value:function(){var Q=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},_e=Q.hrn,_i=(_o=ny[ty.CATALOG_LAYER]).PARAMS,_o=_o.COLLECTION_LAYER,Fa=(Fa=Q.url)||_g;return _e?(Fa=encodeURI("".concat(Fa,"/").concat(_e,"/").concat(_o,"?").concat(_i.FEATURE_TYPE.KEY,"=").concat(_i.FEATURE_TYPE.VALUE)),_o=(_e=this.createBaseUrl(Fa,Cy.GET,{},Q)).URL,this.get(_o,_i=_e.options)):Promise.reject(new Error("Please provide valid hrn"))}},{key:"createBaseUrl",value:function(){var Q=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",_e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},_i=(_o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}).token,_o=_o.apiKey,Fa=Q,bc={method:bc=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Cy.GET,mode:"cors"};return _i?bc.headers=d({Authorization:"Bearer ".concat(_i)},_e):Fa=Q.concat("&apiKey=".concat(_o)),{URL:Fa,options:bc}}}]),_l}(),ST=function(){function _l(){w(this,_l)}return j(_l,null,[{key:"isPointOnGeoJSONLineString",value:function(Q,_e){var _i=!1;if(_e&&1<_e.length)for(var bc=1;bc<_e.length;bc+=1)if(w1.isPointOnLineSegment(Q,_e[bc-1],_e[bc])){_i=!0;break}return _i}},{key:"isPointOnGeoJSONMultiLineString",value:function(Q,_e){for(var _i=!1,_o=0;_o<_e.length;_o+=1)if(_l.isPointOnGeoJSONLineString(Q,_e[_o])){_i=!0;break}return _i}},{key:"isPointInsideGeoJSONPolygon",value:function(Q,_e){var _i=!1;if(_i=!!w1.isPointInPolygon(Q,_e[0])||_i)for(var _o=1;_o<_e.length;_o+=1)if(w1.isPointInPolygon(Q,_e[_o])){_i=!1;break}return _i}},{key:"isPointInsideGeoJSONMultiPolygon",value:function(Q,_e){for(var _i=_e.length,_o=0;_o<_i;_o+=1)if(_l.isPointInsideGeoJSONPolygon(Q,_e[_o]))return!0;return!1}},{key:"getGeometriesByLonLat",value:function(Q,_e){for(var _i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],_o=[],Fa=_e.filter(function(_p){return w1.isPointInBoundingBox(Q,_p.getBoundingBox())}),bc=0;bc<Fa.length;bc+=1){var pd=Fa[bc];if(pd.isPointInsideGeometry(Q,!0)&&(_o.push(pd),!_i))break}return _o.sort(function(_p,_m){return _m.getZIndex()-_p.getZIndex()})}}]),_l}(),d0=function(){function _l(){var Q=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},_e=1<arguments.length?arguments[1]:void 0,_i=2<arguments.length?arguments[2]:void 0;w(this,_l),this.id=Q.id,this.properties=Q.properties||{},this.labelArea=Q.label_area||[],this.geometry=Q.geometry||{},this.location=Q.location||{},this.address=Q.address||{},this.level=_e,this.zIndex=_i,this.spaceId=Q.spaceId,this.state_={isHighlighted:!1,highlightedStyle:{}},this.geometryData=Q}return j(_l,[{key:"getId",value:function(){return this.geometryData&&this.geometryData.identifier}},{key:"getIdentifier",value:function(){return this.id}},{key:"getProperties",value:function(){return this.properties}},{key:"getInternalAddress",value:function(){return this.address?this.address.properties&&this.address.properties.name:null}},{key:"getCenter",value:function(){return this.location.coordinates||[]}},{key:"getCoordinates",value:function(){return this.geometry.coordinates||[]}},{key:"getDisplayName",value:function(){return this.properties.display_name||""}},{key:"getName",value:function(){return this.properties.name||""}},{key:"getStyle",value:function(){return this.getMetaInformation_().getStyle(this)}},{key:"getIcon",value:function(){return this.properties.svg}},{key:"getLabelArea",value:function(){return this.labelArea||[]}},{key:"getLabelStyle",value:function(){return this.getMetaInformation_().getLabelStyle(this)||null}},{key:"getLevel",value:function(){return this.level}},{key:"getType",value:function(){return this.geometry.type}},{key:"getZIndex",value:function(){return this.zIndex}},{key:"getBoundingBox",value:function(){var Q=this.getType(),_e=this.getCoordinates(),_i=[];switch(Q){case SE:_i=[_e,_e];break;case CE:case t1:_i=_e;break;case ME:case T0:_i=_e.reduce(function(_o,Fa){return _o.concat(Fa)},[]);break;case W0:_i=_e.reduce(function(_o,Fa){return _o.concat(Fa)},[]).reduce(function(_o,Fa){return _o.concat(Fa)},[])}return w1.getBoundingBoxVertices(_i)}},{key:"isIcon",value:function(){return!!this.properties.icon}},{key:"isPointInsideGeometry",value:function(Q){var _e,_i=1<arguments.length&&void 0!==arguments[1]&&arguments[1],_o=!1;switch(this.getType()){case SE:_e=this.getLabelArea()&&w1.getRectangularCoordinatesOfLabelArea(this.getLabelArea()),_o=w1.isPointInPolygon(Q,_e);break;case CE:break;case t1:_o=_i&&ST.isPointOnGeoJSONLineString(Q,this.getCoordinates());break;case ME:_o=_i&&ST.isPointOnGeoJSONMultiLineString(Q,this.getCoordinates());break;case T0:_o=ST.isPointInsideGeoJSONPolygon(Q,this.getCoordinates());break;case W0:_o=ST.isPointInsideGeoJSONMultiPolygon(Q,this.getCoordinates())}return _o}},{key:"highlight",value:function(){var Q=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],_e=1<arguments.length?arguments[1]:void 0;this.state_.isHighlighted=Q,this.state_.highlightedStyle=Q?_e:{}}},{key:"isHighlighted",value:function(){return!!this.state_.isHighlighted}},{key:"getHighlightedStyle",value:function(){return this.state_.highlightedStyle||{}}},{key:"toJSON",value:function(){return d({},this.geometry)}},{key:"getMetaInformation_",value:function(){return this.getLevel()?this.getLevel().getDrawing().getVenueModel().metaInformation_:null}}]),_l}(),pA=function(){function _l(Q,_e){var _i=this;w(this,_l),this.id=Q&&Q.id,this.properties=Q&&Q.properties,this.zIndexCount=0,this.geometries=Q&&Q.features&&Object.values(Q.features).reduce(function(_o,Fa){return _o[[Fa.id]]=new d0(Fa,_i,Fa.properties.drawOrder),_o},{}),this.drawing=_e,this.levelData=Q}return j(_l,[{key:"getId",value:function(){return this.levelData&&this.levelData.identifier}},{key:"getIdentifier",value:function(){return this.id}},{key:"getProperties",value:function(){return this.properties}},{key:"getName",value:function(){return this.properties&&this.properties.name||""}},{key:"getDisplayName",value:function(){return this.properties&&this.properties.display_name||""}},{key:"getDrawing",value:function(){return this.drawing}},{key:"getShortName",value:function(){return this.properties&&this.properties["short name"]||""}},{key:"getZIndex",value:function(){return this.properties&&this.properties.zLevel}},{key:"getFeatureCollectionArray",value:function(){return this.getGeometries().map(function(Q){return Q.toJSON()})}},{key:"getGeometryById",value:function(Q){return this.geometries[Q]}},{key:"getGeometries",value:function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0]?this.geometries&&Object.values(this.geometries).sort(function(Q,_e){return _e.getZIndex()-Q.getZIndex()}):this.geometries&&Object.values(this.geometries).sort(function(Q,_e){return Q.getZIndex()-_e.getZIndex()})}},{key:"getGeometriesByAddress",value:function(Q){return Object.values(this.geometries).filter(function(_e){return _e.address&&_e.address.properties&&_e.address.properties.name&&_e.address.properties.name===Q})}},{key:"isMain",value:function(){return!!this.properties.isMain}}]),_l}(),G0=function(){function _l(Q){var _e=this,_i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},_o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],Fa=3<arguments.length?arguments[3]:void 0;w(this,_l),this.venueModel=Fa,this.levels=_o.map(function(bc){return new pA(bc,_e)}),this.structure=Q,this.id=Q&&Q.id,this.properties=_i}return j(_l,[{key:"getId",value:function(){return this.structure&&this.structure&&this.structure.identifier}},{key:"getIdentifier",value:function(){return this.id}},{key:"getProperties",value:function(){return this.properties}},{key:"isRoot",value:function(){return!!this.properties.is_root}},{key:"getDisplayName",value:function(){return this.properties.display_name||""}},{key:"getName",value:function(){return this.properties.name||""}},{key:"getBoundingBox",value:function(){if(this.structure&&this.structure.geometry){var Q=(_e=ad(w1.getBoundingBox(this.structure.geometry.type,this.structure.geometry.coordinates),2))[0],_e=_e[1];if(Q)return[_e[1],Q[0],Q[1],_e[0]]}return[null,null,null,null]}},{key:"getCenter",value:function(){return this.structure&&this.structure.location&&this.structure.location.coordinates}},{key:"getGeometryById",value:function(Q){return this.getGeometries().find(function(_e){return _e.getId()===Q||_e.getIdentifier()===Q})}},{key:"getGeometries",value:function(){return this.levels.flatMap(function(Q){return Q.getGeometries()})}},{key:"getLevelById",value:function(Q){return this.levels.find(function(_e){return _e.getId()===Q||_e.getIdentifier()===Q})}},{key:"getLevelByZIndex",value:function(Q){return this.levels.find(function(_e){return _e.getZIndex()===Q})}},{key:"getLevels",value:function(){return this.levels}},{key:"getMainLevel",value:function(){return this.levels.find(function(Q){return Q.isMain()})}},{key:"getVenueModel",value:function(){return this.venueModel}}]),_l}(),MS=wx.STANDARD,mM=function(){function _l(Q){var _e=this,_i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new u0;w(this,_l),this.metaInformation_=_i,this.momStructure=Q,this.id=Q&&Q.site&&Q.site.id,this.location=Q&&Q.site&&Q.site.location||{},this.properties=Q&&Q.site&&d({},Q.site.properties),this.drawings=Q&&Q.structure&&Object.values(Q.structure).map(function(_o){var Fa=Q.getStructureWiseGeometry(_o.id);return new G0(_o,_o.properties,Object.values(Fa),_e)})}return j(_l,[{key:"getDisplaySettings",value:function(){return(this.metaInformation_.releaseSettings_?this.metaInformation_.releaseSettings_.displayOptions:"").display||MS}},{key:"getId",value:function(){return this.momStructure&&this.momStructure.site&&this.momStructure.site.identifier}},{key:"getIdentifier",value:function(){return this.id}},{key:"getName",value:function(){return this.properties.name}},{key:"getBoundingBox",value:function(){if(this.momStructure){var Q=(_e=ad(w1.getBoundingBox(this.momStructure.site.geometry.type,this.momStructure.site.geometry.coordinates),2))[0],_e=_e[1];if(Q)return[_e[1],Q[0],Q[1],_e[0]]}return[null,null,null,null]}},{key:"getCenter",value:function(){return this.location.coordinates}},{key:"getGeometryById",value:function(Q){return this.getGeometries().find(function(_e){return _e.getId()===Q||_e.getIdentifier()===Q})}},{key:"getGeometries",value:function(){return this.getLevels().sort(function(Q,_e){return Q.getZIndex()-_e.getZIndex()}).flatMap(function(Q){return Q.getGeometries()})}},{key:"getGeometriesByLonLat",value:function(Q){var _o,_e=this,_i=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];return 0===(_o=(_o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[]).map(function(Fa){return _e.getLevelById(Fa)})).length&&(_o=this.drawings.filter(function(Fa){return Fa=Fa.getBoundingBox(),w1.isPointInBoundingBox(Q,Fa)}).flatMap(function(Fa){return Fa.getLevels()})),ST.getGeometriesByLonLat(Q,_o.flatMap(function(Fa){return Fa.getGeometries(!0)}),_i)}},{key:"getDrawingById",value:function(Q){return this.drawings.find(function(_e){return _e.getId()===Q||_e.getIdentifier()===Q})}},{key:"getDrawings",value:function(){return this.drawings}},{key:"getRootDrawing",value:function(){return this.drawings.find(function(Q){return Q.isRoot()})}},{key:"getLevelById",value:function(Q){return this.getLevels().find(function(_e){return _e.getId()===Q||_e.getIdentifier()===Q})}},{key:"getLevelsByZIndex",value:function(){var Q=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return this.getLevels().filter(function(_e){return Number(_e.getZIndex())===Number(Q)})}},{key:"getLevels",value:function(){return this.drawings.flatMap(function(Q){return Q.getLevels()})}},{key:"getMomStructure",value:function(){return this.momStructure}},{key:"getLevelMapFlattenedByZIndex_",value:function(){return this.getLevels().reduce(function(Q,_e){var _i=_e.getZIndex();return Q[_i]||(Q[_i]=[]),Q[_i].push(_e),Q},{})}},{key:"getOccupant",value:function(){return Object.values(this.momStructure.occupant)}}]),_l}(),x0=function(){function _l(Q){w(this,_l),this.theme=Q&&Q.theme,this.level=Q&&Q.level,this.site=Q&&Q.site,this.spaces=Q&&Q.spaces,this.address=Q&&Q.address,this.levelConnector=Q&&Q.levelConnector,this.topology=Q&&Q.topology,this.entrance=Q&&Q.entrance,this.occupant=Q&&Q.occupant,this.structure=Q&&Q.structure,this.spaceGroups=Q&&Q.spaceGroups,this.levelWiseGeometry={},this.levelStructureMapping=Q&&Q.levelStructureMapping,this.outdoorLevelMapping=Q&&Q.outdoorLevelMapping||{},this.labelTextPreference=Q&&Q.labelTextPreference||null}return j(_l,[{key:"setSpaceWithLevel",value:function(){var Q=this;this.spaces&&Object.values(this.spaces).forEach(function(_e){var _i="",_o=((_e.addressId&&(_i=Q.address&&Q.address[_e.addressId]&&Q.address[_e.addressId].properties.addressName),_o=_e.properties).addressName=_i,_i=Q.getLabelAsPerPreference(d(d({},_e),{},{properties:_o})),((_o=_e.properties).name=_i,_o.display_name=_i,_e.properties.icon&&(_o.name=_e.id,_o.display_name=_e.id),_i=_e).properties=_o,_i.address=Q.address[_e.addressId],(Q.spaces[_e.id]=_e).levelId);Q.outdoorLevelMapping[_o]&&(_o=Q.outdoorLevelMapping[_o]),Q.levelWiseGeometry[_o]||(Q.levelWiseGeometry[_o]={}),Q.levelWiseGeometry[_o][_i.id]=_i})}},{key:"setOccupantWithLevel",value:function(){var Q=this;this.occupant&&Object.values(this.occupant).forEach(function(_e){var _i,_o;_e.spaceIds&&_e.properties.occupantName&&(_i=[],_o=[],_e.spaceIds.forEach(function(Fa){function bc(_m){var hy=!1,oy=(Q.labelTextPreference&&Q.labelTextPreference.length&&(hy=-1!==Q.labelTextPreference.indexOf("OCCUPANT_NAMES")),hy=null===Q.labelTextPreference||hy,_m),ry=_m.properties;ry.name=_m.properties.icon||!hy?_m.properties.name:_e.properties.occupantName,ry.display_name=_m.properties.icon||!hy?_m.properties.display_name:_e.properties.occupantName,ry.address=_m.address,ry.occupantName=_e.properties.occupantName,Q.outdoorLevelMapping[hy=_m.levelId]&&(hy=Q.outdoorLevelMapping[hy]),Q.levelWiseGeometry[hy]||(Q.levelWiseGeometry[hy]={}),Q.levelWiseGeometry[hy][_m.id]=oy,_i.push(oy),_o.push(_m.id)}var pd=Q.spaces[pd=Fa.id],_p=null;Q.spaceGroups&&Object.values(Q.spaceGroups).forEach(function(_m){_m.properties.spaceGroups&&_m.properties.spaceGroups&&_m.properties.spaceGroups.forEach(function(oy){oy.mainSpace&&oy.mainSpace.id===Fa.id&&(_p=oy.spaces.map(function(ry){return ry.id}))})}),_p&&0<_p.length&&_p.forEach(function(_m){bc(Q.spaces[_m])}),pd&&bc(pd)}),Q.occupant[_e.id]=_e,Q.occupant[_e.id].space=_i,Q.occupant[_e.id].spaceIds=_o)})}},{key:"setEntrance",value:function(){var Q=this;this.entrance&&Object.values(this.entrance).forEach(function(_e){var _i=_e.properties.level.id;Q.levelWiseGeometry[_i]||(Q.levelWiseGeometry[_e.properties.level.id]={}),Q.outdoorLevelMapping[_i]&&(_i=Q.outdoorLevelMapping[_i]),Q.levelWiseGeometry[_i][_e.id]=_e})}},{key:"setLevelWiseGeometry",value:function(){var Q=this;this.level&&Object.keys(this.level).forEach(function(_e){Q.levelWiseGeometry[_e]={}}),this.setSpaceWithLevel(),this.setOccupantWithLevel(),this.setEntrance()}},{key:"getStructureWiseGeometry",value:function(Q){for(var _e={},_i=0,_o=Object.entries(this.levelWiseGeometry);_i<_o.length;_i++){var Fa=(bc=ad(_o[_i],2))[0],bc=bc[1];Q===this.levelStructureMapping[Fa]&&(_e[Fa]=this.level[Fa],_e[Fa].features=bc)}return _e}},{key:"getLabelAsPerPreference",value:function(_o){var _e=(_o=_o.properties).spaceType,bc=_o.occupantName,_p=_o.spaceName,_i=_o.addressName,Fa=(_o=_o.spaceCategory,G(_m={},"OCCUPANT_NAMES",bc),G(_m,"SPACE_NAME",_p),G(_m,AE,_e?_e.charAt(0).toUpperCase()+_e.slice(1).toLowerCase():""),G(_m,rT,_o?_o.charAt(0).toUpperCase()+_o.slice(1).toLowerCase():""),G(_m,"INTERNAL_ADDRESS_SHORT",_i),G(_m,"INTERNAL_ADDRESS",_i),G(_m,"INTERNAL_ADDRESS_LONG",_i),_m),pd=(bc=this.theme.spaceRules,"");if("NONE"===(_p=_o&&_e&&bc[_o]&&bc[_o].spaceTypes&&bc[_o].spaceTypes[_e].behavioralAppearance.default.labelType)){if(!this.labelTextPreference)return"";Fa[AE]=""}if(("NONE"===(_i=_o&&_e&&bc[_o]&&bc[_o].properties&&bc[_o].properties.behavioralAppearance&&bc[_o].properties.behavioralAppearance.default&&bc[_o].properties.behavioralAppearance.default.labelType)||void 0===_i)&&void 0===_p){if(!this.labelTextPreference)return"";Fa[AE]="",Fa[rT]=""}var _m=_o&&_e&&bc[_o]&&bc[_o].properties&&bc[_o].properties.behavioralAppearance&&bc[_o].properties.behavioralAppearance.default&&bc[_o].properties.behavioralAppearance.default.labelTextPreference,oy=_m&&this.labelTextPreference?this.labelTextPreference:_m;if(oy)for(var ry=0;ry<oy.length;ry++)if(Fa[oy[ry]]){pd=Fa[oy[ry]];break}return pd}}]),_l}(),y_=function(){function _l(pd){var _o=pd.apiKey,Fa=pd.baseUrl,bc=pd.token;pd=pd.hrn,w(this,_l),this.hostOptions_={apiKey:_o,url:Fa,token:bc,hrn:pd},this.momData=[],this.theme={},this.loadOptions={}}var Q,_e;return j(_l,[{key:"setHostOptions",value:function(_i){0!==Object.keys(_i).length&&(this.hostOptions_=d(d({},this.hostOptions_),_i))}},{key:"getToken",value:function(){return this.hostOptions_.token}},{key:"getHrn",value:function(){return this.hostOptions_.hrn}},{key:"load",value:function(_i){var _o=this,Fa=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.loadOptions=d(d(d({},cy),Fa),{},{venueId:_i}),this.hostOptions_.mapData=Fa.mapData,this.hostOptions_.themeRule=Fa.themeRule,this.hostOptions_.svgList=Fa.svgList,this.hostOptions_.labelTextPreference=Fa.labelTextPreferenceOverride,this.getHrn()?this.getVenueModalInstance():this.getToken()?this.getDefaultCollectionWithToken().then(function(){return _o.getVenueModalInstance()}).catch(function(){return Promise.reject(new Error("Unable to find indoor map collection. Please contact your administrator"))}):Promise.reject(new Error("In order to load indoor map, Please provide either hrn or token"))}},{key:"getVenueModalInstance",value:function(){var _i=this;return Promise.resolve().then(function(){return _i.loadOptions.isMetaEnabled?_i.getMeta_(_i.loadOptions.isIconsEnabled).catch(function(_o){return console.warn(_o),Promise.resolve()}):Promise.reject()}).then(function(_o){return _i.getVenue_(_o)}).then(function(_o){return _o}).catch(function(_o){console.debug("Captured event VENUE_ERROR_STATE",_o)})}},{key:"createMomStructure",value:function(){var _i=this,_o={site:{},structure:{},level:{},levelConnector:{},occupant:{},spaces:{},spaceGroups:{},topology:{},address:{},outdoorLevelMapping:{},entrance:{},levelStructureMapping:{}};return this.momData.forEach(function(Fa){var bc="indoormap-00000000-0000-4000-a000-".concat(_i.loadOptions.venueId.toString().padStart(12,"0")),pd=Fa.id;Fa.momType!==wT&&!_i.hostOptions_.mapData&&Fa.properties.indoorMapId!=_i.loadOptions.venueId&&Fa.properties.indoorMapId!==bc||(Fa.momType===EE?_o.site=D0.setSite(Fa,_i.loadOptions.venueId):"indoor.Structure"===Fa.momType?_o.structure[pd]=D0.setStructure(Fa):Fa.momType!==hA||Fa.properties.isOutdoor&&(!Fa.properties.isOutdoor||Fa.properties.parentIndoorLevel)?Fa.momType===hA&&Fa.properties.isOutdoor&&Fa.properties.parentIndoorLevel?_o.outdoorLevelMapping[Fa.id]=Fa.properties.parentIndoorLevel.id:Fa.momType===nT?_o.entrance[pd]=D0.setEntrance(Fa):Fa.momType===TE?_o.occupant[pd]=D0.setOccupant(Fa):Fa.momType===Yx?_o.spaces[pd]=D0.setSpace(Fa):"indoor.SpaceGroups"===Fa.momType?_o.spaceGroups[pd]=D0.setSpaceGroups(Fa):Fa.momType===wT&&(_o.address[pd]=D0.setAddress(Fa)):(_o.level[pd]=D0.setLevel(Fa),_o.levelStructureMapping[pd]=Fa.properties.structure.id))}),_o.theme=this.theme,_o.labelTextPreference=this.hostOptions_.labelTextPreference,new x0(_o)}},{key:"getVenue_",value:function(_i){this.momData=_i.getMomData();var _o=this.createMomStructure();return _o.setLevelWiseGeometry(),new mM(_o,_i)}},{key:"setConfigData",value:function(bc){var _o=bc.themeRule,Fa=bc.svgList;bc=bc.defaultLang,fA.setSpaceRules(_o.spaceRules),D0.svgList=Fa,D0.themeRule=_o,D0.defaultLang=bc,this.theme=_o}},{key:"getMeta_",value:function(){var _i=this,_o=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],Fa=new u0,bc=this.hostOptions_.mapData?{}:this.getMetaConfig_(this.loadOptions.venueId,tx.SITE),pd=this.hostOptions_.themeRule||this.getMetaConfig_(this.loadOptions.venueId,tx.Theme),_p=[];return _o&&(_p=this.hostOptions_.svgList||this.getMetaConfig_(this.loadOptions.venueId,tx.IMAGES)),new Promise(function(_m){Promise.all([bc,pd,_p]).then(function(ry){var hy=(ry=ad(ry,3))[0],xy=ry[1],By=ry[2],My=_i.hostOptions_.mapData?{mom:new Promise(function($y){return $y(_i.hostOptions_.mapData)}),site:_i.hostOptions_.mapData.features.find(function($y){return $y.momType===EE})}:iT.getMomData(hy,_i.hostOptions_);My.mom.then(function($y){var Ly=xy.properties;Fa.imageCache=_o?D0.manageSvgDimensions(By.properties):[],_i.setConfigData({themeRule:Ly,svgList:Fa.imageCache,defaultLang:My&&My.site&&My.site.properties.defaultLanguageCode}),Fa.releaseSettings_={displayOptions:{display:Ly.entranceRules.default.displayName||wx.STANDARD},mom:$y.features},Fa.theme=new N0(Ly,Fa),_m(Fa)})})})}},{key:"getMetaConfig_",value:function(_i,_o){return iT.getConfigUrl(_i,_o,this.hostOptions_)}},{key:"fetchCollections",value:function(){return iT.getDefaultCollection(this.hostOptions_)}},{key:"fetchUserProjects",value:function(){return iT.getProjectAccountDetails(this.hostOptions_)}},{key:"getDefaultCollectionWithToken",value:(Q=m().mark(function _i(){var _o=this;return m().wrap(function(Fa){for(;;)switch(Fa.prev=Fa.next){case 0:return Fa.abrupt("return",Promise.all([this.fetchCollections(),this.fetchUserProjects()]).then(function(pd){var _p;return pd=ad(pd,2),(_p=_o.getHrnFromDefaultCollection(_p=pd[0],pd=pd[1])).hrn?(_o.setHostOptions(pd={hrn:_p.hrn}),Promise.resolve()):Promise.reject()}).catch(function(bc){return Promise.reject(bc)}));case 1:case"end":return Fa.stop()}},_i,this)}),_e=function(){var _i=this,_o=arguments;return new Promise(function(Fa,bc){var pd=Q.apply(_i,_o);function _p(oy){v(pd,Fa,bc,_p,_m,"next",oy)}function _m(oy){v(pd,Fa,bc,_p,_m,"throw",oy)}_p(void 0)})},function(){return _e.apply(this,arguments)})},{key:"getHrnFromDefaultCollection",value:function(bc,_o){var Fa;return bc=bc.results.items,Array.isArray(bc)&&bc.length?(Fa=this.getProjectRealm(_o),bc.find(function(pd){return pd.hrn.includes(Fa)})):Promise.reject(new Error("Error while accessing default collection"))}},{key:"getProjectRealm",value:function(_i){return Array.isArray(_i.items)&&_i.items.length&&_i.items[0].id.includes("indoor-")?this.getRealmNameFromHrn(_i=_i.items[0].hrn):""}},{key:"getRealmNameFromHrn",value:function(_i){return _i?(_i=_i.split(":")).length&&_i[4]:""}},{key:"getSupportedMapList",value:function(){var _i=this,_o=(Fa=this.hostOptions_).hrn,Fa=Fa.token;return _o?this.fetchMapInfoList():Fa?this.getDefaultCollectionWithToken().then(function(){return _i.fetchMapInfoList()}).catch(function(){return Promise.reject(new Error("Unable to find indoor map collection. Please contact your administrator"))}):Promise.reject(new Error("In order to load map list, Please provide either hrn or token"))}},{key:"fetchMapInfoList",value:function(){var _i=this;return iT.fetchIndoorMapList(this.hostOptions_).then(function(_o){return 0<(_o=_o.features).length?_o.map(function(pd){var bc=(pd=pd.properties).placeProperties,_p=(_p=(pd=pd.indoorMapId).split("-").pop()).substring(_p.length-5);return{mapIdentifier:pd,mapName:_i.getMapName(bc.names).name,mapId:_p}}):[]}).catch(function(_o){Promise.reject(new Error("".concat(_o,": Error while fetching map list")))})}},{key:"getMapName",value:function(_i){return Array.isArray(_i)&&0<_i.length?_i.find(function(_o){return"OFFICIAL"===_o.nameType}):{}}}]),_l}(),DS=["origin","destination"],IS=function(){function _l(){var Q=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(w(this,_l),!Q.apiKey&&!Q.token)throw new Error("API key or Token is missing");this.config_=d({baseUrl:"https://meta-indoor-routing.api-gateway.ls.hereapi.com"},Q)}return j(_l,[{key:"calculateRoute",value:function(_o){var _e=void 0===(_e=_o.origin)?{}:_e,_i=void 0===(_i=_o.destination)?{}:_i;if(_o=function _c(_l,Q){if(null==_l)return{};var _e,_i=function(bc,pd){if(null==bc)return{};for(var _p,_m={},oy=Object.keys(bc),ry=0;ry<oy.length;ry++)0<=pd.indexOf(_p=oy[ry])||(_m[_p]=bc[_p]);return _m}(_l,Q);if(Object.getOwnPropertySymbols)for(var _o=Object.getOwnPropertySymbols(_l),Fa=0;Fa<_o.length;Fa++)0<=Q.indexOf(_e=_o[Fa])||Object.prototype.propertyIsEnumerable.call(_l,_e)&&(_i[_e]=_l[_e]);return _i}(_o,DS),!_e.coordinates||!_i.coordinates)throw new Error("Waypoint coordinates are missing");function Fa(oy){var ry=oy.coordinates,_m=oy.venueId;return oy=oy.levelId,ry=ry.join(","),_m&&oy?ry.concat(";indoorMapId=",_m,";levelId=",oy):ry}var bc=new URL("".concat(this.config_.baseUrl,"/v1/routes")),pd=new URLSearchParams({origin:Fa(_e),destination:Fa(_i),apiKey:this.config_.apiKey});return Object.entries(_o).forEach(function(oy){oy=ad(oy,2),pd.append(oy[0],"object"===g(oy=oy[1])?JSON.stringify(oy):oy)}),bc.search=pd,fetch(bc,{headers:{"X-Api-Key":this.config_.apiKey}}).then(function(_p){return _p.json()})}}]),_l}(),xx={VENUE_DATA_LOADED:"VENUE_DATA_LOADED",VENUE_THEME_LOADED:"VENUE_THEME_LOADED",VENUE_ICONS_LOADED:"VENUE_ICONS_LOADED",VENUE_MOM_DATA_LOADED:"VENUE_MOM_DATA_LOADED",VENUE_ERROR_STATE:"VENUE_ERROR_STATE",VENUE_MAP_DATA_LOADED:"VENUE_MAP_DATA_LOADED",VENUE_ENTITY_DATA_LOADED:"VENUE_ENTITY_DATA_LOADED",VENUE_DATA_MODEL_LOADED:"VENUE_DATA_MODEL_LOADED",VENUE_NAV_DATA_LOADED:"VENUE_NAV_DATA_LOADED",META_DATA_LOADED:"META_DATA_LOADED",META_DATA_MODEL_LOADED:"META_DATA_MODEL_LOADED",META_DATA_MODEL_UPDATED:"META_DATA_MODEL_UPDATED"},h0=((Object.freeze((G(u_={},xx.VENUE_DATA_LOADED,{description:"event fired when all requested files along with metadata & overrides are loaded",emitTemplate:{}}),G(u_,xx.VENUE_MAP_DATA_LOADED,{description:"event fired when requested levels, drawings & community files are loaded",emitTemplate:{}}),G(u_,xx.VENUE_ENTITY_DATA_LOADED,{description:"event fired when requested entity data is loaded",emitTemplate:{}}),G(u_,xx.VENUE_DATA_MODEL_LOADED,{description:"event fired when a map file is loaded",emitTemplate:{}}),G(u_,xx.VENUE_NAV_DATA_LOADED,{description:"event fired when requested navigation product is loaded",emitTemplate:{}}),G(u_,xx.META_DATA_LOADED,{description:"event fired when all requested meta files are loaded except icon & marker",emitTemplate:{}}),G(u_,xx.META_DATA_MODEL_LOADED,{description:"event fired when a specific model is loaded except icon & marker",emitTemplate:{}}),G(u_,xx.META_DATA_MODEL_UPDATED,{description:"event fired when a specific meta override is added or removed",emitTemplate:{}}),G(u_,xx.VENUE_ICONS_LOADED,{description:"event fired when all icons of venue are loaded",emitTemplate:{}}),u_)),m_=new Iy).EVENT_NAME=xx,m_.on("newListener",function(_l){xx[_l]||console.warn("subscribing for un-registered/documented event")}),function(){q(Q,H.map.Feature);var _l=_f(Q);function Q(_e){var _i;if(w(this,Q),_i=_l.call(this),_e instanceof mM)return _i.venueModel=_e,_i.search_=new tT(_e),_i.status_={activeDrawingId:_e.getRootDrawing().getIdentifier(),activeLevelIndex:_e.getRootDrawing().getMainLevel().getZIndex()},_i.mapObjectStore_=_i.getDefaultMapObjectsStore_(),_i.drawings=_e.getDrawings().map(function(_o){return(_o=new vy(_o)).setParentEventTarget(_u(_i)),_o}),_i.levels=_e.getLevels().map(function(_o){var Fa=new Ay(_o);return Fa.setParentEventTarget(_i.drawings.find(function(bc){return bc.getIdentifier()===Fa.getData().getDrawing().getIdentifier()})),Fa}),_i.geometries=_e.getGeometries().map(function(_o){var Fa=new dy(_o);return Fa.setParentEventTarget(_i.levels.find(function(bc){return bc.getIdentifier()===Fa.getData().getLevel().getIdentifier()})),Fa}),_i.mutualExclusiveHighlight_=!1,_i;throw new Error("It is mandatory to provide valid instance of venueModel")}return j(Q,[{key:"getData",value:function(){return this.venueModel}},{key:"getBoundingBox",value:function(){return ga(H.geo.Rect,ey(this.venueModel.getBoundingBox()))}},{key:"getCenter",value:function(){var _e=(_i=ad(this.venueModel.getCenter(),2))[0],_i=_i[1];return new H.geo.Point(_i,_e)}},{key:"getId",value:function(){return this.venueModel.getId()}},{key:"getIdentifier",value:function(){return this.venueModel.getIdentifier()}},{key:"getName",value:function(){return this.venueModel.getName()}},{key:"getDrawing",value:function(_e){return this.drawings.find(function(_i){return _i.getIdentifier()===_e})}},{key:"getDrawings",value:function(){return this.drawings}},{key:"getLevel",value:function(_e){return this.levels.find(function(_i){return _i.getIdentifier()===_e})}},{key:"getLevels",value:function(){return this.levels}},{key:"getGeometry",value:function(_e){return this.getGeometries().find(function(_i){return _i.getIdentifier()===_e})}},{key:"getGeometries",value:function(){return this.geometries}},{key:"getActiveLevels",value:function(){var _e=this;return this.getData().getDisplaySettings()===wx.FLATTEN?this.venueModel.getLevelsByZIndex(this.status_.activeLevelIndex).map(function(_i){return _e.getLevel(_i.getIdentifier())}):[this.venueModel.getDrawingById(this.status_.activeDrawingId).getLevelByZIndex(this.status_.activeLevelIndex)].map(function(_i){return _e.getLevel(_i.getIdentifier())})}},{key:"getActiveDrawing",value:function(){return this.getDrawing(this.status_.activeDrawingId)}},{key:"setActiveDrawing",value:function(_e){if(this.status_.activeDrawingId!==_e){var _i=this.venueModel.getDrawingById(_e);if(!_i)throw new Error("Drawing ".concat(_e," was not found"));var _o=this.status_.activeDrawingId;this.status_.activeDrawingId=_i.id,this.setActiveLevelIndex(_i.getMainLevel().getZIndex()),this.dispatchEvent(new H.util.ChangeEvent(Q.EVENTS.DRAWING_CHANGE,_e,_o))}}},{key:"getActiveLevelIndex",value:function(){return this.status_.activeLevelIndex}},{key:"setActiveLevelIndex",value:function(_e){var _i;this.venueModel.getLevelsByZIndex(_e)&&(_i=this.status_.activeLevelIndex,this.status_.activeLevelIndex=_e,this.dispatchEvent(new H.util.ChangeEvent(Q.EVENTS.LEVEL_CHANGE,_e,_i)))}},{key:"isActive",value:function(){var _e=this.getParentEventTarget();return!!_e&&this===_e.activeVenue}},{key:"getHighlightedGeometries",value:function(){var _e=this;return this.venueModel.getGeometries().filter(function(_i){return _i.isHighlighted()}).map(function(_i){return _e.getGeometry(_i.getIdentifier())})}},{key:"setHighlightedGeometries",value:function(){var _e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],_i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],Fa=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},_o=3<arguments.length&&void 0!==arguments[3]&&arguments[3],bc=(Fa=d(d({},JE),Fa)).fillColor,pd=Fa.outlineColor,_p=Fa.outlineWidth;this.mutualExclusiveHighlight_=!!_o,this.mutualExclusiveHighlight_&&this.getHighlightedGeometries().forEach(function(_m){_m.getData().highlight(!1)}),_i.forEach(function(_m){_m.getData().highlight(_e,{m:bc,o:pd,w:_p})}),this.dispatchEvent(Q.EVENTS.GEOMETRY_HIGHLIGHT)}},{key:"getMapObjects",value:function(){var _e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.getActiveLevelIndex(),_i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.getActiveDrawing();return this.mapObjectStore_[_e][_i.getIdentifier()]}},{key:"setMapObjects",value:function(){var _e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],_i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.getActiveLevelIndex(),_o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.getActiveDrawing();this.mapObjectStore_[_i]&&this.mapObjectStore_[_i][_o.getIdentifier()]&&(this.mapObjectStore_[_i][_o.getIdentifier()]=ey(_e)),this.updateMapObjectsVisibility_()}},{key:"search",value:function(){var _e=this;return this.search_.find(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").flatMap(function(_i){return _i.geometries.map(function(_o){return _e.getGeometry(_o.id)})})}},{key:"updateMapObjectsVisibility_",value:function(){Object.values(this.mapObjectStore_).forEach(function(_e){Object.values(_e).forEach(function(_i){return _i.forEach(function(_o){return _o.setVisibility(!1)})})}),this.isActive()&&this.mapObjectStore_[this.getActiveLevelIndex()][this.getActiveDrawing().getIdentifier()].forEach(function(_e){return _e.setVisibility(!0)})}},{key:"getDefaultMapObjectsStore_",value:function(){var _e=this,_i=this.getData().getDisplaySettings()===wx.FLATTEN;return this.venueModel.getLevels().reduce(function(pd,Fa){var bc=Fa.getZIndex();return(pd=d({},pd))[bc]||(pd[bc]={}),pd[bc][Fa.getDrawing().getIdentifier()]=[],_i&&(pd[bc][_e.venueModel.getRootDrawing().getIdentifier()]=[]),pd},{})}}]),Q}()),py=(h0.EVENTS={ACTIVE_VENUE_CHANGE:"activevenuechange",DRAWING_CHANGE:"drawingchange",LEVEL_CHANGE:"levelchange",GEOMETRY_HIGHLIGHT:"geometryhighlight"},function(){function _l(){w(this,_l)}return j(_l,null,[{key:"getIconLayer",value:function(){return{type:"FeatureCollection",features:(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).flatMap(function(Q){return Q.getData().getGeometries()}).filter(function(Q){return Q.isIcon()&&Q.getIcon()}).map(function(Q){var _e=(_i=ad(Q.getLabelArea(),2))[0],_i=_i[1],_o=Q.getLevel(),Fa=Q.getIcon(),bc=Q.properties.spaceType||Q.properties.spaceCategory||Q.getDisplayName();return{type:"Feature",properties:{id:Q.getIdentifier(),geometryId:Q.getIdentifier(),levelId:_o.getIdentifier(),name:bc,venueId:_o.getDrawing().getVenueModel().getIdentifier(),url:Fa?"data:image/svg+xml;utf8,".concat(encodeURIComponent(Fa)):""},geometry:{type:P0_POINT,coordinates:[_e,_i]}}})}}},{key:"getLabelLayer",value:function(){return{type:"FeatureCollection",features:(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).flatMap(function(Q){return Q.getData().getGeometries()}).filter(function(Q){return Q.getDisplayName()&&!Q.isIcon()}).map(function(Q){var _e=(_i=ad(Q.getLabelArea(),2))[0],_i=_i[1],_o=(Fa=Q.getLabelStyle()).fill,Fa=Fa.zmin,bc=Q.getLevel();return{type:"Feature",properties:{id:Q.getIdentifier(),geometryId:Q.getIdentifier(),levelId:bc.getIdentifier(),venueId:bc.getDrawing().getVenueModel().getIdentifier(),name:Q.getDisplayName(),minZoom:Fa||15,textFillColor:_o.toLowerCase()},geometry:{type:P0_POINT,coordinates:[_e,_i]}}})}}},{key:"getGeometryLayer",value:function(){return{type:"FeatureCollection",features:(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).flatMap(function(Q){return Q.getData().getGeometries()}).filter(function(Q){return Q.getType()!==P0_POINT}).map(function(Q){var _e=(_o=Q.getHighlightedStyle()||{}).m,_i=_o.o,_o=_o.w,Fa=(pd=d({},Q.getStyle())).m,bc=pd.o,pd=pd.w,_p=(oy=g1).fillColor,_m=oy.outlineColor,oy=oy.outlineWidth,ry=Q.getLevel();return{type:"Feature",properties:{id:Q.getIdentifier(),fillColor:(_e||Fa||_p).toLowerCase(),geometryId:Q.getIdentifier(),levelId:ry.getIdentifier(),venueId:ry.getDrawing().getVenueModel().getIdentifier(),outlineColor:(_i||bc||_m).toLowerCase(),outlineWidth:Number(((_o||pd||oy)/3).toFixed(2)),zIndex:Q.getZIndex()},geometry:{type:Q.getType(),coordinates:Q.getCoordinates()}}})}}},{key:"getFootprintLayer",value:function(Q){return{type:"FeatureCollection",features:Q.flatMap(function(_e){var _i=_e.getData().getRootDrawing().getMainLevel().getIdentifier(),_o=_e.getLevel(_i).getData().getGeometries().filter(function(Fa){return Fa.getType()===P0_POLYGON});return[{type:"Feature",properties:{isFootprint:!0,levelId:_i,venueId:_e.getIdentifier(),zIndex:1},geometry:{type:"MultiPolygon",coordinates:_o.map(function(Fa){return Fa.getCoordinates()})}},{type:"Feature",properties:{isFootprint:!0,levelId:_i,venueId:_e.getIdentifier(),zIndex:2,venueName:_e.getName()},geometry:{type:"Point",coordinates:_e.getCenter().toGeoJSON().coordinates.slice(0,2)}}]})}}}]),_l}()),O1=function(){function _l(){w(this,_l)}return j(_l,null,[{key:"getStyle",value:function(){var _e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],_i={styles:[{layer:v0.FOOTPRINT,when:["==",["geometry-type"],"Polygon"],technique:"solid-line",color:"#613F8E",lineWidth:"2px",renderOrder:1},{layer:v0.FOOTPRINT,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:"#AF91B4",renderOrder:2},{layer:v0.FOOTPRINT,when:["==",["geometry-type"],"Point"],technique:"text",color:"black",size:16,text:["get","venueName"],priority:61},{layer:v0.VECTOR,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:["get","fillColor"],renderOrder:["get","zIndex"]},{layer:v0.VECTOR,technique:"solid-line",color:["get","outlineColor"],lineWidth:["get","outlineWidth"],renderOrder:["get","zIndex"]},{layer:v0.TEXT,minZoomLevel:["get","minZoom"],technique:"text",color:["get","textFillColor"],size:13,text:["get","name"],priority:60},{layer:v0.ICON,minZoomLevel:16,when:["==",["geometry-type"],"Point"],technique:"labeled-icon",textIsOptional:!0,size:0,imageTexture:["concat","texture",["get","name"]],screenWidth:["interpolate",["linear"],["zoom"],15,3,21,70],screenHeight:["interpolate",["linear"],["zoom"],15,3,21,70],priority:61}],images:{},imageTextures:[]};return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(_o){var Fa="texture"+_o.properties.name;_i.images[Fa]||(_i.images[Fa]={url:_o.properties.url,preload:!0},_i.imageTextures.push({name:Fa,image:Fa}))}),_e.forEach(function(_o){var Fa,_p=_o.getData().getHighlightedStyle();(Fa=_i.styles).push.apply(Fa,[{layer:v0.VECTOR,when:["==",["get","id"],_o.id],technique:"fill",color:_p.m,renderOrder:["get","zIndex"]},{layer:v0.VECTOR,when:["==",["get","id"],_o.id],technique:"solid-line",color:_p.o,lineWidth:_p=_p.w,renderOrder:["get","zIndex"]}])}),new H.map.render.harp.Style(_i)}}]),_l}(),x_=function(){function _l(){w(this,_l)}return j(_l,null,[{key:"getIconsTextures",value:function(){var Q={},_e={},_i=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(_o,Fa){var bc=Fa.properties.name;return _o[bc]||(_o[bc]=[]),_o[bc].push(Fa),_o},{});return Object.keys(_i).forEach(function(_o){var Fa="texture".concat(_o),bc="sprite".concat(_o);Q[Fa]={url:_i[_o][0].properties.url,sprites:G({},bc,[0,0,50,50])},_i[_o].forEach(function(_p){_e["icon".concat((_p=_p.properties).name)]={filter:{name:_p.name,$zoom:{min:16}},draw:{points:{interactive:!0,priority:1,size:[[15,"50%"],[16,"55%"],[17,"60%"],[18,"65%"],[19,"75%"],[20,"80%"],[21,"100%"]],texture:Fa,sprite:bc}}}})}),{textures:Q,iconLayers:_e}}},{key:"getFootprintLayer",value:function(){return{data:{source:"venues",layer:v0.FOOTPRINT},draw:{polygons:{interactive:!0,color:"#AF91B4",order:2},lines:{color:"#613F8E",width:"2px",order:1},points:{color:"[0, 0, 0, 0]",size:"0px",order:3,priority:1,text:{anchor:"center",collide:!1,font:{fill:"black",size:"16px"},text_source:"function() { return feature.venueName }"}}}}}},{key:"getGeometryLayer",value:function(){var Q,_e,_i,_o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],Fa={};return _o.length&&(Q=(_i=_o[0].getData().getHighlightedStyle()).m,_e=_i.o,_i=_i.w,Fa={filter:{id:_o.map(function(bc){return bc.id})},draw:{polygons:{interactive:!0,color:Q},lines:{color:_e,width:_i}}}),{data:{source:"venues",layer:v0.VECTOR},draw:{polygons:{interactive:!0,color:"function() { return feature.fillColor }",order:"function() { return feature.zIndex }"},lines:{color:"function() { return feature.outlineColor }",order:"function() { return feature.zIndex }",width:"function() { return feature.outlineWidth }"}},highlighted:Fa}}},{key:"getTextLayer",value:function(){return{filter:{$zoom:{min:18}},data:{source:"venues",layer:v0.TEXT},draw:{points:{filter:"function() { return $zoom > feature.minZoom }",color:"[0, 0, 0, 0]",size:"0px",offset:["0px","-10px"],priority:2,text:{font:{fill:"function() { return feature.textFillColor }",size:13},text_source:"function() { return feature.name }"}}}}}},{key:"getIconLayer",value:function(Q){return d({data:{source:"venues",layer:v0.ICON}},Q)}},{key:"getStyle",value:function(){var _e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],Q=(_i=_l.getIconsTextures(_i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[])).textures,_i=_i.iconLayers;return _e={venue_footprints:_l.getFootprintLayer(),venue_geometries:_l.getGeometryLayer(_e),venue_labels:_l.getTextLayer(),venue_icons:_l.getIconLayer(_i)},_i=H.gl.yaml.safeDump({sources:{venues:{max_zoom:24,type:"GeoJSONTileSource"}},layers:_e,textures:Q}),new H.map.render.webgl.Style(_i)}}]),_l}(),a0={type:"FeatureCollection",features:[]},kS={extent:4096,indexMaxZoom:0,maxZoom:24,tolerance:3},n2=(u_=function(){q(Q,H.map.provider.RemoteTileProvider);var _l=_f(Q);function Q(_e){return w(this,Q),(_e=_l.call(this,_e)).venues=[],_e.activeVenue=null,_e.dataLayers_={},_e.tileIndexes_={},_e.addEventListener(h0.EVENTS.ACTIVE_VENUE_CHANGE,_e.activeVenueChangeHandler_,void 0,_u(_e)),_e}return j(Q,[{key:"setStyle",value:function(_e){return this.setStyleInternal(_e)}},{key:"getStyle",value:function(){return this.getStyleInternal()}},{key:"isFeatureVisible_",value:function(_e,_i){var _o=_e.properties;return this.activeVenue&&_o.venueId===this.activeVenue.getIdentifier()?_i!==v0.FOOTPRINT&&this.activeVenue.getActiveLevels().some(function(Fa){return Fa.id===_o.levelId}):!0===_o.isFootprint&&_i===v0.FOOTPRINT}},{key:"requestInternal",value:function(_e,_i,_o,Fa){function bc(_m){for(var oy=0;oy<_m.length;oy+=1)_m[oy]=_m[oy].map(function(ry){return _1(ry,_o,_e,_i,kS.extent)})}var pd=this,_p={};return Object.keys(this.tileIndexes_).forEach(function(_m){var oy=pd.tileIndexes_[_m].getTile(_o,_e,_i);_p[_m]=oy?function bT(_l){var Q=[],_e=_l&&_l.features;if(_e)for(var _i=0,_o=_e.length;_i<_o;_i+=1){var Fa=_e[_i],bc=Fa.type,pd=void 0,_p=!1;switch(bc){case 1:pd={type:P0_MULTI_POINT,coordinates:Fa.geometry.map(function(_m){return _m.slice()})};break;case 2:case 3:pd={type:P0_MULTI_LINESTRING,coordinates:Fa.geometry.map(function(_m){return _m.map(function(oy){return oy.slice()})})},3===bc&&null==(pd=function(_m){for(var oy,ry=[],hy=[],xy=0,By=_m.coordinates.length;xy<By;xy+=1){var My=_m.coordinates[xy],$y=Jb(My);null!==$y&&($y===(oy=oy||$y)&&hy.length&&(ry.push(hy),hy=[]),hy.push(My))}return 0<hy.length&&ry.push(hy),1===ry.length?(_m.type=P0_POLYGON,_m.coordinates=ry[0]):1<ry.length?(_m.type=P0_MULTI_POLYGON,_m.coordinates=ry):_m=null,_m}(pd))&&(_p=!0);break;default:_p=!0}_p||Q.push({geometry:pd,id:Fa.id,properties:Fa.tags,type:"Feature"})}return{type:"FeatureCollection",features:Q}}(oy):a0,_p[_m].features=_p[_m].features.filter(function($y){return pd.isFeatureVisible_($y,_m)});for(var ry=0;ry<_p[_m].features.length;ry+=1){var hy=_p[_m].features[ry],xy=hy.geometry.type;if(xy===P0_POLYGON||xy===P0_MULTI_LINESTRING)bc(hy.geometry.coordinates);else if(xy===P0_MULTI_POLYGON)hy.geometry.coordinates.map(bc);else for(var By=hy.geometry.coordinates,My=0;My<By.length;My+=1)By[My]=_1(By[My],_o,_e,_i,kS.extent)}}),Fa(_p),{cancel:function(){}}}},{key:"getActiveVenue",value:function(){return this.activeVenue}},{key:"getVenue",value:function(_e){return _e?this.venues.find(function(_i){return _i.getIdentifier()===_e}):this.activeVenue}},{key:"setActiveVenue",value:function(_e){var _i=this.activeVenue;this.activeVenue=_e,this.dispatchEvent(new H.util.ChangeEvent(h0.EVENTS.ACTIVE_VENUE_CHANGE,_e,_i)),this.reload()}},{key:"addVenue",value:function(_e){var _i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(!(_e instanceof h0))throw new Error("Invalid argument");var _o=_e.getIdentifier();if(this.getVenue(_o))throw new Error("Please invoke provider.removeVenue to remove old instance of venue ".concat(_o," before adding new"));_e.setParentEventTarget(this),this.venues.push(_e),_i||(this.reloadData_(),this.reloadStyle_())}},{key:"addVenues",value:function(){var _e=this,_i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];0<_i.length&&(_i.forEach(function(_o){_o instanceof h0&&_e.addVenue(_o,!0)}),this.reloadData_(),this.reloadStyle_())}},{key:"removeVenue",value:function(_e){var _i;_e instanceof h0&&-1<this.venues.indexOf(_e)&&(_i=_e.getIdentifier(),this.activeVenue&&this.activeVenue.getIdentifier()===_i&&this.setActiveVenue(null),this.venues.splice(this.venues.indexOf(_e),1),this.reloadData_(),this.reloadStyle_(),this.reload())}},{key:"getFeatureProxy",value:function(bc,_i,_o){var Fa=bc.geometryId;return bc=this.getVenue(bc=bc.venueId),Fa?_o(bc.getGeometries().find(function(pd){return pd.id===Fa})):bc&&_o(bc),!0}},{key:"addVenueEventListeners_",value:function(_e){_e&&(_e.addEventListener(h0.EVENTS.GEOMETRY_HIGHLIGHT,this.geometryHighlightHandler_,void 0,this),_e.addEventListener(h0.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),_e.addEventListener(h0.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this))}},{key:"removeVenueEventListeners_",value:function(_e){_e&&(_e.removeEventListener(h0.EVENTS.GEOMETRY_HIGHLIGHT,this.geometryHighlightHandler_,void 0,this),_e.removeEventListener(h0.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),_e.removeEventListener(h0.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this))}},{key:"activeVenueChangeHandler_",value:function(_o){var _i=_o.oldValue;_o=_o.newValue,_i&&(this.removeVenueEventListeners_(_i),_i.updateMapObjectsVisibility_()),_o&&(this.addVenueEventListeners_(_o),_o.updateMapObjectsVisibility_())}},{key:"drawingChangeHandler_",value:function(){this.reload()}},{key:"levelChangeHandler_",value:function(){this.activeVenue&&(this.activeVenue.updateMapObjectsVisibility_(),this.reload())}},{key:"geometryHighlightHandler_",value:function(){this.reloadStyle_(this.activeVenue.getHighlightedGeometries())}},{key:"createDataLayers_",value:function(){var _e=this,_i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Object.keys(v0),_o=v0.FOOTPRINT,Fa=v0.ICON,bc=v0.TEXT,pd=v0.VECTOR;_i.forEach(function(_p){switch(_p){case pd:_e.dataLayers_[pd]=py.getGeometryLayer(_e.venues);break;case _o:_e.dataLayers_[_o]=py.getFootprintLayer(_e.venues);break;case Fa:_e.dataLayers_[Fa]=py.getIconLayer(_e.venues);break;case bc:_e.dataLayers_[bc]=py.getLabelLayer(_e.venues);break;default:throw new Error("Unsupported Layer ".concat(_p))}})}},{key:"createTileIndexes_",value:function(){var _e=this;(0<arguments.length&&void 0!==arguments[0]?arguments[0]:Object.keys(v0)).forEach(function(_i){_e.tileIndexes_[_i]=new u1(_e.dataLayers_[_i],kS)})}},{key:"reloadData_",value:function(){var _e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Object.keys(v0);this.createDataLayers_(_e),this.createTileIndexes_(_e)}},{key:"reloadStyle_",value:function(_e){var _i=this.dataLayers_[v0.ICON]?this.dataLayers_[v0.ICON].features:[];this.getEngineType()===H.Map.EngineType.WEBGL?this.setStyle(x_.getStyle(_i,_e)):this.getEngineType()===H.Map.EngineType.HARP&&this.setStyle(O1.getStyle(_i,_e))}},{key:"providesGeoJSON",value:function(){return!0}}]),Q}(),new H.map.SpatialStyle({strokeColor:"#1ab4bf",lineWidth:3})),mA=new H.map.SpatialStyle({strokeColor:"#1ab4bf",lineWidth:3}),R1=new H.map.Icon("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDQwIDUwIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImIiIGQ9Ik0zNC4yNSAzMS42NTJBMTkuMDE1IDE5LjAxNSAwIDAgMCAzOSAxOS4wNkMzOSA4LjU0OSAzMC40NzggMCAyMCAwUzEgOC41NSAxIDE5LjA1OWMwIDQuODIzIDEuNzk1IDkuMjMzIDQuNzUgMTIuNTkzTDE5Ljk3NSA0NiAzNC4yNSAzMS42NTJ6Ii8+PHBhdGggaWQ9ImEiIGQ9Ik0zNC4yNSAzMS42NTJBMTkuMDE1IDE5LjAxNSAwIDAgMCAzOSAxOS4wNkMzOSA4LjU0OSAzMC40NzggMCAyMCAwUzEgOC41NSAxIDE5LjA1OWMwIDQuODIzIDEuNzk1IDkuMjMzIDQuNzUgMTIuNTkzTDE5Ljk3NSA0NiAzNC4yNSAzMS42NTJ6Ii8+PG1hc2sgaWQ9ImMiIHdpZHRoPSIzOCIgaGVpZ2h0PSI0NiIgeD0iMCIgeT0iMCIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYSIvPjwvbWFzaz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZWxsaXBzZSBjeD0iMjAiIGN5PSI0NS4xNiIgZmlsbD0iI0ZGRiIgc3Ryb2tlPSIjOTc5Nzk3IiBzdHJva2Utd2lkdGg9Ii4yNSIgcng9IjMuNSIgcnk9IjMuNSIvPjx1c2UgZmlsbD0iIzAxQjZCMiIgeGxpbms6aHJlZj0iI2IiLz48cGF0aCBmaWxsPSIjMzIzMjMyIiBmaWxsLW9wYWNpdHk9Ii41IiBkPSJNMTEuODEgMzcuNjZoMTYuMzhsLTguMiA4eiIvPjx1c2Ugc3Ryb2tlPSIjNDE2QTg2IiBzdHJva2Utd2lkdGg9Ii41IiBtYXNrPSJ1cmwoI2MpIiB4bGluazpocmVmPSIjYSIvPjxlbGxpcHNlIGN4PSIxOS44MSIgY3k9IjE5LjE5IiBmaWxsPSIjRkZGIiByeD0iNC44MSIgcnk9IjQuODEiLz48L2c+PC9zdmc+"),BN=new H.map.Icon("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDQwIDUwIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0zNC4yNSAzMS42NTJBMTkuMDE1IDE5LjAxNSAwIDAgMCAzOSAxOS4wNkMzOSA4LjU0OSAzMC40NzggMCAyMCAwUzEgOC41NSAxIDE5LjA1OWMwIDQuODIzIDEuNzk1IDkuMjMzIDQuNzUgMTIuNTkzTDE5Ljk3NSA0NiAzMi44MyAzMy4xMDRjLjQwNy0uMzc0IDEuNDE5LTEuNDUyIDEuNDE5LTEuNDUyeiIvPjxtYXNrIGlkPSJjIiB3aWR0aD0iMzgiIGhlaWdodD0iNDYiIHg9IjAiIHk9IjAiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2EiLz48L21hc2s+PGVsbGlwc2UgaWQ9ImIiIGN4PSIxOS44MDciIGN5PSIxOS4xNjgiIHJ4PSIxMi4zNjMiIHJ5PSIxMi4xOTciLz48bWFzayBpZD0iZCIgd2lkdGg9IjI1LjcyNSIgaGVpZ2h0PSIyNS4zOTQiIHg9Ii0uNSIgeT0iLS41Ij48cGF0aCBmaWxsPSIjZmZmIiBkPSJNNi45NDQgNi40NzFoMjUuNzI1djI1LjM5NEg2Ljk0NHoiLz48dXNlIHhsaW5rOmhyZWY9IiNiIi8+PC9tYXNrPjwvZGVmcz48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxlbGxpcHNlIGN4PSIyMCIgY3k9IjQ1LjE2IiBmaWxsPSIjRkZGIiBzdHJva2U9IiM5Nzk3OTciIHN0cm9rZS13aWR0aD0iLjI1IiByeD0iMy41IiByeT0iMy41Ii8+PHVzZSBmaWxsPSIjMzIzMjMyIiB4bGluazpocmVmPSIjYSIvPjxwYXRoIGZpbGw9IiM3RDdEN0QiIGQ9Ik0xMi4wMTEgMzcuODA1aDE1Ljk3OGwtNy45MTYgOHoiLz48dXNlIHN0cm9rZT0iIzdDN0M3QyIgc3Ryb2tlLXdpZHRoPSIuNSIgbWFzaz0idXJsKCNlKSIgeGxpbms6aHJlZj0iI2EiLz48dXNlIHN0cm9rZT0iI0ZGRiIgc3Ryb2tlLXdpZHRoPSIuNSIgbWFzaz0idXJsKCNjKSIgeGxpbms6aHJlZj0iI2EiLz48ZWxsaXBzZSBmaWxsPSIjRkZGIiBjeD0iMTkuODA3IiBjeT0iMTkuMTY4IiByeD0iMTIuMzYzIiByeT0iMTIuMTk3Ii8+PHBhdGggZmlsbD0iIzMyMzIzMiIgZD0iTTYuODEyIDYuOTQ4aDYuNDV2Ni4zNjRoLTYuNDV6bTAgMTIuNzI3aDYuNDV2Ni4zNjRoLTYuNDV6bTYuNDUtNi4zNjNoNi40NXY2LjM2NGgtNi40NXptMCAxMi43MjdoNi40NXY2LjM2NGgtNi40NXptNi40NS0xOS4wOTFoNi40NXY2LjM2NGgtNi40NXptMCAxMi43MjdoNi40NXY2LjM2NGgtNi40NXptNi40NS02LjM2M2g2LjQ1djYuMzY0aC02LjQ1em0wIDEyLjcyN2g2LjQ1djYuMzY0aC02LjQ1eiIvPjx1c2Ugc3Ryb2tlPSIjRkZGIiBtYXNrPSJ1cmwoI2QpIiB4bGluazpocmVmPSIjYiIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIvPjwvZz48L3N2Zz4="),gA=function(){function _l(Q,_e){w(this,_l),this.indoorMapObjects_=null,this.outdoorMapObjects_=null,this.createRouteObjects_(Q,_e)}return j(_l,[{key:"createRouteObjects_",value:function(Q){for(var _e=this,_i=void 0===(Q=Q.sections)?[]:Q,_o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:g0,Fa=(this.indoorMapObjects_={},this.outdoorMapObjects_=new H.map.Group,function(_p){var _m,$y,oy=_i[_p],ry=(hy=oy.departure.place).id,hy=hy.type,xy=H.util.flexiblePolyline.decode(oy.polyline).polyline,By=void 0,My=void 0,Ly=(($y=_o(_p,_i,_l.ObjectType.SEGMENT_START_MARKER))&&(By=new H.map.Marker(oy.departure.place.location,{icon:$y})),($y=_o(_p,_i,_l.ObjectType.SEGMENT_FINISH_MARKER))&&(My=new H.map.Marker(oy.arrival.place.location,{icon:$y})),_o(_p,_i,_l.ObjectType.SEGMENT_POLYLINE));"indoor"===hy?($y=function(){var Ey=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],by=new Map,wy=new H.geo.LineString,ky=ad(Ey[0],3)[2];return by.set(ky,[wy]),Ey.forEach(function(_v){_v[2]!==ky&&(ky=_v[2],wy=new H.geo.LineString,by.has(ky)?by.get(ky).push(wy):by.set(ky,[wy])),wy.pushLatLngAlt.apply(wy,ey(_v))}),by}(xy),_m=Array.from($y.keys()).reduce(function(Ey,by){return Ey[by]||(Ey[by]=new H.map.Group),Ey},{}),Ly&&$y.forEach(function(Ey,by){Ey.forEach(function(wy){1<wy.getPointCount()&&(wy=new H.map.Polyline(wy,{style:Ly}),_m[by].addObject(wy))})}),By&&_m[oy.departure.place.location.lvl].addObject(By),My&&_m[oy.arrival.place.location.lvl].addObject(My),_e.indoorMapObjects_[ry]=d(d({},_e.indoorMapObjects_[ry]||{}),_m)):(Ly&&(_p=new H.geo.LineString(xy.flatMap(function(Ey){return[Ey[0],Ey[1],0]})),hy=new H.map.Polyline(_p,{style:Ly}),_e.outdoorMapObjects_.addObject(hy)),By&&_e.outdoorMapObjects_.addObject(By),My&&_e.outdoorMapObjects_.addObject(My))}),bc=0;bc<_i.length;bc++)Fa(bc)}},{key:"getIndoorObjects",value:function(){return this.indoorMapObjects_}},{key:"getOutdoorObjects",value:function(){return this.outdoorMapObjects_}}]),_l}(),gM=(gA.ObjectType={SEGMENT_START_MARKER:1,SEGMENT_FINISH_MARKER:2,SEGMENT_POLYLINE:3},function(){q(Q,H.service.Service);var _l=_f(Q);function Q(_e){w(this,Q),_i=_l.call(this,Q,d(d({},_e),{},{baseUrl:void 0}));var _i,_o={apiKey:_e.apikey,baseUrl:_e.baseUrl,token:_e.token},Fa={apiKey:_o.apiKey,token:_o.token},bc=(_o.apiKey||(_o.apiKey=_i.getUrl().getQuery().apikey),_e.useLegacy||!1);return _i.venueService_=new y_(_o,bc),Fa.apiKey||(Fa.apiKey=_i.getUrl().getQuery().apikey),_e.routingBaseUrl&&(Fa.baseUrl=_e.routingBaseUrl),_i.routingService_=new IS(Fa),_i}return j(Q,[{key:"loadVenue",value:function(_e){return console.warn("Venue service version 1 is no longer supported hence "+_e+" could not be loaded"),Promise.resolve()}},{key:"calculateRoute",value:function(_e){return console.warn("HERE Indoor Routing is deprecated and will be removed soon."),this.routingService_.calculateRoute(_e)}}]),Q}()),nx=(gM.CONFIG_KEY="venues",function(){q(Q,H.service.Service);var _l=_f(Q);function Q(Fa){w(this,Q),_i=_l.call(this,Q,d(d({},Fa),{},{baseUrl:void 0}));var _i,_o={apiKey:Fa.apikey,baseUrl:Fa.baseUrl,token:Fa.token,hrn:Fa.hrn};return _o.apiKey||(_o.apiKey=_i.getUrl().getQuery().apikey),_i.venueService_=new y_(_o,Fa=Fa.useLegacy||!1),_i}return j(Q,[{key:"loadVenue",value:function(_e){return this.venueService_.load(_e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).then(function(_i){return new h0(_i)})}},{key:"getMapInfoList",value:function(){return this.venueService_.getSupportedMapList()}}]),Q}()),m_=(nx.CONFIG_KEY="indoorMaps",H.service.Platform.prototype.getVenuesService=function(_l,Q){var _e=nx;return 1!==Q&&Q?Q!==QE.v2||_l.token||(_l.hrn?_l.apikey||console.error("Venue Service version 2 requires either apikey or token"):console.error("Token is mandatory when Hrn is not provided in Venue Service version 2")):(console.warn("Venue service version 1 is no longer supported"),_e=gM),this.createService(_e,_l)},nx.LABEL_TEXT_PREFERENCE_OVERRIDE={OCCUPANT_NAMES:"OCCUPANT_NAMES",SPACE_NAME:"SPACE_NAME",SPACE_TYPE_NAME:"SPACE_TYPE_NAME",SPACE_CATEGORY_NAME:"SPACE_CATEGORY_NAME",INTERNAL_ADDRESS:"INTERNAL_ADDRESS"},function(){q(Q,H.ui.Control);var _l=_f(Q);function Q(_e){var _i,_o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return w(this,Q),(_i=_l.call(this)).provider_=null,_i.levelSelectorUI_=null,_i.setAlignment(_o&&_o.alignment||H.ui.LayoutAlignment.RIGHT_BOTTOM),_i.addClass("venues-ui"),_e instanceof h0&&_i.setVenue(_e),_i}return j(Q,[{key:"renderInternal",value:function(_e,_i){_h(_t(Q.prototype),"renderInternal",this).call(this,_e,_i),this.createLevelSelectorUI_(_e),this.venue&&this.setVenue(this.venue)}},{key:"setVenue",value:function(_e){_e instanceof h0&&(this.removeEventListeners_(),this.venue=_e,this.provider_=_e.getParentEventTarget(),this.update_(),this.addEventListeners_())}},{key:"createLevelSelectorUI_",value:function(_e){var _i=this;_e.innerHTML="",this.levelSelectorUI_=null,this.levelSelectorUI_=new $1(_e,null,null,function(_o){return _i.venue.setActiveLevelIndex(_o)})}},{key:"update_",value:function(){var _e,_i;this.levelSelectorUI_&&(_e=this.venue.getActiveDrawing().getData(),_i=this.venue.getData().getDisplaySettings(),this.levelSelectorUI_.update(_e,_i),this.levelChangeHandler_())}},{key:"addEventListeners_",value:function(){this.venue&&(this.venue.addEventListener(h0.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),this.venue.addEventListener(h0.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this)),this.provider_&&this.provider_.addEventListener(h0.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"removeEventListeners_",value:function(){this.venue&&(this.venue.removeEventListener(h0.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),this.venue.removeEventListener(h0.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this)),this.provider_&&this.provider_.removeEventListener(h0.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"levelChangeHandler_",value:function(){this.levelSelectorUI_.switch(this.venue.getActiveLevelIndex())}},{key:"drawingChangeHandler_",value:function(){this.update_()}},{key:"activeVenueChangeHandler_",value:function(_e){this.setVenue(_e.newValue)}}]),Q}()),yM=function(){q(Q,H.ui.Control);var _l=_f(Q);function Q(_e){var _i,_o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return w(this,Q),(_i=_l.call(this)).provider_=null,_i.drawingSelectorUI_=null,_i.addClass("venues-ui"),_i.setAlignment(_o&&_o.alignment||H.ui.LayoutAlignment.RIGHT_BOTTOM),_e instanceof h0&&_i.setVenue(_e),_i}return j(Q,[{key:"renderInternal",value:function(_e,_i){_h(_t(Q.prototype),"renderInternal",this).call(this,_e,_i),this.createDrawingSelectorUI_(_e),this.venue&&this.setVenue(this.venue)}},{key:"setVenue",value:function(_e){_e instanceof h0&&(this.removeEventListeners_(),this.venue=_e,this.provider_=_e.getParentEventTarget(),this.drawingSelectorUI_&&this.drawingSelectorUI_.update(_e.getData()),this.addEventListeners_())}},{key:"createDrawingSelectorUI_",value:function(_e){var _i=this;_e.innerHTML="",this.drawingSelectorUI_=null,this.drawingSelectorUI_=new q_(_e,null,function(_o){return _i.venue.setActiveDrawing(_o)})}},{key:"addEventListeners_",value:function(){this.venue&&this.venue.addEventListener(h0.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this),this.provider_&&this.provider_.addEventListener(h0.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"removeEventListeners_",value:function(){this.venue&&this.venue.removeEventListener(h0.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this),this.provider_&&this.provider_.removeEventListener(h0.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"drawingChangeHandler_",value:function(){this.drawingSelectorUI_.switch(this.venue.getActiveDrawing().id)}},{key:"activeVenueChangeHandler_",value:function(_e){this.setVenue(_e.newValue)}}]),Q}();return yM=Object.freeze({__proto__:null,DrawingControl:yM,LevelControl:m_}),n(".venues-ui * {\n  font-family: \"Fira Sans\", \"Helvetica Neue\", Helvetica, sans-serif;\n  color: #0F1621;\n}\n.venues-ui .arrow {\n  display: block;\n  width: 100%;\n  height: 100%;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.venues-ui .arrow--up {\n  background-image: url(\"data:image/svg+xml,%0A%3Csvg width='13px' height='9px' viewBox='0 0 13 9' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cg id='VenueMap_Facilities_Detail' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='Floorplan-Switcher' transform='translate(-426.000000, -584.000000)' fill='%23383C45'%3E%3Cg id='Map-Controls-Copy' transform='translate(417.753906, 572.000000)'%3E%3Cg id='Chevron,-Dark' transform='translate(15.000000, 16.499023) rotate(-180.000000) translate(-15.000000, -16.499023) translate(9.000000, 12.749023)'%3E%3Cpath d='M6.0105,7.5 L4.1895,5.76404817 L0.1695,1.90510321 C0.057,1.79759174 0,1.68291284 0,1.56106651 C0,1.44065367 0.057,1.32597477 0.1695,1.2184633 L1.2465,0.16771789 C1.347,0.0587729358 1.47,0.00430045872 1.617,0.00430045872 C1.764,0.00430045872 1.887,0.0587729358 1.986,0.166284404 L6.009,3.98365826 L10.023,0.161983945 C10.122,0.0530389908 10.236,0 10.3695,0 C10.503,0 10.62,0.0530389908 10.7205,0.161983945 L11.841,1.21129587 C12.0525,1.43922018 12.0525,1.67144495 11.8425,1.89793578 L7.827,5.76118119 L6.0105,7.5 Z' id='Fill-3'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n}\n.venues-ui .arrow--down {\n  background-image: url(\"data:image/svg+xml,%0A%3Csvg width='13px' height='9px' viewBox='0 0 13 9' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cg id='VenueMap_Facilities_Detail' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='Floorplan-Switcher' transform='translate(-347.000000, -704.000000)' fill='%23383C45'%3E%3Cg id='Map-Controls' transform='translate(338.251953, 572.000000)'%3E%3Cg id='Chevron,-Dark' transform='translate(9.000000, 132.746094)'%3E%3Cpath d='M6.0105,7.5 L4.1895,5.76404817 L0.1695,1.90510321 C0.057,1.79759174 0,1.68291284 0,1.56106651 C0,1.44065367 0.057,1.32597477 0.1695,1.2184633 L1.2465,0.16771789 C1.347,0.0587729358 1.47,0.00430045872 1.617,0.00430045872 C1.764,0.00430045872 1.887,0.0587729358 1.986,0.166284404 L6.009,3.98365826 L10.023,0.161983945 C10.122,0.0530389908 10.236,0 10.3695,0 C10.503,0 10.62,0.0530389908 10.7205,0.161983945 L11.841,1.21129587 C12.0525,1.43922018 12.0525,1.67144495 11.8425,1.89793578 L7.827,5.76118119 L6.0105,7.5 Z' id='Fill-3'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n}\n.venues-ui .venues-ui-button {\n  display: block;\n  width: 40px;\n  height: 40px;\n  line-height: 40px;\n  font-size: 16px;\n  font-weight: 600;\n  background-color: #fff;\n  border: none;\n  border-bottom: 1px solid #9FA2A6;\n  cursor: pointer;\n  overflow: hidden;\n  color: #6e737a;\n  text-align: center;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.venues-ui .venues-ui-button:hover, .venues-ui .venues-ui-button--active {\n  background-color: #f0f0f0;\n  color: #0F1621;\n}\n@keyframes fade {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n.venues-ui__drawings .drawings {\n  position: absolute;\n  top: 0;\n  right: 45px;\n  display: none;\n  opacity: 0;\n  border-radius: 5px;\n  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6);\n}\n.venues-ui__drawings .drawings--open {\n  display: block;\n  opacity: 1;\n  animation: fade 1s;\n}\n.venues-ui__drawings .drawings .venues-ui-button {\n  width: auto;\n  padding: 0 10px;\n}\n.venues-ui__drawings .drawings .venues-ui-button:first-of-type {\n  border-top-left-radius: 5px;\n  border-top-right-radius: 5px;\n}\n.venues-ui__drawings .drawings .venues-ui-button:last-of-type {\n  border-bottom-left-radius: 5px;\n  border-bottom-right-radius: 5px;\n}\n.venues-ui__drawings .trigger {\n  border-radius: 5px;\n  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6);\n}\n.venues-ui__drawings .trigger .arrow {\n  transform: rotate(0);\n  transition: 0.4s;\n}\n.venues-ui__drawings .trigger.venues-ui-button--active .arrow {\n  transform: rotate(90deg);\n  transition: 0.4s;\n}\n.venues-ui__levels {\n  border-radius: 5px;\n  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6);\n}\n.venues-ui__levels .levels {\n  overflow: hidden;\n}\n.venues-ui__levels .venues-ui-button--up + .levels .venues-ui-button {\n  border-radius: 0;\n}\n.venues-ui__levels .venues-ui-button:first-of-type {\n  border-top-left-radius: 5px;\n  border-top-right-radius: 5px;\n}\n.venues-ui__levels .venues-ui-button:last-of-type {\n  border-bottom-left-radius: 5px;\n  border-bottom-right-radius: 5px;\n}\n.venues-ui__levels .venues-ui-button[disabled=disabled] .arrow {\n  opacity: 0.5;\n}\n.venues-ui__directory {\n  position: absolute;\n  top: 10px;\n  right: 60px;\n  bottom: calc(100% - 45px);\n  width: 350px;\n  overflow: hidden;\n  background: white;\n  border-radius: 5px;\n  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6);\n}\n.venues-ui__directory.active {\n  bottom: 10px;\n}\n.venues-ui__directory .directory__list {\n  top: 80px;\n  bottom: 20px;\n  position: absolute;\n  overflow-y: scroll;\n  right: 10px;\n  left: 10px;\n  font-size: 12px;\n}\n.venues-ui__directory .directory__list svg {\n  width: 25px;\n  height: 25px;\n}\n.venues-ui__directory .directory__heading {\n  margin: 8px;\n  font-size: 15px;\n  font-weight: normal;\n  cursor: pointer;\n}\n.venues-ui__directory .directory__input {\n  margin: 10px;\n}\n.venues-ui__directory .directory__input input {\n  width: 100%;\n  padding: 5px 0;\n}\n.venues-ui__directory .directory__trigger {\n  position: absolute;\n  right: 10px;\n  top: 15px;\n  width: 10px;\n  height: 10px;\n}\n.venues-ui__directory .directory__trigger .arrow {\n  transform: rotate(0);\n  transition: 0.4s;\n}\n.venues-ui__directory .directory__trigger--active .arrow {\n  transform: rotate(-180deg);\n  transition: 0.4s;\n}"),e.Drawing=vy,e.Geometry=dy,e.Level=Ay,e.Provider=u_,e.Route=gA,e.Service=gM,e.Service2=nx,e.Venue=h0,e.ui=yM,Object.defineProperty(e,"__esModule",{value:!0}),e}({})}.call(self);const __WEBPACK_DEFAULT_EXPORT__=H},983:(e,n,r)=>{function d(s){return"function"==typeof s}function m(s){const o=s(h=>{Error.call(h),h.stack=(new Error).stack});return o.prototype=Object.create(Error.prototype),o.prototype.constructor=o,o}const g=m(s=>function(o){s(this),this.message=o?`${o.length} errors occurred during unsubscription:\n${o.map((h,y)=>`${y+1}) ${h.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=o});function v(s,l){if(s){const o=s.indexOf(l);0<=o&&s.splice(o,1)}}class w{constructor(l){this.initialTeardown=l,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let l;if(!this.closed){this.closed=!0;const{_parentage:o}=this;if(o)if(this._parentage=null,Array.isArray(o))for(const _ of o)_.remove(this);else o.remove(this);const{initialTeardown:h}=this;if(d(h))try{h()}catch(_){l=_ instanceof g?_.errors:[_]}const{_finalizers:y}=this;if(y){this._finalizers=null;for(const _ of y)try{G(_)}catch(I){l=l??[],I instanceof g?l=[...l,...I.errors]:l.push(I)}}if(l)throw new g(l)}}add(l){var o;if(l&&l!==this)if(this.closed)G(l);else{if(l instanceof w){if(l.closed||l._hasParent(this))return;l._addParent(this)}(this._finalizers=null!==(o=this._finalizers)&&void 0!==o?o:[]).push(l)}}_hasParent(l){const{_parentage:o}=this;return o===l||Array.isArray(o)&&o.includes(l)}_addParent(l){const{_parentage:o}=this;this._parentage=Array.isArray(o)?(o.push(l),o):o?[o,l]:l}_removeParent(l){const{_parentage:o}=this;o===l?this._parentage=null:Array.isArray(o)&&v(o,l)}remove(l){const{_finalizers:o}=this;o&&v(o,l),l instanceof w&&l._removeParent(this)}}w.EMPTY=(()=>{const s=new w;return s.closed=!0,s})();const k=w.EMPTY;function j(s){return s instanceof w||s&&"closed"in s&&d(s.remove)&&d(s.add)&&d(s.unsubscribe)}function G(s){d(s)?s():s.unsubscribe()}const q={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},_t={setTimeout(s,l,...o){const{delegate:h}=_t;return h?.setTimeout?h.setTimeout(s,l,...o):setTimeout(s,l,...o)},clearTimeout(s){const{delegate:l}=_t;return(l?.clearTimeout||clearTimeout)(s)},delegate:void 0};function _r(s){_t.setTimeout(()=>{const{onUnhandledError:l}=q;if(!l)throw s;l(s)})}function _s(){}const ga=_f("C",void 0,void 0);function _f(s,l,o){return{kind:s,value:l,error:o}}let _h=null;function ad(s){if(q.useDeprecatedSynchronousErrorHandling){const l=!_h;if(l&&(_h={errorThrown:!1,error:null}),s(),l){const{errorThrown:o,error:h}=_h;if(_h=null,o)throw h}}else s()}class sy extends w{constructor(l){super(),this.isStopped=!1,l?(this.destination=l,j(l)&&l.add(this)):this.destination=Ny}static create(l,o,h){return new Ay(l,o,h)}next(l){this.isStopped?Qy(function _u(s){return _f("N",s,void 0)}(l),this):this._next(l)}error(l){this.isStopped?Qy(function _c(s){return _f("E",void 0,s)}(l),this):(this.isStopped=!0,this._error(l))}complete(){this.isStopped?Qy(ga,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(l){this.destination.next(l)}_error(l){try{this.destination.error(l)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ly=Function.prototype.bind;function dy(s,l){return ly.call(s,l)}class vy{constructor(l){this.partialObserver=l}next(l){const{partialObserver:o}=this;if(o.next)try{o.next(l)}catch(h){Sy(h)}}error(l){const{partialObserver:o}=this;if(o.error)try{o.error(l)}catch(h){Sy(h)}else Sy(l)}complete(){const{partialObserver:l}=this;if(l.complete)try{l.complete()}catch(o){Sy(o)}}}class Ay extends sy{constructor(l,o,h){let y;if(super(),d(l)||!l)y={next:l??void 0,error:o??void 0,complete:h??void 0};else{let _;this&&q.useDeprecatedNextContext?(_=Object.create(l),_.unsubscribe=()=>this.unsubscribe(),y={next:l.next&&dy(l.next,_),error:l.error&&dy(l.error,_),complete:l.complete&&dy(l.complete,_)}):y=l}this.destination=new vy(y)}}function Sy(s){q.useDeprecatedSynchronousErrorHandling?function ey(s){q.useDeprecatedSynchronousErrorHandling&&_h&&(_h.errorThrown=!0,_h.error=s)}(s):_r(s)}function Qy(s,l){const{onStoppedNotification:o}=q;o&&_t.setTimeout(()=>o(s,l))}const Ny={closed:!0,next:_s,error:function jy(s){throw s},complete:_s},P_="function"==typeof Symbol&&Symbol.observable||"@@observable";function l_(s){return s}function p_(s){return 0===s.length?l_:1===s.length?s[0]:function(o){return s.reduce((h,y)=>y(h),o)}}let qy=(()=>{class s{constructor(o){o&&(this._subscribe=o)}lift(o){const h=new s;return h.source=this,h.operator=o,h}subscribe(o,h,y){const _=function c1(s){return s&&s instanceof sy||function S0(s){return s&&d(s.next)&&d(s.error)&&d(s.complete)}(s)&&j(s)}(o)?o:new Ay(o,h,y);return ad(()=>{const{operator:I,source:V}=this;_.add(I?I.call(_,V):V?this._subscribe(_):this._trySubscribe(_))}),_}_trySubscribe(o){try{return this._subscribe(o)}catch(h){o.error(h)}}forEach(o,h){return new(h=I_(h))((y,_)=>{const I=new Ay({next:V=>{try{o(V)}catch($){_($),I.unsubscribe()}},error:_,complete:y});this.subscribe(I)})}_subscribe(o){var h;return null===(h=this.source)||void 0===h?void 0:h.subscribe(o)}[P_](){return this}pipe(...o){return p_(o)(this)}toPromise(o){return new(o=I_(o))((h,y)=>{let _;this.subscribe(I=>_=I,I=>y(I),()=>h(_))})}}return s.create=l=>new s(l),s})();function I_(s){var l;return null!==(l=s??q.Promise)&&void 0!==l?l:Promise}const j_=m(s=>function(){s(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let G_=(()=>{class s extends qy{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(o){const h=new z1(this,this);return h.operator=o,h}_throwIfClosed(){if(this.closed)throw new j_}next(o){ad(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const h of this.currentObservers)h.next(o)}})}error(o){ad(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=o;const{observers:h}=this;for(;h.length;)h.shift().error(o)}})}complete(){ad(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:o}=this;for(;o.length;)o.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var o;return(null===(o=this.observers)||void 0===o?void 0:o.length)>0}_trySubscribe(o){return this._throwIfClosed(),super._trySubscribe(o)}_subscribe(o){return this._throwIfClosed(),this._checkFinalizedStatuses(o),this._innerSubscribe(o)}_innerSubscribe(o){const{hasError:h,isStopped:y,observers:_}=this;return h||y?k:(this.currentObservers=null,_.push(o),new w(()=>{this.currentObservers=null,v(_,o)}))}_checkFinalizedStatuses(o){const{hasError:h,thrownError:y,isStopped:_}=this;h?o.error(y):_&&o.complete()}asObservable(){const o=new qy;return o.source=this,o}}return s.create=(l,o)=>new z1(l,o),s})();class z1 extends G_{constructor(l,o){super(),this.destination=l,this.source=o}next(l){var o,h;null===(h=null===(o=this.destination)||void 0===o?void 0:o.next)||void 0===h||h.call(o,l)}error(l){var o,h;null===(h=null===(o=this.destination)||void 0===o?void 0:o.error)||void 0===h||h.call(o,l)}complete(){var l,o;null===(o=null===(l=this.destination)||void 0===l?void 0:l.complete)||void 0===o||o.call(l)}_subscribe(l){var o,h;return null!==(h=null===(o=this.source)||void 0===o?void 0:o.subscribe(l))&&void 0!==h?h:k}}class b0 extends G_{constructor(l){super(),this._value=l}get value(){return this.getValue()}_subscribe(l){const o=super._subscribe(l);return!o.closed&&l.next(this._value),o}getValue(){const{hasError:l,thrownError:o,_value:h}=this;if(l)throw o;return this._throwIfClosed(),h}next(l){super.next(this._value=l)}}function k1(s){return d(s?.lift)}function X_(s){return l=>{if(k1(l))return l.lift(function(o){try{return s(o,this)}catch(h){this.error(h)}});throw new TypeError("Unable to lift unknown Observable type")}}function N_(s,l,o,h,y){return new o0(s,l,o,h,y)}class o0 extends sy{constructor(l,o,h,y,_,I){super(l),this.onFinalize=_,this.shouldUnsubscribe=I,this._next=o?function(V){try{o(V)}catch($){l.error($)}}:super._next,this._error=y?function(V){try{y(V)}catch($){l.error($)}finally{this.unsubscribe()}}:super._error,this._complete=h?function(){try{h()}catch(V){l.error(V)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var l;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:o}=this;super.unsubscribe(),!o&&(null===(l=this.onFinalize)||void 0===l||l.call(this))}}}function c_(s,l){return X_((o,h)=>{let y=0;o.subscribe(N_(h,_=>{h.next(s.call(l,_,y++))}))})}function B_(s){return this instanceof B_?(this.v=s,this):new B_(s)}function tT(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,l=s[Symbol.asyncIterator];return l?l.call(s):(s=function w0(s){var l="function"==typeof Symbol&&Symbol.iterator,o=l&&s[l],h=0;if(o)return o.call(s);if(s&&"number"==typeof s.length)return{next:function(){return s&&h>=s.length&&(s=void 0),{value:s&&s[h++],done:!s}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")}(s),o={},h("next"),h("throw"),h("return"),o[Symbol.asyncIterator]=function(){return this},o);function h(_){o[_]=s[_]&&function(I){return new Promise(function(V,$){!function y(_,I,V,$){Promise.resolve($).then(function(_n){_({value:_n,done:V})},I)}(V,$,(I=s[_](I)).done,I.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const ET=s=>s&&"number"==typeof s.length&&"function"!=typeof s;function ex(s){return d(s?.then)}function TT(s){return d(s[P_])}function AE(s){return Symbol.asyncIterator&&d(s?.[Symbol.asyncIterator])}function rT(s){return new TypeError(`You provided ${null!==s&&"object"==typeof s?"an invalid object":`'${s}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const t1=function SE(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function T0(s){return d(s?.[t1])}function CE(s){return function _x(s,l,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var y,h=o.apply(s,l||[]),_=[];return y={},I("next"),I("throw"),I("return"),y[Symbol.asyncIterator]=function(){return this},y;function I(_d){h[_d]&&(y[_d]=function(mg){return new Promise(function(iy,ay){_.push([_d,mg,iy,ay])>1||V(_d,mg)})})}function V(_d,mg){try{!function $(_d){_d.value instanceof B_?Promise.resolve(_d.value.v).then(_n,ha):Ba(_[0][2],_d)}(h[_d](mg))}catch(iy){Ba(_[0][3],iy)}}function _n(_d){V("next",_d)}function ha(_d){V("throw",_d)}function Ba(_d,mg){_d(mg),_.shift(),_.length&&V(_[0][0],_[0][1])}}(this,arguments,function*(){const o=s.getReader();try{for(;;){const{value:h,done:y}=yield B_(o.read());if(y)return yield B_(void 0);yield yield B_(h)}}finally{o.releaseLock()}})}function ME(s){return d(s?.getReader)}function W0(s){if(s instanceof qy)return s;if(null!=s){if(TT(s))return function wx(s){return new qy(l=>{const o=s[P_]();if(d(o.subscribe))return o.subscribe(l);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(s);if(ET(s))return function AT(s){return new qy(l=>{for(let o=0;o<s.length&&!l.closed;o++)l.next(s[o]);l.complete()})}(s);if(ex(s))return function _a(s){return new qy(l=>{s.then(o=>{l.closed||(l.next(o),l.complete())},o=>l.error(o)).then(null,_r)})}(s);if(AE(s))return _g(s);if(T0(s))return function wc(s){return new qy(l=>{for(const o of s)if(l.next(o),l.closed)return;l.complete()})}(s);if(ME(s))return function ty(s){return _g(CE(s))}(s)}throw rT(s)}function _g(s){return new qy(l=>{(function ny(s,l){var o,h,y,_;return function cA(s,l,o,h){return new(o||(o=Promise))(function(_,I){function V(ha){try{_n(h.next(ha))}catch(Ba){I(Ba)}}function $(ha){try{_n(h.throw(ha))}catch(Ba){I(Ba)}}function _n(ha){ha.done?_(ha.value):function y(_){return _ instanceof o?_:new o(function(I){I(_)})}(ha.value).then(V,$)}_n((h=h.apply(s,l||[])).next())})}(this,void 0,void 0,function*(){try{for(o=tT(s);!(h=yield o.next()).done;)if(l.next(h.value),l.closed)return}catch(I){y={error:I}}finally{try{h&&!h.done&&(_=o.return)&&(yield _.call(o))}finally{if(y)throw y.error}}l.complete()})})(s,l).catch(o=>l.error(o))})}function cy(s,l,o,h=0,y=!1){const _=l.schedule(function(){o(),y?s.add(this.schedule(null,h)):this.unsubscribe()},h);if(s.add(_),!y)return _}function yy(s,l,o=1/0){return d(l)?yy((h,y)=>c_((_,I)=>l(h,_,y,I))(W0(s(h,y))),o):("number"==typeof l&&(o=l),X_((h,y)=>function Cy(s,l,o,h,y,_,I,V){const $=[];let _n=0,ha=0,Ba=!1;const _d=()=>{Ba&&!$.length&&!_n&&l.complete()},mg=ay=>_n<h?iy(ay):$.push(ay),iy=ay=>{_&&l.next(ay),_n++;let my=!1;W0(o(ay,ha++)).subscribe(N_(l,_y=>{y?.(_y),_?mg(_y):l.next(_y)},()=>{my=!0},void 0,()=>{if(my)try{for(_n--;$.length&&_n<h;){const _y=$.shift();I?cy(l,I,()=>iy(_y)):iy(_y)}_d()}catch(_y){l.error(_y)}}))};return s.subscribe(N_(l,mg,()=>{Ba=!0,_d()})),()=>{V?.()}}(h,y,s,o)))}function Iy(s=1/0){return yy(l_,s)}const Ky=new qy(s=>s.complete());function V_(s){return s[s.length-1]}function g0(s){return d(V_(s))?s.pop():void 0}function e_(s){return function L_(s){return s&&d(s.schedule)}(V_(s))?s.pop():void 0}function r_(s,l=0){return X_((o,h)=>{o.subscribe(N_(h,y=>cy(h,s,()=>h.next(y),l),()=>cy(h,s,()=>h.complete(),l),y=>cy(h,s,()=>h.error(y),l)))})}function E_(s,l=0){return X_((o,h)=>{h.add(s.schedule(()=>o.subscribe(h),l))})}function F_(s,l){if(!s)throw new Error("Iterable cannot be null");return new qy(o=>{cy(o,l,()=>{const h=s[Symbol.asyncIterator]();cy(o,l,()=>{h.next().then(y=>{y.done?o.complete():o.next(y.value)})},0,!0)})})}function u0(s,l){return l?function N0(s,l){if(null!=s){if(TT(s))return function q_(s,l){return W0(s).pipe(E_(l),r_(l))}(s,l);if(ET(s))return function W_(s,l){return new qy(o=>{let h=0;return l.schedule(function(){h===s.length?o.complete():(o.next(s[h++]),o.closed||this.schedule())})})}(s,l);if(ex(s))return function s0(s,l){return W0(s).pipe(E_(l),r_(l))}(s,l);if(AE(s))return F_(s,l);if(T0(s))return function Z_(s,l){return new qy(o=>{let h;return cy(o,l,()=>{h=s[t1](),cy(o,l,()=>{let y,_;try{({value:y,done:_}=h.next())}catch(I){return void o.error(I)}_?o.complete():o.next(y)},0,!0)}),()=>d(h?.return)&&h.return()})}(s,l);if(ME(s))return function $1(s,l){return F_(CE(s),l)}(s,l)}throw rT(s)}(s,l):W0(s)}function q1(...s){const l=e_(s),o=function a_(s,l){return"number"==typeof V_(s)?s.pop():l}(s,1/0),h=s;return h.length?1===h.length?W0(h[0]):Iy(o)(u0(h,l)):Ky}function s_(...s){return u0(s,e_(s))}function w1(s={}){const{connector:l=(()=>new G_),resetOnError:o=!0,resetOnComplete:h=!0,resetOnRefCountZero:y=!0}=s;return _=>{let I,V,$,_n=0,ha=!1,Ba=!1;const _d=()=>{V?.unsubscribe(),V=void 0},mg=()=>{_d(),I=$=void 0,ha=Ba=!1},iy=()=>{const ay=I;mg(),ay?.unsubscribe()};return X_((ay,my)=>{_n++,!Ba&&!ha&&_d();const _y=$=$??l();my.add(()=>{_n--,0===_n&&!Ba&&!ha&&(V=fA(iy,y))}),_y.subscribe(my),!I&&_n>0&&(I=new Ay({next:fy=>_y.next(fy),error:fy=>{Ba=!0,_d(),V=fA(mg,o,fy),_y.error(fy)},complete:()=>{ha=!0,_d(),V=fA(mg,h),_y.complete()}}),W0(ay).subscribe(I))})(_)}}function fA(s,l,...o){if(!0===l)return void s();if(!1===l)return;const h=new Ay({next:()=>{h.unsubscribe(),s()}});return W0(l(...o)).subscribe(h)}function D0(s,l){return X_((o,h)=>{let y=null,_=0,I=!1;const V=()=>I&&!y&&h.complete();o.subscribe(N_(h,$=>{y?.unsubscribe();let _n=0;const ha=_++;W0(s($,ha)).subscribe(y=N_(h,Ba=>h.next(l?l($,Ba,ha,_n++):Ba),()=>{y=null,V()}))},()=>{I=!0,V()}))})}function iT(s,l=l_){return s=s??ST,X_((o,h)=>{let y,_=!0;o.subscribe(N_(h,I=>{const V=l(I);(_||!s(y,V))&&(_=!1,y=V,h.next(I))}))})}function ST(s,l){return s===l}function d0(s){for(let l in s)if(s[l]===d0)return l;throw Error("Could not find renamed property on target object.")}function pA(s,l){for(const o in l)l.hasOwnProperty(o)&&!s.hasOwnProperty(o)&&(s[o]=l[o])}function G0(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(G0).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const l=s.toString();if(null==l)return""+l;const o=l.indexOf("\n");return-1===o?l:l.substring(0,o)}function MS(s,l){return null==s||""===s?null===l?"":l:null==l||""===l?s:s+" "+l}const mM=d0({__forward_ref__:d0});function x0(s){return s.__forward_ref__=x0,s.toString=function(){return G0(this())},s}function y_(s){return DS(s)?s():s}function DS(s){return"function"==typeof s&&s.hasOwnProperty(mM)&&s.__forward_ref__===x0}function IS(s){return s&&!!s.\u0275providers}const h0="https://g.co/ng/security#xss";class py extends Error{constructor(l,o){super(function O1(s,l){return`NG0${Math.abs(s)}${l?": "+l:""}`}(l,o)),this.code=l}}function x_(s){return"string"==typeof s?s:null==s?"":String(s)}function mA(s,l){throw new py(-201,!1)}function bc(s,l){null==s&&function pd(s,l,o,h){throw new Error(`ASSERTION ERROR: ${s}`+(null==h?"":` [Expected=> ${o} ${h} ${l} <=Actual]`))}(l,s,null,"!=")}function ry(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function xy(s){return{providers:s.providers||[],imports:s.imports||[]}}function By(s){return $y(s,by)||$y(s,ky)}function $y(s,l){return s.hasOwnProperty(l)?s[l]:null}function Ey(s){return s&&(s.hasOwnProperty(wy)||s.hasOwnProperty(_v))?s[wy]:null}const by=d0({\u0275prov:d0}),wy=d0({\u0275inj:d0}),ky=d0({ngInjectableDef:d0}),_v=d0({ngInjectorDef:d0});var uy=(()=>((uy=uy||{})[uy.Default=0]="Default",uy[uy.Host=1]="Host",uy[uy.Self=2]="Self",uy[uy.SkipSelf=4]="SkipSelf",uy[uy.Optional=8]="Optional",uy))();let Dy;function Oy(s){const l=Dy;return Dy=s,l}function Wy(s,l,o){const h=By(s);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:o&uy.Optional?null:void 0!==l?l:void mA(G0(s))}const Uy=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),z_={},l0="__NG_DI_FLAG__",T_="ngTempTokenPath",I0=/\n/gm,Y0="__source";let Kx;function Ex(s){const l=Kx;return Kx=s,l}function r2(s,l=uy.Default){if(void 0===Kx)throw new py(-203,!1);return null===Kx?Wy(s,void 0,l):Kx.get(s,l&uy.Optional?null:void 0,l)}function Py(s,l=uy.Default){return(function zy(){return Dy}()||r2)(y_(s),l)}function Ry(s,l=uy.Default){return Py(s,Xx(l))}function Xx(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function CT(s){const l=[];for(let o=0;o<s.length;o++){const h=y_(s[o]);if(Array.isArray(h)){if(0===h.length)throw new py(900,!1);let y,_=uy.Default;for(let I=0;I<h.length;I++){const V=h[I],$=vM(V);"number"==typeof $?-1===$?y=V.token:_|=$:y=V}l.push(Py(y,_))}else l.push(Py(h))}return l}function DE(s,l){return s[l0]=l,s.prototype[l0]=l,s}function vM(s){return s[l0]}function x1(s){return{toString:s}.toString()}var P1=(()=>((P1=P1||{})[P1.OnPush=0]="OnPush",P1[P1.Default=1]="Default",P1))(),E1=(()=>{return(s=E1||(E1={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",E1;var s})();const Zx={},c0=[],_M=d0({\u0275cmp:d0}),i2=d0({\u0275dir:d0}),o2=d0({\u0275pipe:d0}),VN=d0({\u0275mod:d0}),IE=d0({\u0275fac:d0}),PS=d0({__NG_ELEMENT_ID__:d0}),UN=d0({__NG_ENV_ID__:d0});function zN(s,l,o){let h=s.length;for(;;){const y=s.indexOf(l,o);if(-1===y)return y;if(0===y||s.charCodeAt(y-1)<=32){const _=l.length;if(y+_===h||s.charCodeAt(y+_)<=32)return y}o=y+1}}function s2(s,l,o){let h=0;for(;h<o.length;){const y=o[h];if("number"==typeof y){if(0!==y)break;h++;const _=o[h++],I=o[h++],V=o[h++];s.setAttribute(l,I,V,_)}else{const _=y,I=o[++h];GN(_)?s.setProperty(l,_,I):s.setAttribute(l,_,I),h++}}return h}function HN(s){return 3===s||4===s||6===s}function GN(s){return 64===s.charCodeAt(0)}function NS(s,l){if(null!==l&&0!==l.length)if(null===s||0===s.length)s=l.slice();else{let o=-1;for(let h=0;h<l.length;h++){const y=l[h];"number"==typeof y?o=y:0===o||$N(s,o,y,null,-1===o||2===o?l[++h]:null)}}return s}function $N(s,l,o,h,y){let _=0,I=s.length;if(-1===l)I=-1;else for(;_<s.length;){const V=s[_++];if("number"==typeof V){if(V===l){I=-1;break}if(V>l){I=_-1;break}}}for(;_<s.length;){const V=s[_];if("number"==typeof V)break;if(V===o){if(null===h)return void(null!==y&&(s[_+1]=y));if(h===s[_+1])return void(s[_+2]=y)}_++,null!==h&&_++,null!==y&&_++}-1!==I&&(s.splice(I,0,l),_=I+1),s.splice(_++,0,o),null!==h&&s.splice(_++,0,h),null!==y&&s.splice(_++,0,y)}const qN="ng-template";function CH(s,l,o){let h=0,y=!0;for(;h<s.length;){let _=s[h++];if("string"==typeof _&&y){const I=s[h++];if(o&&"class"===_&&-1!==zN(I.toLowerCase(),l,0))return!0}else{if(1===_){for(;h<s.length&&"string"==typeof(_=s[h++]);)if(_.toLowerCase()===l)return!0;return!1}"number"==typeof _&&(y=!1)}}return!1}function WN(s){return 4===s.type&&s.value!==qN}function MH(s,l,o){return l===(4!==s.type||o?s.value:qN)}function DH(s,l,o){let h=4;const y=s.attrs||[],_=function OH(s){for(let l=0;l<s.length;l++)if(HN(s[l]))return l;return s.length}(y);let I=!1;for(let V=0;V<l.length;V++){const $=l[V];if("number"!=typeof $){if(!I)if(4&h){if(h=2|1&h,""!==$&&!MH(s,$,o)||""===$&&1===l.length){if(Px(h))return!1;I=!0}}else{const _n=8&h?$:l[++V];if(8&h&&null!==s.attrs){if(!CH(s.attrs,_n,o)){if(Px(h))return!1;I=!0}continue}const Ba=IH(8&h?"class":$,y,WN(s),o);if(-1===Ba){if(Px(h))return!1;I=!0;continue}if(""!==_n){let _d;_d=Ba>_?"":y[Ba+1].toLowerCase();const mg=8&h?_d:null;if(mg&&-1!==zN(mg,_n,0)||2&h&&_n!==_d){if(Px(h))return!1;I=!0}}}}else{if(!I&&!Px(h)&&!Px($))return!1;if(I&&Px($))continue;I=!1,h=$|1&h}}return Px(h)||I}function Px(s){return 0==(1&s)}function IH(s,l,o,h){if(null===l)return-1;let y=0;if(h||!o){let _=!1;for(;y<l.length;){const I=l[y];if(I===s)return y;if(3===I||6===I)_=!0;else{if(1===I||2===I){let V=l[++y];for(;"string"==typeof V;)V=l[++y];continue}if(4===I)break;if(0===I){y+=4;continue}}y+=_?1:2}return-1}return function RH(s,l){let o=s.indexOf(4);if(o>-1)for(o++;o<s.length;){const h=s[o];if("number"==typeof h)return-1;if(h===l)return o;o++}return-1}(l,s)}function YN(s,l,o=!1){for(let h=0;h<l.length;h++)if(DH(s,l[h],o))return!0;return!1}function PH(s,l){t:for(let o=0;o<l.length;o++){const h=l[o];if(s.length===h.length){for(let y=0;y<s.length;y++)if(s[y]!==h[y])continue t;return!0}}return!1}function KN(s,l){return s?":not("+l.trim()+")":l}function NH(s){let l=s[0],o=1,h=2,y="",_=!1;for(;o<s.length;){let I=s[o];if("string"==typeof I)if(2&h){const V=s[++o];y+="["+I+(V.length>0?'="'+V+'"':"")+"]"}else 8&h?y+="."+I:4&h&&(y+=" "+I);else""!==y&&!Px(I)&&(l+=KN(_,y),y=""),h=I,_=_||!Px(h);o++}return""!==y&&(l+=KN(_,y)),l}function d1(s){return x1(()=>{const l=ZN(s),o={...l,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===P1.OnPush,directiveDefs:null,pipeDefs:null,dependencies:l.standalone&&s.dependencies||null,getStandaloneInjector:null,signals:s.signals??!1,data:s.data||{},encapsulation:s.encapsulation||E1.Emulated,styles:s.styles||c0,_:null,schemas:s.schemas||null,tView:null,id:""};JN(o);const h=s.dependencies;return o.directiveDefs=bM(h,!1),o.pipeDefs=bM(h,!0),o.id=function HH(s){let l=0;const o=[s.selectors,s.ngContentSelectors,s.hostVars,s.hostAttrs,s.consts,s.vars,s.decls,s.encapsulation,s.standalone,s.signals,s.exportAs,JSON.stringify(s.inputs),JSON.stringify(s.outputs),Object.getOwnPropertyNames(s.type.prototype),!!s.contentQueries,!!s.viewQuery].join("|");for(const y of o)l=Math.imul(31,l)+y.charCodeAt(0)<<0;return l+=2147483648,"c"+l}(o),o})}function BH(s){return f0(s)||T1(s)}function VH(s){return null!==s}function L0(s){return x1(()=>({type:s.type,bootstrap:s.bootstrap||c0,declarations:s.declarations||c0,imports:s.imports||c0,exports:s.exports||c0,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function XN(s,l){if(null==s)return Zx;const o={};for(const h in s)if(s.hasOwnProperty(h)){let y=s[h],_=y;Array.isArray(y)&&(_=y[1],y=y[0]),o[y]=h,l&&(l[y]=_)}return o}function Zy(s){return x1(()=>{const l=ZN(s);return JN(l),l})}function W1(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function f0(s){return s[_M]||null}function T1(s){return s[i2]||null}function Y1(s){return s[o2]||null}function rx(s,l){const o=s[VN]||null;if(!o&&!0===l)throw new Error(`Type ${G0(s)} does not have '\u0275mod' property.`);return o}function ZN(s){const l={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:l,inputTransforms:null,inputConfig:s.inputs||Zx,exportAs:s.exportAs||null,standalone:!0===s.standalone,signals:!0===s.signals,selectors:s.selectors||c0,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:XN(s.inputs,l),outputs:XN(s.outputs)}}function JN(s){s.features?.forEach(l=>l(s))}function bM(s,l){if(!s)return null;const o=l?Y1:BH;return()=>("function"==typeof s?s():s).map(h=>o(h)).filter(VH)}const e1=0,Jy=1,S_=2,F0=3,Nx=4,LS=5,A1=6,_A=7,K0=8,bA=9,MT=10,C_=11,FS=12,QN=13,wA=14,X0=15,jS=16,xA=17,Jx=18,BS=19,tL=20,oT=21,kE=22,wM=23,xM=24,Y_=25,a2=1,eL=2,Qx=7,EA=9,S1=11;function ix(s){return Array.isArray(s)&&"object"==typeof s[a2]}function K1(s){return Array.isArray(s)&&!0===s[a2]}function l2(s){return 0!=(4&s.flags)}function DT(s){return s.componentOffset>-1}function TM(s){return 1==(1&s.flags)}function Lx(s){return!!s.template}function c2(s){return 0!=(512&s[S_])}function IT(s,l){return s.hasOwnProperty(IE)?s[IE]:null}let KH=Uy.WeakRef??class YH{constructor(l){this.ref=l}deref(){return this.ref}},ZH=0,tE=null,AM=!1;function h1(s){const l=tE;return tE=s,l}class sL{constructor(){this.id=ZH++,this.ref=function XH(s){return new KH(s)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[l,o]of this.producers){const h=o.producerNode.deref();if(void 0!==h&&o.atTrackingVersion===this.trackingVersion){if(h.producerPollStatus(o.seenValueVersion))return!0}else this.producers.delete(l),h?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const l=AM;AM=!0;try{for(const[o,h]of this.consumers){const y=h.consumerNode.deref();void 0!==y&&y.trackingVersion===h.atTrackingVersion?y.onConsumerDependencyMayHaveChanged():(this.consumers.delete(o),y?.producers.delete(this.id))}}finally{AM=l}}producerAccessed(){if(AM)throw new Error("");if(null===tE)return;let l=tE.producers.get(this.id);void 0===l?(l={consumerNode:tE.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:tE.trackingVersion},tE.producers.set(this.id,l),this.consumers.set(tE.id,l)):(l.seenValueVersion=this.valueVersion,l.atTrackingVersion=tE.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==tE?.consumerAllowSignalWrites}producerPollStatus(l){return this.valueVersion!==l||(this.onProducerUpdateValueVersion(),this.valueVersion!==l)}}let aL=null;const cL=()=>{};class eG extends sL{constructor(l,o,h){super(),this.watch=l,this.schedule=o,this.dirty=!1,this.cleanupFn=cL,this.registerOnCleanup=y=>{this.cleanupFn=y},this.consumerAllowSignalWrites=h}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const l=h1(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=cL,this.watch(this.registerOnCleanup)}finally{h1(l)}}cleanup(){this.cleanupFn()}}class nG{constructor(l,o,h){this.previousValue=l,this.currentValue=o,this.firstChange=h}isFirstChange(){return this.firstChange}}function N1(){return uL}function uL(s){return s.type.prototype.ngOnChanges&&(s.setInput=iG),rG}function rG(){const s=hL(this),l=s?.current;if(l){const o=s.previous;if(o===Zx)s.previous=l;else for(let h in l)o[h]=l[h];s.current=null,this.ngOnChanges(l)}}function iG(s,l,o,h){const y=this.declaredInputs[o],_=hL(s)||function oG(s,l){return s[dL]=l}(s,{previous:Zx,current:null}),I=_.current||(_.current={}),V=_.previous,$=V[y];I[y]=new nG($&&$.currentValue,l,V===Zx),s[h]=l}N1.ngInherit=!0;const dL="__ngSimpleChanges__";function hL(s){return s[dL]||null}const eE=function(s,l,o){};function k0(s){for(;Array.isArray(s);)s=s[e1];return s}function MM(s,l){return k0(l[s])}function X1(s,l){return k0(l[s.index])}function mL(s,l){return s.data[l]}function TA(s,l){return s[l]}function ox(s,l){const o=l[s];return ix(o)?o:o[e1]}function sT(s,l){return null==l?null:s[l]}function gL(s){s[xA]=0}function hG(s){1024&s[S_]||(s[S_]|=1024,vL(s,1))}function yL(s){1024&s[S_]&&(s[S_]&=-1025,vL(s,-1))}function vL(s,l){let o=s[F0];if(null===o)return;o[LS]+=l;let h=o;for(o=o[F0];null!==o&&(1===l&&1===h[LS]||-1===l&&0===h[LS]);)o[LS]+=l,h=o,o=o[F0]}const b_={lFrame:DL(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function wL(){return b_.bindingsEnabled}function AA(){return null!==b_.skipHydrationRootTNode}function Ty(){return b_.lFrame.lView}function J_(){return b_.lFrame.tView}function m2(s){return b_.lFrame.contextLView=s,s[K0]}function g2(s){return b_.lFrame.contextLView=null,s}function y1(){let s=xL();for(;null!==s&&64===s.type;)s=s.parent;return s}function xL(){return b_.lFrame.currentTNode}function nE(s,l){const o=b_.lFrame;o.currentTNode=s,o.isParent=l}function y2(){return b_.lFrame.isParent}function v2(){b_.lFrame.isParent=!1}function SA(){return b_.lFrame.bindingIndex++}function TG(s,l){const o=b_.lFrame;o.bindingIndex=o.bindingRootIndex=s,_2(l)}function _2(s){b_.lFrame.currentDirectiveIndex=s}function SL(){return b_.lFrame.currentQueryIndex}function w2(s){b_.lFrame.currentQueryIndex=s}function SG(s){const l=s[Jy];return 2===l.type?l.declTNode:1===l.type?s[A1]:null}function CL(s,l,o){if(o&uy.SkipSelf){let y=l,_=s;for(;!(y=y.parent,null!==y||o&uy.Host||(y=SG(_),null===y||(_=_[wA],10&y.type))););if(null===y)return!1;l=y,s=_}const h=b_.lFrame=ML();return h.currentTNode=l,h.lView=s,!0}function x2(s){const l=ML(),o=s[Jy];b_.lFrame=l,l.currentTNode=o.firstChild,l.lView=s,l.tView=o,l.contextLView=s,l.bindingIndex=o.bindingStartIndex,l.inI18n=!1}function ML(){const s=b_.lFrame,l=null===s?null:s.child;return null===l?DL(s):l}function DL(s){const l={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=l),l}function IL(){const s=b_.lFrame;return b_.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const kL=IL;function E2(){const s=IL();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function F1(){return b_.lFrame.selectedIndex}function kT(s){b_.lFrame.selectedIndex=s}function j0(){const s=b_.lFrame;return mL(s.tView,s.selectedIndex)}let RL=!0;function DM(){return RL}function aT(s){RL=s}function IM(s,l){for(let o=l.directiveStart,h=l.directiveEnd;o<h;o++){const _=s.data[o].type.prototype,{ngAfterContentInit:I,ngAfterContentChecked:V,ngAfterViewInit:$,ngAfterViewChecked:_n,ngOnDestroy:ha}=_;I&&(s.contentHooks??=[]).push(-o,I),V&&((s.contentHooks??=[]).push(o,V),(s.contentCheckHooks??=[]).push(o,V)),$&&(s.viewHooks??=[]).push(-o,$),_n&&((s.viewHooks??=[]).push(o,_n),(s.viewCheckHooks??=[]).push(o,_n)),null!=ha&&(s.destroyHooks??=[]).push(o,ha)}}function kM(s,l,o){PL(s,l,3,o)}function OM(s,l,o,h){(3&s[S_])===o&&PL(s,l,o,h)}function T2(s,l){let o=s[S_];(3&o)===l&&(o&=8191,o+=1,s[S_]=o)}function PL(s,l,o,h){const _=h??-1,I=l.length-1;let V=0;for(let $=void 0!==h?65535&s[xA]:0;$<I;$++)if("number"==typeof l[$+1]){if(V=l[$],null!=h&&V>=h)break}else l[$]<0&&(s[xA]+=65536),(V<_||-1==_)&&(PG(s,o,l,$),s[xA]=(4294901760&s[xA])+$+2),$++}function NL(s,l){eE(4,s,l);const o=h1(null);try{l.call(s)}finally{h1(o),eE(5,s,l)}}function PG(s,l,o,h){const y=o[h]<0,_=o[h+1],V=s[y?-o[h]:o[h]];y?s[S_]>>13<s[xA]>>16&&(3&s[S_])===l&&(s[S_]+=8192,NL(V,_)):NL(V,_)}const CA=-1;class zS{constructor(l,o,h){this.factory=l,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=h}}function LL(s){return s!==CA}function RM(s){return 32767&s}function PM(s,l){let o=function jG(s){return s>>16}(s),h=l;for(;o>0;)h=h[wA],o--;return h}let S2=!0;function NM(s){const l=S2;return S2=s,l}const FL=255,jL=5;let BG=0;const rE={};function LM(s,l){const o=BL(s,l);if(-1!==o)return o;const h=l[Jy];h.firstCreatePass&&(s.injectorIndex=l.length,C2(h.data,s),C2(l,null),C2(h.blueprint,null));const y=M2(s,l),_=s.injectorIndex;if(LL(y)){const I=RM(y),V=PM(y,l),$=V[Jy].data;for(let _n=0;_n<8;_n++)l[_+_n]=V[I+_n]|$[I+_n]}return l[_+8]=y,_}function C2(s,l){s.push(0,0,0,0,0,0,0,0,l)}function BL(s,l){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===l[s.injectorIndex+8]?-1:s.injectorIndex}function M2(s,l){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let o=0,h=null,y=l;for(;null!==y;){if(h=qL(y),null===h)return CA;if(o++,y=y[wA],-1!==h.injectorIndex)return h.injectorIndex|o<<16}return CA}function D2(s,l,o){!function VG(s,l,o){let h;"string"==typeof o?h=o.charCodeAt(0)||0:o.hasOwnProperty(PS)&&(h=o[PS]),null==h&&(h=o[PS]=BG++);const y=h&FL;l.data[s+(y>>jL)]|=1<<y}(s,l,o)}function VL(s,l,o){if(o&uy.Optional||void 0!==s)return s;mA()}function UL(s,l,o,h){if(o&uy.Optional&&void 0===h&&(h=null),!(o&(uy.Self|uy.Host))){const y=s[bA],_=Oy(void 0);try{return y?y.get(l,h,o&uy.Optional):Wy(l,h,o&uy.Optional)}finally{Oy(_)}}return VL(h,0,o)}function zL(s,l,o,h=uy.Default,y){if(null!==s){if(2048&l[S_]&&!(h&uy.Self)){const I=function $G(s,l,o,h,y){let _=s,I=l;for(;null!==_&&null!==I&&2048&I[S_]&&!(512&I[S_]);){const V=HL(_,I,o,h|uy.Self,rE);if(V!==rE)return V;let $=_.parent;if(!$){const _n=I[tL];if(_n){const ha=_n.get(o,rE,h);if(ha!==rE)return ha}$=qL(I),I=I[wA]}_=$}return y}(s,l,o,h,rE);if(I!==rE)return I}const _=HL(s,l,o,h,rE);if(_!==rE)return _}return UL(l,o,h,y)}function HL(s,l,o,h,y){const _=function HG(s){if("string"==typeof s)return s.charCodeAt(0)||0;const l=s.hasOwnProperty(PS)?s[PS]:void 0;return"number"==typeof l?l>=0?l&FL:GG:l}(o);if("function"==typeof _){if(!CL(l,s,h))return h&uy.Host?VL(y,0,h):UL(l,o,h,y);try{const I=_(h);if(null!=I||h&uy.Optional)return I;mA()}finally{kL()}}else if("number"==typeof _){let I=null,V=BL(s,l),$=CA,_n=h&uy.Host?l[X0][A1]:null;for((-1===V||h&uy.SkipSelf)&&($=-1===V?M2(s,l):l[V+8],$!==CA&&$L(h,!1)?(I=l[Jy],V=RM($),l=PM($,l)):V=-1);-1!==V;){const ha=l[Jy];if(GL(_,V,ha.data)){const Ba=zG(V,l,o,I,h,_n);if(Ba!==rE)return Ba}$=l[V+8],$!==CA&&$L(h,l[Jy].data[V+8]===_n)&&GL(_,V,l)?(I=ha,V=RM($),l=PM($,l)):V=-1}}return y}function zG(s,l,o,h,y,_){const I=l[Jy],V=I.data[s+8],ha=FM(V,I,o,null==h?DT(V)&&S2:h!=I&&0!=(3&V.type),y&uy.Host&&_===V);return null!==ha?OT(l,I,ha,V):rE}function FM(s,l,o,h,y){const _=s.providerIndexes,I=l.data,V=1048575&_,$=s.directiveStart,ha=_>>20,_d=y?V+ha:s.directiveEnd;for(let mg=h?V:V+ha;mg<_d;mg++){const iy=I[mg];if(mg<$&&o===iy||mg>=$&&iy.type===o)return mg}if(y){const mg=I[$];if(mg&&Lx(mg)&&mg.type===o)return $}return null}function OT(s,l,o,h){let y=s[o];const _=l.data;if(function NG(s){return s instanceof zS}(y)){const I=y;I.resolving&&function kS(s,l){const o=l?`. Dependency path: ${l.join(" > ")} > ${s}`:"";throw new py(-200,`Circular dependency in DI detected for ${s}${o}`)}(function a0(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():x_(s)}(_[o]));const V=NM(I.canSeeViewProviders);I.resolving=!0;const $=I.injectImpl?Oy(I.injectImpl):null;CL(s,h,uy.Default);try{y=s[o]=I.factory(void 0,_,s,h),l.firstCreatePass&&o>=h.directiveStart&&function RG(s,l,o){const{ngOnChanges:h,ngOnInit:y,ngDoCheck:_}=l.type.prototype;if(h){const I=uL(l);(o.preOrderHooks??=[]).push(s,I),(o.preOrderCheckHooks??=[]).push(s,I)}y&&(o.preOrderHooks??=[]).push(0-s,y),_&&((o.preOrderHooks??=[]).push(s,_),(o.preOrderCheckHooks??=[]).push(s,_))}(o,_[o],l)}finally{null!==$&&Oy($),NM(V),I.resolving=!1,kL()}}return y}function GL(s,l,o){return!!(o[l+(s>>jL)]&1<<s)}function $L(s,l){return!(s&uy.Self||s&uy.Host&&l)}class MA{constructor(l,o){this._tNode=l,this._lView=o}get(l,o,h){return zL(this._tNode,this._lView,l,Xx(h),o)}}function GG(){return new MA(y1(),Ty())}function v1(s){return x1(()=>{const l=s.prototype.constructor,o=l[IE]||I2(l),h=Object.prototype;let y=Object.getPrototypeOf(s.prototype).constructor;for(;y&&y!==h;){const _=y[IE]||I2(y);if(_&&_!==o)return _;y=Object.getPrototypeOf(y)}return _=>new _})}function I2(s){return DS(s)?()=>{const l=I2(y_(s));return l&&l()}:IT(s)}function qL(s){const l=s[Jy],o=l.type;return 2===o?l.declTNode:1===o?s[A1]:null}function DA(s){return function UG(s,l){if("class"===l)return s.classes;if("style"===l)return s.styles;const o=s.attrs;if(o){const h=o.length;let y=0;for(;y<h;){const _=o[y];if(HN(_))break;if(0===_)y+=2;else if("number"==typeof _)for(y++;y<h&&"string"==typeof o[y];)y++;else{if(_===l)return o[y+1];y+=2}}}return null}(y1(),s)}const kA="__parameters__";function RA(s,l,o){return x1(()=>{const h=function k2(s){return function(...o){if(s){const h=s(...o);for(const y in h)this[y]=h[y]}}}(l);function y(..._){if(this instanceof y)return h.apply(this,_),this;const I=new y(..._);return V.annotation=I,V;function V($,_n,ha){const Ba=$.hasOwnProperty(kA)?$[kA]:Object.defineProperty($,kA,{value:[]})[kA];for(;Ba.length<=ha;)Ba.push(null);return(Ba[ha]=Ba[ha]||[]).push(I),$}}return o&&(y.prototype=Object.create(o.prototype)),y.prototype.ngMetadataName=s,y.annotationCls=y,y})}function $S(s,l){s.forEach(o=>Array.isArray(o)?$S(o,l):l(o))}function YL(s,l,o){l>=s.length?s.push(o):s.splice(l,0,o)}function jM(s,l){return l>=s.length-1?s.pop():s.splice(l,1)[0]}function qS(s,l){const o=[];for(let h=0;h<s;h++)o.push(l);return o}function sx(s,l,o){let h=PA(s,l);return h>=0?s[1|h]=o:(h=~h,function XG(s,l,o,h){let y=s.length;if(y==l)s.push(o,h);else if(1===y)s.push(h,s[0]),s[0]=o;else{for(y--,s.push(s[y-1],s[y]);y>l;)s[y]=s[y-2],y--;s[l]=o,s[l+1]=h}}(s,h,l,o)),h}function O2(s,l){const o=PA(s,l);if(o>=0)return s[1|o]}function PA(s,l){return function KL(s,l,o){let h=0,y=s.length>>o;for(;y!==h;){const _=h+(y-h>>1),I=s[_<<o];if(l===I)return _<<o;I>l?y=_:h=_+1}return~(y<<o)}(s,l,1)}const RT=DE(RA("Optional"),8),WS=DE(RA("SkipSelf"),4);function HM(s){return 128==(128&s.flags)}var Z1=(()=>((Z1=Z1||{})[Z1.Important=1]="Important",Z1[Z1.DashCase=2]="DashCase",Z1))();const j2=new Map;let b9=0;const V2="__ngContext__";function C1(s,l){ix(l)?(s[V2]=l[BS],function x9(s){j2.set(s[BS],s)}(l)):s[V2]=l}let U2;function z2(s,l){return U2(s,l)}function XS(s){const l=s[F0];return K1(l)?l[F0]:l}function m4(s){return y4(s[FS])}function g4(s){return y4(s[Nx])}function y4(s){for(;null!==s&&!K1(s);)s=s[Nx];return s}function FA(s,l,o,h,y){if(null!=h){let _,I=!1;K1(h)?_=h:ix(h)&&(I=!0,h=h[e1]);const V=k0(h);0===s&&null!==o?null==y?x4(l,o,V):PT(l,o,V,y||null,!0):1===s&&null!==o?PT(l,o,V,y||null,!0):2===s?function KM(s,l,o){const h=WM(s,l);h&&function U9(s,l,o,h){s.removeChild(l,o,h)}(s,h,l,o)}(l,V,I):3===s&&l.destroyNode(V),null!=_&&function G9(s,l,o,h,y){const _=o[Qx];_!==k0(o)&&FA(l,s,h,_,y);for(let V=S1;V<o.length;V++){const $=o[V];JS($[Jy],$,s,l,h,_)}}(l,s,_,o,y)}}function qM(s,l,o){return s.createElement(l,o)}function _4(s,l){const o=s[EA],h=o.indexOf(l);yL(l),o.splice(h,1)}function G2(s,l){if(s.length<=S1)return;const o=S1+l,h=s[o];if(h){const y=h[jS];null!==y&&y!==s&&_4(y,h),l>0&&(s[o-1][Nx]=h[Nx]);const _=jM(s,S1+l);!function R9(s,l){JS(s,l,l[C_],2,null,null),l[e1]=null,l[A1]=null}(h[Jy],h);const I=_[Jx];null!==I&&I.detachView(_[Jy]),h[F0]=null,h[Nx]=null,h[S_]&=-129}return h}function b4(s,l){if(!(256&l[S_])){const o=l[C_];l[wM]?.destroy(),l[xM]?.destroy(),o.destroyNode&&JS(s,l,o,3,null,null),function L9(s){let l=s[FS];if(!l)return $2(s[Jy],s);for(;l;){let o=null;if(ix(l))o=l[FS];else{const h=l[S1];h&&(o=h)}if(!o){for(;l&&!l[Nx]&&l!==s;)ix(l)&&$2(l[Jy],l),l=l[F0];null===l&&(l=s),ix(l)&&$2(l[Jy],l),o=l&&l[Nx]}l=o}}(l)}}function $2(s,l){if(!(256&l[S_])){l[S_]&=-129,l[S_]|=256,function V9(s,l){let o;if(null!=s&&null!=(o=s.destroyHooks))for(let h=0;h<o.length;h+=2){const y=l[o[h]];if(!(y instanceof zS)){const _=o[h+1];if(Array.isArray(_))for(let I=0;I<_.length;I+=2){const V=y[_[I]],$=_[I+1];eE(4,V,$);try{$.call(V)}finally{eE(5,V,$)}}else{eE(4,y,_);try{_.call(y)}finally{eE(5,y,_)}}}}}(s,l),function B9(s,l){const o=s.cleanup,h=l[_A];if(null!==o)for(let _=0;_<o.length-1;_+=2)if("string"==typeof o[_]){const I=o[_+3];I>=0?h[I]():h[-I].unsubscribe(),_+=2}else o[_].call(h[o[_+1]]);null!==h&&(l[_A]=null);const y=l[oT];if(null!==y){l[oT]=null;for(let _=0;_<y.length;_++)(0,y[_])()}}(s,l),1===l[Jy].type&&l[C_].destroy();const o=l[jS];if(null!==o&&K1(l[F0])){o!==l[F0]&&_4(o,l);const h=l[Jx];null!==h&&h.detachView(s)}!function E9(s){j2.delete(s[BS])}(l)}}function q2(s,l,o){return function w4(s,l,o){let h=l;for(;null!==h&&40&h.type;)h=(l=h).parent;if(null===h)return o[e1];{const{componentOffset:y}=h;if(y>-1){const{encapsulation:_}=s.data[h.directiveStart+y];if(_===E1.None||_===E1.Emulated)return null}return X1(h,o)}}(s,l.parent,o)}function PT(s,l,o,h,y){s.insertBefore(l,o,h,y)}function x4(s,l,o){s.appendChild(l,o)}function E4(s,l,o,h,y){null!==h?PT(s,l,o,h,y):x4(s,l,o)}function WM(s,l){return s.parentNode(l)}function T4(s,l,o){return S4(s,l,o)}let W2,XM,Z2,ZM,S4=function A4(s,l,o){return 40&s.type?X1(s,o):null};function YM(s,l,o,h){const y=q2(s,h,l),_=l[C_],V=T4(h.parent||l[A1],h,l);if(null!=y)if(Array.isArray(o))for(let $=0;$<o.length;$++)E4(_,y,o[$],V,!1);else E4(_,y,o,V,!1);void 0!==W2&&W2(_,h,l,o,y)}function ZS(s,l){if(null!==l){const o=l.type;if(3&o)return X1(l,s);if(4&o)return Y2(-1,s[l.index]);if(8&o){const h=l.child;if(null!==h)return ZS(s,h);{const y=s[l.index];return K1(y)?Y2(-1,y):k0(y)}}if(32&o)return z2(l,s)()||k0(s[l.index]);{const h=M4(s,l);return null!==h?Array.isArray(h)?h[0]:ZS(XS(s[X0]),h):ZS(s,l.next)}}return null}function M4(s,l){return null!==l?s[X0][A1].projection[l.projection]:null}function Y2(s,l){const o=S1+s+1;if(o<l.length){const h=l[o],y=h[Jy].firstChild;if(null!==y)return ZS(h,y)}return l[Qx]}function K2(s,l,o,h,y,_,I){for(;null!=o;){const V=h[o.index],$=o.type;if(I&&0===l&&(V&&C1(k0(V),h),o.flags|=2),32!=(32&o.flags))if(8&$)K2(s,l,o.child,h,y,_,!1),FA(l,s,y,V,_);else if(32&$){const _n=z2(o,h);let ha;for(;ha=_n();)FA(l,s,y,ha,_);FA(l,s,y,V,_)}else 16&$?I4(s,l,h,o,y,_):FA(l,s,y,V,_);o=I?o.projectionNext:o.next}}function JS(s,l,o,h,y,_){K2(o,h,s.firstChild,l,y,_,!1)}function I4(s,l,o,h,y,_){const I=o[X0],$=I[A1].projection[h.projection];if(Array.isArray($))for(let _n=0;_n<$.length;_n++)FA(l,s,y,$[_n],_);else{let _n=$;const ha=I[F0];HM(h)&&(_n.flags|=128),K2(s,l,_n,ha,y,_,!0)}}function k4(s,l,o){""===o?s.removeAttribute(l,"class"):s.setAttribute(l,"class",o)}function O4(s,l,o){const{mergedAttrs:h,classes:y,styles:_}=o;null!==h&&s2(s,l,h),null!==y&&k4(s,l,y),null!==_&&function q9(s,l,o){s.setAttribute(l,"style",o)}(s,l,_)}function jA(s){return function X2(){if(void 0===XM&&(XM=null,Uy.trustedTypes))try{XM=Uy.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return XM}()?.createHTML(s)||s}function N4(s){return function J2(){if(void 0===ZM&&(ZM=null,Uy.trustedTypes))try{ZM=Uy.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return ZM}()?.createScriptURL(s)||s}class NT{constructor(l){this.changingThisBreaksApplicationSecurity=l}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${h0})`}}class Z9 extends NT{getTypeName(){return"HTML"}}class J9 extends NT{getTypeName(){return"Style"}}class Q9 extends NT{getTypeName(){return"Script"}}class t7 extends NT{getTypeName(){return"URL"}}class e7 extends NT{getTypeName(){return"ResourceURL"}}function lx(s){return s instanceof NT?s.changingThisBreaksApplicationSecurity:s}function iE(s,l){const o=function n7(s){return s instanceof NT&&s.getTypeName()||null}(s);if(null!=o&&o!==l){if("ResourceURL"===o&&"URL"===l)return!0;throw new Error(`Required a safe ${l}, got a ${o} (see ${h0})`)}return o===l}class l7{constructor(l){this.inertDocumentHelper=l}getInertBodyElement(l){l="<body><remove></remove>"+l;try{const o=(new window.DOMParser).parseFromString(jA(l),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(l):(o.removeChild(o.firstChild),o)}catch{return null}}}class c7{constructor(l){this.defaultDoc=l,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(l){const o=this.inertDocument.createElement("template");return o.innerHTML=jA(l),o}}const d7=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function JM(s){return(s=String(s)).match(d7)?s:"unsafe:"+s}function PE(s){const l={};for(const o of s.split(","))l[o]=!0;return l}function tC(...s){const l={};for(const o of s)for(const h in o)o.hasOwnProperty(h)&&(l[h]=!0);return l}const F4=PE("area,br,col,hr,img,wbr"),j4=PE("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),B4=PE("rp,rt"),Q2=tC(F4,tC(j4,PE("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),tC(B4,PE("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),tC(B4,j4)),_k=PE("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),V4=tC(_k,PE("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),PE("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),h7=PE("script,style,template");class f7{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(l){let o=l.firstChild,h=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?h=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,h&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let y=this.checkClobberedElement(o,o.nextSibling);if(y){o=y;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(l){const o=l.nodeName.toLowerCase();if(!Q2.hasOwnProperty(o))return this.sanitizedSomething=!0,!h7.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const h=l.attributes;for(let y=0;y<h.length;y++){const _=h.item(y),I=_.name,V=I.toLowerCase();if(!V4.hasOwnProperty(V)){this.sanitizedSomething=!0;continue}let $=_.value;_k[V]&&($=JM($)),this.buf.push(" ",I,'="',U4($),'"')}return this.buf.push(">"),!0}endElement(l){const o=l.nodeName.toLowerCase();Q2.hasOwnProperty(o)&&!F4.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(l){this.buf.push(U4(l))}checkClobberedElement(l,o){if(o&&(l.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${l.outerHTML}`);return o}}const p7=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,m7=/([^\#-~ |!])/g;function U4(s){return s.replace(/&/g,"&amp;").replace(p7,function(l){return"&#"+(1024*(l.charCodeAt(0)-55296)+(l.charCodeAt(1)-56320)+65536)+";"}).replace(m7,function(l){return"&#"+l.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let QM;function z4(s,l){let o=null;try{QM=QM||function L4(s){const l=new c7(s);return function u7(){try{return!!(new window.DOMParser).parseFromString(jA(""),"text/html")}catch{return!1}}()?new l7(l):l}(s);let h=l?String(l):"";o=QM.getInertBodyElement(h);let y=5,_=h;do{if(0===y)throw new Error("Failed to sanitize html because the input is unstable");y--,h=_,_=o.innerHTML,o=QM.getInertBodyElement(h)}while(h!==_);return jA((new f7).sanitizeChildren(tO(o)||o))}finally{if(o){const h=tO(o)||o;for(;h.firstChild;)h.removeChild(h.firstChild)}}}function tO(s){return"content"in s&&function g7(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var p0=(()=>((p0=p0||{})[p0.NONE=0]="NONE",p0[p0.HTML=1]="HTML",p0[p0.STYLE=2]="STYLE",p0[p0.SCRIPT=3]="SCRIPT",p0[p0.URL=4]="URL",p0[p0.RESOURCE_URL=5]="RESOURCE_URL",p0))();function H4(s){const l=eC();return l?l.sanitize(p0.URL,s)||"":iE(s,"URL")?lx(s):JM(x_(s))}function G4(s){const l=eC();if(l)return N4(l.sanitize(p0.RESOURCE_URL,s)||"");if(iE(s,"ResourceURL"))return N4(lx(s));throw new py(904,!1)}function eC(){const s=Ty();return s&&s[MT].sanitizer}class Fy{constructor(l,o){this._desc=l,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=ry({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const nC=new Fy("ENVIRONMENT_INITIALIZER"),q4=new Fy("INJECTOR",-1),W4=new Fy("INJECTOR_DEF_TYPES");class Y4{get(l,o=z_){if(o===z_){const h=new Error(`NullInjectorError: No provider for ${G0(l)}!`);throw h.name="NullInjectorError",h}return o}}function E7(...s){return{\u0275providers:K4(0,s),\u0275fromNgModule:!0}}function K4(s,...l){const o=[],h=new Set;let y;return $S(l,_=>{const I=_;nO(I,o,[],h)&&(y||=[],y.push(I))}),void 0!==y&&X4(y,o),o}function X4(s,l){for(let o=0;o<s.length;o++){const{providers:y}=s[o];rO(y,_=>{l.push(_)})}}function nO(s,l,o,h){if(!(s=y_(s)))return!1;let y=null,_=Ey(s);const I=!_&&f0(s);if(_||I){if(I&&!I.standalone)return!1;y=s}else{const $=s.ngModule;if(_=Ey($),!_)return!1;y=$}const V=h.has(y);if(I){if(V)return!1;if(h.add(y),I.dependencies){const $="function"==typeof I.dependencies?I.dependencies():I.dependencies;for(const _n of $)nO(_n,l,o,h)}}else{if(!_)return!1;{if(null!=_.imports&&!V){let _n;h.add(y);try{$S(_.imports,ha=>{nO(ha,l,o,h)&&(_n||=[],_n.push(ha))})}finally{}void 0!==_n&&X4(_n,l)}if(!V){const _n=IT(y)||(()=>new y);l.push({provide:y,useFactory:_n,deps:c0},{provide:W4,useValue:y,multi:!0},{provide:nC,useValue:()=>Py(y),multi:!0})}const $=_.providers;null==$||V||rO($,ha=>{l.push(ha)})}}return y!==s&&void 0!==s.providers}function rO(s,l){for(let o of s)IS(o)&&(o=o.\u0275providers),Array.isArray(o)?rO(o,l):l(o)}const T7=d0({provide:String,useValue:d0});function iO(s){return null!==s&&"object"==typeof s&&T7 in s}function LT(s){return"function"==typeof s}const oO=new Fy("Set Injector scope."),tD={},S7={};let sO;function eD(){return void 0===sO&&(sO=new Y4),sO}class oE{}class aO extends oE{get destroyed(){return this._destroyed}constructor(l,o,h,y){super(),this.parent=o,this.source=h,this.scopes=y,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,cO(l,I=>this.processProvider(I)),this.records.set(q4,BA(void 0,this)),y.has("environment")&&this.records.set(oE,BA(void 0,this));const _=this.records.get(oO);null!=_&&"string"==typeof _.value&&this.scopes.add(_.value),this.injectorDefTypes=new Set(this.get(W4.multi,c0,uy.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();const l=this._onDestroyHooks;this._onDestroyHooks=[];for(const o of l)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(l){return this.assertNotDestroyed(),this._onDestroyHooks.push(l),()=>this.removeOnDestroy(l)}runInContext(l){this.assertNotDestroyed();const o=Ex(this),h=Oy(void 0);try{return l()}finally{Ex(o),Oy(h)}}get(l,o=z_,h=uy.Default){if(this.assertNotDestroyed(),l.hasOwnProperty(UN))return l[UN](this);h=Xx(h);const y=Ex(this),_=Oy(void 0);try{if(!(h&uy.SkipSelf)){let V=this.records.get(l);if(void 0===V){const $=function k7(s){return"function"==typeof s||"object"==typeof s&&s instanceof Fy}(l)&&By(l);V=$&&this.injectableDefInScope($)?BA(lO(l),tD):null,this.records.set(l,V)}if(null!=V)return this.hydrate(l,V)}return(h&uy.Self?eD():this.parent).get(l,o=h&uy.Optional&&o===z_?null:o)}catch(I){if("NullInjectorError"===I.name){if((I[T_]=I[T_]||[]).unshift(G0(l)),y)throw I;return function RS(s,l,o,h){const y=s[T_];throw l[Y0]&&y.unshift(l[Y0]),s.message=function yA(s,l,o,h=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let y=G0(l);if(Array.isArray(l))y=l.map(G0).join(" -> ");else if("object"==typeof l){let _=[];for(let I in l)if(l.hasOwnProperty(I)){let V=l[I];_.push(I+":"+("string"==typeof V?JSON.stringify(V):G0(V)))}y=`{${_.join(", ")}}`}return`${o}${h?"("+h+")":""}[${y}]: ${s.replace(I0,"\n  ")}`}("\n"+s.message,y,o,h),s.ngTokenPath=y,s[T_]=null,s}(I,l,"R3InjectorError",this.source)}throw I}finally{Oy(_),Ex(y)}}resolveInjectorInitializers(){const l=Ex(this),o=Oy(void 0);try{const h=this.get(nC.multi,c0,uy.Self);for(const y of h)y()}finally{Ex(l),Oy(o)}}toString(){const l=[],o=this.records;for(const h of o.keys())l.push(G0(h));return`R3Injector[${l.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new py(205,!1)}processProvider(l){let o=LT(l=y_(l))?l:y_(l&&l.provide);const h=function M7(s){return iO(s)?BA(void 0,s.useValue):BA(Q4(s),tD)}(l);if(LT(l)||!0!==l.multi)this.records.get(o);else{let y=this.records.get(o);y||(y=BA(void 0,tD,!0),y.factory=()=>CT(y.multi),this.records.set(o,y)),o=l,y.multi.push(l)}this.records.set(o,h)}hydrate(l,o){return o.value===tD&&(o.value=S7,o.value=o.factory()),"object"==typeof o.value&&o.value&&function I7(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(l){if(!l.providedIn)return!1;const o=y_(l.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}removeOnDestroy(l){const o=this._onDestroyHooks.indexOf(l);-1!==o&&this._onDestroyHooks.splice(o,1)}}function lO(s){const l=By(s),o=null!==l?l.factory:IT(s);if(null!==o)return o;if(s instanceof Fy)throw new py(204,!1);if(s instanceof Function)return function C7(s){const l=s.length;if(l>0)throw qS(l,"?"),new py(204,!1);const o=function Ly(s){return s&&(s[by]||s[ky])||null}(s);return null!==o?()=>o.factory(s):()=>new s}(s);throw new py(204,!1)}function Q4(s,l,o){let h;if(LT(s)){const y=y_(s);return IT(y)||lO(y)}if(iO(s))h=()=>y_(s.useValue);else if(function J4(s){return!(!s||!s.useFactory)}(s))h=()=>s.useFactory(...CT(s.deps||[]));else if(function Z4(s){return!(!s||!s.useExisting)}(s))h=()=>Py(y_(s.useExisting));else{const y=y_(s&&(s.useClass||s.provide));if(!function D7(s){return!!s.deps}(s))return IT(y)||lO(y);h=()=>new y(...CT(s.deps))}return h}function BA(s,l,o=!1){return{factory:s,value:l,multi:o?[]:void 0}}function cO(s,l){for(const o of s)Array.isArray(o)?cO(o,l):o&&IS(o)?cO(o.\u0275providers,l):l(o)}const nD=new Fy("AppId",{providedIn:"root",factory:()=>O7}),O7="ng",t3=new Fy("Platform Initializer"),NE=new Fy("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),VA=new Fy("AnimationModuleType"),uO=new Fy("CSP nonce",{providedIn:"root",factory:()=>function QS(){if(void 0!==Z2)return Z2;if(typeof document<"u")return document;throw new py(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let n3=(s,l)=>null;function r3(s,l){return n3(s,l)}class U7{}class a3{}class H7{resolveComponentFactory(l){throw function z7(s){const l=Error(`No component factory found for ${G0(s)}.`);return l.ngComponent=s,l}(l)}}let aD=(()=>{class s{}return s.NULL=new H7,s})();function G7(){return UA(y1(),Ty())}function UA(s,l){return new C0(X1(s,l))}let C0=(()=>{class s{constructor(o){this.nativeElement=o}}return s.__NG_ELEMENT_ID__=G7,s})();function $7(s){return s instanceof C0?s.nativeElement:s}class sC{}let sE=(()=>{class s{constructor(){this.destroyNode=null}}return s.__NG_ELEMENT_ID__=()=>function q7(){const s=Ty(),o=ox(y1().index,s);return(ix(o)?o:s)[C_]}(),s})(),W7=(()=>{class s{}return s.\u0275prov=ry({token:s,providedIn:"root",factory:()=>null}),s})();class FT{constructor(l){this.full=l,this.major=l.split(".")[0],this.minor=l.split(".")[1],this.patch=l.split(".").slice(2).join(".")}}const Y7=new FT("16.1.3"),wO={};function aC(s){for(;s;){s[S_]|=64;const l=XS(s);if(c2(s)&&!l)return s;s=l}return null}function xO(s){return s.ngOriginalError}class aE{constructor(){this._console=console}handleError(l){const o=this._findOriginalError(l);this._console.error("ERROR",l),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(l){let o=l&&xO(l);for(;o&&xO(o);)o=xO(o);return o||null}}const d3=new Fy("",{providedIn:"root",factory:()=>!1});function LE(s){return s instanceof Function?s():s}class g3 extends sL{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(l){this._lView=l}onConsumerDependencyMayHaveChanged(){aC(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(l,o,h){const y=h1(this);this.trackingVersion++;try{l(o,h)}finally{h1(y)}}destroy(){this.trackingVersion++}}let cD=null;function y3(){return cD??=new g3,cD}function v3(s,l){return s[l]??y3()}function _3(s,l){const o=y3();o.hasReadASignal&&(s[l]=cD,o.lView=s,cD=new g3)}const M_={};function Q_(s){b3(J_(),Ty(),F1()+s,!1)}function b3(s,l,o,h){if(!h)if(3==(3&l[S_])){const _=s.preOrderCheckHooks;null!==_&&kM(l,_,o)}else{const _=s.preOrderHooks;null!==_&&OM(l,_,0,o)}kT(o)}function T3(s,l=null,o=null,h){const y=A3(s,l,o,h);return y.resolveInjectorInitializers(),y}function A3(s,l=null,o=null,h,y=new Set){const _=[o||c0,E7(s)];return h=h||("object"==typeof s?void 0:G0(s)),new aO(_,l||eD(),h||null,y)}let Ax=(()=>{class s{static create(o,h){if(Array.isArray(o))return T3({name:""},h,o,"");{const y=o.name??"";return T3({name:y},o.parent,o.providers,y)}}}return s.THROW_IF_NOT_FOUND=z_,s.NULL=new Y4,s.\u0275prov=ry({token:s,providedIn:"any",factory:()=>Py(q4)}),s.__NG_ELEMENT_ID__=-1,s})();function gy(s,l=uy.Default){const o=Ty();return null===o?Py(s,l):zL(y1(),o,y_(s),l)}function EO(){throw new Error("invalid")}function uD(s,l,o,h,y,_,I,V,$,_n,ha){const Ba=l.blueprint.slice();return Ba[e1]=y,Ba[S_]=140|h,(null!==_n||s&&2048&s[S_])&&(Ba[S_]|=2048),gL(Ba),Ba[F0]=Ba[wA]=s,Ba[K0]=o,Ba[MT]=I||s&&s[MT],Ba[C_]=V||s&&s[C_],Ba[bA]=$||s&&s[bA]||null,Ba[A1]=_,Ba[BS]=function w9(){return b9++}(),Ba[kE]=ha,Ba[tL]=_n,Ba[X0]=2==l.type?s[X0]:Ba,Ba}function HA(s,l,o,h,y){let _=s.data[l];if(null===_)_=function TO(s,l,o,h,y){const _=xL(),I=y2(),$=s.data[l]=function m$(s,l,o,h,y,_){let I=l?l.injectorIndex:-1,V=0;return AA()&&(V|=128),{type:o,index:h,insertBeforeIndex:null,injectorIndex:I,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:V,providerIndexes:0,value:y,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:l,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,I?_:_&&_.parent,o,l,h,y);return null===s.firstChild&&(s.firstChild=$),null!==_&&(I?null==_.child&&null!==$.parent&&(_.child=$):null===_.next&&(_.next=$,$.prev=_)),$}(s,l,o,h,y),function EG(){return b_.lFrame.inI18n}()&&(_.flags|=32);else if(64&_.type){_.type=o,_.value=h,_.attrs=y;const I=function US(){const s=b_.lFrame,l=s.currentTNode;return s.isParent?l:l.parent}();_.injectorIndex=null===I?-1:I.injectorIndex}return nE(_,!0),_}function lC(s,l,o,h){if(0===o)return-1;const y=l.length;for(let _=0;_<o;_++)l.push(h),s.blueprint.push(h),s.data.push(null);return y}function S3(s,l,o,h,y){const _=v3(l,wM),I=F1(),V=2&h;try{if(kT(-1),V&&l.length>Y_&&b3(s,l,Y_,!1),eE(V?2:0,y),V)_.runInContext(o,h,y);else{const _n=h1(null);try{o(h,y)}finally{h1(_n)}}}finally{V&&null===l[wM]&&_3(l,wM),kT(I),eE(V?3:1,y)}}function AO(s,l,o){if(l2(l)){const h=h1(null);try{const _=l.directiveEnd;for(let I=l.directiveStart;I<_;I++){const V=s.data[I];V.contentQueries&&V.contentQueries(1,o[I],I)}}finally{h1(h)}}}function SO(s,l,o){wL()&&(function x$(s,l,o,h){const y=o.directiveStart,_=o.directiveEnd;DT(o)&&function D$(s,l,o){const h=X1(l,s),y=C3(o);let I=16;o.signals?I=4096:o.onPush&&(I=64);const V=dD(s,uD(s,y,null,I,h,l,null,s[MT].rendererFactory.createRenderer(h,o),null,null,null));s[l.index]=V}(l,o,s.data[y+o.componentOffset]),s.firstCreatePass||LM(o,l),C1(h,l);const I=o.initialInputs;for(let V=y;V<_;V++){const $=s.data[V],_n=OT(l,s,V,o);C1(_n,l),null!==I&&I$(0,V-y,_n,$,0,I),Lx($)&&(ox(o.index,l)[K0]=OT(l,s,V,o))}}(s,l,o,X1(o,l)),64==(64&o.flags)&&O3(s,l,o))}function CO(s,l,o=X1){const h=l.localNames;if(null!==h){let y=l.index+1;for(let _=0;_<h.length;_+=2){const I=h[_+1],V=-1===I?o(l,s):s[I];s[y++]=V}}}function C3(s){const l=s.tView;return null===l||l.incompleteFirstPass?s.tView=MO(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts,s.id):l}function MO(s,l,o,h,y,_,I,V,$,_n,ha){const Ba=Y_+h,_d=Ba+y,mg=function c$(s,l){const o=[];for(let h=0;h<l;h++)o.push(h<s?null:M_);return o}(Ba,_d),iy="function"==typeof _n?_n():_n;return mg[Jy]={type:s,blueprint:mg,template:o,queries:null,viewQuery:V,declTNode:l,data:mg.slice().fill(null,Ba),bindingStartIndex:Ba,expandoStartIndex:_d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof I?I():I,firstChild:null,schemas:$,consts:iy,incompleteFirstPass:!1,ssrId:ha}}let M3=s=>null;function D3(s,l,o,h){for(let y in s)if(s.hasOwnProperty(y)){o=null===o?{}:o;const _=s[y];null===h?I3(o,l,y,_):h.hasOwnProperty(y)&&I3(o,l,h[y],_)}return o}function I3(s,l,o,h){s.hasOwnProperty(o)?s[o].push(l,h):s[o]=[l,h]}function ux(s,l,o,h,y,_,I,V){const $=X1(l,o);let ha,_n=l.inputs;!V&&null!=_n&&(ha=_n[h])?(RO(s,o,ha,h,y),DT(l)&&function v$(s,l){const o=ox(l,s);16&o[S_]||(o[S_]|=64)}(o,l.index)):3&l.type&&(h=function y$(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(h),y=null!=I?I(y,l.value||"",h):y,_.setProperty($,h,y))}function DO(s,l,o,h){if(wL()){const y=null===h?null:{"":-1},_=function T$(s,l){const o=s.directiveRegistry;let h=null,y=null;if(o)for(let _=0;_<o.length;_++){const I=o[_];if(YN(l,I.selectors,!1))if(h||(h=[]),Lx(I))if(null!==I.findHostDirectiveDefs){const V=[];y=y||new Map,I.findHostDirectiveDefs(I,V,y),h.unshift(...V,I),IO(s,l,V.length)}else h.unshift(I),IO(s,l,0);else y=y||new Map,I.findHostDirectiveDefs?.(I,h,y),h.push(I)}return null===h?null:[h,y]}(s,o);let I,V;null===_?I=V=null:[I,V]=_,null!==I&&k3(s,l,o,I,y,V),y&&function A$(s,l,o){if(l){const h=s.localNames=[];for(let y=0;y<l.length;y+=2){const _=o[l[y+1]];if(null==_)throw new py(-301,!1);h.push(l[y],_)}}}(o,h,y)}o.mergedAttrs=NS(o.mergedAttrs,o.attrs)}function k3(s,l,o,h,y,_){for(let _n=0;_n<h.length;_n++)D2(LM(o,l),s,h[_n].type);!function C$(s,l,o){s.flags|=1,s.directiveStart=l,s.directiveEnd=l+o,s.providerIndexes=l}(o,s.data.length,h.length);for(let _n=0;_n<h.length;_n++){const ha=h[_n];ha.providersResolver&&ha.providersResolver(ha)}let I=!1,V=!1,$=lC(s,l,h.length,null);for(let _n=0;_n<h.length;_n++){const ha=h[_n];o.mergedAttrs=NS(o.mergedAttrs,ha.hostAttrs),M$(s,o,l,$,ha),S$($,ha,y),null!==ha.contentQueries&&(o.flags|=4),(null!==ha.hostBindings||null!==ha.hostAttrs||0!==ha.hostVars)&&(o.flags|=64);const Ba=ha.type.prototype;!I&&(Ba.ngOnChanges||Ba.ngOnInit||Ba.ngDoCheck)&&((s.preOrderHooks??=[]).push(o.index),I=!0),!V&&(Ba.ngOnChanges||Ba.ngDoCheck)&&((s.preOrderCheckHooks??=[]).push(o.index),V=!0),$++}!function g$(s,l,o){const y=l.directiveEnd,_=s.data,I=l.attrs,V=[];let $=null,_n=null;for(let ha=l.directiveStart;ha<y;ha++){const Ba=_[ha],_d=o?o.get(Ba):null,iy=_d?_d.outputs:null;$=D3(Ba.inputs,ha,$,_d?_d.inputs:null),_n=D3(Ba.outputs,ha,_n,iy);const ay=null===$||null===I||WN(l)?null:k$($,ha,I);V.push(ay)}null!==$&&($.hasOwnProperty("class")&&(l.flags|=8),$.hasOwnProperty("style")&&(l.flags|=16)),l.initialInputs=V,l.inputs=$,l.outputs=_n}(s,o,_)}function O3(s,l,o){const h=o.directiveStart,y=o.directiveEnd,_=o.index,I=function AG(){return b_.lFrame.currentDirectiveIndex}();try{kT(_);for(let V=h;V<y;V++){const $=s.data[V],_n=l[V];_2(V),(null!==$.hostBindings||0!==$.hostVars||null!==$.hostAttrs)&&E$($,_n)}}finally{kT(-1),_2(I)}}function E$(s,l){null!==s.hostBindings&&s.hostBindings(1,l)}function IO(s,l,o){l.componentOffset=o,(s.components??=[]).push(l.index)}function S$(s,l,o){if(o){if(l.exportAs)for(let h=0;h<l.exportAs.length;h++)o[l.exportAs[h]]=s;Lx(l)&&(o[""]=s)}}function M$(s,l,o,h,y){s.data[h]=y;const _=y.factory||(y.factory=IT(y.type)),I=new zS(_,Lx(y),gy);s.blueprint[h]=I,o[h]=I,function b$(s,l,o,h,y){const _=y.hostBindings;if(_){let I=s.hostBindingOpCodes;null===I&&(I=s.hostBindingOpCodes=[]);const V=~l.index;(function w$(s){let l=s.length;for(;l>0;){const o=s[--l];if("number"==typeof o&&o<0)return o}return 0})(I)!=V&&I.push(V),I.push(o,h,_)}}(s,l,h,lC(s,o,y.hostVars,M_),y)}function lE(s,l,o,h,y,_){const I=X1(s,l);!function kO(s,l,o,h,y,_,I){if(null==_)s.removeAttribute(l,y,o);else{const V=null==I?x_(_):I(_,h||"",y);s.setAttribute(l,y,V,o)}}(l[C_],I,_,s.value,o,h,y)}function I$(s,l,o,h,y,_){const I=_[l];if(null!==I)for(let V=0;V<I.length;)R3(h,o,I[V++],I[V++],I[V++])}function R3(s,l,o,h,y){const _=h1(null);try{const I=s.inputTransforms;null!==I&&I.hasOwnProperty(h)&&(y=I[h].call(l,y)),null!==s.setInput?s.setInput(l,y,o,h):l[h]=y}finally{h1(_)}}function k$(s,l,o){let h=null,y=0;for(;y<o.length;){const _=o[y];if(0!==_)if(5!==_){if("number"==typeof _)break;if(s.hasOwnProperty(_)){null===h&&(h=[]);const I=s[_];for(let V=0;V<I.length;V+=2)if(I[V]===l){h.push(_,I[V+1],o[y+1]);break}}y+=2}else y+=2;else y+=4}return h}function P3(s,l,o,h){return[s,!0,!1,l,null,0,h,o,null,null,null]}function N3(s,l){const o=s.contentQueries;if(null!==o)for(let h=0;h<o.length;h+=2){const _=o[h+1];if(-1!==_){const I=s.data[_];w2(o[h]),I.contentQueries(2,l[_],_)}}}function dD(s,l){return s[FS]?s[QN][Nx]=l:s[FS]=l,s[QN]=l,l}function OO(s,l,o){w2(0);const h=h1(null);try{l(s,o)}finally{h1(h)}}function L3(s){return s[_A]||(s[_A]=[])}function F3(s){return s.cleanup||(s.cleanup=[])}function B3(s,l){const o=s[bA],h=o?o.get(aE,null):null;h&&h.handleError(l)}function RO(s,l,o,h,y){for(let _=0;_<o.length;){const I=o[_++],V=o[_++];R3(s.data[I],l[I],h,V,y)}}function O$(s,l){const o=ox(l,s),h=o[Jy];!function R$(s,l){for(let o=l.length;o<s.blueprint.length;o++)l.push(s.blueprint[o])}(h,o);const y=o[e1];null!==y&&null===o[kE]&&(o[kE]=r3(y,o[bA])),PO(h,o,o[K0])}function PO(s,l,o){x2(l);try{const h=s.viewQuery;null!==h&&OO(1,h,o);const y=s.template;null!==y&&S3(s,l,y,1,o),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&N3(s,l),s.staticViewQueries&&OO(2,s.viewQuery,o);const _=s.components;null!==_&&function P$(s,l){for(let o=0;o<l.length;o++)O$(s,l[o])}(l,_)}catch(h){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),h}finally{l[S_]&=-5,E2()}}let V3=(()=>{class s{constructor(){this.all=new Set,this.queue=new Map}create(o,h,y){const _=typeof Zone>"u"?null:Zone.current,I=new eG(o,_n=>{this.all.has(_n)&&this.queue.set(_n,_)},y);let V;this.all.add(I),I.notify();const $=()=>{I.cleanup(),V?.(),this.all.delete(I),this.queue.delete(I)};return V=h?.onDestroy($),{destroy:$}}flush(){if(0!==this.queue.size)for(const[o,h]of this.queue)this.queue.delete(o),h?h.run(()=>o.run()):o.run()}get isQueueEmpty(){return 0===this.queue.size}}return s.\u0275prov=ry({token:s,providedIn:"root",factory:()=>new s}),s})();function hD(s,l,o){let h=o?s.styles:null,y=o?s.classes:null,_=0;if(null!==l)for(let I=0;I<l.length;I++){const V=l[I];"number"==typeof V?_=V:1==_?y=MS(y,V):2==_&&(h=MS(h,V+": "+l[++I]+";"))}o?s.styles=h:s.stylesWithoutHost=h,o?s.classes=y:s.classesWithoutHost=y}function cC(s,l,o,h,y=!1){for(;null!==o;){const _=l[o.index];if(null!==_&&h.push(k0(_)),K1(_)){for(let V=S1;V<_.length;V++){const $=_[V],_n=$[Jy].firstChild;null!==_n&&cC($[Jy],$,_n,h)}_[Qx]!==_[e1]&&h.push(_[Qx])}const I=o.type;if(8&I)cC(s,l,o.child,h);else if(32&I){const V=z2(o,l);let $;for(;$=V();)h.push($)}else if(16&I){const V=M4(l,o);if(Array.isArray(V))h.push(...V);else{const $=XS(l[X0]);cC($[Jy],$,V,h,!0)}}o=y?o.projectionNext:o.next}return h}function fD(s,l,o,h=!0){const y=l[MT].rendererFactory;y.begin&&y.begin();try{U3(s,l,s.template,o)}catch(I){throw h&&B3(l,I),I}finally{y.end&&y.end(),l[MT].effectManager?.flush()}}function U3(s,l,o,h){const y=l[S_];if(256!=(256&y)){l[MT].effectManager?.flush(),x2(l);try{gL(l),function TL(s){return b_.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==o&&S3(s,l,o,2,h);const I=3==(3&y);if(I){const _n=s.preOrderCheckHooks;null!==_n&&kM(l,_n,null)}else{const _n=s.preOrderHooks;null!==_n&&OM(l,_n,0,null),T2(l,0)}if(function B$(s){for(let l=m4(s);null!==l;l=g4(l)){if(!l[eL])continue;const o=l[EA];for(let h=0;h<o.length;h++){hG(o[h])}}}(l),z3(l,2),null!==s.contentQueries&&N3(s,l),I){const _n=s.contentCheckHooks;null!==_n&&kM(l,_n)}else{const _n=s.contentHooks;null!==_n&&OM(l,_n,1),T2(l,1)}!function l$(s,l){const o=s.hostBindingOpCodes;if(null===o)return;const h=v3(l,xM);try{for(let y=0;y<o.length;y++){const _=o[y];if(_<0)kT(~_);else{const I=_,V=o[++y],$=o[++y];TG(V,I),h.runInContext($,2,l[I])}}}finally{null===l[xM]&&_3(l,xM),kT(-1)}}(s,l);const V=s.components;null!==V&&G3(l,V,0);const $=s.viewQuery;if(null!==$&&OO(2,$,h),I){const _n=s.viewCheckHooks;null!==_n&&kM(l,_n)}else{const _n=s.viewHooks;null!==_n&&OM(l,_n,2),T2(l,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),l[S_]&=-73,yL(l)}finally{E2()}}}function z3(s,l){for(let o=m4(s);null!==o;o=g4(o))for(let h=S1;h<o.length;h++)H3(o[h],l)}function V$(s,l,o){H3(ox(l,s),o)}function H3(s,l){if(!function uG(s){return 128==(128&s[S_])}(s))return;const o=s[Jy];if(80&s[S_]&&0===l||1024&s[S_]||2===l)U3(o,s,o.template,s[K0]);else if(s[LS]>0){z3(s,1);const y=s[Jy].components;null!==y&&G3(s,y,1)}}function G3(s,l,o){for(let h=0;h<l.length;h++)V$(s,l[h],o)}class uC{get rootNodes(){const l=this._lView,o=l[Jy];return cC(o,l,o.firstChild,[])}constructor(l,o){this._lView=l,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[K0]}set context(l){this._lView[K0]=l}get destroyed(){return 256==(256&this._lView[S_])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const l=this._lView[F0];if(K1(l)){const o=l[8],h=o?o.indexOf(this):-1;h>-1&&(G2(l,h),jM(o,h))}this._attachedToViewContainer=!1}b4(this._lView[Jy],this._lView)}onDestroy(l){!function _L(s,l){if(256==(256&s[S_]))throw new py(911,!1);null===s[oT]&&(s[oT]=[]),s[oT].push(l)}(this._lView,l)}markForCheck(){aC(this._cdRefInjectingView||this._lView)}detach(){this._lView[S_]&=-129}reattach(){this._lView[S_]|=128}detectChanges(){fD(this._lView[Jy],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new py(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function N9(s,l){JS(s,l,l[C_],2,null,null)}(this._lView[Jy],this._lView)}attachToAppRef(l){if(this._attachedToViewContainer)throw new py(902,!1);this._appRef=l}}class U$ extends uC{constructor(l){super(l),this._view=l}detectChanges(){const l=this._view;fD(l[Jy],l,l[K0],!1)}checkNoChanges(){}get context(){return null}}class $3 extends aD{constructor(l){super(),this.ngModule=l}resolveComponentFactory(l){const o=f0(l);return new dC(o,this.ngModule)}}function q3(s){const l=[];for(let o in s)s.hasOwnProperty(o)&&l.push({propName:s[o],templateName:o});return l}class H${constructor(l,o){this.injector=l,this.parentInjector=o}get(l,o,h){h=Xx(h);const y=this.injector.get(l,wO,h);return y!==wO||o===wO?y:this.parentInjector.get(l,o,h)}}class dC extends a3{get inputs(){const l=this.componentDef,o=l.inputTransforms,h=q3(l.inputs);if(null!==o)for(const y of h)o.hasOwnProperty(y.propName)&&(y.transform=o[y.propName]);return h}get outputs(){return q3(this.componentDef.outputs)}constructor(l,o){super(),this.componentDef=l,this.ngModule=o,this.componentType=l.type,this.selector=function LH(s){return s.map(NH).join(",")}(l.selectors),this.ngContentSelectors=l.ngContentSelectors?l.ngContentSelectors:[],this.isBoundToModule=!!o}create(l,o,h,y){let _=(y=y||this.ngModule)instanceof oE?y:y?.injector;_&&null!==this.componentDef.getStandaloneInjector&&(_=this.componentDef.getStandaloneInjector(_)||_);const I=_?new H$(l,_):l,V=I.get(sC,null);if(null===V)throw new py(407,!1);const ha={rendererFactory:V,sanitizer:I.get(W7,null),effectManager:I.get(V3,null)},Ba=V.createRenderer(null,this.componentDef),_d=this.componentDef.selectors[0][0]||"div",mg=h?function u$(s,l,o,h){const _=h.get(d3,!1)||o===E1.ShadowDom,I=s.selectRootElement(l,_);return function d$(s){M3(s)}(I),I}(Ba,h,this.componentDef.encapsulation,I):qM(Ba,_d,function z$(s){const l=s.toLowerCase();return"svg"===l?"svg":"math"===l?"math":null}(_d)),my=this.componentDef.signals?4608:this.componentDef.onPush?576:528,_y=MO(0,null,null,1,0,null,null,null,null,null,null),fy=uD(null,_y,null,my,null,null,ha,Ba,I,null,null);let Vy,t_;x2(fy);try{const h_=this.componentDef;let y0,_b=null;h_.findHostDirectiveDefs?(y0=[],_b=new Map,h_.findHostDirectiveDefs(h_,y0,_b),y0.push(h_)):y0=[h_];const qx=function $$(s,l){const o=s[Jy],h=Y_;return s[h]=l,HA(o,h,2,"#host",null)}(fy,mg),Wx=function q$(s,l,o,h,y,_,I){const V=y[Jy];!function W$(s,l,o,h){for(const y of s)l.mergedAttrs=NS(l.mergedAttrs,y.hostAttrs);null!==l.mergedAttrs&&(hD(l,l.mergedAttrs,!0),null!==o&&O4(h,o,l))}(h,s,l,I);let $=null;null!==l&&($=r3(l,y[bA]));const _n=_.rendererFactory.createRenderer(l,o);let ha=16;o.signals?ha=4096:o.onPush&&(ha=64);const Ba=uD(y,C3(o),null,ha,y[s.index],s,_,_n,null,null,$);return V.firstCreatePass&&IO(V,s,h.length-1),dD(y,Ba),y[s.index]=Ba}(qx,mg,h_,y0,fy,ha,Ba);t_=mL(_y,Y_),mg&&function K$(s,l,o,h){if(h)s2(s,o,["ng-version",Y7.full]);else{const{attrs:y,classes:_}=function FH(s){const l=[],o=[];let h=1,y=2;for(;h<s.length;){let _=s[h];if("string"==typeof _)2===y?""!==_&&l.push(_,s[++h]):8===y&&o.push(_);else{if(!Px(y))break;y=_}h++}return{attrs:l,classes:o}}(l.selectors[0]);y&&s2(s,o,y),_&&_.length>0&&k4(s,o,_.join(" "))}}(Ba,h_,mg,h),void 0!==o&&function X$(s,l,o){const h=s.projection=[];for(let y=0;y<l.length;y++){const _=o[y];h.push(null!=_?Array.from(_):null)}}(t_,this.ngContentSelectors,o),Vy=function Y$(s,l,o,h,y,_){const I=y1(),V=y[Jy],$=X1(I,y);k3(V,y,I,o,null,h);for(let ha=0;ha<o.length;ha++)C1(OT(y,V,I.directiveStart+ha,I),y);O3(V,y,I),$&&C1($,y);const _n=OT(y,V,I.directiveStart+I.componentOffset,I);if(s[K0]=y[K0]=_n,null!==_)for(const ha of _)ha(_n,l);return AO(V,I,s),_n}(Wx,h_,y0,_b,fy,[Z$]),PO(_y,fy,null)}finally{E2()}return new G$(this.componentType,Vy,UA(t_,fy),fy,t_)}}class G$ extends U7{constructor(l,o,h,y,_){super(),this.location=h,this._rootLView=y,this._tNode=_,this.previousInputValues=null,this.instance=o,this.hostView=this.changeDetectorRef=new U$(y),this.componentType=l}setInput(l,o){const h=this._tNode.inputs;let y;if(null!==h&&(y=h[l])){if(this.previousInputValues??=new Map,this.previousInputValues.has(l)&&Object.is(this.previousInputValues.get(l),o))return;const _=this._rootLView;RO(_[Jy],_,y,l,o),this.previousInputValues.set(l,o),aC(ox(this._tNode.index,_))}}get injector(){return new MA(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(l){this.hostView.onDestroy(l)}}function Z$(){const s=y1();IM(Ty()[Jy],s)}function t0(s){let l=function W3(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),o=!0;const h=[s];for(;l;){let y;if(Lx(s))y=l.\u0275cmp||l.\u0275dir;else{if(l.\u0275cmp)throw new py(903,!1);y=l.\u0275dir}if(y){if(o){h.push(y);const I=s;I.inputs=pD(s.inputs),I.inputTransforms=pD(s.inputTransforms),I.declaredInputs=pD(s.declaredInputs),I.outputs=pD(s.outputs);const V=y.hostBindings;V&&Cq(s,V);const $=y.viewQuery,_n=y.contentQueries;if($&&Q$(s,$),_n&&_q(s,_n),pA(s.inputs,y.inputs),pA(s.declaredInputs,y.declaredInputs),pA(s.outputs,y.outputs),null!==y.inputTransforms&&(null===I.inputTransforms&&(I.inputTransforms={}),pA(I.inputTransforms,y.inputTransforms)),Lx(y)&&y.data.animation){const ha=s.data;ha.animation=(ha.animation||[]).concat(y.data.animation)}}const _=y.features;if(_)for(let I=0;I<_.length;I++){const V=_[I];V&&V.ngInherit&&V(s),V===t0&&(o=!1)}}l=Object.getPrototypeOf(l)}!function J$(s){let l=0,o=null;for(let h=s.length-1;h>=0;h--){const y=s[h];y.hostVars=l+=y.hostVars,y.hostAttrs=NS(y.hostAttrs,o=NS(o,y.hostAttrs))}}(h)}function pD(s){return s===Zx?{}:s===c0?[]:s}function Q$(s,l){const o=s.viewQuery;s.viewQuery=o?(h,y)=>{l(h,y),o(h,y)}:l}function _q(s,l){const o=s.contentQueries;s.contentQueries=o?(h,y,_)=>{l(h,y,_),o(h,y,_)}:l}function Cq(s,l){const o=s.hostBindings;s.hostBindings=o?(h,y)=>{l(h,y),o(h,y)}:l}function NO(s){const l=s.inputConfig,o={};for(const h in l)if(l.hasOwnProperty(h)){const y=l[h];Array.isArray(y)&&y[2]&&(o[h]=y[2])}s.inputTransforms=o}function mD(s){return!!function LO(s){return null!==s&&("function"==typeof s||"object"==typeof s)}(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function M1(s,l,o){return!Object.is(s[l],o)&&(s[l]=o,!0)}function j1(s,l,o,h){const y=Ty();return M1(y,SA(),l)&&(J_(),lE(j0(),y,s,l,o,h)),j1}function A0(s,l,o,h,y,_,I,V){const $=Ty(),_n=J_(),ha=s+Y_,Ba=_n.firstCreatePass?function TW(s,l,o,h,y,_,I,V,$){const _n=l.consts,ha=HA(l,s,4,I||null,sT(_n,V));DO(l,o,ha,sT(_n,$)),IM(l,ha);const Ba=ha.tView=MO(2,ha,h,y,_,l.directiveRegistry,l.pipeRegistry,null,l.schemas,_n,null);return null!==l.queries&&(l.queries.template(l,ha),Ba.queries=l.queries.embeddedTView(ha)),ha}(ha,_n,$,l,o,h,y,_,I):_n.data[ha];nE(Ba,!1);const _d=cF(_n,$,Ba,s);DM()&&YM(_n,$,_d,Ba),C1(_d,$),dD($,$[ha]=P3(_d,$,_d,Ba)),TM(Ba)&&SO(_n,$,Ba),null!=I&&CO($,Ba,V)}let cF=function uF(s,l,o,h){return aT(!0),l[C_].createComment("")};function gC(s){return TA(function xG(){return b_.lFrame.contextLView}(),Y_+s)}function D_(s,l,o){const h=Ty();return M1(h,SA(),l)&&ux(J_(),j0(),h,s,l,h[C_],o,!1),D_}function zO(s,l,o,h,y){const I=y?"class":"style";RO(s,o,l.inputs[I],I,h)}function Yy(s,l,o,h){const y=Ty(),_=J_(),I=Y_+s,V=y[C_],$=_.firstCreatePass?function MW(s,l,o,h,y,_){const I=l.consts,$=HA(l,s,2,h,sT(I,y));return DO(l,o,$,sT(I,_)),null!==$.attrs&&hD($,$.attrs,!1),null!==$.mergedAttrs&&hD($,$.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,$),$}(I,_,y,l,o,h):_.data[I],_n=dF(_,y,$,V,l,s);y[I]=_n;const ha=TM($);return nE($,!0),O4(V,_n,$),32!=(32&$.flags)&&DM()&&YM(_,y,_n,$),0===function pG(){return b_.lFrame.elementDepthCount}()&&C1(_n,y),function mG(){b_.lFrame.elementDepthCount++}(),ha&&(SO(_,y,$),AO(_,$,y)),null!==h&&CO(y,$),Yy}function Hy(){let s=y1();y2()?v2():(s=s.parent,nE(s,!1));const l=s;(function yG(s){return b_.skipHydrationRootTNode===s})(l)&&function wG(){b_.skipHydrationRootTNode=null}(),function gG(){b_.lFrame.elementDepthCount--}();const o=J_();return o.firstCreatePass&&(IM(o,s),l2(s)&&o.queries.elementEnd(s)),null!=l.classesWithoutHost&&function LG(s){return 0!=(8&s.flags)}(l)&&zO(o,l,Ty(),l.classesWithoutHost,!0),null!=l.stylesWithoutHost&&function FG(s){return 0!=(16&s.flags)}(l)&&zO(o,l,Ty(),l.stylesWithoutHost,!1),Hy}function r1(s,l,o,h){return Yy(s,l,o,h),Hy(),r1}let dF=(s,l,o,h,y,_)=>(aT(!0),qM(h,y,function OL(){return b_.lFrame.currentNamespace}()));function $O(){return Ty()}function yC(s){return!!s&&"function"==typeof s.then}function pF(s){return!!s&&"function"==typeof s.subscribe}function Z0(s,l,o,h){const y=Ty(),_=J_(),I=y1();return function gF(s,l,o,h,y,_,I){const V=TM(h),_n=s.firstCreatePass&&F3(s),ha=l[K0],Ba=L3(l);let _d=!0;if(3&h.type||I){const ay=X1(h,l),my=I?I(ay):ay,_y=Ba.length,fy=I?t_=>I(k0(t_[h.index])):h.index;let Vy=null;if(!I&&V&&(Vy=function PW(s,l,o,h){const y=s.cleanup;if(null!=y)for(let _=0;_<y.length-1;_+=2){const I=y[_];if(I===o&&y[_+1]===h){const V=l[_A],$=y[_+2];return V.length>$?V[$]:null}"string"==typeof I&&(_+=2)}return null}(s,l,y,h.index)),null!==Vy)(Vy.__ngLastListenerFn__||Vy).__ngNextListenerFn__=_,Vy.__ngLastListenerFn__=_,_d=!1;else{_=vF(h,l,ha,_,!1);const t_=o.listen(my,y,_);Ba.push(_,t_),_n&&_n.push(y,fy,_y,_y+1)}}else _=vF(h,l,ha,_,!1);const mg=h.outputs;let iy;if(_d&&null!==mg&&(iy=mg[y])){const ay=iy.length;if(ay)for(let my=0;my<ay;my+=2){const h_=l[iy[my]][iy[my+1]].subscribe(_),y0=Ba.length;Ba.push(_,h_),_n&&_n.push(y,h.index,y0,-(y0+1))}}}(_,y,y[C_],I,s,l,h),Z0}function yF(s,l,o,h){try{return eE(6,l,o),!1!==o(h)}catch(y){return B3(s,y),!1}finally{eE(7,l,o)}}function vF(s,l,o,h,y){return function _(I){if(I===Function)return h;aC(s.componentOffset>-1?ox(s.index,l):l);let $=yF(l,o,h,I),_n=_.__ngNextListenerFn__;for(;_n;)$=yF(l,o,_n,I)&&$,_n=_n.__ngNextListenerFn__;return y&&!1===$&&I.preventDefault(),$}}function uE(s=1){return function CG(s){return(b_.lFrame.contextLView=function MG(s,l){for(;s>0;)l=l[wA],s--;return l}(s,b_.lFrame.contextLView))[K0]}(s)}function NW(s,l){let o=null;const h=function kH(s){const l=s.attrs;if(null!=l){const o=l.indexOf(5);if(!(1&o))return l[o+1]}return null}(s);for(let y=0;y<l.length;y++){const _=l[y];if("*"!==_){if(null===h?YN(s,_,!0):PH(h,_))return y}else o=y}return o}function jE(s){const l=Ty()[X0][A1];if(!l.projection){const h=l.projection=qS(s?s.length:1,null),y=h.slice();let _=l.child;for(;null!==_;){const I=s?NW(_,s):0;null!==I&&(y[I]?y[I].projectionNext=_:h[I]=_,y[I]=_),_=_.next}}}function O0(s,l=0,o){const h=Ty(),y=J_(),_=HA(y,Y_+s,16,null,o||null);null===_.projection&&(_.projection=l),v2(),(!h[kE]||AA())&&32!=(32&_.flags)&&function H9(s,l,o){I4(l[C_],0,l,o,q2(s,o,l),T4(o.parent||l[A1],o,l))}(y,h,_)}function bD(s,l){return s<<17|l<<2}function lT(s){return s>>17&32767}function WO(s){return 2|s}function BT(s){return(131068&s)>>2}function YO(s,l){return-131069&s|l<<2}function KO(s){return 1|s}function MF(s,l,o,h,y){const _=s[o+1],I=null===l;let V=h?lT(_):BT(_),$=!1;for(;0!==V&&(!1===$||I);){const ha=s[V+1];UW(s[V],l)&&($=!0,s[V+1]=h?KO(ha):WO(ha)),V=h?lT(ha):BT(ha)}$&&(s[o+1]=h?WO(_):KO(_))}function UW(s,l){return null===s||null==l||(Array.isArray(s)?s[1]:s)===l||!(!Array.isArray(s)||"string"!=typeof l)&&PA(s,l)>=0}function XO(s,l,o){return Fx(s,l,o,!1),XO}function f1(s,l){return Fx(s,l,null,!0),f1}function Fx(s,l,o,h){const y=Ty(),_=J_(),I=function RE(s){const l=b_.lFrame,o=l.bindingIndex;return l.bindingIndex=l.bindingIndex+s,o}(2);_.firstUpdatePass&&function LF(s,l,o,h){const y=s.data;if(null===y[o+1]){const _=y[F1()],I=function NF(s,l){return l>=s.expandoStartIndex}(s,o);(function VF(s,l){return 0!=(s.flags&(l?8:16))})(_,h)&&null===l&&!I&&(l=!1),l=function XW(s,l,o,h){const y=function b2(s){const l=b_.lFrame.currentDirectiveIndex;return-1===l?null:s[l]}(s);let _=h?l.residualClasses:l.residualStyles;if(null===y)0===(h?l.classBindings:l.styleBindings)&&(o=vC(o=ZO(null,s,l,o,h),l.attrs,h),_=null);else{const I=l.directiveStylingLast;if(-1===I||s[I]!==y)if(o=ZO(y,s,l,o,h),null===_){let $=function ZW(s,l,o){const h=o?l.classBindings:l.styleBindings;if(0!==BT(h))return s[lT(h)]}(s,l,h);void 0!==$&&Array.isArray($)&&($=ZO(null,s,l,$[1],h),$=vC($,l.attrs,h),function JW(s,l,o,h){s[lT(o?l.classBindings:l.styleBindings)]=h}(s,l,h,$))}else _=function QW(s,l,o){let h;const y=l.directiveEnd;for(let _=1+l.directiveStylingLast;_<y;_++)h=vC(h,s[_].hostAttrs,o);return vC(h,l.attrs,o)}(s,l,h)}return void 0!==_&&(h?l.residualClasses=_:l.residualStyles=_),o}(y,_,l,h),function BW(s,l,o,h,y,_){let I=_?l.classBindings:l.styleBindings,V=lT(I),$=BT(I);s[h]=o;let ha,_n=!1;if(Array.isArray(o)?(ha=o[1],(null===ha||PA(o,ha)>0)&&(_n=!0)):ha=o,y)if(0!==$){const _d=lT(s[V+1]);s[h+1]=bD(_d,V),0!==_d&&(s[_d+1]=YO(s[_d+1],h)),s[V+1]=function FW(s,l){return 131071&s|l<<17}(s[V+1],h)}else s[h+1]=bD(V,0),0!==V&&(s[V+1]=YO(s[V+1],h)),V=h;else s[h+1]=bD($,0),0===V?V=h:s[$+1]=YO(s[$+1],h),$=h;_n&&(s[h+1]=WO(s[h+1])),MF(s,ha,h,!0),MF(s,ha,h,!1),function VW(s,l,o,h,y){const _=y?s.residualClasses:s.residualStyles;null!=_&&"string"==typeof l&&PA(_,l)>=0&&(o[h+1]=KO(o[h+1]))}(l,ha,s,h,_),I=bD(V,$),_?l.classBindings=I:l.styleBindings=I}(y,_,l,o,I,h)}}(_,s,I,h),l!==M_&&M1(y,I,l)&&function jF(s,l,o,h,y,_,I,V){if(!(3&l.type))return;const $=s.data,_n=$[V+1],ha=function jW(s){return 1==(1&s)}(_n)?BF($,l,o,y,BT(_n),I):void 0;wD(ha)||(wD(_)||function LW(s){return 2==(2&s)}(_n)&&(_=BF($,null,o,y,V,I)),function $9(s,l,o,h,y){if(l)y?s.addClass(o,h):s.removeClass(o,h);else{let _=-1===h.indexOf("-")?void 0:Z1.DashCase;null==y?s.removeStyle(o,h,_):("string"==typeof y&&y.endsWith("!important")&&(y=y.slice(0,-10),_|=Z1.Important),s.setStyle(o,h,y,_))}}(h,I,MM(F1(),o),y,_))}(_,_.data[F1()],y,y[C_],s,y[I+1]=function rY(s,l){return null==s||""===s||("string"==typeof l?s+=l:"object"==typeof s&&(s=G0(lx(s)))),s}(l,o),h,I)}function ZO(s,l,o,h,y){let _=null;const I=o.directiveEnd;let V=o.directiveStylingLast;for(-1===V?V=o.directiveStart:V++;V<I&&(_=l[V],h=vC(h,_.hostAttrs,y),_!==s);)V++;return null!==s&&(o.directiveStylingLast=V),h}function vC(s,l,o){const h=o?1:2;let y=-1;if(null!==l)for(let _=0;_<l.length;_++){const I=l[_];"number"==typeof I?y=I:y===h&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),sx(s,I,!!o||l[++_]))}return void 0===s?null:s}function BF(s,l,o,h,y,_){const I=null===l;let V;for(;y>0;){const $=s[y],_n=Array.isArray($),ha=_n?$[1]:$,Ba=null===ha;let _d=o[y+1];_d===M_&&(_d=Ba?c0:void 0);let mg=Ba?O2(_d,h):ha===h?_d:void 0;if(_n&&!wD(mg)&&(mg=O2($,h)),wD(mg)&&(V=mg,I))return V;const iy=s[y+1];y=I?lT(iy):BT(iy)}if(null!==l){let $=_?l.residualClasses:l.residualStyles;null!=$&&(V=O2($,h))}return V}function wD(s){return void 0!==s}function w_(s,l=""){const o=Ty(),h=J_(),y=s+Y_,_=h.firstCreatePass?HA(h,y,1,l,null):h.data[y],I=UF(h,o,_,l,s);o[y]=I,DM()&&YM(h,o,I,_),nE(_,!1)}let UF=(s,l,o,h,y)=>(aT(!0),function $M(s,l){return s.createText(l)}(l[C_],h));function JO(s){return xD("",s,""),JO}function xD(s,l,o){const h=Ty(),y=function $A(s,l,o,h){return M1(s,SA(),o)?l+x_(o)+h:M_}(h,s,l,o);return y!==M_&&function FE(s,l,o){const h=MM(l,s);!function v4(s,l,o){s.setValue(l,o)}(s[C_],h,o)}(h,F1(),y),xD}function _C(s,l,o){const h=Ty();return M1(h,SA(),l)&&ux(J_(),j0(),h,s,l,h[C_],o,!0),_C}const eS="en-US";let s5=eS;function eR(s,l,o,h,y){if(s=y_(s),Array.isArray(s))for(let _=0;_<s.length;_++)eR(s[_],l,o,h,y);else{const _=J_(),I=Ty();let V=LT(s)?s:y_(s.provide),$=Q4(s);const _n=y1(),ha=1048575&_n.providerIndexes,Ba=_n.directiveStart,_d=_n.providerIndexes>>20;if(LT(s)||!s.multi){const mg=new zS($,y,gy),iy=rR(V,l,y?ha:ha+_d,Ba);-1===iy?(D2(LM(_n,I),_,V),nR(_,s,l.length),l.push(V),_n.directiveStart++,_n.directiveEnd++,y&&(_n.providerIndexes+=1048576),o.push(mg),I.push(mg)):(o[iy]=mg,I[iy]=mg)}else{const mg=rR(V,l,ha+_d,Ba),iy=rR(V,l,ha,ha+_d),my=iy>=0&&o[iy];if(y&&!my||!y&&!(mg>=0&&o[mg])){D2(LM(_n,I),_,V);const _y=function EK(s,l,o,h,y){const _=new zS(s,o,gy);return _.multi=[],_.index=l,_.componentProviders=0,k5(_,y,h&&!o),_}(y?xK:wK,o.length,y,h,$);!y&&my&&(o[iy].providerFactory=_y),nR(_,s,l.length,0),l.push(V),_n.directiveStart++,_n.directiveEnd++,y&&(_n.providerIndexes+=1048576),o.push(_y),I.push(_y)}else nR(_,s,mg>-1?mg:iy,k5(o[y?iy:mg],$,!y&&h));!y&&h&&my&&o[iy].componentProviders++}}}function nR(s,l,o,h){const y=LT(l),_=function A7(s){return!!s.useClass}(l);if(y||_){const $=(_?y_(l.useClass):l).prototype.ngOnDestroy;if($){const _n=s.destroyHooks||(s.destroyHooks=[]);if(!y&&l.multi){const ha=_n.indexOf(o);-1===ha?_n.push(o,[h,$]):_n[ha+1].push(h,$)}else _n.push(o,$)}}}function k5(s,l,o){return o&&s.componentProviders++,s.multi.push(l)-1}function rR(s,l,o,h){for(let y=o;y<h;y++)if(l[y]===s)return y;return-1}function wK(s,l,o,h){return iR(this.multi,[])}function xK(s,l,o,h){const y=this.multi;let _;if(this.providerFactory){const I=this.providerFactory.componentProviders,V=OT(o,o[Jy],this.providerFactory.index,h);_=V.slice(0,I),iR(y,_);for(let $=I;$<V.length;$++)_.push(V[$])}else _=[],iR(y,_);return _}function iR(s,l){for(let o=0;o<s.length;o++)l.push((0,s[o])());return l}function E0(s,l=[]){return o=>{o.providersResolver=(h,y)=>function bK(s,l,o){const h=J_();if(h.firstCreatePass){const y=Lx(s);eR(o,h.data,h.blueprint,y,!0),eR(l,h.data,h.blueprint,y,!1)}}(h,y?y(s):s,l)}}class nS{}class O5{}class oR extends nS{constructor(l,o,h){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new $3(this);const y=rx(l);this._bootstrapComponents=LE(y.bootstrap),this._r3Injector=A3(l,o,[{provide:nS,useValue:this},{provide:aD,useValue:this.componentFactoryResolver},...h],G0(l),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(l)}get injector(){return this._r3Injector}destroy(){const l=this._r3Injector;!l.destroyed&&l.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(l){this.destroyCbs.push(l)}}class sR extends O5{constructor(l){super(),this.moduleType=l}create(l){return new oR(this.moduleType,l,[])}}class R5 extends nS{constructor(l){super(),this.componentFactoryResolver=new $3(this),this.instance=null;const o=new aO([...l.providers,{provide:nS,useValue:this},{provide:aD,useValue:this.componentFactoryResolver}],l.parent||eD(),l.debugName,new Set(["environment"]));this.injector=o,l.runEnvironmentInitializers&&o.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(l){this.injector.onDestroy(l)}}function aR(s,l,o=null){return new R5({providers:s,parent:l,debugName:o,runEnvironmentInitializers:!0}).injector}let SK=(()=>{class s{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const h=K4(0,o.type),y=h.length>0?aR([h],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,y)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=ry({token:s,providedIn:"environment",factory:()=>new s(Py(oE))}),s})();function BE(s){s.getStandaloneInjector=l=>l.get(SK).getOrCreateStandaloneInjector(s)}function V5(s,l,o,h,y,_){const I=l+o;return M1(s,I,y)?function cE(s,l,o){return s[l]=o}(s,I+1,_?h.call(_,y):h(y)):function AC(s,l){const o=s[l];return o===M_?void 0:o}(s,I+1)}function q5(s,l,o){const h=s+Y_,y=Ty(),_=TA(y,h);return function SC(s,l){return s[Jy].data[l].pure}(y,h)?V5(y,function L1(){const s=b_.lFrame;let l=s.bindingRootIndex;return-1===l&&(l=s.bindingRootIndex=s.tView.bindingStartIndex),l}(),l,_.transform,o,_):_.transform(o)}function cR(s){return l=>{setTimeout(s,void 0,l)}}const B0=class XK extends G_{constructor(l=!1){super(),this.__isAsync=l}emit(l){super.next(l)}subscribe(l,o,h){let y=l,_=o||(()=>null),I=h;if(l&&"object"==typeof l){const $=l;y=$.next?.bind($),_=$.error?.bind($),I=$.complete?.bind($)}this.__isAsync&&(_=cR(_),y&&(y=cR(y)),I&&(I=cR(I)));const V=super.subscribe({next:y,error:_,complete:I});return l instanceof w&&l.add(V),V}};function ZK(){return this._results[Symbol.iterator]()}class uR{get changes(){return this._changes||(this._changes=new B0)}constructor(l=!1){this._emitDistinctChangesOnly=l,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=uR.prototype;o[Symbol.iterator]||(o[Symbol.iterator]=ZK)}get(l){return this._results[l]}map(l){return this._results.map(l)}filter(l){return this._results.filter(l)}find(l){return this._results.find(l)}reduce(l,o){return this._results.reduce(l,o)}forEach(l){this._results.forEach(l)}some(l){return this._results.some(l)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(l,o){const h=this;h.dirty=!1;const y=function Tx(s){return s.flat(Number.POSITIVE_INFINITY)}(l);(this._changesDetected=!function YG(s,l,o){if(s.length!==l.length)return!1;for(let h=0;h<s.length;h++){let y=s[h],_=l[h];if(o&&(y=o(y),_=o(_)),_!==y)return!1}return!0}(h._results,y,o))&&(h._results=y,h.length=y.length,h.last=y[this.length-1],h.first=y[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let VE=(()=>{class s{}return s.__NG_ELEMENT_ID__=tX,s})();const JK=VE,QK=class extends JK{constructor(l,o,h){super(),this._declarationLView=l,this._declarationTContainer=o,this.elementRef=h}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(l,o){return this.createEmbeddedViewImpl(l,o,null)}createEmbeddedViewImpl(l,o,h){const I=this._declarationTContainer.tView,V=uD(this._declarationLView,I,l,4096&this._declarationLView[S_]?4096:16,null,I.declTNode,null,null,null,o||null,h||null);V[jS]=this._declarationLView[this._declarationTContainer.index];const _n=this._declarationLView[Jx];return null!==_n&&(V[Jx]=_n.createEmbeddedView(I)),PO(I,V,l),new uC(V)}};function tX(){return CD(y1(),Ty())}function CD(s,l){return 4&s.type?new QK(l,s,UA(s,l)):null}let Bx=(()=>{class s{}return s.__NG_ELEMENT_ID__=aX,s})();function aX(){return J5(y1(),Ty())}const lX=Bx,X5=class extends lX{constructor(l,o,h){super(),this._lContainer=l,this._hostTNode=o,this._hostLView=h}get element(){return UA(this._hostTNode,this._hostLView)}get injector(){return new MA(this._hostTNode,this._hostLView)}get parentInjector(){const l=M2(this._hostTNode,this._hostLView);if(LL(l)){const o=PM(l,this._hostLView),h=RM(l);return new MA(o[Jy].data[h+8],o)}return new MA(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(l){const o=Z5(this._lContainer);return null!==o&&o[l]||null}get length(){return this._lContainer.length-S1}createEmbeddedView(l,o,h){let y,_;"number"==typeof h?y=h:null!=h&&(y=h.index,_=h.injector);const V=l.createEmbeddedViewImpl(o||{},_,null);return this.insertImpl(V,y,false),V}createComponent(l,o,h,y,_){const I=l&&!function GS(s){return"function"==typeof s}(l);let V;if(I)V=o;else{const ay=o||{};V=ay.index,h=ay.injector,y=ay.projectableNodes,_=ay.environmentInjector||ay.ngModuleRef}const $=I?l:new dC(f0(l)),_n=h||this.parentInjector;if(!_&&null==$.ngModule){const my=(I?_n:this.parentInjector).get(oE,null);my&&(_=my)}f0($.componentType??{});const mg=$.create(_n,y,null,_);return this.insertImpl(mg.hostView,V,false),mg}insert(l,o){return this.insertImpl(l,o,!1)}insertImpl(l,o,h){const y=l._lView,_=y[Jy];if(function dG(s){return K1(s[F0])}(y)){const $=this.indexOf(l);if(-1!==$)this.detach($);else{const _n=y[F0],ha=new X5(_n,_n[A1],_n[F0]);ha.detach(ha.indexOf(l))}}const I=this._adjustIndex(o),V=this._lContainer;if(function F9(s,l,o,h){const y=S1+h,_=o.length;h>0&&(o[y-1][Nx]=l),h<_-S1?(l[Nx]=o[y],YL(o,S1+h,l)):(o.push(l),l[Nx]=null),l[F0]=o;const I=l[jS];null!==I&&o!==I&&function j9(s,l){const o=s[EA];l[X0]!==l[F0][F0][X0]&&(s[eL]=!0),null===o?s[EA]=[l]:o.push(l)}(I,l);const V=l[Jx];null!==V&&V.insertView(s),l[S_]|=128}(_,y,V,I),!h){const $=Y2(I,V),_n=y[C_],ha=WM(_n,V[Qx]);null!==ha&&function P9(s,l,o,h,y,_){h[e1]=y,h[A1]=l,JS(s,h,o,1,y,_)}(_,V[A1],_n,y,ha,$)}return l.attachToViewContainerRef(),YL(hR(V),I,l),l}move(l,o){return this.insert(l,o)}indexOf(l){const o=Z5(this._lContainer);return null!==o?o.indexOf(l):-1}remove(l){const o=this._adjustIndex(l,-1),h=G2(this._lContainer,o);h&&(jM(hR(this._lContainer),o),b4(h[Jy],h))}detach(l){const o=this._adjustIndex(l,-1),h=G2(this._lContainer,o);return h&&null!=jM(hR(this._lContainer),o)?new uC(h):null}_adjustIndex(l,o=0){return l??this.length+o}};function Z5(s){return s[8]}function hR(s){return s[8]||(s[8]=[])}function J5(s,l){let o;const h=l[s.index];return K1(h)?o=h:(o=P3(h,l,null,s),l[s.index]=o,dD(l,o)),Q5(o,l,s,h),new X5(o,s,l)}let Q5=function tB(s,l,o,h){if(s[Qx])return;let y;y=8&o.type?k0(h):function cX(s,l){const o=s[C_],h=o.createComment(""),y=X1(l,s);return PT(o,WM(o,y),h,function z9(s,l){return s.nextSibling(l)}(o,y),!1),h}(l,o),s[Qx]=y};class fR{constructor(l){this.queryList=l,this.matches=null}clone(){return new fR(this.queryList)}setDirty(){this.queryList.setDirty()}}class pR{constructor(l=[]){this.queries=l}createEmbeddedView(l){const o=l.queries;if(null!==o){const h=null!==l.contentQueries?l.contentQueries[0]:o.length,y=[];for(let _=0;_<h;_++){const I=o.getByIndex(_);y.push(this.queries[I.indexInDeclarationView].clone())}return new pR(y)}return null}insertView(l){this.dirtyQueriesWithMatches(l)}detachView(l){this.dirtyQueriesWithMatches(l)}dirtyQueriesWithMatches(l){for(let o=0;o<this.queries.length;o++)null!==oB(l,o).matches&&this.queries[o].setDirty()}}class eB{constructor(l,o,h=null){this.predicate=l,this.flags=o,this.read=h}}class mR{constructor(l=[]){this.queries=l}elementStart(l,o){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(l,o)}elementEnd(l){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(l)}embeddedTView(l){let o=null;for(let h=0;h<this.length;h++){const y=null!==o?o.length:0,_=this.getByIndex(h).embeddedTView(l,y);_&&(_.indexInDeclarationView=h,null!==o?o.push(_):o=[_])}return null!==o?new mR(o):null}template(l,o){for(let h=0;h<this.queries.length;h++)this.queries[h].template(l,o)}getByIndex(l){return this.queries[l]}get length(){return this.queries.length}track(l){this.queries.push(l)}}class gR{constructor(l,o=-1){this.metadata=l,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(l,o){this.isApplyingToNode(o)&&this.matchTNode(l,o)}elementEnd(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}template(l,o){this.elementStart(l,o)}embeddedTView(l,o){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,o),new gR(this.metadata)):null}isApplyingToNode(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let h=l.parent;for(;null!==h&&8&h.type&&h.index!==o;)h=h.parent;return o===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(l,o){const h=this.metadata.predicate;if(Array.isArray(h))for(let y=0;y<h.length;y++){const _=h[y];this.matchTNodeWithReadOption(l,o,hX(o,_)),this.matchTNodeWithReadOption(l,o,FM(o,l,_,!1,!1))}else h===VE?4&o.type&&this.matchTNodeWithReadOption(l,o,-1):this.matchTNodeWithReadOption(l,o,FM(o,l,h,!1,!1))}matchTNodeWithReadOption(l,o,h){if(null!==h){const y=this.metadata.read;if(null!==y)if(y===C0||y===Bx||y===VE&&4&o.type)this.addMatch(o.index,-2);else{const _=FM(o,l,y,!1,!1);null!==_&&this.addMatch(o.index,_)}else this.addMatch(o.index,h)}}addMatch(l,o){null===this.matches?this.matches=[l,o]:this.matches.push(l,o)}}function hX(s,l){const o=s.localNames;if(null!==o)for(let h=0;h<o.length;h+=2)if(o[h]===l)return o[h+1];return null}function pX(s,l,o,h){return-1===o?function fX(s,l){return 11&s.type?UA(s,l):4&s.type?CD(s,l):null}(l,s):-2===o?function mX(s,l,o){return o===C0?UA(l,s):o===VE?CD(l,s):o===Bx?J5(l,s):void 0}(s,l,h):OT(s,s[Jy],o,l)}function nB(s,l,o,h){const y=l[Jx].queries[h];if(null===y.matches){const _=s.data,I=o.matches,V=[];for(let $=0;$<I.length;$+=2){const _n=I[$];V.push(_n<0?null:pX(l,_[_n],I[$+1],o.metadata.read))}y.matches=V}return y.matches}function yR(s,l,o,h){const y=s.queries.getByIndex(o),_=y.matches;if(null!==_){const I=nB(s,l,y,o);for(let V=0;V<_.length;V+=2){const $=_[V];if($>0)h.push(I[V/2]);else{const _n=_[V+1],ha=l[-$];for(let Ba=S1;Ba<ha.length;Ba++){const _d=ha[Ba];_d[jS]===_d[F0]&&yR(_d[Jy],_d,_n,h)}if(null!==ha[EA]){const Ba=ha[EA];for(let _d=0;_d<Ba.length;_d++){const mg=Ba[_d];yR(mg[Jy],mg,_n,h)}}}}}return h}function s1(s){const l=Ty(),o=J_(),h=SL();w2(h+1);const y=oB(o,h);if(s.dirty&&function cG(s){return 4==(4&s[S_])}(l)===(2==(2&y.metadata.flags))){if(null===y.matches)s.reset([]);else{const _=y.crossesNgTemplate?yR(o,l,h,[]):nB(o,l,y,h);s.reset(_,$7),s.notifyOnChanges()}return!0}return!1}function fE(s,l,o){const h=J_();h.firstCreatePass&&(iB(h,new eB(s,l,o),-1),2==(2&l)&&(h.staticViewQueries=!0)),rB(h,Ty(),l)}function pE(s,l,o,h){const y=J_();if(y.firstCreatePass){const _=y1();iB(y,new eB(l,o,h),_.index),function yX(s,l){const o=s.contentQueries||(s.contentQueries=[]);l!==(o.length?o[o.length-1]:-1)&&o.push(s.queries.length-1,l)}(y,s),2==(2&o)&&(y.staticContentQueries=!0)}rB(y,Ty(),o)}function a1(){return function gX(s,l){return s[Jx].queries[l].queryList}(Ty(),SL())}function rB(s,l,o){const h=new uR(4==(4&o));(function p$(s,l,o,h){const y=L3(l);y.push(o),s.firstCreatePass&&F3(s).push(h,y.length-1)})(s,l,h,h.destroy),null===l[Jx]&&(l[Jx]=new pR),l[Jx].queries.push(new fR(h))}function iB(s,l,o){null===s.queries&&(s.queries=new mR),s.queries.track(new gR(l,o))}function oB(s,l){return s.queries.getByIndex(l)}function sB(s,l){return CD(s,l)}const ER=new Fy("Application Initializer");let TR=(()=>{class s{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((o,h)=>{this.resolve=o,this.reject=h}),this.appInits=Ry(ER,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const o=[];for(const y of this.appInits){const _=y();if(yC(_))o.push(_);else if(pF(_)){const I=new Promise((V,$)=>{_.subscribe({complete:V,error:$})});o.push(I)}}const h=()=>{this.done=!0,this.resolve()};Promise.all(o).then(()=>{h()}).catch(y=>{this.reject(y)}),0===o.length&&h(),this.initialized=!0}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=ry({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),EB=(()=>{class s{log(o){console.log(o)}warn(o){console.warn(o)}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=ry({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const mE=new Fy("LocaleId",{providedIn:"root",factory:()=>Ry(mE,uy.Optional|uy.SkipSelf)||function jX(){return typeof $localize<"u"&&$localize.locale||eS}()});let DD=(()=>{class s{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new b0(!1)}add(){this.hasPendingTasks.next(!0);const o=this.taskId++;return this.pendingTasks.add(o),o}remove(o){this.pendingTasks.delete(o),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=ry({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();class VX{constructor(l,o){this.ngModuleFactory=l,this.componentFactories=o}}let TB=(()=>{class s{compileModuleSync(o){return new sR(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const h=this.compileModuleSync(o),_=LE(rx(o).declarations).reduce((I,V)=>{const $=f0(V);return $&&I.push(new dC($)),I},[]);return new VX(h,_)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=ry({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function CB(...s){}class H_{constructor({enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new B0(!1),this.onMicrotaskEmpty=new B0(!1),this.onStable=new B0(!1),this.onError=new B0(!1),typeof Zone>"u")throw new py(908,!1);Zone.assertZonePatched();const y=this;y._nesting=0,y._outer=y._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(y._inner=y._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(y._inner=y._inner.fork(Zone.longStackTraceZoneSpec)),y.shouldCoalesceEventChangeDetection=!h&&o,y.shouldCoalesceRunChangeDetection=h,y.lastRequestAnimationFrameId=-1,y.nativeRequestAnimationFrame=function HX(){let s=Uy.requestAnimationFrame,l=Uy.cancelAnimationFrame;if(typeof Zone<"u"&&s&&l){const o=s[Zone.__symbol__("OriginalDelegate")];o&&(s=o);const h=l[Zone.__symbol__("OriginalDelegate")];h&&(l=h)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function qX(s){const l=()=>{!function $X(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Uy,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,SR(s),s.isCheckStableRunning=!0,AR(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),SR(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,h,y,_,I,V)=>{try{return MB(s),o.invokeTask(y,_,I,V)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||s.shouldCoalesceRunChangeDetection)&&l(),DB(s)}},onInvoke:(o,h,y,_,I,V,$)=>{try{return MB(s),o.invoke(y,_,I,V,$)}finally{s.shouldCoalesceRunChangeDetection&&l(),DB(s)}},onHasTask:(o,h,y,_)=>{o.hasTask(y,_),h===y&&("microTask"==_.change?(s._hasPendingMicrotasks=_.microTask,SR(s),AR(s)):"macroTask"==_.change&&(s.hasPendingMacrotasks=_.macroTask))},onHandleError:(o,h,y,_)=>(o.handleError(y,_),s.runOutsideAngular(()=>s.onError.emit(_)),!1)})}(y)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!H_.isInAngularZone())throw new py(909,!1)}static assertNotInAngularZone(){if(H_.isInAngularZone())throw new py(909,!1)}run(l,o,h){return this._inner.run(l,o,h)}runTask(l,o,h,y){const _=this._inner,I=_.scheduleEventTask("NgZoneEvent: "+y,l,GX,CB,CB);try{return _.runTask(I,o,h)}finally{_.cancelTask(I)}}runGuarded(l,o,h){return this._inner.runGuarded(l,o,h)}runOutsideAngular(l){return this._outer.run(l)}}const GX={};function AR(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function SR(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function MB(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function DB(s){s._nesting--,AR(s)}class WX{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new B0,this.onMicrotaskEmpty=new B0,this.onStable=new B0,this.onError=new B0}run(l,o,h){return l.apply(o,h)}runGuarded(l,o,h){return l.apply(o,h)}runOutsideAngular(l){return l()}runTask(l,o,h,y){return l.apply(o,h)}}const IB=new Fy("",{providedIn:"root",factory:kB});function kB(){const s=Ry(H_);let l=!0;return q1(new qy(y=>{l=s.isStable&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks,s.runOutsideAngular(()=>{y.next(l),y.complete()})}),new qy(y=>{let _;s.runOutsideAngular(()=>{_=s.onStable.subscribe(()=>{H_.assertNotInAngularZone(),queueMicrotask(()=>{!l&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks&&(l=!0,y.next(!0))})})});const I=s.onUnstable.subscribe(()=>{H_.assertInAngularZone(),l&&(l=!1,s.runOutsideAngular(()=>{y.next(!1)}))});return()=>{_.unsubscribe(),I.unsubscribe()}}).pipe(w1()))}const OB=new Fy(""),ID=new Fy("");let DR,CR=(()=>{class s{constructor(o,h,y){this._ngZone=o,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,DR||(function YX(s){DR=s}(y),y.addToWindow(h)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{H_.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(o)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,h,y){let _=-1;h&&h>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(I=>I.timeoutId!==_),o(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:o,timeoutId:_,updateCb:y})}whenStable(o,h,y){if(y&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,h,y),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,h,y){return[]}}return s.\u0275fac=function(o){return new(o||s)(Py(H_),Py(MR),Py(ID))},s.\u0275prov=ry({token:s,factory:s.\u0275fac}),s})(),MR=(()=>{class s{constructor(){this._applications=new Map}registerApplication(o,h){this._applications.set(o,h)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,h=!0){return DR?.findTestabilityInTree(this,o,h)??null}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=ry({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),cT=null;const RB=new Fy("AllowMultipleToken"),IR=new Fy("PlatformDestroyListeners"),kR=new Fy("appBootstrapListener");class NB{constructor(l,o){this.name=l,this.token=o}}function FB(s,l,o=[]){const h=`Platform: ${l}`,y=new Fy(h);return(_=[])=>{let I=OR();if(!I||I.injector.get(RB,!1)){const V=[...o,..._,{provide:y,useValue:!0}];s?s(V):function ZX(s){if(cT&&!cT.get(RB,!1))throw new py(400,!1);(function PB(){!function QH(s){aL=s}(()=>{throw new py(600,!1)})})(),cT=s;const l=s.get(BB);(function LB(s){s.get(t3,null)?.forEach(o=>o())})(s)}(function jB(s=[],l){return Ax.create({name:l,providers:[{provide:oO,useValue:"platform"},{provide:IR,useValue:new Set([()=>cT=null])},...s]})}(V,h))}return function QX(s){const l=OR();if(!l)throw new py(401,!1);return l}()}}function OR(){return cT?.get(BB)??null}let BB=(()=>{class s{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,h){const y=function tZ(s="zone.js",l){return"noop"===s?new WX:"zone.js"===s?new H_(l):s}(h?.ngZone,function VB(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:s?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:s?.runCoalescing??!1}}({eventCoalescing:h?.ngZoneEventCoalescing,runCoalescing:h?.ngZoneRunCoalescing}));return y.run(()=>{const _=function AK(s,l,o){return new oR(s,l,o)}(o.moduleType,this.injector,function $B(s){return[{provide:H_,useFactory:s},{provide:nC,multi:!0,useFactory:()=>{const l=Ry(nZ,{optional:!0});return()=>l.initialize()}},{provide:GB,useFactory:eZ},{provide:IB,useFactory:kB}]}(()=>y)),I=_.injector.get(aE,null);return y.runOutsideAngular(()=>{const V=y.onError.subscribe({next:$=>{I.handleError($)}});_.onDestroy(()=>{kD(this._modules,_),V.unsubscribe()})}),function UB(s,l,o){try{const h=o();return yC(h)?h.catch(y=>{throw l.runOutsideAngular(()=>s.handleError(y)),y}):h}catch(h){throw l.runOutsideAngular(()=>s.handleError(h)),h}}(I,y,()=>{const V=_.injector.get(TR);return V.runInitializers(),V.donePromise.then(()=>(function a5(s){bc(s,"Expected localeId to be defined"),"string"==typeof s&&(s5=s.toLowerCase().replace(/_/g,"-"))}(_.injector.get(mE,eS)||eS),this._moduleDoBootstrap(_),_))})})}bootstrapModule(o,h=[]){const y=zB({},h);return function KX(s,l,o){const h=new sR(o);return Promise.resolve(h)}(0,0,o).then(_=>this.bootstrapModuleFactory(_,y))}_moduleDoBootstrap(o){const h=o.injector.get(UT);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(y=>h.bootstrap(y));else{if(!o.instance.ngDoBootstrap)throw new py(-403,!1);o.instance.ngDoBootstrap(h)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new py(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const o=this._injector.get(IR,null);o&&(o.forEach(h=>h()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(o){return new(o||s)(Py(Ax))},s.\u0275prov=ry({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function zB(s,l){return Array.isArray(l)?l.reduce(zB,s):{...s,...l}}let UT=(()=>{class s{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ry(GB),this.zoneIsStable=Ry(IB),this.componentTypes=[],this.components=[],this.isStable=Ry(DD).hasPendingTasks.pipe(D0(o=>o?s_(!1):this.zoneIsStable),iT(),w1()),this._injector=Ry(oE)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(o,h){const y=o instanceof a3;if(!this._injector.get(TR).done)throw!y&&function vA(s){const l=f0(s)||T1(s)||Y1(s);return null!==l&&l.standalone}(o),new py(405,!1);let I;I=y?o:this._injector.get(aD).resolveComponentFactory(o),this.componentTypes.push(I.componentType);const V=function XX(s){return s.isBoundToModule}(I)?void 0:this._injector.get(nS),_n=I.create(Ax.NULL,[],h||I.selector,V),ha=_n.location.nativeElement,Ba=_n.injector.get(OB,null);return Ba?.registerApplication(ha),_n.onDestroy(()=>{this.detachView(_n.hostView),kD(this.components,_n),Ba?.unregisterApplication(ha)}),this._loadComponent(_n),_n}tick(){if(this._runningTick)throw new py(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this.internalErrorHandler(o)}finally{this._runningTick=!1}}attachView(o){const h=o;this._views.push(h),h.attachToAppRef(this)}detachView(o){const h=o;kD(this._views,h),h.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o);const h=this._injector.get(kR,[]);h.push(...this._bootstrapListeners),h.forEach(y=>y(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>kD(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new py(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=ry({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function kD(s,l){const o=s.indexOf(l);o>-1&&s.splice(o,1)}const GB=new Fy("",{providedIn:"root",factory:()=>Ry(aE).handleError.bind(void 0)});function eZ(){const s=Ry(H_),l=Ry(aE);return o=>s.runOutsideAngular(()=>l.handleError(o))}let nZ=(()=>{class s{constructor(){this.zone=Ry(H_),this.applicationRef=Ry(UT)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=ry({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();let MC=(()=>{class s{}return s.__NG_ELEMENT_ID__=iZ,s})();function iZ(s){return function oZ(s,l,o){if(DT(s)&&!o){const h=ox(s.index,l);return new uC(h,h)}return 47&s.type?new uC(l[X0],l):null}(y1(),Ty(),16==(16&s))}class KB{constructor(){}supports(l){return mD(l)}create(l){return new dZ(l)}}const uZ=(s,l)=>l;class dZ{constructor(l){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=l||uZ}forEachItem(l){let o;for(o=this._itHead;null!==o;o=o._next)l(o)}forEachOperation(l){let o=this._itHead,h=this._removalsHead,y=0,_=null;for(;o||h;){const I=!h||o&&o.currentIndex<ZB(h,y,_)?o:h,V=ZB(I,y,_),$=I.currentIndex;if(I===h)y--,h=h._nextRemoved;else if(o=o._next,null==I.previousIndex)y++;else{_||(_=[]);const _n=V-y,ha=$-y;if(_n!=ha){for(let _d=0;_d<_n;_d++){const mg=_d<_.length?_[_d]:_[_d]=0,iy=mg+_d;ha<=iy&&iy<_n&&(_[_d]=mg+1)}_[I.previousIndex]=ha-_n}}V!==$&&l(I,V,$)}}forEachPreviousItem(l){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)l(o)}forEachAddedItem(l){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)l(o)}forEachMovedItem(l){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)l(o)}forEachRemovedItem(l){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)l(o)}forEachIdentityChange(l){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)l(o)}diff(l){if(null==l&&(l=[]),!mD(l))throw new py(900,!1);return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let y,_,I,o=this._itHead,h=!1;if(Array.isArray(l)){this.length=l.length;for(let V=0;V<this.length;V++)_=l[V],I=this._trackByFn(V,_),null!==o&&Object.is(o.trackById,I)?(h&&(o=this._verifyReinsertion(o,_,I,V)),Object.is(o.item,_)||this._addIdentityChange(o,_)):(o=this._mismatch(o,_,I,V),h=!0),o=o._next}else y=0,function sW(s,l){if(Array.isArray(s))for(let o=0;o<s.length;o++)l(s[o]);else{const o=s[Symbol.iterator]();let h;for(;!(h=o.next()).done;)l(h.value)}}(l,V=>{I=this._trackByFn(y,V),null!==o&&Object.is(o.trackById,I)?(h&&(o=this._verifyReinsertion(o,V,I,y)),Object.is(o.item,V)||this._addIdentityChange(o,V)):(o=this._mismatch(o,V,I,y),h=!0),o=o._next,y++}),this.length=y;return this._truncate(o),this.collection=l,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(l,o,h,y){let _;return null===l?_=this._itTail:(_=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(l.item,o)||this._addIdentityChange(l,o),this._reinsertAfter(l,_,y)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(h,y))?(Object.is(l.item,o)||this._addIdentityChange(l,o),this._moveAfter(l,_,y)):l=this._addAfter(new hZ(o,h),_,y),l}_verifyReinsertion(l,o,h,y){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==_?l=this._reinsertAfter(_,l._prev,y):l.currentIndex!=y&&(l.currentIndex=y,this._addToMoves(l,y)),l}_truncate(l){for(;null!==l;){const o=l._next;this._addToRemovals(this._unlink(l)),l=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(l,o,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);const y=l._prevRemoved,_=l._nextRemoved;return null===y?this._removalsHead=_:y._nextRemoved=_,null===_?this._removalsTail=y:_._prevRemoved=y,this._insertAfter(l,o,h),this._addToMoves(l,h),l}_moveAfter(l,o,h){return this._unlink(l),this._insertAfter(l,o,h),this._addToMoves(l,h),l}_addAfter(l,o,h){return this._insertAfter(l,o,h),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}_insertAfter(l,o,h){const y=null===o?this._itHead:o._next;return l._next=y,l._prev=o,null===y?this._itTail=l:y._prev=l,null===o?this._itHead=l:o._next=l,null===this._linkedRecords&&(this._linkedRecords=new XB),this._linkedRecords.put(l),l.currentIndex=h,l}_remove(l){return this._addToRemovals(this._unlink(l))}_unlink(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);const o=l._prev,h=l._next;return null===o?this._itHead=h:o._next=h,null===h?this._itTail=o:h._prev=o,l}_addToMoves(l,o){return l.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}_addToRemovals(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new XB),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}_addIdentityChange(l,o){return l.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}class hZ{constructor(l,o){this.item=l,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class fZ{constructor(){this._head=null,this._tail=null}add(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}get(l,o){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===o||o<=h.currentIndex)&&Object.is(h.trackById,l))return h;return null}remove(l){const o=l._prevDup,h=l._nextDup;return null===o?this._head=h:o._nextDup=h,null===h?this._tail=o:h._prevDup=o,null===this._head}}class XB{constructor(){this.map=new Map}put(l){const o=l.trackById;let h=this.map.get(o);h||(h=new fZ,this.map.set(o,h)),h.add(l)}get(l,o){const y=this.map.get(l);return y?y.get(l,o):null}remove(l){const o=l.trackById;return this.map.get(o).remove(l)&&this.map.delete(o),l}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ZB(s,l,o){const h=s.previousIndex;if(null===h)return h;let y=0;return o&&h<o.length&&(y=o[h]),h+l+y}function QB(){return new PD([new KB])}let PD=(()=>{class s{constructor(o){this.factories=o}static create(o,h){if(null!=h){const y=h.factories.slice();o=o.concat(y)}return new s(o)}static extend(o){return{provide:s,useFactory:h=>s.create(o,h||QB()),deps:[[s,new WS,new RT]]}}find(o){const h=this.factories.find(y=>y.supports(o));if(null!=h)return h;throw new py(901,!1)}}return s.\u0275prov=ry({token:s,providedIn:"root",factory:QB}),s})();const vZ=FB(null,"core",[]);let _Z=(()=>{class s{constructor(o){}}return s.\u0275fac=function(o){return new(o||s)(Py(UT))},s.\u0275mod=L0({type:s}),s.\u0275inj=xy({}),s})();function UE(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function a6(s,l=NaN){return isNaN(parseFloat(s))||isNaN(Number(s))?l:Number(s)}let BR=null;function uT(){return BR}class kZ{}const m0=new Fy("DocumentToken");let VR=(()=>{class s{historyGo(o){throw new Error("Not implemented")}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=ry({token:s,factory:function(){return Ry(RZ)},providedIn:"platform"}),s})();const OZ=new Fy("Location Initialized");let RZ=(()=>{class s extends VR{constructor(){super(),this._doc=Ry(m0),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return uT().getBaseHref(this._doc)}onPopState(o){const h=uT().getGlobalEventTarget(this._doc,"window");return h.addEventListener("popstate",o,!1),()=>h.removeEventListener("popstate",o)}onHashChange(o){const h=uT().getGlobalEventTarget(this._doc,"window");return h.addEventListener("hashchange",o,!1),()=>h.removeEventListener("hashchange",o)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(o){this._location.pathname=o}pushState(o,h,y){this._history.pushState(o,h,y)}replaceState(o,h,y){this._history.replaceState(o,h,y)}forward(){this._history.forward()}back(){this._history.back()}historyGo(o=0){this._history.go(o)}getState(){return this._history.state}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=ry({token:s,factory:function(){return new s},providedIn:"platform"}),s})();function UR(s,l){if(0==s.length)return l;if(0==l.length)return s;let o=0;return s.endsWith("/")&&o++,l.startsWith("/")&&o++,2==o?s+l.substring(1):1==o?s+l:s+"/"+l}function l6(s){const l=s.match(/#|\?|$/),o=l&&l.index||s.length;return s.slice(0,o-("/"===s[o-1]?1:0))+s.slice(o)}function zE(s){return s&&"?"!==s[0]?"?"+s:s}let HT=(()=>{class s{historyGo(o){throw new Error("Not implemented")}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=ry({token:s,factory:function(){return Ry(u6)},providedIn:"root"}),s})();const c6=new Fy("appBaseHref");let u6=(()=>{class s extends HT{constructor(o,h){super(),this._platformLocation=o,this._removeListenerFns=[],this._baseHref=h??this._platformLocation.getBaseHrefFromDOM()??Ry(m0).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(o){this._removeListenerFns.push(this._platformLocation.onPopState(o),this._platformLocation.onHashChange(o))}getBaseHref(){return this._baseHref}prepareExternalUrl(o){return UR(this._baseHref,o)}path(o=!1){const h=this._platformLocation.pathname+zE(this._platformLocation.search),y=this._platformLocation.hash;return y&&o?`${h}${y}`:h}pushState(o,h,y,_){const I=this.prepareExternalUrl(y+zE(_));this._platformLocation.pushState(o,h,I)}replaceState(o,h,y,_){const I=this.prepareExternalUrl(y+zE(_));this._platformLocation.replaceState(o,h,I)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(o=0){this._platformLocation.historyGo?.(o)}}return s.\u0275fac=function(o){return new(o||s)(Py(VR),Py(c6,8))},s.\u0275prov=ry({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),PZ=(()=>{class s extends HT{constructor(o,h){super(),this._platformLocation=o,this._baseHref="",this._removeListenerFns=[],null!=h&&(this._baseHref=h)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(o){this._removeListenerFns.push(this._platformLocation.onPopState(o),this._platformLocation.onHashChange(o))}getBaseHref(){return this._baseHref}path(o=!1){let h=this._platformLocation.hash;return null==h&&(h="#"),h.length>0?h.substring(1):h}prepareExternalUrl(o){const h=UR(this._baseHref,o);return h.length>0?"#"+h:h}pushState(o,h,y,_){let I=this.prepareExternalUrl(y+zE(_));0==I.length&&(I=this._platformLocation.pathname),this._platformLocation.pushState(o,h,I)}replaceState(o,h,y,_){let I=this.prepareExternalUrl(y+zE(_));0==I.length&&(I=this._platformLocation.pathname),this._platformLocation.replaceState(o,h,I)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(o=0){this._platformLocation.historyGo?.(o)}}return s.\u0275fac=function(o){return new(o||s)(Py(VR),Py(c6,8))},s.\u0275prov=ry({token:s,factory:s.\u0275fac}),s})(),zR=(()=>{class s{constructor(o){this._subject=new B0,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=o;const h=this._locationStrategy.getBaseHref();this._basePath=function FZ(s){if(new RegExp("^(https?:)?//").test(s)){const[,o]=s.split(/\/\/[^\/]+/);return o}return s}(l6(d6(h))),this._locationStrategy.onPopState(y=>{this._subject.emit({url:this.path(!0),pop:!0,state:y.state,type:y.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(o=!1){return this.normalize(this._locationStrategy.path(o))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(o,h=""){return this.path()==this.normalize(o+zE(h))}normalize(o){return s.stripTrailingSlash(function LZ(s,l){if(!s||!l.startsWith(s))return l;const o=l.substring(s.length);return""===o||["/",";","?","#"].includes(o[0])?o:l}(this._basePath,d6(o)))}prepareExternalUrl(o){return o&&"/"!==o[0]&&(o="/"+o),this._locationStrategy.prepareExternalUrl(o)}go(o,h="",y=null){this._locationStrategy.pushState(y,"",o,h),this._notifyUrlChangeListeners(this.prepareExternalUrl(o+zE(h)),y)}replaceState(o,h="",y=null){this._locationStrategy.replaceState(y,"",o,h),this._notifyUrlChangeListeners(this.prepareExternalUrl(o+zE(h)),y)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(o=0){this._locationStrategy.historyGo?.(o)}onUrlChange(o){return this._urlChangeListeners.push(o),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(h=>{this._notifyUrlChangeListeners(h.url,h.state)})),()=>{const h=this._urlChangeListeners.indexOf(o);this._urlChangeListeners.splice(h,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(o="",h){this._urlChangeListeners.forEach(y=>y(o,h))}subscribe(o,h,y){return this._subject.subscribe({next:o,error:h,complete:y})}}return s.normalizeQueryParams=zE,s.joinWithSlash=UR,s.stripTrailingSlash=l6,s.\u0275fac=function(o){return new(o||s)(Py(HT))},s.\u0275prov=ry({token:s,factory:function(){return function NZ(){return new zR(Py(HT))}()},providedIn:"root"}),s})();function d6(s){return s.replace(/\/index.html$/,"")}function b6(s,l){l=encodeURIComponent(l);for(const o of s.split(";")){const h=o.indexOf("="),[y,_]=-1==h?[o,""]:[o.slice(0,h),o.slice(h+1)];if(y.trim()===l)return decodeURIComponent(_)}return null}class xJ{constructor(l,o,h,y){this.$implicit=l,this.ngForOf=o,this.index=h,this.count=y}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let E6=(()=>{class s{set ngForOf(o){this._ngForOf=o,this._ngForOfDirty=!0}set ngForTrackBy(o){this._trackByFn=o}get ngForTrackBy(){return this._trackByFn}constructor(o,h,y){this._viewContainer=o,this._template=h,this._differs=y,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(o){o&&(this._template=o)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const o=this._ngForOf;!this._differ&&o&&(this._differ=this._differs.find(o).create(this.ngForTrackBy))}if(this._differ){const o=this._differ.diff(this._ngForOf);o&&this._applyChanges(o)}}_applyChanges(o){const h=this._viewContainer;o.forEachOperation((y,_,I)=>{if(null==y.previousIndex)h.createEmbeddedView(this._template,new xJ(y.item,this._ngForOf,-1,-1),null===I?void 0:I);else if(null==I)h.remove(null===_?void 0:_);else if(null!==_){const V=h.get(_);h.move(V,I),T6(V,y)}});for(let y=0,_=h.length;y<_;y++){const V=h.get(y).context;V.index=y,V.count=_,V.ngForOf=this._ngForOf}o.forEachIdentityChange(y=>{T6(h.get(y.currentIndex),y)})}static ngTemplateContextGuard(o,h){return!0}}return s.\u0275fac=function(o){return new(o||s)(gy(Bx),gy(VE),gy(PD))},s.\u0275dir=Zy({type:s,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),s})();function T6(s,l){s.context.$implicit=l.item}let $D=(()=>{class s{constructor(o,h){this._viewContainer=o,this._context=new EJ,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=h}set ngIf(o){this._context.$implicit=this._context.ngIf=o,this._updateView()}set ngIfThen(o){A6("ngIfThen",o),this._thenTemplateRef=o,this._thenViewRef=null,this._updateView()}set ngIfElse(o){A6("ngIfElse",o),this._elseTemplateRef=o,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(o,h){return!0}}return s.\u0275fac=function(o){return new(o||s)(gy(Bx),gy(VE))},s.\u0275dir=Zy({type:s,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),s})();class EJ{constructor(){this.$implicit=null,this.ngIf=null}}function A6(s,l){if(l&&!l.createEmbeddedView)throw new Error(`${s} must be a TemplateRef, but received '${G0(l)}'.`)}class QR{constructor(l,o){this._viewContainerRef=l,this._templateRef=o,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(l){l&&!this._created?this.create():!l&&this._created&&this.destroy()}}let qD=(()=>{class s{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(o){this._ngSwitch=o,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(o){this._defaultViews.push(o)}_matchCase(o){const h=o==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||h,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),h}_updateDefaultCases(o){if(this._defaultViews.length>0&&o!==this._defaultUsed){this._defaultUsed=o;for(const h of this._defaultViews)h.enforceState(o)}}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275dir=Zy({type:s,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),s})(),S6=(()=>{class s{constructor(o,h,y){this.ngSwitch=y,y._addCase(),this._view=new QR(o,h)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return s.\u0275fac=function(o){return new(o||s)(gy(Bx),gy(VE),gy(qD,9))},s.\u0275dir=Zy({type:s,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),s})(),M6=(()=>{class s{constructor(o){this._viewContainerRef=o,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(o){if(o.ngTemplateOutlet||o.ngTemplateOutletInjector){const h=this._viewContainerRef;if(this._viewRef&&h.remove(h.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:y,ngTemplateOutletContext:_,ngTemplateOutletInjector:I}=this;this._viewRef=h.createEmbeddedView(y,_,I?{injector:I}:void 0)}else this._viewRef=null}else this._viewRef&&o.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return s.\u0275fac=function(o){return new(o||s)(gy(Bx))},s.\u0275dir=Zy({type:s,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[N1]}),s})();let D6=(()=>{class s{transform(o){if(null==o)return null;if("string"!=typeof o)throw function zx(s,l){return new py(2100,!1)}();return o.toUpperCase()}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275pipe=W1({name:"uppercase",type:s,pure:!0,standalone:!0}),s})(),GE=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=L0({type:s}),s.\u0275inj=xy({}),s})();const k6="browser";function nP(s){return"server"===s}let JJ=(()=>{class s{}return s.\u0275prov=ry({token:s,providedIn:"root",factory:()=>new QJ(Py(m0),window)}),s})();class QJ{constructor(l,o){this.document=l,this.window=o,this.offset=()=>[0,0]}setOffset(l){this.offset=Array.isArray(l)?()=>l:l}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(l){this.supportsScrolling()&&this.window.scrollTo(l[0],l[1])}scrollToAnchor(l){if(!this.supportsScrolling())return;const o=function tQ(s,l){const o=s.getElementById(l)||s.getElementsByName(l)[0];if(o)return o;if("function"==typeof s.createTreeWalker&&s.body&&"function"==typeof s.body.attachShadow){const h=s.createTreeWalker(s.body,NodeFilter.SHOW_ELEMENT);let y=h.currentNode;for(;y;){const _=y.shadowRoot;if(_){const I=_.getElementById(l)||_.querySelector(`[name="${l}"]`);if(I)return I}y=h.nextNode()}}return null}(this.document,l);o&&(this.scrollToElement(o),o.focus())}setHistoryScrollRestoration(l){if(this.supportScrollRestoration()){const o=this.window.history;o&&o.scrollRestoration&&(o.scrollRestoration=l)}}scrollToElement(l){const o=l.getBoundingClientRect(),h=o.left+this.window.pageXOffset,y=o.top+this.window.pageYOffset,_=this.offset();this.window.scrollTo(h-_[0],y-_[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const l=O6(this.window.history)||O6(Object.getPrototypeOf(this.window.history));return!(!l||!l.writable&&!l.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function O6(s){return Object.getOwnPropertyDescriptor(s,"scrollRestoration")}class R6{}const OC=s=>s.src,N6=new Fy("ImageLoader",{providedIn:"root",factory:()=>OC}),vQ=new Fy("NG_OPTIMIZED_PRELOADED_IMAGES",{providedIn:"root",factory:()=>new Set});let _Q=(()=>{class s{constructor(){this.preloadedImages=Ry(vQ),this.document=Ry(m0)}createPreloadLinkTag(o,h,y,_){if(this.preloadedImages.has(h))return;this.preloadedImages.add(h);const I=o.createElement("link");o.setAttribute(I,"as","image"),o.setAttribute(I,"href",h),o.setAttribute(I,"rel","preload"),o.setAttribute(I,"fetchpriority","high"),_&&o.setAttribute(I,"imageSizes",_),y&&o.setAttribute(I,"imageSrcset",y),o.appendChild(this.document.head,I)}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=ry({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const B6=/^((\s*\d+w\s*(,|$)){1,})$/,wQ=[1,2],z6={breakpoints:[16,32,48,64,96,128,256,384,640,750,828,1080,1200,1920,2048,3840]},SQ=new Fy("ImageConfig",{providedIn:"root",factory:()=>z6});let H6=(()=>{class s{constructor(){this.imageLoader=Ry(N6),this.config=function CQ(s){let l={};return s.breakpoints&&(l.breakpoints=s.breakpoints.sort((o,h)=>o-h)),Object.assign({},z6,s,l)}(Ry(SQ)),this.renderer=Ry(sE),this.imgElement=Ry(C0).nativeElement,this.injector=Ry(Ax),this.isServer=nP(Ry(NE)),this.preloadLinkCreator=Ry(_Q),this.lcpObserver=null,this._renderedSrc=null,this.priority=!1,this.disableOptimizedSrcset=!1,this.fill=!1}ngOnInit(){this.setHostAttributes()}setHostAttributes(){this.fill?this.sizes||(this.sizes="100vw"):(this.setHostAttribute("width",this.width.toString()),this.setHostAttribute("height",this.height.toString())),this.setHostAttribute("loading",this.getLoadingBehavior()),this.setHostAttribute("fetchpriority",this.getFetchPriority()),this.setHostAttribute("ng-img","true");const o=this.getRewrittenSrc();let h;this.setHostAttribute("src",o),this.sizes&&this.setHostAttribute("sizes",this.sizes),this.ngSrcset?h=this.getRewrittenSrcset():this.shouldGenerateAutomaticSrcset()&&(h=this.getAutomaticSrcset()),h&&this.setHostAttribute("srcset",h),this.isServer&&this.priority&&this.preloadLinkCreator.createPreloadLinkTag(this.renderer,o,h,this.sizes)}ngOnChanges(o){}callImageLoader(o){let h=o;return this.loaderParams&&(h.loaderParams=this.loaderParams),this.imageLoader(h)}getLoadingBehavior(){return this.priority||void 0===this.loading?this.priority?"eager":"lazy":this.loading}getFetchPriority(){return this.priority?"high":"auto"}getRewrittenSrc(){return this._renderedSrc||(this._renderedSrc=this.callImageLoader({src:this.ngSrc})),this._renderedSrc}getRewrittenSrcset(){const o=B6.test(this.ngSrcset);return this.ngSrcset.split(",").filter(y=>""!==y).map(y=>{y=y.trim();const _=o?parseFloat(y):parseFloat(y)*this.width;return`${this.callImageLoader({src:this.ngSrc,width:_})} ${y}`}).join(", ")}getAutomaticSrcset(){return this.sizes?this.getResponsiveSrcset():this.getFixedSrcset()}getResponsiveSrcset(){const{breakpoints:o}=this.config;let h=o;return"100vw"===this.sizes?.trim()&&(h=o.filter(_=>_>=640)),h.map(_=>`${this.callImageLoader({src:this.ngSrc,width:_})} ${_}w`).join(", ")}getFixedSrcset(){return wQ.map(h=>`${this.callImageLoader({src:this.ngSrc,width:this.width*h})} ${h}x`).join(", ")}shouldGenerateAutomaticSrcset(){return!this.disableOptimizedSrcset&&!this.srcset&&this.imageLoader!==OC&&!(this.width>1920||this.height>1080)}ngOnDestroy(){}setHostAttribute(o,h){this.renderer.setAttribute(this.imgElement,o,h)}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275dir=Zy({type:s,selectors:[["img","ngSrc",""]],hostVars:8,hostBindings:function(o,h){2&o&&XO("position",h.fill?"absolute":null)("width",h.fill?"100%":null)("height",h.fill?"100%":null)("inset",h.fill?"0px":null)},inputs:{ngSrc:"ngSrc",ngSrcset:"ngSrcset",sizes:"sizes",width:["width","width",a6],height:["height","height",a6],loading:"loading",priority:["priority","priority",UE],loaderParams:"loaderParams",disableOptimizedSrcset:["disableOptimizedSrcset","disableOptimizedSrcset",UE],fill:["fill","fill",UE],src:"src",srcset:"srcset"},standalone:!0,features:[NO,N1]}),s})();class kQ extends kZ{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class oP extends kQ{static makeCurrent(){!function IZ(s){BR||(BR=s)}(new oP)}onAndCancel(l,o,h){return l.addEventListener(o,h),()=>{l.removeEventListener(o,h)}}dispatchEvent(l,o){l.dispatchEvent(o)}remove(l){l.parentNode&&l.parentNode.removeChild(l)}createElement(l,o){return(o=o||this.getDefaultDocument()).createElement(l)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(l){return l.nodeType===Node.ELEMENT_NODE}isShadowRoot(l){return l instanceof DocumentFragment}getGlobalEventTarget(l,o){return"window"===o?window:"document"===o?l:"body"===o?l.body:null}getBaseHref(l){const o=function OQ(){return PC=PC||document.querySelector("base"),PC?PC.getAttribute("href"):null}();return null==o?null:function RQ(s){KD=KD||document.createElement("a"),KD.setAttribute("href",s);const l=KD.pathname;return"/"===l.charAt(0)?l:`/${l}`}(o)}resetBaseElement(){PC=null}getUserAgent(){return window.navigator.userAgent}getCookie(l){return b6(document.cookie,l)}}let KD,PC=null,NQ=(()=>{class s{build(){return new XMLHttpRequest}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=ry({token:s,factory:s.\u0275fac}),s})();const sP=new Fy("EventManagerPlugins");let G6=(()=>{class s{constructor(o,h){this._zone=h,this._eventNameToPlugin=new Map,o.forEach(y=>{y.manager=this}),this._plugins=o.slice().reverse()}addEventListener(o,h,y){return this._findPluginFor(h).addEventListener(o,h,y)}getZone(){return this._zone}_findPluginFor(o){let h=this._eventNameToPlugin.get(o);if(h)return h;if(h=this._plugins.find(_=>_.supports(o)),!h)throw new py(5101,!1);return this._eventNameToPlugin.set(o,h),h}}return s.\u0275fac=function(o){return new(o||s)(Py(sP),Py(H_))},s.\u0275prov=ry({token:s,factory:s.\u0275fac}),s})();class $6{constructor(l){this._doc=l}}const aP="ng-app-id";let q6=(()=>{class s{constructor(o,h,y,_={}){this.doc=o,this.appId=h,this.nonce=y,this.platformId=_,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=nP(_),this.resetHostNodes()}addStyles(o){for(const h of o)1===this.changeUsageCount(h,1)&&this.onStyleAdded(h)}removeStyles(o){for(const h of o)this.changeUsageCount(h,-1)<=0&&this.onStyleRemoved(h)}ngOnDestroy(){const o=this.styleNodesInDOM;o&&(o.forEach(h=>h.remove()),o.clear());for(const h of this.getAllStyles())this.onStyleRemoved(h);this.resetHostNodes()}addHost(o){this.hostNodes.add(o);for(const h of this.getAllStyles())this.addStyleToHost(o,h)}removeHost(o){this.hostNodes.delete(o)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(o){for(const h of this.hostNodes)this.addStyleToHost(h,o)}onStyleRemoved(o){const h=this.styleRef;h.get(o)?.elements?.forEach(y=>y.remove()),h.delete(o)}collectServerRenderedStyles(){const o=this.doc.head?.querySelectorAll(`style[${aP}="${this.appId}"]`);if(o?.length){const h=new Map;return o.forEach(y=>{null!=y.textContent&&h.set(y.textContent,y)}),h}return null}changeUsageCount(o,h){const y=this.styleRef;if(y.has(o)){const _=y.get(o);return _.usage+=h,_.usage}return y.set(o,{usage:h,elements:[]}),h}getStyleElement(o,h){const y=this.styleNodesInDOM,_=y?.get(h);if(_?.parentNode===o)return y.delete(h),_.removeAttribute(aP),_;{const I=this.doc.createElement("style");return this.nonce&&I.setAttribute("nonce",this.nonce),I.textContent=h,this.platformIsServer&&I.setAttribute(aP,this.appId),I}}addStyleToHost(o,h){const y=this.getStyleElement(o,h);o.appendChild(y);const _=this.styleRef,I=_.get(h)?.elements;I?I.push(y):_.set(h,{elements:[y],usage:1})}resetHostNodes(){const o=this.hostNodes;o.clear(),o.add(this.doc.head)}}return s.\u0275fac=function(o){return new(o||s)(Py(m0),Py(nD),Py(uO,8),Py(NE))},s.\u0275prov=ry({token:s,factory:s.\u0275fac}),s})();const lP={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},cP=/%COMP%/g,BQ=new Fy("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Y6(s,l){return l.map(o=>o.replace(cP,s))}let uP=(()=>{class s{constructor(o,h,y,_,I,V,$,_n=null){this.eventManager=o,this.sharedStylesHost=h,this.appId=y,this.removeStylesOnCompDestroy=_,this.doc=I,this.platformId=V,this.ngZone=$,this.nonce=_n,this.rendererByCompId=new Map,this.platformIsServer=nP(V),this.defaultRenderer=new dP(o,I,$,this.platformIsServer)}createRenderer(o,h){if(!o||!h)return this.defaultRenderer;this.platformIsServer&&h.encapsulation===E1.ShadowDom&&(h={...h,encapsulation:E1.Emulated});const y=this.getOrCreateRenderer(o,h);return y instanceof X6?y.applyToHost(o):y instanceof hP&&y.applyStyles(),y}getOrCreateRenderer(o,h){const y=this.rendererByCompId;let _=y.get(h.id);if(!_){const I=this.doc,V=this.ngZone,$=this.eventManager,_n=this.sharedStylesHost,ha=this.removeStylesOnCompDestroy,Ba=this.platformIsServer;switch(h.encapsulation){case E1.Emulated:_=new X6($,_n,h,this.appId,ha,I,V,Ba);break;case E1.ShadowDom:return new HQ($,_n,o,h,I,V,this.nonce,Ba);default:_=new hP($,_n,h,ha,I,V,Ba)}_.onDestroy=()=>y.delete(h.id),y.set(h.id,_)}return _}ngOnDestroy(){this.rendererByCompId.clear()}}return s.\u0275fac=function(o){return new(o||s)(Py(G6),Py(q6),Py(nD),Py(BQ),Py(m0),Py(NE),Py(H_),Py(uO))},s.\u0275prov=ry({token:s,factory:s.\u0275fac}),s})();class dP{constructor(l,o,h,y){this.eventManager=l,this.doc=o,this.ngZone=h,this.platformIsServer=y,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(l,o){return o?this.doc.createElementNS(lP[o]||o,l):this.doc.createElement(l)}createComment(l){return this.doc.createComment(l)}createText(l){return this.doc.createTextNode(l)}appendChild(l,o){(K6(l)?l.content:l).appendChild(o)}insertBefore(l,o,h){l&&(K6(l)?l.content:l).insertBefore(o,h)}removeChild(l,o){l&&l.removeChild(o)}selectRootElement(l,o){let h="string"==typeof l?this.doc.querySelector(l):l;if(!h)throw new py(-5104,!1);return o||(h.textContent=""),h}parentNode(l){return l.parentNode}nextSibling(l){return l.nextSibling}setAttribute(l,o,h,y){if(y){o=y+":"+o;const _=lP[y];_?l.setAttributeNS(_,o,h):l.setAttribute(o,h)}else l.setAttribute(o,h)}removeAttribute(l,o,h){if(h){const y=lP[h];y?l.removeAttributeNS(y,o):l.removeAttribute(`${h}:${o}`)}else l.removeAttribute(o)}addClass(l,o){l.classList.add(o)}removeClass(l,o){l.classList.remove(o)}setStyle(l,o,h,y){y&(Z1.DashCase|Z1.Important)?l.style.setProperty(o,h,y&Z1.Important?"important":""):l.style[o]=h}removeStyle(l,o,h){h&Z1.DashCase?l.style.removeProperty(o):l.style[o]=""}setProperty(l,o,h){l[o]=h}setValue(l,o){l.nodeValue=o}listen(l,o,h){if("string"==typeof l&&!(l=uT().getGlobalEventTarget(this.doc,l)))throw new Error(`Unsupported event target ${l} for event ${o}`);return this.eventManager.addEventListener(l,o,this.decoratePreventDefault(h))}decoratePreventDefault(l){return o=>{if("__ngUnwrap__"===o)return l;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>l(o)):l(o))&&o.preventDefault()}}}function K6(s){return"TEMPLATE"===s.tagName&&void 0!==s.content}class HQ extends dP{constructor(l,o,h,y,_,I,V,$){super(l,_,I,$),this.sharedStylesHost=o,this.hostEl=h,this.shadowRoot=h.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const _n=Y6(y.id,y.styles);for(const ha of _n){const Ba=document.createElement("style");V&&Ba.setAttribute("nonce",V),Ba.textContent=ha,this.shadowRoot.appendChild(Ba)}}nodeOrShadowRoot(l){return l===this.hostEl?this.shadowRoot:l}appendChild(l,o){return super.appendChild(this.nodeOrShadowRoot(l),o)}insertBefore(l,o,h){return super.insertBefore(this.nodeOrShadowRoot(l),o,h)}removeChild(l,o){return super.removeChild(this.nodeOrShadowRoot(l),o)}parentNode(l){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(l)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class hP extends dP{constructor(l,o,h,y,_,I,V,$){super(l,_,I,V),this.sharedStylesHost=o,this.removeStylesOnCompDestroy=y,this.rendererUsageCount=0,this.styles=$?Y6($,h.styles):h.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestroy&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class X6 extends hP{constructor(l,o,h,y,_,I,V,$){const _n=y+"-"+h.id;super(l,o,h,_,I,V,$,_n),this.contentAttr=function VQ(s){return"_ngcontent-%COMP%".replace(cP,s)}(_n),this.hostAttr=function UQ(s){return"_nghost-%COMP%".replace(cP,s)}(_n)}applyToHost(l){this.applyStyles(),this.setAttribute(l,this.hostAttr,"")}createElement(l,o){const h=super.createElement(l,o);return super.setAttribute(h,this.contentAttr,""),h}}let GQ=(()=>{class s extends $6{constructor(o){super(o)}supports(o){return!0}addEventListener(o,h,y){return o.addEventListener(h,y,!1),()=>this.removeEventListener(o,h,y)}removeEventListener(o,h,y){return o.removeEventListener(h,y)}}return s.\u0275fac=function(o){return new(o||s)(Py(m0))},s.\u0275prov=ry({token:s,factory:s.\u0275fac}),s})();const Z6=["alt","control","meta","shift"],$Q={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qQ={alt:s=>s.altKey,control:s=>s.ctrlKey,meta:s=>s.metaKey,shift:s=>s.shiftKey};let WQ=(()=>{class s extends $6{constructor(o){super(o)}supports(o){return null!=s.parseEventName(o)}addEventListener(o,h,y){const _=s.parseEventName(h),I=s.eventCallback(_.fullKey,y,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>uT().onAndCancel(o,_.domEventName,I))}static parseEventName(o){const h=o.toLowerCase().split("."),y=h.shift();if(0===h.length||"keydown"!==y&&"keyup"!==y)return null;const _=s._normalizeKey(h.pop());let I="",V=h.indexOf("code");if(V>-1&&(h.splice(V,1),I="code."),Z6.forEach(_n=>{const ha=h.indexOf(_n);ha>-1&&(h.splice(ha,1),I+=_n+".")}),I+=_,0!=h.length||0===_.length)return null;const $={};return $.domEventName=y,$.fullKey=I,$}static matchEventFullKeyCode(o,h){let y=$Q[o.key]||o.key,_="";return h.indexOf("code.")>-1&&(y=o.code,_="code."),!(null==y||!y)&&(y=y.toLowerCase()," "===y?y="space":"."===y&&(y="dot"),Z6.forEach(I=>{I!==y&&(0,qQ[I])(o)&&(_+=I+".")}),_+=y,_===h)}static eventCallback(o,h,y){return _=>{s.matchEventFullKeyCode(_,o)&&y.runGuarded(()=>h(_))}}static _normalizeKey(o){return"esc"===o?"escape":o}}return s.\u0275fac=function(o){return new(o||s)(Py(m0))},s.\u0275prov=ry({token:s,factory:s.\u0275fac}),s})();const ZQ=FB(vZ,"browser",[{provide:NE,useValue:k6},{provide:t3,useValue:function YQ(){oP.makeCurrent()},multi:!0},{provide:m0,useFactory:function XQ(){return function X9(s){Z2=s}(document),document},deps:[]}]),JQ=new Fy(""),tV=[{provide:ID,useClass:class PQ{addToWindow(l){Uy.getAngularTestability=(h,y=!0)=>{const _=l.findTestabilityInTree(h,y);if(null==_)throw new py(5103,!1);return _},Uy.getAllAngularTestabilities=()=>l.getAllTestabilities(),Uy.getAllAngularRootElements=()=>l.getAllRootElements(),Uy.frameworkStabilizers||(Uy.frameworkStabilizers=[]),Uy.frameworkStabilizers.push(h=>{const y=Uy.getAllAngularTestabilities();let _=y.length,I=!1;const V=function($){I=I||$,_--,0==_&&h(I)};y.forEach($=>{$.whenStable(V)})})}findTestabilityInTree(l,o,h){return null==o?null:l.getTestability(o)??(h?uT().isShadowRoot(o)?this.findTestabilityInTree(l,o.host,!0):this.findTestabilityInTree(l,o.parentElement,!0):null)}},deps:[]},{provide:OB,useClass:CR,deps:[H_,MR,ID]},{provide:CR,useClass:CR,deps:[H_,MR,ID]}],eV=[{provide:oO,useValue:"root"},{provide:aE,useFactory:function KQ(){return new aE},deps:[]},{provide:sP,useClass:GQ,multi:!0,deps:[m0,H_,NE]},{provide:sP,useClass:WQ,multi:!0,deps:[m0]},uP,q6,G6,{provide:sC,useExisting:uP},{provide:R6,useClass:NQ,deps:[]},[]];let nV=(()=>{class s{constructor(o){}static withServerTransition(o){return{ngModule:s,providers:[{provide:nD,useValue:o.appId}]}}}return s.\u0275fac=function(o){return new(o||s)(Py(JQ,12))},s.\u0275mod=L0({type:s}),s.\u0275inj=xy({providers:[...eV,...tV],imports:[GE,_Z]}),s})(),rV=(()=>{class s{constructor(o){this._doc=o}getTitle(){return this._doc.title}setTitle(o){this._doc.title=o||""}}return s.\u0275fac=function(o){return new(o||s)(Py(m0))},s.\u0275prov=ry({token:s,factory:function(o){let h=null;return h=o?new o:function ttt(){return new rV(Py(m0))}(),h},providedIn:"root"}),s})();typeof window<"u"&&window;let pP=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=ry({token:s,factory:function(o){let h=null;return h=o?new(o||s):Py(sV),h},providedIn:"root"}),s})(),sV=(()=>{class s extends pP{constructor(o){super(),this._doc=o}sanitize(o,h){if(null==h)return null;switch(o){case p0.NONE:return h;case p0.HTML:return iE(h,"HTML")?lx(h):z4(this._doc,String(h)).toString();case p0.STYLE:return iE(h,"Style")?lx(h):h;case p0.SCRIPT:if(iE(h,"Script"))return lx(h);throw new py(5200,!1);case p0.URL:return iE(h,"URL")?lx(h):JM(String(h));case p0.RESOURCE_URL:if(iE(h,"ResourceURL"))return lx(h);throw new py(5201,!1);default:throw new py(5202,!1)}}bypassSecurityTrustHtml(o){return function r7(s){return new Z9(s)}(o)}bypassSecurityTrustStyle(o){return function i7(s){return new J9(s)}(o)}bypassSecurityTrustScript(o){return function o7(s){return new Q9(s)}(o)}bypassSecurityTrustUrl(o){return function s7(s){return new t7(s)}(o)}bypassSecurityTrustResourceUrl(o){return function a7(s){return new e7(s)}(o)}}return s.\u0275fac=function(o){return new(o||s)(Py(m0))},s.\u0275prov=ry({token:s,factory:function(o){let h=null;return h=o?new o:function itt(s){return new sV(s.get(m0))}(Py(Ax)),h},providedIn:"root"}),s})();class lV{}class ott{}const $E="*";function XD(s,l){return{type:7,name:s,definitions:l,options:{}}}function GT(s,l=null){return{type:4,styles:l,timings:s}}function cV(s,l=null){return{type:2,steps:s,options:l}}function hx(s){return{type:6,styles:s,offset:null}}function stt(s,l,o){return{type:0,name:s,styles:l,options:o}}function $T(s,l,o=null){return{type:1,expr:s,animation:l,options:o}}class NC{constructor(l=0,o=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=l+o}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(l=>l()),this._onDoneFns=[])}onStart(l){this._originalOnStartFns.push(l),this._onStartFns.push(l)}onDone(l){this._originalOnDoneFns.push(l),this._onDoneFns.push(l)}onDestroy(l){this._onDestroyFns.push(l)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(l=>l()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(l=>l()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(l){this._position=this.totalTime?l*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(l){const o="start"==l?this._onStartFns:this._onDoneFns;o.forEach(h=>h()),o.length=0}}class uV{constructor(l){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=l;let o=0,h=0,y=0;const _=this.players.length;0==_?queueMicrotask(()=>this._onFinish()):this.players.forEach(I=>{I.onDone(()=>{++o==_&&this._onFinish()}),I.onDestroy(()=>{++h==_&&this._onDestroy()}),I.onStart(()=>{++y==_&&this._onStart()})}),this.totalTime=this.players.reduce((I,V)=>Math.max(I,V.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(l=>l()),this._onDoneFns=[])}init(){this.players.forEach(l=>l.init())}onStart(l){this._onStartFns.push(l)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(l=>l()),this._onStartFns=[])}onDone(l){this._onDoneFns.push(l)}onDestroy(l){this._onDestroyFns.push(l)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(l=>l.play())}pause(){this.players.forEach(l=>l.pause())}restart(){this.players.forEach(l=>l.restart())}finish(){this._onFinish(),this.players.forEach(l=>l.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(l=>l.destroy()),this._onDestroyFns.forEach(l=>l()),this._onDestroyFns=[])}reset(){this.players.forEach(l=>l.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(l){const o=l*this.totalTime;this.players.forEach(h=>{const y=h.totalTime?Math.min(1,o/h.totalTime):1;h.setPosition(y)})}getPosition(){const l=this.players.reduce((o,h)=>null===o||h.totalTime>o.totalTime?h:o,null);return null!=l?l.getPosition():0}beforeDestroy(){this.players.forEach(l=>{l.beforeDestroy&&l.beforeDestroy()})}triggerCallback(l){const o="start"==l?this._onStartFns:this._onDoneFns;o.forEach(h=>h()),o.length=0}}function dV(s){return new py(3e3,!1)}function hT(s){switch(s.length){case 0:return new NC;case 1:return s[0];default:return new uV(s)}}function hV(s,l,o=new Map,h=new Map){const y=[],_=[];let I=-1,V=null;if(l.forEach($=>{const _n=$.get("offset"),ha=_n==I,Ba=ha&&V||new Map;$.forEach((_d,mg)=>{let iy=mg,ay=_d;if("offset"!==mg)switch(iy=s.normalizePropertyName(iy,y),ay){case"!":ay=o.get(mg);break;case $E:ay=h.get(mg);break;default:ay=s.normalizeStyleValue(mg,iy,ay,y)}Ba.set(iy,ay)}),ha||_.push(Ba),V=Ba,I=_n}),y.length)throw function Dtt(s){return new py(3502,!1)}();return _}function gP(s,l,o,h){switch(l){case"start":s.onStart(()=>h(o&&yP(o,"start",s)));break;case"done":s.onDone(()=>h(o&&yP(o,"done",s)));break;case"destroy":s.onDestroy(()=>h(o&&yP(o,"destroy",s)))}}function yP(s,l,o){const _=vP(s.element,s.triggerName,s.fromState,s.toState,l||s.phaseName,o.totalTime??s.totalTime,!!o.disabled),I=s._data;return null!=I&&(_._data=I),_}function vP(s,l,o,h,y="",_=0,I){return{element:s,triggerName:l,fromState:o,toState:h,phaseName:y,totalTime:_,disabled:!!I}}function fx(s,l,o){let h=s.get(l);return h||s.set(l,h=o),h}function fV(s){const l=s.indexOf(":");return[s.substring(1,l),s.slice(l+1)]}const Utt=(()=>typeof document>"u"?null:document.documentElement)();function _P(s){const l=s.parentNode||s.host||null;return l===Utt?null:l}let qT=null,pV=!1;function mV(s,l){for(;l;){if(l===s)return!0;l=_P(l)}return!1}function gV(s,l,o){if(o)return Array.from(s.querySelectorAll(l));const h=s.querySelector(l);return h?[h]:[]}let yV=(()=>{class s{validateStyleProperty(o){return function Htt(s){qT||(qT=function Gtt(){return typeof document<"u"?document.body:null}()||{},pV=!!qT.style&&"WebkitAppearance"in qT.style);let l=!0;return qT.style&&!function ztt(s){return"ebkit"==s.substring(1,6)}(s)&&(l=s in qT.style,!l&&pV&&(l="Webkit"+s.charAt(0).toUpperCase()+s.slice(1)in qT.style)),l}(o)}matchesElement(o,h){return!1}containsElement(o,h){return mV(o,h)}getParentElement(o){return _P(o)}query(o,h,y){return gV(o,h,y)}computeStyle(o,h,y){return y||""}animate(o,h,y,_,I,V=[],$){return new NC(y,_)}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=ry({token:s,factory:s.\u0275fac}),s})(),bP=(()=>{class s{}return s.NOOP=new yV,s})();const $tt=1e3,wP="ng-enter",ZD="ng-leave",JD="ng-trigger",QD=".ng-trigger",_V="ng-animating",xP=".ng-animating";function qE(s){if("number"==typeof s)return s;const l=s.match(/^(-?[\.\d]+)(m?s)/);return!l||l.length<2?0:EP(parseFloat(l[1]),l[2])}function EP(s,l){return"s"===l?s*$tt:s}function tI(s,l,o){return s.hasOwnProperty("duration")?s:function Wtt(s,l,o){let y,_=0,I="";if("string"==typeof s){const V=s.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===V)return l.push(dV()),{duration:0,delay:0,easing:""};y=EP(parseFloat(V[1]),V[2]);const $=V[3];null!=$&&(_=EP(parseFloat($),V[4]));const _n=V[5];_n&&(I=_n)}else y=s;if(!o){let V=!1,$=l.length;y<0&&(l.push(function att(){return new py(3100,!1)}()),V=!0),_<0&&(l.push(function ltt(){return new py(3101,!1)}()),V=!0),V&&l.splice($,0,dV())}return{duration:y,delay:_,easing:I}}(s,l,o)}function LC(s,l={}){return Object.keys(s).forEach(o=>{l[o]=s[o]}),l}function bV(s){const l=new Map;return Object.keys(s).forEach(o=>{l.set(o,s[o])}),l}function fT(s,l=new Map,o){if(o)for(let[h,y]of o)l.set(h,y);for(let[h,y]of s)l.set(h,y);return l}function gE(s,l,o){l.forEach((h,y)=>{const _=AP(y);o&&!o.has(y)&&o.set(y,s.style[_]),s.style[_]=h})}function WT(s,l){l.forEach((o,h)=>{const y=AP(h);s.style[y]=""})}function FC(s){return Array.isArray(s)?1==s.length?s[0]:cV(s):s}const TP=new RegExp("{{\\s*(.+?)\\s*}}","g");function xV(s){let l=[];if("string"==typeof s){let o;for(;o=TP.exec(s);)l.push(o[1]);TP.lastIndex=0}return l}function jC(s,l,o){const h=s.toString(),y=h.replace(TP,(_,I)=>{let V=l[I];return null==V&&(o.push(function utt(s){return new py(3003,!1)}()),V=""),V.toString()});return y==h?s:y}function eI(s){const l=[];let o=s.next();for(;!o.done;)l.push(o.value),o=s.next();return l}const Xtt=/-+([a-z0-9])/g;function AP(s){return s.replace(Xtt,(...l)=>l[1].toUpperCase())}function px(s,l,o){switch(l.type){case 7:return s.visitTrigger(l,o);case 0:return s.visitState(l,o);case 1:return s.visitTransition(l,o);case 2:return s.visitSequence(l,o);case 3:return s.visitGroup(l,o);case 4:return s.visitAnimate(l,o);case 5:return s.visitKeyframes(l,o);case 6:return s.visitStyle(l,o);case 8:return s.visitReference(l,o);case 9:return s.visitAnimateChild(l,o);case 10:return s.visitAnimateRef(l,o);case 11:return s.visitQuery(l,o);case 12:return s.visitStagger(l,o);default:throw function dtt(s){return new py(3004,!1)}()}}function EV(s,l){return window.getComputedStyle(s)[l]}const nI="*";function Qtt(s,l){const o=[];return"string"==typeof s?s.split(/\s*,\s*/).forEach(h=>function tet(s,l,o){if(":"==s[0]){const $=function eet(s,l){switch(s){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(o,h)=>parseFloat(h)>parseFloat(o);case":decrement":return(o,h)=>parseFloat(h)<parseFloat(o);default:return l.push(function Att(s){return new py(3016,!1)}()),"* => *"}}(s,o);if("function"==typeof $)return void l.push($);s=$}const h=s.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==h||h.length<4)return o.push(function Ttt(s){return new py(3015,!1)}()),l;const y=h[1],_=h[2],I=h[3];l.push(TV(y,I));"<"==_[0]&&!(y==nI&&I==nI)&&l.push(TV(I,y))}(h,o,l)):o.push(s),o}const rI=new Set(["true","1"]),iI=new Set(["false","0"]);function TV(s,l){const o=rI.has(s)||iI.has(s),h=rI.has(l)||iI.has(l);return(y,_)=>{let I=s==nI||s==y,V=l==nI||l==_;return!I&&o&&"boolean"==typeof y&&(I=y?rI.has(s):iI.has(s)),!V&&h&&"boolean"==typeof _&&(V=_?rI.has(l):iI.has(l)),I&&V}}const net=new RegExp("s*:selfs*,?","g");function SP(s,l,o,h){return new ret(s).build(l,o,h)}class ret{constructor(l){this._driver=l}build(l,o,h){const y=new aet(o);return this._resetContextStyleTimingState(y),px(this,FC(l),y)}_resetContextStyleTimingState(l){l.currentQuerySelector="",l.collectedStyles=new Map,l.collectedStyles.set("",new Map),l.currentTime=0}visitTrigger(l,o){let h=o.queryCount=0,y=o.depCount=0;const _=[],I=[];return"@"==l.name.charAt(0)&&o.errors.push(function ftt(){return new py(3006,!1)}()),l.definitions.forEach(V=>{if(this._resetContextStyleTimingState(o),0==V.type){const $=V,_n=$.name;_n.toString().split(/\s*,\s*/).forEach(ha=>{$.name=ha,_.push(this.visitState($,o))}),$.name=_n}else if(1==V.type){const $=this.visitTransition(V,o);h+=$.queryCount,y+=$.depCount,I.push($)}else o.errors.push(function ptt(){return new py(3007,!1)}())}),{type:7,name:l.name,states:_,transitions:I,queryCount:h,depCount:y,options:null}}visitState(l,o){const h=this.visitStyle(l.styles,o),y=l.options&&l.options.params||null;if(h.containsDynamicStyles){const _=new Set,I=y||{};h.styles.forEach(V=>{V instanceof Map&&V.forEach($=>{xV($).forEach(_n=>{I.hasOwnProperty(_n)||_.add(_n)})})}),_.size&&(eI(_.values()),o.errors.push(function mtt(s,l){return new py(3008,!1)}()))}return{type:0,name:l.name,style:h,options:y?{params:y}:null}}visitTransition(l,o){o.queryCount=0,o.depCount=0;const h=px(this,FC(l.animation),o);return{type:1,matchers:Qtt(l.expr,o.errors),animation:h,queryCount:o.queryCount,depCount:o.depCount,options:YT(l.options)}}visitSequence(l,o){return{type:2,steps:l.steps.map(h=>px(this,h,o)),options:YT(l.options)}}visitGroup(l,o){const h=o.currentTime;let y=0;const _=l.steps.map(I=>{o.currentTime=h;const V=px(this,I,o);return y=Math.max(y,o.currentTime),V});return o.currentTime=y,{type:3,steps:_,options:YT(l.options)}}visitAnimate(l,o){const h=function uet(s,l){if(s.hasOwnProperty("duration"))return s;if("number"==typeof s)return CP(tI(s,l).duration,0,"");const o=s;if(o.split(/\s+/).some(_=>"{"==_.charAt(0)&&"{"==_.charAt(1))){const _=CP(0,0,"");return _.dynamic=!0,_.strValue=o,_}const y=tI(o,l);return CP(y.duration,y.delay,y.easing)}(l.timings,o.errors);o.currentAnimateTimings=h;let y,_=l.styles?l.styles:hx({});if(5==_.type)y=this.visitKeyframes(_,o);else{let I=l.styles,V=!1;if(!I){V=!0;const _n={};h.easing&&(_n.easing=h.easing),I=hx(_n)}o.currentTime+=h.duration+h.delay;const $=this.visitStyle(I,o);$.isEmptyStep=V,y=$}return o.currentAnimateTimings=null,{type:4,timings:h,style:y,options:null}}visitStyle(l,o){const h=this._makeStyleAst(l,o);return this._validateStyleAst(h,o),h}_makeStyleAst(l,o){const h=[],y=Array.isArray(l.styles)?l.styles:[l.styles];for(let V of y)"string"==typeof V?V===$E?h.push(V):o.errors.push(new py(3002,!1)):h.push(bV(V));let _=!1,I=null;return h.forEach(V=>{if(V instanceof Map&&(V.has("easing")&&(I=V.get("easing"),V.delete("easing")),!_))for(let $ of V.values())if($.toString().indexOf("{{")>=0){_=!0;break}}),{type:6,styles:h,easing:I,offset:l.offset,containsDynamicStyles:_,options:null}}_validateStyleAst(l,o){const h=o.currentAnimateTimings;let y=o.currentTime,_=o.currentTime;h&&_>0&&(_-=h.duration+h.delay),l.styles.forEach(I=>{"string"!=typeof I&&I.forEach((V,$)=>{const _n=o.collectedStyles.get(o.currentQuerySelector),ha=_n.get($);let Ba=!0;ha&&(_!=y&&_>=ha.startTime&&y<=ha.endTime&&(o.errors.push(function ytt(s,l,o,h,y){return new py(3010,!1)}()),Ba=!1),_=ha.startTime),Ba&&_n.set($,{startTime:_,endTime:y}),o.options&&function Ktt(s,l,o){const h=l.params||{},y=xV(s);y.length&&y.forEach(_=>{h.hasOwnProperty(_)||o.push(function ctt(s){return new py(3001,!1)}())})}(V,o.options,o.errors)})})}visitKeyframes(l,o){const h={type:5,styles:[],options:null};if(!o.currentAnimateTimings)return o.errors.push(function vtt(){return new py(3011,!1)}()),h;let _=0;const I=[];let V=!1,$=!1,_n=0;const ha=l.steps.map(_y=>{const fy=this._makeStyleAst(_y,o);let Vy=null!=fy.offset?fy.offset:function cet(s){if("string"==typeof s)return null;let l=null;if(Array.isArray(s))s.forEach(o=>{if(o instanceof Map&&o.has("offset")){const h=o;l=parseFloat(h.get("offset")),h.delete("offset")}});else if(s instanceof Map&&s.has("offset")){const o=s;l=parseFloat(o.get("offset")),o.delete("offset")}return l}(fy.styles),t_=0;return null!=Vy&&(_++,t_=fy.offset=Vy),$=$||t_<0||t_>1,V=V||t_<_n,_n=t_,I.push(t_),fy});$&&o.errors.push(function _tt(){return new py(3012,!1)}()),V&&o.errors.push(function btt(){return new py(3200,!1)}());const Ba=l.steps.length;let _d=0;_>0&&_<Ba?o.errors.push(function wtt(){return new py(3202,!1)}()):0==_&&(_d=1/(Ba-1));const mg=Ba-1,iy=o.currentTime,ay=o.currentAnimateTimings,my=ay.duration;return ha.forEach((_y,fy)=>{const Vy=_d>0?fy==mg?1:_d*fy:I[fy],t_=Vy*my;o.currentTime=iy+ay.delay+t_,ay.duration=t_,this._validateStyleAst(_y,o),_y.offset=Vy,h.styles.push(_y)}),h}visitReference(l,o){return{type:8,animation:px(this,FC(l.animation),o),options:YT(l.options)}}visitAnimateChild(l,o){return o.depCount++,{type:9,options:YT(l.options)}}visitAnimateRef(l,o){return{type:10,animation:this.visitReference(l.animation,o),options:YT(l.options)}}visitQuery(l,o){const h=o.currentQuerySelector,y=l.options||{};o.queryCount++,o.currentQuery=l;const[_,I]=function iet(s){const l=!!s.split(/\s*,\s*/).find(o=>":self"==o);return l&&(s=s.replace(net,"")),s=s.replace(/@\*/g,QD).replace(/@\w+/g,o=>QD+"-"+o.slice(1)).replace(/:animating/g,xP),[s,l]}(l.selector);o.currentQuerySelector=h.length?h+" "+_:_,fx(o.collectedStyles,o.currentQuerySelector,new Map);const V=px(this,FC(l.animation),o);return o.currentQuery=null,o.currentQuerySelector=h,{type:11,selector:_,limit:y.limit||0,optional:!!y.optional,includeSelf:I,animation:V,originalSelector:l.selector,options:YT(l.options)}}visitStagger(l,o){o.currentQuery||o.errors.push(function xtt(){return new py(3013,!1)}());const h="full"===l.timings?{duration:0,delay:0,easing:"full"}:tI(l.timings,o.errors,!0);return{type:12,animation:px(this,FC(l.animation),o),timings:h,options:null}}}class aet{constructor(l){this.errors=l,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function YT(s){return s?(s=LC(s)).params&&(s.params=function oet(s){return s?LC(s):null}(s.params)):s={},s}function CP(s,l,o){return{duration:s,delay:l,easing:o}}function MP(s,l,o,h,y,_,I=null,V=!1){return{type:1,element:s,keyframes:l,preStyleProps:o,postStyleProps:h,duration:y,delay:_,totalTime:y+_,easing:I,subTimeline:V}}class oI{constructor(){this._map=new Map}get(l){return this._map.get(l)||[]}append(l,o){let h=this._map.get(l);h||this._map.set(l,h=[]),h.push(...o)}has(l){return this._map.has(l)}clear(){this._map.clear()}}const fet=new RegExp(":enter","g"),met=new RegExp(":leave","g");function DP(s,l,o,h,y,_=new Map,I=new Map,V,$,_n=[]){return(new yet).buildKeyframes(s,l,o,h,y,_,I,V,$,_n)}class yet{buildKeyframes(l,o,h,y,_,I,V,$,_n,ha=[]){_n=_n||new oI;const Ba=new IP(l,o,_n,y,_,ha,[]);Ba.options=$;const _d=$.delay?qE($.delay):0;Ba.currentTimeline.delayNextStep(_d),Ba.currentTimeline.setStyles([I],null,Ba.errors,$),px(this,h,Ba);const mg=Ba.timelines.filter(iy=>iy.containsAnimation());if(mg.length&&V.size){let iy;for(let ay=mg.length-1;ay>=0;ay--){const my=mg[ay];if(my.element===o){iy=my;break}}iy&&!iy.allowOnlyTimelineStyles()&&iy.setStyles([V],null,Ba.errors,$)}return mg.length?mg.map(iy=>iy.buildKeyframes()):[MP(o,[],[],[],0,_d,"",!1)]}visitTrigger(l,o){}visitState(l,o){}visitTransition(l,o){}visitAnimateChild(l,o){const h=o.subInstructions.get(o.element);if(h){const y=o.createSubContext(l.options),_=o.currentTimeline.currentTime,I=this._visitSubInstructions(h,y,y.options);_!=I&&o.transformIntoNewTimeline(I)}o.previousNode=l}visitAnimateRef(l,o){const h=o.createSubContext(l.options);h.transformIntoNewTimeline(),this._applyAnimationRefDelays([l.options,l.animation.options],o,h),this.visitReference(l.animation,h),o.transformIntoNewTimeline(h.currentTimeline.currentTime),o.previousNode=l}_applyAnimationRefDelays(l,o,h){for(const y of l){const _=y?.delay;if(_){const I="number"==typeof _?_:qE(jC(_,y?.params??{},o.errors));h.delayNextStep(I)}}}_visitSubInstructions(l,o,h){let _=o.currentTimeline.currentTime;const I=null!=h.duration?qE(h.duration):null,V=null!=h.delay?qE(h.delay):null;return 0!==I&&l.forEach($=>{const _n=o.appendInstructionToTimeline($,I,V);_=Math.max(_,_n.duration+_n.delay)}),_}visitReference(l,o){o.updateOptions(l.options,!0),px(this,l.animation,o),o.previousNode=l}visitSequence(l,o){const h=o.subContextCount;let y=o;const _=l.options;if(_&&(_.params||_.delay)&&(y=o.createSubContext(_),y.transformIntoNewTimeline(),null!=_.delay)){6==y.previousNode.type&&(y.currentTimeline.snapshotCurrentStyles(),y.previousNode=sI);const I=qE(_.delay);y.delayNextStep(I)}l.steps.length&&(l.steps.forEach(I=>px(this,I,y)),y.currentTimeline.applyStylesToKeyframe(),y.subContextCount>h&&y.transformIntoNewTimeline()),o.previousNode=l}visitGroup(l,o){const h=[];let y=o.currentTimeline.currentTime;const _=l.options&&l.options.delay?qE(l.options.delay):0;l.steps.forEach(I=>{const V=o.createSubContext(l.options);_&&V.delayNextStep(_),px(this,I,V),y=Math.max(y,V.currentTimeline.currentTime),h.push(V.currentTimeline)}),h.forEach(I=>o.currentTimeline.mergeTimelineCollectedStyles(I)),o.transformIntoNewTimeline(y),o.previousNode=l}_visitTiming(l,o){if(l.dynamic){const h=l.strValue;return tI(o.params?jC(h,o.params,o.errors):h,o.errors)}return{duration:l.duration,delay:l.delay,easing:l.easing}}visitAnimate(l,o){const h=o.currentAnimateTimings=this._visitTiming(l.timings,o),y=o.currentTimeline;h.delay&&(o.incrementTime(h.delay),y.snapshotCurrentStyles());const _=l.style;5==_.type?this.visitKeyframes(_,o):(o.incrementTime(h.duration),this.visitStyle(_,o),y.applyStylesToKeyframe()),o.currentAnimateTimings=null,o.previousNode=l}visitStyle(l,o){const h=o.currentTimeline,y=o.currentAnimateTimings;!y&&h.hasCurrentStyleProperties()&&h.forwardFrame();const _=y&&y.easing||l.easing;l.isEmptyStep?h.applyEmptyStep(_):h.setStyles(l.styles,_,o.errors,o.options),o.previousNode=l}visitKeyframes(l,o){const h=o.currentAnimateTimings,y=o.currentTimeline.duration,_=h.duration,V=o.createSubContext().currentTimeline;V.easing=h.easing,l.styles.forEach($=>{V.forwardTime(($.offset||0)*_),V.setStyles($.styles,$.easing,o.errors,o.options),V.applyStylesToKeyframe()}),o.currentTimeline.mergeTimelineCollectedStyles(V),o.transformIntoNewTimeline(y+_),o.previousNode=l}visitQuery(l,o){const h=o.currentTimeline.currentTime,y=l.options||{},_=y.delay?qE(y.delay):0;_&&(6===o.previousNode.type||0==h&&o.currentTimeline.hasCurrentStyleProperties())&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=sI);let I=h;const V=o.invokeQuery(l.selector,l.originalSelector,l.limit,l.includeSelf,!!y.optional,o.errors);o.currentQueryTotal=V.length;let $=null;V.forEach((_n,ha)=>{o.currentQueryIndex=ha;const Ba=o.createSubContext(l.options,_n);_&&Ba.delayNextStep(_),_n===o.element&&($=Ba.currentTimeline),px(this,l.animation,Ba),Ba.currentTimeline.applyStylesToKeyframe(),I=Math.max(I,Ba.currentTimeline.currentTime)}),o.currentQueryIndex=0,o.currentQueryTotal=0,o.transformIntoNewTimeline(I),$&&(o.currentTimeline.mergeTimelineCollectedStyles($),o.currentTimeline.snapshotCurrentStyles()),o.previousNode=l}visitStagger(l,o){const h=o.parentContext,y=o.currentTimeline,_=l.timings,I=Math.abs(_.duration),V=I*(o.currentQueryTotal-1);let $=I*o.currentQueryIndex;switch(_.duration<0?"reverse":_.easing){case"reverse":$=V-$;break;case"full":$=h.currentStaggerTime}const ha=o.currentTimeline;$&&ha.delayNextStep($);const Ba=ha.currentTime;px(this,l.animation,o),o.previousNode=l,h.currentStaggerTime=y.currentTime-Ba+(y.startTime-h.currentTimeline.startTime)}}const sI={};class IP{constructor(l,o,h,y,_,I,V,$){this._driver=l,this.element=o,this.subInstructions=h,this._enterClassName=y,this._leaveClassName=_,this.errors=I,this.timelines=V,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=sI,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=$||new aI(this._driver,o,0),V.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(l,o){if(!l)return;const h=l;let y=this.options;null!=h.duration&&(y.duration=qE(h.duration)),null!=h.delay&&(y.delay=qE(h.delay));const _=h.params;if(_){let I=y.params;I||(I=this.options.params={}),Object.keys(_).forEach(V=>{(!o||!I.hasOwnProperty(V))&&(I[V]=jC(_[V],I,this.errors))})}}_copyOptions(){const l={};if(this.options){const o=this.options.params;if(o){const h=l.params={};Object.keys(o).forEach(y=>{h[y]=o[y]})}}return l}createSubContext(l=null,o,h){const y=o||this.element,_=new IP(this._driver,y,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(y,h||0));return _.previousNode=this.previousNode,_.currentAnimateTimings=this.currentAnimateTimings,_.options=this._copyOptions(),_.updateOptions(l),_.currentQueryIndex=this.currentQueryIndex,_.currentQueryTotal=this.currentQueryTotal,_.parentContext=this,this.subContextCount++,_}transformIntoNewTimeline(l){return this.previousNode=sI,this.currentTimeline=this.currentTimeline.fork(this.element,l),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(l,o,h){const y={duration:o??l.duration,delay:this.currentTimeline.currentTime+(h??0)+l.delay,easing:""},_=new vet(this._driver,l.element,l.keyframes,l.preStyleProps,l.postStyleProps,y,l.stretchStartingKeyframe);return this.timelines.push(_),y}incrementTime(l){this.currentTimeline.forwardTime(this.currentTimeline.duration+l)}delayNextStep(l){l>0&&this.currentTimeline.delayNextStep(l)}invokeQuery(l,o,h,y,_,I){let V=[];if(y&&V.push(this.element),l.length>0){l=(l=l.replace(fet,"."+this._enterClassName)).replace(met,"."+this._leaveClassName);let _n=this._driver.query(this.element,l,1!=h);0!==h&&(_n=h<0?_n.slice(_n.length+h,_n.length):_n.slice(0,h)),V.push(..._n)}return!_&&0==V.length&&I.push(function Ett(s){return new py(3014,!1)}()),V}}class aI{constructor(l,o,h,y){this._driver=l,this.element=o,this.startTime=h,this._elementTimelineStylesLookup=y,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(o),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(o,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(l){const o=1===this._keyframes.size&&this._pendingStyles.size;this.duration||o?(this.forwardTime(this.currentTime+l),o&&this.snapshotCurrentStyles()):this.startTime+=l}fork(l,o){return this.applyStylesToKeyframe(),new aI(this._driver,l,o||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(l){this.applyStylesToKeyframe(),this.duration=l,this._loadKeyframe()}_updateStyle(l,o){this._localTimelineStyles.set(l,o),this._globalTimelineStyles.set(l,o),this._styleSummary.set(l,{time:this.currentTime,value:o})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(l){l&&this._previousKeyframe.set("easing",l);for(let[o,h]of this._globalTimelineStyles)this._backFill.set(o,h||$E),this._currentKeyframe.set(o,$E);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(l,o,h,y){o&&this._previousKeyframe.set("easing",o);const _=y&&y.params||{},I=function _et(s,l){const o=new Map;let h;return s.forEach(y=>{if("*"===y){h=h||l.keys();for(let _ of h)o.set(_,$E)}else fT(y,o)}),o}(l,this._globalTimelineStyles);for(let[V,$]of I){const _n=jC($,_,h);this._pendingStyles.set(V,_n),this._localTimelineStyles.has(V)||this._backFill.set(V,this._globalTimelineStyles.get(V)??$E),this._updateStyle(V,_n)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((l,o)=>{this._currentKeyframe.set(o,l)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((l,o)=>{this._currentKeyframe.has(o)||this._currentKeyframe.set(o,l)}))}snapshotCurrentStyles(){for(let[l,o]of this._localTimelineStyles)this._pendingStyles.set(l,o),this._updateStyle(l,o)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const l=[];for(let o in this._currentKeyframe)l.push(o);return l}mergeTimelineCollectedStyles(l){l._styleSummary.forEach((o,h)=>{const y=this._styleSummary.get(h);(!y||o.time>y.time)&&this._updateStyle(h,o.value)})}buildKeyframes(){this.applyStylesToKeyframe();const l=new Set,o=new Set,h=1===this._keyframes.size&&0===this.duration;let y=[];this._keyframes.forEach((V,$)=>{const _n=fT(V,new Map,this._backFill);_n.forEach((ha,Ba)=>{"!"===ha?l.add(Ba):ha===$E&&o.add(Ba)}),h||_n.set("offset",$/this.duration),y.push(_n)});const _=l.size?eI(l.values()):[],I=o.size?eI(o.values()):[];if(h){const V=y[0],$=new Map(V);V.set("offset",0),$.set("offset",1),y=[V,$]}return MP(this.element,y,_,I,this.duration,this.startTime,this.easing,!1)}}class vet extends aI{constructor(l,o,h,y,_,I,V=!1){super(l,o,I.delay),this.keyframes=h,this.preStyleProps=y,this.postStyleProps=_,this._stretchStartingKeyframe=V,this.timings={duration:I.duration,delay:I.delay,easing:I.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let l=this.keyframes,{delay:o,duration:h,easing:y}=this.timings;if(this._stretchStartingKeyframe&&o){const _=[],I=h+o,V=o/I,$=fT(l[0]);$.set("offset",0),_.push($);const _n=fT(l[0]);_n.set("offset",CV(V)),_.push(_n);const ha=l.length-1;for(let Ba=1;Ba<=ha;Ba++){let _d=fT(l[Ba]);const mg=_d.get("offset");_d.set("offset",CV((o+mg*h)/I)),_.push(_d)}h=I,o=0,y="",l=_}return MP(this.element,l,this.preStyleProps,this.postStyleProps,h,o,y,!0)}}function CV(s,l=3){const o=Math.pow(10,l-1);return Math.round(s*o)/o}class kP{}const bet=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class wet extends kP{normalizePropertyName(l,o){return AP(l)}normalizeStyleValue(l,o,h,y){let _="";const I=h.toString().trim();if(bet.has(o)&&0!==h&&"0"!==h)if("number"==typeof h)_="px";else{const V=h.match(/^[+-]?[\d\.]+([a-z]*)$/);V&&0==V[1].length&&y.push(function htt(s,l){return new py(3005,!1)}())}return I+_}}function MV(s,l,o,h,y,_,I,V,$,_n,ha,Ba,_d){return{type:0,element:s,triggerName:l,isRemovalTransition:y,fromState:o,fromStyles:_,toState:h,toStyles:I,timelines:V,queriedElements:$,preStyleProps:_n,postStyleProps:ha,totalTime:Ba,errors:_d}}const OP={};class DV{constructor(l,o,h){this._triggerName=l,this.ast=o,this._stateStyles=h}match(l,o,h,y){return function xet(s,l,o,h,y){return s.some(_=>_(l,o,h,y))}(this.ast.matchers,l,o,h,y)}buildStyles(l,o,h){let y=this._stateStyles.get("*");return void 0!==l&&(y=this._stateStyles.get(l?.toString())||y),y?y.buildStyles(o,h):new Map}build(l,o,h,y,_,I,V,$,_n,ha){const Ba=[],_d=this.ast.options&&this.ast.options.params||OP,iy=this.buildStyles(h,V&&V.params||OP,Ba),ay=$&&$.params||OP,my=this.buildStyles(y,ay,Ba),_y=new Set,fy=new Map,Vy=new Map,t_="void"===y,h_={params:Eet(ay,_d),delay:this.ast.options?.delay},y0=ha?[]:DP(l,o,this.ast.animation,_,I,iy,my,h_,_n,Ba);let _b=0;if(y0.forEach(Wx=>{_b=Math.max(Wx.duration+Wx.delay,_b)}),Ba.length)return MV(o,this._triggerName,h,y,t_,iy,my,[],[],fy,Vy,_b,Ba);y0.forEach(Wx=>{const ZE=Wx.element,EH=fx(fy,ZE,new Set);Wx.preStyleProps.forEach(aA=>EH.add(aA));const pM=fx(Vy,ZE,new Set);Wx.postStyleProps.forEach(aA=>pM.add(aA)),ZE!==o&&_y.add(ZE)});const qx=eI(_y.values());return MV(o,this._triggerName,h,y,t_,iy,my,y0,qx,fy,Vy,_b)}}function Eet(s,l){const o=LC(l);for(const h in s)s.hasOwnProperty(h)&&null!=s[h]&&(o[h]=s[h]);return o}class Tet{constructor(l,o,h){this.styles=l,this.defaultParams=o,this.normalizer=h}buildStyles(l,o){const h=new Map,y=LC(this.defaultParams);return Object.keys(l).forEach(_=>{const I=l[_];null!==I&&(y[_]=I)}),this.styles.styles.forEach(_=>{"string"!=typeof _&&_.forEach((I,V)=>{I&&(I=jC(I,y,o));const $=this.normalizer.normalizePropertyName(V,o);I=this.normalizer.normalizeStyleValue(V,$,I,o),h.set(V,I)})}),h}}class Cet{constructor(l,o,h){this.name=l,this.ast=o,this._normalizer=h,this.transitionFactories=[],this.states=new Map,o.states.forEach(y=>{this.states.set(y.name,new Tet(y.style,y.options&&y.options.params||{},h))}),IV(this.states,"true","1"),IV(this.states,"false","0"),o.transitions.forEach(y=>{this.transitionFactories.push(new DV(l,y,this.states))}),this.fallbackTransition=function Met(s,l,o){return new DV(s,{type:1,animation:{type:2,steps:[],options:null},matchers:[(I,V)=>!0],options:null,queryCount:0,depCount:0},l)}(l,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(l,o,h,y){return this.transitionFactories.find(I=>I.match(l,o,h,y))||null}matchStyles(l,o,h){return this.fallbackTransition.buildStyles(l,o,h)}}function IV(s,l,o){s.has(l)?s.has(o)||s.set(o,s.get(l)):s.has(o)&&s.set(l,s.get(o))}const Det=new oI;class Iet{constructor(l,o,h){this.bodyNode=l,this._driver=o,this._normalizer=h,this._animations=new Map,this._playersById=new Map,this.players=[]}register(l,o){const h=[],_=SP(this._driver,o,h,[]);if(h.length)throw function Itt(s){return new py(3503,!1)}();this._animations.set(l,_)}_buildPlayer(l,o,h){const y=l.element,_=hV(this._normalizer,l.keyframes,o,h);return this._driver.animate(y,_,l.duration,l.delay,l.easing,[],!0)}create(l,o,h={}){const y=[],_=this._animations.get(l);let I;const V=new Map;if(_?(I=DP(this._driver,o,_,wP,ZD,new Map,new Map,h,Det,y),I.forEach(ha=>{const Ba=fx(V,ha.element,new Map);ha.postStyleProps.forEach(_d=>Ba.set(_d,null))})):(y.push(function ktt(){return new py(3300,!1)}()),I=[]),y.length)throw function Ott(s){return new py(3504,!1)}();V.forEach((ha,Ba)=>{ha.forEach((_d,mg)=>{ha.set(mg,this._driver.computeStyle(Ba,mg,$E))})});const _n=hT(I.map(ha=>{const Ba=V.get(ha.element);return this._buildPlayer(ha,new Map,Ba)}));return this._playersById.set(l,_n),_n.onDestroy(()=>this.destroy(l)),this.players.push(_n),_n}destroy(l){const o=this._getPlayer(l);o.destroy(),this._playersById.delete(l);const h=this.players.indexOf(o);h>=0&&this.players.splice(h,1)}_getPlayer(l){const o=this._playersById.get(l);if(!o)throw function Rtt(s){return new py(3301,!1)}();return o}listen(l,o,h,y){const _=vP(o,"","","");return gP(this._getPlayer(l),h,_,y),()=>{}}command(l,o,h,y){if("register"==h)return void this.register(l,y[0]);if("create"==h)return void this.create(l,o,y[0]||{});const _=this._getPlayer(l);switch(h){case"play":_.play();break;case"pause":_.pause();break;case"reset":_.reset();break;case"restart":_.restart();break;case"finish":_.finish();break;case"init":_.init();break;case"setPosition":_.setPosition(parseFloat(y[0]));break;case"destroy":this.destroy(l)}}}const kV="ng-animate-queued",RP="ng-animate-disabled",Net=[],OV={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Let={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Dx="__ng_removed";class PP{get params(){return this.options.params}constructor(l,o=""){this.namespaceId=o;const h=l&&l.hasOwnProperty("value");if(this.value=function Vet(s){return s??null}(h?l.value:l),h){const _=LC(l);delete _.value,this.options=_}else this.options={};this.options.params||(this.options.params={})}absorbOptions(l){const o=l.params;if(o){const h=this.options.params;Object.keys(o).forEach(y=>{null==h[y]&&(h[y]=o[y])})}}}const BC="void",NP=new PP(BC);class Fet{constructor(l,o,h){this.id=l,this.hostElement=o,this._engine=h,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+l,Ix(o,this._hostClassName)}listen(l,o,h,y){if(!this._triggers.has(o))throw function Ptt(s,l){return new py(3302,!1)}();if(null==h||0==h.length)throw function Ntt(s){return new py(3303,!1)}();if(!function Uet(s){return"start"==s||"done"==s}(h))throw function Ltt(s,l){return new py(3400,!1)}();const _=fx(this._elementListeners,l,[]),I={name:o,phase:h,callback:y};_.push(I);const V=fx(this._engine.statesByElement,l,new Map);return V.has(o)||(Ix(l,JD),Ix(l,JD+"-"+o),V.set(o,NP)),()=>{this._engine.afterFlush(()=>{const $=_.indexOf(I);$>=0&&_.splice($,1),this._triggers.has(o)||V.delete(o)})}}register(l,o){return!this._triggers.has(l)&&(this._triggers.set(l,o),!0)}_getTrigger(l){const o=this._triggers.get(l);if(!o)throw function Ftt(s){return new py(3401,!1)}();return o}trigger(l,o,h,y=!0){const _=this._getTrigger(o),I=new LP(this.id,o,l);let V=this._engine.statesByElement.get(l);V||(Ix(l,JD),Ix(l,JD+"-"+o),this._engine.statesByElement.set(l,V=new Map));let $=V.get(o);const _n=new PP(h,this.id);if(!(h&&h.hasOwnProperty("value"))&&$&&_n.absorbOptions($.options),V.set(o,_n),$||($=NP),_n.value!==BC&&$.value===_n.value){if(!function Get(s,l){const o=Object.keys(s),h=Object.keys(l);if(o.length!=h.length)return!1;for(let y=0;y<o.length;y++){const _=o[y];if(!l.hasOwnProperty(_)||s[_]!==l[_])return!1}return!0}($.params,_n.params)){const ay=[],my=_.matchStyles($.value,$.params,ay),_y=_.matchStyles(_n.value,_n.params,ay);ay.length?this._engine.reportError(ay):this._engine.afterFlush(()=>{WT(l,my),gE(l,_y)})}return}const _d=fx(this._engine.playersByElement,l,[]);_d.forEach(ay=>{ay.namespaceId==this.id&&ay.triggerName==o&&ay.queued&&ay.destroy()});let mg=_.matchTransition($.value,_n.value,l,_n.params),iy=!1;if(!mg){if(!y)return;mg=_.fallbackTransition,iy=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:l,triggerName:o,transition:mg,fromState:$,toState:_n,player:I,isFallbackTransition:iy}),iy||(Ix(l,kV),I.onStart(()=>{oS(l,kV)})),I.onDone(()=>{let ay=this.players.indexOf(I);ay>=0&&this.players.splice(ay,1);const my=this._engine.playersByElement.get(l);if(my){let _y=my.indexOf(I);_y>=0&&my.splice(_y,1)}}),this.players.push(I),_d.push(I),I}deregister(l){this._triggers.delete(l),this._engine.statesByElement.forEach(o=>o.delete(l)),this._elementListeners.forEach((o,h)=>{this._elementListeners.set(h,o.filter(y=>y.name!=l))})}clearElementCache(l){this._engine.statesByElement.delete(l),this._elementListeners.delete(l);const o=this._engine.playersByElement.get(l);o&&(o.forEach(h=>h.destroy()),this._engine.playersByElement.delete(l))}_signalRemovalForInnerTriggers(l,o){const h=this._engine.driver.query(l,QD,!0);h.forEach(y=>{if(y[Dx])return;const _=this._engine.fetchNamespacesByElement(y);_.size?_.forEach(I=>I.triggerLeaveAnimation(y,o,!1,!0)):this.clearElementCache(y)}),this._engine.afterFlushAnimationsDone(()=>h.forEach(y=>this.clearElementCache(y)))}triggerLeaveAnimation(l,o,h,y){const _=this._engine.statesByElement.get(l),I=new Map;if(_){const V=[];if(_.forEach(($,_n)=>{if(I.set(_n,$.value),this._triggers.has(_n)){const ha=this.trigger(l,_n,BC,y);ha&&V.push(ha)}}),V.length)return this._engine.markElementAsRemoved(this.id,l,!0,o,I),h&&hT(V).onDone(()=>this._engine.processLeaveNode(l)),!0}return!1}prepareLeaveAnimationListeners(l){const o=this._elementListeners.get(l),h=this._engine.statesByElement.get(l);if(o&&h){const y=new Set;o.forEach(_=>{const I=_.name;if(y.has(I))return;y.add(I);const $=this._triggers.get(I).fallbackTransition,_n=h.get(I)||NP,ha=new PP(BC),Ba=new LP(this.id,I,l);this._engine.totalQueuedPlayers++,this._queue.push({element:l,triggerName:I,transition:$,fromState:_n,toState:ha,player:Ba,isFallbackTransition:!0})})}}removeNode(l,o){const h=this._engine;if(l.childElementCount&&this._signalRemovalForInnerTriggers(l,o),this.triggerLeaveAnimation(l,o,!0))return;let y=!1;if(h.totalAnimations){const _=h.players.length?h.playersByQueriedElement.get(l):[];if(_&&_.length)y=!0;else{let I=l;for(;I=I.parentNode;)if(h.statesByElement.get(I)){y=!0;break}}}if(this.prepareLeaveAnimationListeners(l),y)h.markElementAsRemoved(this.id,l,!1,o);else{const _=l[Dx];(!_||_===OV)&&(h.afterFlush(()=>this.clearElementCache(l)),h.destroyInnerAnimations(l),h._onRemovalComplete(l,o))}}insertNode(l,o){Ix(l,this._hostClassName)}drainQueuedTransitions(l){const o=[];return this._queue.forEach(h=>{const y=h.player;if(y.destroyed)return;const _=h.element,I=this._elementListeners.get(_);I&&I.forEach(V=>{if(V.name==h.triggerName){const $=vP(_,h.triggerName,h.fromState.value,h.toState.value);$._data=l,gP(h.player,V.phase,$,V.callback)}}),y.markedForDestroy?this._engine.afterFlush(()=>{y.destroy()}):o.push(h)}),this._queue=[],o.sort((h,y)=>{const _=h.transition.ast.depCount,I=y.transition.ast.depCount;return 0==_||0==I?_-I:this._engine.driver.containsElement(h.element,y.element)?1:-1})}destroy(l){this.players.forEach(o=>o.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,l)}elementContainsData(l){let o=!1;return this._elementListeners.has(l)&&(o=!0),o=!!this._queue.find(h=>h.element===l)||o,o}}class jet{_onRemovalComplete(l,o){this.onRemovalComplete(l,o)}constructor(l,o,h){this.bodyNode=l,this.driver=o,this._normalizer=h,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(y,_)=>{}}get queuedPlayers(){const l=[];return this._namespaceList.forEach(o=>{o.players.forEach(h=>{h.queued&&l.push(h)})}),l}createNamespace(l,o){const h=new Fet(l,o,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,o)?this._balanceNamespaceList(h,o):(this.newHostElements.set(o,h),this.collectEnterElement(o)),this._namespaceLookup[l]=h}_balanceNamespaceList(l,o){const h=this._namespaceList,y=this.namespacesByHostElement;if(h.length-1>=0){let I=!1,V=this.driver.getParentElement(o);for(;V;){const $=y.get(V);if($){const _n=h.indexOf($);h.splice(_n+1,0,l),I=!0;break}V=this.driver.getParentElement(V)}I||h.unshift(l)}else h.push(l);return y.set(o,l),l}register(l,o){let h=this._namespaceLookup[l];return h||(h=this.createNamespace(l,o)),h}registerTrigger(l,o,h){let y=this._namespaceLookup[l];y&&y.register(o,h)&&this.totalAnimations++}destroy(l,o){if(!l)return;const h=this._fetchNamespace(l);this.afterFlush(()=>{this.namespacesByHostElement.delete(h.hostElement),delete this._namespaceLookup[l];const y=this._namespaceList.indexOf(h);y>=0&&this._namespaceList.splice(y,1)}),this.afterFlushAnimationsDone(()=>h.destroy(o))}_fetchNamespace(l){return this._namespaceLookup[l]}fetchNamespacesByElement(l){const o=new Set,h=this.statesByElement.get(l);if(h)for(let y of h.values())if(y.namespaceId){const _=this._fetchNamespace(y.namespaceId);_&&o.add(_)}return o}trigger(l,o,h,y){if(lI(o)){const _=this._fetchNamespace(l);if(_)return _.trigger(o,h,y),!0}return!1}insertNode(l,o,h,y){if(!lI(o))return;const _=o[Dx];if(_&&_.setForRemoval){_.setForRemoval=!1,_.setForMove=!0;const I=this.collectedLeaveElements.indexOf(o);I>=0&&this.collectedLeaveElements.splice(I,1)}if(l){const I=this._fetchNamespace(l);I&&I.insertNode(o,h)}y&&this.collectEnterElement(o)}collectEnterElement(l){this.collectedEnterElements.push(l)}markElementAsDisabled(l,o){o?this.disabledNodes.has(l)||(this.disabledNodes.add(l),Ix(l,RP)):this.disabledNodes.has(l)&&(this.disabledNodes.delete(l),oS(l,RP))}removeNode(l,o,h){if(lI(o)){const y=l?this._fetchNamespace(l):null;y?y.removeNode(o,h):this.markElementAsRemoved(l,o,!1,h);const _=this.namespacesByHostElement.get(o);_&&_.id!==l&&_.removeNode(o,h)}else this._onRemovalComplete(o,h)}markElementAsRemoved(l,o,h,y,_){this.collectedLeaveElements.push(o),o[Dx]={namespaceId:l,setForRemoval:y,hasAnimation:h,removedBeforeQueried:!1,previousTriggersValues:_}}listen(l,o,h,y,_){return lI(o)?this._fetchNamespace(l).listen(o,h,y,_):()=>{}}_buildInstruction(l,o,h,y,_){return l.transition.build(this.driver,l.element,l.fromState.value,l.toState.value,h,y,l.fromState.options,l.toState.options,o,_)}destroyInnerAnimations(l){let o=this.driver.query(l,QD,!0);o.forEach(h=>this.destroyActiveAnimationsForElement(h)),0!=this.playersByQueriedElement.size&&(o=this.driver.query(l,xP,!0),o.forEach(h=>this.finishActiveQueriedAnimationOnElement(h)))}destroyActiveAnimationsForElement(l){const o=this.playersByElement.get(l);o&&o.forEach(h=>{h.queued?h.markedForDestroy=!0:h.destroy()})}finishActiveQueriedAnimationOnElement(l){const o=this.playersByQueriedElement.get(l);o&&o.forEach(h=>h.finish())}whenRenderingDone(){return new Promise(l=>{if(this.players.length)return hT(this.players).onDone(()=>l());l()})}processLeaveNode(l){const o=l[Dx];if(o&&o.setForRemoval){if(l[Dx]=OV,o.namespaceId){this.destroyInnerAnimations(l);const h=this._fetchNamespace(o.namespaceId);h&&h.clearElementCache(l)}this._onRemovalComplete(l,o.setForRemoval)}l.classList?.contains(RP)&&this.markElementAsDisabled(l,!1),this.driver.query(l,".ng-animate-disabled",!0).forEach(h=>{this.markElementAsDisabled(h,!1)})}flush(l=-1){let o=[];if(this.newHostElements.size&&(this.newHostElements.forEach((h,y)=>this._balanceNamespaceList(h,y)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let h=0;h<this.collectedEnterElements.length;h++)Ix(this.collectedEnterElements[h],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const h=[];try{o=this._flushAnimations(h,l)}finally{for(let y=0;y<h.length;y++)h[y]()}}else for(let h=0;h<this.collectedLeaveElements.length;h++)this.processLeaveNode(this.collectedLeaveElements[h]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(h=>h()),this._flushFns=[],this._whenQuietFns.length){const h=this._whenQuietFns;this._whenQuietFns=[],o.length?hT(o).onDone(()=>{h.forEach(y=>y())}):h.forEach(y=>y())}}reportError(l){throw function jtt(s){return new py(3402,!1)}()}_flushAnimations(l,o){const h=new oI,y=[],_=new Map,I=[],V=new Map,$=new Map,_n=new Map,ha=new Set;this.disabledNodes.forEach(n_=>{ha.add(n_);const f_=this.driver.query(n_,".ng-animate-queued",!0);for(let __=0;__<f_.length;__++)ha.add(f_[__])});const Ba=this.bodyNode,_d=Array.from(this.statesByElement.keys()),mg=NV(_d,this.collectedEnterElements),iy=new Map;let ay=0;mg.forEach((n_,f_)=>{const __=wP+ay++;iy.set(f_,__),n_.forEach(r0=>Ix(r0,__))});const my=[],_y=new Set,fy=new Set;for(let n_=0;n_<this.collectedLeaveElements.length;n_++){const f_=this.collectedLeaveElements[n_],__=f_[Dx];__&&__.setForRemoval&&(my.push(f_),_y.add(f_),__.hasAnimation?this.driver.query(f_,".ng-star-inserted",!0).forEach(r0=>_y.add(r0)):fy.add(f_))}const Vy=new Map,t_=NV(_d,Array.from(_y));t_.forEach((n_,f_)=>{const __=ZD+ay++;Vy.set(f_,__),n_.forEach(r0=>Ix(r0,__))}),l.push(()=>{mg.forEach((n_,f_)=>{const __=iy.get(f_);n_.forEach(r0=>oS(r0,__))}),t_.forEach((n_,f_)=>{const __=Vy.get(f_);n_.forEach(r0=>oS(r0,__))}),my.forEach(n_=>{this.processLeaveNode(n_)})});const h_=[],y0=[];for(let n_=this._namespaceList.length-1;n_>=0;n_--)this._namespaceList[n_].drainQueuedTransitions(o).forEach(__=>{const r0=__.player,m1=__.element;if(h_.push(r0),this.collectedEnterElements.length){const I1=m1[Dx];if(I1&&I1.setForMove){if(I1.previousTriggersValues&&I1.previousTriggersValues.has(__.triggerName)){const lA=I1.previousTriggersValues.get(__.triggerName),Ox=this.statesByElement.get(__.element);if(Ox&&Ox.has(__.triggerName)){const e2=Ox.get(__.triggerName);e2.value=lA,Ox.set(__.triggerName,e2)}}return void r0.destroy()}}const wE=!Ba||!this.driver.containsElement(Ba,m1),gx=Vy.get(m1),_T=iy.get(m1),U0=this._buildInstruction(__,h,_T,gx,wE);if(U0.errors&&U0.errors.length)return void y0.push(U0);if(wE)return r0.onStart(()=>WT(m1,U0.fromStyles)),r0.onDestroy(()=>gE(m1,U0.toStyles)),void y.push(r0);if(__.isFallbackTransition)return r0.onStart(()=>WT(m1,U0.fromStyles)),r0.onDestroy(()=>gE(m1,U0.toStyles)),void y.push(r0);const SH=[];U0.timelines.forEach(I1=>{I1.stretchStartingKeyframe=!0,this.disabledNodes.has(I1.element)||SH.push(I1)}),U0.timelines=SH,h.append(m1,U0.timelines),I.push({instruction:U0,player:r0,element:m1}),U0.queriedElements.forEach(I1=>fx(V,I1,[]).push(r0)),U0.preStyleProps.forEach((I1,lA)=>{if(I1.size){let Ox=$.get(lA);Ox||$.set(lA,Ox=new Set),I1.forEach((e2,jN)=>Ox.add(jN))}}),U0.postStyleProps.forEach((I1,lA)=>{let Ox=_n.get(lA);Ox||_n.set(lA,Ox=new Set),I1.forEach((e2,jN)=>Ox.add(jN))})});if(y0.length){const n_=[];y0.forEach(f_=>{n_.push(function Btt(s,l){return new py(3505,!1)}())}),h_.forEach(f_=>f_.destroy()),this.reportError(n_)}const _b=new Map,qx=new Map;I.forEach(n_=>{const f_=n_.element;h.has(f_)&&(qx.set(f_,f_),this._beforeAnimationBuild(n_.player.namespaceId,n_.instruction,_b))}),y.forEach(n_=>{const f_=n_.element;this._getPreviousPlayers(f_,!1,n_.namespaceId,n_.triggerName,null).forEach(r0=>{fx(_b,f_,[]).push(r0),r0.destroy()})});const Wx=my.filter(n_=>FV(n_,$,_n)),ZE=new Map;PV(ZE,this.driver,fy,_n,$E).forEach(n_=>{FV(n_,$,_n)&&Wx.push(n_)});const pM=new Map;mg.forEach((n_,f_)=>{PV(pM,this.driver,new Set(n_),$,"!")}),Wx.forEach(n_=>{const f_=ZE.get(n_),__=pM.get(n_);ZE.set(n_,new Map([...f_?.entries()??[],...__?.entries()??[]]))});const aA=[],TH=[],AH={};I.forEach(n_=>{const{element:f_,player:__,instruction:r0}=n_;if(h.has(f_)){if(ha.has(f_))return __.onDestroy(()=>gE(f_,r0.toStyles)),__.disabled=!0,__.overrideTotalTime(r0.totalTime),void y.push(__);let m1=AH;if(qx.size>1){let gx=f_;const _T=[];for(;gx=gx.parentNode;){const U0=qx.get(gx);if(U0){m1=U0;break}_T.push(gx)}_T.forEach(U0=>qx.set(U0,m1))}const wE=this._buildAnimation(__.namespaceId,r0,_b,_,pM,ZE);if(__.setRealPlayer(wE),m1===AH)aA.push(__);else{const gx=this.playersByElement.get(m1);gx&&gx.length&&(__.parentPlayer=hT(gx)),y.push(__)}}else WT(f_,r0.fromStyles),__.onDestroy(()=>gE(f_,r0.toStyles)),TH.push(__),ha.has(f_)&&y.push(__)}),TH.forEach(n_=>{const f_=_.get(n_.element);if(f_&&f_.length){const __=hT(f_);n_.setRealPlayer(__)}}),y.forEach(n_=>{n_.parentPlayer?n_.syncPlayerEvents(n_.parentPlayer):n_.destroy()});for(let n_=0;n_<my.length;n_++){const f_=my[n_],__=f_[Dx];if(oS(f_,ZD),__&&__.hasAnimation)continue;let r0=[];if(V.size){let wE=V.get(f_);wE&&wE.length&&r0.push(...wE);let gx=this.driver.query(f_,xP,!0);for(let _T=0;_T<gx.length;_T++){let U0=V.get(gx[_T]);U0&&U0.length&&r0.push(...U0)}}const m1=r0.filter(wE=>!wE.destroyed);m1.length?zet(this,f_,m1):this.processLeaveNode(f_)}return my.length=0,aA.forEach(n_=>{this.players.push(n_),n_.onDone(()=>{n_.destroy();const f_=this.players.indexOf(n_);this.players.splice(f_,1)}),n_.play()}),aA}elementContainsData(l,o){let h=!1;const y=o[Dx];return y&&y.setForRemoval&&(h=!0),this.playersByElement.has(o)&&(h=!0),this.playersByQueriedElement.has(o)&&(h=!0),this.statesByElement.has(o)&&(h=!0),this._fetchNamespace(l).elementContainsData(o)||h}afterFlush(l){this._flushFns.push(l)}afterFlushAnimationsDone(l){this._whenQuietFns.push(l)}_getPreviousPlayers(l,o,h,y,_){let I=[];if(o){const V=this.playersByQueriedElement.get(l);V&&(I=V)}else{const V=this.playersByElement.get(l);if(V){const $=!_||_==BC;V.forEach(_n=>{_n.queued||!$&&_n.triggerName!=y||I.push(_n)})}}return(h||y)&&(I=I.filter(V=>!(h&&h!=V.namespaceId||y&&y!=V.triggerName))),I}_beforeAnimationBuild(l,o,h){const _=o.element,I=o.isRemovalTransition?void 0:l,V=o.isRemovalTransition?void 0:o.triggerName;for(const $ of o.timelines){const _n=$.element,ha=_n!==_,Ba=fx(h,_n,[]);this._getPreviousPlayers(_n,ha,I,V,o.toState).forEach(mg=>{const iy=mg.getRealPlayer();iy.beforeDestroy&&iy.beforeDestroy(),mg.destroy(),Ba.push(mg)})}WT(_,o.fromStyles)}_buildAnimation(l,o,h,y,_,I){const V=o.triggerName,$=o.element,_n=[],ha=new Set,Ba=new Set,_d=o.timelines.map(iy=>{const ay=iy.element;ha.add(ay);const my=ay[Dx];if(my&&my.removedBeforeQueried)return new NC(iy.duration,iy.delay);const _y=ay!==$,fy=function Het(s){const l=[];return LV(s,l),l}((h.get(ay)||Net).map(_b=>_b.getRealPlayer())).filter(_b=>!!_b.element&&_b.element===ay),Vy=_.get(ay),t_=I.get(ay),h_=hV(this._normalizer,iy.keyframes,Vy,t_),y0=this._buildPlayer(iy,h_,fy);if(iy.subTimeline&&y&&Ba.add(ay),_y){const _b=new LP(l,V,ay);_b.setRealPlayer(y0),_n.push(_b)}return y0});_n.forEach(iy=>{fx(this.playersByQueriedElement,iy.element,[]).push(iy),iy.onDone(()=>function Bet(s,l,o){let h=s.get(l);if(h){if(h.length){const y=h.indexOf(o);h.splice(y,1)}0==h.length&&s.delete(l)}return h}(this.playersByQueriedElement,iy.element,iy))}),ha.forEach(iy=>Ix(iy,_V));const mg=hT(_d);return mg.onDestroy(()=>{ha.forEach(iy=>oS(iy,_V)),gE($,o.toStyles)}),Ba.forEach(iy=>{fx(y,iy,[]).push(mg)}),mg}_buildPlayer(l,o,h){return o.length>0?this.driver.animate(l.element,o,l.duration,l.delay,l.easing,h):new NC(l.duration,l.delay)}}class LP{constructor(l,o,h){this.namespaceId=l,this.triggerName=o,this.element=h,this._player=new NC,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(l){this._containsRealPlayer||(this._player=l,this._queuedCallbacks.forEach((o,h)=>{o.forEach(y=>gP(l,h,void 0,y))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(l.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(l){this.totalTime=l}syncPlayerEvents(l){const o=this._player;o.triggerCallback&&l.onStart(()=>o.triggerCallback("start")),l.onDone(()=>this.finish()),l.onDestroy(()=>this.destroy())}_queueEvent(l,o){fx(this._queuedCallbacks,l,[]).push(o)}onDone(l){this.queued&&this._queueEvent("done",l),this._player.onDone(l)}onStart(l){this.queued&&this._queueEvent("start",l),this._player.onStart(l)}onDestroy(l){this.queued&&this._queueEvent("destroy",l),this._player.onDestroy(l)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(l){this.queued||this._player.setPosition(l)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(l){const o=this._player;o.triggerCallback&&o.triggerCallback(l)}}function lI(s){return s&&1===s.nodeType}function RV(s,l){const o=s.style.display;return s.style.display=l??"none",o}function PV(s,l,o,h,y){const _=[];o.forEach($=>_.push(RV($)));const I=[];h.forEach(($,_n)=>{const ha=new Map;$.forEach(Ba=>{const _d=l.computeStyle(_n,Ba,y);ha.set(Ba,_d),(!_d||0==_d.length)&&(_n[Dx]=Let,I.push(_n))}),s.set(_n,ha)});let V=0;return o.forEach($=>RV($,_[V++])),I}function NV(s,l){const o=new Map;if(s.forEach(V=>o.set(V,[])),0==l.length)return o;const y=new Set(l),_=new Map;function I(V){if(!V)return 1;let $=_.get(V);if($)return $;const _n=V.parentNode;return $=o.has(_n)?_n:y.has(_n)?1:I(_n),_.set(V,$),$}return l.forEach(V=>{const $=I(V);1!==$&&o.get($).push(V)}),o}function Ix(s,l){s.classList?.add(l)}function oS(s,l){s.classList?.remove(l)}function zet(s,l,o){hT(o).onDone(()=>s.processLeaveNode(l))}function LV(s,l){for(let o=0;o<s.length;o++){const h=s[o];h instanceof uV?LV(h.players,l):l.push(h)}}function FV(s,l,o){const h=o.get(s);if(!h)return!1;let y=l.get(s);return y?h.forEach(_=>y.add(_)):l.set(s,h),o.delete(s),!0}class cI{constructor(l,o,h){this.bodyNode=l,this._driver=o,this._normalizer=h,this._triggerCache={},this.onRemovalComplete=(y,_)=>{},this._transitionEngine=new jet(l,o,h),this._timelineEngine=new Iet(l,o,h),this._transitionEngine.onRemovalComplete=(y,_)=>this.onRemovalComplete(y,_)}registerTrigger(l,o,h,y,_){const I=l+"-"+y;let V=this._triggerCache[I];if(!V){const $=[],ha=SP(this._driver,_,$,[]);if($.length)throw function Mtt(s,l){return new py(3404,!1)}();V=function Aet(s,l,o){return new Cet(s,l,o)}(y,ha,this._normalizer),this._triggerCache[I]=V}this._transitionEngine.registerTrigger(o,y,V)}register(l,o){this._transitionEngine.register(l,o)}destroy(l,o){this._transitionEngine.destroy(l,o)}onInsert(l,o,h,y){this._transitionEngine.insertNode(l,o,h,y)}onRemove(l,o,h){this._transitionEngine.removeNode(l,o,h)}disableAnimations(l,o){this._transitionEngine.markElementAsDisabled(l,o)}process(l,o,h,y){if("@"==h.charAt(0)){const[_,I]=fV(h);this._timelineEngine.command(_,o,I,y)}else this._transitionEngine.trigger(l,o,h,y)}listen(l,o,h,y,_){if("@"==h.charAt(0)){const[I,V]=fV(h);return this._timelineEngine.listen(I,o,V,_)}return this._transitionEngine.listen(l,o,h,y,_)}flush(l=-1){this._transitionEngine.flush(l)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(l){this._transitionEngine.afterFlushAnimationsDone(l)}}let qet=(()=>{class s{constructor(o,h,y){this._element=o,this._startStyles=h,this._endStyles=y,this._state=0;let _=s.initialStylesByElement.get(o);_||s.initialStylesByElement.set(o,_=new Map),this._initialStyles=_}start(){this._state<1&&(this._startStyles&&gE(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(gE(this._element,this._initialStyles),this._endStyles&&(gE(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(s.initialStylesByElement.delete(this._element),this._startStyles&&(WT(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(WT(this._element,this._endStyles),this._endStyles=null),gE(this._element,this._initialStyles),this._state=3)}}return s.initialStylesByElement=new WeakMap,s})();function FP(s){let l=null;return s.forEach((o,h)=>{(function Wet(s){return"display"===s||"position"===s})(h)&&(l=l||new Map,l.set(h,o))}),l}class jV{constructor(l,o,h,y){this.element=l,this.keyframes=o,this.options=h,this._specialStyles=y,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=h.duration,this._delay=h.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(l=>l()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const l=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,l,this.options),this._finalKeyframe=l.length?l[l.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(l){const o=[];return l.forEach(h=>{o.push(Object.fromEntries(h))}),o}_triggerWebAnimation(l,o,h){return l.animate(this._convertKeyframesToObject(o),h)}onStart(l){this._originalOnStartFns.push(l),this._onStartFns.push(l)}onDone(l){this._originalOnDoneFns.push(l),this._onDoneFns.push(l)}onDestroy(l){this._onDestroyFns.push(l)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(l=>l()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(l=>l()),this._onDestroyFns=[])}setPosition(l){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=l*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const l=new Map;this.hasStarted()&&this._finalKeyframe.forEach((h,y)=>{"offset"!==y&&l.set(y,this._finished?h:EV(this.element,y))}),this.currentSnapshot=l}triggerCallback(l){const o="start"===l?this._onStartFns:this._onDoneFns;o.forEach(h=>h()),o.length=0}}class Yet{validateStyleProperty(l){return!0}validateAnimatableStyleProperty(l){return!0}matchesElement(l,o){return!1}containsElement(l,o){return mV(l,o)}getParentElement(l){return _P(l)}query(l,o,h){return gV(l,o,h)}computeStyle(l,o,h){return window.getComputedStyle(l)[o]}animate(l,o,h,y,_,I=[]){const $={duration:h,delay:y,fill:0==y?"both":"forwards"};_&&($.easing=_);const _n=new Map,ha=I.filter(mg=>mg instanceof jV);(function Ztt(s,l){return 0===s||0===l})(h,y)&&ha.forEach(mg=>{mg.currentSnapshot.forEach((iy,ay)=>_n.set(ay,iy))});let Ba=function Ytt(s){return s.length?s[0]instanceof Map?s:s.map(l=>bV(l)):[]}(o).map(mg=>fT(mg));Ba=function Jtt(s,l,o){if(o.size&&l.length){let h=l[0],y=[];if(o.forEach((_,I)=>{h.has(I)||y.push(I),h.set(I,_)}),y.length)for(let _=1;_<l.length;_++){let I=l[_];y.forEach(V=>I.set(V,EV(s,V)))}}return l}(l,Ba,_n);const _d=function $et(s,l){let o=null,h=null;return Array.isArray(l)&&l.length?(o=FP(l[0]),l.length>1&&(h=FP(l[l.length-1]))):l instanceof Map&&(o=FP(l)),o||h?new qet(s,o,h):null}(l,Ba);return new jV(l,Ba,$,_d)}}let Ket=(()=>{class s extends lV{constructor(o,h){super(),this._nextAnimationId=0,this._renderer=o.createRenderer(h.body,{id:"0",encapsulation:E1.None,styles:[],data:{animation:[]}})}build(o){const h=this._nextAnimationId.toString();this._nextAnimationId++;const y=Array.isArray(o)?cV(o):o;return BV(this._renderer,null,h,"register",[y]),new Xet(h,this._renderer)}}return s.\u0275fac=function(o){return new(o||s)(Py(sC),Py(m0))},s.\u0275prov=ry({token:s,factory:s.\u0275fac}),s})();class Xet extends ott{constructor(l,o){super(),this._id=l,this._renderer=o}create(l,o){return new Zet(this._id,l,o||{},this._renderer)}}class Zet{constructor(l,o,h,y){this.id=l,this.element=o,this._renderer=y,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",h)}_listen(l,o){return this._renderer.listen(this.element,`@@${this.id}:${l}`,o)}_command(l,...o){return BV(this._renderer,this.element,this.id,l,o)}onDone(l){this._listen("done",l)}onStart(l){this._listen("start",l)}onDestroy(l){this._listen("destroy",l)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(l){this._command("setPosition",l)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function BV(s,l,o,h,y){return s.setProperty(l,`@@${o}:${h}`,y)}const VV="@.disabled";let Jet=(()=>{class s{constructor(o,h,y){this.delegate=o,this.engine=h,this._zone=y,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,h.onRemovalComplete=(_,I)=>{const V=I?.parentNode(_);V&&I.removeChild(V,_)}}createRenderer(o,h){const _=this.delegate.createRenderer(o,h);if(!(o&&h&&h.data&&h.data.animation)){let ha=this._rendererCache.get(_);return ha||(ha=new UV("",_,this.engine,()=>this._rendererCache.delete(_)),this._rendererCache.set(_,ha)),ha}const I=h.id,V=h.id+"-"+this._currentId;this._currentId++,this.engine.register(V,o);const $=ha=>{Array.isArray(ha)?ha.forEach($):this.engine.registerTrigger(I,V,o,ha.name,ha)};return h.data.animation.forEach($),new Qet(this,V,_,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(o,h,y){o>=0&&o<this._microtaskId?this._zone.run(()=>h(y)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(_=>{const[I,V]=_;I(V)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([h,y]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return s.\u0275fac=function(o){return new(o||s)(Py(sC),Py(cI),Py(H_))},s.\u0275prov=ry({token:s,factory:s.\u0275fac}),s})();class UV{constructor(l,o,h,y){this.namespaceId=l,this.delegate=o,this.engine=h,this._onDestroy=y}get data(){return this.delegate.data}destroyNode(l){this.delegate.destroyNode?.(l)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(l,o){return this.delegate.createElement(l,o)}createComment(l){return this.delegate.createComment(l)}createText(l){return this.delegate.createText(l)}appendChild(l,o){this.delegate.appendChild(l,o),this.engine.onInsert(this.namespaceId,o,l,!1)}insertBefore(l,o,h,y=!0){this.delegate.insertBefore(l,o,h),this.engine.onInsert(this.namespaceId,o,l,y)}removeChild(l,o,h){this.engine.onRemove(this.namespaceId,o,this.delegate)}selectRootElement(l,o){return this.delegate.selectRootElement(l,o)}parentNode(l){return this.delegate.parentNode(l)}nextSibling(l){return this.delegate.nextSibling(l)}setAttribute(l,o,h,y){this.delegate.setAttribute(l,o,h,y)}removeAttribute(l,o,h){this.delegate.removeAttribute(l,o,h)}addClass(l,o){this.delegate.addClass(l,o)}removeClass(l,o){this.delegate.removeClass(l,o)}setStyle(l,o,h,y){this.delegate.setStyle(l,o,h,y)}removeStyle(l,o,h){this.delegate.removeStyle(l,o,h)}setProperty(l,o,h){"@"==o.charAt(0)&&o==VV?this.disableAnimations(l,!!h):this.delegate.setProperty(l,o,h)}setValue(l,o){this.delegate.setValue(l,o)}listen(l,o,h){return this.delegate.listen(l,o,h)}disableAnimations(l,o){this.engine.disableAnimations(l,o)}}class Qet extends UV{constructor(l,o,h,y,_){super(o,h,y,_),this.factory=l,this.namespaceId=o}setProperty(l,o,h){"@"==o.charAt(0)?"."==o.charAt(1)&&o==VV?this.disableAnimations(l,h=void 0===h||!!h):this.engine.process(this.namespaceId,l,o.slice(1),h):this.delegate.setProperty(l,o,h)}listen(l,o,h){if("@"==o.charAt(0)){const y=function tnt(s){switch(s){case"body":return document.body;case"document":return document;case"window":return window;default:return s}}(l);let _=o.slice(1),I="";return"@"!=_.charAt(0)&&([_,I]=function ent(s){const l=s.indexOf(".");return[s.substring(0,l),s.slice(l+1)]}(_)),this.engine.listen(this.namespaceId,y,_,I,V=>{this.factory.scheduleListenerCallback(V._data||-1,h,V)})}return this.delegate.listen(l,o,h)}}const zV=[{provide:lV,useClass:Ket},{provide:kP,useFactory:function rnt(){return new wet}},{provide:cI,useClass:(()=>{class s extends cI{constructor(o,h,y,_){super(o.body,h,y)}ngOnDestroy(){this.flush()}}return s.\u0275fac=function(o){return new(o||s)(Py(m0),Py(bP),Py(kP),Py(UT))},s.\u0275prov=ry({token:s,factory:s.\u0275fac}),s})()},{provide:sC,useFactory:function int(s,l,o){return new Jet(s,l,o)},deps:[uP,cI,H_]}],jP=[{provide:bP,useFactory:()=>new Yet},{provide:VA,useValue:"BrowserAnimations"},...zV],HV=[{provide:bP,useClass:yV},{provide:VA,useValue:"NoopAnimations"},...zV];let ont=(()=>{class s{static withConfig(o){return{ngModule:s,providers:o.disableAnimations?HV:jP}}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=L0({type:s}),s.\u0275inj=xy({providers:jP,imports:[nV]}),s})();function sS(s,l){return d(l)?yy(s,l,1):yy(s,1)}function Hx(s,l){return X_((o,h)=>{let y=0;o.subscribe(N_(h,_=>s.call(l,_,y++)&&h.next(_)))})}function aS(s){return X_((l,o)=>{try{l.subscribe(o)}finally{o.add(s)}})}class dI{}class hI{}class yE{constructor(l){this.normalizedNames=new Map,this.lazyUpdate=null,l?"string"==typeof l?this.lazyInit=()=>{this.headers=new Map,l.split("\n").forEach(o=>{const h=o.indexOf(":");if(h>0){const y=o.slice(0,h),_=y.toLowerCase(),I=o.slice(h+1).trim();this.maybeSetNormalizedName(y,_),this.headers.has(_)?this.headers.get(_).push(I):this.headers.set(_,[I])}})}:typeof Headers<"u"&&l instanceof Headers?(this.headers=new Map,l.forEach((o,h)=>{this.setHeaderEntries(h,o)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(l).forEach(([o,h])=>{this.setHeaderEntries(o,h)})}:this.headers=new Map}has(l){return this.init(),this.headers.has(l.toLowerCase())}get(l){this.init();const o=this.headers.get(l.toLowerCase());return o&&o.length>0?o[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(l){return this.init(),this.headers.get(l.toLowerCase())||null}append(l,o){return this.clone({name:l,value:o,op:"a"})}set(l,o){return this.clone({name:l,value:o,op:"s"})}delete(l,o){return this.clone({name:l,value:o,op:"d"})}maybeSetNormalizedName(l,o){this.normalizedNames.has(o)||this.normalizedNames.set(o,l)}init(){this.lazyInit&&(this.lazyInit instanceof yE?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(l=>this.applyUpdate(l)),this.lazyUpdate=null))}copyFrom(l){l.init(),Array.from(l.headers.keys()).forEach(o=>{this.headers.set(o,l.headers.get(o)),this.normalizedNames.set(o,l.normalizedNames.get(o))})}clone(l){const o=new yE;return o.lazyInit=this.lazyInit&&this.lazyInit instanceof yE?this.lazyInit:this,o.lazyUpdate=(this.lazyUpdate||[]).concat([l]),o}applyUpdate(l){const o=l.name.toLowerCase();switch(l.op){case"a":case"s":let h=l.value;if("string"==typeof h&&(h=[h]),0===h.length)return;this.maybeSetNormalizedName(l.name,o);const y=("a"===l.op?this.headers.get(o):void 0)||[];y.push(...h),this.headers.set(o,y);break;case"d":const _=l.value;if(_){let I=this.headers.get(o);if(!I)return;I=I.filter(V=>-1===_.indexOf(V)),0===I.length?(this.headers.delete(o),this.normalizedNames.delete(o)):this.headers.set(o,I)}else this.headers.delete(o),this.normalizedNames.delete(o)}}setHeaderEntries(l,o){const h=(Array.isArray(o)?o:[o]).map(_=>_.toString()),y=l.toLowerCase();this.headers.set(y,h),this.maybeSetNormalizedName(l,y)}forEach(l){this.init(),Array.from(this.normalizedNames.keys()).forEach(o=>l(this.normalizedNames.get(o),this.headers.get(o)))}}class snt{encodeKey(l){return GV(l)}encodeValue(l){return GV(l)}decodeKey(l){return decodeURIComponent(l)}decodeValue(l){return decodeURIComponent(l)}}const lnt=/%(\d[a-f0-9])/gi,cnt={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function GV(s){return encodeURIComponent(s).replace(lnt,(l,o)=>cnt[o]??l)}function fI(s){return`${s}`}class pT{constructor(l={}){if(this.updates=null,this.cloneFrom=null,this.encoder=l.encoder||new snt,l.fromString){if(l.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function ant(s,l){const o=new Map;return s.length>0&&s.replace(/^\?/,"").split("&").forEach(y=>{const _=y.indexOf("="),[I,V]=-1==_?[l.decodeKey(y),""]:[l.decodeKey(y.slice(0,_)),l.decodeValue(y.slice(_+1))],$=o.get(I)||[];$.push(V),o.set(I,$)}),o}(l.fromString,this.encoder)}else l.fromObject?(this.map=new Map,Object.keys(l.fromObject).forEach(o=>{const h=l.fromObject[o],y=Array.isArray(h)?h.map(fI):[fI(h)];this.map.set(o,y)})):this.map=null}has(l){return this.init(),this.map.has(l)}get(l){this.init();const o=this.map.get(l);return o?o[0]:null}getAll(l){return this.init(),this.map.get(l)||null}keys(){return this.init(),Array.from(this.map.keys())}append(l,o){return this.clone({param:l,value:o,op:"a"})}appendAll(l){const o=[];return Object.keys(l).forEach(h=>{const y=l[h];Array.isArray(y)?y.forEach(_=>{o.push({param:h,value:_,op:"a"})}):o.push({param:h,value:y,op:"a"})}),this.clone(o)}set(l,o){return this.clone({param:l,value:o,op:"s"})}delete(l,o){return this.clone({param:l,value:o,op:"d"})}toString(){return this.init(),this.keys().map(l=>{const o=this.encoder.encodeKey(l);return this.map.get(l).map(h=>o+"="+this.encoder.encodeValue(h)).join("&")}).filter(l=>""!==l).join("&")}clone(l){const o=new pT({encoder:this.encoder});return o.cloneFrom=this.cloneFrom||this,o.updates=(this.updates||[]).concat(l),o}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(l=>this.map.set(l,this.cloneFrom.map.get(l))),this.updates.forEach(l=>{switch(l.op){case"a":case"s":const o=("a"===l.op?this.map.get(l.param):void 0)||[];o.push(fI(l.value)),this.map.set(l.param,o);break;case"d":if(void 0===l.value){this.map.delete(l.param);break}{let h=this.map.get(l.param)||[];const y=h.indexOf(fI(l.value));-1!==y&&h.splice(y,1),h.length>0?this.map.set(l.param,h):this.map.delete(l.param)}}}),this.cloneFrom=this.updates=null)}}class unt{constructor(){this.map=new Map}set(l,o){return this.map.set(l,o),this}get(l){return this.map.has(l)||this.map.set(l,l.defaultValue()),this.map.get(l)}delete(l){return this.map.delete(l),this}has(l){return this.map.has(l)}keys(){return this.map.keys()}}function $V(s){return typeof ArrayBuffer<"u"&&s instanceof ArrayBuffer}function qV(s){return typeof Blob<"u"&&s instanceof Blob}function WV(s){return typeof FormData<"u"&&s instanceof FormData}class VC{constructor(l,o,h,y){let _;if(this.url=o,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=l.toUpperCase(),function dnt(s){switch(s){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||y?(this.body=void 0!==h?h:null,_=y):_=h,_&&(this.reportProgress=!!_.reportProgress,this.withCredentials=!!_.withCredentials,_.responseType&&(this.responseType=_.responseType),_.headers&&(this.headers=_.headers),_.context&&(this.context=_.context),_.params&&(this.params=_.params)),this.headers||(this.headers=new yE),this.context||(this.context=new unt),this.params){const I=this.params.toString();if(0===I.length)this.urlWithParams=o;else{const V=o.indexOf("?");this.urlWithParams=o+(-1===V?"?":V<o.length-1?"&":"")+I}}else this.params=new pT,this.urlWithParams=o}serializeBody(){return null===this.body?null:$V(this.body)||qV(this.body)||WV(this.body)||function hnt(s){return typeof URLSearchParams<"u"&&s instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof pT?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||WV(this.body)?null:qV(this.body)?this.body.type||null:$V(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof pT?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(l={}){const o=l.method||this.method,h=l.url||this.url,y=l.responseType||this.responseType,_=void 0!==l.body?l.body:this.body,I=void 0!==l.withCredentials?l.withCredentials:this.withCredentials,V=void 0!==l.reportProgress?l.reportProgress:this.reportProgress;let $=l.headers||this.headers,_n=l.params||this.params;const ha=l.context??this.context;return void 0!==l.setHeaders&&($=Object.keys(l.setHeaders).reduce((Ba,_d)=>Ba.set(_d,l.setHeaders[_d]),$)),l.setParams&&(_n=Object.keys(l.setParams).reduce((Ba,_d)=>Ba.set(_d,l.setParams[_d]),_n)),new VC(o,h,_,{params:_n,headers:$,context:ha,reportProgress:V,responseType:y,withCredentials:I})}}var rb=(()=>((rb=rb||{})[rb.Sent=0]="Sent",rb[rb.UploadProgress=1]="UploadProgress",rb[rb.ResponseHeader=2]="ResponseHeader",rb[rb.DownloadProgress=3]="DownloadProgress",rb[rb.Response=4]="Response",rb[rb.User=5]="User",rb))();class BP{constructor(l,o=200,h="OK"){this.headers=l.headers||new yE,this.status=void 0!==l.status?l.status:o,this.statusText=l.statusText||h,this.url=l.url||null,this.ok=this.status>=200&&this.status<300}}class VP extends BP{constructor(l={}){super(l),this.type=rb.ResponseHeader}clone(l={}){return new VP({headers:l.headers||this.headers,status:void 0!==l.status?l.status:this.status,statusText:l.statusText||this.statusText,url:l.url||this.url||void 0})}}class lS extends BP{constructor(l={}){super(l),this.type=rb.Response,this.body=void 0!==l.body?l.body:null}clone(l={}){return new lS({body:void 0!==l.body?l.body:this.body,headers:l.headers||this.headers,status:void 0!==l.status?l.status:this.status,statusText:l.statusText||this.statusText,url:l.url||this.url||void 0})}}class YV extends BP{constructor(l){super(l,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${l.url||"(unknown url)"}`:`Http failure response for ${l.url||"(unknown url)"}: ${l.status} ${l.statusText}`,this.error=l.error||null}}function UP(s,l){return{body:l,headers:s.headers,context:s.context,observe:s.observe,params:s.params,reportProgress:s.reportProgress,responseType:s.responseType,withCredentials:s.withCredentials}}let pI=(()=>{class s{constructor(o){this.handler=o}request(o,h,y={}){let _;if(o instanceof VC)_=o;else{let $,_n;$=y.headers instanceof yE?y.headers:new yE(y.headers),y.params&&(_n=y.params instanceof pT?y.params:new pT({fromObject:y.params})),_=new VC(o,h,void 0!==y.body?y.body:null,{headers:$,context:y.context,params:_n,reportProgress:y.reportProgress,responseType:y.responseType||"json",withCredentials:y.withCredentials})}const I=s_(_).pipe(sS($=>this.handler.handle($)));if(o instanceof VC||"events"===y.observe)return I;const V=I.pipe(Hx($=>$ instanceof lS));switch(y.observe||"body"){case"body":switch(_.responseType){case"arraybuffer":return V.pipe(c_($=>{if(null!==$.body&&!($.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return $.body}));case"blob":return V.pipe(c_($=>{if(null!==$.body&&!($.body instanceof Blob))throw new Error("Response is not a Blob.");return $.body}));case"text":return V.pipe(c_($=>{if(null!==$.body&&"string"!=typeof $.body)throw new Error("Response is not a string.");return $.body}));default:return V.pipe(c_($=>$.body))}case"response":return V;default:throw new Error(`Unreachable: unhandled observe type ${y.observe}}`)}}delete(o,h={}){return this.request("DELETE",o,h)}get(o,h={}){return this.request("GET",o,h)}head(o,h={}){return this.request("HEAD",o,h)}jsonp(o,h){return this.request("JSONP",o,{params:(new pT).append(h,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(o,h={}){return this.request("OPTIONS",o,h)}patch(o,h,y={}){return this.request("PATCH",o,UP(y,h))}post(o,h,y={}){return this.request("POST",o,UP(y,h))}put(o,h,y={}){return this.request("PUT",o,UP(y,h))}}return s.\u0275fac=function(o){return new(o||s)(Py(dI))},s.\u0275prov=ry({token:s,factory:s.\u0275fac}),s})();function ZV(s,l){return l(s)}function pnt(s,l){return(o,h)=>l.intercept(o,{handle:y=>s(y,h)})}const gnt=new Fy(""),UC=new Fy(""),JV=new Fy("");function ynt(){let s=null;return(l,o)=>{null===s&&(s=(Ry(gnt,{optional:!0})??[]).reduceRight(pnt,ZV));const h=Ry(DD),y=h.add();return s(l,o).pipe(aS(()=>h.remove(y)))}}let QV=(()=>{class s extends dI{constructor(o,h){super(),this.backend=o,this.injector=h,this.chain=null,this.pendingTasks=Ry(DD)}handle(o){if(null===this.chain){const y=Array.from(new Set([...this.injector.get(UC),...this.injector.get(JV,[])]));this.chain=y.reduceRight((_,I)=>function mnt(s,l,o){return(h,y)=>o.runInContext(()=>l(h,_=>s(_,y)))}(_,I,this.injector),ZV)}const h=this.pendingTasks.add();return this.chain(o,y=>this.backend.handle(y)).pipe(aS(()=>this.pendingTasks.remove(h)))}}return s.\u0275fac=function(o){return new(o||s)(Py(hI),Py(oE))},s.\u0275prov=ry({token:s,factory:s.\u0275fac}),s})();const wnt=/^\)\]\}',?\n/;let e8=(()=>{class s{constructor(o){this.xhrFactory=o}handle(o){if("JSONP"===o.method)throw new py(-2800,!1);const h=this.xhrFactory;return(h.\u0275loadImpl?u0(h.\u0275loadImpl()):s_(null)).pipe(D0(()=>new qy(_=>{const I=h.build();if(I.open(o.method,o.urlWithParams),o.withCredentials&&(I.withCredentials=!0),o.headers.forEach((ay,my)=>I.setRequestHeader(ay,my.join(","))),o.headers.has("Accept")||I.setRequestHeader("Accept","application/json, text/plain, */*"),!o.headers.has("Content-Type")){const ay=o.detectContentTypeHeader();null!==ay&&I.setRequestHeader("Content-Type",ay)}if(o.responseType){const ay=o.responseType.toLowerCase();I.responseType="json"!==ay?ay:"text"}const V=o.serializeBody();let $=null;const _n=()=>{if(null!==$)return $;const ay=I.statusText||"OK",my=new yE(I.getAllResponseHeaders()),_y=function xnt(s){return"responseURL"in s&&s.responseURL?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):null}(I)||o.url;return $=new VP({headers:my,status:I.status,statusText:ay,url:_y}),$},ha=()=>{let{headers:ay,status:my,statusText:_y,url:fy}=_n(),Vy=null;204!==my&&(Vy=typeof I.response>"u"?I.responseText:I.response),0===my&&(my=Vy?200:0);let t_=my>=200&&my<300;if("json"===o.responseType&&"string"==typeof Vy){const h_=Vy;Vy=Vy.replace(wnt,"");try{Vy=""!==Vy?JSON.parse(Vy):null}catch(y0){Vy=h_,t_&&(t_=!1,Vy={error:y0,text:Vy})}}t_?(_.next(new lS({body:Vy,headers:ay,status:my,statusText:_y,url:fy||void 0})),_.complete()):_.error(new YV({error:Vy,headers:ay,status:my,statusText:_y,url:fy||void 0}))},Ba=ay=>{const{url:my}=_n(),_y=new YV({error:ay,status:I.status||0,statusText:I.statusText||"Unknown Error",url:my||void 0});_.error(_y)};let _d=!1;const mg=ay=>{_d||(_.next(_n()),_d=!0);let my={type:rb.DownloadProgress,loaded:ay.loaded};ay.lengthComputable&&(my.total=ay.total),"text"===o.responseType&&I.responseText&&(my.partialText=I.responseText),_.next(my)},iy=ay=>{let my={type:rb.UploadProgress,loaded:ay.loaded};ay.lengthComputable&&(my.total=ay.total),_.next(my)};return I.addEventListener("load",ha),I.addEventListener("error",Ba),I.addEventListener("timeout",Ba),I.addEventListener("abort",Ba),o.reportProgress&&(I.addEventListener("progress",mg),null!==V&&I.upload&&I.upload.addEventListener("progress",iy)),I.send(V),_.next({type:rb.Sent}),()=>{I.removeEventListener("error",Ba),I.removeEventListener("abort",Ba),I.removeEventListener("load",ha),I.removeEventListener("timeout",Ba),o.reportProgress&&(I.removeEventListener("progress",mg),null!==V&&I.upload&&I.upload.removeEventListener("progress",iy)),I.readyState!==I.DONE&&I.abort()}})))}}return s.\u0275fac=function(o){return new(o||s)(Py(R6))},s.\u0275prov=ry({token:s,factory:s.\u0275fac}),s})();const zP=new Fy("XSRF_ENABLED"),n8=new Fy("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),r8=new Fy("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class i8{}let Ant=(()=>{class s{constructor(o,h,y){this.doc=o,this.platform=h,this.cookieName=y,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const o=this.doc.cookie||"";return o!==this.lastCookieString&&(this.parseCount++,this.lastToken=b6(o,this.cookieName),this.lastCookieString=o),this.lastToken}}return s.\u0275fac=function(o){return new(o||s)(Py(m0),Py(NE),Py(n8))},s.\u0275prov=ry({token:s,factory:s.\u0275fac}),s})();function Snt(s,l){const o=s.url.toLowerCase();if(!Ry(zP)||"GET"===s.method||"HEAD"===s.method||o.startsWith("http://")||o.startsWith("https://"))return l(s);const h=Ry(i8).getToken(),y=Ry(r8);return null!=h&&!s.headers.has(y)&&(s=s.clone({headers:s.headers.set(y,h)})),l(s)}var R0=(()=>((R0=R0||{})[R0.Interceptors=0]="Interceptors",R0[R0.LegacyInterceptors=1]="LegacyInterceptors",R0[R0.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",R0[R0.NoXsrfProtection=3]="NoXsrfProtection",R0[R0.JsonpSupport=4]="JsonpSupport",R0[R0.RequestsMadeViaParent=5]="RequestsMadeViaParent",R0[R0.Fetch=6]="Fetch",R0))();function KT(s,l){return{\u0275kind:s,\u0275providers:l}}function Cnt(...s){const l=[pI,e8,QV,{provide:dI,useExisting:QV},{provide:hI,useExisting:e8},{provide:UC,useValue:Snt,multi:!0},{provide:zP,useValue:!0},{provide:i8,useClass:Ant}];for(const o of s)l.push(...o.\u0275providers);return function eO(s){return{\u0275providers:s}}(l)}const o8=new Fy("LEGACY_INTERCEPTOR_FN");let Dnt=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=L0({type:s}),s.\u0275inj=xy({providers:[Cnt(KT(R0.LegacyInterceptors,[{provide:o8,useFactory:ynt},{provide:UC,useExisting:o8,multi:!0}]))]}),s})();const{isArray:Lnt}=Array,{getPrototypeOf:Fnt,prototype:jnt,keys:Bnt}=Object;function s8(s){if(1===s.length){const l=s[0];if(Lnt(l))return{args:l,keys:null};if(function Vnt(s){return s&&"object"==typeof s&&Fnt(s)===jnt}(l)){const o=Bnt(l);return{args:o.map(h=>l[h]),keys:o}}}return{args:s,keys:null}}const{isArray:Unt}=Array;function a8(s){return c_(l=>function znt(s,l){return Unt(l)?s(...l):s(l)}(s,l))}function l8(s,l){return s.reduce((o,h,y)=>(o[h]=l[y],o),{})}function gI(...s){const l=e_(s),o=g0(s),{args:h,keys:y}=s8(s);if(0===h.length)return u0([],l);const _=new qy(function Hnt(s,l,o=l_){return h=>{c8(l,()=>{const{length:y}=s,_=new Array(y);let I=y,V=y;for(let $=0;$<y;$++)c8(l,()=>{const _n=u0(s[$],l);let ha=!1;_n.subscribe(N_(h,Ba=>{_[$]=Ba,ha||(ha=!0,V--),V||h.next(o(_.slice()))},()=>{--I||h.complete()}))},h)},h)}}(h,l,y?I=>l8(y,I):l_));return o?_.pipe(a8(o)):_}function c8(s,l,o){s?cy(o,s,l):l()}const yI=m(s=>function(){s(this),this.name="EmptyError",this.message="no elements in sequence"});function vI(...s){return function Gnt(){return Iy(1)}()(u0(s,e_(s)))}function u8(s){return new qy(l=>{W0(s()).subscribe(l)})}function cS(s,l){const o=d(s)?s:()=>s,h=y=>y.error(o());return new qy(l?y=>l.schedule(h,0,y):h)}function HP(){return X_((s,l)=>{let o=null;s._refCount++;const h=N_(l,void 0,void 0,void 0,()=>{if(!s||s._refCount<=0||0<--s._refCount)return void(o=null);const y=s._connection,_=o;o=null,y&&(!_||y===_)&&y.unsubscribe(),l.unsubscribe()});s.subscribe(h),h.closed||(o=s.connect())})}class d8 extends qy{constructor(l,o){super(),this.source=l,this.subjectFactory=o,this._subject=null,this._refCount=0,this._connection=null,k1(l)&&(this.lift=l.lift)}_subscribe(l){return this.getSubject().subscribe(l)}getSubject(){const l=this._subject;return(!l||l.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:l}=this;this._subject=this._connection=null,l?.unsubscribe()}connect(){let l=this._connection;if(!l){l=this._connection=new w;const o=this.getSubject();l.add(this.source.subscribe(N_(o,void 0,()=>{this._teardown(),o.complete()},h=>{this._teardown(),o.error(h)},()=>this._teardown()))),l.closed&&(this._connection=null,l=w.EMPTY)}return l}refCount(){return HP()(this)}}function mT(s){return s<=0?()=>Ky:X_((l,o)=>{let h=0;l.subscribe(N_(o,y=>{++h<=s&&(o.next(y),s<=h&&o.complete())}))})}function h8(...s){const l=e_(s);return X_((o,h)=>{(l?vI(s,o,l):vI(s,o)).subscribe(h)})}function _I(s){return X_((l,o)=>{let h=!1;l.subscribe(N_(o,y=>{h=!0,o.next(y)},()=>{h||o.next(s),o.complete()}))})}function f8(s=$nt){return X_((l,o)=>{let h=!1;l.subscribe(N_(o,y=>{h=!0,o.next(y)},()=>h?o.complete():o.error(s())))})}function $nt(){return new yI}function XT(s,l){const o=arguments.length>=2;return h=>h.pipe(s?Hx((y,_)=>s(y,_,h)):l_,mT(1),o?_I(l):f8(()=>new yI))}function p1(s,l,o){const h=d(s)||l||o?{next:s,error:l,complete:o}:s;return h?X_((y,_)=>{var I;null===(I=h.subscribe)||void 0===I||I.call(h);let V=!0;y.subscribe(N_(_,$=>{var _n;null===(_n=h.next)||void 0===_n||_n.call(h,$),_.next($)},()=>{var $;V=!1,null===($=h.complete)||void 0===$||$.call(h),_.complete()},$=>{var _n;V=!1,null===(_n=h.error)||void 0===_n||_n.call(h,$),_.error($)},()=>{var $,_n;V&&(null===($=h.unsubscribe)||void 0===$||$.call(h)),null===(_n=h.finalize)||void 0===_n||_n.call(h)}))}):l_}function WE(s){return X_((l,o)=>{let _,h=null,y=!1;h=l.subscribe(N_(o,void 0,void 0,I=>{_=W0(s(I,WE(s)(l))),h?(h.unsubscribe(),h=null,_.subscribe(o)):y=!0})),y&&(h.unsubscribe(),h=null,_.subscribe(o))})}function GP(s){return s<=0?()=>Ky:X_((l,o)=>{let h=[];l.subscribe(N_(o,y=>{h.push(y),s<h.length&&h.shift()},()=>{for(const y of h)o.next(y);o.complete()},void 0,()=>{h=null}))})}const O_="primary",zC=Symbol("RouteTitle");class Xnt{constructor(l){this.params=l||{}}has(l){return Object.prototype.hasOwnProperty.call(this.params,l)}get(l){if(this.has(l)){const o=this.params[l];return Array.isArray(o)?o[0]:o}return null}getAll(l){if(this.has(l)){const o=this.params[l];return Array.isArray(o)?o:[o]}return[]}get keys(){return Object.keys(this.params)}}function uS(s){return new Xnt(s)}function Znt(s,l,o){const h=o.path.split("/");if(h.length>s.length||"full"===o.pathMatch&&(l.hasChildren()||h.length<s.length))return null;const y={};for(let _=0;_<h.length;_++){const I=h[_],V=s[_];if(I.startsWith(":"))y[I.substring(1)]=V;else if(I!==V.path)return null}return{consumed:s.slice(0,h.length),posParams:y}}function vE(s,l){const o=s?Object.keys(s):void 0,h=l?Object.keys(l):void 0;if(!o||!h||o.length!=h.length)return!1;let y;for(let _=0;_<o.length;_++)if(y=o[_],!p8(s[y],l[y]))return!1;return!0}function p8(s,l){if(Array.isArray(s)&&Array.isArray(l)){if(s.length!==l.length)return!1;const o=[...s].sort(),h=[...l].sort();return o.every((y,_)=>h[_]===y)}return s===l}function m8(s){return s.length>0?s[s.length-1]:null}function gT(s){return function Nnt(s){return!!s&&(s instanceof qy||d(s.lift)&&d(s.subscribe))}(s)?s:yC(s)?u0(Promise.resolve(s)):s_(s)}const Qnt={exact:function _8(s,l,o){if(!ZT(s.segments,l.segments)||!bI(s.segments,l.segments,o)||s.numberOfChildren!==l.numberOfChildren)return!1;for(const h in l.children)if(!s.children[h]||!_8(s.children[h],l.children[h],o))return!1;return!0},subset:b8},g8={exact:function trt(s,l){return vE(s,l)},subset:function ert(s,l){return Object.keys(l).length<=Object.keys(s).length&&Object.keys(l).every(o=>p8(s[o],l[o]))},ignored:()=>!0};function y8(s,l,o){return Qnt[o.paths](s.root,l.root,o.matrixParams)&&g8[o.queryParams](s.queryParams,l.queryParams)&&!("exact"===o.fragment&&s.fragment!==l.fragment)}function b8(s,l,o){return w8(s,l,l.segments,o)}function w8(s,l,o,h){if(s.segments.length>o.length){const y=s.segments.slice(0,o.length);return!(!ZT(y,o)||l.hasChildren()||!bI(y,o,h))}if(s.segments.length===o.length){if(!ZT(s.segments,o)||!bI(s.segments,o,h))return!1;for(const y in l.children)if(!s.children[y]||!b8(s.children[y],l.children[y],h))return!1;return!0}{const y=o.slice(0,s.segments.length),_=o.slice(s.segments.length);return!!(ZT(s.segments,y)&&bI(s.segments,y,h)&&s.children[O_])&&w8(s.children[O_],l,_,h)}}function bI(s,l,o){return l.every((h,y)=>g8[o](s[y].parameters,h.parameters))}class dS{constructor(l=new _0([],{}),o={},h=null){this.root=l,this.queryParams=o,this.fragment=h}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=uS(this.queryParams)),this._queryParamMap}toString(){return irt.serialize(this)}}class _0{constructor(l,o){this.segments=l,this.children=o,this.parent=null,Object.values(o).forEach(h=>h.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return wI(this)}}class HC{constructor(l,o){this.path=l,this.parameters=o}get parameterMap(){return this._parameterMap||(this._parameterMap=uS(this.parameters)),this._parameterMap}toString(){return T8(this)}}function ZT(s,l){return s.length===l.length&&s.every((o,h)=>o.path===l[h].path)}let GC=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=ry({token:s,factory:function(){return new $P},providedIn:"root"}),s})();class $P{parse(l){const o=new mrt(l);return new dS(o.parseRootSegment(),o.parseQueryParams(),o.parseFragment())}serialize(l){const o=`/${$C(l.root,!0)}`,h=function art(s){const l=Object.keys(s).map(o=>{const h=s[o];return Array.isArray(h)?h.map(y=>`${xI(o)}=${xI(y)}`).join("&"):`${xI(o)}=${xI(h)}`}).filter(o=>!!o);return l.length?`?${l.join("&")}`:""}(l.queryParams);return`${o}${h}${"string"==typeof l.fragment?`#${function ort(s){return encodeURI(s)}(l.fragment)}`:""}`}}const irt=new $P;function wI(s){return s.segments.map(l=>T8(l)).join("/")}function $C(s,l){if(!s.hasChildren())return wI(s);if(l){const o=s.children[O_]?$C(s.children[O_],!1):"",h=[];return Object.entries(s.children).forEach(([y,_])=>{y!==O_&&h.push(`${y}:${$C(_,!1)}`)}),h.length>0?`${o}(${h.join("//")})`:o}{const o=function rrt(s,l){let o=[];return Object.entries(s.children).forEach(([h,y])=>{h===O_&&(o=o.concat(l(y,h)))}),Object.entries(s.children).forEach(([h,y])=>{h!==O_&&(o=o.concat(l(y,h)))}),o}(s,(h,y)=>y===O_?[$C(s.children[O_],!1)]:[`${y}:${$C(h,!1)}`]);return 1===Object.keys(s.children).length&&null!=s.children[O_]?`${wI(s)}/${o[0]}`:`${wI(s)}/(${o.join("//")})`}}function x8(s){return encodeURIComponent(s).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xI(s){return x8(s).replace(/%3B/gi,";")}function qP(s){return x8(s).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function EI(s){return decodeURIComponent(s)}function E8(s){return EI(s.replace(/\+/g,"%20"))}function T8(s){return`${qP(s.path)}${function srt(s){return Object.keys(s).map(l=>`;${qP(l)}=${qP(s[l])}`).join("")}(s.parameters)}`}const lrt=/^[^\/()?;#]+/;function WP(s){const l=s.match(lrt);return l?l[0]:""}const crt=/^[^\/()?;=#]+/,drt=/^[^=?&#]+/,frt=/^[^&#]+/;class mrt{constructor(l){this.url=l,this.remaining=l}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new _0([],{}):new _0([],this.parseChildren())}parseQueryParams(){const l={};if(this.consumeOptional("?"))do{this.parseQueryParam(l)}while(this.consumeOptional("&"));return l}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const l=[];for(this.peekStartsWith("(")||l.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),l.push(this.parseSegment());let o={};this.peekStartsWith("/(")&&(this.capture("/"),o=this.parseParens(!0));let h={};return this.peekStartsWith("(")&&(h=this.parseParens(!1)),(l.length>0||Object.keys(o).length>0)&&(h[O_]=new _0(l,o)),h}parseSegment(){const l=WP(this.remaining);if(""===l&&this.peekStartsWith(";"))throw new py(4009,!1);return this.capture(l),new HC(EI(l),this.parseMatrixParams())}parseMatrixParams(){const l={};for(;this.consumeOptional(";");)this.parseParam(l);return l}parseParam(l){const o=function urt(s){const l=s.match(crt);return l?l[0]:""}(this.remaining);if(!o)return;this.capture(o);let h="";if(this.consumeOptional("=")){const y=WP(this.remaining);y&&(h=y,this.capture(h))}l[EI(o)]=EI(h)}parseQueryParam(l){const o=function hrt(s){const l=s.match(drt);return l?l[0]:""}(this.remaining);if(!o)return;this.capture(o);let h="";if(this.consumeOptional("=")){const I=function prt(s){const l=s.match(frt);return l?l[0]:""}(this.remaining);I&&(h=I,this.capture(h))}const y=E8(o),_=E8(h);if(l.hasOwnProperty(y)){let I=l[y];Array.isArray(I)||(I=[I],l[y]=I),I.push(_)}else l[y]=_}parseParens(l){const o={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const h=WP(this.remaining),y=this.remaining[h.length];if("/"!==y&&")"!==y&&";"!==y)throw new py(4010,!1);let _;h.indexOf(":")>-1?(_=h.slice(0,h.indexOf(":")),this.capture(_),this.capture(":")):l&&(_=O_);const I=this.parseChildren();o[_]=1===Object.keys(I).length?I[O_]:new _0([],I),this.consumeOptional("//")}return o}peekStartsWith(l){return this.remaining.startsWith(l)}consumeOptional(l){return!!this.peekStartsWith(l)&&(this.remaining=this.remaining.substring(l.length),!0)}capture(l){if(!this.consumeOptional(l))throw new py(4011,!1)}}function A8(s){return s.segments.length>0?new _0([],{[O_]:s}):s}function S8(s){const l={};for(const h of Object.keys(s.children)){const _=S8(s.children[h]);if(h===O_&&0===_.segments.length&&_.hasChildren())for(const[I,V]of Object.entries(_.children))l[I]=V;else(_.segments.length>0||_.hasChildren())&&(l[h]=_)}return function grt(s){if(1===s.numberOfChildren&&s.children[O_]){const l=s.children[O_];return new _0(s.segments.concat(l.segments),l.children)}return s}(new _0(s.segments,l))}function JT(s){return s instanceof dS}function C8(s){let l;const y=A8(function o(_){const I={};for(const $ of _.children){const _n=o($);I[$.outlet]=_n}const V=new _0(_.url,I);return _===s&&(l=V),V}(s.root));return l??y}function M8(s,l,o,h){let y=s;for(;y.parent;)y=y.parent;if(0===l.length)return YP(y,y,y,o,h);const _=function vrt(s){if("string"==typeof s[0]&&1===s.length&&"/"===s[0])return new I8(!0,0,s);let l=0,o=!1;const h=s.reduce((y,_,I)=>{if("object"==typeof _&&null!=_){if(_.outlets){const V={};return Object.entries(_.outlets).forEach(([$,_n])=>{V[$]="string"==typeof _n?_n.split("/"):_n}),[...y,{outlets:V}]}if(_.segmentPath)return[...y,_.segmentPath]}return"string"!=typeof _?[...y,_]:0===I?(_.split("/").forEach((V,$)=>{0==$&&"."===V||(0==$&&""===V?o=!0:".."===V?l++:""!=V&&y.push(V))}),y):[...y,_]},[]);return new I8(o,l,h)}(l);if(_.toRoot())return YP(y,y,new _0([],{}),o,h);const I=function _rt(s,l,o){if(s.isAbsolute)return new AI(l,!0,0);if(!o)return new AI(l,!1,NaN);if(null===o.parent)return new AI(o,!0,0);const h=TI(s.commands[0])?0:1;return function brt(s,l,o){let h=s,y=l,_=o;for(;_>y;){if(_-=y,h=h.parent,!h)throw new py(4005,!1);y=h.segments.length}return new AI(h,!1,y-_)}(o,o.segments.length-1+h,s.numberOfDoubleDots)}(_,y,s),V=I.processChildren?WC(I.segmentGroup,I.index,_.commands):k8(I.segmentGroup,I.index,_.commands);return YP(y,I.segmentGroup,V,o,h)}function TI(s){return"object"==typeof s&&null!=s&&!s.outlets&&!s.segmentPath}function qC(s){return"object"==typeof s&&null!=s&&s.outlets}function YP(s,l,o,h,y){let I,_={};h&&Object.entries(h).forEach(([$,_n])=>{_[$]=Array.isArray(_n)?_n.map(ha=>`${ha}`):`${_n}`}),I=s===l?o:D8(s,l,o);const V=A8(S8(I));return new dS(V,_,y)}function D8(s,l,o){const h={};return Object.entries(s.children).forEach(([y,_])=>{h[y]=_===l?o:D8(_,l,o)}),new _0(s.segments,h)}class I8{constructor(l,o,h){if(this.isAbsolute=l,this.numberOfDoubleDots=o,this.commands=h,l&&h.length>0&&TI(h[0]))throw new py(4003,!1);const y=h.find(qC);if(y&&y!==m8(h))throw new py(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class AI{constructor(l,o,h){this.segmentGroup=l,this.processChildren=o,this.index=h}}function k8(s,l,o){if(s||(s=new _0([],{})),0===s.segments.length&&s.hasChildren())return WC(s,l,o);const h=function xrt(s,l,o){let h=0,y=l;const _={match:!1,pathIndex:0,commandIndex:0};for(;y<s.segments.length;){if(h>=o.length)return _;const I=s.segments[y],V=o[h];if(qC(V))break;const $=`${V}`,_n=h<o.length-1?o[h+1]:null;if(y>0&&void 0===$)break;if($&&_n&&"object"==typeof _n&&void 0===_n.outlets){if(!R8($,_n,I))return _;h+=2}else{if(!R8($,{},I))return _;h++}y++}return{match:!0,pathIndex:y,commandIndex:h}}(s,l,o),y=o.slice(h.commandIndex);if(h.match&&h.pathIndex<s.segments.length){const _=new _0(s.segments.slice(0,h.pathIndex),{});return _.children[O_]=new _0(s.segments.slice(h.pathIndex),s.children),WC(_,0,y)}return h.match&&0===y.length?new _0(s.segments,{}):h.match&&!s.hasChildren()?KP(s,l,o):h.match?WC(s,0,y):KP(s,l,o)}function WC(s,l,o){if(0===o.length)return new _0(s.segments,{});{const h=function wrt(s){return qC(s[0])?s[0].outlets:{[O_]:s}}(o),y={};if(!h[O_]&&s.children[O_]&&1===s.numberOfChildren&&0===s.children[O_].segments.length){const _=WC(s.children[O_],l,o);return new _0(s.segments,_.children)}return Object.entries(h).forEach(([_,I])=>{"string"==typeof I&&(I=[I]),null!==I&&(y[_]=k8(s.children[_],l,I))}),Object.entries(s.children).forEach(([_,I])=>{void 0===h[_]&&(y[_]=I)}),new _0(s.segments,y)}}function KP(s,l,o){const h=s.segments.slice(0,l);let y=0;for(;y<o.length;){const _=o[y];if(qC(_)){const $=Ert(_.outlets);return new _0(h,$)}if(0===y&&TI(o[0])){h.push(new HC(s.segments[l].path,O8(o[0]))),y++;continue}const I=qC(_)?_.outlets[O_]:`${_}`,V=y<o.length-1?o[y+1]:null;I&&V&&TI(V)?(h.push(new HC(I,O8(V))),y+=2):(h.push(new HC(I,{})),y++)}return new _0(h,{})}function Ert(s){const l={};return Object.entries(s).forEach(([o,h])=>{"string"==typeof h&&(h=[h]),null!==h&&(l[o]=KP(new _0([],{}),0,h))}),l}function O8(s){const l={};return Object.entries(s).forEach(([o,h])=>l[o]=`${h}`),l}function R8(s,l,o){return s==o.path&&vE(l,o.parameters)}const YC="imperative";class _E{constructor(l,o){this.id=l,this.url=o}}class XP extends _E{constructor(l,o,h="imperative",y=null){super(l,o),this.type=0,this.navigationTrigger=h,this.restoredState=y}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class QT extends _E{constructor(l,o,h){super(l,o),this.urlAfterRedirects=h,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class SI extends _E{constructor(l,o,h,y){super(l,o),this.reason=h,this.code=y,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class KC extends _E{constructor(l,o,h,y){super(l,o),this.reason=h,this.code=y,this.type=16}}class ZP extends _E{constructor(l,o,h,y){super(l,o),this.error=h,this.target=y,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Trt extends _E{constructor(l,o,h,y){super(l,o),this.urlAfterRedirects=h,this.state=y,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Art extends _E{constructor(l,o,h,y){super(l,o),this.urlAfterRedirects=h,this.state=y,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Srt extends _E{constructor(l,o,h,y,_){super(l,o),this.urlAfterRedirects=h,this.state=y,this.shouldActivate=_,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Crt extends _E{constructor(l,o,h,y){super(l,o),this.urlAfterRedirects=h,this.state=y,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mrt extends _E{constructor(l,o,h,y){super(l,o),this.urlAfterRedirects=h,this.state=y,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Drt{constructor(l){this.route=l,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Irt{constructor(l){this.route=l,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class krt{constructor(l){this.snapshot=l,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ort{constructor(l){this.snapshot=l,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rrt{constructor(l){this.snapshot=l,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Prt{constructor(l){this.snapshot=l,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class P8{constructor(l,o,h){this.routerEvent=l,this.position=o,this.anchor=h,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Nrt{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new XC,this.attachRef=null}}let XC=(()=>{class s{constructor(){this.contexts=new Map}onChildOutletCreated(o,h){const y=this.getOrCreateContext(o);y.outlet=h,this.contexts.set(o,y)}onChildOutletDestroyed(o){const h=this.getContext(o);h&&(h.outlet=null,h.attachRef=null)}onOutletDeactivated(){const o=this.contexts;return this.contexts=new Map,o}onOutletReAttached(o){this.contexts=o}getOrCreateContext(o){let h=this.getContext(o);return h||(h=new Nrt,this.contexts.set(o,h)),h}getContext(o){return this.contexts.get(o)||null}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=ry({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();class N8{constructor(l){this._root=l}get root(){return this._root.value}parent(l){const o=this.pathFromRoot(l);return o.length>1?o[o.length-2]:null}children(l){const o=JP(l,this._root);return o?o.children.map(h=>h.value):[]}firstChild(l){const o=JP(l,this._root);return o&&o.children.length>0?o.children[0].value:null}siblings(l){const o=QP(l,this._root);return o.length<2?[]:o[o.length-2].children.map(y=>y.value).filter(y=>y!==l)}pathFromRoot(l){return QP(l,this._root).map(o=>o.value)}}function JP(s,l){if(s===l.value)return l;for(const o of l.children){const h=JP(s,o);if(h)return h}return null}function QP(s,l){if(s===l.value)return[l];for(const o of l.children){const h=QP(s,o);if(h.length)return h.unshift(l),h}return[]}class YE{constructor(l,o){this.value=l,this.children=o}toString(){return`TreeNode(${this.value})`}}function hS(s){const l={};return s&&s.children.forEach(o=>l[o.value.outlet]=o),l}class L8 extends N8{constructor(l,o){super(l),this.snapshot=o,tN(this,l)}toString(){return this.snapshot.toString()}}function F8(s,l){const o=function Lrt(s,l){const I=new CI([],{},{},"",{},O_,l,null,{});return new B8("",new YE(I,[]))}(0,l),h=new b0([new HC("",{})]),y=new b0({}),_=new b0({}),I=new b0({}),V=new b0(""),$=new fS(h,y,I,V,_,O_,l,o.root);return $.snapshot=o.root,new L8(new YE($,[]),o)}class fS{constructor(l,o,h,y,_,I,V,$){this.urlSubject=l,this.paramsSubject=o,this.queryParamsSubject=h,this.fragmentSubject=y,this.dataSubject=_,this.outlet=I,this.component=V,this._futureSnapshot=$,this.title=this.dataSubject?.pipe(c_(_n=>_n[zC]))??s_(void 0),this.url=l,this.params=o,this.queryParams=h,this.fragment=y,this.data=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(c_(l=>uS(l)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(c_(l=>uS(l)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function j8(s,l="emptyOnly"){const o=s.pathFromRoot;let h=0;if("always"!==l)for(h=o.length-1;h>=1;){const y=o[h],_=o[h-1];if(y.routeConfig&&""===y.routeConfig.path)h--;else{if(_.component)break;h--}}return function Frt(s){return s.reduce((l,o)=>({params:{...l.params,...o.params},data:{...l.data,...o.data},resolve:{...o.data,...l.resolve,...o.routeConfig?.data,...o._resolvedData}}),{params:{},data:{},resolve:{}})}(o.slice(h))}class CI{get title(){return this.data?.[zC]}constructor(l,o,h,y,_,I,V,$,_n){this.url=l,this.params=o,this.queryParams=h,this.fragment=y,this.data=_,this.outlet=I,this.component=V,this.routeConfig=$,this._resolve=_n}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=uS(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=uS(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(h=>h.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class B8 extends N8{constructor(l,o){super(o),this.url=l,tN(this,o)}toString(){return V8(this._root)}}function tN(s,l){l.value._routerState=s,l.children.forEach(o=>tN(s,o))}function V8(s){const l=s.children.length>0?` { ${s.children.map(V8).join(", ")} } `:"";return`${s.value}${l}`}function eN(s){if(s.snapshot){const l=s.snapshot,o=s._futureSnapshot;s.snapshot=o,vE(l.queryParams,o.queryParams)||s.queryParamsSubject.next(o.queryParams),l.fragment!==o.fragment&&s.fragmentSubject.next(o.fragment),vE(l.params,o.params)||s.paramsSubject.next(o.params),function Jnt(s,l){if(s.length!==l.length)return!1;for(let o=0;o<s.length;++o)if(!vE(s[o],l[o]))return!1;return!0}(l.url,o.url)||s.urlSubject.next(o.url),vE(l.data,o.data)||s.dataSubject.next(o.data)}else s.snapshot=s._futureSnapshot,s.dataSubject.next(s._futureSnapshot.data)}function nN(s,l){const o=vE(s.params,l.params)&&function nrt(s,l){return ZT(s,l)&&s.every((o,h)=>vE(o.parameters,l[h].parameters))}(s.url,l.url);return o&&!(!s.parent!=!l.parent)&&(!s.parent||nN(s.parent,l.parent))}let rN=(()=>{class s{constructor(){this.activated=null,this._activatedRoute=null,this.name=O_,this.activateEvents=new B0,this.deactivateEvents=new B0,this.attachEvents=new B0,this.detachEvents=new B0,this.parentContexts=Ry(XC),this.location=Ry(Bx),this.changeDetector=Ry(MC),this.environmentInjector=Ry(oE),this.inputBinder=Ry(MI,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(o){if(o.name){const{firstChange:h,previousValue:y}=o.name;if(h)return;this.isTrackedInParentContexts(y)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(y)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(o){return this.parentContexts.getContext(o)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const o=this.parentContexts.getContext(this.name);o?.route&&(o.attachRef?this.attach(o.attachRef,o.route):this.activateWith(o.route,o.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new py(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new py(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new py(4012,!1);this.location.detach();const o=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(o.instance),o}attach(o,h){this.activated=o,this._activatedRoute=h,this.location.insert(o.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(o.instance)}deactivate(){if(this.activated){const o=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(o)}}activateWith(o,h){if(this.isActivated)throw new py(4013,!1);this._activatedRoute=o;const y=this.location,I=o.snapshot.component,V=this.parentContexts.getOrCreateContext(this.name).children,$=new jrt(o,V,y.injector);this.activated=y.createComponent(I,{index:y.length,injector:$,environmentInjector:h??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275dir=Zy({type:s,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[N1]}),s})();class jrt{constructor(l,o,h){this.route=l,this.childContexts=o,this.parent=h}get(l,o){return l===fS?this.route:l===XC?this.childContexts:this.parent.get(l,o)}}const MI=new Fy("");let U8=(()=>{class s{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(o){this.unsubscribeFromRouteData(o),this.subscribeToRouteData(o)}unsubscribeFromRouteData(o){this.outletDataSubscriptions.get(o)?.unsubscribe(),this.outletDataSubscriptions.delete(o)}subscribeToRouteData(o){const{activatedRoute:h}=o,y=gI([h.queryParams,h.params,h.data]).pipe(D0(([_,I,V],$)=>(V={..._,...I,...V},0===$?s_(V):Promise.resolve(V)))).subscribe(_=>{if(!o.isActivated||!o.activatedComponentRef||o.activatedRoute!==h||null===h.component)return void this.unsubscribeFromRouteData(o);const I=function DZ(s){const l=f0(s);if(!l)return null;const o=new dC(l);return{get selector(){return o.selector},get type(){return o.componentType},get inputs(){return o.inputs},get outputs(){return o.outputs},get ngContentSelectors(){return o.ngContentSelectors},get isStandalone(){return l.standalone},get isSignal(){return l.signals}}}(h.component);if(I)for(const{templateName:V}of I.inputs)o.activatedComponentRef.setInput(V,_[V]);else this.unsubscribeFromRouteData(o)});this.outletDataSubscriptions.set(o,y)}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=ry({token:s,factory:s.\u0275fac}),s})();function ZC(s,l,o){if(o&&s.shouldReuseRoute(l.value,o.value.snapshot)){const h=o.value;h._futureSnapshot=l.value;const y=function Vrt(s,l,o){return l.children.map(h=>{for(const y of o.children)if(s.shouldReuseRoute(h.value,y.value.snapshot))return ZC(s,h,y);return ZC(s,h)})}(s,l,o);return new YE(h,y)}{if(s.shouldAttach(l.value)){const _=s.retrieve(l.value);if(null!==_){const I=_.route;return I.value._futureSnapshot=l.value,I.children=l.children.map(V=>ZC(s,V)),I}}const h=function Urt(s){return new fS(new b0(s.url),new b0(s.params),new b0(s.queryParams),new b0(s.fragment),new b0(s.data),s.outlet,s.component,s)}(l.value),y=l.children.map(_=>ZC(s,_));return new YE(h,y)}}const iN="ngNavigationCancelingError";function z8(s,l){const{redirectTo:o,navigationBehaviorOptions:h}=JT(l)?{redirectTo:l,navigationBehaviorOptions:void 0}:l,y=H8(!1,0,l);return y.url=o,y.navigationBehaviorOptions=h,y}function H8(s,l,o){const h=new Error("NavigationCancelingError: "+(s||""));return h[iN]=!0,h.cancellationCode=l,o&&(h.url=o),h}function G8(s){return $8(s)&&JT(s.url)}function $8(s){return s&&s[iN]}let q8=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275cmp=d1({type:s,selectors:[["ng-component"]],standalone:!0,features:[BE],decls:1,vars:0,template:function(o,h){1&o&&r1(0,"router-outlet")},dependencies:[rN],encapsulation:2}),s})();function oN(s){const l=s.children&&s.children.map(oN),o=l?{...s,children:l}:{...s};return!o.component&&!o.loadComponent&&(l||o.loadChildren)&&o.outlet&&o.outlet!==O_&&(o.component=q8),o}function Gx(s){return s.outlet||O_}function JC(s){if(!s)return null;if(s.routeConfig?._injector)return s.routeConfig._injector;for(let l=s.parent;l;l=l.parent){const o=l.routeConfig;if(o?._loadedInjector)return o._loadedInjector;if(o?._injector)return o._injector}return null}class Yrt{constructor(l,o,h,y,_){this.routeReuseStrategy=l,this.futureState=o,this.currState=h,this.forwardEvent=y,this.inputBindingEnabled=_}activate(l){const o=this.futureState._root,h=this.currState?this.currState._root:null;this.deactivateChildRoutes(o,h,l),eN(this.futureState.root),this.activateChildRoutes(o,h,l)}deactivateChildRoutes(l,o,h){const y=hS(o);l.children.forEach(_=>{const I=_.value.outlet;this.deactivateRoutes(_,y[I],h),delete y[I]}),Object.values(y).forEach(_=>{this.deactivateRouteAndItsChildren(_,h)})}deactivateRoutes(l,o,h){const y=l.value,_=o?o.value:null;if(y===_)if(y.component){const I=h.getContext(y.outlet);I&&this.deactivateChildRoutes(l,o,I.children)}else this.deactivateChildRoutes(l,o,h);else _&&this.deactivateRouteAndItsChildren(o,h)}deactivateRouteAndItsChildren(l,o){l.value.component&&this.routeReuseStrategy.shouldDetach(l.value.snapshot)?this.detachAndStoreRouteSubtree(l,o):this.deactivateRouteAndOutlet(l,o)}detachAndStoreRouteSubtree(l,o){const h=o.getContext(l.value.outlet),y=h&&l.value.component?h.children:o,_=hS(l);for(const I of Object.keys(_))this.deactivateRouteAndItsChildren(_[I],y);if(h&&h.outlet){const I=h.outlet.detach(),V=h.children.onOutletDeactivated();this.routeReuseStrategy.store(l.value.snapshot,{componentRef:I,route:l,contexts:V})}}deactivateRouteAndOutlet(l,o){const h=o.getContext(l.value.outlet),y=h&&l.value.component?h.children:o,_=hS(l);for(const I of Object.keys(_))this.deactivateRouteAndItsChildren(_[I],y);h&&(h.outlet&&(h.outlet.deactivate(),h.children.onOutletDeactivated()),h.attachRef=null,h.route=null)}activateChildRoutes(l,o,h){const y=hS(o);l.children.forEach(_=>{this.activateRoutes(_,y[_.value.outlet],h),this.forwardEvent(new Prt(_.value.snapshot))}),l.children.length&&this.forwardEvent(new Ort(l.value.snapshot))}activateRoutes(l,o,h){const y=l.value,_=o?o.value:null;if(eN(y),y===_)if(y.component){const I=h.getOrCreateContext(y.outlet);this.activateChildRoutes(l,o,I.children)}else this.activateChildRoutes(l,o,h);else if(y.component){const I=h.getOrCreateContext(y.outlet);if(this.routeReuseStrategy.shouldAttach(y.snapshot)){const V=this.routeReuseStrategy.retrieve(y.snapshot);this.routeReuseStrategy.store(y.snapshot,null),I.children.onOutletReAttached(V.contexts),I.attachRef=V.componentRef,I.route=V.route.value,I.outlet&&I.outlet.attach(V.componentRef,V.route.value),eN(V.route.value),this.activateChildRoutes(l,null,I.children)}else{const V=JC(y.snapshot);I.attachRef=null,I.route=y,I.injector=V,I.outlet&&I.outlet.activateWith(y,I.injector),this.activateChildRoutes(l,null,I.children)}}else this.activateChildRoutes(l,null,h)}}class W8{constructor(l){this.path=l,this.route=this.path[this.path.length-1]}}class DI{constructor(l,o){this.component=l,this.route=o}}function Krt(s,l,o){const h=s._root;return QC(h,l?l._root:null,o,[h.value])}function pS(s,l){const o=Symbol(),h=l.get(s,o);return h===o?"function"!=typeof s||function My(s){return null!==By(s)}(s)?l.get(s):s:h}function QC(s,l,o,h,y={canDeactivateChecks:[],canActivateChecks:[]}){const _=hS(l);return s.children.forEach(I=>{(function Zrt(s,l,o,h,y={canDeactivateChecks:[],canActivateChecks:[]}){const _=s.value,I=l?l.value:null,V=o?o.getContext(s.value.outlet):null;if(I&&_.routeConfig===I.routeConfig){const $=function Jrt(s,l,o){if("function"==typeof o)return o(s,l);switch(o){case"pathParamsChange":return!ZT(s.url,l.url);case"pathParamsOrQueryParamsChange":return!ZT(s.url,l.url)||!vE(s.queryParams,l.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!nN(s,l)||!vE(s.queryParams,l.queryParams);default:return!nN(s,l)}}(I,_,_.routeConfig.runGuardsAndResolvers);$?y.canActivateChecks.push(new W8(h)):(_.data=I.data,_._resolvedData=I._resolvedData),QC(s,l,_.component?V?V.children:null:o,h,y),$&&V&&V.outlet&&V.outlet.isActivated&&y.canDeactivateChecks.push(new DI(V.outlet.component,I))}else I&&tM(l,V,y),y.canActivateChecks.push(new W8(h)),QC(s,null,_.component?V?V.children:null:o,h,y)})(I,_[I.value.outlet],o,h.concat([I.value]),y),delete _[I.value.outlet]}),Object.entries(_).forEach(([I,V])=>tM(V,o.getContext(I),y)),y}function tM(s,l,o){const h=hS(s),y=s.value;Object.entries(h).forEach(([_,I])=>{tM(I,y.component?l?l.children.getContext(_):null:l,o)}),o.canDeactivateChecks.push(new DI(y.component&&l&&l.outlet&&l.outlet.isActivated?l.outlet.component:null,y))}function eM(s){return"function"==typeof s}function Y8(s){return s instanceof yI||"EmptyError"===s?.name}const II=Symbol("INITIAL_VALUE");function mS(){return D0(s=>gI(s.map(l=>l.pipe(mT(1),h8(II)))).pipe(c_(l=>{for(const o of l)if(!0!==o){if(o===II)return II;if(!1===o||o instanceof dS)return o}return!0}),Hx(l=>l!==II),mT(1)))}function K8(s){return function K_(...s){return p_(s)}(p1(l=>{if(JT(l))throw z8(0,l)}),c_(l=>!0===l))}class kI{constructor(l){this.segmentGroup=l||null}}class X8{constructor(l){this.urlTree=l}}function gS(s){return cS(new kI(s))}function Z8(s){return cS(new X8(s))}class vit{constructor(l,o){this.urlSerializer=l,this.urlTree=o}noMatchError(l){return new py(4002,!1)}lineralizeSegments(l,o){let h=[],y=o.root;for(;;){if(h=h.concat(y.segments),0===y.numberOfChildren)return s_(h);if(y.numberOfChildren>1||!y.children[O_])return cS(new py(4e3,!1));y=y.children[O_]}}applyRedirectCommands(l,o,h){return this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),l,h)}applyRedirectCreateUrlTree(l,o,h,y){const _=this.createSegmentGroup(l,o.root,h,y);return new dS(_,this.createQueryParams(o.queryParams,this.urlTree.queryParams),o.fragment)}createQueryParams(l,o){const h={};return Object.entries(l).forEach(([y,_])=>{if("string"==typeof _&&_.startsWith(":")){const V=_.substring(1);h[y]=o[V]}else h[y]=_}),h}createSegmentGroup(l,o,h,y){const _=this.createSegments(l,o.segments,h,y);let I={};return Object.entries(o.children).forEach(([V,$])=>{I[V]=this.createSegmentGroup(l,$,h,y)}),new _0(_,I)}createSegments(l,o,h,y){return o.map(_=>_.path.startsWith(":")?this.findPosParam(l,_,y):this.findOrReturn(_,h))}findPosParam(l,o,h){const y=h[o.path.substring(1)];if(!y)throw new py(4001,!1);return y}findOrReturn(l,o){let h=0;for(const y of o){if(y.path===l.path)return o.splice(h),y;h++}return l}}const sN={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function _it(s,l,o,h,y){const _=aN(s,l,o);return _.matched?(h=function zrt(s,l){return s.providers&&!s._injector&&(s._injector=aR(s.providers,l,`Route: ${s.path}`)),s._injector??l}(l,h),function mit(s,l,o,h){const y=l.canMatch;return y&&0!==y.length?s_(y.map(I=>{const V=pS(I,s);return gT(function iit(s){return s&&eM(s.canMatch)}(V)?V.canMatch(l,o):s.runInContext(()=>V(l,o)))})).pipe(mS(),K8()):s_(!0)}(h,l,o).pipe(c_(I=>!0===I?_:{...sN}))):s_(_)}function aN(s,l,o){if(""===l.path)return"full"===l.pathMatch&&(s.hasChildren()||o.length>0)?{...sN}:{matched:!0,consumedSegments:[],remainingSegments:o,parameters:{},positionalParamSegments:{}};const y=(l.matcher||Znt)(o,s,l);if(!y)return{...sN};const _={};Object.entries(y.posParams??{}).forEach(([V,$])=>{_[V]=$.path});const I=y.consumed.length>0?{..._,...y.consumed[y.consumed.length-1].parameters}:_;return{matched:!0,consumedSegments:y.consumed,remainingSegments:o.slice(y.consumed.length),parameters:I,positionalParamSegments:y.posParams??{}}}function J8(s,l,o,h){return o.length>0&&function xit(s,l,o){return o.some(h=>OI(s,l,h)&&Gx(h)!==O_)}(s,o,h)?{segmentGroup:new _0(l,wit(h,new _0(o,s.children))),slicedSegments:[]}:0===o.length&&function Eit(s,l,o){return o.some(h=>OI(s,l,h))}(s,o,h)?{segmentGroup:new _0(s.segments,bit(s,0,o,h,s.children)),slicedSegments:o}:{segmentGroup:new _0(s.segments,s.children),slicedSegments:o}}function bit(s,l,o,h,y){const _={};for(const I of h)if(OI(s,o,I)&&!y[Gx(I)]){const V=new _0([],{});_[Gx(I)]=V}return{...y,..._}}function wit(s,l){const o={};o[O_]=l;for(const h of s)if(""===h.path&&Gx(h)!==O_){const y=new _0([],{});o[Gx(h)]=y}return o}function OI(s,l,o){return(!(s.hasChildren()||l.length>0)||"full"!==o.pathMatch)&&""===o.path}class Cit{constructor(l,o,h,y,_,I,V){this.injector=l,this.configLoader=o,this.rootComponentType=h,this.config=y,this.urlTree=_,this.paramsInheritanceStrategy=I,this.urlSerializer=V,this.allowRedirects=!0,this.applyRedirects=new vit(this.urlSerializer,this.urlTree)}noMatchError(l){return new py(4002,!1)}recognize(){const l=J8(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,l,O_).pipe(WE(o=>{if(o instanceof X8)return this.allowRedirects=!1,this.urlTree=o.urlTree,this.match(o.urlTree);throw o instanceof kI?this.noMatchError(o):o}),c_(o=>{const h=new CI([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},O_,this.rootComponentType,null,{}),y=new YE(h,o),_=new B8("",y),I=function yrt(s,l,o=null,h=null){return M8(C8(s),l,o,h)}(h,[],this.urlTree.queryParams,this.urlTree.fragment);return I.queryParams=this.urlTree.queryParams,_.url=this.urlSerializer.serialize(I),this.inheritParamsAndData(_._root),{state:_,tree:I}}))}match(l){return this.processSegmentGroup(this.injector,this.config,l.root,O_).pipe(WE(h=>{throw h instanceof kI?this.noMatchError(h):h}))}inheritParamsAndData(l){const o=l.value,h=j8(o,this.paramsInheritanceStrategy);o.params=Object.freeze(h.params),o.data=Object.freeze(h.data),l.children.forEach(y=>this.inheritParamsAndData(y))}processSegmentGroup(l,o,h,y){return 0===h.segments.length&&h.hasChildren()?this.processChildren(l,o,h):this.processSegment(l,o,h,h.segments,y,!0)}processChildren(l,o,h){const y=[];for(const _ of Object.keys(h.children))"primary"===_?y.unshift(_):y.push(_);return u0(y).pipe(sS(_=>{const I=h.children[_],V=function qrt(s,l){const o=s.filter(h=>Gx(h)===l);return o.push(...s.filter(h=>Gx(h)!==l)),o}(o,_);return this.processSegmentGroup(l,V,I,_)}),function Wnt(s,l){return X_(function qnt(s,l,o,h,y){return(_,I)=>{let V=o,$=l,_n=0;_.subscribe(N_(I,ha=>{const Ba=_n++;$=V?s($,ha,Ba):(V=!0,ha),h&&I.next($)},y&&(()=>{V&&I.next($),I.complete()})))}}(s,l,arguments.length>=2,!0))}((_,I)=>(_.push(...I),_)),_I(null),function Ynt(s,l){const o=arguments.length>=2;return h=>h.pipe(s?Hx((y,_)=>s(y,_,h)):l_,GP(1),o?_I(l):f8(()=>new yI))}(),yy(_=>{if(null===_)return gS(h);const I=Q8(_);return function Mit(s){s.sort((l,o)=>l.value.outlet===O_?-1:o.value.outlet===O_?1:l.value.outlet.localeCompare(o.value.outlet))}(I),s_(I)}))}processSegment(l,o,h,y,_,I){return u0(o).pipe(sS(V=>this.processSegmentAgainstRoute(V._injector??l,o,V,h,y,_,I).pipe(WE($=>{if($ instanceof kI)return s_(null);throw $}))),XT(V=>!!V),WE(V=>{if(Y8(V))return function Ait(s,l,o){return 0===l.length&&!s.children[o]}(h,y,_)?s_([]):gS(h);throw V}))}processSegmentAgainstRoute(l,o,h,y,_,I,V){return function Tit(s,l,o,h){return!!(Gx(s)===h||h!==O_&&OI(l,o,s))&&("**"===s.path||aN(l,s,o).matched)}(h,y,_,I)?void 0===h.redirectTo?this.matchSegmentAgainstRoute(l,y,h,_,I,V):V&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(l,y,o,h,_,I):gS(y):gS(y)}expandSegmentAgainstRouteUsingRedirect(l,o,h,y,_,I){return"**"===y.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(l,h,y,I):this.expandRegularSegmentAgainstRouteUsingRedirect(l,o,h,y,_,I)}expandWildCardWithParamsAgainstRouteUsingRedirect(l,o,h,y){const _=this.applyRedirects.applyRedirectCommands([],h.redirectTo,{});return h.redirectTo.startsWith("/")?Z8(_):this.applyRedirects.lineralizeSegments(h,_).pipe(yy(I=>{const V=new _0(I,{});return this.processSegment(l,o,V,I,y,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(l,o,h,y,_,I){const{matched:V,consumedSegments:$,remainingSegments:_n,positionalParamSegments:ha}=aN(o,y,_);if(!V)return gS(o);const Ba=this.applyRedirects.applyRedirectCommands($,y.redirectTo,ha);return y.redirectTo.startsWith("/")?Z8(Ba):this.applyRedirects.lineralizeSegments(y,Ba).pipe(yy(_d=>this.processSegment(l,h,o,_d.concat(_n),I,!1)))}matchSegmentAgainstRoute(l,o,h,y,_,I){let V;if("**"===h.path){const $=y.length>0?m8(y).parameters:{};V=s_({snapshot:new CI(y,$,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,tU(h),Gx(h),h.component??h._loadedComponent??null,h,eU(h)),consumedSegments:[],remainingSegments:[]}),o.children={}}else V=_it(o,h,y,l).pipe(c_(({matched:$,consumedSegments:_n,remainingSegments:ha,parameters:Ba})=>$?{snapshot:new CI(_n,Ba,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,tU(h),Gx(h),h.component??h._loadedComponent??null,h,eU(h)),consumedSegments:_n,remainingSegments:ha}:null));return V.pipe(D0($=>null===$?gS(o):this.getChildConfig(l=h._injector??l,h,y).pipe(D0(({routes:_n})=>{const ha=h._loadedInjector??l,{snapshot:Ba,consumedSegments:_d,remainingSegments:mg}=$,{segmentGroup:iy,slicedSegments:ay}=J8(o,_d,mg,_n);if(0===ay.length&&iy.hasChildren())return this.processChildren(ha,_n,iy).pipe(c_(_y=>null===_y?null:[new YE(Ba,_y)]));if(0===_n.length&&0===ay.length)return s_([new YE(Ba,[])]);const my=Gx(h)===_;return this.processSegment(ha,_n,iy,ay,my?O_:_,!0).pipe(c_(_y=>[new YE(Ba,_y)]))}))))}getChildConfig(l,o,h){return o.children?s_({routes:o.children,injector:l}):o.loadChildren?void 0!==o._loadedRoutes?s_({routes:o._loadedRoutes,injector:o._loadedInjector}):function pit(s,l,o,h){const y=l.canLoad;return void 0===y||0===y.length?s_(!0):s_(y.map(I=>{const V=pS(I,s);return gT(function tit(s){return s&&eM(s.canLoad)}(V)?V.canLoad(l,o):s.runInContext(()=>V(l,o)))})).pipe(mS(),K8())}(l,o,h).pipe(yy(y=>y?this.configLoader.loadChildren(l,o).pipe(p1(_=>{o._loadedRoutes=_.routes,o._loadedInjector=_.injector})):function yit(s){return cS(H8(!1,3))}())):s_({routes:[],injector:l})}}function Dit(s){const l=s.value.routeConfig;return l&&""===l.path}function Q8(s){const l=[],o=new Set;for(const h of s){if(!Dit(h)){l.push(h);continue}const y=l.find(_=>h.value.routeConfig===_.value.routeConfig);void 0!==y?(y.children.push(...h.children),o.add(y)):l.push(h)}for(const h of o){const y=Q8(h.children);l.push(new YE(h.value,y))}return l.filter(h=>!o.has(h))}function tU(s){return s.data||{}}function eU(s){return s.resolve||{}}function nU(s){return"string"==typeof s.title||null===s.title}function lN(s){return D0(l=>{const o=s(l);return o?u0(o).pipe(c_(()=>l)):s_(l)})}const yS=new Fy("ROUTES");let cN=(()=>{class s{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Ry(TB)}loadComponent(o){if(this.componentLoaders.get(o))return this.componentLoaders.get(o);if(o._loadedComponent)return s_(o._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(o);const h=gT(o.loadComponent()).pipe(c_(rU),p1(_=>{this.onLoadEndListener&&this.onLoadEndListener(o),o._loadedComponent=_}),aS(()=>{this.componentLoaders.delete(o)})),y=new d8(h,()=>new G_).pipe(HP());return this.componentLoaders.set(o,y),y}loadChildren(o,h){if(this.childrenLoaders.get(h))return this.childrenLoaders.get(h);if(h._loadedRoutes)return s_({routes:h._loadedRoutes,injector:h._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(h);const _=this.loadModuleFactoryOrRoutes(h.loadChildren).pipe(c_(V=>{this.onLoadEndListener&&this.onLoadEndListener(h);let $,_n;return Array.isArray(V)?_n=V:($=V.create(o).injector,_n=$.get(yS,[],uy.Self|uy.Optional).flat()),{routes:_n.map(oN),injector:$}}),aS(()=>{this.childrenLoaders.delete(h)})),I=new d8(_,()=>new G_).pipe(HP());return this.childrenLoaders.set(h,I),I}loadModuleFactoryOrRoutes(o){return gT(o()).pipe(c_(rU),yy(h=>h instanceof O5||Array.isArray(h)?s_(h):u0(this.compiler.compileModuleAsync(h))))}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=ry({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function rU(s){return function Lit(s){return s&&"object"==typeof s&&"default"in s}(s)?s.default:s}let RI=(()=>{class s{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new G_,this.configLoader=Ry(cN),this.environmentInjector=Ry(oE),this.urlSerializer=Ry(GC),this.rootContexts=Ry(XC),this.inputBindingEnabled=null!==Ry(MI,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>s_(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=y=>this.events.next(new Irt(y)),this.configLoader.onLoadStartListener=y=>this.events.next(new Drt(y))}complete(){this.transitions?.complete()}handleNavigationRequest(o){const h=++this.navigationId;this.transitions?.next({...this.transitions.value,...o,id:h})}setupNavigations(o){return this.transitions=new b0({id:0,currentUrlTree:o.currentUrlTree,currentRawUrl:o.currentUrlTree,extractedUrl:o.urlHandlingStrategy.extract(o.currentUrlTree),urlAfterRedirects:o.urlHandlingStrategy.extract(o.currentUrlTree),rawUrl:o.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:YC,restoredState:null,currentSnapshot:o.routerState.snapshot,targetSnapshot:null,currentRouterState:o.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Hx(h=>0!==h.id),c_(h=>({...h,extractedUrl:o.urlHandlingStrategy.extract(h.rawUrl)})),D0(h=>{let y=!1,_=!1;return s_(h).pipe(p1(I=>{this.currentNavigation={id:I.id,initialUrl:I.rawUrl,extractedUrl:I.extractedUrl,trigger:I.source,extras:I.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),D0(I=>{const V=o.browserUrlTree.toString(),$=!o.navigated||I.extractedUrl.toString()!==V||V!==o.currentUrlTree.toString();if(!$&&"reload"!==(I.extras.onSameUrlNavigation??o.onSameUrlNavigation)){const ha="";return this.events.next(new KC(I.id,o.serializeUrl(h.rawUrl),ha,0)),o.rawUrlTree=I.rawUrl,I.resolve(null),Ky}if(o.urlHandlingStrategy.shouldProcessUrl(I.rawUrl))return iU(I.source)&&(o.browserUrlTree=I.extractedUrl),s_(I).pipe(D0(ha=>{const Ba=this.transitions?.getValue();return this.events.next(new XP(ha.id,this.urlSerializer.serialize(ha.extractedUrl),ha.source,ha.restoredState)),Ba!==this.transitions?.getValue()?Ky:Promise.resolve(ha)}),function Iit(s,l,o,h,y,_){return yy(I=>function Sit(s,l,o,h,y,_,I="emptyOnly"){return new Cit(s,l,o,h,y,I,_).recognize()}(s,l,o,h,I.extractedUrl,y,_).pipe(c_(({state:V,tree:$})=>({...I,targetSnapshot:V,urlAfterRedirects:$}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,o.config,this.urlSerializer,o.paramsInheritanceStrategy),p1(ha=>{if(h.targetSnapshot=ha.targetSnapshot,h.urlAfterRedirects=ha.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:ha.urlAfterRedirects},"eager"===o.urlUpdateStrategy){if(!ha.extras.skipLocationChange){const _d=o.urlHandlingStrategy.merge(ha.urlAfterRedirects,ha.rawUrl);o.setBrowserUrl(_d,ha)}o.browserUrlTree=ha.urlAfterRedirects}const Ba=new Trt(ha.id,this.urlSerializer.serialize(ha.extractedUrl),this.urlSerializer.serialize(ha.urlAfterRedirects),ha.targetSnapshot);this.events.next(Ba)}));if($&&o.urlHandlingStrategy.shouldProcessUrl(o.rawUrlTree)){const{id:ha,extractedUrl:Ba,source:_d,restoredState:mg,extras:iy}=I,ay=new XP(ha,this.urlSerializer.serialize(Ba),_d,mg);this.events.next(ay);const my=F8(0,this.rootComponentType).snapshot;return s_(h={...I,targetSnapshot:my,urlAfterRedirects:Ba,extras:{...iy,skipLocationChange:!1,replaceUrl:!1}})}{const ha="";return this.events.next(new KC(I.id,o.serializeUrl(h.extractedUrl),ha,1)),o.rawUrlTree=I.rawUrl,I.resolve(null),Ky}}),p1(I=>{const V=new Art(I.id,this.urlSerializer.serialize(I.extractedUrl),this.urlSerializer.serialize(I.urlAfterRedirects),I.targetSnapshot);this.events.next(V)}),c_(I=>h={...I,guards:Krt(I.targetSnapshot,I.currentSnapshot,this.rootContexts)}),function sit(s,l){return yy(o=>{const{targetSnapshot:h,currentSnapshot:y,guards:{canActivateChecks:_,canDeactivateChecks:I}}=o;return 0===I.length&&0===_.length?s_({...o,guardsResult:!0}):function ait(s,l,o,h){return u0(s).pipe(yy(y=>function fit(s,l,o,h,y){const _=l&&l.routeConfig?l.routeConfig.canDeactivate:null;return _&&0!==_.length?s_(_.map(V=>{const $=JC(l)??y,_n=pS(V,$);return gT(function rit(s){return s&&eM(s.canDeactivate)}(_n)?_n.canDeactivate(s,l,o,h):$.runInContext(()=>_n(s,l,o,h))).pipe(XT())})).pipe(mS()):s_(!0)}(y.component,y.route,o,l,h)),XT(y=>!0!==y,!0))}(I,h,y,s).pipe(yy(V=>V&&function Qrt(s){return"boolean"==typeof s}(V)?function lit(s,l,o,h){return u0(l).pipe(sS(y=>vI(function uit(s,l){return null!==s&&l&&l(new krt(s)),s_(!0)}(y.route.parent,h),function cit(s,l){return null!==s&&l&&l(new Rrt(s)),s_(!0)}(y.route,h),function hit(s,l,o){const h=l[l.length-1],_=l.slice(0,l.length-1).reverse().map(I=>function Xrt(s){const l=s.routeConfig?s.routeConfig.canActivateChild:null;return l&&0!==l.length?{node:s,guards:l}:null}(I)).filter(I=>null!==I).map(I=>u8(()=>s_(I.guards.map($=>{const _n=JC(I.node)??o,ha=pS($,_n);return gT(function nit(s){return s&&eM(s.canActivateChild)}(ha)?ha.canActivateChild(h,s):_n.runInContext(()=>ha(h,s))).pipe(XT())})).pipe(mS())));return s_(_).pipe(mS())}(s,y.path,o),function dit(s,l,o){const h=l.routeConfig?l.routeConfig.canActivate:null;if(!h||0===h.length)return s_(!0);const y=h.map(_=>u8(()=>{const I=JC(l)??o,V=pS(_,I);return gT(function eit(s){return s&&eM(s.canActivate)}(V)?V.canActivate(l,s):I.runInContext(()=>V(l,s))).pipe(XT())}));return s_(y).pipe(mS())}(s,y.route,o))),XT(y=>!0!==y,!0))}(h,_,s,l):s_(V)),c_(V=>({...o,guardsResult:V})))})}(this.environmentInjector,I=>this.events.next(I)),p1(I=>{if(h.guardsResult=I.guardsResult,JT(I.guardsResult))throw z8(0,I.guardsResult);const V=new Srt(I.id,this.urlSerializer.serialize(I.extractedUrl),this.urlSerializer.serialize(I.urlAfterRedirects),I.targetSnapshot,!!I.guardsResult);this.events.next(V)}),Hx(I=>!!I.guardsResult||(o.restoreHistory(I),this.cancelNavigationTransition(I,"",3),!1)),lN(I=>{if(I.guards.canActivateChecks.length)return s_(I).pipe(p1(V=>{const $=new Crt(V.id,this.urlSerializer.serialize(V.extractedUrl),this.urlSerializer.serialize(V.urlAfterRedirects),V.targetSnapshot);this.events.next($)}),D0(V=>{let $=!1;return s_(V).pipe(function kit(s,l){return yy(o=>{const{targetSnapshot:h,guards:{canActivateChecks:y}}=o;if(!y.length)return s_(o);let _=0;return u0(y).pipe(sS(I=>function Oit(s,l,o,h){const y=s.routeConfig,_=s._resolve;return void 0!==y?.title&&!nU(y)&&(_[zC]=y.title),function Rit(s,l,o,h){const y=function Pit(s){return[...Object.keys(s),...Object.getOwnPropertySymbols(s)]}(s);if(0===y.length)return s_({});const _={};return u0(y).pipe(yy(I=>function Nit(s,l,o,h){const y=JC(l)??h,_=pS(s,y);return gT(_.resolve?_.resolve(l,o):y.runInContext(()=>_(l,o)))}(s[I],l,o,h).pipe(XT(),p1(V=>{_[I]=V}))),GP(1),function Knt(s){return c_(()=>s)}(_),WE(I=>Y8(I)?Ky:cS(I)))}(_,s,l,h).pipe(c_(I=>(s._resolvedData=I,s.data=j8(s,o).resolve,y&&nU(y)&&(s.data[zC]=y.title),null)))}(I.route,h,s,l)),p1(()=>_++),GP(1),yy(I=>_===y.length?s_(o):Ky))})}(o.paramsInheritanceStrategy,this.environmentInjector),p1({next:()=>$=!0,complete:()=>{$||(o.restoreHistory(V),this.cancelNavigationTransition(V,"",2))}}))}),p1(V=>{const $=new Mrt(V.id,this.urlSerializer.serialize(V.extractedUrl),this.urlSerializer.serialize(V.urlAfterRedirects),V.targetSnapshot);this.events.next($)}))}),lN(I=>{const V=$=>{const _n=[];$.routeConfig?.loadComponent&&!$.routeConfig._loadedComponent&&_n.push(this.configLoader.loadComponent($.routeConfig).pipe(p1(ha=>{$.component=ha}),c_(()=>{})));for(const ha of $.children)_n.push(...V(ha));return _n};return gI(V(I.targetSnapshot.root)).pipe(_I(),mT(1))}),lN(()=>this.afterPreactivation()),c_(I=>{const V=function Brt(s,l,o){const h=ZC(s,l._root,o?o._root:void 0);return new L8(h,l)}(o.routeReuseStrategy,I.targetSnapshot,I.currentRouterState);return h={...I,targetRouterState:V}}),p1(I=>{o.currentUrlTree=I.urlAfterRedirects,o.rawUrlTree=o.urlHandlingStrategy.merge(I.urlAfterRedirects,I.rawUrl),o.routerState=I.targetRouterState,"deferred"===o.urlUpdateStrategy&&(I.extras.skipLocationChange||o.setBrowserUrl(o.rawUrlTree,I),o.browserUrlTree=I.urlAfterRedirects)}),((s,l,o,h)=>c_(y=>(new Yrt(l,y.targetRouterState,y.currentRouterState,o,h).activate(s),y)))(this.rootContexts,o.routeReuseStrategy,I=>this.events.next(I),this.inputBindingEnabled),mT(1),p1({next:I=>{y=!0,this.lastSuccessfulNavigation=this.currentNavigation,o.navigated=!0,this.events.next(new QT(I.id,this.urlSerializer.serialize(I.extractedUrl),this.urlSerializer.serialize(o.currentUrlTree))),o.titleStrategy?.updateTitle(I.targetRouterState.snapshot),I.resolve(!0)},complete:()=>{y=!0}}),aS(()=>{y||_||this.cancelNavigationTransition(h,"",1),this.currentNavigation?.id===h.id&&(this.currentNavigation=null)}),WE(I=>{if(_=!0,$8(I)){G8(I)||(o.navigated=!0,o.restoreHistory(h,!0));const V=new SI(h.id,this.urlSerializer.serialize(h.extractedUrl),I.message,I.cancellationCode);if(this.events.next(V),G8(I)){const $=o.urlHandlingStrategy.merge(I.url,o.rawUrlTree),_n={skipLocationChange:h.extras.skipLocationChange,replaceUrl:"eager"===o.urlUpdateStrategy||iU(h.source)};o.scheduleNavigation($,YC,null,_n,{resolve:h.resolve,reject:h.reject,promise:h.promise})}else h.resolve(!1)}else{o.restoreHistory(h,!0);const V=new ZP(h.id,this.urlSerializer.serialize(h.extractedUrl),I,h.targetSnapshot??void 0);this.events.next(V);try{h.resolve(o.errorHandler(I))}catch($){h.reject($)}}return Ky}))}))}cancelNavigationTransition(o,h,y){const _=new SI(o.id,this.urlSerializer.serialize(o.extractedUrl),h,y);this.events.next(_),o.resolve(!1)}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=ry({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function iU(s){return s!==YC}let oU=(()=>{class s{buildTitle(o){let h,y=o.root;for(;void 0!==y;)h=this.getResolvedTitleForRoute(y)??h,y=y.children.find(_=>_.outlet===O_);return h}getResolvedTitleForRoute(o){return o.data[zC]}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=ry({token:s,factory:function(){return Ry(Fit)},providedIn:"root"}),s})(),Fit=(()=>{class s extends oU{constructor(o){super(),this.title=o}updateTitle(o){const h=this.buildTitle(o);void 0!==h&&this.title.setTitle(h)}}return s.\u0275fac=function(o){return new(o||s)(Py(rV))},s.\u0275prov=ry({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),jit=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=ry({token:s,factory:function(){return Ry(Vit)},providedIn:"root"}),s})();class Bit{shouldDetach(l){return!1}store(l,o){}shouldAttach(l){return!1}retrieve(l){return null}shouldReuseRoute(l,o){return l.routeConfig===o.routeConfig}}let Vit=(()=>{class s extends Bit{}return s.\u0275fac=function(){let l;return function(h){return(l||(l=v1(s)))(h||s)}}(),s.\u0275prov=ry({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const PI=new Fy("",{providedIn:"root",factory:()=>({})});let Uit=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=ry({token:s,factory:function(){return Ry(zit)},providedIn:"root"}),s})(),zit=(()=>{class s{shouldProcessUrl(o){return!0}extract(o){return o}merge(o,h){return o}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=ry({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var mx=(()=>((mx=mx||{})[mx.COMPLETE=0]="COMPLETE",mx[mx.FAILED=1]="FAILED",mx[mx.REDIRECTING=2]="REDIRECTING",mx))();function sU(s,l){s.events.pipe(Hx(o=>o instanceof QT||o instanceof SI||o instanceof ZP||o instanceof KC),c_(o=>o instanceof QT||o instanceof KC?mx.COMPLETE:o instanceof SI&&(0===o.code||1===o.code)?mx.REDIRECTING:mx.FAILED),Hx(o=>o!==mx.REDIRECTING),mT(1)).subscribe(()=>{l()})}function Hit(s){throw s}function Git(s,l,o){return l.parse("/")}const $it={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},qit={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let kx=(()=>{class s{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Ry(EB),this.isNgZoneEnabled=!1,this.options=Ry(PI,{optional:!0})||{},this.pendingTasks=Ry(DD),this.errorHandler=this.options.errorHandler||Hit,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Git,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Ry(Uit),this.routeReuseStrategy=Ry(jit),this.titleStrategy=Ry(oU),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Ry(yS,{optional:!0})?.flat()??[],this.navigationTransitions=Ry(RI),this.urlSerializer=Ry(GC),this.location=Ry(zR),this.componentInputBindingEnabled=!!Ry(MI,{optional:!0}),this.isNgZoneEnabled=Ry(H_)instanceof H_&&H_.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new dS,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=F8(0,null),this.navigationTransitions.setupNavigations(this).subscribe(o=>{this.lastSuccessfulId=o.id,this.currentPageId=this.browserPageId??0},o=>{this.console.warn(`Unhandled Navigation Error: ${o}`)})}resetRootComponentType(o){this.routerState.root.component=o,this.navigationTransitions.rootComponentType=o}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const o=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),YC,o)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(o=>{const h="popstate"===o.type?"popstate":"hashchange";"popstate"===h&&setTimeout(()=>{this.navigateToSyncWithBrowser(o.url,h,o.state)},0)}))}navigateToSyncWithBrowser(o,h,y){const _={replaceUrl:!0},I=y?.navigationId?y:null;if(y){const $={...y};delete $.navigationId,delete $.\u0275routerPageId,0!==Object.keys($).length&&(_.state=$)}const V=this.parseUrl(o);this.scheduleNavigation(V,h,I,_)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(o){this.config=o.map(oN),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(o,h={}){const{relativeTo:y,queryParams:_,fragment:I,queryParamsHandling:V,preserveFragment:$}=h,_n=$?this.currentUrlTree.fragment:I;let Ba,ha=null;switch(V){case"merge":ha={...this.currentUrlTree.queryParams,..._};break;case"preserve":ha=this.currentUrlTree.queryParams;break;default:ha=_||null}null!==ha&&(ha=this.removeEmptyProps(ha));try{Ba=C8(y?y.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof o[0]||!o[0].startsWith("/"))&&(o=[]),Ba=this.currentUrlTree.root}return M8(Ba,o,ha,_n??null)}navigateByUrl(o,h={skipLocationChange:!1}){const y=JT(o)?o:this.parseUrl(o),_=this.urlHandlingStrategy.merge(y,this.rawUrlTree);return this.scheduleNavigation(_,YC,null,h)}navigate(o,h={skipLocationChange:!1}){return function Wit(s){for(let l=0;l<s.length;l++)if(null==s[l])throw new py(4008,!1)}(o),this.navigateByUrl(this.createUrlTree(o,h),h)}serializeUrl(o){return this.urlSerializer.serialize(o)}parseUrl(o){let h;try{h=this.urlSerializer.parse(o)}catch(y){h=this.malformedUriErrorHandler(y,this.urlSerializer,o)}return h}isActive(o,h){let y;if(y=!0===h?{...$it}:!1===h?{...qit}:h,JT(o))return y8(this.currentUrlTree,o,y);const _=this.parseUrl(o);return y8(this.currentUrlTree,_,y)}removeEmptyProps(o){return Object.keys(o).reduce((h,y)=>{const _=o[y];return null!=_&&(h[y]=_),h},{})}scheduleNavigation(o,h,y,_,I){if(this.disposed)return Promise.resolve(!1);let V,$,_n;I?(V=I.resolve,$=I.reject,_n=I.promise):_n=new Promise((Ba,_d)=>{V=Ba,$=_d});const ha=this.pendingTasks.add();return sU(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(ha))}),this.navigationTransitions.handleNavigationRequest({source:h,restoredState:y,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:o,extras:_,resolve:V,reject:$,promise:_n,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_n.catch(Ba=>Promise.reject(Ba))}setBrowserUrl(o,h){const y=this.urlSerializer.serialize(o);if(this.location.isCurrentPathEqualTo(y)||h.extras.replaceUrl){const I={...h.extras.state,...this.generateNgRouterState(h.id,this.browserPageId)};this.location.replaceState(y,"",I)}else{const _={...h.extras.state,...this.generateNgRouterState(h.id,(this.browserPageId??0)+1)};this.location.go(y,"",_)}}restoreHistory(o,h=!1){if("computed"===this.canceledNavigationResolution){const _=this.currentPageId-(this.browserPageId??this.currentPageId);0!==_?this.location.historyGo(_):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===_&&(this.resetState(o),this.browserUrlTree=o.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(h&&this.resetState(o),this.resetUrlToCurrentUrlTree())}resetState(o){this.routerState=o.currentRouterState,this.currentUrlTree=o.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,o.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(o,h){return"computed"===this.canceledNavigationResolution?{navigationId:o,\u0275routerPageId:h}:{navigationId:o}}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=ry({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),nM=(()=>{class s{constructor(o,h,y,_,I,V){this.router=o,this.route=h,this.tabIndexAttribute=y,this.renderer=_,this.el=I,this.locationStrategy=V,this.href=null,this.commands=null,this.onChanges=new G_,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const $=I.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===$||"area"===$,this.isAnchorElement?this.subscription=o.events.subscribe(_n=>{_n instanceof QT&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(o){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",o)}ngOnChanges(o){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(o){null!=o?(this.commands=Array.isArray(o)?o:[o],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(o,h,y,_,I){return!!(null===this.urlTree||this.isAnchorElement&&(0!==o||h||y||_||I||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const o=null===this.href?null:function $4(s,l,o){return function x7(s,l){return"src"===l&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===l&&("base"===s||"link"===s)?G4:H4}(l,o)(s)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",o)}applyAttributeValue(o,h){const y=this.renderer,_=this.el.nativeElement;null!==h?y.setAttribute(_,o,h):y.removeAttribute(_,o)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return s.\u0275fac=function(o){return new(o||s)(gy(kx),gy(fS),DA("tabindex"),gy(sE),gy(C0),gy(HT))},s.\u0275dir=Zy({type:s,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(o,h){1&o&&Z0("click",function(_){return h.onClick(_.button,_.ctrlKey,_.shiftKey,_.altKey,_.metaKey)}),2&o&&j1("target",h.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",UE],skipLocationChange:["skipLocationChange","skipLocationChange",UE],replaceUrl:["replaceUrl","replaceUrl",UE],routerLink:"routerLink"},standalone:!0,features:[NO,N1]}),s})(),aU=(()=>{class s{get isActive(){return this._isActive}constructor(o,h,y,_,I){this.router=o,this.element=h,this.renderer=y,this.cdr=_,this.link=I,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new B0,this.routerEventsSubscription=o.events.subscribe(V=>{V instanceof QT&&this.update()})}ngAfterContentInit(){s_(this.links.changes,s_(null)).pipe(Iy()).subscribe(o=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const o=[...this.links.toArray(),this.link].filter(h=>!!h).map(h=>h.onChanges);this.linkInputChangesSubscription=u0(o).pipe(Iy()).subscribe(h=>{this._isActive!==this.isLinkActive(this.router)(h)&&this.update()})}set routerLinkActive(o){const h=Array.isArray(o)?o:o.split(" ");this.classes=h.filter(y=>!!y)}ngOnChanges(o){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const o=this.hasActiveLinks();this._isActive!==o&&(this._isActive=o,this.cdr.markForCheck(),this.classes.forEach(h=>{o?this.renderer.addClass(this.element.nativeElement,h):this.renderer.removeClass(this.element.nativeElement,h)}),o&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(o))})}isLinkActive(o){const h=function Yit(s){return!!s.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return y=>!!y.urlTree&&o.isActive(y.urlTree,h)}hasActiveLinks(){const o=this.isLinkActive(this.router);return this.link&&o(this.link)||this.links.some(o)}}return s.\u0275fac=function(o){return new(o||s)(gy(kx),gy(C0),gy(sE),gy(MC),gy(nM,8))},s.\u0275dir=Zy({type:s,selectors:[["","routerLinkActive",""]],contentQueries:function(o,h,y){if(1&o&&pE(y,nM,5),2&o){let _;s1(_=a1())&&(h.links=_)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[N1]}),s})();class lU{}let Kit=(()=>{class s{constructor(o,h,y,_,I){this.router=o,this.injector=y,this.preloadingStrategy=_,this.loader=I}setUpPreloading(){this.subscription=this.router.events.pipe(Hx(o=>o instanceof QT),sS(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(o,h){const y=[];for(const _ of h){_.providers&&!_._injector&&(_._injector=aR(_.providers,o,`Route: ${_.path}`));const I=_._injector??o,V=_._loadedInjector??I;(_.loadChildren&&!_._loadedRoutes&&void 0===_.canLoad||_.loadComponent&&!_._loadedComponent)&&y.push(this.preloadConfig(I,_)),(_.children||_._loadedRoutes)&&y.push(this.processRoutes(V,_.children??_._loadedRoutes))}return u0(y).pipe(Iy())}preloadConfig(o,h){return this.preloadingStrategy.preload(h,()=>{let y;y=h.loadChildren&&void 0===h.canLoad?this.loader.loadChildren(o,h):s_(null);const _=y.pipe(yy(I=>null===I?s_(void 0):(h._loadedRoutes=I.routes,h._loadedInjector=I.injector,this.processRoutes(I.injector??o,I.routes))));return h.loadComponent&&!h._loadedComponent?u0([_,this.loader.loadComponent(h)]).pipe(Iy()):_})}}return s.\u0275fac=function(o){return new(o||s)(Py(kx),Py(TB),Py(oE),Py(lU),Py(cN))},s.\u0275prov=ry({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const uN=new Fy("");let cU=(()=>{class s{constructor(o,h,y,_,I={}){this.urlSerializer=o,this.transitions=h,this.viewportScroller=y,this.zone=_,this.options=I,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},I.scrollPositionRestoration=I.scrollPositionRestoration||"disabled",I.anchorScrolling=I.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(o=>{o instanceof XP?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=o.navigationTrigger,this.restoredId=o.restoredState?o.restoredState.navigationId:0):o instanceof QT?(this.lastId=o.id,this.scheduleScrollEvent(o,this.urlSerializer.parse(o.urlAfterRedirects).fragment)):o instanceof KC&&0===o.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(o,this.urlSerializer.parse(o.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(o=>{o instanceof P8&&(o.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(o.position):o.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(o.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(o,h){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new P8(o,"popstate"===this.lastSource?this.store[this.restoredId]:null,h))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return s.\u0275fac=function(o){EO()},s.\u0275prov=ry({token:s,factory:s.\u0275fac}),s})();function KE(s,l){return{\u0275kind:s,\u0275providers:l}}function dU(){const s=Ry(Ax);return l=>{const o=s.get(UT);if(l!==o.components[0])return;const h=s.get(kx),y=s.get(hU);1===s.get(dN)&&h.initialNavigation(),s.get(pU,null,uy.Optional)?.setUpPreloading(),s.get(uN,null,uy.Optional)?.init(),h.resetRootComponentType(o.componentTypes[0]),y.closed||(y.next(),y.complete(),y.unsubscribe())}}const hU=new Fy("",{factory:()=>new G_}),dN=new Fy("",{providedIn:"root",factory:()=>1}),pU=new Fy("");function Qit(s){return KE(0,[{provide:pU,useExisting:Kit},{provide:lU,useExisting:s}])}const mU=new Fy("ROUTER_FORROOT_GUARD"),eot=[zR,{provide:GC,useClass:$P},kx,XC,{provide:fS,useFactory:function uU(s){return s.routerState.root},deps:[kx]},cN,[]];function rot(){return new NB("Router",kx)}let gU=(()=>{class s{constructor(o){}static forRoot(o,h){return{ngModule:s,providers:[eot,[],{provide:yS,multi:!0,useValue:o},{provide:mU,useFactory:aot,deps:[[kx,new RT,new WS]]},{provide:PI,useValue:h||{}},h?.useHash?{provide:HT,useClass:PZ}:{provide:HT,useClass:u6},{provide:uN,useFactory:()=>{const s=Ry(JJ),l=Ry(H_),o=Ry(PI),h=Ry(RI),y=Ry(GC);return o.scrollOffset&&s.setOffset(o.scrollOffset),new cU(y,h,s,l,o)}},h?.preloadingStrategy?Qit(h.preloadingStrategy).\u0275providers:[],{provide:NB,multi:!0,useFactory:rot},h?.initialNavigation?lot(h):[],h?.bindToComponentInputs?KE(8,[U8,{provide:MI,useExisting:U8}]).\u0275providers:[],[{provide:yU,useFactory:dU},{provide:kR,multi:!0,useExisting:yU}]]}}static forChild(o){return{ngModule:s,providers:[{provide:yS,multi:!0,useValue:o}]}}}return s.\u0275fac=function(o){return new(o||s)(Py(mU,8))},s.\u0275mod=L0({type:s}),s.\u0275inj=xy({}),s})();function aot(s){return"guarded"}function lot(s){return["disabled"===s.initialNavigation?KE(3,[{provide:ER,multi:!0,useFactory:()=>{const l=Ry(kx);return()=>{l.setUpLocationChangeListener()}}},{provide:dN,useValue:2}]).\u0275providers:[],"enabledBlocking"===s.initialNavigation?KE(2,[{provide:dN,useValue:0},{provide:ER,multi:!0,deps:[Ax],useFactory:l=>{const o=l.get(OZ,Promise.resolve());return()=>o.then(()=>new Promise(h=>{const y=l.get(kx),_=l.get(hU);sU(y,()=>{h(!0)}),l.get(RI).afterPreactivation=()=>(h(!0),_.closed?s_(void 0):_),y.initialNavigation()}))}}]).\u0275providers:[]]}const yU=new Fy("");let hN;try{hN=typeof Intl<"u"&&Intl.v8BreakIterator}catch{hN=!1}let vS,$x=(()=>{class s{constructor(o){this._platformId=o,this.isBrowser=this._platformId?function ZJ(s){return s===k6}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!hN)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return s.\u0275fac=function(o){return new(o||s)(Py(NE))},s.\u0275prov=ry({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const vU=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function _U(){if(vS)return vS;if("object"!=typeof document||!document)return vS=new Set(vU),vS;let s=document.createElement("input");return vS=new Set(vU.filter(l=>(s.setAttribute("type",l),s.type===l))),vS}let rM,fN;function iM(s){return function uot(){if(null==rM&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>rM=!0}))}finally{rM=rM||!1}return rM}()?s:!!s.capture}function _S(s){return s.composedPath?s.composedPath()[0]:s.target}function bU(s){return Hx((l,o)=>s<=o)}function bS(s){return X_((l,o)=>{W0(s).subscribe(N_(o,()=>o.complete(),_s)),!o.closed&&l.subscribe(o)})}function eA(s){return null!=s&&"false"!=`${s}`}function wU(s){return Array.isArray(s)?s:[s]}function nA(s){return s instanceof C0?s.nativeElement:s}class bot extends w{constructor(l,o){super()}schedule(l,o=0){return this}}const LI={setInterval(s,l,...o){const{delegate:h}=LI;return h?.setInterval?h.setInterval(s,l,...o):setInterval(s,l,...o)},clearInterval(s){const{delegate:l}=LI;return(l?.clearInterval||clearInterval)(s)},delegate:void 0},pN={now:()=>(pN.delegate||Date).now(),delegate:void 0};class oM{constructor(l,o=oM.now){this.schedulerActionCtor=l,this.now=o}schedule(l,o=0,h){return new this.schedulerActionCtor(this,l).schedule(h,o)}}oM.now=pN.now;const Eot=new class xot extends oM{constructor(l,o=oM.now){super(l,o),this.actions=[],this._active=!1}flush(l){const{actions:o}=this;if(this._active)return void o.push(l);let h;this._active=!0;do{if(h=l.execute(l.state,l.delay))break}while(l=o.shift());if(this._active=!1,h){for(;l=o.shift();)l.unsubscribe();throw h}}}(class wot extends bot{constructor(l,o){super(l,o),this.scheduler=l,this.work=o,this.pending=!1}schedule(l,o=0){var h;if(this.closed)return this;this.state=l;const y=this.id,_=this.scheduler;return null!=y&&(this.id=this.recycleAsyncId(_,y,o)),this.pending=!0,this.delay=o,this.id=null!==(h=this.id)&&void 0!==h?h:this.requestAsyncId(_,this.id,o),this}requestAsyncId(l,o,h=0){return LI.setInterval(l.flush.bind(l,this),h)}recycleAsyncId(l,o,h=0){if(null!=h&&this.delay===h&&!1===this.pending)return o;null!=o&&LI.clearInterval(o)}execute(l,o){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const h=this._execute(l,o);if(h)return h;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(l,o){let y,h=!1;try{this.work(l)}catch(_){h=!0,y=_||new Error("Scheduled action threw falsy error")}if(h)return this.unsubscribe(),y}unsubscribe(){if(!this.closed){const{id:l,scheduler:o}=this,{actions:h}=o;this.work=this.state=this.scheduler=null,this.pending=!1,v(h,this),null!=l&&(this.id=this.recycleAsyncId(o,l,null)),this.delay=null,super.unsubscribe()}}}),xU=new Set;let rA,Aot=(()=>{class s{constructor(o,h){this._platform=o,this._nonce=h,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Cot}matchMedia(o){return(this._platform.WEBKIT||this._platform.BLINK)&&function Sot(s,l){if(!xU.has(s))try{rA||(rA=document.createElement("style"),l&&(rA.nonce=l),rA.setAttribute("type","text/css"),document.head.appendChild(rA)),rA.sheet&&(rA.sheet.insertRule(`@media ${s} {body{ }}`,0),xU.add(s))}catch(o){console.error(o)}}(o,this._nonce),this._matchMedia(o)}}return s.\u0275fac=function(o){return new(o||s)(Py($x),Py(uO,8))},s.\u0275prov=ry({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Cot(s){return{matches:"all"===s||""===s,media:s,addListener:()=>{},removeListener:()=>{}}}let Mot=(()=>{class s{constructor(o,h){this._mediaMatcher=o,this._zone=h,this._queries=new Map,this._destroySubject=new G_}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(o){return EU(wU(o)).some(y=>this._registerQuery(y).mql.matches)}observe(o){let _=gI(EU(wU(o)).map(I=>this._registerQuery(I).observable));return _=vI(_.pipe(mT(1)),_.pipe(bU(1),function Tot(s,l=Eot){return X_((o,h)=>{let y=null,_=null,I=null;const V=()=>{if(y){y.unsubscribe(),y=null;const _n=_;_=null,h.next(_n)}};function $(){const _n=I+s,ha=l.now();if(ha<_n)return y=this.schedule(void 0,_n-ha),void h.add(y);V()}o.subscribe(N_(h,_n=>{_=_n,I=l.now(),y||(y=l.schedule($,s),h.add(y))},()=>{V(),h.complete()},void 0,()=>{_=y=null}))})}(0))),_.pipe(c_(I=>{const V={matches:!1,breakpoints:{}};return I.forEach(({matches:$,query:_n})=>{V.matches=V.matches||$,V.breakpoints[_n]=$}),V}))}_registerQuery(o){if(this._queries.has(o))return this._queries.get(o);const h=this._mediaMatcher.matchMedia(o),_={observable:new qy(I=>{const V=$=>this._zone.run(()=>I.next($));return h.addListener(V),()=>{h.removeListener(V)}}).pipe(h8(h),c_(({matches:I})=>({query:o,matches:I})),bS(this._destroySubject)),mql:h};return this._queries.set(o,_),_}}return s.\u0275fac=function(o){return new(o||s)(Py(Aot),Py(H_))},s.\u0275prov=ry({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function EU(s){return s.map(l=>l.split(",")).reduce((l,o)=>l.concat(o)).map(l=>l.trim())}function CU(s){return 0===s.buttons||0===s.offsetX&&0===s.offsetY}function MU(s){const l=s.touches&&s.touches[0]||s.changedTouches&&s.changedTouches[0];return!(!l||-1!==l.identifier||null!=l.radiusX&&1!==l.radiusX||null!=l.radiusY&&1!==l.radiusY)}const Lot=new Fy("cdk-input-modality-detector-options"),Fot={ignoreKeys:[18,17,224,91,16]},wS=iM({passive:!0,capture:!0});let jot=(()=>{class s{get mostRecentModality(){return this._modality.value}constructor(o,h,y,_){this._platform=o,this._mostRecentTarget=null,this._modality=new b0(null),this._lastTouchMs=0,this._onKeydown=I=>{this._options?.ignoreKeys?.some(V=>V===I.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=_S(I))},this._onMousedown=I=>{Date.now()-this._lastTouchMs<650||(this._modality.next(CU(I)?"keyboard":"mouse"),this._mostRecentTarget=_S(I))},this._onTouchstart=I=>{MU(I)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=_S(I))},this._options={...Fot,..._},this.modalityDetected=this._modality.pipe(bU(1)),this.modalityChanged=this.modalityDetected.pipe(iT()),o.isBrowser&&h.runOutsideAngular(()=>{y.addEventListener("keydown",this._onKeydown,wS),y.addEventListener("mousedown",this._onMousedown,wS),y.addEventListener("touchstart",this._onTouchstart,wS)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,wS),document.removeEventListener("mousedown",this._onMousedown,wS),document.removeEventListener("touchstart",this._onTouchstart,wS))}}return s.\u0275fac=function(o){return new(o||s)(Py($x),Py(H_),Py(m0),Py(Lot,8))},s.\u0275prov=ry({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Vot=new Fy("cdk-focus-monitor-default-options"),FI=iM({passive:!0,capture:!0});let Uot=(()=>{class s{constructor(o,h,y,_,I){this._ngZone=o,this._platform=h,this._inputModalityDetector=y,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new G_,this._rootNodeFocusAndBlurListener=V=>{for(let _n=_S(V);_n;_n=_n.parentElement)"focus"===V.type?this._onFocus(V,_n):this._onBlur(V,_n)},this._document=_,this._detectionMode=I?.detectionMode||0}monitor(o,h=!1){const y=nA(o);if(!this._platform.isBrowser||1!==y.nodeType)return s_();const _=function hot(s){if(function dot(){if(null==fN){const s=typeof document<"u"?document.head:null;fN=!(!s||!s.createShadowRoot&&!s.attachShadow)}return fN}()){const l=s.getRootNode?s.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&l instanceof ShadowRoot)return l}return null}(y)||this._getDocument(),I=this._elementInfo.get(y);if(I)return h&&(I.checkChildren=!0),I.subject;const V={checkChildren:h,subject:new G_,rootNode:_};return this._elementInfo.set(y,V),this._registerGlobalListeners(V),V.subject}stopMonitoring(o){const h=nA(o),y=this._elementInfo.get(h);y&&(y.subject.complete(),this._setClasses(h),this._elementInfo.delete(h),this._removeGlobalListeners(y))}focusVia(o,h,y){const _=nA(o);_===this._getDocument().activeElement?this._getClosestElementsInfo(_).forEach(([V,$])=>this._originChanged(V,h,$)):(this._setOrigin(h),"function"==typeof _.focus&&_.focus(y))}ngOnDestroy(){this._elementInfo.forEach((o,h)=>this.stopMonitoring(h))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(o){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(o)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:o&&this._isLastInteractionFromInputLabel(o)?"mouse":"program"}_shouldBeAttributedToTouch(o){return 1===this._detectionMode||!!o?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(o,h){o.classList.toggle("cdk-focused",!!h),o.classList.toggle("cdk-touch-focused","touch"===h),o.classList.toggle("cdk-keyboard-focused","keyboard"===h),o.classList.toggle("cdk-mouse-focused","mouse"===h),o.classList.toggle("cdk-program-focused","program"===h)}_setOrigin(o,h=!1){this._ngZone.runOutsideAngular(()=>{this._origin=o,this._originFromTouchInteraction="touch"===o&&h,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(o,h){const y=this._elementInfo.get(h),_=_S(o);!y||!y.checkChildren&&h!==_||this._originChanged(h,this._getFocusOrigin(_),y)}_onBlur(o,h){const y=this._elementInfo.get(h);!y||y.checkChildren&&o.relatedTarget instanceof Node&&h.contains(o.relatedTarget)||(this._setClasses(h),this._emitOrigin(y,null))}_emitOrigin(o,h){o.subject.observers.length&&this._ngZone.run(()=>o.subject.next(h))}_registerGlobalListeners(o){if(!this._platform.isBrowser)return;const h=o.rootNode,y=this._rootNodeFocusListenerCount.get(h)||0;y||this._ngZone.runOutsideAngular(()=>{h.addEventListener("focus",this._rootNodeFocusAndBlurListener,FI),h.addEventListener("blur",this._rootNodeFocusAndBlurListener,FI)}),this._rootNodeFocusListenerCount.set(h,y+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(bS(this._stopInputModalityDetector)).subscribe(_=>{this._setOrigin(_,!0)}))}_removeGlobalListeners(o){const h=o.rootNode;if(this._rootNodeFocusListenerCount.has(h)){const y=this._rootNodeFocusListenerCount.get(h);y>1?this._rootNodeFocusListenerCount.set(h,y-1):(h.removeEventListener("focus",this._rootNodeFocusAndBlurListener,FI),h.removeEventListener("blur",this._rootNodeFocusAndBlurListener,FI),this._rootNodeFocusListenerCount.delete(h))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(o,h,y){this._setClasses(o,h),this._emitOrigin(y,h),this._lastFocusOrigin=h}_getClosestElementsInfo(o){const h=[];return this._elementInfo.forEach((y,_)=>{(_===o||y.checkChildren&&_.contains(o))&&h.push([_,y])}),h}_isLastInteractionFromInputLabel(o){const{_mostRecentTarget:h,mostRecentModality:y}=this._inputModalityDetector;if("mouse"!==y||!h||h===o||"INPUT"!==o.nodeName&&"TEXTAREA"!==o.nodeName||o.disabled)return!1;const _=o.labels;if(_)for(let I=0;I<_.length;I++)if(_[I].contains(h))return!0;return!1}}return s.\u0275fac=function(o){return new(o||s)(Py(H_),Py($x),Py(jot),Py(m0,8),Py(Vot,8))},s.\u0275prov=ry({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const IU="cdk-high-contrast-black-on-white",kU="cdk-high-contrast-white-on-black",mN="cdk-high-contrast-active";let zot=(()=>{class s{constructor(o,h){this._platform=o,this._document=h,this._breakpointSubscription=Ry(Mot).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const o=this._document.createElement("div");o.style.backgroundColor="rgb(1,2,3)",o.style.position="absolute",this._document.body.appendChild(o);const h=this._document.defaultView||window,y=h&&h.getComputedStyle?h.getComputedStyle(o):null,_=(y&&y.backgroundColor||"").replace(/ /g,"");switch(o.remove(),_){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const o=this._document.body.classList;o.remove(mN,IU,kU),this._hasCheckedHighContrastMode=!0;const h=this.getHighContrastMode();1===h?o.add(mN,IU):2===h&&o.add(mN,kU)}}}return s.\u0275fac=function(o){return new(o||s)(Py($x),Py(m0))},s.\u0275prov=ry({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Hot=new Fy("cdk-dir-doc",{providedIn:"root",factory:function Got(){return Ry(m0)}}),$ot=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Wot=(()=>{class s{constructor(o){this.value="ltr",this.change=new B0,o&&(this.value=function qot(s){const l=s?.toLowerCase()||"";return"auto"===l&&typeof navigator<"u"&&navigator?.language?$ot.test(navigator.language)?"rtl":"ltr":"rtl"===l?"rtl":"ltr"}((o.body?o.body.dir:null)||(o.documentElement?o.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return s.\u0275fac=function(o){return new(o||s)(Py(Hot,8))},s.\u0275prov=ry({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),OU=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=L0({type:s}),s.\u0275inj=xy({}),s})();const Kot=new Fy("mat-sanity-checks",{providedIn:"root",factory:function Yot(){return!0}});let _w=(()=>{class s{constructor(o,h,y){this._sanityChecks=h,this._document=y,this._hasDoneGlobalChecks=!1,o._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(o){return!function fot(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[o])}}return s.\u0275fac=function(o){return new(o||s)(Py(zot),Py(Kot,8),Py(m0))},s.\u0275mod=L0({type:s}),s.\u0275inj=xy({imports:[OU,OU]}),s})();function Xot(s){return class extends s{get disabled(){return this._disabled}set disabled(l){this._disabled=eA(l)}constructor(...l){super(...l),this._disabled=!1}}}function gN(s,l){return class extends s{get color(){return this._color}set color(o){const h=o||this.defaultColor;h!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),h&&this._elementRef.nativeElement.classList.add(`mat-${h}`),this._color=h)}constructor(...o){super(...o),this.defaultColor=l,this.color=l}}}function Zot(s){return class extends s{get disableRipple(){return this._disableRipple}set disableRipple(l){this._disableRipple=eA(l)}constructor(...l){super(...l),this._disableRipple=!1}}}function Jot(s){return class extends s{updateErrorState(){const l=this.errorState,_=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);_!==l&&(this.errorState=_,this.stateChanges.next())}constructor(...l){super(...l),this.errorState=!1}}}let tst=(()=>{class s{isErrorState(o,h){return!!(o&&o.invalid&&(o.touched||h&&h.submitted))}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=ry({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();class est{constructor(l,o,h,y=!1){this._renderer=l,this.element=o,this.config=h,this._animationForciblyDisabledThroughCss=y,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const NU=iM({passive:!0,capture:!0});class nst{constructor(){this._events=new Map,this._delegateEventHandler=l=>{const o=_S(l);o&&this._events.get(l.type)?.forEach((h,y)=>{(y===o||y.contains(o))&&h.forEach(_=>_.handleEvent(l))})}}addHandler(l,o,h,y){const _=this._events.get(o);if(_){const I=_.get(h);I?I.add(y):_.set(h,new Set([y]))}else this._events.set(o,new Map([[h,new Set([y])]])),l.runOutsideAngular(()=>{document.addEventListener(o,this._delegateEventHandler,NU)})}removeHandler(l,o,h){const y=this._events.get(l);if(!y)return;const _=y.get(o);_&&(_.delete(h),0===_.size&&y.delete(o),0===y.size&&(this._events.delete(l),document.removeEventListener(l,this._delegateEventHandler,NU)))}}const LU={enterDuration:225,exitDuration:150},FU=iM({passive:!0,capture:!0}),jU=["mousedown","touchstart"],BU=["mouseup","mouseleave","touchend","touchcancel"];class xS{constructor(l,o,h,y){this._target=l,this._ngZone=o,this._platform=y,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,y.isBrowser&&(this._containerElement=nA(h))}fadeInRipple(l,o,h={}){const y=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),_={...LU,...h.animation};h.centered&&(l=y.left+y.width/2,o=y.top+y.height/2);const I=h.radius||function ist(s,l,o){const h=Math.max(Math.abs(s-o.left),Math.abs(s-o.right)),y=Math.max(Math.abs(l-o.top),Math.abs(l-o.bottom));return Math.sqrt(h*h+y*y)}(l,o,y),V=l-y.left,$=o-y.top,_n=_.enterDuration,ha=document.createElement("div");ha.classList.add("mat-ripple-element"),ha.style.left=V-I+"px",ha.style.top=$-I+"px",ha.style.height=2*I+"px",ha.style.width=2*I+"px",null!=h.color&&(ha.style.backgroundColor=h.color),ha.style.transitionDuration=`${_n}ms`,this._containerElement.appendChild(ha);const Ba=window.getComputedStyle(ha),mg=Ba.transitionDuration,iy="none"===Ba.transitionProperty||"0s"===mg||"0s, 0s"===mg||0===y.width&&0===y.height,ay=new est(this,ha,h,iy);ha.style.transform="scale3d(1, 1, 1)",ay.state=0,h.persistent||(this._mostRecentTransientRipple=ay);let my=null;return!iy&&(_n||_.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const _y=()=>this._finishRippleTransition(ay),fy=()=>this._destroyRipple(ay);ha.addEventListener("transitionend",_y),ha.addEventListener("transitioncancel",fy),my={onTransitionEnd:_y,onTransitionCancel:fy}}),this._activeRipples.set(ay,my),(iy||!_n)&&this._finishRippleTransition(ay),ay}fadeOutRipple(l){if(2===l.state||3===l.state)return;const o=l.element,h={...LU,...l.config.animation};o.style.transitionDuration=`${h.exitDuration}ms`,o.style.opacity="0",l.state=2,(l._animationForciblyDisabledThroughCss||!h.exitDuration)&&this._finishRippleTransition(l)}fadeOutAll(){this._getActiveRipples().forEach(l=>l.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(l=>{l.config.persistent||l.fadeOut()})}setupTriggerEvents(l){const o=nA(l);!this._platform.isBrowser||!o||o===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=o,jU.forEach(h=>{xS._eventManager.addHandler(this._ngZone,h,o,this)}))}handleEvent(l){"mousedown"===l.type?this._onMousedown(l):"touchstart"===l.type?this._onTouchStart(l):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{BU.forEach(o=>{this._triggerElement.addEventListener(o,this,FU)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(l){0===l.state?this._startFadeOutTransition(l):2===l.state&&this._destroyRipple(l)}_startFadeOutTransition(l){const o=l===this._mostRecentTransientRipple,{persistent:h}=l.config;l.state=1,!h&&(!o||!this._isPointerDown)&&l.fadeOut()}_destroyRipple(l){const o=this._activeRipples.get(l)??null;this._activeRipples.delete(l),this._activeRipples.size||(this._containerRect=null),l===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),l.state=3,null!==o&&(l.element.removeEventListener("transitionend",o.onTransitionEnd),l.element.removeEventListener("transitioncancel",o.onTransitionCancel)),l.element.remove()}_onMousedown(l){const o=CU(l),h=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!o&&!h&&(this._isPointerDown=!0,this.fadeInRipple(l.clientX,l.clientY,this._target.rippleConfig))}_onTouchStart(l){if(!this._target.rippleDisabled&&!MU(l)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const o=l.changedTouches;if(o)for(let h=0;h<o.length;h++)this.fadeInRipple(o[h].clientX,o[h].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(l=>{!l.config.persistent&&(1===l.state||l.config.terminateOnPointerUp&&0===l.state)&&l.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const l=this._triggerElement;l&&(jU.forEach(o=>xS._eventManager.removeHandler(o,l,this)),this._pointerUpEventsRegistered&&BU.forEach(o=>l.removeEventListener(o,this,FU)))}}xS._eventManager=new nst;const VU=new Fy("mat-ripple-global-options");let ost=(()=>{class s{get disabled(){return this._disabled}set disabled(o){o&&this.fadeOutAllNonPersistent(),this._disabled=o,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(o){this._trigger=o,this._setupTriggerEventsIfEnabled()}constructor(o,h,y,_,I){this._elementRef=o,this._animationMode=I,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=_||{},this._rippleRenderer=new xS(this,h,o,y)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(o,h=0,y){return"number"==typeof o?this._rippleRenderer.fadeInRipple(o,h,{...this.rippleConfig,...y}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...o})}}return s.\u0275fac=function(o){return new(o||s)(gy(C0),gy(H_),gy($x),gy(VU,8),gy(VA,8))},s.\u0275dir=Zy({type:s,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(o,h){2&o&&f1("mat-ripple-unbounded",h.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),s})(),sst=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=L0({type:s}),s.\u0275inj=xy({imports:[_w,_w]}),s})();const ast=["mat-button",""],lst=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],cst=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],UU={capture:!0},zU=["focus","click","mouseenter","touchstart"],aM="mat-button-ripple-uninitialized";let ust=(()=>{class s{constructor(){this._document=Ry(m0,{optional:!0}),this._animationMode=Ry(VA,{optional:!0}),this._globalRippleOptions=Ry(VU,{optional:!0}),this._platform=Ry($x),this._ngZone=Ry(H_),this._onInteraction=o=>{if(o.target===this._document)return;const y=o.target.closest(`[${aM}]`);y&&(y.removeAttribute(aM),this._appendRipple(y))},this._ngZone.runOutsideAngular(()=>{for(const o of zU)this._document?.addEventListener(o,this._onInteraction,UU)})}ngOnDestroy(){for(const o of zU)this._document?.removeEventListener(o,this._onInteraction,UU)}_appendRipple(o){if(!this._document)return;const h=this._document.createElement("span");h.classList.add("mat-mdc-button-ripple");const y=new dst(o,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);y.rippleConfig.centered=o.hasAttribute("mat-icon-button"),new xS(y,this._ngZone,h,this._platform).setupTriggerEvents(o),o.append(h)}_createMatRipple(o){if(!this._document)return;o.querySelector(".mat-mdc-button-ripple")?.remove(),o.removeAttribute(aM);const h=this._document.createElement("span");h.classList.add("mat-mdc-button-ripple");const y=new ost(new C0(h),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return y._isInitialized=!0,y.trigger=o,o.append(h),y}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=ry({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();class dst{constructor(l,o,h){this._button=l,this._globalRippleOptions=o,this._setRippleConfig(o,h)}_setRippleConfig(l,o){this.rippleConfig=l||{},"NoopAnimations"===o&&(this.rippleConfig.animation={enterDuration:0,exitDuration:0})}get rippleDisabled(){return this._button.hasAttribute("disabled")||!!this._globalRippleOptions?.disabled}}const hst=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],fst=gN(Xot(Zot(class{constructor(s){this._elementRef=s}})));let pst=(()=>{class s extends fst{get ripple(){return!this._ripple&&this._rippleLoader&&(this._ripple=this._rippleLoader._createMatRipple(this._elementRef.nativeElement)),this._ripple}set ripple(o){this._ripple=o}constructor(o,h,y,_){super(o),this._platform=h,this._ngZone=y,this._animationMode=_,this._focusMonitor=Ry(Uot),this._rippleLoader=Ry(ust),this._isFab=!1;const I=o.nativeElement.classList;for(const V of hst)this._hasHostAttributes(V.selector)&&V.mdcClasses.forEach($=>{I.add($)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnChanges(){this._ripple&&(this._ripple.disabled=this.disableRipple||this.disabled)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(o="program",h){o?this._focusMonitor.focusVia(this._elementRef.nativeElement,o,h):this._elementRef.nativeElement.focus(h)}_hasHostAttributes(...o){return o.some(h=>this._elementRef.nativeElement.hasAttribute(h))}}return s.\u0275fac=function(o){EO()},s.\u0275dir=Zy({type:s,features:[t0,N1]}),s})(),HU=(()=>{class s extends pst{constructor(o,h,y,_){super(o,h,y,_)}}return s.\u0275fac=function(o){return new(o||s)(gy(C0),gy($x),gy(H_),gy(VA,8))},s.\u0275cmp=d1({type:s,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostAttrs:["mat-button-ripple-uninitialized",""],hostVars:7,hostBindings:function(o,h){2&o&&(j1("disabled",h.disabled||null),f1("_mat-animation-noopable","NoopAnimations"===h._animationMode)("mat-unthemed",!h.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[t0],attrs:ast,ngContentSelectors:cst,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(o,h){1&o&&(jE(lst),r1(0,"span",0),O0(1),Yy(2,"span",1),O0(3,1),Hy(),O0(4,2),r1(5,"span",2)(6,"span",3)),2&o&&f1("mdc-button__ripple",!h._isFab)("mdc-fab__ripple",h._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),s})(),GU=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=L0({type:s}),s.\u0275inj=xy({imports:[_w,sst,_w]}),s})();const yst=["*"],xst=new Fy("MAT_CARD_CONFIG");let $U=(()=>{class s{constructor(o){this.appearance=o?.appearance||"raised"}}return s.\u0275fac=function(o){return new(o||s)(gy(xst,8))},s.\u0275cmp=d1({type:s,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(o,h){2&o&&f1("mat-mdc-card-outlined","outlined"===h.appearance)("mdc-card--outlined","outlined"===h.appearance)},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:yst,decls:1,vars:0,template:function(o,h){1&o&&(jE(),O0(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{color:rgba(0, 0, 0, 0.6);flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mdc-card__action--icon:not(:disabled){color:rgba(0, 0, 0, 0.6)}.mat-mdc-card{border-radius:var(--mdc-elevated-card-container-shape);background-color:var(--mdc-elevated-card-container-color);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color);box-shadow:var(--mdc-elevated-card-container-elevation);--mdc-elevated-card-container-shape:4px;--mdc-outlined-card-container-shape:4px;--mdc-outlined-card-outline-width:1px}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape)}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width);border-style:solid;border-color:var(--mdc-outlined-card-outline-color);border-radius:var(--mdc-outlined-card-container-shape);background-color:var(--mdc-outlined-card-container-color);box-shadow:var(--mdc-outlined-card-container-elevation)}.mat-mdc-card-outlined .mdc-card::after{border-radius:var(--mdc-outlined-card-container-shape)}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font);line-height:var(--mat-card-title-text-line-height);font-size:var(--mat-card-title-text-size);letter-spacing:var(--mat-card-title-text-tracking);font-weight:var(--mat-card-title-text-weight)}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color);font-family:var(--mat-card-subtitle-text-font);line-height:var(--mat-card-subtitle-text-line-height);font-size:var(--mat-card-subtitle-text-size);letter-spacing:var(--mat-card-subtitle-text-tracking);font-weight:var(--mat-card-subtitle-text-weight)}.mat-mdc-card{position:relative}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0}),s})(),qU=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275dir=Zy({type:s,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]}),s})(),WU=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=L0({type:s}),s.\u0275inj=xy({imports:[_w,GE,_w]}),s})();const Ast=["background"];function Sst(s,l){if(1&s){const o=$O();Yy(0,"div",6)(1,"h1",7)(2,"small"),w_(3," \u0418\u0437\u0432\u044a\u0440\u0448\u0432\u0430\u043c\u0435 "),Hy(),w_(4," \u0426\u044f\u043b\u043e\u0441\u0442\u043d\u0438 "),Yy(5,"span"),w_(6,"\u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u043d\u0438 \u0440\u0435\u043c\u043e\u043d\u0442\u0438"),Hy()(),Yy(7,"p",8),w_(8," \u0410\u0432\u0442\u043e\u0441\u0435\u0440\u0432\u0438\u0437 \u0432 \u0411\u0443\u0440\u0433\u0430\u0441. \u0415\u043a\u0441\u043f\u0440\u0435\u0441\u0435\u043d \u0440\u0435\u043c\u043e\u043d\u0442 \u043d\u0430 \u0432\u0430\u0448\u0438\u044f \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b - \u0432\u044a\u043d\u0448\u0435\u043d \u0432\u0438\u0434, \u0434\u0432\u0438\u0433\u0430\u0442\u0435\u043b, \u0445\u043e\u0434\u043e\u0432\u0430 \u0447\u0430\u0441\u0442. "),Hy(),Yy(9,"div",9)(10,"button",10),Z0("click",function(){return m2(o),g2(uE().showMoreInfo())}),w_(11,"\u041f\u043e\u0432\u0435\u0447\u0435 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"),Hy(),Yy(12,"button",11),w_(13,"\u0421\u0432\u044a\u0440\u0436\u0438 \u0441\u0435 \u0441 \u043d\u0430\u0441"),Hy()()()}2&s&&D_("@slideInOut",void 0)}function Cst(s,l){1&s&&(Yy(0,"div",12)(1,"h1",7)(2,"small"),w_(3," \u041f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u043c\u0435 "),Hy(),w_(4," \u0414\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0430 "),Yy(5,"span"),w_(6,"\u0420\u0435\u043c\u043e\u043d\u0442 \u0438 \u043e\u0431\u0441\u043b\u0443\u0436\u0432\u0430\u043d\u0435"),Hy()(),Yy(7,"p",8),w_(8," \u041f\u0440\u043e\u0444\u0435\u0441\u0438\u043e\u043d\u0430\u043b\u043d\u0430 \u0434\u0438\u0430\u0433\u043d\u043e\u0441\u0442\u0438\u043a\u0430. \u0412\u0441\u0438\u0447\u043a\u0438 \u0432\u0438\u0434\u043e\u0432\u0435 \u0440\u0435\u043c\u043e\u043d\u0442\u0438 \u043d\u0430 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u0438. \u0414\u043e\u0432\u0435\u0440\u0435\u0442\u0435 \u043d\u0438 \u0441\u0435, \u0438 \u0449\u0435 \u0441\u0435 \u043f\u043e\u0433\u0440\u0438\u0436\u0438\u043c \u0432\u0430\u0448\u0438\u0442\u0435 \u043a\u043e\u043b\u0438 \u043d\u0435 \u0441\u0430\u043c\u043e \u0434\u0430 \u0431\u044a\u0434\u0430\u0442 \u0440\u0435\u043c\u043e\u043d\u0442\u0438\u0440\u0430\u043d\u0438, \u043d\u043e \u0438 \u043f\u043e\u0434\u0434\u044a\u0440\u0436\u0430\u043d\u0438 \u0432 \u043e\u0442\u043b\u0438\u0447\u043d\u043e \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u043e \u0441\u044a\u0441\u0442\u043e\u044f\u043d\u0438\u0435! "),Hy()()),2&s&&D_("@slideInOut",void 0)}let YU=(()=>{class s{constructor(){this.isShow=!1}showMoreInfo(){this.isShow=!0,this.unblurBackground()}unblurBackground(){"none"!=this.background.nativeElement.style.filter&&(this.background.nativeElement.style.filter="none")}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275cmp=d1({type:s,selectors:[["app-home"]],viewQuery:function(o,h){if(1&o&&fE(Ast,5),2&o){let y;s1(y=a1())&&(h.background=y.first)}},standalone:!0,features:[BE],decls:6,vars:2,consts:[[1,"pbl-container"],[1,"img-wrapper"],["src","assets/home2.jpg","alt","background"],["background",""],["class","content",4,"ngIf"],["class","more-info",4,"ngIf"],[1,"content"],[1,"title"],[1,"desc"],[1,"btns-wrapper"],["mat-raised-button","",3,"click"],["mat-raised-button","","routerLink","../contacts"],[1,"more-info"]],template:function(o,h){1&o&&(Yy(0,"div",0)(1,"div",1),r1(2,"img",2,3),Hy(),A0(4,Sst,14,1,"div",4),A0(5,Cst,9,1,"div",5),Hy()),2&o&&(Q_(4),D_("ngIf",!h.isShow),Q_(1),D_("ngIf",h.isShow))},dependencies:[GE,$D,GU,HU,WU,nM],styles:[".img-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;filter:blur(8px);max-height:80vh}.content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;top:5%;left:3%;position:absolute;padding:2rem;border-radius:8px}.title[_ngcontent-%COMP%]{font-size:36px;color:#fff;text-transform:uppercase;font-weight:600}.title[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:20px;display:block;margin-bottom:10px;text-transform:capitalize;font-weight:600}.title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#0037c1}.desc[_ngcontent-%COMP%]{font-size:20px;color:#fff}.btns-wrapper[_ngcontent-%COMP%]{display:flex;gap:1rem}.btns-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:190px}.more-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;bottom:5%;left:3%;position:absolute;padding:2rem;border-radius:8px}"],data:{animation:[XD("slideInOut",[$T(":enter",[hx({transform:"translateX(-100%)"}),GT("1000ms ease",hx({transform:"translateX(0)"}))]),$T(":leave",[GT("1000ms ease",hx({transform:"translateX(-100%)"}))])])]}}),s})(),Mst=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275cmp=d1({type:s,selectors:[["app-about"]],standalone:!0,features:[BE],decls:2,vars:0,template:function(o,h){1&o&&(Yy(0,"p"),w_(1,"about works!"),Hy())},dependencies:[GE]}),s})();class Dst extends G_{constructor(l=1/0,o=1/0,h=pN){super(),this._bufferSize=l,this._windowTime=o,this._timestampProvider=h,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=o===1/0,this._bufferSize=Math.max(1,l),this._windowTime=Math.max(1,o)}next(l){const{isStopped:o,_buffer:h,_infiniteTimeWindow:y,_timestampProvider:_,_windowTime:I}=this;o||(h.push(l),!y&&h.push(_.now()+I)),this._trimBuffer(),super.next(l)}_subscribe(l){this._throwIfClosed(),this._trimBuffer();const o=this._innerSubscribe(l),{_infiniteTimeWindow:h,_buffer:y}=this,_=y.slice();for(let I=0;I<_.length&&!l.closed;I+=h?1:2)l.next(_[I]);return this._checkFinalizedStatuses(l),o}_trimBuffer(){const{_bufferSize:l,_timestampProvider:o,_buffer:h,_infiniteTimeWindow:y}=this,_=(y?1:2)*l;if(l<1/0&&_<h.length&&h.splice(0,h.length-_),!y){const I=o.now();let V=0;for(let $=1;$<h.length&&h[$]<=I;$+=2)V=$;V&&h.splice(0,V+1)}}}class kst{constructor(l){this._box=l,this._destroyed=new G_,this._resizeSubject=new G_,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(o=>this._resizeSubject.next(o)))}observe(l){return this._elementObservables.has(l)||this._elementObservables.set(l,new qy(o=>{const h=this._resizeSubject.subscribe(o);return this._resizeObserver?.observe(l,{box:this._box}),()=>{this._resizeObserver?.unobserve(l),h.unsubscribe(),this._elementObservables.delete(l)}}).pipe(Hx(o=>o.some(h=>h.target===l)),function Ist(s,l,o){let h,y=!1;return s&&"object"==typeof s?({bufferSize:h=1/0,windowTime:l=1/0,refCount:y=!1,scheduler:o}=s):h=s??1/0,w1({connector:()=>new Dst(h,l,o),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:y})}({bufferSize:1,refCount:!0}),bS(this._destroyed))),this._elementObservables.get(l)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}}let Ost=(()=>{class s{constructor(){this._observers=new Map,this._ngZone=Ry(H_)}ngOnDestroy(){for(const[,o]of this._observers)o.destroy();this._observers.clear()}observe(o,h){const y=h?.box||"content-box";return this._observers.has(y)||this._observers.set(y,new kst(y)),this._observers.get(y).observe(o)}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=ry({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Rst=(()=>{class s{create(o){return typeof MutationObserver>"u"?null:new MutationObserver(o)}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=ry({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Pst=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=L0({type:s}),s.\u0275inj=xy({providers:[Rst]}),s})();const Nst=["notch"],Lst=["matFormFieldNotchedOutline",""],Fst=["*"],jst=["textField"],Bst=["iconPrefixContainer"],Vst=["textPrefixContainer"];function Ust(s,l){1&s&&r1(0,"span",19)}function zst(s,l){if(1&s&&(Yy(0,"label",17),O0(1,1),A0(2,Ust,1,0,"span",18),Hy()),2&s){const o=uE(2);D_("floating",o._shouldLabelFloat())("monitorResize",o._hasOutline())("id",o._labelId),j1("for",o._control.id)("aria-owns",o._control.id),Q_(2),D_("ngIf",!o.hideRequiredMarker&&o._control.required)}}function Hst(s,l){1&s&&A0(0,zst,3,6,"label",16),2&s&&D_("ngIf",uE()._hasFloatingLabel())}function Gst(s,l){1&s&&r1(0,"div",20)}function $st(s,l){}function qst(s,l){1&s&&A0(0,$st,0,0,"ng-template",22),2&s&&(uE(2),D_("ngTemplateOutlet",gC(1)))}function Wst(s,l){if(1&s&&(Yy(0,"div",21),A0(1,qst,1,1,"ng-template",9),Hy()),2&s){const o=uE();D_("matFormFieldNotchedOutlineOpen",o._shouldLabelFloat()),Q_(1),D_("ngIf",!o._forceDisplayInfixLabel())}}function Yst(s,l){1&s&&(Yy(0,"div",23,24),O0(2,2),Hy())}function Kst(s,l){1&s&&(Yy(0,"div",25,26),O0(2,3),Hy())}function Xst(s,l){}function Zst(s,l){1&s&&A0(0,Xst,0,0,"ng-template",22),2&s&&(uE(),D_("ngTemplateOutlet",gC(1)))}function Jst(s,l){1&s&&(Yy(0,"div",27),O0(1,4),Hy())}function Qst(s,l){1&s&&(Yy(0,"div",28),O0(1,5),Hy())}function tat(s,l){1&s&&r1(0,"div",29)}function eat(s,l){1&s&&(Yy(0,"div",30),O0(1,6),Hy()),2&s&&D_("@transitionMessages",uE()._subscriptAnimationState)}function nat(s,l){if(1&s&&(Yy(0,"mat-hint",34),w_(1),Hy()),2&s){const o=uE(2);D_("id",o._hintLabelId),Q_(1),JO(o.hintLabel)}}function rat(s,l){if(1&s&&(Yy(0,"div",31),A0(1,nat,2,2,"mat-hint",32),O0(2,7),r1(3,"div",33),O0(4,8),Hy()),2&s){const o=uE();D_("@transitionMessages",o._subscriptAnimationState),Q_(1),D_("ngIf",o.hintLabel)}}const iat=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],oat=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let yN=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275dir=Zy({type:s,selectors:[["mat-label"]]}),s})(),sat=0;const KU=new Fy("MatError");let aat=(()=>{class s{constructor(o,h){this.id="mat-mdc-error-"+sat++,o||h.nativeElement.setAttribute("aria-live","polite")}}return s.\u0275fac=function(o){return new(o||s)(DA("aria-live"),gy(C0))},s.\u0275dir=Zy({type:s,selectors:[["mat-error"],["","matError",""]],hostAttrs:["aria-atomic","true",1,"mat-mdc-form-field-error","mat-mdc-form-field-bottom-align"],hostVars:1,hostBindings:function(o,h){2&o&&_C("id",h.id)},inputs:{id:"id"},features:[E0([{provide:KU,useExisting:s}])]}),s})(),lat=0,XU=(()=>{class s{constructor(){this.align="start",this.id="mat-mdc-hint-"+lat++}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275dir=Zy({type:s,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(o,h){2&o&&(_C("id",h.id),j1("align",null),f1("mat-mdc-form-field-hint-end","end"===h.align))},inputs:{align:"align",id:"id"}}),s})();const cat=new Fy("MatPrefix"),ZU=new Fy("MatSuffix");let uat=(()=>{class s{constructor(){this._isText=!1}set _isTextSelector(o){this._isText=!0}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275dir=Zy({type:s,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],inputs:{_isTextSelector:["matTextSuffix","_isTextSelector"]},features:[E0([{provide:ZU,useExisting:s}])]}),s})();const JU=new Fy("FloatingLabelParent");let QU=(()=>{class s{get floating(){return this._floating}set floating(o){this._floating=o,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(o){this._monitorResize=o,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(o){this._elementRef=o,this._floating=!1,this._monitorResize=!1,this._resizeObserver=Ry(Ost),this._ngZone=Ry(H_),this._parent=Ry(JU),this._resizeSubscription=new w}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return function dat(s){if(null!==s.offsetParent)return s.scrollWidth;const o=s.cloneNode(!0);o.style.setProperty("position","absolute"),o.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(o);const h=o.scrollWidth;return o.remove(),h}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}}return s.\u0275fac=function(o){return new(o||s)(gy(C0))},s.\u0275dir=Zy({type:s,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(o,h){2&o&&f1("mdc-floating-label--float-above",h.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}}),s})();const tz="mdc-line-ripple--active",jI="mdc-line-ripple--deactivating";let ez=(()=>{class s{constructor(o,h){this._elementRef=o,this._handleTransitionEnd=y=>{const _=this._elementRef.nativeElement.classList,I=_.contains(jI);"opacity"===y.propertyName&&I&&_.remove(tz,jI)},h.runOutsideAngular(()=>{o.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const o=this._elementRef.nativeElement.classList;o.remove(jI),o.add(tz)}deactivate(){this._elementRef.nativeElement.classList.add(jI)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}}return s.\u0275fac=function(o){return new(o||s)(gy(C0),gy(H_))},s.\u0275dir=Zy({type:s,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]}),s})(),nz=(()=>{class s{constructor(o,h){this._elementRef=o,this._ngZone=h,this.open=!1}ngAfterViewInit(){const o=this._elementRef.nativeElement.querySelector(".mdc-floating-label");o?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(o.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>o.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(o){this._notch.nativeElement.style.width=this.open&&o?`calc(${o}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:""}}return s.\u0275fac=function(o){return new(o||s)(gy(C0),gy(H_))},s.\u0275cmp=d1({type:s,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(o,h){if(1&o&&fE(Nst,5),2&o){let y;s1(y=a1())&&(h._notch=y.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(o,h){2&o&&f1("mdc-notched-outline--notched",h.open)},inputs:{open:["matFormFieldNotchedOutlineOpen","open"]},attrs:Lst,ngContentSelectors:Fst,decls:5,vars:0,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],["notch",""],[1,"mdc-notched-outline__trailing"]],template:function(o,h){1&o&&(jE(),r1(0,"div",0),Yy(1,"div",1,2),O0(3),Hy(),r1(4,"div",3))},encapsulation:2,changeDetection:0}),s})();const hat={transitionMessages:XD("transitionMessages",[stt("enter",hx({opacity:1,transform:"translateY(0%)"})),$T("void => enter",[hx({opacity:0,transform:"translateY(-5px)"}),GT("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let rz=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275dir=Zy({type:s}),s})();const iz=new Fy("MatFormField"),fat=new Fy("MAT_FORM_FIELD_DEFAULT_OPTIONS");let oz=0,gat=(()=>{class s{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(o){this._hideRequiredMarker=eA(o)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(o){o!==this._floatLabel&&(this._floatLabel=o,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(o){const h=this._appearance;this._appearance=o||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==h&&(this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(o){this._subscriptSizing=o||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(o){this._hintLabel=o,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(o){this._explicitFormFieldControl=o}constructor(o,h,y,_,I,V,$,_n){this._elementRef=o,this._changeDetectorRef=h,this._ngZone=y,this._dir=_,this._platform=I,this._defaults=V,this._animationMode=$,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+oz++,this._hintLabelId="mat-mdc-hint-"+oz++,this._subscriptAnimationState="",this._destroyed=new G_,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,V&&(V.appearance&&(this.appearance=V.appearance),this._hideRequiredMarker=!!V?.hideRequiredMarker,V.color&&(this.color=V.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const o=this._control;o.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${o.controlType}`),o.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),o.ngControl&&o.ngControl.valueChanges&&o.ngControl.valueChanges.pipe(bS(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(o=>!o._isText),this._hasTextPrefix=!!this._prefixChildren.find(o=>o._isText),this._hasIconSuffix=!!this._suffixChildren.find(o=>!o._isText),this._hasTextSuffix=!!this._suffixChildren.find(o=>o._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),q1(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(bS(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(bS(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(o){const h=this._control?this._control.ngControl:null;return h&&h[o]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){this._hasOutline()&&this._floatingLabel&&this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth()):this._notchedOutline?._setNotchWidth(0)}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let o=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&o.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const h=this._hintChildren?this._hintChildren.find(_=>"start"===_.align):null,y=this._hintChildren?this._hintChildren.find(_=>"end"===_.align):null;h?o.push(h.id):this._hintLabel&&o.push(this._hintLabelId),y&&o.push(y.id)}else this._errorChildren&&o.push(...this._errorChildren.map(h=>h.id));this._control.setDescribedByIds(o)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const o=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(o.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const h=this._iconPrefixContainer?.nativeElement,y=this._textPrefixContainer?.nativeElement,_=h?.getBoundingClientRect().width??0,I=y?.getBoundingClientRect().width??0;o.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${_+I}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const o=this._elementRef.nativeElement;if(o.getRootNode){const h=o.getRootNode();return h&&h!==o}return document.documentElement.contains(o)}}return s.\u0275fac=function(o){return new(o||s)(gy(C0),gy(MC),gy(H_),gy(Wot),gy($x),gy(fat,8),gy(VA,8),gy(m0))},s.\u0275cmp=d1({type:s,selectors:[["mat-form-field"]],contentQueries:function(o,h,y){if(1&o&&(pE(y,yN,5),pE(y,yN,7),pE(y,rz,5),pE(y,cat,5),pE(y,ZU,5),pE(y,KU,5),pE(y,XU,5)),2&o){let _;s1(_=a1())&&(h._labelChildNonStatic=_.first),s1(_=a1())&&(h._labelChildStatic=_.first),s1(_=a1())&&(h._formFieldControl=_.first),s1(_=a1())&&(h._prefixChildren=_),s1(_=a1())&&(h._suffixChildren=_),s1(_=a1())&&(h._errorChildren=_),s1(_=a1())&&(h._hintChildren=_)}},viewQuery:function(o,h){if(1&o&&(fE(jst,5),fE(Bst,5),fE(Vst,5),fE(QU,5),fE(nz,5),fE(ez,5)),2&o){let y;s1(y=a1())&&(h._textField=y.first),s1(y=a1())&&(h._iconPrefixContainer=y.first),s1(y=a1())&&(h._textPrefixContainer=y.first),s1(y=a1())&&(h._floatingLabel=y.first),s1(y=a1())&&(h._notchedOutline=y.first),s1(y=a1())&&(h._lineRipple=y.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(o,h){2&o&&f1("mat-mdc-form-field-label-always-float",h._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",h._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",h._hasIconSuffix)("mat-form-field-invalid",h._control.errorState)("mat-form-field-disabled",h._control.disabled)("mat-form-field-autofilled",h._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===h._animationMode)("mat-form-field-appearance-fill","fill"==h.appearance)("mat-form-field-appearance-outline","outline"==h.appearance)("mat-form-field-hide-placeholder",h._hasFloatingLabel()&&!h._shouldLabelFloat())("mat-focused",h._control.focused)("mat-primary","accent"!==h.color&&"warn"!==h.color)("mat-accent","accent"===h.color)("mat-warn","warn"===h.color)("ng-untouched",h._shouldForward("untouched"))("ng-touched",h._shouldForward("touched"))("ng-pristine",h._shouldForward("pristine"))("ng-dirty",h._shouldForward("dirty"))("ng-valid",h._shouldForward("valid"))("ng-invalid",h._shouldForward("invalid"))("ng-pending",h._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[E0([{provide:iz,useExisting:s},{provide:JU,useExisting:s}])],ngContentSelectors:oat,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(o,h){1&o&&(jE(iat),A0(0,Hst,1,1,"ng-template",null,0,sB),Yy(2,"div",1,2),Z0("click",function(_){return h._control.onContainerClick(_)}),A0(4,Gst,1,0,"div",3),Yy(5,"div",4),A0(6,Wst,2,2,"div",5),A0(7,Yst,3,0,"div",6),A0(8,Kst,3,0,"div",7),Yy(9,"div",8),A0(10,Zst,1,1,"ng-template",9),O0(11),Hy(),A0(12,Jst,2,0,"div",10),A0(13,Qst,2,0,"div",11),Hy(),A0(14,tat,1,0,"div",12),Hy(),Yy(15,"div",13),A0(16,eat,2,1,"div",14),A0(17,rat,5,2,"div",15),Hy()),2&o&&(Q_(2),f1("mdc-text-field--filled",!h._hasOutline())("mdc-text-field--outlined",h._hasOutline())("mdc-text-field--no-label",!h._hasFloatingLabel())("mdc-text-field--disabled",h._control.disabled)("mdc-text-field--invalid",h._control.errorState),Q_(2),D_("ngIf",!h._hasOutline()&&!h._control.disabled),Q_(2),D_("ngIf",h._hasOutline()),Q_(1),D_("ngIf",h._hasIconPrefix),Q_(1),D_("ngIf",h._hasTextPrefix),Q_(2),D_("ngIf",!h._hasOutline()||h._forceDisplayInfixLabel()),Q_(2),D_("ngIf",h._hasTextSuffix),Q_(1),D_("ngIf",h._hasIconSuffix),Q_(1),D_("ngIf",!h._hasOutline()),Q_(1),f1("mat-mdc-form-field-subscript-dynamic-size","dynamic"===h.subscriptSizing),D_("ngSwitch",h._getDisplayedMessages()),Q_(1),D_("ngSwitchCase","error"),Q_(1),D_("ngSwitchCase","hint"))},dependencies:[$D,M6,qD,S6,XU,QU,nz,ez],styles:['.mdc-text-field{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;pointer-events:none}.mdc-notched-outline__trailing{flex-grow:1}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{border-top:1px solid;border-bottom:1px solid}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{max-width:calc(100% - 12px * 2)}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{line-height:normal;pointer-events:all}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[hat.transitionMessages]},changeDetection:0}),s})(),vN=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=L0({type:s}),s.\u0275inj=xy({imports:[_w,GE,Pst,_w]}),s})();const lz=iM({passive:!0});let yat=(()=>{class s{constructor(o,h){this._platform=o,this._ngZone=h,this._monitoredElements=new Map}monitor(o){if(!this._platform.isBrowser)return Ky;const h=nA(o),y=this._monitoredElements.get(h);if(y)return y.subject;const _=new G_,I="cdk-text-field-autofilled",V=$=>{"cdk-text-field-autofill-start"!==$.animationName||h.classList.contains(I)?"cdk-text-field-autofill-end"===$.animationName&&h.classList.contains(I)&&(h.classList.remove(I),this._ngZone.run(()=>_.next({target:$.target,isAutofilled:!1}))):(h.classList.add(I),this._ngZone.run(()=>_.next({target:$.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{h.addEventListener("animationstart",V,lz),h.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(h,{subject:_,unlisten:()=>{h.removeEventListener("animationstart",V,lz)}}),_}stopMonitoring(o){const h=nA(o),y=this._monitoredElements.get(h);y&&(y.unlisten(),y.subject.complete(),h.classList.remove("cdk-text-field-autofill-monitored"),h.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(h))}ngOnDestroy(){this._monitoredElements.forEach((o,h)=>this.stopMonitoring(h))}}return s.\u0275fac=function(o){return new(o||s)(Py($x),Py(H_))},s.\u0275prov=ry({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),vat=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=L0({type:s}),s.\u0275inj=xy({}),s})();function cz(...s){const l=g0(s),{args:o,keys:h}=s8(s),y=new qy(_=>{const{length:I}=o;if(!I)return void _.complete();const V=new Array(I);let $=I,_n=I;for(let ha=0;ha<I;ha++){let Ba=!1;W0(o[ha]).subscribe(N_(_,_d=>{Ba||(Ba=!0,_n--),V[ha]=_d},()=>$--,void 0,()=>{(!$||!Ba)&&(_n||_.next(h?l8(h,V):V),_.complete())}))}});return l?y.pipe(a8(l)):y}let uz=(()=>{class s{constructor(o,h){this._renderer=o,this._elementRef=h,this.onChange=y=>{},this.onTouched=()=>{}}setProperty(o,h){this._renderer.setProperty(this._elementRef.nativeElement,o,h)}registerOnTouched(o){this.onTouched=o}registerOnChange(o){this.onChange=o}setDisabledState(o){this.setProperty("disabled",o)}}return s.\u0275fac=function(o){return new(o||s)(gy(sE),gy(C0))},s.\u0275dir=Zy({type:s}),s})(),iA=(()=>{class s extends uz{}return s.\u0275fac=function(){let l;return function(h){return(l||(l=v1(s)))(h||s)}}(),s.\u0275dir=Zy({type:s,features:[t0]}),s})();const bE=new Fy("NgValueAccessor"),bat={provide:bE,useExisting:x0(()=>BI),multi:!0},xat=new Fy("CompositionEventMode");let BI=(()=>{class s extends uz{constructor(o,h,y){super(o,h),this._compositionMode=y,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function wat(){const s=uT()?uT().getUserAgent():"";return/android (\d+)/.test(s.toLowerCase())}())}writeValue(o){this.setProperty("value",o??"")}_handleInput(o){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(o)}_compositionStart(){this._composing=!0}_compositionEnd(o){this._composing=!1,this._compositionMode&&this.onChange(o)}}return s.\u0275fac=function(o){return new(o||s)(gy(sE),gy(C0),gy(xat,8))},s.\u0275dir=Zy({type:s,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(o,h){1&o&&Z0("input",function(_){return h._handleInput(_.target.value)})("blur",function(){return h.onTouched()})("compositionstart",function(){return h._compositionStart()})("compositionend",function(_){return h._compositionEnd(_.target.value)})},features:[E0([bat]),t0]}),s})();function yT(s){return null==s||("string"==typeof s||Array.isArray(s))&&0===s.length}function hz(s){return null!=s&&"number"==typeof s.length}const D1=new Fy("NgValidators"),vT=new Fy("NgAsyncValidators"),Eat=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Tat{static min(l){return function fz(s){return l=>{if(yT(l.value)||yT(s))return null;const o=parseFloat(l.value);return!isNaN(o)&&o<s?{min:{min:s,actual:l.value}}:null}}(l)}static max(l){return function pz(s){return l=>{if(yT(l.value)||yT(s))return null;const o=parseFloat(l.value);return!isNaN(o)&&o>s?{max:{max:s,actual:l.value}}:null}}(l)}static required(l){return mz(l)}static requiredTrue(l){return function gz(s){return!0===s.value?null:{required:!0}}(l)}static email(l){return yz(l)}static minLength(l){return function vz(s){return l=>yT(l.value)||!hz(l.value)?null:l.value.length<s?{minlength:{requiredLength:s,actualLength:l.value.length}}:null}(l)}static maxLength(l){return function _z(s){return l=>hz(l.value)&&l.value.length>s?{maxlength:{requiredLength:s,actualLength:l.value.length}}:null}(l)}static pattern(l){return bz(l)}static nullValidator(l){return null}static compose(l){return Sz(l)}static composeAsync(l){return Cz(l)}}function mz(s){return yT(s.value)?{required:!0}:null}function yz(s){return yT(s.value)||Eat.test(s.value)?null:{email:!0}}function bz(s){if(!s)return VI;let l,o;return"string"==typeof s?(o="","^"!==s.charAt(0)&&(o+="^"),o+=s,"$"!==s.charAt(s.length-1)&&(o+="$"),l=new RegExp(o)):(o=s.toString(),l=s),h=>{if(yT(h.value))return null;const y=h.value;return l.test(y)?null:{pattern:{requiredPattern:o,actualValue:y}}}}function VI(s){return null}function wz(s){return null!=s}function xz(s){return yC(s)?u0(s):s}function Ez(s){let l={};return s.forEach(o=>{l=null!=o?{...l,...o}:l}),0===Object.keys(l).length?null:l}function Tz(s,l){return l.map(o=>o(s))}function Az(s){return s.map(l=>function Aat(s){return!s.validate}(l)?l:o=>l.validate(o))}function Sz(s){if(!s)return null;const l=s.filter(wz);return 0==l.length?null:function(o){return Ez(Tz(o,l))}}function _N(s){return null!=s?Sz(Az(s)):null}function Cz(s){if(!s)return null;const l=s.filter(wz);return 0==l.length?null:function(o){return cz(Tz(o,l).map(xz)).pipe(c_(Ez))}}function bN(s){return null!=s?Cz(Az(s)):null}function Mz(s,l){return null===s?[l]:Array.isArray(s)?[...s,l]:[s,l]}function Dz(s){return s._rawValidators}function Iz(s){return s._rawAsyncValidators}function wN(s){return s?Array.isArray(s)?s:[s]:[]}function UI(s,l){return Array.isArray(s)?s.includes(l):s===l}function kz(s,l){const o=wN(l);return wN(s).forEach(y=>{UI(o,y)||o.push(y)}),o}function Oz(s,l){return wN(l).filter(o=>!UI(s,o))}class Rz{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(l){this._rawValidators=l||[],this._composedValidatorFn=_N(this._rawValidators)}_setAsyncValidators(l){this._rawAsyncValidators=l||[],this._composedAsyncValidatorFn=bN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(l){this._onDestroyCallbacks.push(l)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(l=>l()),this._onDestroyCallbacks=[]}reset(l=void 0){this.control&&this.control.reset(l)}hasError(l,o){return!!this.control&&this.control.hasError(l,o)}getError(l,o){return this.control?this.control.getError(l,o):null}}class U1 extends Rz{get formDirective(){return null}get path(){return null}}class XE extends Rz{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Pz{constructor(l){this._cd=l}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Nz=(()=>{class s extends Pz{constructor(o){super(o)}}return s.\u0275fac=function(o){return new(o||s)(gy(XE,2))},s.\u0275dir=Zy({type:s,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(o,h){2&o&&f1("ng-untouched",h.isUntouched)("ng-touched",h.isTouched)("ng-pristine",h.isPristine)("ng-dirty",h.isDirty)("ng-valid",h.isValid)("ng-invalid",h.isInvalid)("ng-pending",h.isPending)},features:[t0]}),s})(),Lz=(()=>{class s extends Pz{constructor(o){super(o)}}return s.\u0275fac=function(o){return new(o||s)(gy(U1,10))},s.\u0275dir=Zy({type:s,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(o,h){2&o&&f1("ng-untouched",h.isUntouched)("ng-touched",h.isTouched)("ng-pristine",h.isPristine)("ng-dirty",h.isDirty)("ng-valid",h.isValid)("ng-invalid",h.isInvalid)("ng-pending",h.isPending)("ng-submitted",h.isSubmitted)},features:[t0]}),s})();const lM="VALID",HI="INVALID",ES="PENDING",cM="DISABLED";function TN(s){return(GI(s)?s.validators:s)||null}function AN(s,l){return(GI(l)?l.asyncValidators:s)||null}function GI(s){return null!=s&&!Array.isArray(s)&&"object"==typeof s}class Vz{constructor(l,o){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(l),this._assignAsyncValidators(o)}get validator(){return this._composedValidatorFn}set validator(l){this._rawValidators=this._composedValidatorFn=l}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(l){this._rawAsyncValidators=this._composedAsyncValidatorFn=l}get parent(){return this._parent}get valid(){return this.status===lM}get invalid(){return this.status===HI}get pending(){return this.status==ES}get disabled(){return this.status===cM}get enabled(){return this.status!==cM}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(l){this._assignValidators(l)}setAsyncValidators(l){this._assignAsyncValidators(l)}addValidators(l){this.setValidators(kz(l,this._rawValidators))}addAsyncValidators(l){this.setAsyncValidators(kz(l,this._rawAsyncValidators))}removeValidators(l){this.setValidators(Oz(l,this._rawValidators))}removeAsyncValidators(l){this.setAsyncValidators(Oz(l,this._rawAsyncValidators))}hasValidator(l){return UI(this._rawValidators,l)}hasAsyncValidator(l){return UI(this._rawAsyncValidators,l)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(l={}){this.touched=!0,this._parent&&!l.onlySelf&&this._parent.markAsTouched(l)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(l=>l.markAllAsTouched())}markAsUntouched(l={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0})}),this._parent&&!l.onlySelf&&this._parent._updateTouched(l)}markAsDirty(l={}){this.pristine=!1,this._parent&&!l.onlySelf&&this._parent.markAsDirty(l)}markAsPristine(l={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(o=>{o.markAsPristine({onlySelf:!0})}),this._parent&&!l.onlySelf&&this._parent._updatePristine(l)}markAsPending(l={}){this.status=ES,!1!==l.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!l.onlySelf&&this._parent.markAsPending(l)}disable(l={}){const o=this._parentMarkedDirty(l.onlySelf);this.status=cM,this.errors=null,this._forEachChild(h=>{h.disable({...l,onlySelf:!0})}),this._updateValue(),!1!==l.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...l,skipPristineCheck:o}),this._onDisabledChange.forEach(h=>h(!0))}enable(l={}){const o=this._parentMarkedDirty(l.onlySelf);this.status=lM,this._forEachChild(h=>{h.enable({...l,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:l.emitEvent}),this._updateAncestors({...l,skipPristineCheck:o}),this._onDisabledChange.forEach(h=>h(!1))}_updateAncestors(l){this._parent&&!l.onlySelf&&(this._parent.updateValueAndValidity(l),l.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(l){this._parent=l}getRawValue(){return this.value}updateValueAndValidity(l={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===lM||this.status===ES)&&this._runAsyncValidator(l.emitEvent)),!1!==l.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!l.onlySelf&&this._parent.updateValueAndValidity(l)}_updateTreeValidity(l={emitEvent:!0}){this._forEachChild(o=>o._updateTreeValidity(l)),this.updateValueAndValidity({onlySelf:!0,emitEvent:l.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?cM:lM}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(l){if(this.asyncValidator){this.status=ES,this._hasOwnPendingAsyncValidator=!0;const o=xz(this.asyncValidator(this));this._asyncValidationSubscription=o.subscribe(h=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(h,{emitEvent:l})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(l,o={}){this.errors=l,this._updateControlsErrors(!1!==o.emitEvent)}get(l){let o=l;return null==o||(Array.isArray(o)||(o=o.split(".")),0===o.length)?null:o.reduce((h,y)=>h&&h._find(y),this)}getError(l,o){const h=o?this.get(o):this;return h&&h.errors?h.errors[l]:null}hasError(l,o){return!!this.getError(l,o)}get root(){let l=this;for(;l._parent;)l=l._parent;return l}_updateControlsErrors(l){this.status=this._calculateStatus(),l&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(l)}_initObservables(){this.valueChanges=new B0,this.statusChanges=new B0}_calculateStatus(){return this._allControlsDisabled()?cM:this.errors?HI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ES)?ES:this._anyControlsHaveStatus(HI)?HI:lM}_anyControlsHaveStatus(l){return this._anyControls(o=>o.status===l)}_anyControlsDirty(){return this._anyControls(l=>l.dirty)}_anyControlsTouched(){return this._anyControls(l=>l.touched)}_updatePristine(l={}){this.pristine=!this._anyControlsDirty(),this._parent&&!l.onlySelf&&this._parent._updatePristine(l)}_updateTouched(l={}){this.touched=this._anyControlsTouched(),this._parent&&!l.onlySelf&&this._parent._updateTouched(l)}_registerOnCollectionChange(l){this._onCollectionChange=l}_setUpdateStrategy(l){GI(l)&&null!=l.updateOn&&(this._updateOn=l.updateOn)}_parentMarkedDirty(l){return!l&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(l){return null}_assignValidators(l){this._rawValidators=Array.isArray(l)?l.slice():l,this._composedValidatorFn=function Dat(s){return Array.isArray(s)?_N(s):s||null}(this._rawValidators)}_assignAsyncValidators(l){this._rawAsyncValidators=Array.isArray(l)?l.slice():l,this._composedAsyncValidatorFn=function Iat(s){return Array.isArray(s)?bN(s):s||null}(this._rawAsyncValidators)}}class SN extends Vz{constructor(l,o,h){super(TN(o),AN(h,o)),this.controls=l,this._initObservables(),this._setUpdateStrategy(o),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(l,o){return this.controls[l]?this.controls[l]:(this.controls[l]=o,o.setParent(this),o._registerOnCollectionChange(this._onCollectionChange),o)}addControl(l,o,h={}){this.registerControl(l,o),this.updateValueAndValidity({emitEvent:h.emitEvent}),this._onCollectionChange()}removeControl(l,o={}){this.controls[l]&&this.controls[l]._registerOnCollectionChange(()=>{}),delete this.controls[l],this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}setControl(l,o,h={}){this.controls[l]&&this.controls[l]._registerOnCollectionChange(()=>{}),delete this.controls[l],o&&this.registerControl(l,o),this.updateValueAndValidity({emitEvent:h.emitEvent}),this._onCollectionChange()}contains(l){return this.controls.hasOwnProperty(l)&&this.controls[l].enabled}setValue(l,o={}){(function Bz(s,l,o){s._forEachChild((h,y)=>{if(void 0===o[y])throw new py(1002,"")})})(this,0,l),Object.keys(l).forEach(h=>{(function jz(s,l,o){const h=s.controls;if(!(l?Object.keys(h):h).length)throw new py(1e3,"");if(!h[o])throw new py(1001,"")})(this,!0,h),this.controls[h].setValue(l[h],{onlySelf:!0,emitEvent:o.emitEvent})}),this.updateValueAndValidity(o)}patchValue(l,o={}){null!=l&&(Object.keys(l).forEach(h=>{const y=this.controls[h];y&&y.patchValue(l[h],{onlySelf:!0,emitEvent:o.emitEvent})}),this.updateValueAndValidity(o))}reset(l={},o={}){this._forEachChild((h,y)=>{h.reset(l[y],{onlySelf:!0,emitEvent:o.emitEvent})}),this._updatePristine(o),this._updateTouched(o),this.updateValueAndValidity(o)}getRawValue(){return this._reduceChildren({},(l,o,h)=>(l[h]=o.getRawValue(),l))}_syncPendingControls(){let l=this._reduceChildren(!1,(o,h)=>!!h._syncPendingControls()||o);return l&&this.updateValueAndValidity({onlySelf:!0}),l}_forEachChild(l){Object.keys(this.controls).forEach(o=>{const h=this.controls[o];h&&l(h,o)})}_setUpControls(){this._forEachChild(l=>{l.setParent(this),l._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(l){for(const[o,h]of Object.entries(this.controls))if(this.contains(o)&&l(h))return!0;return!1}_reduceValue(){return this._reduceChildren({},(o,h,y)=>((h.enabled||this.disabled)&&(o[y]=h.value),o))}_reduceChildren(l,o){let h=l;return this._forEachChild((y,_)=>{h=o(h,y,_)}),h}_allControlsDisabled(){for(const l of Object.keys(this.controls))if(this.controls[l].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(l){return this.controls.hasOwnProperty(l)?this.controls[l]:null}}const TS=new Fy("CallSetDisabledState",{providedIn:"root",factory:()=>$I}),$I="always";function uM(s,l,o=$I){CN(s,l),l.valueAccessor.writeValue(s.value),(s.disabled||"always"===o)&&l.valueAccessor.setDisabledState?.(s.disabled),function Rat(s,l){l.valueAccessor.registerOnChange(o=>{s._pendingValue=o,s._pendingChange=!0,s._pendingDirty=!0,"change"===s.updateOn&&Uz(s,l)})}(s,l),function Nat(s,l){const o=(h,y)=>{l.valueAccessor.writeValue(h),y&&l.viewToModelUpdate(h)};s.registerOnChange(o),l._registerOnDestroy(()=>{s._unregisterOnChange(o)})}(s,l),function Pat(s,l){l.valueAccessor.registerOnTouched(()=>{s._pendingTouched=!0,"blur"===s.updateOn&&s._pendingChange&&Uz(s,l),"submit"!==s.updateOn&&s.markAsTouched()})}(s,l),function Oat(s,l){if(l.valueAccessor.setDisabledState){const o=h=>{l.valueAccessor.setDisabledState(h)};s.registerOnDisabledChange(o),l._registerOnDestroy(()=>{s._unregisterOnDisabledChange(o)})}}(s,l)}function WI(s,l,o=!0){const h=()=>{};l.valueAccessor&&(l.valueAccessor.registerOnChange(h),l.valueAccessor.registerOnTouched(h)),KI(s,l),s&&(l._invokeOnDestroyCallbacks(),s._registerOnCollectionChange(()=>{}))}function YI(s,l){s.forEach(o=>{o.registerOnValidatorChange&&o.registerOnValidatorChange(l)})}function CN(s,l){const o=Dz(s);null!==l.validator?s.setValidators(Mz(o,l.validator)):"function"==typeof o&&s.setValidators([o]);const h=Iz(s);null!==l.asyncValidator?s.setAsyncValidators(Mz(h,l.asyncValidator)):"function"==typeof h&&s.setAsyncValidators([h]);const y=()=>s.updateValueAndValidity();YI(l._rawValidators,y),YI(l._rawAsyncValidators,y)}function KI(s,l){let o=!1;if(null!==s){if(null!==l.validator){const y=Dz(s);if(Array.isArray(y)&&y.length>0){const _=y.filter(I=>I!==l.validator);_.length!==y.length&&(o=!0,s.setValidators(_))}}if(null!==l.asyncValidator){const y=Iz(s);if(Array.isArray(y)&&y.length>0){const _=y.filter(I=>I!==l.asyncValidator);_.length!==y.length&&(o=!0,s.setAsyncValidators(_))}}}const h=()=>{};return YI(l._rawValidators,h),YI(l._rawAsyncValidators,h),o}function Uz(s,l){s._pendingDirty&&s.markAsDirty(),s.setValue(s._pendingValue,{emitModelToViewChange:!1}),l.viewToModelUpdate(s._pendingValue),s._pendingChange=!1}function zz(s,l){CN(s,l)}function Hz(s,l){s._syncPendingControls(),l.forEach(o=>{const h=o.control;"submit"===h.updateOn&&h._pendingChange&&(o.viewToModelUpdate(h._pendingValue),h._pendingChange=!1)})}const Vat={provide:U1,useExisting:x0(()=>hM)},dM=(()=>Promise.resolve())();let hM=(()=>{class s extends U1{constructor(o,h,y){super(),this.callSetDisabledState=y,this.submitted=!1,this._directives=new Set,this.ngSubmit=new B0,this.form=new SN({},_N(o),bN(h))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(o){dM.then(()=>{const h=this._findContainer(o.path);o.control=h.registerControl(o.name,o.control),uM(o.control,o,this.callSetDisabledState),o.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(o)})}getControl(o){return this.form.get(o.path)}removeControl(o){dM.then(()=>{const h=this._findContainer(o.path);h&&h.removeControl(o.name),this._directives.delete(o)})}addFormGroup(o){dM.then(()=>{const h=this._findContainer(o.path),y=new SN({});zz(y,o),h.registerControl(o.name,y),y.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(o){dM.then(()=>{const h=this._findContainer(o.path);h&&h.removeControl(o.name)})}getFormGroup(o){return this.form.get(o.path)}updateModel(o,h){dM.then(()=>{this.form.get(o.path).setValue(h)})}setValue(o){this.control.setValue(o)}onSubmit(o){return this.submitted=!0,Hz(this.form,this._directives),this.ngSubmit.emit(o),"dialog"===o?.target?.method}onReset(){this.resetForm()}resetForm(o=void 0){this.form.reset(o),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(o){return o.pop(),o.length?this.form.get(o):this.form}}return s.\u0275fac=function(o){return new(o||s)(gy(D1,10),gy(vT,10),gy(TS,8))},s.\u0275dir=Zy({type:s,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(o,h){1&o&&Z0("submit",function(_){return h.onSubmit(_)})("reset",function(){return h.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[E0([Vat]),t0]}),s})();function Gz(s,l){const o=s.indexOf(l);o>-1&&s.splice(o,1)}function $z(s){return"object"==typeof s&&null!==s&&2===Object.keys(s).length&&"value"in s&&"disabled"in s}const qz=class extends Vz{constructor(l=null,o,h){super(TN(o),AN(h,o)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(l),this._setUpdateStrategy(o),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),GI(o)&&(o.nonNullable||o.initialValueIsDefault)&&(this.defaultValue=$z(l)?l.value:l)}setValue(l,o={}){this.value=this._pendingValue=l,this._onChange.length&&!1!==o.emitModelToViewChange&&this._onChange.forEach(h=>h(this.value,!1!==o.emitViewToModelChange)),this.updateValueAndValidity(o)}patchValue(l,o={}){this.setValue(l,o)}reset(l=this.defaultValue,o={}){this._applyFormState(l),this.markAsPristine(o),this.markAsUntouched(o),this.setValue(this.value,o),this._pendingChange=!1}_updateValue(){}_anyControls(l){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(l){this._onChange.push(l)}_unregisterOnChange(l){Gz(this._onChange,l)}registerOnDisabledChange(l){this._onDisabledChange.push(l)}_unregisterOnDisabledChange(l){Gz(this._onDisabledChange,l)}_forEachChild(l){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(l){$z(l)?(this.value=this._pendingValue=l.value,l.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=l}},Hat={provide:XE,useExisting:x0(()=>kN)},Kz=(()=>Promise.resolve())();let kN=(()=>{class s extends XE{constructor(o,h,y,_,I,V){super(),this._changeDetectorRef=I,this.callSetDisabledState=V,this.control=new qz,this._registered=!1,this.name="",this.update=new B0,this._parent=o,this._setValidators(h),this._setAsyncValidators(y),this.valueAccessor=function IN(s,l){if(!l)return null;let o,h,y;return Array.isArray(l),l.forEach(_=>{_.constructor===BI?o=_:function jat(s){return Object.getPrototypeOf(s.constructor)===iA}(_)?h=_:y=_}),y||h||o||null}(0,_)}ngOnChanges(o){if(this._checkForErrors(),!this._registered||"name"in o){if(this._registered&&(this._checkName(),this.formDirective)){const h=o.name.previousValue;this.formDirective.removeControl({name:h,path:this._getPath(h)})}this._setUpControl()}"isDisabled"in o&&this._updateDisabled(o),function DN(s,l){if(!s.hasOwnProperty("model"))return!1;const o=s.model;return!!o.isFirstChange()||!Object.is(l,o.currentValue)}(o,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(o){this.viewModel=o,this.update.emit(o)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){uM(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(o){Kz.then(()=>{this.control.setValue(o,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(o){const h=o.isDisabled.currentValue,y=0!==h&&UE(h);Kz.then(()=>{y&&!this.control.disabled?this.control.disable():!y&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(o){return this._parent?function qI(s,l){return[...l.path,s]}(o,this._parent):[o]}}return s.\u0275fac=function(o){return new(o||s)(gy(U1,9),gy(D1,10),gy(vT,10),gy(bE,10),gy(MC,8),gy(TS,8))},s.\u0275dir=Zy({type:s,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[E0([Hat]),t0,N1]}),s})(),Xz=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275dir=Zy({type:s,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),s})(),Jz=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=L0({type:s}),s.\u0275inj=xy({}),s})();const Kat={provide:U1,useExisting:x0(()=>XI)};let XI=(()=>{class s extends U1{constructor(o,h,y){super(),this.callSetDisabledState=y,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new B0,this._setValidators(o),this._setAsyncValidators(h)}ngOnChanges(o){this._checkFormPresent(),o.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(KI(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(o){const h=this.form.get(o.path);return uM(h,o,this.callSetDisabledState),h.updateValueAndValidity({emitEvent:!1}),this.directives.push(o),h}getControl(o){return this.form.get(o.path)}removeControl(o){WI(o.control||null,o,!1),function Bat(s,l){const o=s.indexOf(l);o>-1&&s.splice(o,1)}(this.directives,o)}addFormGroup(o){this._setUpFormContainer(o)}removeFormGroup(o){this._cleanUpFormContainer(o)}getFormGroup(o){return this.form.get(o.path)}addFormArray(o){this._setUpFormContainer(o)}removeFormArray(o){this._cleanUpFormContainer(o)}getFormArray(o){return this.form.get(o.path)}updateModel(o,h){this.form.get(o.path).setValue(h)}onSubmit(o){return this.submitted=!0,Hz(this.form,this.directives),this.ngSubmit.emit(o),"dialog"===o?.target?.method}onReset(){this.resetForm()}resetForm(o=void 0){this.form.reset(o),this.submitted=!1}_updateDomValue(){this.directives.forEach(o=>{const h=o.control,y=this.form.get(o.path);h!==y&&(WI(h||null,o),(s=>s instanceof qz)(y)&&(uM(y,o,this.callSetDisabledState),o.control=y))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(o){const h=this.form.get(o.path);zz(h,o),h.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(o){if(this.form){const h=this.form.get(o.path);h&&function Lat(s,l){return KI(s,l)}(h,o)&&h.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){CN(this.form,this),this._oldForm&&KI(this._oldForm,this)}_checkFormPresent(){}}return s.\u0275fac=function(o){return new(o||s)(gy(D1,10),gy(vT,10),gy(TS,8))},s.\u0275dir=Zy({type:s,selectors:[["","formGroup",""]],hostBindings:function(o,h){1&o&&Z0("submit",function(_){return h.onSubmit(_)})("reset",function(){return h.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[E0([Kat]),t0,N1]}),s})(),oA=(()=>{class s{constructor(){this._validator=VI}ngOnChanges(o){if(this.inputName in o){const h=this.normalizeInput(o[this.inputName].currentValue);this._enabled=this.enabled(h),this._validator=this._enabled?this.createValidator(h):VI,this._onChange&&this._onChange()}}validate(o){return this._validator(o)}registerOnValidatorChange(o){this._onChange=o}enabled(o){return null!=o}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275dir=Zy({type:s,features:[N1]}),s})();const alt={provide:D1,useExisting:x0(()=>ZI),multi:!0};let ZI=(()=>{class s extends oA{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=UE,this.createValidator=o=>mz}enabled(o){return o}}return s.\u0275fac=function(){let l;return function(h){return(l||(l=v1(s)))(h||s)}}(),s.\u0275dir=Zy({type:s,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(o,h){2&o&&j1("required",h._enabled?"":null)},inputs:{required:"required"},features:[E0([alt]),t0]}),s})();const clt={provide:D1,useExisting:x0(()=>LN),multi:!0};let LN=(()=>{class s extends oA{constructor(){super(...arguments),this.inputName="email",this.normalizeInput=UE,this.createValidator=o=>yz}enabled(o){return o}}return s.\u0275fac=function(){let l;return function(h){return(l||(l=v1(s)))(h||s)}}(),s.\u0275dir=Zy({type:s,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[E0([clt]),t0]}),s})();const hlt={provide:D1,useExisting:x0(()=>FN),multi:!0};let FN=(()=>{class s extends oA{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=o=>o,this.createValidator=o=>bz(o)}}return s.\u0275fac=function(){let l;return function(h){return(l||(l=v1(s)))(h||s)}}(),s.\u0275dir=Zy({type:s,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(o,h){2&o&&j1("pattern",h._enabled?h.pattern:null)},inputs:{pattern:"pattern"},features:[E0([hlt]),t0]}),s})(),flt=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=L0({type:s}),s.\u0275inj=xy({imports:[Jz]}),s})(),mlt=(()=>{class s{static withConfig(o){return{ngModule:s,providers:[{provide:TS,useValue:o.callSetDisabledState??$I}]}}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=L0({type:s}),s.\u0275inj=xy({imports:[flt]}),s})();const glt=new Fy("MAT_INPUT_VALUE_ACCESSOR"),ylt=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let vlt=0;const _lt=Jot(class{constructor(s,l,o,h){this._defaultErrorStateMatcher=s,this._parentForm=l,this._parentFormGroup=o,this.ngControl=h,this.stateChanges=new G_}});let blt=(()=>{class s extends _lt{get disabled(){return this._disabled}set disabled(o){this._disabled=eA(o),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(o){this._id=o||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(Tat.required)??!1}set required(o){this._required=eA(o)}get type(){return this._type}set type(o){this._type=o||"text",this._validateType(),!this._isTextarea&&_U().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(o){o!==this.value&&(this._inputValueAccessor.value=o,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(o){this._readonly=eA(o)}constructor(o,h,y,_,I,V,$,_n,ha,Ba){super(V,_,I,y),this._elementRef=o,this._platform=h,this._autofillMonitor=_n,this._formField=Ba,this._uid="mat-input-"+vlt++,this.focused=!1,this.stateChanges=new G_,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(iy=>_U().has(iy)),this._iOSKeyupListener=iy=>{const ay=iy.target;!ay.value&&0===ay.selectionStart&&0===ay.selectionEnd&&(ay.setSelectionRange(1,1),ay.setSelectionRange(0,0))};const _d=this._elementRef.nativeElement,mg=_d.nodeName.toLowerCase();this._inputValueAccessor=$||_d,this._previousNativeValue=this.value,this.id=this.id,h.IOS&&ha.runOutsideAngular(()=>{o.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===mg,this._isTextarea="textarea"===mg,this._isInFormField=!!Ba,this._isNativeSelect&&(this.controlType=_d.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(o=>{this.autofilled=o.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(o){this._elementRef.nativeElement.focus(o)}_focusChanged(o){o!==this.focused&&(this.focused=o,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const o=this._elementRef.nativeElement.value;this._previousNativeValue!==o&&(this._previousNativeValue=o,this.stateChanges.next())}_dirtyCheckPlaceholder(){const o=this._getPlaceholder();if(o!==this._previousPlaceholder){const h=this._elementRef.nativeElement;this._previousPlaceholder=o,o?h.setAttribute("placeholder",o):h.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){ylt.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let o=this._elementRef.nativeElement.validity;return o&&o.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const o=this._elementRef.nativeElement,h=o.options[0];return this.focused||o.multiple||!this.empty||!!(o.selectedIndex>-1&&h&&h.label)}return this.focused||!this.empty}setDescribedByIds(o){o.length?this._elementRef.nativeElement.setAttribute("aria-describedby",o.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const o=this._elementRef.nativeElement;return this._isNativeSelect&&(o.multiple||o.size>1)}}return s.\u0275fac=function(o){return new(o||s)(gy(C0),gy($x),gy(XE,10),gy(hM,8),gy(XI,8),gy(tst),gy(glt,10),gy(yat),gy(H_),gy(iz,8))},s.\u0275dir=Zy({type:s,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(o,h){1&o&&Z0("focus",function(){return h._focusChanged(!0)})("blur",function(){return h._focusChanged(!1)})("input",function(){return h._onInput()}),2&o&&(_C("id",h.id)("disabled",h.disabled)("required",h.required),j1("name",h.name||null)("readonly",h.readonly&&!h._isNativeSelect||null)("aria-invalid",h.empty&&h.required?null:h.errorState)("aria-required",h.required)("id",h.id),f1("mat-input-server",h._isServer)("mat-mdc-form-field-textarea-control",h._isInFormField&&h._isTextarea)("mat-mdc-form-field-input-control",h._isInFormField)("mdc-text-field__input",h._isInFormField)("mat-mdc-native-select-inline",h._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[E0([{provide:rz,useExisting:s}]),t0,N1]}),s})(),wlt=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=L0({type:s}),s.\u0275inj=xy({imports:[_w,vN,vN,vat,_w]}),s})();const xlt=["*"];let JI;function fM(s){return function Elt(){if(void 0===JI&&(JI=null,typeof window<"u")){const s=window;void 0!==s.trustedTypes&&(JI=s.trustedTypes.createPolicy("angular#components",{createHTML:l=>l}))}return JI}()?.createHTML(s)||s}function pH(s){return Error(`Unable to find icon with the name "${s}"`)}function mH(s){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${s}".`)}function gH(s){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${s}".`)}class sA{constructor(l,o,h){this.url=l,this.svgText=o,this.options=h}}let QI=(()=>{class s{constructor(o,h,y,_){this._httpClient=o,this._sanitizer=h,this._errorHandler=_,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=y}addSvgIcon(o,h,y){return this.addSvgIconInNamespace("",o,h,y)}addSvgIconLiteral(o,h,y){return this.addSvgIconLiteralInNamespace("",o,h,y)}addSvgIconInNamespace(o,h,y,_){return this._addSvgIconConfig(o,h,new sA(y,null,_))}addSvgIconResolver(o){return this._resolvers.push(o),this}addSvgIconLiteralInNamespace(o,h,y,_){const I=this._sanitizer.sanitize(p0.HTML,y);if(!I)throw gH(y);const V=fM(I);return this._addSvgIconConfig(o,h,new sA("",V,_))}addSvgIconSet(o,h){return this.addSvgIconSetInNamespace("",o,h)}addSvgIconSetLiteral(o,h){return this.addSvgIconSetLiteralInNamespace("",o,h)}addSvgIconSetInNamespace(o,h,y){return this._addSvgIconSetConfig(o,new sA(h,null,y))}addSvgIconSetLiteralInNamespace(o,h,y){const _=this._sanitizer.sanitize(p0.HTML,h);if(!_)throw gH(h);const I=fM(_);return this._addSvgIconSetConfig(o,new sA("",I,y))}registerFontClassAlias(o,h=o){return this._fontCssClassesByAlias.set(o,h),this}classNameForFontAlias(o){return this._fontCssClassesByAlias.get(o)||o}setDefaultFontSetClass(...o){return this._defaultFontSetClass=o,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(o){const h=this._sanitizer.sanitize(p0.RESOURCE_URL,o);if(!h)throw mH(o);const y=this._cachedIconsByUrl.get(h);return y?s_(t2(y)):this._loadSvgIconFromConfig(new sA(o,null)).pipe(p1(_=>this._cachedIconsByUrl.set(h,_)),c_(_=>t2(_)))}getNamedSvgIcon(o,h=""){const y=yH(h,o);let _=this._svgIconConfigs.get(y);if(_)return this._getSvgFromConfig(_);if(_=this._getIconConfigFromResolvers(h,o),_)return this._svgIconConfigs.set(y,_),this._getSvgFromConfig(_);const I=this._iconSetConfigs.get(h);return I?this._getSvgFromIconSetConfigs(o,I):cS(pH(y))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(o){return o.svgText?s_(t2(this._svgElementFromConfig(o))):this._loadSvgIconFromConfig(o).pipe(c_(h=>t2(h)))}_getSvgFromIconSetConfigs(o,h){const y=this._extractIconWithNameFromAnySet(o,h);return y?s_(y):cz(h.filter(I=>!I.svgText).map(I=>this._loadSvgIconSetFromConfig(I).pipe(WE(V=>{const _n=`Loading icon set URL: ${this._sanitizer.sanitize(p0.RESOURCE_URL,I.url)} failed: ${V.message}`;return this._errorHandler.handleError(new Error(_n)),s_(null)})))).pipe(c_(()=>{const I=this._extractIconWithNameFromAnySet(o,h);if(!I)throw pH(o);return I}))}_extractIconWithNameFromAnySet(o,h){for(let y=h.length-1;y>=0;y--){const _=h[y];if(_.svgText&&_.svgText.toString().indexOf(o)>-1){const I=this._svgElementFromConfig(_),V=this._extractSvgIconFromSet(I,o,_.options);if(V)return V}}return null}_loadSvgIconFromConfig(o){return this._fetchIcon(o).pipe(p1(h=>o.svgText=h),c_(()=>this._svgElementFromConfig(o)))}_loadSvgIconSetFromConfig(o){return o.svgText?s_(null):this._fetchIcon(o).pipe(p1(h=>o.svgText=h))}_extractSvgIconFromSet(o,h,y){const _=o.querySelector(`[id="${h}"]`);if(!_)return null;const I=_.cloneNode(!0);if(I.removeAttribute("id"),"svg"===I.nodeName.toLowerCase())return this._setSvgAttributes(I,y);if("symbol"===I.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(I),y);const V=this._svgElementFromString(fM("<svg></svg>"));return V.appendChild(I),this._setSvgAttributes(V,y)}_svgElementFromString(o){const h=this._document.createElement("DIV");h.innerHTML=o;const y=h.querySelector("svg");if(!y)throw Error("<svg> tag not found");return y}_toSvgElement(o){const h=this._svgElementFromString(fM("<svg></svg>")),y=o.attributes;for(let _=0;_<y.length;_++){const{name:I,value:V}=y[_];"id"!==I&&h.setAttribute(I,V)}for(let _=0;_<o.childNodes.length;_++)o.childNodes[_].nodeType===this._document.ELEMENT_NODE&&h.appendChild(o.childNodes[_].cloneNode(!0));return h}_setSvgAttributes(o,h){return o.setAttribute("fit",""),o.setAttribute("height","100%"),o.setAttribute("width","100%"),o.setAttribute("preserveAspectRatio","xMidYMid meet"),o.setAttribute("focusable","false"),h&&h.viewBox&&o.setAttribute("viewBox",h.viewBox),o}_fetchIcon(o){const{url:h,options:y}=o,_=y?.withCredentials??!1;if(!this._httpClient)throw function Tlt(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==h)throw Error(`Cannot fetch icon from URL "${h}".`);const I=this._sanitizer.sanitize(p0.RESOURCE_URL,h);if(!I)throw mH(h);const V=this._inProgressUrlFetches.get(I);if(V)return V;const $=this._httpClient.get(I,{responseType:"text",withCredentials:_}).pipe(c_(_n=>fM(_n)),aS(()=>this._inProgressUrlFetches.delete(I)),w1());return this._inProgressUrlFetches.set(I,$),$}_addSvgIconConfig(o,h,y){return this._svgIconConfigs.set(yH(o,h),y),this}_addSvgIconSetConfig(o,h){const y=this._iconSetConfigs.get(o);return y?y.push(h):this._iconSetConfigs.set(o,[h]),this}_svgElementFromConfig(o){if(!o.svgElement){const h=this._svgElementFromString(o.svgText);this._setSvgAttributes(h,o.options),o.svgElement=h}return o.svgElement}_getIconConfigFromResolvers(o,h){for(let y=0;y<this._resolvers.length;y++){const _=this._resolvers[y](h,o);if(_)return Slt(_)?new sA(_.url,null,_.options):new sA(_,null)}}}return s.\u0275fac=function(o){return new(o||s)(Py(pI,8),Py(pP),Py(m0,8),Py(aE))},s.\u0275prov=ry({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function t2(s){return s.cloneNode(!0)}function yH(s,l){return s+":"+l}function Slt(s){return!(!s.url||!s.options)}const Clt=gN(class{constructor(s){this._elementRef=s}}),Mlt=new Fy("MAT_ICON_DEFAULT_OPTIONS"),Dlt=new Fy("mat-icon-location",{providedIn:"root",factory:function Ilt(){const s=Ry(m0),l=s?s.location:null;return{getPathname:()=>l?l.pathname+l.search:""}}}),vH=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],klt=vH.map(s=>`[${s}]`).join(", "),Olt=/^url\(['"]?#(.*?)['"]?\)$/;let _H=(()=>{class s extends Clt{get inline(){return this._inline}set inline(o){this._inline=eA(o)}get svgIcon(){return this._svgIcon}set svgIcon(o){o!==this._svgIcon&&(o?this._updateSvgIcon(o):this._svgIcon&&this._clearSvgElement(),this._svgIcon=o)}get fontSet(){return this._fontSet}set fontSet(o){const h=this._cleanupFontValue(o);h!==this._fontSet&&(this._fontSet=h,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(o){const h=this._cleanupFontValue(o);h!==this._fontIcon&&(this._fontIcon=h,this._updateFontIconClasses())}constructor(o,h,y,_,I,V){super(o),this._iconRegistry=h,this._location=_,this._errorHandler=I,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=w.EMPTY,V&&(V.color&&(this.color=this.defaultColor=V.color),V.fontSet&&(this.fontSet=V.fontSet)),y||o.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(o){if(!o)return["",""];const h=o.split(":");switch(h.length){case 1:return["",h[0]];case 2:return h;default:throw Error(`Invalid icon name: "${o}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const o=this._elementsWithExternalReferences;if(o&&o.size){const h=this._location.getPathname();h!==this._previousPath&&(this._previousPath=h,this._prependPathToReferences(h))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(o){this._clearSvgElement();const h=this._location.getPathname();this._previousPath=h,this._cacheChildrenWithExternalReferences(o),this._prependPathToReferences(h),this._elementRef.nativeElement.appendChild(o)}_clearSvgElement(){const o=this._elementRef.nativeElement;let h=o.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();h--;){const y=o.childNodes[h];(1!==y.nodeType||"svg"===y.nodeName.toLowerCase())&&y.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const o=this._elementRef.nativeElement,h=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(y=>y.length>0);this._previousFontSetClass.forEach(y=>o.classList.remove(y)),h.forEach(y=>o.classList.add(y)),this._previousFontSetClass=h,this.fontIcon!==this._previousFontIconClass&&!h.includes("mat-ligature-font")&&(this._previousFontIconClass&&o.classList.remove(this._previousFontIconClass),this.fontIcon&&o.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(o){return"string"==typeof o?o.trim().split(" ")[0]:o}_prependPathToReferences(o){const h=this._elementsWithExternalReferences;h&&h.forEach((y,_)=>{y.forEach(I=>{_.setAttribute(I.name,`url('${o}#${I.value}')`)})})}_cacheChildrenWithExternalReferences(o){const h=o.querySelectorAll(klt),y=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let _=0;_<h.length;_++)vH.forEach(I=>{const V=h[_],$=V.getAttribute(I),_n=$?$.match(Olt):null;if(_n){let ha=y.get(V);ha||(ha=[],y.set(V,ha)),ha.push({name:I,value:_n[1]})}})}_updateSvgIcon(o){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),o){const[h,y]=this._splitIconName(o);h&&(this._svgNamespace=h),y&&(this._svgName=y),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(y,h).pipe(mT(1)).subscribe(_=>this._setSvgElement(_),_=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${h}:${y}! ${_.message}`))})}}}return s.\u0275fac=function(o){return new(o||s)(gy(C0),gy(QI),DA("aria-hidden"),gy(Dlt),gy(aE),gy(Mlt,8))},s.\u0275cmp=d1({type:s,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(o,h){2&o&&(j1("data-mat-icon-type",h._usingFontIcon()?"font":"svg")("data-mat-icon-name",h._svgName||h.fontIcon)("data-mat-icon-namespace",h._svgNamespace||h.fontSet)("fontIcon",h._usingFontIcon()?h.fontIcon:null),f1("mat-icon-inline",h.inline)("mat-icon-no-color","primary"!==h.color&&"accent"!==h.color&&"warn"!==h.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[t0],ngContentSelectors:xlt,decls:1,vars:0,template:function(o,h){1&o&&(jE(),O0(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),s})(),bH=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=L0({type:s}),s.\u0275inj=xy({imports:[_w,_w]}),s})();let Nlt=(()=>{class s{constructor(){this.url="https://mailthis.to/TT-AVTO-88",this.http=Ry(pI)}postMsg(o){return this.http.post(this.url,o,{responseType:"text"}).pipe(c_(h=>{if(h)return h}),WE(h=>h))}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=ry({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var AS=r(223);const Flt=["map"],Vlt={lat:42.49027206029531,lng:27.45525035767127},Ult=[{name:"TT-AUTO-88",lat:42.4897761,lng:27.4546318,label:"tt-service"}];let zlt=(()=>{class s{constructor(){this.initialMapOptions={pixelRatio:window.devicePixelRatio,zoom:16,center:Vlt}}ngAfterViewInit(){if(!this.map&&this.mapDiv){const h=new AS.Z.service.Platform({apikey:"xJNiolYoXS5cgxyqRubcBAb0g5orfnwYi9J0FUPHnNA"}).createDefaultLayers(),y=new AS.Z.Map(this.mapDiv.nativeElement,h.vector.normal.map,this.initialMapOptions);(function Llt(s,l){var o=document.createElement("iframe"),h=document.documentMode<11&&"pointerEvents"in o.style;o.style.cssText="position:absolute;left:0;top:-100%;width:100%;height:100%;margin:1px 0 0;border:none;opacity:0;pointer-events:none;"+(h?"":"visibility:hidden;"),o.onload=function(){o.contentWindow.onresize=function(){l(s)}},s.appendChild(o)})(this.mapDiv.nativeElement,()=>y.getViewPort().resize()),this.map=y,this.setLandmarks(),y.addEventListener("mapviewchange",_=>this._handleMapChange(_)),new AS.Z.mapevents.Behavior(new AS.Z.mapevents.MapEvents(y))}}setLandmarks(){Ult.forEach(o=>{const h=new AS.Z.map.Icon("/assets/images/marker/marker-"+o.label+".jpg",{size:{w:60,h:60}}),y=new AS.Z.map.Marker({lat:o.lat,lng:o.lng},{data:o.name,icon:h});this.map?.addObject(y)})}_handleMapChange(o){if(o.newValue.lookAt){const h=o.newValue.lookAt;this.map?.setZoom(h.zoom),this.map?.setCenter({lat:h.position.lat,lng:h.position.lng})}}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275cmp=d1({type:s,selectors:[["app-jsmap"]],viewQuery:function(o,h){if(1&o&&fE(Flt,5),2&o){let y;s1(y=a1())&&(h.mapDiv=y.first)}},standalone:!0,features:[BE],decls:2,vars:0,consts:[["id","map"],["map",""]],template:function(o,h){1&o&&r1(0,"div",0,1)},styles:["#map[_ngcontent-%COMP%]{width:100%;height:300px}"]}),s})();function Hlt(s,l){1&s&&(Yy(0,"mat-error"),w_(1,"\u0418\u043c\u0435\u0442\u043e e \u0437\u0430\u0434\u044a\u043b\u0436\u0438\u0442\u0435\u043b\u0435\u043d\u043e"),Hy())}function Glt(s,l){1&s&&(Yy(0,"mat-error"),w_(1,"\u0418\u043c\u0435\u0439\u043b\u0430 e \u0437\u0430\u0434\u044a\u043b\u0436\u0438\u0442\u0435\u043b\u0435\u043d"),Hy())}function $lt(s,l){1&s&&(Yy(0,"mat-error"),w_(1,"\u0418\u043c\u0435\u0439\u043b\u0430 e \u043d\u0435\u0432\u0430\u043b\u0438\u0434\u0435\u043d"),Hy())}function qlt(s,l){1&s&&(Yy(0,"mat-error"),w_(1,"\u0418\u043c\u0435\u0442\u043e e \u0437\u0430\u0434\u044a\u043b\u0436\u0438\u0442\u0435\u043b\u0435\u043d\u043e"),Hy())}function Wlt(s,l){1&s&&(Yy(0,"mat-error"),w_(1,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d\u0430 e \u043d\u0435\u0432\u0430\u043b\u0438\u0434\u0435\u043d"),Hy())}function Ylt(s,l){1&s&&(Yy(0,"mat-error"),w_(1,"\u0421\u044a\u043e\u0431\u0449\u0435\u043d\u0438\u0435 e \u0437\u0430\u0434\u044a\u043b\u0436\u0438\u0442\u0435\u043b\u0435\u043d\u043e"),Hy())}let Klt=(()=>{class s{constructor(){this.contactService=Ry(Nlt),this.formData={}}submit(o){o.invalid||this.contactService.postMsg(o.value).subscribe({next:h=>{console.log(h),location.href="https://mailthis.to/confirm"},error:h=>console.error(h)})}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275cmp=d1({type:s,selectors:[["app-contacts"]],standalone:!0,features:[BE],decls:63,vars:12,consts:[[1,"pbl-container"],[1,"contacts-container"],[1,"form"],[1,"title"],["form","ngForm"],["appearance","fill"],["matInput","","placeholder","John Doe","name","name","required","",3,"ngModel","ngModelChange"],["matSuffix",""],[4,"ngIf"],["matInput","","placeholder","example.com","name","email","required","","email","",3,"ngModel","ngModelChange"],["matInput","","placeholder","+359 xxx xxx xxx","name","phone","required","","pattern","[0-9]{10}",3,"ngModel","ngModelChange"],["matInput","","name","msg","required","","rows","6",3,"ngModel","ngModelChange"],["mat-raised-button","",3,"click"],[1,"contact-info"],[1,"address"],[1,"text-with-icon"],["href","mailto: Toshkina@abv.com",1,"text-with-icon"]],template:function(o,h){if(1&o){const y=$O();Yy(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),w_(4,"\u041f\u0418\u0428\u0415\u0422\u0415 \u041d\u0418"),Hy(),Yy(5,"form",null,4)(7,"mat-form-field",5)(8,"mat-label"),w_(9,"\u0418\u043c\u0435"),Hy(),Yy(10,"input",6),Z0("ngModelChange",function(I){return h.formData.name=I}),Hy(),Yy(11,"mat-icon",7),w_(12,"badge"),Hy(),A0(13,Hlt,2,0,"mat-error",8),Hy(),Yy(14,"mat-form-field",5)(15,"mat-label"),w_(16,"\u0418\u043c\u0435\u0439\u043b"),Hy(),Yy(17,"input",9),Z0("ngModelChange",function(I){return h.formData.email=I}),Hy(),Yy(18,"mat-icon",7),w_(19,"mail"),Hy(),A0(20,Glt,2,0,"mat-error",8),A0(21,$lt,2,0,"mat-error",8),Hy(),Yy(22,"mat-form-field",5)(23,"mat-label"),w_(24,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"),Hy(),Yy(25,"input",10),Z0("ngModelChange",function(I){return h.formData.phone=I}),Hy(),Yy(26,"mat-icon",7),w_(27,"phone"),Hy(),A0(28,qlt,2,0,"mat-error",8),A0(29,Wlt,2,0,"mat-error",8),Hy(),Yy(30,"mat-form-field")(31,"mat-label"),w_(32,"\u0421\u044a\u043e\u0431\u0449\u0435\u043d\u0438\u0435"),Hy(),Yy(33,"textarea",11),Z0("ngModelChange",function(I){return h.formData.msg=I}),Hy(),Yy(34,"mat-icon",7),w_(35,"messages"),Hy(),A0(36,Ylt,2,0,"mat-error",8),Hy(),Yy(37,"button",12),Z0("click",function(){m2(y);const I=gC(6);return g2(h.submit(I))}),w_(38,"\u0418\u0437\u043f\u0440\u0430\u0442\u0438"),Hy()()(),Yy(39,"div",13)(40,"div",3),w_(41,"\u0421\u0432\u044a\u0440\u0436\u0435\u0442\u0435 \u0441\u0435 \u0441 \u043d\u0430\u0441"),Hy(),Yy(42,"div",14)(43,"div",15)(44,"mat-icon"),w_(45,"location_on"),Hy(),Yy(46,"p"),w_(47,"\u0433\u0440. \u0411\u0443\u0440\u0433\u0430\u0441"),Hy()(),Yy(48,"p"),w_(49,"\u0443\u043b. \u0418\u043d\u0434\u0443\u0441\u0442\u0440\u0438\u0430\u043b\u043d\u0430 3"),Hy()(),Yy(50,"a",16)(51,"mat-icon"),w_(52,"mail"),Hy(),Yy(53,"p"),w_(54,"ttavtoserviz@gmail.com"),Hy()(),Yy(55,"div",14)(56,"div",15)(57,"mat-icon"),w_(58,"phone"),Hy(),Yy(59,"p"),w_(60,"0876 603 499"),Hy()()(),Yy(61,"div"),r1(62,"app-jsmap"),Hy()()()()}if(2&o){const y=gC(6);Q_(1),D_("@slideInOut",void 0),Q_(9),D_("ngModel",h.formData.name),Q_(3),D_("ngIf",null==y.controls.name||null==y.controls.name.errors?null:y.controls.name.errors.required),Q_(4),D_("ngModel",h.formData.email),Q_(3),D_("ngIf",null==y.controls.email||null==y.controls.email.errors?null:y.controls.email.errors.required),Q_(1),D_("ngIf",null==y.controls.email||null==y.controls.email.errors?null:y.controls.email.errors.email),Q_(4),D_("ngModel",h.formData.phone),Q_(3),D_("ngIf",null==y.controls.phone||null==y.controls.phone.errors?null:y.controls.phone.errors.required),Q_(1),D_("ngIf",null==y.controls.phone||null==y.controls.phone.errors?null:y.controls.phone.errors.pattern),Q_(4),D_("ngModel",h.formData.msg),Q_(3),D_("ngIf",null==y.controls.msg||null==y.controls.msg.errors?null:y.controls.msg.errors.required),Q_(3),D_("@slideInOut",void 0)}},dependencies:[GE,$D,vN,gat,yN,aat,uat,wlt,blt,bH,_H,GU,HU,mlt,Xz,BI,Nz,Lz,ZI,FN,LN,kN,hM,zlt],styles:[".contacts-container[_ngcontent-%COMP%]{display:flex}.contacts-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;padding:16px;width:50%}.contacts-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-direction:column}.contacts-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:190px;align-self:end}.contacts-container[_ngcontent-%COMP%]   .contact-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:16px;width:50%;gap:1rem}.contacts-container[_ngcontent-%COMP%]   .address[_ngcontent-%COMP%]{display:flex;font-size:18px;gap:.5rem}.contacts-container[_ngcontent-%COMP%]   .text-with-icon[_ngcontent-%COMP%]{display:flex;gap:.5rem}.contacts-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{all:unset;font-size:18px;cursor:pointer}"],data:{animation:[XD("slideInOut",[$T(":enter",[hx({transform:"translateX(-100%)"}),GT("1000ms ease",hx({transform:"translateX(0)"}))]),$T(":leave",[GT("1000ms ease",hx({transform:"translateX(-100%)"}))])])]}}),s})();function Xlt(s,l){if(1&s&&(Yy(0,"mat-card")(1,"mat-card-content")(2,"div",4)(3,"div",5),w_(4),function $5(s,l){const o=J_();let h;const y=s+Y_;o.firstCreatePass?(h=function $K(s,l){if(l)for(let o=l.length-1;o>=0;o--){const h=l[o];if(s===h.name)return h}}(l,o.pipeRegistry),o.data[y]=h,h.onDestroy&&(o.destroyHooks??=[]).push(y,h.onDestroy)):h=o.data[y];const _=h.factory||(h.factory=IT(h.type)),I=Oy(gy);try{const V=NM(!1),$=_();return NM(V),function CW(s,l,o,h){o>=s.data.length&&(s.data[o]=null,s.blueprint[o]=null),l[o]=h}(o,Ty(),y,$),$}finally{Oy(I)}}(5,"uppercase"),Hy(),Yy(6,"div",6),r1(7,"img",7),Hy()()()()),2&s){const o=l.$implicit;D_("@slideInOut",void 0),Q_(4),xD("",q5(5,3,o.title)," "),Q_(3),D_("ngSrc",null==o?null:o.iconPath)}}const Zlt=[{path:"'/'",redirectTo:"home",pathMatch:"full"},{path:"home",component:YU},{path:"about",component:Mst},{path:"services",component:(()=>{class s{constructor(){this.services=[{title:"\u0421\u0415\u0420\u0412\u0418\u0417\u041d\u041e \u041e\u0411\u0421\u041b\u0423\u0416\u0412\u0410\u041d\u0415",iconPath:"assets/images/repair-services/engine.svg"},{title:"\u0421\u041f\u0418\u0420\u0410\u0427\u041d\u0410 \u0421\u0418\u0421\u0422\u0415\u041c\u0410",iconPath:"assets/images/repair-services/brakes.svg"},{title:"\u041a\u041b\u0418\u041c\u0410\u0422\u0418\u041a",iconPath:"assets/images/repair-services/airCondition.svg"},{title:" \u0418\u0417\u041f\u0423\u0421\u041a\u0410\u0422\u0415\u041b\u041d\u0410 \u0421\u0418\u0421\u0422\u0415\u041c\u0410",iconPath:"assets/images/repair-services/exhaustSistem.svg"},{title:"\u0410\u041d\u0413\u0420\u0415\u041d\u0410\u0416\u0415\u041d \u0420\u0415\u041c\u042a\u041a",iconPath:"assets/images/repair-services/tuneUp.svg"},{title:" \u041e\u041a\u0410\u0427\u0412\u0410\u041d\u0415",iconPath:"assets/images/repair-services/suspension.svg"},{title:"\u0421\u043a\u043e\u0440\u043e\u0441\u0442\u043d\u0430 \u043a\u0443\u0442\u0438\u044f",iconPath:"assets/images/repair-services/transmision.svg"}]}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275cmp=d1({type:s,selectors:[["app-services"]],standalone:!0,features:[BE],decls:5,vars:1,consts:[[1,"pbl-container"],[1,"title"],[1,"cells-container"],[4,"ngFor","ngForOf"],[1,"card","pointer"],[1,"card-title"],[1,"content"],["width","100","height","100","alt","icon","priority","",3,"ngSrc"]],template:function(o,h){1&o&&(Yy(0,"div",0)(1,"span",1),w_(2,"\u0423\u0441\u043b\u0443\u0433\u0438"),Hy(),Yy(3,"div",2),A0(4,Xlt,8,5,"mat-card",3),Hy()()),2&o&&(Q_(4),D_("ngForOf",h.services))},dependencies:[GE,E6,D6,WU,$U,qU,H6],styles:[".card[_ngcontent-%COMP%]{width:250px;height:250px;background:#dce1ee;border-radius:8px;display:flex;flex-direction:column;transition:all .2s ease-in-out}.card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{border-radius:8px 8px 0 0;padding:16px;background:white}.card[_ngcontent-%COMP%]:hover{background:#8ba7c8}.cells-container[_ngcontent-%COMP%]{display:flex;gap:2rem;flex-wrap:wrap}.content[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center}"],data:{animation:[XD("slideInOut",[$T(":enter",[hx({transform:"translateX(-500%)"}),GT("1000ms ease",hx({transform:"translateX(0)"}))]),$T(":leave",[GT("1000ms ease",hx({transform:"translateX(-500%)"}))])])]}}),s})()},{path:"contacts",component:Klt}];let Jlt=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=L0({type:s}),s.\u0275inj=xy({imports:[gU.forRoot(Zlt,{useHash:!0}),gU]}),s})();const Qlt=["*",[["mat-toolbar-row"]]],tct=["*","mat-toolbar-row"],ect=gN(class{constructor(s){this._elementRef=s}});let nct=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275dir=Zy({type:s,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),s})(),rct=(()=>{class s extends ect{constructor(o,h,y){super(o),this._platform=h,this._document=y}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return s.\u0275fac=function(o){return new(o||s)(gy(C0),gy($x),gy(m0))},s.\u0275cmp=d1({type:s,selectors:[["mat-toolbar"]],contentQueries:function(o,h,y){if(1&o&&pE(y,nct,5),2&o){let _;s1(_=a1())&&(h._toolbarRows=_)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(o,h){2&o&&f1("mat-toolbar-multiple-rows",h._toolbarRows.length>0)("mat-toolbar-single-row",0===h._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[t0],ngContentSelectors:tct,decls:2,vars:0,template:function(o,h){1&o&&(jE(Qlt),O0(0),O0(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color: inherit;--mdc-outlined-button-label-text-color: inherit}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),s})(),ict=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=L0({type:s}),s.\u0275inj=xy({imports:[_w,_w]}),s})(),wH=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275cmp=d1({type:s,selectors:[["app-header"]],standalone:!0,features:[BE],decls:17,vars:0,consts:[["routerLink","home",1,"logo-wrapper","pointer"],["src","assets/logo.jpg","alt","logo"],[1,"nav"],["routerLinkActive","active","routerLink","home"],["routerLinkActive","active","routerLink","about"],["routerLinkActive","active","routerLink","services"],["routerLinkActive","active","routerLink","contacts"],[1,"socials-wrapper"],["href","https://www.facebook.com/profile.php?id=100091754926950","target","_blank"],["ngSrc","assets/icons/facebook.svg","alt","facebook-icon","width","40","height","40"],["href","https://instagram.com/ttauto88?igshid=MmIzYWVlNDQ5Yg==","target","_blank"],["ngSrc","assets/icons/instagram.svg","alt","facebook-icon","width","40","height","40"]],template:function(o,h){1&o&&(Yy(0,"mat-toolbar")(1,"div",0),r1(2,"img",1),Hy(),Yy(3,"ul",2)(4,"li",3),w_(5,"\u041d\u0430\u0447\u0430\u043b\u043e"),Hy(),Yy(6,"li",4),w_(7,"\u0417\u0430 \u043d\u0430\u0441"),Hy(),Yy(8,"li",5),w_(9,"\u0423\u0441\u043b\u0443\u0433\u0438"),Hy(),Yy(10,"li",6),w_(11,"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0438"),Hy()(),Yy(12,"div",7)(13,"a",8),r1(14,"img",9),Hy(),Yy(15,"a",10),r1(16,"img",11),Hy()()())},dependencies:[GE,ict,rct,H6,nM,aU],styles:[".mat-toolbar[_ngcontent-%COMP%]{font-size:14px;background:linear-gradient(3deg,#1c58a2,transparent);margin-bottom:1rem;margin-top:2rem;display:flex;justify-content:space-between}.logo-wrapper[_ngcontent-%COMP%]{height:83px;z-index:10;display:flex;align-items:center;gap:.5rem}.logo-wrapper[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:52px}.logo-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;border-radius:8px}ul[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0}li[_ngcontent-%COMP%]{display:inline;padding:0 10px;cursor:pointer}li[_ngcontent-%COMP%]:hover{color:#0037c1}.socials-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center}.socials-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:0 10px}"]}),s})(),xH=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275cmp=d1({type:s,selectors:[["app-footer"]],standalone:!0,features:[BE],decls:13,vars:0,consts:[[1,"footer"],[1,"work-time"],[1,"phone"]],template:function(o,h){1&o&&(Yy(0,"div",0)(1,"div",1)(2,"mat-icon"),w_(3,"schedule"),Hy(),Yy(4,"span"),w_(5,"\u0420\u0430\u0431\u043e\u0442\u043d\u043e \u0432\u0440\u0435\u043c\u0435:"),Hy(),Yy(6,"span"),w_(7,"\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u043d\u0438\u043a - \u041f\u0435\u0442\u044a\u043a: 09:00-18:00"),Hy()(),Yy(8,"div",2)(9,"mat-icon"),w_(10,"call"),Hy(),Yy(11,"span"),w_(12,"+359 877 874746"),Hy()()())},dependencies:[GE,bH,_H],styles:[".footer[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:100%;height:64px;align-items:center;padding:0 16px;font-size:14px}.footer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 10px}.footer[_ngcontent-%COMP%]   .work-time[_ngcontent-%COMP%], .footer[_ngcontent-%COMP%]   .phone[_ngcontent-%COMP%]{display:flex;align-items:center}"]}),s})(),oct=(()=>{class s{constructor(){this.title="tt-service"}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275cmp=d1({type:s,selectors:[["app-root"]],decls:3,vars:0,template:function(o,h){1&o&&r1(0,"app-header")(1,"router-outlet")(2,"app-footer")},dependencies:[rN,wH,xH]}),s})(),sct=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=L0({type:s,bootstrap:[oct]}),s.\u0275inj=xy({imports:[nV,Jlt,wH,ont,YU,xH,Dnt]}),s})();ZQ().bootstrapModule(sct).catch(s=>console.error(s))}},e=>{e(e.s=983)}]);